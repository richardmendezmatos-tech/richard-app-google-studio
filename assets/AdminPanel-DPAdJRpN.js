const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BeqFQMH-.js","assets/index-BreVpFhh.css","assets/pdfGenerator-pg2CZ_hZ.js"])))=>i.map(i=>d[i]);
import{c as f,j as e,a9 as ae,aa as Y,W as se,ab as D,T as re,r as h,X as le,a6 as ie,L as q,a4 as W,_ as S,ac as ne,ad as de,ae as oe,af as ce,ag as xe,ah as pe,e as O,d as me,ai as he,aj as ue,ak as H,al as Z,am as K}from"./index-BeqFQMH-.js";import{T as be}from"./trending-up-N-d7avaB.js";import{E as ge}from"./eye-CZwAvosn.js";import{A as fe,I as J,T as ve}from"./trash-2-C55BqWcr.js";import{M as je}from"./mail-D8wkWpJY.js";const U=f("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const we=f("CarFront",[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);const ye=f("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const ke=f("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);const Ne=f("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const X=f("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Ce=f("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const Pe=f("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Le=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Se=f("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);const F=f("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const ee=f("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Ee=({inventory:t})=>{const s=[...t].sort((a,r)=>(r.views||0)-(a.views||0)).slice(0,5),d=t.filter(a=>(a.views||0)>5&&(!a.leads_count||a.leads_count===0)),l=t.filter(a=>!a.views||a.views===0).slice(0,5);return e.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-purple-500/10 rounded-2xl text-purple-400",children:e.jsx(be,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white uppercase tracking-tight",children:"Inteligencia de Inventario"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Análisis en tiempo real del comportamiento de clientes"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/10 dark:to-red-900/10 p-6 rounded-[35px] border border-orange-100 dark:border-orange-500/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-orange-600 dark:text-orange-400",children:[e.jsx(ye,{size:20,fill:"currentColor"}),e.jsx("h3",{className:"font-black uppercase tracking-widest text-xs",children:"Hot List (Más Vistos)"})]}),e.jsx("div",{className:"space-y-4",children:s.map((a,r)=>e.jsx(R,{car:a,rank:r+1,type:"hot"},a.id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 dark:from-slate-800/50 dark:to-gray-900/50 p-6 rounded-[35px] border border-slate-200 dark:border-slate-700 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-600 dark:text-slate-400",children:[e.jsx(Se,{size:20}),e.jsx("h3",{className:"font-black uppercase tracking-widest text-xs",children:"Zombies (Vistos sin Acción)"})]}),e.jsx("div",{className:"space-y-4",children:d.length===0?e.jsx("div",{className:"text-center py-10 opacity-50 text-xs uppercase font-bold",children:"¡Inventario Saludable!"}):d.slice(0,5).map(a=>e.jsx(R,{car:a,type:"zombie"},a.id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/10 dark:to-cyan-900/10 p-6 rounded-[35px] border border-blue-100 dark:border-blue-500/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-blue-500 dark:text-blue-400",children:[e.jsx(ke,{size:20}),e.jsx("h3",{className:"font-black uppercase tracking-widest text-xs",children:"Fantasmas (Invisibles)"})]}),e.jsxs("div",{className:"space-y-4",children:[l.map(a=>e.jsx(R,{car:a,type:"ghost"},a.id)),l.length===0&&e.jsx("div",{className:"text-center py-10 opacity-50 text-xs uppercase font-bold",children:"Todo se ha visto al menos una vez."})]})]})]})]})},R=({car:t,rank:s,type:d})=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-2xl flex items-center gap-4 shadow-sm border border-slate-100 dark:border-slate-800 relative group hover:scale-[1.02] transition-transform duration-300",children:[s&&e.jsxs("div",{className:"absolute -left-2 -top-2 w-6 h-6 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-full flex items-center justify-center text-[10px] font-black shadow-lg",children:["#",s]}),e.jsx("img",{src:t.img,className:"w-12 h-12 object-contain",alt:t.name}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-bold text-slate-800 dark:text-white truncate",children:t.name}),e.jsxs("div",{className:"text-[10px] text-slate-400 font-mono",children:["$",(t.price||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:[e.jsx(ge,{size:10})," ",t.views||0]}),d!=="ghost"&&e.jsxs("div",{className:`flex items-center gap-1 text-[10px] font-bold px-2 py-1 rounded-full ${(t.leads_count||0)>0?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":"bg-rose-100 text-rose-600 dark:bg-rose-900/30"}`,children:[e.jsx(ae,{size:10})," ",t.leads_count||0]}),d==="zombie"&&e.jsxs("button",{className:"mt-2 text-[9px] font-black uppercase tracking-widest text-amber-500 border border-amber-200 dark:border-amber-900 bg-amber-50 dark:bg-amber-900/10 px-2 py-1 rounded-lg hover:bg-amber-100 transition-colors flex items-center gap-1",children:[e.jsx(fe,{size:10})," Optimizar"]})]})]}),Ae=({lead:t,onPrint:s})=>e.jsxs("div",{className:"bg-white/90 dark:bg-slate-900/90 backdrop-blur-md p-5 rounded-[2rem] shadow-lg shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-white/5 group hover:border-[#00aed9] hover:scale-[1.02] transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsx("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-[10px] font-black uppercase tracking-widest text-[#00aed9]",children:t.type}),e.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:t.timestamp?new Date((t.timestamp.seconds||0)*1e3).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"font-black text-slate-800 dark:text-white text-md mb-1 tracking-tight",children:[t.firstName," ",t.lastName]}),e.jsx("div",{className:"text-xs font-medium text-slate-400 truncate mb-4",children:t.vehicleOfInterest||t.message||"Sin detalles"}),t.aiSummary&&e.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-br from-[#00aed9]/5 to-purple-500/5 dark:from-[#00aed9]/10 dark:to-purple-500/10 rounded-2xl border border-[#00aed9]/10 dark:border-white/5 relative overflow-hidden group/ai",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ee,{size:12,className:"text-[#00aed9] animate-pulse"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.15em] text-[#00aed9]",children:"IA Insights"})]}),t.aiScore!==void 0&&e.jsxs("span",{className:`text-[9px] font-black px-1.5 py-0.5 rounded ${t.aiScore>80?"bg-emerald-500/20 text-emerald-500":t.aiScore>50?"bg-amber-500/20 text-amber-500":"bg-red-500/20 text-red-500"}`,children:[t.aiScore,"%"]})]}),e.jsx("p",{className:"text-[11px] leading-relaxed text-slate-600 dark:text-slate-300 line-clamp-2 relative z-10",title:t.aiSummary,children:t.aiSummary}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-[#00aed9]/20 to-transparent blur-2xl opacity-0 group-hover/ai:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-slate-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex gap-2",children:[t.phone&&e.jsxs(e.Fragment,{children:[e.jsx("a",{href:`tel:${t.phone}`,title:"Llamar",className:"p-2.5 bg-emerald-500/10 text-emerald-500 rounded-xl hover:bg-emerald-500/20 transition-colors",children:e.jsx(Pe,{size:14})}),e.jsx("a",{href:`https://wa.me/${t.phone.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",title:"WhatsApp",className:"p-2.5 bg-green-500/10 text-green-600 rounded-xl hover:bg-green-500/20 transition-colors",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})]}),t.email&&e.jsx("a",{href:`mailto:${t.email}`,title:"Enviar Correo",className:"p-2.5 bg-[#00aed9]/10 text-[#00aed9] rounded-xl hover:bg-[#00aed9]/20 transition-colors",children:e.jsx(je,{size:14})})]}),e.jsx("button",{onClick:s,className:"text-[10px] font-black text-slate-400 hover:text-[#00aed9] uppercase tracking-[0.15em] transition-colors",children:"Hoja de Venta"})]}),e.jsxs("select",{value:t.status||"new",onChange:d=>Y(t.id,d.target.value),className:"mt-4 w-full text-[10px] font-black uppercase tracking-widest bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-white/5 rounded-xl py-3 px-3 outline-none focus:ring-2 focus:ring-[#00aed9] transition-all cursor-pointer",children:[e.jsx("option",{value:"new",children:"Nuevo Lead"}),e.jsx("option",{value:"contacted",children:"Contactado"}),e.jsx("option",{value:"negotiating",children:"Negociando"}),e.jsx("option",{value:"sold",children:"Vendido"}),e.jsx("option",{value:"lost",children:"Perdido"})]})]}),Ie=({leads:t,onPrint:s,searchTerm:d=""})=>{const l=[{id:"new",title:"Nuevos",color:"bg-[#00aed9]",glow:"shadow-[#00aed9]/20"},{id:"contacted",title:"Contactados",color:"bg-amber-500",glow:"shadow-amber-500/20"},{id:"negotiating",title:"Negociando",color:"bg-purple-500",glow:"shadow-purple-500/20"},{id:"sold",title:"Vendidos",color:"bg-emerald-500",glow:"shadow-emerald-500/20"}],a=t.filter(n=>{if(!d)return!0;const p=(d||"").toLowerCase()||"";return(n.firstName||"").toLowerCase().includes(p)||(n.lastName||"").toLowerCase().includes(p)||(n.vehicleOfInterest||"").toLowerCase().includes(p)||(n.email||"").toLowerCase().includes(p)}),r=(n,o)=>{n.dataTransfer.setData("leadId",o),n.dataTransfer.effectAllowed="move"},c=n=>{n.preventDefault(),n.dataTransfer.dropEffect="move"},x=(n,o)=>{n.preventDefault();const p=n.dataTransfer.getData("leadId");p&&Y(p,o)};return e.jsx("div",{className:"flex gap-6 h-full overflow-x-auto pb-4 px-1 custom-scrollbar",children:l.map(n=>e.jsxs("div",{className:"min-w-[320px] w-full bg-white/40 dark:bg-slate-800/20 backdrop-blur-xl rounded-[2.5rem] p-5 flex flex-col h-full border border-slate-200/50 dark:border-white/5 shadow-xl shadow-slate-200/20 dark:shadow-none transition-colors duration-300",onDragOver:c,onDrop:o=>x(o,n.id),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 px-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${n.color} ${n.glow} shadow-lg animate-pulse`}),e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.2em] text-slate-500 dark:text-slate-400",children:n.title}),e.jsx("span",{className:"ml-auto bg-white/80 dark:bg-slate-800 px-3 py-1 rounded-full text-[10px] font-black shadow-sm text-slate-600 dark:text-slate-200 border border-slate-100 dark:border-white/5",children:a.filter(o=>(o.status||"new")===n.id).length})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto flex-1 custom-scrollbar pr-1 min-h-[100px]",children:[a.filter(o=>(o.status||"new")===n.id).map(o=>e.jsx("div",{draggable:!0,onDragStart:p=>r(p,o.id),className:"cursor-grab active:cursor-grabbing",children:e.jsx(Ae,{lead:o,onPrint:()=>s(o)})},o.id)),a.filter(o=>(o.status||"new")===n.id).length===0&&e.jsx("div",{className:"h-full flex items-center justify-center border-2 border-dashed border-slate-200 dark:border-white/5 rounded-3xl p-4 opacity-50",children:e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest pointer-events-none",children:"Arrastra aquí"})})]})]},n.id))})};var k;(function(t){t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS"})(k||(k={}));var E;(function(t){t.Rear="REAR",t.Front="FRONT"})(E||(E={}));var $;(function(t){t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl"})($||($={}));class ze extends se{async getPhoto(s){return new Promise(async(d,l)=>{if(s.webUseInput||s.source===k.Photos)this.fileInputExperience(s,d,l);else if(s.source===k.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=s.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:s.promptLabelPhoto||"From Photos"},{title:s.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",async r=>{r.detail===0?this.fileInputExperience(s,d,l):this.cameraExperience(s,d,l)})}else this.cameraExperience(s,d,l)})}async pickImages(s){return new Promise(async(d,l)=>{this.multipleFileInputExperience(d,l)})}async cameraExperience(s,d,l){if(customElements.get("pwa-camera-modal")){const a=document.createElement("pwa-camera-modal");a.facingMode=s.direction===E.Front?"user":"environment",document.body.appendChild(a);try{await a.componentOnReady(),a.addEventListener("onPhoto",async r=>{const c=r.detail;c===null?l(new D("User cancelled photos app")):c instanceof Error?l(c):d(await this._getCameraPhoto(c,s)),a.dismiss(),document.body.removeChild(a)}),a.present()}catch{this.fileInputExperience(s,d,l)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(s,d,l)}fileInputExperience(s,d,l){let a=document.querySelector("#_capacitor-camera-input");const r=()=>{var c;(c=a.parentNode)===null||c===void 0||c.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",c=>{const x=a.files[0];let n="jpeg";if(x.type==="image/png"?n="png":x.type==="image/gif"&&(n="gif"),s.resultType==="dataUrl"||s.resultType==="base64"){const o=new FileReader;o.addEventListener("load",()=>{if(s.resultType==="dataUrl")d({dataUrl:o.result,format:n});else if(s.resultType==="base64"){const p=o.result.split(",")[1];d({base64String:p,format:n})}r()}),o.readAsDataURL(x)}else d({webPath:URL.createObjectURL(x),format:n}),r()}),a.addEventListener("cancel",c=>{l(new D("User cancelled photos app")),r()})),a.accept="image/*",a.capture=!0,s.source===k.Photos||s.source===k.Prompt?a.removeAttribute("capture"):s.direction===E.Front?a.capture="user":s.direction===E.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(s,d){let l=document.querySelector("#_capacitor-camera-input-multiple");const a=()=>{var r;(r=l.parentNode)===null||r===void 0||r.removeChild(l)};l||(l=document.createElement("input"),l.id="_capacitor-camera-input-multiple",l.type="file",l.hidden=!0,l.multiple=!0,document.body.appendChild(l),l.addEventListener("change",r=>{const c=[];for(let x=0;x<l.files.length;x++){const n=l.files[x];let o="jpeg";n.type==="image/png"?o="png":n.type==="image/gif"&&(o="gif"),c.push({webPath:URL.createObjectURL(n),format:o})}s({photos:c}),a()}),l.addEventListener("cancel",r=>{d(new D("User cancelled photos app")),a()})),l.accept="image/*",l.click()}_getCameraPhoto(s,d){return new Promise((l,a)=>{const r=new FileReader,c=s.type.split("/")[1];d.resultType==="uri"?l({webPath:URL.createObjectURL(s),format:c,saved:!1}):(r.readAsDataURL(s),r.onloadend=()=>{const x=r.result;d.resultType==="dataUrl"?l({dataUrl:x,format:c,saved:!1}):l({base64String:x.split(",")[1],format:c,saved:!1})},r.onerror=x=>{a(x)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const _e=re("Camera",{web:()=>new ze}),Q={async takePhoto(){try{const t=await _e.getPhoto({quality:90,allowEditing:!0,resultType:$.Uri,source:k.Prompt,width:1200});return t.webPath?{blob:await(await fetch(t.webPath)).blob(),preview:t.webPath}:null}catch(t){if(t?.message?.includes("User cancelled"))return null;throw console.error("Camera Capture Error:",t),t}},blobToFile(t,s){return new File([t],s,{type:t.type})}},Te=({car:t,onClose:s,onSave:d,onPhotoUploaded:l})=>{const[a,r]=h.useState(null),[c,x]=h.useState(t?.img||""),[n,o]=h.useState(!1),[p,v]=h.useState(t?.description||""),[w,j]=h.useState(!1),[P,N]=h.useState(null),L=h.useRef(null),B=async()=>{const m=document.querySelector("form");if(!m)return;const u=new FormData(m),g=u.get("name"),y=u.get("features").split(",").filter(i=>i.trim()!=="");if(!g){alert("Por favor ingresa primero el nombre del vehículo.");return}j(!0);try{const{httpsCallable:i}=await S(async()=>{const{httpsCallable:T}=await import("./index-BeqFQMH-.js").then(M=>M.aJ);return{httpsCallable:T}},__vite__mapDeps([0,1])),{functions:b}=await S(async()=>{const{functions:T}=await import("./index-BeqFQMH-.js").then(M=>M.aK);return{functions:T}},__vite__mapDeps([0,1])),te=(await i(b,"generateDescription")({carModel:g,features:y})).data;v(te)}catch(i){console.error("AI Generation Error:",i),alert("Error generando descripción. Intenta nuevamente.")}finally{j(!1)}},I=m=>{if(m.target.files&&m.target.files[0]){const u=m.target.files[0];r(u),N(null);const g=new FileReader;g.onloadend=()=>{x(g.result)},g.readAsDataURL(u)}},z=async()=>{try{const m=await Q.takePhoto();m&&(x(m.preview),N(m.blob),r(null))}catch(m){console.error("Camera Error:",m),alert("No se pudo acceder a la cámara nativa.")}},_=async m=>{m.preventDefault(),o(!0);try{const u=new FormData(m.currentTarget);let g=c;if(a)g=await W(a),l?.();else if(P){const y=Q.blobToFile(P,`camera_${Date.now()}.jpg`);g=await W(y),l?.()}d({name:u.get("name"),price:Number(u.get("price")),type:u.get("type"),badge:u.get("badge"),img:g,description:p,features:u.get("features").split(",").map(y=>y.trim())})}catch(u){console.error(u),alert("Error al guardar")}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center sm:p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full sm:max-w-2xl sm:rounded-[40px] rounded-t-[40px] shadow-2xl overflow-hidden animate-in slide-in-from-bottom border border-slate-200 dark:border-slate-800 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-8 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-white dark:bg-slate-900 z-10 sticky top-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-widest",children:"Editor de Inventario"}),e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white uppercase tracking-tight",children:t?"Editar Unidad":"Nueva Unidad"})]}),e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 hover:bg-rose-500 hover:text-white transition-colors",children:e.jsx(le,{size:20})})]}),e.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar flex-1",children:e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest block",children:"Media"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 shrink-0 rounded-2xl bg-slate-100 dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 overflow-hidden relative",children:c?e.jsx("img",{src:c,className:"w-full h-full object-cover"}):e.jsx(J,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-slate-300"})}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:z,className:"h-[44px] bg-[#00aed9]/10 border border-[#00aed9]/25 text-[#00aed9] rounded-xl flex items-center justify-center gap-2 font-bold text-[10px] uppercase tracking-widest hover:bg-[#00aed9] hover:text-white transition-all shadow-sm",children:[e.jsx(ie,{size:16})," Capturar Cámara"]}),e.jsxs("button",{type:"button",onClick:()=>L.current?.click(),className:"h-[44px] bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 rounded-xl flex items-center justify-center gap-2 font-bold text-[10px] uppercase tracking-widest hover:bg-slate-200 dark:hover:bg-slate-700 transition-all shadow-sm",children:[e.jsx(J,{size:16})," Galería"]}),e.jsx("input",{name:"imgurl",placeholder:"O pegar URL...",value:!a&&!P?c:"",onChange:m=>{x(m.target.value),r(null),N(null)},className:"col-span-2 h-[44px] px-4 bg-slate-50 dark:bg-slate-800 rounded-xl text-sm outline-none focus:ring-2 focus:ring-[#00aed9] border border-slate-100 dark:border-slate-700"}),e.jsx("input",{ref:L,type:"file",accept:"image/*",onChange:I,className:"hidden"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Nombre"}),e.jsx("input",{name:"name",defaultValue:t?.name,required:!0,className:"w-full h-[50px] px-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-[#00aed9]",placeholder:"Ej. Toyota Corolla"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Precio"}),e.jsx("input",{name:"price",type:"number",defaultValue:t?.price,required:!0,className:"w-full h-[50px] px-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-[#00aed9]",placeholder:"25000"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Tipo"}),e.jsxs("select",{name:"type",defaultValue:t?.type||"suv",className:"w-full h-[50px] px-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-[#00aed9] appearance-none",children:[e.jsx("option",{value:"suv",children:"SUV"}),e.jsx("option",{value:"sedan",children:"Sedan"}),e.jsx("option",{value:"pickup",children:"Pickup"}),e.jsx("option",{value:"luxury",children:"Luxury"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Badge"}),e.jsx("input",{name:"badge",defaultValue:t?.badge,className:"w-full h-[50px] px-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-[#00aed9]",placeholder:"Opcional"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Características"}),e.jsx("input",{name:"features",defaultValue:t?.features?.join(", "),className:"w-full h-[50px] px-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-[#00aed9]",placeholder:"GPS, Cuero, Turbo..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Descripción"}),e.jsxs("button",{type:"button",onClick:B,disabled:w,className:"text-[10px] font-black uppercase tracking-widest text-[#00aed9] flex items-center gap-1 hover:underline disabled:opacity-50",children:[w?e.jsx(q,{size:12,className:"animate-spin"}):e.jsx(ee,{size:12}),w?"Generando...":"Generar con IA"]})]}),e.jsx("textarea",{name:"description",value:p,onChange:m=>v(m.target.value),rows:3,className:"w-full p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-medium outline-none focus:ring-2 focus:ring-[#00aed9] resize-none"})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full h-[56px] bg-[#0d2232] text-white rounded-2xl font-black uppercase tracking-widest hover:scale-[1.02] active:scale-95 transition-all shadow-xl",children:n?"Guardando...":"Guardar Unidad"})]})})]})})},Me=()=>{const[t,s]=h.useState([]),[d,l]=h.useState(!0);h.useEffect(()=>{const r=ne(ce(xe,"audit_logs"),oe("timestamp","desc"),de(50)),c=pe(r,x=>{const n=x.docs.map(o=>({id:o.id,...o.data()}));s(n),l(!1)},x=>{console.error("AuditLog onSnapshot error:",x),l(!1)});return()=>c()},[]);const a=r=>{if(!r)return"N/A";const c=r.toDate?r.toDate():new Date(r);return new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(c)};return d?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"w-6 h-6 border-2 border-slate-300 border-t-slate-800 rounded-full animate-spin"})}):e.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/50 backdrop-blur-xl border border-white/20 rounded-3xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-white/5 bg-slate-50/50 dark:bg-slate-800/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(O,{className:"text-amber-500",size:20}),"Registro de Auditoría"]}),e.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider mt-1",children:"Últimos 50 intentos de acceso"})]}),e.jsx("div",{className:"text-[10px] font-bold px-3 py-1 bg-emerald-500/10 text-emerald-500 rounded-full uppercase tracking-widest border border-emerald-500/20",children:"En Tiempo Real"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-xs",children:[e.jsx("thead",{className:"bg-slate-100/50 dark:bg-slate-900/50 text-slate-500 uppercase tracking-widest font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Estado"}),e.jsx("th",{className:"px-6 py-4",children:"Usuario"}),e.jsx("th",{className:"px-6 py-4",children:"IP / Dispositivo"}),e.jsx("th",{className:"px-6 py-4",children:"Método"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Tiempo"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-white/5",children:[t.map(r=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:r.success?e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400 font-bold",children:[e.jsx(me,{size:14})," Permitido"]}):e.jsxs("div",{className:"flex items-center gap-2 text-rose-500 font-bold",children:[e.jsx(O,{size:14})," Bloqueado"]})}),e.jsx("td",{className:"px-6 py-4 font-medium text-slate-800 dark:text-slate-200",children:r.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-slate-600 dark:text-slate-400 font-mono text-[10px]",children:[e.jsx(he,{size:10})," ",r.ip]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-slate-400 text-[10px] truncate max-w-[200px]",title:r.device,children:[e.jsx(Ne,{size:10})," ",r.device]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider ${r.method==="passkey"?"bg-purple-500/10 text-purple-500":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:r.method})}),e.jsx("td",{className:"px-6 py-4 text-right font-mono text-slate-500",children:a(r.timestamp)})]},r.id)),t.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400 font-medium bg-slate-50/20",children:"No hay registros de seguridad recientes."})})]})]})})]})},V=({end:t,prefix:s="",suffix:d="",duration:l=1500})=>{const[a,r]=h.useState(0);return h.useEffect(()=>{let c,x;const n=o=>{c||(c=o);const p=o-c,v=Math.min(p/l,1);r(Math.floor(t*(j=>1-Math.pow(1-j,3))(v))),p<l&&(x=requestAnimationFrame(n))};return x=requestAnimationFrame(n),()=>cancelAnimationFrame(x)},[t,l]),e.jsxs("span",{children:[s,(a||0).toLocaleString(),d]})},A=({icon:t,label:s,value:d,color:l,subValue:a})=>e.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl p-5 rounded-[2rem] shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-white/5 flex items-center gap-4 transition-all hover:scale-[1.02] hover:shadow-2xl group",children:[e.jsx("div",{className:`p-4 rounded-2xl ${l} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center transition-transform group-hover:rotate-6`,children:e.jsx(t,{className:l.replace("bg-","text-").replace("text-opacity-100",""),size:28,strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-1",children:s}),e.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white leading-none tracking-tighter",children:d}),a&&e.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("div",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:a})]})]})]}),qe=({inventory:t,onUpdate:s,onAdd:d,onDelete:l,onInitializeDb:a})=>{const[r,c]=h.useState("inventory"),[x,n]=h.useState([]),[o,p]=h.useState(!1),[v,w]=h.useState(null),[j,P]=h.useState(""),[N,L]=h.useState(!1),[B,I]=h.useState(0),[z,_]=h.useState("Mac");h.useEffect(()=>{const i=ue(b=>{n(b)});return(navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("Android"))&&_("iPhone"),()=>i()},[]);const m=async i=>{try{const{generateLeadPDF:b}=await S(async()=>{const{generateLeadPDF:C}=await import("./pdfGenerator-pg2CZ_hZ.js").then(G=>G.p);return{generateLeadPDF:C}},__vite__mapDeps([2,0,1]));b(i)}catch(b){console.error("PDF Error:",b),alert("Error generando PDF. Ver consola.")}},u=(t||[]).filter(i=>(i.name||"").toLowerCase().includes((j||"").toLowerCase())),g=async()=>{if(a){L(!0);try{await a()}catch(i){console.error(i)}finally{L(!1)}}},y=()=>{I(i=>i+1)};return e.jsxs("div",{className:"min-h-screen bg-[#F9FAFB] dark:bg-slate-900 text-slate-800 dark:text-slate-200 font-sans transition-colors duration-300",children:[e.jsxs("div",{className:"max-w-[1600px] mx-auto p-4 lg:p-10 space-y-8",children:[e.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#00aed9] font-black text-[10px] uppercase tracking-[0.25em] mb-2 animate-in fade-in slide-in-from-left-5",children:[e.jsx(H,{size:14})," Sistema de Control v2.6"]}),e.jsxs("h1",{className:"text-3xl lg:text-5xl font-black text-slate-800 dark:text-white tracking-tighter uppercase leading-none",children:["Inventario ",e.jsx("span",{className:"text-[#00aed9]",children:"Pro"})]})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[a&&e.jsxs("button",{onClick:g,disabled:N,className:"flex-1 md:flex-none h-[44px] px-6 bg-emerald-50 text-emerald-600 border border-emerald-200 hover:bg-emerald-100 dark:bg-emerald-900/20 dark:border-emerald-800 dark:text-emerald-400 rounded-xl font-bold text-xs uppercase tracking-widest flex items-center justify-center gap-2 transition-all disabled:opacity-50",children:[N?e.jsx(q,{size:16,className:"animate-spin"}):e.jsx(H,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Reset DB"})]}),e.jsxs("button",{onClick:async()=>{if(confirm("¿Generar lead de prueba para validar IA?"))try{const{submitApplication:i}=await S(async()=>{const{submitApplication:b}=await import("./index-BeqFQMH-.js").then(C=>C.aK);return{submitApplication:b}},__vite__mapDeps([0,1]));await i({firstName:"Test",lastName:"Buyer",email:"richardmendezmatos@gmail.com",phone:"7875550000",monthlyIncome:"5000",timeAtJob:"2 years",jobTitle:"Software Engineer",employer:"Tech Corp",type:"finance",vehicleOfInterest:"Hyundai Tucson 2025",vehicleId:"test_vehicle_id",vehicleInfo:{id:"test_vehicle_id",price:38500},message:"I am interested in this car immediately."}),alert("✅ Lead de prueba generado. Revisa el tablero y tu email.")}catch(i){alert("Error: "+i.message)}},className:"flex-1 md:flex-none h-[44px] px-6 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xs uppercase tracking-widest shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx(F,{size:18,strokeWidth:3})," ",e.jsx("span",{className:"hidden sm:inline",children:"Test AI Lead"})]}),e.jsxs("button",{onClick:()=>{w(null),p(!0)},className:"flex-1 md:flex-none h-[44px] px-6 bg-[#00aed9] hover:bg-cyan-500 text-white rounded-xl font-bold text-xs uppercase tracking-widest shadow-lg shadow-cyan-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx(Le,{size:18,strokeWidth:3})," ",e.jsx("span",{className:"hidden sm:inline",children:"Nueva Unidad"}),e.jsx("span",{className:"sm:hidden",children:"Nuevo"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(A,{icon:we,label:"Total Inventario",value:e.jsx(V,{end:t.length,prefix:""}),color:"bg-blue-500 text-blue-500 bg-opacity-100 text-opacity-100",subValue:t.length>0?"Actualizado":"Sin stock"}),e.jsx(A,{icon:U,label:"Leads Activos",value:e.jsx(V,{end:x.filter(i=>i.status==="new").length}),color:"bg-emerald-500 text-emerald-500 bg-opacity-100 text-opacity-100",subValue:"Potenciales hoy"}),e.jsx(A,{icon:X,label:"Valor Total",value:e.jsx(V,{end:t.reduce((i,b)=>i+(Number(b.price)||0),0),prefix:"$"}),color:"bg-purple-500 text-purple-500 bg-opacity-100 text-opacity-100",subValue:"Estimado"}),e.jsx(A,{icon:r==="inventory"?q:Z,label:"Estado del Sistema",value:"Online",color:"bg-amber-500 text-amber-500 bg-opacity-100 text-opacity-100",subValue:`v2.6.0 • ${z}`})]}),e.jsx("div",{className:"flex p-2 bg-white/50 dark:bg-slate-800/50 backdrop-blur-xl rounded-2xl border border-slate-100 dark:border-white/5 shadow-inner w-full md:w-fit overflow-x-auto gap-1",children:[{id:"inventory",label:"Inventario",icon:X},{id:"pipeline",label:"CRM Pipeline",icon:U},{id:"analytics",label:"Analytics",icon:U},{id:"security",label:"Seguridad",icon:O}].map(i=>e.jsxs("button",{onClick:()=>c(i.id),className:`flex-1 md:flex-none px-8 h-[48px] rounded-xl font-black text-[10px] uppercase tracking-[0.15em] flex items-center justify-center gap-3 transition-all whitespace-nowrap ${r===i.id?"bg-[#00aed9] text-white shadow-lg shadow-[#00aed9]/30 scale-105":"text-slate-400 hover:bg-white dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-200"}`,children:[e.jsx(i.icon,{size:16,strokeWidth:2.5})," ",i.label]},i.id))}),e.jsxs("main",{className:"animate-in fade-in zoom-in-95 duration-300",children:[r==="analytics"&&e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-700",children:e.jsx(Ee,{inventory:t})}),r==="pipeline"&&e.jsx("div",{className:"h-[calc(100vh-350px)] min-h-[500px]",children:e.jsx(Ie,{leads:x,onPrint:m,searchTerm:j})}),r==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2 text-slate-800 dark:text-white",children:[e.jsx(F,{className:"text-[#00aed9]",size:20}),"Acceso Biométrico (Passkeys)"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs md:text-sm mt-1",children:"Vincula este dispositivo para iniciar sesión sin contraseña usando FaceID o TouchID."})]}),e.jsxs("button",{onClick:async()=>{if(!K.currentUser)return alert("Debes estar logueado.");try{const{registerPasskey:i}=await S(async()=>{const{registerPasskey:b}=await import("./index-BeqFQMH-.js").then(C=>C.aL);return{registerPasskey:b}},__vite__mapDeps([0,1]));await i(K.currentUser),alert("✅ Dispositivo vinculado exitosamente.")}catch(i){alert("Error: "+i.message)}},className:"px-6 py-3 bg-[#00aed9]/10 text-[#00aed9] hover:bg-[#00aed9] hover:text-white border border-[#00aed9]/20 rounded-xl font-bold text-sm transition-all flex items-center gap-2",children:[e.jsx(F,{size:16})," Vincular Dispositivo"]})]}),e.jsx("div",{className:"min-h-[600px]",children:e.jsx(Me,{})})]}),r==="inventory"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col h-[calc(100vh-350px)] min-h-[600px]",children:[e.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex flex-col md:flex-row justify-between items-center gap-4 bg-slate-50/50 dark:bg-slate-800/50",children:e.jsxs("div",{className:"relative w-full md:w-96 group",children:[e.jsx(Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-[#00aed9] transition-colors",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar vehículo...",className:"w-full pl-12 pr-4 h-[50px] bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-[#00aed9] focus:border-transparent outline-none transition-all text-sm font-medium",value:j,onChange:i=>P(i.target.value)})]})}),e.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/30 sticky top-0 z-10 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Vehículo"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest hidden md:table-cell",children:"Categoría"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest hidden sm:table-cell",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:"Precio"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:"Acción"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:u.map(i=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-600 flex items-center justify-center p-1",children:e.jsx("img",{src:i.img,className:"max-w-full max-h-full object-contain",alt:i.name})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:i.name}),e.jsx("div",{className:"text-xs text-slate-400 hidden sm:block truncate max-w-[150px]",children:i.description||"Sin descripción"})]})]})}),e.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:e.jsx("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-xs font-bold text-slate-500 uppercase",children:i.type})}),e.jsx("td",{className:"px-6 py-4 hidden sm:table-cell",children:i.badge?e.jsx("span",{className:"px-3 py-1 bg-[#00aed9]/10 text-[#00aed9] rounded-full text-xs font-bold uppercase",children:i.badge}):e.jsx("span",{className:"px-3 py-1 bg-emerald-500/10 text-emerald-500 rounded-full text-xs font-bold uppercase",children:"Stock"})}),e.jsxs("td",{className:"px-6 py-4 text-right font-bold text-slate-700 dark:text-slate-300",children:["$",(i.price||0).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{w(i),p(!0)},className:"w-[40px] h-[40px] rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-500 hover:bg-[#00aed9] hover:text-white transition-colors",children:e.jsx(Ce,{size:16})}),e.jsx("button",{onClick:()=>l(i.id),className:"w-[40px] h-[40px] rounded-lg bg-rose-50 dark:bg-rose-900/20 flex items-center justify-center text-rose-500 hover:bg-rose-500 hover:text-white transition-colors",children:e.jsx(ve,{size:16})})]})})]},i.id))})]})})]})]})]}),o&&e.jsx(Te,{car:v,onClose:()=>p(!1),onPhotoUploaded:y,onSave:i=>{v?s({...i,id:v.id}):d(i),p(!1)}})]})};export{qe as default};
