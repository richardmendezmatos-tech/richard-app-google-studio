const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminPanel-DPAdJRpN.js","assets/trending-up-N-d7avaB.js","assets/eye-CZwAvosn.js","assets/trash-2-C55BqWcr.js","assets/mail-D8wkWpJY.js","assets/AILabView-G3gXMS6E.js","assets/arrow-left-9gauy2jA.js","assets/activity-CoAsoHmS.js","assets/VehicleDetail-CPsX_KwS.js","assets/proxy-C9p-T2pU.js","assets/TradeInView-DokH-ciw.js","assets/AppraisalView-BYKwcBZP.js","assets/ComparisonView-Cmp7zfpv.js","assets/AdminLogin-BLVC_CA6.js","assets/lock-CO2MBdHb.js","assets/eye-off-C6-aYr2X.js","assets/scan-face-DxAT4fYS.js","assets/DigitalGarage-BOtGg6Uu.js","assets/file-text-DB51Gm2h.js","assets/PreQualifyView-DvHba2SL.js","assets/PrivacyView-BH0fnhqM.js","assets/shield-FVrQwn0b.js","assets/TermsView-DK_0IVMn.js","assets/NotFound-8Jz9avuO.js","assets/FrameworkDashboard-D3QUi5IT.js","assets/FrameworkDashboard--8KdJ764.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var pz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Rm={exports:{}},qc={},Am={exports:{}},xt={};var Tw;function oC(){if(Tw)return xt;Tw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function T(z){return z===null||typeof z!="object"?null:(z=_&&z[_]||z["@@iterator"],typeof z=="function"?z:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,M={};function D(z,oe,Ge){this.props=z,this.context=oe,this.refs=M,this.updater=Ge||S}D.prototype.isReactComponent={},D.prototype.setState=function(z,oe){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,oe,"setState")},D.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function X(){}X.prototype=D.prototype;function W(z,oe,Ge){this.props=z,this.context=oe,this.refs=M,this.updater=Ge||S}var Q=W.prototype=new X;Q.constructor=W,P(Q,D.prototype),Q.isPureReactComponent=!0;var ae=Array.isArray,de=Object.prototype.hasOwnProperty,me={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(z,oe,Ge){var rt,pt={},_t=null,St=null;if(oe!=null)for(rt in oe.ref!==void 0&&(St=oe.ref),oe.key!==void 0&&(_t=""+oe.key),oe)de.call(oe,rt)&&!N.hasOwnProperty(rt)&&(pt[rt]=oe[rt]);var kt=arguments.length-2;if(kt===1)pt.children=Ge;else if(1<kt){for(var wt=Array(kt),Wt=0;Wt<kt;Wt++)wt[Wt]=arguments[Wt+2];pt.children=wt}if(z&&z.defaultProps)for(rt in kt=z.defaultProps,kt)pt[rt]===void 0&&(pt[rt]=kt[rt]);return{$$typeof:n,type:z,key:_t,ref:St,props:pt,_owner:me.current}}function A(z,oe){return{$$typeof:n,type:z.type,key:oe,ref:z.ref,props:z.props,_owner:z._owner}}function k(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function L(z){var oe={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ge){return oe[Ge]})}var C=/\/+/g;function R(z,oe){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):oe.toString(36)}function ut(z,oe,Ge,rt,pt){var _t=typeof z;(_t==="undefined"||_t==="boolean")&&(z=null);var St=!1;if(z===null)St=!0;else switch(_t){case"string":case"number":St=!0;break;case"object":switch(z.$$typeof){case n:case e:St=!0}}if(St)return St=z,pt=pt(St),z=rt===""?"."+R(St,0):rt,ae(pt)?(Ge="",z!=null&&(Ge=z.replace(C,"$&/")+"/"),ut(pt,oe,Ge,"",function(Wt){return Wt})):pt!=null&&(k(pt)&&(pt=A(pt,Ge+(!pt.key||St&&St.key===pt.key?"":(""+pt.key).replace(C,"$&/")+"/")+z)),oe.push(pt)),1;if(St=0,rt=rt===""?".":rt+":",ae(z))for(var kt=0;kt<z.length;kt++){_t=z[kt];var wt=rt+R(_t,kt);St+=ut(_t,oe,Ge,wt,pt)}else if(wt=T(z),typeof wt=="function")for(z=wt.call(z),kt=0;!(_t=z.next()).done;)_t=_t.value,wt=rt+R(_t,kt++),St+=ut(_t,oe,Ge,wt,pt);else if(_t==="object")throw oe=String(z),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return St}function Je(z,oe,Ge){if(z==null)return z;var rt=[],pt=0;return ut(z,rt,"","",function(_t){return oe.call(Ge,_t,pt++)}),rt}function hn(z){if(z._status===-1){var oe=z._result;oe=oe(),oe.then(function(Ge){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ge)},function(Ge){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ge)}),z._status===-1&&(z._status=0,z._result=oe)}if(z._status===1)return z._result.default;throw z._result}var ft={current:null},ve={transition:null},$e={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:ve,ReactCurrentOwner:me};function ke(){throw Error("act(...) is not supported in production builds of React.")}return xt.Children={map:Je,forEach:function(z,oe,Ge){Je(z,function(){oe.apply(this,arguments)},Ge)},count:function(z){var oe=0;return Je(z,function(){oe++}),oe},toArray:function(z){return Je(z,function(oe){return oe})||[]},only:function(z){if(!k(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},xt.Component=D,xt.Fragment=t,xt.Profiler=s,xt.PureComponent=W,xt.StrictMode=r,xt.Suspense=d,xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$e,xt.act=ke,xt.cloneElement=function(z,oe,Ge){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var rt=P({},z.props),pt=z.key,_t=z.ref,St=z._owner;if(oe!=null){if(oe.ref!==void 0&&(_t=oe.ref,St=me.current),oe.key!==void 0&&(pt=""+oe.key),z.type&&z.type.defaultProps)var kt=z.type.defaultProps;for(wt in oe)de.call(oe,wt)&&!N.hasOwnProperty(wt)&&(rt[wt]=oe[wt]===void 0&&kt!==void 0?kt[wt]:oe[wt])}var wt=arguments.length-2;if(wt===1)rt.children=Ge;else if(1<wt){kt=Array(wt);for(var Wt=0;Wt<wt;Wt++)kt[Wt]=arguments[Wt+2];rt.children=kt}return{$$typeof:n,type:z.type,key:pt,ref:_t,props:rt,_owner:St}},xt.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},xt.createElement=I,xt.createFactory=function(z){var oe=I.bind(null,z);return oe.type=z,oe},xt.createRef=function(){return{current:null}},xt.forwardRef=function(z){return{$$typeof:u,render:z}},xt.isValidElement=k,xt.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:hn}},xt.memo=function(z,oe){return{$$typeof:p,type:z,compare:oe===void 0?null:oe}},xt.startTransition=function(z){var oe=ve.transition;ve.transition={};try{z()}finally{ve.transition=oe}},xt.unstable_act=ke,xt.useCallback=function(z,oe){return ft.current.useCallback(z,oe)},xt.useContext=function(z){return ft.current.useContext(z)},xt.useDebugValue=function(){},xt.useDeferredValue=function(z){return ft.current.useDeferredValue(z)},xt.useEffect=function(z,oe){return ft.current.useEffect(z,oe)},xt.useId=function(){return ft.current.useId()},xt.useImperativeHandle=function(z,oe,Ge){return ft.current.useImperativeHandle(z,oe,Ge)},xt.useInsertionEffect=function(z,oe){return ft.current.useInsertionEffect(z,oe)},xt.useLayoutEffect=function(z,oe){return ft.current.useLayoutEffect(z,oe)},xt.useMemo=function(z,oe){return ft.current.useMemo(z,oe)},xt.useReducer=function(z,oe,Ge){return ft.current.useReducer(z,oe,Ge)},xt.useRef=function(z){return ft.current.useRef(z)},xt.useState=function(z){return ft.current.useState(z)},xt.useSyncExternalStore=function(z,oe,Ge){return ft.current.useSyncExternalStore(z,oe,Ge)},xt.useTransition=function(){return ft.current.useTransition()},xt.version="18.3.1",xt}var xw;function hy(){return xw||(xw=1,Am.exports=oC()),Am.exports}var Iw;function aC(){if(Iw)return qc;Iw=1;var n=hy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,p){var y,_={},T=null,S=null;p!==void 0&&(T=""+p),d.key!==void 0&&(T=""+d.key),d.ref!==void 0&&(S=d.ref);for(y in d)r.call(d,y)&&!o.hasOwnProperty(y)&&(_[y]=d[y]);if(u&&u.defaultProps)for(y in d=u.defaultProps,d)_[y]===void 0&&(_[y]=d[y]);return{$$typeof:e,type:u,key:T,ref:S,props:_,_owner:s.current}}return qc.Fragment=t,qc.jsx=l,qc.jsxs=l,qc}var bw;function lC(){return bw||(bw=1,Rm.exports=aC()),Rm.exports}var g=lC(),Sw={},kw;function cC(){if(kw)return Sw;kw=1;var n=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=($,U,se)=>U in $?n($,U,{enumerable:!0,configurable:!0,writable:!0,value:se}):$[U]=se,u=($,U)=>{for(var se in U||(U={}))s.call(U,se)&&l($,se,U[se]);if(r)for(var se of r(U))o.call(U,se)&&l($,se,U[se]);return $},d=($,U)=>e($,t(U)),p=($,U,se)=>(l($,typeof U!="symbol"?U+"":U,se),se),y=globalThis;function _($){return(y.__Zone_symbol_prefix||"__zone_symbol__")+$}function T(){const $=y.performance;function U(vt){$&&$.mark&&$.mark(vt)}function se(vt,te){$&&$.measure&&$.measure(vt,te)}U("Zone");const B=class hg{constructor(te,ee){p(this,"_parent"),p(this,"_name"),p(this,"_properties"),p(this,"_zoneDelegate"),this._parent=te,this._name=ee?ee.name||"unnamed":"<root>",this._properties=ee&&ee.properties||{},this._zoneDelegate=new ze(this,this._parent&&this._parent._zoneDelegate,ee)}static assertZonePatched(){if(y.Promise!==st.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let te=hg.current;for(;te.parent;)te=te.parent;return te}static get current(){return xe.zone}static get currentTask(){return En}static __load_patch(te,ee,J=!1){if(st.hasOwnProperty(te)){const Ne=y[_("forceDuplicateZoneCheck")]===!0;if(!J&&Ne)throw Error("Already loaded patch: "+te)}else if(!y["__Zone_disable_"+te]){const Ne="Zone:"+te;U(Ne),st[te]=ee(y,hg,yt),se(Ne,Ne)}}get parent(){return this._parent}get name(){return this._name}get(te){const ee=this.getZoneWith(te);if(ee)return ee._properties[te]}getZoneWith(te){let ee=this;for(;ee;){if(ee._properties.hasOwnProperty(te))return ee;ee=ee._parent}return null}fork(te){if(!te)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,te)}wrap(te,ee){if(typeof te!="function")throw new Error("Expecting function got: "+te);const J=this._zoneDelegate.intercept(this,te,ee),Ne=this;return function(){return Ne.runGuarded(J,this,arguments,ee)}}run(te,ee,J,Ne){xe={parent:xe,zone:this};try{return this._zoneDelegate.invoke(this,te,ee,J,Ne)}finally{xe=xe.parent}}runGuarded(te,ee=null,J,Ne){xe={parent:xe,zone:this};try{try{return this._zoneDelegate.invoke(this,te,ee,J,Ne)}catch(Nt){if(this._zoneDelegate.handleError(this,Nt))throw Nt}}finally{xe=xe.parent}}runTask(te,ee,J){if(te.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(te.zone||Yt).name+"; Execution: "+this.name+")");const Ne=te,{type:Nt,data:{isPeriodic:et=!1,isRefreshable:er=!1}={}}=te;if(te.state===We&&(Nt===lt||Nt===$t))return;const kr=te.state!=gt;kr&&Ne._transitionTo(gt,Ct);const Rr=En;En=Ne,xe={parent:xe,zone:this};try{Nt==$t&&te.data&&!et&&!er&&(te.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,Ne,ee,J)}catch(On){if(this._zoneDelegate.handleError(this,On))throw On}}finally{const On=te.state;if(On!==We&&On!==Mt)if(Nt==lt||et||er&&On===Te)kr&&Ne._transitionTo(Ct,gt,Te);else{const _e=Ne._zoneDelegates;this._updateTaskCount(Ne,-1),kr&&Ne._transitionTo(We,gt,We),er&&(Ne._zoneDelegates=_e)}xe=xe.parent,En=Rr}}scheduleTask(te){if(te.zone&&te.zone!==this){let J=this;for(;J;){if(J===te.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${te.zone.name}`);J=J.parent}}te._transitionTo(Te,We);const ee=[];te._zoneDelegates=ee,te._zone=this;try{te=this._zoneDelegate.scheduleTask(this,te)}catch(J){throw te._transitionTo(Mt,Te,We),this._zoneDelegate.handleError(this,J),J}return te._zoneDelegates===ee&&this._updateTaskCount(te,1),te.state==Te&&te._transitionTo(Ct,Te),te}scheduleMicroTask(te,ee,J,Ne){return this.scheduleTask(new Ae(Ve,te,ee,J,Ne,void 0))}scheduleMacroTask(te,ee,J,Ne,Nt){return this.scheduleTask(new Ae($t,te,ee,J,Ne,Nt))}scheduleEventTask(te,ee,J,Ne,Nt){return this.scheduleTask(new Ae(lt,te,ee,J,Ne,Nt))}cancelTask(te){if(te.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(te.zone||Yt).name+"; Execution: "+this.name+")");if(!(te.state!==Ct&&te.state!==gt)){te._transitionTo(Ut,Ct,gt);try{this._zoneDelegate.cancelTask(this,te)}catch(ee){throw te._transitionTo(Mt,Ut),this._zoneDelegate.handleError(this,ee),ee}return this._updateTaskCount(te,-1),te._transitionTo(We,Ut),te.runCount=-1,te}}_updateTaskCount(te,ee){const J=te._zoneDelegates;ee==-1&&(te._zoneDelegates=null);for(let Ne=0;Ne<J.length;Ne++)J[Ne]._updateTaskCount(te.type,ee)}};p(B,"__symbol__",_);let ie=B;const ge={name:"",onHasTask:(vt,te,ee,J)=>vt.hasTask(ee,J),onScheduleTask:(vt,te,ee,J)=>vt.scheduleTask(ee,J),onInvokeTask:(vt,te,ee,J,Ne,Nt)=>vt.invokeTask(ee,J,Ne,Nt),onCancelTask:(vt,te,ee,J)=>vt.cancelTask(ee,J)};class ze{constructor(te,ee,J){p(this,"_zone"),p(this,"_taskCounts",{microTask:0,macroTask:0,eventTask:0}),p(this,"_parentDelegate"),p(this,"_forkDlgt"),p(this,"_forkZS"),p(this,"_forkCurrZone"),p(this,"_interceptDlgt"),p(this,"_interceptZS"),p(this,"_interceptCurrZone"),p(this,"_invokeDlgt"),p(this,"_invokeZS"),p(this,"_invokeCurrZone"),p(this,"_handleErrorDlgt"),p(this,"_handleErrorZS"),p(this,"_handleErrorCurrZone"),p(this,"_scheduleTaskDlgt"),p(this,"_scheduleTaskZS"),p(this,"_scheduleTaskCurrZone"),p(this,"_invokeTaskDlgt"),p(this,"_invokeTaskZS"),p(this,"_invokeTaskCurrZone"),p(this,"_cancelTaskDlgt"),p(this,"_cancelTaskZS"),p(this,"_cancelTaskCurrZone"),p(this,"_hasTaskDlgt"),p(this,"_hasTaskDlgtOwner"),p(this,"_hasTaskZS"),p(this,"_hasTaskCurrZone"),this._zone=te,this._parentDelegate=ee,this._forkZS=J&&(J&&J.onFork?J:ee._forkZS),this._forkDlgt=J&&(J.onFork?ee:ee._forkDlgt),this._forkCurrZone=J&&(J.onFork?this._zone:ee._forkCurrZone),this._interceptZS=J&&(J.onIntercept?J:ee._interceptZS),this._interceptDlgt=J&&(J.onIntercept?ee:ee._interceptDlgt),this._interceptCurrZone=J&&(J.onIntercept?this._zone:ee._interceptCurrZone),this._invokeZS=J&&(J.onInvoke?J:ee._invokeZS),this._invokeDlgt=J&&(J.onInvoke?ee:ee._invokeDlgt),this._invokeCurrZone=J&&(J.onInvoke?this._zone:ee._invokeCurrZone),this._handleErrorZS=J&&(J.onHandleError?J:ee._handleErrorZS),this._handleErrorDlgt=J&&(J.onHandleError?ee:ee._handleErrorDlgt),this._handleErrorCurrZone=J&&(J.onHandleError?this._zone:ee._handleErrorCurrZone),this._scheduleTaskZS=J&&(J.onScheduleTask?J:ee._scheduleTaskZS),this._scheduleTaskDlgt=J&&(J.onScheduleTask?ee:ee._scheduleTaskDlgt),this._scheduleTaskCurrZone=J&&(J.onScheduleTask?this._zone:ee._scheduleTaskCurrZone),this._invokeTaskZS=J&&(J.onInvokeTask?J:ee._invokeTaskZS),this._invokeTaskDlgt=J&&(J.onInvokeTask?ee:ee._invokeTaskDlgt),this._invokeTaskCurrZone=J&&(J.onInvokeTask?this._zone:ee._invokeTaskCurrZone),this._cancelTaskZS=J&&(J.onCancelTask?J:ee._cancelTaskZS),this._cancelTaskDlgt=J&&(J.onCancelTask?ee:ee._cancelTaskDlgt),this._cancelTaskCurrZone=J&&(J.onCancelTask?this._zone:ee._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const Ne=J&&J.onHasTask,Nt=ee&&ee._hasTaskZS;(Ne||Nt)&&(this._hasTaskZS=Ne?J:ge,this._hasTaskDlgt=ee,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,J.onScheduleTask||(this._scheduleTaskZS=ge,this._scheduleTaskDlgt=ee,this._scheduleTaskCurrZone=this._zone),J.onInvokeTask||(this._invokeTaskZS=ge,this._invokeTaskDlgt=ee,this._invokeTaskCurrZone=this._zone),J.onCancelTask||(this._cancelTaskZS=ge,this._cancelTaskDlgt=ee,this._cancelTaskCurrZone=this._zone))}get zone(){return this._zone}fork(te,ee){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,te,ee):new ie(te,ee)}intercept(te,ee,J){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,te,ee,J):ee}invoke(te,ee,J,Ne,Nt){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,te,ee,J,Ne,Nt):ee.apply(J,Ne)}handleError(te,ee){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,te,ee):!0}scheduleTask(te,ee){let J=ee;if(this._scheduleTaskZS)this._hasTaskZS&&J._zoneDelegates.push(this._hasTaskDlgtOwner),J=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,te,ee),J||(J=ee);else if(ee.scheduleFn)ee.scheduleFn(ee);else if(ee.type==Ve)Bt(ee);else throw new Error("Task is missing scheduleFn.");return J}invokeTask(te,ee,J,Ne){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,te,ee,J,Ne):ee.callback.apply(J,Ne)}cancelTask(te,ee){let J;if(this._cancelTaskZS)J=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,te,ee);else{if(!ee.cancelFn)throw Error("Task is not cancelable");J=ee.cancelFn(ee)}return J}hasTask(te,ee){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,te,ee)}catch(J){this.handleError(te,J)}}_updateTaskCount(te,ee){const J=this._taskCounts,Ne=J[te],Nt=J[te]=Ne+ee;if(Nt<0)throw new Error("More tasks executed then were scheduled.");if(Ne==0||Nt==0){const et={microTask:J.microTask>0,macroTask:J.macroTask>0,eventTask:J.eventTask>0,change:te};this.hasTask(this._zone,et)}}}class Ae{constructor(te,ee,J,Ne,Nt,et){if(p(this,"type"),p(this,"source"),p(this,"invoke"),p(this,"callback"),p(this,"data"),p(this,"scheduleFn"),p(this,"cancelFn"),p(this,"_zone",null),p(this,"runCount",0),p(this,"_zoneDelegates",null),p(this,"_state","notScheduled"),this.type=te,this.source=ee,this.data=Ne,this.scheduleFn=Nt,this.cancelFn=et,!J)throw new Error("callback is not defined");this.callback=J;const er=this;te===lt&&Ne&&Ne.useG?this.invoke=Ae.invokeTask:this.invoke=function(){return Ae.invokeTask.call(y,er,this,arguments)}}static invokeTask(te,ee,J){te||(te=this),yn++;try{return te.runCount++,te.zone.runTask(te,ee,J)}finally{yn==1&&Dn(),yn--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(We,Te)}_transitionTo(te,ee,J){if(this._state===ee||this._state===J)this._state=te,te==We&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${te}', expecting state '${ee}'${J?" or '"+J+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const be=_("setTimeout"),Ze=_("Promise"),Ce=_("then");let Ye=[],dt=!1,mt;function Kt(vt){if(mt||y[Ze]&&(mt=y[Ze].resolve(0)),mt){let te=mt[Ce];te||(te=mt.then),te.call(mt,vt)}else y[be](vt,0)}function Bt(vt){yn===0&&Ye.length===0&&Kt(Dn),vt&&Ye.push(vt)}function Dn(){if(!dt){for(dt=!0;Ye.length;){const vt=Ye;Ye=[];for(let te=0;te<vt.length;te++){const ee=vt[te];try{ee.zone.runTask(ee,null,null)}catch(J){yt.onUnhandledError(J)}}}yt.microtaskDrainDone(),dt=!1}}const Yt={name:"NO ZONE"},We="notScheduled",Te="scheduling",Ct="scheduled",gt="running",Ut="canceling",Mt="unknown",Ve="microTask",$t="macroTask",lt="eventTask",st={},yt={symbol:_,currentZoneFrame:()=>xe,onUnhandledError:Rt,microtaskDrainDone:Rt,scheduleMicroTask:Bt,showUncaughtError:()=>!ie[_("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:Rt,patchMethod:()=>Rt,bindArguments:()=>[],patchThen:()=>Rt,patchMacroTask:()=>Rt,patchEventPrototype:()=>Rt,getGlobalObjects:()=>{},ObjectDefineProperty:()=>Rt,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>Rt,wrapWithCurrentZone:()=>Rt,filterProperties:()=>[],attachOriginToPatched:()=>Rt,_redefineProperty:()=>Rt,patchCallbacks:()=>Rt,nativeScheduleMicroTask:Kt};let xe={parent:null,zone:new ie(null,null)},En=null,yn=0;function Rt(){}return se("Zone","Zone"),ie}function S(){var $;const U=globalThis,se=U[_("forceDuplicateZoneCheck")]===!0;if(U.Zone&&(se||typeof U.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return($=U.Zone)!=null||(U.Zone=T()),U.Zone}var P=Object.getOwnPropertyDescriptor,M=Object.defineProperty,D=Object.getPrototypeOf,X=Object.create,W=Array.prototype.slice,Q="addEventListener",ae="removeEventListener",de=_(Q),me=_(ae),N="true",I="false",A=_("");function k($,U){return Zone.current.wrap($,U)}function L($,U,se,B,ie){return Zone.current.scheduleMacroTask($,U,se,B,ie)}var C=_,R=typeof window<"u",ut=R?window:void 0,Je=R&&ut||globalThis,hn="removeAttribute";function ft($,U){for(let se=$.length-1;se>=0;se--)typeof $[se]=="function"&&($[se]=k($[se],U+"_"+se));return $}function ve($,U){const se=$.constructor.name;for(let B=0;B<U.length;B++){const ie=U[B],ge=$[ie];if(ge){const ze=P($,ie);if(!$e(ze))continue;$[ie]=(Ae=>{const be=function(){return Ae.apply(this,ft(arguments,se+"."+ie))};return It(be,Ae),be})(ge)}}}function $e($){return $?$.writable===!1?!1:!(typeof $.get=="function"&&typeof $.set>"u"):!0}var ke=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,z=!("nw"in Je)&&typeof Je.process<"u"&&Je.process.toString()==="[object process]",oe=!z&&!ke&&!!(R&&ut.HTMLElement),Ge=typeof Je.process<"u"&&Je.process.toString()==="[object process]"&&!ke&&!!(R&&ut.HTMLElement),rt={},pt=C("enable_beforeunload"),_t=function($){if($=$||Je.event,!$)return;let U=rt[$.type];U||(U=rt[$.type]=C("ON_PROPERTY"+$.type));const se=this||$.target||Je,B=se[U];let ie;if(oe&&se===ut&&$.type==="error"){const ge=$;ie=B&&B.call(this,ge.message,ge.filename,ge.lineno,ge.colno,ge.error),ie===!0&&$.preventDefault()}else ie=B&&B.apply(this,arguments),$.type==="beforeunload"&&Je[pt]&&typeof ie=="string"?$.returnValue=ie:ie!=null&&!ie&&$.preventDefault();return ie};function St($,U,se){let B=P($,U);if(!B&&se&&P(se,U)&&(B={enumerable:!0,configurable:!0}),!B||!B.configurable)return;const ie=C("on"+U+"patched");if($.hasOwnProperty(ie)&&$[ie])return;delete B.writable,delete B.value;const ge=B.get,ze=B.set,Ae=U.slice(2);let be=rt[Ae];be||(be=rt[Ae]=C("ON_PROPERTY"+Ae)),B.set=function(Ze){let Ce=this;if(!Ce&&$===Je&&(Ce=Je),!Ce)return;typeof Ce[be]=="function"&&Ce.removeEventListener(Ae,_t),ze?.call(Ce,null),Ce[be]=Ze,typeof Ze=="function"&&Ce.addEventListener(Ae,_t,!1)},B.get=function(){let Ze=this;if(!Ze&&$===Je&&(Ze=Je),!Ze)return null;const Ce=Ze[be];if(Ce)return Ce;if(ge){let Ye=ge.call(this);if(Ye)return B.set.call(this,Ye),typeof Ze[hn]=="function"&&Ze.removeAttribute(U),Ye}return null},M($,U,B),$[ie]=!0}function kt($,U,se){if(U)for(let B=0;B<U.length;B++)St($,"on"+U[B],se);else{const B=[];for(const ie in $)ie.slice(0,2)=="on"&&B.push(ie);for(let ie=0;ie<B.length;ie++)St($,B[ie],se)}}var wt=C("originalInstance");function Wt($){const U=Je[$];if(!U)return;Je[C($)]=U,Je[$]=function(){const ie=ft(arguments,$);switch(ie.length){case 0:this[wt]=new U;break;case 1:this[wt]=new U(ie[0]);break;case 2:this[wt]=new U(ie[0],ie[1]);break;case 3:this[wt]=new U(ie[0],ie[1],ie[2]);break;case 4:this[wt]=new U(ie[0],ie[1],ie[2],ie[3]);break;default:throw new Error("Arg list too long.")}},It(Je[$],U);const se=new U(function(){});let B;for(B in se)$==="XMLHttpRequest"&&B==="responseBlob"||(function(ie){typeof se[ie]=="function"?Je[$].prototype[ie]=function(){return this[wt][ie].apply(this[wt],arguments)}:M(Je[$].prototype,ie,{set:function(ge){typeof ge=="function"?(this[wt][ie]=k(ge,$+"."+ie),It(this[wt][ie],ge)):this[wt][ie]=ge},get:function(){return this[wt][ie]}})})(B);for(B in U)B!=="prototype"&&U.hasOwnProperty(B)&&(Je[$][B]=U[B])}function Se($,U,se){let B=$;for(;B&&!B.hasOwnProperty(U);)B=D(B);!B&&$[U]&&(B=$);const ie=C(U);let ge=null;if(B&&(!(ge=B[ie])||!B.hasOwnProperty(ie))){ge=B[ie]=B[U];const ze=B&&P(B,U);if($e(ze)){const Ae=se(ge,ie,U);B[U]=function(){return Ae(this,arguments)},It(B[U],ge)}}return ge}function Et($,U,se){let B=null;function ie(ge){const ze=ge.data;return ze.args[ze.cbIdx]=function(){ge.invoke.apply(this,arguments)},B.apply(ze.target,ze.args),ge}B=Se($,U,ge=>function(ze,Ae){const be=se(ze,Ae);return be.cbIdx>=0&&typeof Ae[be.cbIdx]=="function"?L(be.name,Ae[be.cbIdx],be,ie):ge.apply(ze,Ae)})}function It($,U){$[C("OriginalDelegate")]=U}function Zn($){return typeof $=="function"}function pr($){return typeof $=="number"}var Lo={useG:!0},Nn={},jo={},ai=new RegExp("^"+A+"(\\w+)(true|false)$"),ls=C("propagationStopped");function cs($,U){const se=(U?U($):$)+I,B=(U?U($):$)+N,ie=A+se,ge=A+B;Nn[$]={},Nn[$][I]=ie,Nn[$][N]=ge}function Vo($,U,se,B){const ie=B&&B.add||Q,ge=B&&B.rm||ae,ze=B&&B.listeners||"eventListeners",Ae=B&&B.rmAll||"removeAllListeners",be=C(ie),Ze="."+ie+":",Ce="prependListener",Ye="."+Ce+":",dt=function(We,Te,Ct){if(We.isRemoved)return;const gt=We.callback;typeof gt=="object"&&gt.handleEvent&&(We.callback=Ve=>gt.handleEvent(Ve),We.originalDelegate=gt);let Ut;try{We.invoke(We,Te,[Ct])}catch(Ve){Ut=Ve}const Mt=We.options;if(Mt&&typeof Mt=="object"&&Mt.once){const Ve=We.originalDelegate?We.originalDelegate:We.callback;Te[ge].call(Te,Ct.type,Ve,Mt)}return Ut};function mt(We,Te,Ct){if(Te=Te||$.event,!Te)return;const gt=We||Te.target||$,Ut=gt[Nn[Te.type][Ct?N:I]];if(Ut){const Mt=[];if(Ut.length===1){const Ve=dt(Ut[0],gt,Te);Ve&&Mt.push(Ve)}else{const Ve=Ut.slice();for(let $t=0;$t<Ve.length&&!(Te&&Te[ls]===!0);$t++){const lt=dt(Ve[$t],gt,Te);lt&&Mt.push(lt)}}if(Mt.length===1)throw Mt[0];for(let Ve=0;Ve<Mt.length;Ve++){const $t=Mt[Ve];U.nativeScheduleMicroTask(()=>{throw $t})}}}const Kt=function(We){return mt(this,We,!1)},Bt=function(We){return mt(this,We,!0)};function Dn(We,Te){if(!We)return!1;let Ct=!0;Te&&Te.useG!==void 0&&(Ct=Te.useG);const gt=Te&&Te.vh;let Ut=!0;Te&&Te.chkDup!==void 0&&(Ut=Te.chkDup);let Mt=!1;Te&&Te.rt!==void 0&&(Mt=Te.rt);let Ve=We;for(;Ve&&!Ve.hasOwnProperty(ie);)Ve=D(Ve);if(!Ve&&We[ie]&&(Ve=We),!Ve||Ve[be])return!1;const $t=Te&&Te.eventNameToString,lt={},st=Ve[be]=Ve[ie],yt=Ve[C(ge)]=Ve[ge],xe=Ve[C(ze)]=Ve[ze],En=Ve[C(Ae)]=Ve[Ae];let yn;Te&&Te.prepend&&(yn=Ve[C(Te.prepend)]=Ve[Te.prepend]);function Rt(Z,we){return we?typeof Z=="boolean"?{capture:Z,passive:!0}:Z?typeof Z=="object"&&Z.passive!==!1?d(u({},Z),{passive:!0}):Z:{passive:!0}:Z}const vt=function(Z){if(!lt.isExisting)return st.call(lt.target,lt.eventName,lt.capture?Bt:Kt,lt.options)},te=function(Z){if(!Z.isRemoved){const we=Nn[Z.eventName];let Le;we&&(Le=we[Z.capture?N:I]);const Fe=Le&&Z.target[Le];if(Fe){for(let Oe=0;Oe<Fe.length;Oe++)if(Fe[Oe]===Z){Fe.splice(Oe,1),Z.isRemoved=!0,Z.removeAbortListener&&(Z.removeAbortListener(),Z.removeAbortListener=null),Fe.length===0&&(Z.allRemoved=!0,Z.target[Le]=null);break}}}if(Z.allRemoved)return yt.call(Z.target,Z.eventName,Z.capture?Bt:Kt,Z.options)},ee=function(Z){return st.call(lt.target,lt.eventName,Z.invoke,lt.options)},J=function(Z){return yn.call(lt.target,lt.eventName,Z.invoke,lt.options)},Ne=function(Z){return yt.call(Z.target,Z.eventName,Z.invoke,Z.options)},Nt=Ct?vt:ee,et=Ct?te:Ne,er=function(Z,we){const Le=typeof we;return Le==="function"&&Z.callback===we||Le==="object"&&Z.originalDelegate===we},kr=Te?.diff||er,Rr=Zone[C("UNPATCHED_EVENTS")],On=$[C("PASSIVE_EVENTS")];function _e(Z){if(typeof Z=="object"&&Z!==null){const we=u({},Z);return Z.signal&&(we.signal=Z.signal),we}return Z}const fe=function(Z,we,Le,Fe,Oe=!1,it=!1){return function(){const ot=this||$;let De=arguments[0];Te&&Te.transferEventName&&(De=Te.transferEventName(De));let Pt=arguments[1];if(!Pt)return Z.apply(this,arguments);if(z&&De==="uncaughtException")return Z.apply(this,arguments);let Be=!1;if(typeof Pt!="function"){if(!Pt.handleEvent)return Z.apply(this,arguments);Be=!0}if(gt&&!gt(Z,Pt,ot,arguments))return;const Gn=!!On&&On.indexOf(De)!==-1,tr=_e(Rt(arguments[2],Gn)),Ar=tr?.signal;if(Ar?.aborted)return;if(Rr){for(let vr=0;vr<Rr.length;vr++)if(De===Rr[vr])return Gn?Z.call(ot,De,Pt,tr):Z.apply(this,arguments)}const qi=tr?typeof tr=="boolean"?!0:tr.capture:!1,Ho=tr&&typeof tr=="object"?tr.once:!1,Wa=Zone.current;let di=Nn[De];di||(cs(De,$t),di=Nn[De]);const Gr=di[qi?N:I];let nn=ot[Gr],Cr=!1;if(nn){if(Cr=!0,Ut){for(let vr=0;vr<nn.length;vr++)if(kr(nn[vr],Pt))return}}else nn=ot[Gr]=[];let nr;const xs=ot.constructor.name,gr=jo[xs];gr&&(nr=gr[De]),nr||(nr=xs+we+($t?$t(De):De)),lt.options=tr,Ho&&(lt.options.once=!1),lt.target=ot,lt.capture=qi,lt.eventName=De,lt.isExisting=Cr;const rr=Ct?Lo:void 0;rr&&(rr.taskData=lt),Ar&&(lt.options.signal=void 0);const yr=Wa.scheduleEventTask(nr,Pt,rr,Le,Fe);if(Ar){lt.options.signal=Ar;const vr=()=>yr.zone.cancelTask(yr);Z.call(Ar,"abort",vr,{once:!0}),yr.removeAbortListener=()=>Ar.removeEventListener("abort",vr)}if(lt.target=null,rr&&(rr.taskData=null),Ho&&(lt.options.once=!0),typeof yr.options!="boolean"&&(yr.options=tr),yr.target=ot,yr.capture=qi,yr.eventName=De,Be&&(yr.originalDelegate=Pt),it?nn.unshift(yr):nn.push(yr),Oe)return ot}};return Ve[ie]=fe(st,Ze,Nt,et,Mt),yn&&(Ve[Ce]=fe(yn,Ye,J,et,Mt,!0)),Ve[ge]=function(){const Z=this||$;let we=arguments[0];Te&&Te.transferEventName&&(we=Te.transferEventName(we));const Le=arguments[2],Fe=Le?typeof Le=="boolean"?!0:Le.capture:!1,Oe=arguments[1];if(!Oe)return yt.apply(this,arguments);if(gt&&!gt(yt,Oe,Z,arguments))return;const it=Nn[we];let ot;it&&(ot=it[Fe?N:I]);const De=ot&&Z[ot];if(De)for(let Pt=0;Pt<De.length;Pt++){const Be=De[Pt];if(kr(Be,Oe)){if(De.splice(Pt,1),Be.isRemoved=!0,De.length===0&&(Be.allRemoved=!0,Z[ot]=null,!Fe&&typeof we=="string")){const Gn=A+"ON_PROPERTY"+we;Z[Gn]=null}return Be.zone.cancelTask(Be),Mt?Z:void 0}}return yt.apply(this,arguments)},Ve[ze]=function(){const Z=this||$;let we=arguments[0];Te&&Te.transferEventName&&(we=Te.transferEventName(we));const Le=[],Fe=li(Z,$t?$t(we):we);for(let Oe=0;Oe<Fe.length;Oe++){const it=Fe[Oe];let ot=it.originalDelegate?it.originalDelegate:it.callback;Le.push(ot)}return Le},Ve[Ae]=function(){const Z=this||$;let we=arguments[0];if(we){Te&&Te.transferEventName&&(we=Te.transferEventName(we));const Le=Nn[we];if(Le){const Fe=Le[I],Oe=Le[N],it=Z[Fe],ot=Z[Oe];if(it){const De=it.slice();for(let Pt=0;Pt<De.length;Pt++){const Be=De[Pt];let Gn=Be.originalDelegate?Be.originalDelegate:Be.callback;this[ge].call(this,we,Gn,Be.options)}}if(ot){const De=ot.slice();for(let Pt=0;Pt<De.length;Pt++){const Be=De[Pt];let Gn=Be.originalDelegate?Be.originalDelegate:Be.callback;this[ge].call(this,we,Gn,Be.options)}}}}else{const Le=Object.keys(Z);for(let Fe=0;Fe<Le.length;Fe++){const Oe=Le[Fe],it=ai.exec(Oe);let ot=it&&it[1];ot&&ot!=="removeListener"&&this[Ae].call(this,ot)}this[Ae].call(this,"removeListener")}if(Mt)return this},It(Ve[ie],st),It(Ve[ge],yt),En&&It(Ve[Ae],En),xe&&It(Ve[ze],xe),!0}let Yt=[];for(let We=0;We<se.length;We++)Yt[We]=Dn(se[We],B);return Yt}function li($,U){if(!U){const ge=[];for(let ze in $){const Ae=ai.exec(ze);let be=Ae&&Ae[1];if(be&&(!U||be===U)){const Ze=$[ze];if(Ze)for(let Ce=0;Ce<Ze.length;Ce++)ge.push(Ze[Ce])}}return ge}let se=Nn[U];se||(cs(U),se=Nn[U]);const B=$[se[I]],ie=$[se[N]];return B?ie?B.concat(ie):B.slice():ie?ie.slice():[]}function $i($,U){const se=$.Event;se&&se.prototype&&U.patchMethod(se.prototype,"stopImmediatePropagation",B=>function(ie,ge){ie[ls]=!0,B&&B.apply(ie,ge)})}function Fo($,U){U.patchMethod($,"queueMicrotask",se=>function(B,ie){Zone.current.scheduleMicroTask("queueMicrotask",ie[0])})}var tn=C("zoneTask");function Qt($,U,se,B){let ie=null,ge=null;U+=B,se+=B;const ze={};function Ae(Ze){const Ce=Ze.data;Ce.args[0]=function(){return Ze.invoke.apply(this,arguments)};const Ye=ie.apply($,Ce.args);return pr(Ye)?Ce.handleId=Ye:(Ce.handle=Ye,Ce.isRefreshable=Zn(Ye.refresh)),Ze}function be(Ze){const{handle:Ce,handleId:Ye}=Ze.data;return ge.call($,Ce??Ye)}ie=Se($,U,Ze=>function(Ce,Ye){var dt;if(Zn(Ye[0])){const mt={isRefreshable:!1,isPeriodic:B==="Interval",delay:B==="Timeout"||B==="Interval"?Ye[1]||0:void 0,args:Ye},Kt=Ye[0];Ye[0]=function(){try{return Kt.apply(this,arguments)}finally{const{handle:gt,handleId:Ut,isPeriodic:Mt,isRefreshable:Ve}=mt;!Mt&&!Ve&&(Ut?delete ze[Ut]:gt&&(gt[tn]=null))}};const Bt=L(U,Ye[0],mt,Ae,be);if(!Bt)return Bt;const{handleId:Dn,handle:Yt,isRefreshable:We,isPeriodic:Te}=Bt.data;if(Dn)ze[Dn]=Bt;else if(Yt&&(Yt[tn]=Bt,We&&!Te)){const Ct=Yt.refresh;Yt.refresh=function(){const{zone:gt,state:Ut}=Bt;return Ut==="notScheduled"?(Bt._state="scheduled",gt._updateTaskCount(Bt,1)):Ut==="running"&&(Bt._state="scheduling"),Ct.call(this)}}return(dt=Yt??Dn)!=null?dt:Bt}else return Ze.apply($,Ye)}),ge=Se($,se,Ze=>function(Ce,Ye){const dt=Ye[0];let mt;pr(dt)?(mt=ze[dt],delete ze[dt]):(mt=dt?.[tn],mt?dt[tn]=null:mt=dt),mt?.type?mt.cancelFn&&mt.zone.cancelTask(mt):Ze.apply($,Ye)})}function Ts($,U){const{isBrowser:se,isMix:B}=U.getGlobalObjects();if(!se&&!B||!$.customElements||!("customElements"in $))return;const ie=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];U.patchCallbacks(U,$.customElements,"customElements","define",ie)}function Uo($,U){if(Zone[U.symbol("patchEventTarget")])return;const{eventNames:se,zoneSymbolEventNames:B,TRUE_STR:ie,FALSE_STR:ge,ZONE_SYMBOL_PREFIX:ze}=U.getGlobalObjects();for(let be=0;be<se.length;be++){const Ze=se[be],Ce=Ze+ge,Ye=Ze+ie,dt=ze+Ce,mt=ze+Ye;B[Ze]={},B[Ze][ge]=dt,B[Ze][ie]=mt}const Ae=$.EventTarget;if(!(!Ae||!Ae.prototype))return U.patchEventTarget($,U,[Ae&&Ae.prototype]),!0}function Us($,U){U.patchEventPrototype($,U)}function $s($,U,se){if(!se||se.length===0)return U;const B=se.filter(ge=>ge.target===$);if(B.length===0)return U;const ie=B[0].ignoreProperties;return U.filter(ge=>ie.indexOf(ge)===-1)}function zs($,U,se,B){if(!$)return;const ie=$s($,U,se);kt($,ie,B)}function ci($){return Object.getOwnPropertyNames($).filter(U=>U.startsWith("on")&&U.length>2).map(U=>U.substring(2))}function $o($,U){if(z&&!Ge||Zone[$.symbol("patchEvents")])return;const se=U.__Zone_ignore_on_properties;let B=[];if(oe){const ie=window;B=B.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]),zs(ie,ci(ie),se,D(ie))}B=B.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let ie=0;ie<B.length;ie++){const ge=U[B[ie]];ge?.prototype&&zs(ge.prototype,ci(ge.prototype),se)}}function zo($){$.__load_patch("timers",U=>{const B="clear";Qt(U,"set",B,"Timeout"),Qt(U,"set",B,"Interval"),Qt(U,"set",B,"Immediate")}),$.__load_patch("requestAnimationFrame",U=>{Qt(U,"request","cancel","AnimationFrame"),Qt(U,"mozRequest","mozCancel","AnimationFrame"),Qt(U,"webkitRequest","webkitCancel","AnimationFrame")}),$.__load_patch("blocking",(U,se)=>{const B=["alert","prompt","confirm"];for(let ie=0;ie<B.length;ie++){const ge=B[ie];Se(U,ge,(ze,Ae,be)=>function(Ze,Ce){return se.current.run(ze,U,Ce,be)})}}),$.__load_patch("EventTarget",(U,se,B)=>{Us(U,B),Uo(U,B);const ie=U.XMLHttpRequestEventTarget;ie&&ie.prototype&&B.patchEventTarget(U,B,[ie.prototype])}),$.__load_patch("MutationObserver",(U,se,B)=>{Wt("MutationObserver"),Wt("WebKitMutationObserver")}),$.__load_patch("IntersectionObserver",(U,se,B)=>{Wt("IntersectionObserver")}),$.__load_patch("FileReader",(U,se,B)=>{Wt("FileReader")}),$.__load_patch("on_property",(U,se,B)=>{$o(B,U)}),$.__load_patch("customElements",(U,se,B)=>{Ts(U,B)}),$.__load_patch("XHR",(U,se)=>{Ze(U);const B=C("xhrTask"),ie=C("xhrSync"),ge=C("xhrListener"),ze=C("xhrScheduled"),Ae=C("xhrURL"),be=C("xhrErrorBeforeScheduled");function Ze(Ce){const Ye=Ce.XMLHttpRequest;if(!Ye)return;const dt=Ye.prototype;function mt(st){return st[B]}let Kt=dt[de],Bt=dt[me];if(!Kt){const st=Ce.XMLHttpRequestEventTarget;if(st){const yt=st.prototype;Kt=yt[de],Bt=yt[me]}}const Dn="readystatechange",Yt="scheduled";function We(st){const yt=st.data,xe=yt.target;xe[ze]=!1,xe[be]=!1;const En=xe[ge];Kt||(Kt=xe[de],Bt=xe[me]),En&&Bt.call(xe,Dn,En);const yn=xe[ge]=()=>{if(xe.readyState===xe.DONE)if(!yt.aborted&&xe[ze]&&st.state===Yt){const vt=xe[se.__symbol__("loadfalse")];if(xe.status!==0&&vt&&vt.length>0){const te=st.invoke;st.invoke=function(){const ee=xe[se.__symbol__("loadfalse")];for(let J=0;J<ee.length;J++)ee[J]===st&&ee.splice(J,1);!yt.aborted&&st.state===Yt&&te.call(st)},vt.push(st)}else st.invoke()}else!yt.aborted&&xe[ze]===!1&&(xe[be]=!0)};return Kt.call(xe,Dn,yn),xe[B]||(xe[B]=st),$t.apply(xe,yt.args),xe[ze]=!0,st}function Te(){}function Ct(st){const yt=st.data;return yt.aborted=!0,lt.apply(yt.target,yt.args)}const gt=Se(dt,"open",()=>function(st,yt){return st[ie]=yt[2]==!1,st[Ae]=yt[1],gt.apply(st,yt)}),Ut="XMLHttpRequest.send",Mt=C("fetchTaskAborting"),Ve=C("fetchTaskScheduling"),$t=Se(dt,"send",()=>function(st,yt){if(se.current[Ve]===!0||st[ie])return $t.apply(st,yt);{const xe={target:st,url:st[Ae],isPeriodic:!1,args:yt,aborted:!1},En=L(Ut,Te,xe,We,Ct);st&&st[be]===!0&&!xe.aborted&&En.state===Yt&&En.invoke()}}),lt=Se(dt,"abort",()=>function(st,yt){const xe=mt(st);if(xe&&typeof xe.type=="string"){if(xe.cancelFn==null||xe.data&&xe.data.aborted)return;xe.zone.cancelTask(xe)}else if(se.current[Mt]===!0)return lt.apply(st,yt)})}}),$.__load_patch("geolocation",U=>{U.navigator&&U.navigator.geolocation&&ve(U.navigator.geolocation,["getCurrentPosition","watchPosition"])}),$.__load_patch("PromiseRejectionEvent",(U,se)=>{function B(ie){return function(ge){li(U,ie).forEach(Ae=>{const be=U.PromiseRejectionEvent;if(be){const Ze=new be(ie,{promise:ge.promise,reason:ge.rejection});Ae.invoke(Ze)}})}}U.PromiseRejectionEvent&&(se[C("unhandledPromiseRejectionHandler")]=B("unhandledrejection"),se[C("rejectionHandledHandler")]=B("rejectionhandled"))}),$.__load_patch("queueMicrotask",(U,se,B)=>{Fo(U,B)})}function Bo($){$.__load_patch("ZoneAwarePromise",(U,se,B)=>{const ie=Object.getOwnPropertyDescriptor,ge=Object.defineProperty;function ze(_e){if(_e&&_e.toString===Object.prototype.toString){const fe=_e.constructor&&_e.constructor.name;return(fe||"")+": "+JSON.stringify(_e)}return _e?_e.toString():Object.prototype.toString.call(_e)}const Ae=B.symbol,be=[],Ze=U[Ae("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,Ce=Ae("Promise"),Ye=Ae("then"),dt="__creationTrace__";B.onUnhandledError=_e=>{if(B.showUncaughtError()){const fe=_e&&_e.rejection;fe?console.error("Unhandled Promise rejection:",fe instanceof Error?fe.message:fe,"; Zone:",_e.zone.name,"; Task:",_e.task&&_e.task.source,"; Value:",fe,fe instanceof Error?fe.stack:void 0):console.error(_e)}},B.microtaskDrainDone=()=>{for(;be.length;){const _e=be.shift();try{_e.zone.runGuarded(()=>{throw _e.throwOriginal?_e.rejection:_e})}catch(fe){Kt(fe)}}};const mt=Ae("unhandledPromiseRejectionHandler");function Kt(_e){B.onUnhandledError(_e);try{const fe=se[mt];typeof fe=="function"&&fe.call(this,_e)}catch{}}function Bt(_e){return _e&&typeof _e.then=="function"}function Dn(_e){return _e}function Yt(_e){return et.reject(_e)}const We=Ae("state"),Te=Ae("value"),Ct=Ae("finally"),gt=Ae("parentPromiseValue"),Ut=Ae("parentPromiseState"),Mt="Promise.then",Ve=null,$t=!0,lt=!1,st=0;function yt(_e,fe){return Z=>{try{Rt(_e,fe,Z)}catch(we){Rt(_e,!1,we)}}}const xe=function(){let _e=!1;return function(Z){return function(){_e||(_e=!0,Z.apply(null,arguments))}}},En="Promise resolved with itself",yn=Ae("currentTaskTrace");function Rt(_e,fe,Z){const we=xe();if(_e===Z)throw new TypeError(En);if(_e[We]===Ve){let Le=null;try{(typeof Z=="object"||typeof Z=="function")&&(Le=Z&&Z.then)}catch(Fe){return we(()=>{Rt(_e,!1,Fe)})(),_e}if(fe!==lt&&Z instanceof et&&Z.hasOwnProperty(We)&&Z.hasOwnProperty(Te)&&Z[We]!==Ve)te(Z),Rt(_e,Z[We],Z[Te]);else if(fe!==lt&&typeof Le=="function")try{Le.call(Z,we(yt(_e,fe)),we(yt(_e,!1)))}catch(Fe){we(()=>{Rt(_e,!1,Fe)})()}else{_e[We]=fe;const Fe=_e[Te];if(_e[Te]=Z,_e[Ct]===Ct&&fe===$t&&(_e[We]=_e[Ut],_e[Te]=_e[gt]),fe===lt&&Z instanceof Error){const Oe=se.currentTask&&se.currentTask.data&&se.currentTask.data[dt];Oe&&ge(Z,yn,{configurable:!0,enumerable:!1,writable:!0,value:Oe})}for(let Oe=0;Oe<Fe.length;)ee(_e,Fe[Oe++],Fe[Oe++],Fe[Oe++],Fe[Oe++]);if(Fe.length==0&&fe==lt){_e[We]=st;let Oe=Z;try{throw new Error("Uncaught (in promise): "+ze(Z)+(Z&&Z.stack?`
`+Z.stack:""))}catch(it){Oe=it}Ze&&(Oe.throwOriginal=!0),Oe.rejection=Z,Oe.promise=_e,Oe.zone=se.current,Oe.task=se.currentTask,be.push(Oe),B.scheduleMicroTask()}}}return _e}const vt=Ae("rejectionHandledHandler");function te(_e){if(_e[We]===st){try{const fe=se[vt];fe&&typeof fe=="function"&&fe.call(this,{rejection:_e[Te],promise:_e})}catch{}_e[We]=lt;for(let fe=0;fe<be.length;fe++)_e===be[fe].promise&&be.splice(fe,1)}}function ee(_e,fe,Z,we,Le){te(_e);const Fe=_e[We],Oe=Fe?typeof we=="function"?we:Dn:typeof Le=="function"?Le:Yt;fe.scheduleMicroTask(Mt,()=>{try{const it=_e[Te],ot=!!Z&&Ct===Z[Ct];ot&&(Z[gt]=it,Z[Ut]=Fe);const De=fe.run(Oe,void 0,ot&&Oe!==Yt&&Oe!==Dn?[]:[it]);Rt(Z,!0,De)}catch(it){Rt(Z,!1,it)}},Z)}const J="function ZoneAwarePromise() { [native code] }",Ne=function(){},Nt=U.AggregateError;class et{static toString(){return J}static resolve(fe){return fe instanceof et?fe:Rt(new this(null),$t,fe)}static reject(fe){return Rt(new this(null),lt,fe)}static withResolvers(){const fe={};return fe.promise=new et((Z,we)=>{fe.resolve=Z,fe.reject=we}),fe}static any(fe){if(!fe||typeof fe[Symbol.iterator]!="function")return Promise.reject(new Nt([],"All promises were rejected"));const Z=[];let we=0;try{for(let Oe of fe)we++,Z.push(et.resolve(Oe))}catch{return Promise.reject(new Nt([],"All promises were rejected"))}if(we===0)return Promise.reject(new Nt([],"All promises were rejected"));let Le=!1;const Fe=[];return new et((Oe,it)=>{for(let ot=0;ot<Z.length;ot++)Z[ot].then(De=>{Le||(Le=!0,Oe(De))},De=>{Fe.push(De),we--,we===0&&(Le=!0,it(new Nt(Fe,"All promises were rejected")))})})}static race(fe){let Z,we,Le=new this((it,ot)=>{Z=it,we=ot});function Fe(it){Z(it)}function Oe(it){we(it)}for(let it of fe)Bt(it)||(it=this.resolve(it)),it.then(Fe,Oe);return Le}static all(fe){return et.allWithCallback(fe)}static allSettled(fe){return(this&&this.prototype instanceof et?this:et).allWithCallback(fe,{thenCallback:we=>({status:"fulfilled",value:we}),errorCallback:we=>({status:"rejected",reason:we})})}static allWithCallback(fe,Z){let we,Le,Fe=new this((De,Pt)=>{we=De,Le=Pt}),Oe=2,it=0;const ot=[];for(let De of fe){Bt(De)||(De=this.resolve(De));const Pt=it;try{De.then(Be=>{ot[Pt]=Z?Z.thenCallback(Be):Be,Oe--,Oe===0&&we(ot)},Be=>{Z?(ot[Pt]=Z.errorCallback(Be),Oe--,Oe===0&&we(ot)):Le(Be)})}catch(Be){Le(Be)}Oe++,it++}return Oe-=2,Oe===0&&we(ot),Fe}constructor(fe){const Z=this;if(!(Z instanceof et))throw new Error("Must be an instanceof Promise.");Z[We]=Ve,Z[Te]=[];try{const we=xe();fe&&fe(we(yt(Z,$t)),we(yt(Z,lt)))}catch(we){Rt(Z,!1,we)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return et}then(fe,Z){var we;let Le=(we=this.constructor)==null?void 0:we[Symbol.species];(!Le||typeof Le!="function")&&(Le=this.constructor||et);const Fe=new Le(Ne),Oe=se.current;return this[We]==Ve?this[Te].push(Oe,Fe,fe,Z):ee(this,Oe,Fe,fe,Z),Fe}catch(fe){return this.then(null,fe)}finally(fe){var Z;let we=(Z=this.constructor)==null?void 0:Z[Symbol.species];(!we||typeof we!="function")&&(we=et);const Le=new we(Ne);Le[Ct]=Ct;const Fe=se.current;return this[We]==Ve?this[Te].push(Fe,Le,fe,fe):ee(this,Fe,Le,fe,fe),Le}}et.resolve=et.resolve,et.reject=et.reject,et.race=et.race,et.all=et.all;const er=U[Ce]=U.Promise;U.Promise=et;const kr=Ae("thenPatched");function Rr(_e){const fe=_e.prototype,Z=ie(fe,"then");if(Z&&(Z.writable===!1||!Z.configurable))return;const we=fe.then;fe[Ye]=we,_e.prototype.then=function(Le,Fe){return new et((it,ot)=>{we.call(this,it,ot)}).then(Le,Fe)},_e[kr]=!0}B.patchThen=Rr;function On(_e){return function(fe,Z){let we=_e.apply(fe,Z);if(we instanceof et)return we;let Le=we.constructor;return Le[kr]||Rr(Le),we}}return er&&(Rr(er),Se(U,"fetch",_e=>On(_e))),Promise[se.__symbol__("uncaughtPromiseErrors")]=be,et})}function qo($){$.__load_patch("toString",U=>{const se=Function.prototype.toString,B=C("OriginalDelegate"),ie=C("Promise"),ge=C("Error"),ze=function(){if(typeof this=="function"){const Ce=this[B];if(Ce)return typeof Ce=="function"?se.call(Ce):Object.prototype.toString.call(Ce);if(this===Promise){const Ye=U[ie];if(Ye)return se.call(Ye)}if(this===Error){const Ye=U[ge];if(Ye)return se.call(Ye)}}return se.call(this)};ze[B]=se,Function.prototype.toString=ze;const Ae=Object.prototype.toString,be="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?be:Ae.call(this)}})}function ui($,U,se,B,ie){const ge=Zone.__symbol__(B);if(U[ge])return;const ze=U[ge]=U[B];U[B]=function(Ae,be,Ze){return be&&be.prototype&&ie.forEach(function(Ce){const Ye=`${se}.${B}::`+Ce,dt=be.prototype;try{if(dt.hasOwnProperty(Ce)){const mt=$.ObjectGetOwnPropertyDescriptor(dt,Ce);mt&&mt.value?(mt.value=$.wrapWithCurrentZone(mt.value,Ye),$._redefineProperty(be.prototype,Ce,mt)):dt[Ce]&&(dt[Ce]=$.wrapWithCurrentZone(dt[Ce],Ye))}else dt[Ce]&&(dt[Ce]=$.wrapWithCurrentZone(dt[Ce],Ye))}catch{}}),ze.call(U,Ae,be,Ze)},$.attachOriginToPatched(U[B],ze)}function zi($){$.__load_patch("util",(U,se,B)=>{const ie=ci(U);B.patchOnProperties=kt,B.patchMethod=Se,B.bindArguments=ft,B.patchMacroTask=Et;const ge=se.__symbol__("BLACK_LISTED_EVENTS"),ze=se.__symbol__("UNPATCHED_EVENTS");U[ze]&&(U[ge]=U[ze]),U[ge]&&(se[ge]=se[ze]=U[ge]),B.patchEventPrototype=$i,B.patchEventTarget=Vo,B.ObjectDefineProperty=M,B.ObjectGetOwnPropertyDescriptor=P,B.ObjectCreate=X,B.ArraySlice=W,B.patchClass=Wt,B.wrapWithCurrentZone=k,B.filterProperties=$s,B.attachOriginToPatched=It,B._redefineProperty=Object.defineProperty,B.patchCallbacks=ui,B.getGlobalObjects=()=>({globalSources:jo,zoneSymbolEventNames:Nn,eventNames:ie,isBrowser:oe,isMix:Ge,isNode:z,TRUE_STR:N,FALSE_STR:I,ZONE_SYMBOL_PREFIX:A,ADD_EVENT_LISTENER_STR:Q,REMOVE_EVENT_LISTENER_STR:ae})})}function Bi($){Bo($),qo($),zi($)}var mr=S();return Bi(mr),zo(mr),Sw}cC();var j=hy();const Hn=Jx(j);var ih={},Cm={exports:{}},Vr={},Pm={exports:{}},Nm={};var Rw;function uC(){return Rw||(Rw=1,(function(n){function e(ve,$e){var ke=ve.length;ve.push($e);e:for(;0<ke;){var z=ke-1>>>1,oe=ve[z];if(0<s(oe,$e))ve[z]=$e,ve[ke]=oe,ke=z;else break e}}function t(ve){return ve.length===0?null:ve[0]}function r(ve){if(ve.length===0)return null;var $e=ve[0],ke=ve.pop();if(ke!==$e){ve[0]=ke;e:for(var z=0,oe=ve.length,Ge=oe>>>1;z<Ge;){var rt=2*(z+1)-1,pt=ve[rt],_t=rt+1,St=ve[_t];if(0>s(pt,ke))_t<oe&&0>s(St,pt)?(ve[z]=St,ve[_t]=ke,z=_t):(ve[z]=pt,ve[rt]=ke,z=rt);else if(_t<oe&&0>s(St,ke))ve[z]=St,ve[_t]=ke,z=_t;else break e}}return $e}function s(ve,$e){var ke=ve.sortIndex-$e.sortIndex;return ke!==0?ke:ve.id-$e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],y=1,_=null,T=3,S=!1,P=!1,M=!1,D=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(ve){for(var $e=t(p);$e!==null;){if($e.callback===null)r(p);else if($e.startTime<=ve)r(p),$e.sortIndex=$e.expirationTime,e(d,$e);else break;$e=t(p)}}function ae(ve){if(M=!1,Q(ve),!P)if(t(d)!==null)P=!0,hn(de);else{var $e=t(p);$e!==null&&ft(ae,$e.startTime-ve)}}function de(ve,$e){P=!1,M&&(M=!1,X(I),I=-1),S=!0;var ke=T;try{for(Q($e),_=t(d);_!==null&&(!(_.expirationTime>$e)||ve&&!L());){var z=_.callback;if(typeof z=="function"){_.callback=null,T=_.priorityLevel;var oe=z(_.expirationTime<=$e);$e=n.unstable_now(),typeof oe=="function"?_.callback=oe:_===t(d)&&r(d),Q($e)}else r(d);_=t(d)}if(_!==null)var Ge=!0;else{var rt=t(p);rt!==null&&ft(ae,rt.startTime-$e),Ge=!1}return Ge}finally{_=null,T=ke,S=!1}}var me=!1,N=null,I=-1,A=5,k=-1;function L(){return!(n.unstable_now()-k<A)}function C(){if(N!==null){var ve=n.unstable_now();k=ve;var $e=!0;try{$e=N(!0,ve)}finally{$e?R():(me=!1,N=null)}}else me=!1}var R;if(typeof W=="function")R=function(){W(C)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,Je=ut.port2;ut.port1.onmessage=C,R=function(){Je.postMessage(null)}}else R=function(){D(C,0)};function hn(ve){N=ve,me||(me=!0,R())}function ft(ve,$e){I=D(function(){ve(n.unstable_now())},$e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ve){ve.callback=null},n.unstable_continueExecution=function(){P||S||(P=!0,hn(de))},n.unstable_forceFrameRate=function(ve){0>ve||125<ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ve?Math.floor(1e3/ve):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ve){switch(T){case 1:case 2:case 3:var $e=3;break;default:$e=T}var ke=T;T=$e;try{return ve()}finally{T=ke}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ve,$e){switch(ve){case 1:case 2:case 3:case 4:case 5:break;default:ve=3}var ke=T;T=ve;try{return $e()}finally{T=ke}},n.unstable_scheduleCallback=function(ve,$e,ke){var z=n.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?z+ke:z):ke=z,ve){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ke+oe,ve={id:y++,callback:$e,priorityLevel:ve,startTime:ke,expirationTime:oe,sortIndex:-1},ke>z?(ve.sortIndex=ke,e(p,ve),t(d)===null&&ve===t(p)&&(M?(X(I),I=-1):M=!0,ft(ae,ke-z))):(ve.sortIndex=oe,e(d,ve),P||S||(P=!0,hn(de))),ve},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ve){var $e=T;return function(){var ke=T;T=$e;try{return ve.apply(this,arguments)}finally{T=ke}}}})(Nm)),Nm}var Aw;function dC(){return Aw||(Aw=1,Pm.exports=uC()),Pm.exports}var Cw;function hC(){if(Cw)return Vr;Cw=1;var n=hy(),e=dC();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},_={};function T(i){return d.call(_,i)?!0:d.call(y,i)?!1:p.test(i)?_[i]=!0:(y[i]=!0,!1)}function S(i,a,c,f){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function P(i,a,c,f){if(a===null||typeof a>"u"||S(i,a,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function M(i,a,c,f,m,w,x){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=w,this.removeEmptyString=x}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){D[i]=new M(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];D[a]=new M(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){D[i]=new M(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){D[i]=new M(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){D[i]=new M(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){D[i]=new M(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){D[i]=new M(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){D[i]=new M(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){D[i]=new M(i,5,!1,i.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function W(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(X,W);D[a]=new M(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(X,W);D[a]=new M(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(X,W);D[a]=new M(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){D[i]=new M(i,1,!1,i.toLowerCase(),null,!1,!1)}),D.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){D[i]=new M(i,1,!1,i.toLowerCase(),null,!0,!0)});function Q(i,a,c,f){var m=D.hasOwnProperty(a)?D[a]:null;(m!==null?m.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(P(a,c,m,f)&&(c=null),f||m===null?T(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):m.mustUseProperty?i[m.propertyName]=c===null?m.type===3?!1:"":c:(a=m.attributeName,f=m.attributeNamespace,c===null?i.removeAttribute(a):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,f?i.setAttributeNS(f,a,c):i.setAttribute(a,c))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),me=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),Je=Symbol.for("react.memo"),hn=Symbol.for("react.lazy"),ft=Symbol.for("react.offscreen"),ve=Symbol.iterator;function $e(i){return i===null||typeof i!="object"?null:(i=ve&&i[ve]||i["@@iterator"],typeof i=="function"?i:null)}var ke=Object.assign,z;function oe(i){if(z===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+i}var Ge=!1;function rt(i,a){if(!i||Ge)return"";Ge=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var f=Y}Reflect.construct(i,[],a)}else{try{a.call()}catch(Y){f=Y}i.call(a.prototype)}else{try{throw Error()}catch(Y){f=Y}i()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var m=Y.stack.split(`
`),w=f.stack.split(`
`),x=m.length-1,O=w.length-1;1<=x&&0<=O&&m[x]!==w[O];)O--;for(;1<=x&&0<=O;x--,O--)if(m[x]!==w[O]){if(x!==1||O!==1)do if(x--,O--,0>O||m[x]!==w[O]){var V=`
`+m[x].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=x&&0<=O);break}}}finally{Ge=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?oe(i):""}function pt(i){switch(i.tag){case 5:return oe(i.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return i=rt(i.type,!1),i;case 11:return i=rt(i.type.render,!1),i;case 1:return i=rt(i.type,!0),i;default:return""}}function _t(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case me:return"Portal";case A:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case ut:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case k:return(i._context.displayName||"Context")+".Provider";case C:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Je:return a=i.displayName||null,a!==null?a:_t(i.type)||"Memo";case hn:a=i._payload,i=i._init;try{return _t(i(a))}catch{}}return null}function St(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _t(a);case 8:return a===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function kt(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function wt(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Wt(i){var a=wt(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,w=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(x){f=""+x,w.call(this,x)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(x){f=""+x},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Se(i){i._valueTracker||(i._valueTracker=Wt(i))}function Et(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=wt(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function It(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Zn(i,a){var c=a.checked;return ke({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function pr(i,a){var c=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;c=kt(a.value!=null?a.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Lo(i,a){a=a.checked,a!=null&&Q(i,"checked",a,!1)}function Nn(i,a){Lo(i,a);var c=kt(a.value),f=a.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?ai(i,a.type,c):a.hasOwnProperty("defaultValue")&&ai(i,a.type,kt(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function jo(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function ai(i,a,c){(a!=="number"||It(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var ls=Array.isArray;function cs(i,a,c,f){if(i=i.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<i.length;c++)m=a.hasOwnProperty("$"+i[c].value),i[c].selected!==m&&(i[c].selected=m),m&&f&&(i[c].defaultSelected=!0)}else{for(c=""+kt(c),a=null,m=0;m<i.length;m++){if(i[m].value===c){i[m].selected=!0,f&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function Vo(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ke({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function li(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(ls(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:kt(c)}}function $i(i,a){var c=kt(a.value),f=kt(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function Fo(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function tn(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?tn(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ts,Uo=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,f,m){MSApp.execUnsafeLocalFunction(function(){return i(a,c,f,m)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Ts.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Us(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var $s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zs=["Webkit","ms","Moz","O"];Object.keys($s).forEach(function(i){zs.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),$s[a]=$s[i]})});function ci(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||$s.hasOwnProperty(i)&&$s[i]?(""+a).trim():a+"px"}function $o(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var f=c.indexOf("--")===0,m=ci(c,a[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,m):i[c]=m}}var zo=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bo(i,a){if(a){if(zo[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function qo(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function zi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Bi=null,mr=null,$=null;function U(i){if(i=Ac(i)){if(typeof Bi!="function")throw Error(t(280));var a=i.stateNode;a&&(a=wd(a),Bi(i.stateNode,i.type,a))}}function se(i){mr?$?$.push(i):$=[i]:mr=i}function B(){if(mr){var i=mr,a=$;if($=mr=null,U(i),a)for(i=0;i<a.length;i++)U(a[i])}}function ie(i,a){return i(a)}function ge(){}var ze=!1;function Ae(i,a,c){if(ze)return i(a,c);ze=!0;try{return ie(i,a,c)}finally{ze=!1,(mr!==null||$!==null)&&(ge(),B())}}function be(i,a){var c=i.stateNode;if(c===null)return null;var f=wd(c);if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var Ze=!1;if(u)try{var Ce={};Object.defineProperty(Ce,"passive",{get:function(){Ze=!0}}),window.addEventListener("test",Ce,Ce),window.removeEventListener("test",Ce,Ce)}catch{Ze=!1}function Ye(i,a,c,f,m,w,x,O,V){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(c,Y)}catch(ue){this.onError(ue)}}var dt=!1,mt=null,Kt=!1,Bt=null,Dn={onError:function(i){dt=!0,mt=i}};function Yt(i,a,c,f,m,w,x,O,V){dt=!1,mt=null,Ye.apply(Dn,arguments)}function We(i,a,c,f,m,w,x,O,V){if(Yt.apply(this,arguments),dt){if(dt){var Y=mt;dt=!1,mt=null}else throw Error(t(198));Kt||(Kt=!0,Bt=Y)}}function Te(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function Ct(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function gt(i){if(Te(i)!==i)throw Error(t(188))}function Ut(i){var a=i.alternate;if(!a){if(a=Te(i),a===null)throw Error(t(188));return a!==i?null:i}for(var c=i,f=a;;){var m=c.return;if(m===null)break;var w=m.alternate;if(w===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===c)return gt(m),i;if(w===f)return gt(m),a;w=w.sibling}throw Error(t(188))}if(c.return!==f.return)c=m,f=w;else{for(var x=!1,O=m.child;O;){if(O===c){x=!0,c=m,f=w;break}if(O===f){x=!0,f=m,c=w;break}O=O.sibling}if(!x){for(O=w.child;O;){if(O===c){x=!0,c=w,f=m;break}if(O===f){x=!0,f=w,c=m;break}O=O.sibling}if(!x)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:a}function Mt(i){return i=Ut(i),i!==null?Ve(i):null}function Ve(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Ve(i);if(a!==null)return a;i=i.sibling}return null}var $t=e.unstable_scheduleCallback,lt=e.unstable_cancelCallback,st=e.unstable_shouldYield,yt=e.unstable_requestPaint,xe=e.unstable_now,En=e.unstable_getCurrentPriorityLevel,yn=e.unstable_ImmediatePriority,Rt=e.unstable_UserBlockingPriority,vt=e.unstable_NormalPriority,te=e.unstable_LowPriority,ee=e.unstable_IdlePriority,J=null,Ne=null;function Nt(i){if(Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(J,i,void 0,(i.current.flags&128)===128)}catch{}}var et=Math.clz32?Math.clz32:Rr,er=Math.log,kr=Math.LN2;function Rr(i){return i>>>=0,i===0?32:31-(er(i)/kr|0)|0}var On=64,_e=4194304;function fe(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Z(i,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,m=i.suspendedLanes,w=i.pingedLanes,x=c&268435455;if(x!==0){var O=x&~m;O!==0?f=fe(O):(w&=x,w!==0&&(f=fe(w)))}else x=c&~m,x!==0?f=fe(x):w!==0&&(f=fe(w));if(f===0)return 0;if(a!==0&&a!==f&&(a&m)===0&&(m=f&-f,w=a&-a,m>=w||m===16&&(w&4194240)!==0))return a;if((f&4)!==0&&(f|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)c=31-et(a),m=1<<c,f|=i[c],a&=~m;return f}function we(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Le(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,m=i.expirationTimes,w=i.pendingLanes;0<w;){var x=31-et(w),O=1<<x,V=m[x];V===-1?((O&c)===0||(O&f)!==0)&&(m[x]=we(O,a)):V<=a&&(i.expiredLanes|=O),w&=~O}}function Fe(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Oe(){var i=On;return On<<=1,(On&4194240)===0&&(On=64),i}function it(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function ot(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-et(a),i[a]=c}function De(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var m=31-et(c),w=1<<m;a[m]=0,f[m]=-1,i[m]=-1,c&=~w}}function Pt(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-et(c),m=1<<f;m&a|i[f]&a&&(i[f]|=a),c&=~m}}var Be=0;function Gn(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var tr,Ar,qi,Ho,Wa,di=!1,Gr=[],nn=null,Cr=null,nr=null,xs=new Map,gr=new Map,rr=[],yr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vr(i,a){switch(i){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":xs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":gr.delete(a.pointerId)}}function Pr(i,a,c,f,m,w){return i===null||i.nativeEvent!==w?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:w,targetContainers:[m]},a!==null&&(a=Ac(a),a!==null&&Ar(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function op(i,a,c,f,m){switch(a){case"focusin":return nn=Pr(nn,i,a,c,f,m),!0;case"dragenter":return Cr=Pr(Cr,i,a,c,f,m),!0;case"mouseover":return nr=Pr(nr,i,a,c,f,m),!0;case"pointerover":var w=m.pointerId;return xs.set(w,Pr(xs.get(w)||null,i,a,c,f,m)),!0;case"gotpointercapture":return w=m.pointerId,gr.set(w,Pr(gr.get(w)||null,i,a,c,f,m)),!0}return!1}function sd(i){var a=Yo(i.target);if(a!==null){var c=Te(a);if(c!==null){if(a=c.tag,a===13){if(a=Ct(c),a!==null){i.blockedOn=a,Wa(i.priority,function(){qi(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function hi(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Qa(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);ui=f,c.target.dispatchEvent(f),ui=null}else return a=Ac(c),a!==null&&Ar(a),i.blockedOn=c,!1;a.shift()}return!0}function Go(i,a,c){hi(i)&&c.delete(a)}function id(){di=!1,nn!==null&&hi(nn)&&(nn=null),Cr!==null&&hi(Cr)&&(Cr=null),nr!==null&&hi(nr)&&(nr=null),xs.forEach(Go),gr.forEach(Go)}function Is(i,a){i.blockedOn===a&&(i.blockedOn=null,di||(di=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,id)))}function bs(i){function a(m){return Is(m,i)}if(0<Gr.length){Is(Gr[0],i);for(var c=1;c<Gr.length;c++){var f=Gr[c];f.blockedOn===i&&(f.blockedOn=null)}}for(nn!==null&&Is(nn,i),Cr!==null&&Is(Cr,i),nr!==null&&Is(nr,i),xs.forEach(a),gr.forEach(a),c=0;c<rr.length;c++)f=rr[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<rr.length&&(c=rr[0],c.blockedOn===null);)sd(c),c.blockedOn===null&&rr.shift()}var fi=ae.ReactCurrentBatchConfig,Hi=!0;function rn(i,a,c,f){var m=Be,w=fi.transition;fi.transition=null;try{Be=1,mc(i,a,c,f)}finally{Be=m,fi.transition=w}}function ap(i,a,c,f){var m=Be,w=fi.transition;fi.transition=null;try{Be=4,mc(i,a,c,f)}finally{Be=m,fi.transition=w}}function mc(i,a,c,f){if(Hi){var m=Qa(i,a,c,f);if(m===null)vp(i,a,f,Ko,c),vr(i,f);else if(op(m,i,a,c,f))f.stopPropagation();else if(vr(i,f),a&4&&-1<yr.indexOf(i)){for(;m!==null;){var w=Ac(m);if(w!==null&&tr(w),w=Qa(i,a,c,f),w===null&&vp(i,a,f,Ko,c),w===m)break;m=w}m!==null&&f.stopPropagation()}else vp(i,a,f,null,c)}}var Ko=null;function Qa(i,a,c,f){if(Ko=null,i=zi(f),i=Yo(i),i!==null)if(a=Te(i),a===null)i=null;else if(c=a.tag,c===13){if(i=Ct(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Ko=i,null}function gc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(En()){case yn:return 1;case Rt:return 4;case vt:case te:return 16;case ee:return 536870912;default:return 16}default:return 16}}var Kr=null,Ya=null,Nr=null;function yc(){if(Nr)return Nr;var i,a=Ya,c=a.length,f,m="value"in Kr?Kr.value:Kr.textContent,w=m.length;for(i=0;i<c&&a[i]===m[i];i++);var x=c-i;for(f=1;f<=x&&a[c-f]===m[w-f];f++);return Nr=m.slice(i,1<f?1-f:void 0)}function Ja(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Bs(){return!0}function vc(){return!1}function Kn(i){function a(c,f,m,w,x){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=w,this.target=x,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(c=i[O],this[O]=c?c(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Bs:vc,this.isPropagationStopped=vc,this}return ke(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),a}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=Kn(Ss),qs=ke({},Ss,{view:0,detail:0}),lp=Kn(qs),Za,pi,Gi,Wo=ke({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Gi&&(Gi&&i.type==="mousemove"?(Za=i.screenX-Gi.screenX,pi=i.screenY-Gi.screenY):pi=Za=0,Gi=i),Za)},movementY:function(i){return"movementY"in i?i.movementY:pi}}),el=Kn(Wo),_c=ke({},Wo,{dataTransfer:0}),od=Kn(_c),tl=ke({},qs,{relatedTarget:0}),nl=Kn(tl),ad=ke({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),mi=Kn(ad),ld=ke({},Ss,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),cd=Kn(ld),ud=ke({},Ss,{data:0}),wc=Kn(ud),rl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=dd[i])?!!a[i]:!1}function Hs(){return hd}var h=ke({},qs,{key:function(i){if(i.key){var a=rl[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ja(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?_r[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hs,charCode:function(i){return i.type==="keypress"?Ja(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ja(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=Kn(h),E=ke({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b=Kn(E),q=ke({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hs}),ne=Kn(q),Ee=ke({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),qt=Kn(Ee),bn=ke({},Wo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Dt=Kn(bn),Mn=[9,13,27,32],Tn=u&&"CompositionEvent"in window,us=null;u&&"documentMode"in document&&(us=document.documentMode);var Wr=u&&"TextEvent"in window&&!us,Qo=u&&(!Tn||us&&8<us&&11>=us),sl=" ",g_=!1;function y_(i,a){switch(i){case"keyup":return Mn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var il=!1;function rA(i,a){switch(i){case"compositionend":return v_(a);case"keypress":return a.which!==32?null:(g_=!0,sl);case"textInput":return i=a.data,i===sl&&g_?null:i;default:return null}}function sA(i,a){if(il)return i==="compositionend"||!Tn&&y_(i,a)?(i=yc(),Nr=Ya=Kr=null,il=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Qo&&a.locale!=="ko"?null:a.data;default:return null}}var iA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function __(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!iA[i.type]:a==="textarea"}function w_(i,a,c,f){se(f),a=yd(a,"onChange"),0<a.length&&(c=new Xa("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var Ec=null,Tc=null;function oA(i){V_(i,0)}function fd(i){var a=ul(i);if(Et(a))return i}function aA(i,a){if(i==="change")return a}var E_=!1;if(u){var cp;if(u){var up="oninput"in document;if(!up){var T_=document.createElement("div");T_.setAttribute("oninput","return;"),up=typeof T_.oninput=="function"}cp=up}else cp=!1;E_=cp&&(!document.documentMode||9<document.documentMode)}function x_(){Ec&&(Ec.detachEvent("onpropertychange",I_),Tc=Ec=null)}function I_(i){if(i.propertyName==="value"&&fd(Tc)){var a=[];w_(a,Tc,i,zi(i)),Ae(oA,a)}}function lA(i,a,c){i==="focusin"?(x_(),Ec=a,Tc=c,Ec.attachEvent("onpropertychange",I_)):i==="focusout"&&x_()}function cA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return fd(Tc)}function uA(i,a){if(i==="click")return fd(a)}function dA(i,a){if(i==="input"||i==="change")return fd(a)}function hA(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ks=typeof Object.is=="function"?Object.is:hA;function xc(i,a){if(ks(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!d.call(a,m)||!ks(i[m],a[m]))return!1}return!0}function b_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function S_(i,a){var c=b_(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=b_(c)}}function k_(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?k_(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function R_(){for(var i=window,a=It();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=It(i.document)}return a}function dp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function fA(i){var a=R_(),c=i.focusedElem,f=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&k_(c.ownerDocument.documentElement,c)){if(f!==null&&dp(c)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var m=c.textContent.length,w=Math.min(f.start,m);f=f.end===void 0?w:Math.min(f.end,m),!i.extend&&w>f&&(m=f,f=w,w=m),m=S_(c,w);var x=S_(c,f);m&&x&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==x.node||i.focusOffset!==x.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),i.removeAllRanges(),w>f?(i.addRange(a),i.extend(x.node,x.offset)):(a.setEnd(x.node,x.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var pA=u&&"documentMode"in document&&11>=document.documentMode,ol=null,hp=null,Ic=null,fp=!1;function A_(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;fp||ol==null||ol!==It(f)||(f=ol,"selectionStart"in f&&dp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ic&&xc(Ic,f)||(Ic=f,f=yd(hp,"onSelect"),0<f.length&&(a=new Xa("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=ol)))}function pd(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var al={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},pp={},C_={};u&&(C_=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function md(i){if(pp[i])return pp[i];if(!al[i])return i;var a=al[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in C_)return pp[i]=a[c];return i}var P_=md("animationend"),N_=md("animationiteration"),D_=md("animationstart"),O_=md("transitionend"),M_=new Map,L_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(i,a){M_.set(i,a),o(a,[i])}for(var mp=0;mp<L_.length;mp++){var gp=L_[mp],mA=gp.toLowerCase(),gA=gp[0].toUpperCase()+gp.slice(1);Ki(mA,"on"+gA)}Ki(P_,"onAnimationEnd"),Ki(N_,"onAnimationIteration"),Ki(D_,"onAnimationStart"),Ki("dblclick","onDoubleClick"),Ki("focusin","onFocus"),Ki("focusout","onBlur"),Ki(O_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yA=new Set("cancel close invalid load scroll toggle".split(" ").concat(bc));function j_(i,a,c){var f=i.type||"unknown-event";i.currentTarget=c,We(f,a,void 0,i),i.currentTarget=null}function V_(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],m=f.event;f=f.listeners;e:{var w=void 0;if(a)for(var x=f.length-1;0<=x;x--){var O=f[x],V=O.instance,Y=O.currentTarget;if(O=O.listener,V!==w&&m.isPropagationStopped())break e;j_(m,O,Y),w=V}else for(x=0;x<f.length;x++){if(O=f[x],V=O.instance,Y=O.currentTarget,O=O.listener,V!==w&&m.isPropagationStopped())break e;j_(m,O,Y),w=V}}}if(Kt)throw i=Bt,Kt=!1,Bt=null,i}function Zt(i,a){var c=a[Ip];c===void 0&&(c=a[Ip]=new Set);var f=i+"__bubble";c.has(f)||(F_(a,i,2,!1),c.add(f))}function yp(i,a,c){var f=0;a&&(f|=4),F_(c,i,f,a)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Sc(i){if(!i[gd]){i[gd]=!0,r.forEach(function(c){c!=="selectionchange"&&(yA.has(c)||yp(c,!1,i),yp(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[gd]||(a[gd]=!0,yp("selectionchange",!1,a))}}function F_(i,a,c,f){switch(gc(a)){case 1:var m=rn;break;case 4:m=ap;break;default:m=mc}c=m.bind(null,a,c,i),m=void 0,!Ze||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?i.addEventListener(a,c,{capture:!0,passive:m}):i.addEventListener(a,c,!0):m!==void 0?i.addEventListener(a,c,{passive:m}):i.addEventListener(a,c,!1)}function vp(i,a,c,f,m){var w=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var x=f.tag;if(x===3||x===4){var O=f.stateNode.containerInfo;if(O===m||O.nodeType===8&&O.parentNode===m)break;if(x===4)for(x=f.return;x!==null;){var V=x.tag;if((V===3||V===4)&&(V=x.stateNode.containerInfo,V===m||V.nodeType===8&&V.parentNode===m))return;x=x.return}for(;O!==null;){if(x=Yo(O),x===null)return;if(V=x.tag,V===5||V===6){f=w=x;continue e}O=O.parentNode}}f=f.return}Ae(function(){var Y=w,ue=zi(c),he=[];e:{var le=M_.get(i);if(le!==void 0){var Re=Xa,je=i;switch(i){case"keypress":if(Ja(c)===0)break e;case"keydown":case"keyup":Re=v;break;case"focusin":je="focus",Re=nl;break;case"focusout":je="blur",Re=nl;break;case"beforeblur":case"afterblur":Re=nl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=el;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=od;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=ne;break;case P_:case N_:case D_:Re=mi;break;case O_:Re=qt;break;case"scroll":Re=lp;break;case"wheel":Re=Dt;break;case"copy":case"cut":case"paste":Re=cd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=b}var qe=(a&4)!==0,vn=!qe&&i==="scroll",H=qe?le!==null?le+"Capture":null:le;qe=[];for(var F=Y,K;F!==null;){K=F;var ye=K.stateNode;if(K.tag===5&&ye!==null&&(K=ye,H!==null&&(ye=be(F,H),ye!=null&&qe.push(kc(F,ye,K)))),vn)break;F=F.return}0<qe.length&&(le=new Re(le,je,null,c,ue),he.push({event:le,listeners:qe}))}}if((a&7)===0){e:{if(le=i==="mouseover"||i==="pointerover",Re=i==="mouseout"||i==="pointerout",le&&c!==ui&&(je=c.relatedTarget||c.fromElement)&&(Yo(je)||je[gi]))break e;if((Re||le)&&(le=ue.window===ue?ue:(le=ue.ownerDocument)?le.defaultView||le.parentWindow:window,Re?(je=c.relatedTarget||c.toElement,Re=Y,je=je?Yo(je):null,je!==null&&(vn=Te(je),je!==vn||je.tag!==5&&je.tag!==6)&&(je=null)):(Re=null,je=Y),Re!==je)){if(qe=el,ye="onMouseLeave",H="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(qe=b,ye="onPointerLeave",H="onPointerEnter",F="pointer"),vn=Re==null?le:ul(Re),K=je==null?le:ul(je),le=new qe(ye,F+"leave",Re,c,ue),le.target=vn,le.relatedTarget=K,ye=null,Yo(ue)===Y&&(qe=new qe(H,F+"enter",je,c,ue),qe.target=K,qe.relatedTarget=vn,ye=qe),vn=ye,Re&&je)t:{for(qe=Re,H=je,F=0,K=qe;K;K=ll(K))F++;for(K=0,ye=H;ye;ye=ll(ye))K++;for(;0<F-K;)qe=ll(qe),F--;for(;0<K-F;)H=ll(H),K--;for(;F--;){if(qe===H||H!==null&&qe===H.alternate)break t;qe=ll(qe),H=ll(H)}qe=null}else qe=null;Re!==null&&U_(he,le,Re,qe,!1),je!==null&&vn!==null&&U_(he,vn,je,qe,!0)}}e:{if(le=Y?ul(Y):window,Re=le.nodeName&&le.nodeName.toLowerCase(),Re==="select"||Re==="input"&&le.type==="file")var Ke=aA;else if(__(le))if(E_)Ke=dA;else{Ke=cA;var tt=lA}else(Re=le.nodeName)&&Re.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(Ke=uA);if(Ke&&(Ke=Ke(i,Y))){w_(he,Ke,c,ue);break e}tt&&tt(i,le,Y),i==="focusout"&&(tt=le._wrapperState)&&tt.controlled&&le.type==="number"&&ai(le,"number",le.value)}switch(tt=Y?ul(Y):window,i){case"focusin":(__(tt)||tt.contentEditable==="true")&&(ol=tt,hp=Y,Ic=null);break;case"focusout":Ic=hp=ol=null;break;case"mousedown":fp=!0;break;case"contextmenu":case"mouseup":case"dragend":fp=!1,A_(he,c,ue);break;case"selectionchange":if(pA)break;case"keydown":case"keyup":A_(he,c,ue)}var nt;if(Tn)e:{switch(i){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else il?y_(i,c)&&(ct="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(ct="onCompositionStart");ct&&(Qo&&c.locale!=="ko"&&(il||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&il&&(nt=yc()):(Kr=ue,Ya="value"in Kr?Kr.value:Kr.textContent,il=!0)),tt=yd(Y,ct),0<tt.length&&(ct=new wc(ct,i,null,c,ue),he.push({event:ct,listeners:tt}),nt?ct.data=nt:(nt=v_(c),nt!==null&&(ct.data=nt)))),(nt=Wr?rA(i,c):sA(i,c))&&(Y=yd(Y,"onBeforeInput"),0<Y.length&&(ue=new wc("onBeforeInput","beforeinput",null,c,ue),he.push({event:ue,listeners:Y}),ue.data=nt))}V_(he,a)})}function kc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function yd(i,a){for(var c=a+"Capture",f=[];i!==null;){var m=i,w=m.stateNode;m.tag===5&&w!==null&&(m=w,w=be(i,c),w!=null&&f.unshift(kc(i,w,m)),w=be(i,a),w!=null&&f.push(kc(i,w,m))),i=i.return}return f}function ll(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function U_(i,a,c,f,m){for(var w=a._reactName,x=[];c!==null&&c!==f;){var O=c,V=O.alternate,Y=O.stateNode;if(V!==null&&V===f)break;O.tag===5&&Y!==null&&(O=Y,m?(V=be(c,w),V!=null&&x.unshift(kc(c,V,O))):m||(V=be(c,w),V!=null&&x.push(kc(c,V,O)))),c=c.return}x.length!==0&&i.push({event:a,listeners:x})}var vA=/\r\n?/g,_A=/\u0000|\uFFFD/g;function $_(i){return(typeof i=="string"?i:""+i).replace(vA,`
`).replace(_A,"")}function vd(i,a,c){if(a=$_(a),$_(i)!==a&&c)throw Error(t(425))}function _d(){}var _p=null,wp=null;function Ep(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Tp=typeof setTimeout=="function"?setTimeout:void 0,wA=typeof clearTimeout=="function"?clearTimeout:void 0,z_=typeof Promise=="function"?Promise:void 0,EA=typeof queueMicrotask=="function"?queueMicrotask:typeof z_<"u"?function(i){return z_.resolve(null).then(i).catch(TA)}:Tp;function TA(i){setTimeout(function(){throw i})}function xp(i,a){var c=a,f=0;do{var m=c.nextSibling;if(i.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){i.removeChild(m),bs(a);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);bs(a)}function Wi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function B_(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var cl=Math.random().toString(36).slice(2),Gs="__reactFiber$"+cl,Rc="__reactProps$"+cl,gi="__reactContainer$"+cl,Ip="__reactEvents$"+cl,xA="__reactListeners$"+cl,IA="__reactHandles$"+cl;function Yo(i){var a=i[Gs];if(a)return a;for(var c=i.parentNode;c;){if(a=c[gi]||c[Gs]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=B_(i);i!==null;){if(c=i[Gs])return c;i=B_(i)}return a}i=c,c=i.parentNode}return null}function Ac(i){return i=i[Gs]||i[gi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ul(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function wd(i){return i[Rc]||null}var bp=[],dl=-1;function Qi(i){return{current:i}}function en(i){0>dl||(i.current=bp[dl],bp[dl]=null,dl--)}function Jt(i,a){dl++,bp[dl]=i.current,i.current=a}var Yi={},sr=Qi(Yi),Dr=Qi(!1),Jo=Yi;function hl(i,a){var c=i.type.contextTypes;if(!c)return Yi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var m={},w;for(w in c)m[w]=a[w];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=m),m}function Or(i){return i=i.childContextTypes,i!=null}function Ed(){en(Dr),en(sr)}function q_(i,a,c){if(sr.current!==Yi)throw Error(t(168));Jt(sr,a),Jt(Dr,c)}function H_(i,a,c){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var m in f)if(!(m in a))throw Error(t(108,St(i)||"Unknown",m));return ke({},c,f)}function Td(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Yi,Jo=sr.current,Jt(sr,i),Jt(Dr,Dr.current),!0}function G_(i,a,c){var f=i.stateNode;if(!f)throw Error(t(169));c?(i=H_(i,a,Jo),f.__reactInternalMemoizedMergedChildContext=i,en(Dr),en(sr),Jt(sr,i)):en(Dr),Jt(Dr,c)}var yi=null,xd=!1,Sp=!1;function K_(i){yi===null?yi=[i]:yi.push(i)}function bA(i){xd=!0,K_(i)}function Ji(){if(!Sp&&yi!==null){Sp=!0;var i=0,a=Be;try{var c=yi;for(Be=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}yi=null,xd=!1}catch(m){throw yi!==null&&(yi=yi.slice(i+1)),$t(yn,Ji),m}finally{Be=a,Sp=!1}}return null}var fl=[],pl=0,Id=null,bd=0,ds=[],hs=0,Xo=null,vi=1,_i="";function Zo(i,a){fl[pl++]=bd,fl[pl++]=Id,Id=i,bd=a}function W_(i,a,c){ds[hs++]=vi,ds[hs++]=_i,ds[hs++]=Xo,Xo=i;var f=vi;i=_i;var m=32-et(f)-1;f&=~(1<<m),c+=1;var w=32-et(a)+m;if(30<w){var x=m-m%5;w=(f&(1<<x)-1).toString(32),f>>=x,m-=x,vi=1<<32-et(a)+m|c<<m|f,_i=w+i}else vi=1<<w|c<<m|f,_i=i}function kp(i){i.return!==null&&(Zo(i,1),W_(i,1,0))}function Rp(i){for(;i===Id;)Id=fl[--pl],fl[pl]=null,bd=fl[--pl],fl[pl]=null;for(;i===Xo;)Xo=ds[--hs],ds[hs]=null,_i=ds[--hs],ds[hs]=null,vi=ds[--hs],ds[hs]=null}var Qr=null,Yr=null,sn=!1,Rs=null;function Q_(i,a){var c=gs(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function Y_(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Qr=i,Yr=Wi(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Qr=i,Yr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=Xo!==null?{id:vi,overflow:_i}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=gs(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,Qr=i,Yr=null,!0):!1;default:return!1}}function Ap(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Cp(i){if(sn){var a=Yr;if(a){var c=a;if(!Y_(i,a)){if(Ap(i))throw Error(t(418));a=Wi(c.nextSibling);var f=Qr;a&&Y_(i,a)?Q_(f,c):(i.flags=i.flags&-4097|2,sn=!1,Qr=i)}}else{if(Ap(i))throw Error(t(418));i.flags=i.flags&-4097|2,sn=!1,Qr=i}}}function J_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Qr=i}function Sd(i){if(i!==Qr)return!1;if(!sn)return J_(i),sn=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Ep(i.type,i.memoizedProps)),a&&(a=Yr)){if(Ap(i))throw X_(),Error(t(418));for(;a;)Q_(i,a),a=Wi(a.nextSibling)}if(J_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){Yr=Wi(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}Yr=null}}else Yr=Qr?Wi(i.stateNode.nextSibling):null;return!0}function X_(){for(var i=Yr;i;)i=Wi(i.nextSibling)}function ml(){Yr=Qr=null,sn=!1}function Pp(i){Rs===null?Rs=[i]:Rs.push(i)}var SA=ae.ReactCurrentBatchConfig;function Cc(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,i));var m=f,w=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(x){var O=m.refs;x===null?delete O[w]:O[w]=x},a._stringRef=w,a)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function kd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Z_(i){var a=i._init;return a(i._payload)}function e0(i){function a(H,F){if(i){var K=H.deletions;K===null?(H.deletions=[F],H.flags|=16):K.push(F)}}function c(H,F){if(!i)return null;for(;F!==null;)a(H,F),F=F.sibling;return null}function f(H,F){for(H=new Map;F!==null;)F.key!==null?H.set(F.key,F):H.set(F.index,F),F=F.sibling;return H}function m(H,F){return H=io(H,F),H.index=0,H.sibling=null,H}function w(H,F,K){return H.index=K,i?(K=H.alternate,K!==null?(K=K.index,K<F?(H.flags|=2,F):K):(H.flags|=2,F)):(H.flags|=1048576,F)}function x(H){return i&&H.alternate===null&&(H.flags|=2),H}function O(H,F,K,ye){return F===null||F.tag!==6?(F=Tm(K,H.mode,ye),F.return=H,F):(F=m(F,K),F.return=H,F)}function V(H,F,K,ye){var Ke=K.type;return Ke===N?ue(H,F,K.props.children,ye,K.key):F!==null&&(F.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===hn&&Z_(Ke)===F.type)?(ye=m(F,K.props),ye.ref=Cc(H,F,K),ye.return=H,ye):(ye=Jd(K.type,K.key,K.props,null,H.mode,ye),ye.ref=Cc(H,F,K),ye.return=H,ye)}function Y(H,F,K,ye){return F===null||F.tag!==4||F.stateNode.containerInfo!==K.containerInfo||F.stateNode.implementation!==K.implementation?(F=xm(K,H.mode,ye),F.return=H,F):(F=m(F,K.children||[]),F.return=H,F)}function ue(H,F,K,ye,Ke){return F===null||F.tag!==7?(F=aa(K,H.mode,ye,Ke),F.return=H,F):(F=m(F,K),F.return=H,F)}function he(H,F,K){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Tm(""+F,H.mode,K),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case de:return K=Jd(F.type,F.key,F.props,null,H.mode,K),K.ref=Cc(H,null,F),K.return=H,K;case me:return F=xm(F,H.mode,K),F.return=H,F;case hn:var ye=F._init;return he(H,ye(F._payload),K)}if(ls(F)||$e(F))return F=aa(F,H.mode,K,null),F.return=H,F;kd(H,F)}return null}function le(H,F,K,ye){var Ke=F!==null?F.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Ke!==null?null:O(H,F,""+K,ye);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case de:return K.key===Ke?V(H,F,K,ye):null;case me:return K.key===Ke?Y(H,F,K,ye):null;case hn:return Ke=K._init,le(H,F,Ke(K._payload),ye)}if(ls(K)||$e(K))return Ke!==null?null:ue(H,F,K,ye,null);kd(H,K)}return null}function Re(H,F,K,ye,Ke){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return H=H.get(K)||null,O(F,H,""+ye,Ke);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case de:return H=H.get(ye.key===null?K:ye.key)||null,V(F,H,ye,Ke);case me:return H=H.get(ye.key===null?K:ye.key)||null,Y(F,H,ye,Ke);case hn:var tt=ye._init;return Re(H,F,K,tt(ye._payload),Ke)}if(ls(ye)||$e(ye))return H=H.get(K)||null,ue(F,H,ye,Ke,null);kd(F,ye)}return null}function je(H,F,K,ye){for(var Ke=null,tt=null,nt=F,ct=F=0,Vn=null;nt!==null&&ct<K.length;ct++){nt.index>ct?(Vn=nt,nt=null):Vn=nt.sibling;var jt=le(H,nt,K[ct],ye);if(jt===null){nt===null&&(nt=Vn);break}i&&nt&&jt.alternate===null&&a(H,nt),F=w(jt,F,ct),tt===null?Ke=jt:tt.sibling=jt,tt=jt,nt=Vn}if(ct===K.length)return c(H,nt),sn&&Zo(H,ct),Ke;if(nt===null){for(;ct<K.length;ct++)nt=he(H,K[ct],ye),nt!==null&&(F=w(nt,F,ct),tt===null?Ke=nt:tt.sibling=nt,tt=nt);return sn&&Zo(H,ct),Ke}for(nt=f(H,nt);ct<K.length;ct++)Vn=Re(nt,H,ct,K[ct],ye),Vn!==null&&(i&&Vn.alternate!==null&&nt.delete(Vn.key===null?ct:Vn.key),F=w(Vn,F,ct),tt===null?Ke=Vn:tt.sibling=Vn,tt=Vn);return i&&nt.forEach(function(oo){return a(H,oo)}),sn&&Zo(H,ct),Ke}function qe(H,F,K,ye){var Ke=$e(K);if(typeof Ke!="function")throw Error(t(150));if(K=Ke.call(K),K==null)throw Error(t(151));for(var tt=Ke=null,nt=F,ct=F=0,Vn=null,jt=K.next();nt!==null&&!jt.done;ct++,jt=K.next()){nt.index>ct?(Vn=nt,nt=null):Vn=nt.sibling;var oo=le(H,nt,jt.value,ye);if(oo===null){nt===null&&(nt=Vn);break}i&&nt&&oo.alternate===null&&a(H,nt),F=w(oo,F,ct),tt===null?Ke=oo:tt.sibling=oo,tt=oo,nt=Vn}if(jt.done)return c(H,nt),sn&&Zo(H,ct),Ke;if(nt===null){for(;!jt.done;ct++,jt=K.next())jt=he(H,jt.value,ye),jt!==null&&(F=w(jt,F,ct),tt===null?Ke=jt:tt.sibling=jt,tt=jt);return sn&&Zo(H,ct),Ke}for(nt=f(H,nt);!jt.done;ct++,jt=K.next())jt=Re(nt,H,ct,jt.value,ye),jt!==null&&(i&&jt.alternate!==null&&nt.delete(jt.key===null?ct:jt.key),F=w(jt,F,ct),tt===null?Ke=jt:tt.sibling=jt,tt=jt);return i&&nt.forEach(function(iC){return a(H,iC)}),sn&&Zo(H,ct),Ke}function vn(H,F,K,ye){if(typeof K=="object"&&K!==null&&K.type===N&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case de:e:{for(var Ke=K.key,tt=F;tt!==null;){if(tt.key===Ke){if(Ke=K.type,Ke===N){if(tt.tag===7){c(H,tt.sibling),F=m(tt,K.props.children),F.return=H,H=F;break e}}else if(tt.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===hn&&Z_(Ke)===tt.type){c(H,tt.sibling),F=m(tt,K.props),F.ref=Cc(H,tt,K),F.return=H,H=F;break e}c(H,tt);break}else a(H,tt);tt=tt.sibling}K.type===N?(F=aa(K.props.children,H.mode,ye,K.key),F.return=H,H=F):(ye=Jd(K.type,K.key,K.props,null,H.mode,ye),ye.ref=Cc(H,F,K),ye.return=H,H=ye)}return x(H);case me:e:{for(tt=K.key;F!==null;){if(F.key===tt)if(F.tag===4&&F.stateNode.containerInfo===K.containerInfo&&F.stateNode.implementation===K.implementation){c(H,F.sibling),F=m(F,K.children||[]),F.return=H,H=F;break e}else{c(H,F);break}else a(H,F);F=F.sibling}F=xm(K,H.mode,ye),F.return=H,H=F}return x(H);case hn:return tt=K._init,vn(H,F,tt(K._payload),ye)}if(ls(K))return je(H,F,K,ye);if($e(K))return qe(H,F,K,ye);kd(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,F!==null&&F.tag===6?(c(H,F.sibling),F=m(F,K),F.return=H,H=F):(c(H,F),F=Tm(K,H.mode,ye),F.return=H,H=F),x(H)):c(H,F)}return vn}var gl=e0(!0),t0=e0(!1),Rd=Qi(null),Ad=null,yl=null,Np=null;function Dp(){Np=yl=Ad=null}function Op(i){var a=Rd.current;en(Rd),i._currentValue=a}function Mp(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function vl(i,a){Ad=i,Np=yl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Mr=!0),i.firstContext=null)}function fs(i){var a=i._currentValue;if(Np!==i)if(i={context:i,memoizedValue:a,next:null},yl===null){if(Ad===null)throw Error(t(308));yl=i,Ad.dependencies={lanes:0,firstContext:i}}else yl=yl.next=i;return a}var ea=null;function Lp(i){ea===null?ea=[i]:ea.push(i)}function n0(i,a,c,f){var m=a.interleaved;return m===null?(c.next=c,Lp(a)):(c.next=m.next,m.next=c),a.interleaved=c,wi(i,f)}function wi(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Xi=!1;function jp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ei(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Zi(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Lt&2)!==0){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,wi(i,c)}return m=f.interleaved,m===null?(a.next=a,Lp(f)):(a.next=m.next,m.next=a),f.interleaved=a,wi(i,c)}function Cd(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Pt(i,c)}}function s0(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var x={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?m=w=x:w=w.next=x,c=c.next}while(c!==null);w===null?m=w=a:w=w.next=a}else m=w=a;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function Pd(i,a,c,f){var m=i.updateQueue;Xi=!1;var w=m.firstBaseUpdate,x=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var V=O,Y=V.next;V.next=null,x===null?w=Y:x.next=Y,x=V;var ue=i.alternate;ue!==null&&(ue=ue.updateQueue,O=ue.lastBaseUpdate,O!==x&&(O===null?ue.firstBaseUpdate=Y:O.next=Y,ue.lastBaseUpdate=V))}if(w!==null){var he=m.baseState;x=0,ue=Y=V=null,O=w;do{var le=O.lane,Re=O.eventTime;if((f&le)===le){ue!==null&&(ue=ue.next={eventTime:Re,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var je=i,qe=O;switch(le=a,Re=c,qe.tag){case 1:if(je=qe.payload,typeof je=="function"){he=je.call(Re,he,le);break e}he=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=qe.payload,le=typeof je=="function"?je.call(Re,he,le):je,le==null)break e;he=ke({},he,le);break e;case 2:Xi=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,le=m.effects,le===null?m.effects=[O]:le.push(O))}else Re={eventTime:Re,lane:le,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ue===null?(Y=ue=Re,V=he):ue=ue.next=Re,x|=le;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;le=O,O=le.next,le.next=null,m.lastBaseUpdate=le,m.shared.pending=null}}while(!0);if(ue===null&&(V=he),m.baseState=V,m.firstBaseUpdate=Y,m.lastBaseUpdate=ue,a=m.shared.interleaved,a!==null){m=a;do x|=m.lane,m=m.next;while(m!==a)}else w===null&&(m.shared.lanes=0);ra|=x,i.lanes=x,i.memoizedState=he}}function i0(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],m=f.callback;if(m!==null){if(f.callback=null,f=c,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var Pc={},Ks=Qi(Pc),Nc=Qi(Pc),Dc=Qi(Pc);function ta(i){if(i===Pc)throw Error(t(174));return i}function Vp(i,a){switch(Jt(Dc,a),Jt(Nc,i),Jt(Ks,Pc),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Qt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Qt(a,i)}en(Ks),Jt(Ks,a)}function _l(){en(Ks),en(Nc),en(Dc)}function o0(i){ta(Dc.current);var a=ta(Ks.current),c=Qt(a,i.type);a!==c&&(Jt(Nc,i),Jt(Ks,c))}function Fp(i){Nc.current===i&&(en(Ks),en(Nc))}var ln=Qi(0);function Nd(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Up=[];function $p(){for(var i=0;i<Up.length;i++)Up[i]._workInProgressVersionPrimary=null;Up.length=0}var Dd=ae.ReactCurrentDispatcher,zp=ae.ReactCurrentBatchConfig,na=0,cn=null,Sn=null,Ln=null,Od=!1,Oc=!1,Mc=0,kA=0;function ir(){throw Error(t(321))}function Bp(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!ks(i[c],a[c]))return!1;return!0}function qp(i,a,c,f,m,w){if(na=w,cn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Dd.current=i===null||i.memoizedState===null?PA:NA,i=c(f,m),Oc){w=0;do{if(Oc=!1,Mc=0,25<=w)throw Error(t(301));w+=1,Ln=Sn=null,a.updateQueue=null,Dd.current=DA,i=c(f,m)}while(Oc)}if(Dd.current=jd,a=Sn!==null&&Sn.next!==null,na=0,Ln=Sn=cn=null,Od=!1,a)throw Error(t(300));return i}function Hp(){var i=Mc!==0;return Mc=0,i}function Ws(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?cn.memoizedState=Ln=i:Ln=Ln.next=i,Ln}function ps(){if(Sn===null){var i=cn.alternate;i=i!==null?i.memoizedState:null}else i=Sn.next;var a=Ln===null?cn.memoizedState:Ln.next;if(a!==null)Ln=a,Sn=i;else{if(i===null)throw Error(t(310));Sn=i,i={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Ln===null?cn.memoizedState=Ln=i:Ln=Ln.next=i}return Ln}function Lc(i,a){return typeof a=="function"?a(i):a}function Gp(i){var a=ps(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=Sn,m=f.baseQueue,w=c.pending;if(w!==null){if(m!==null){var x=m.next;m.next=w.next,w.next=x}f.baseQueue=m=w,c.pending=null}if(m!==null){w=m.next,f=f.baseState;var O=x=null,V=null,Y=w;do{var ue=Y.lane;if((na&ue)===ue)V!==null&&(V=V.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:i(f,Y.action);else{var he={lane:ue,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};V===null?(O=V=he,x=f):V=V.next=he,cn.lanes|=ue,ra|=ue}Y=Y.next}while(Y!==null&&Y!==w);V===null?x=f:V.next=O,ks(f,a.memoizedState)||(Mr=!0),a.memoizedState=f,a.baseState=x,a.baseQueue=V,c.lastRenderedState=f}if(i=c.interleaved,i!==null){m=i;do w=m.lane,cn.lanes|=w,ra|=w,m=m.next;while(m!==i)}else m===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Kp(i){var a=ps(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=c.dispatch,m=c.pending,w=a.memoizedState;if(m!==null){c.pending=null;var x=m=m.next;do w=i(w,x.action),x=x.next;while(x!==m);ks(w,a.memoizedState)||(Mr=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),c.lastRenderedState=w}return[w,f]}function a0(){}function l0(i,a){var c=cn,f=ps(),m=a(),w=!ks(f.memoizedState,m);if(w&&(f.memoizedState=m,Mr=!0),f=f.queue,Wp(d0.bind(null,c,f,i),[i]),f.getSnapshot!==a||w||Ln!==null&&Ln.memoizedState.tag&1){if(c.flags|=2048,jc(9,u0.bind(null,c,f,m,a),void 0,null),jn===null)throw Error(t(349));(na&30)!==0||c0(c,a,m)}return m}function c0(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=cn.updateQueue,a===null?(a={lastEffect:null,stores:null},cn.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function u0(i,a,c,f){a.value=c,a.getSnapshot=f,h0(a)&&f0(i)}function d0(i,a,c){return c(function(){h0(a)&&f0(i)})}function h0(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!ks(i,c)}catch{return!0}}function f0(i){var a=wi(i,1);a!==null&&Ns(a,i,1,-1)}function p0(i){var a=Ws();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:i},a.queue=i,i=i.dispatch=CA.bind(null,cn,i),[a.memoizedState,i]}function jc(i,a,c,f){return i={tag:i,create:a,destroy:c,deps:f,next:null},a=cn.updateQueue,a===null?(a={lastEffect:null,stores:null},cn.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i)),i}function m0(){return ps().memoizedState}function Md(i,a,c,f){var m=Ws();cn.flags|=i,m.memoizedState=jc(1|a,c,void 0,f===void 0?null:f)}function Ld(i,a,c,f){var m=ps();f=f===void 0?null:f;var w=void 0;if(Sn!==null){var x=Sn.memoizedState;if(w=x.destroy,f!==null&&Bp(f,x.deps)){m.memoizedState=jc(a,c,w,f);return}}cn.flags|=i,m.memoizedState=jc(1|a,c,w,f)}function g0(i,a){return Md(8390656,8,i,a)}function Wp(i,a){return Ld(2048,8,i,a)}function y0(i,a){return Ld(4,2,i,a)}function v0(i,a){return Ld(4,4,i,a)}function _0(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function w0(i,a,c){return c=c!=null?c.concat([i]):null,Ld(4,4,_0.bind(null,a,i),c)}function Qp(){}function E0(i,a){var c=ps();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&Bp(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function T0(i,a){var c=ps();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&Bp(a,f[1])?f[0]:(i=i(),c.memoizedState=[i,a],i)}function x0(i,a,c){return(na&21)===0?(i.baseState&&(i.baseState=!1,Mr=!0),i.memoizedState=c):(ks(c,a)||(c=Oe(),cn.lanes|=c,ra|=c,i.baseState=!0),a)}function RA(i,a){var c=Be;Be=c!==0&&4>c?c:4,i(!0);var f=zp.transition;zp.transition={};try{i(!1),a()}finally{Be=c,zp.transition=f}}function I0(){return ps().memoizedState}function AA(i,a,c){var f=ro(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},b0(i))S0(a,c);else if(c=n0(i,a,c,f),c!==null){var m=Er();Ns(c,i,f,m),k0(c,a,f)}}function CA(i,a,c){var f=ro(i),m={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(b0(i))S0(a,m);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var x=a.lastRenderedState,O=w(x,c);if(m.hasEagerState=!0,m.eagerState=O,ks(O,x)){var V=a.interleaved;V===null?(m.next=m,Lp(a)):(m.next=V.next,V.next=m),a.interleaved=m;return}}catch{}c=n0(i,a,m,f),c!==null&&(m=Er(),Ns(c,i,f,m),k0(c,a,f))}}function b0(i){var a=i.alternate;return i===cn||a!==null&&a===cn}function S0(i,a){Oc=Od=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function k0(i,a,c){if((c&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Pt(i,c)}}var jd={readContext:fs,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},PA={readContext:fs,useCallback:function(i,a){return Ws().memoizedState=[i,a===void 0?null:a],i},useContext:fs,useEffect:g0,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,Md(4194308,4,_0.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Md(4194308,4,i,a)},useInsertionEffect:function(i,a){return Md(4,2,i,a)},useMemo:function(i,a){var c=Ws();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var f=Ws();return a=c!==void 0?c(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=AA.bind(null,cn,i),[f.memoizedState,i]},useRef:function(i){var a=Ws();return i={current:i},a.memoizedState=i},useState:p0,useDebugValue:Qp,useDeferredValue:function(i){return Ws().memoizedState=i},useTransition:function(){var i=p0(!1),a=i[0];return i=RA.bind(null,i[1]),Ws().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var f=cn,m=Ws();if(sn){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),jn===null)throw Error(t(349));(na&30)!==0||c0(f,a,c)}m.memoizedState=c;var w={value:c,getSnapshot:a};return m.queue=w,g0(d0.bind(null,f,w,i),[i]),f.flags|=2048,jc(9,u0.bind(null,f,w,c,a),void 0,null),c},useId:function(){var i=Ws(),a=jn.identifierPrefix;if(sn){var c=_i,f=vi;c=(f&~(1<<32-et(f)-1)).toString(32)+c,a=":"+a+"R"+c,c=Mc++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=kA++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},NA={readContext:fs,useCallback:E0,useContext:fs,useEffect:Wp,useImperativeHandle:w0,useInsertionEffect:y0,useLayoutEffect:v0,useMemo:T0,useReducer:Gp,useRef:m0,useState:function(){return Gp(Lc)},useDebugValue:Qp,useDeferredValue:function(i){var a=ps();return x0(a,Sn.memoizedState,i)},useTransition:function(){var i=Gp(Lc)[0],a=ps().memoizedState;return[i,a]},useMutableSource:a0,useSyncExternalStore:l0,useId:I0,unstable_isNewReconciler:!1},DA={readContext:fs,useCallback:E0,useContext:fs,useEffect:Wp,useImperativeHandle:w0,useInsertionEffect:y0,useLayoutEffect:v0,useMemo:T0,useReducer:Kp,useRef:m0,useState:function(){return Kp(Lc)},useDebugValue:Qp,useDeferredValue:function(i){var a=ps();return Sn===null?a.memoizedState=i:x0(a,Sn.memoizedState,i)},useTransition:function(){var i=Kp(Lc)[0],a=ps().memoizedState;return[i,a]},useMutableSource:a0,useSyncExternalStore:l0,useId:I0,unstable_isNewReconciler:!1};function As(i,a){if(i&&i.defaultProps){a=ke({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function Yp(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:ke({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Vd={isMounted:function(i){return(i=i._reactInternals)?Te(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Er(),m=ro(i),w=Ei(f,m);w.payload=a,c!=null&&(w.callback=c),a=Zi(i,w,m),a!==null&&(Ns(a,i,m,f),Cd(a,i,m))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Er(),m=ro(i),w=Ei(f,m);w.tag=1,w.payload=a,c!=null&&(w.callback=c),a=Zi(i,w,m),a!==null&&(Ns(a,i,m,f),Cd(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Er(),f=ro(i),m=Ei(c,f);m.tag=2,a!=null&&(m.callback=a),a=Zi(i,m,f),a!==null&&(Ns(a,i,f,c),Cd(a,i,f))}};function R0(i,a,c,f,m,w,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,w,x):a.prototype&&a.prototype.isPureReactComponent?!xc(c,f)||!xc(m,w):!0}function A0(i,a,c){var f=!1,m=Yi,w=a.contextType;return typeof w=="object"&&w!==null?w=fs(w):(m=Or(a)?Jo:sr.current,f=a.contextTypes,w=(f=f!=null)?hl(i,m):Yi),a=new a(c,w),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Vd,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=w),a}function C0(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&Vd.enqueueReplaceState(a,a.state,null)}function Jp(i,a,c,f){var m=i.stateNode;m.props=c,m.state=i.memoizedState,m.refs={},jp(i);var w=a.contextType;typeof w=="object"&&w!==null?m.context=fs(w):(w=Or(a)?Jo:sr.current,m.context=hl(i,w)),m.state=i.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(Yp(i,a,w,c),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&Vd.enqueueReplaceState(m,m.state,null),Pd(i,c,m,f),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function wl(i,a){try{var c="",f=a;do c+=pt(f),f=f.return;while(f);var m=c}catch(w){m=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:a,stack:m,digest:null}}function Xp(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function Zp(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var OA=typeof WeakMap=="function"?WeakMap:Map;function P0(i,a,c){c=Ei(-1,c),c.tag=3,c.payload={element:null};var f=a.value;return c.callback=function(){Hd||(Hd=!0,pm=f),Zp(i,a)},c}function N0(i,a,c){c=Ei(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=a.value;c.payload=function(){return f(m)},c.callback=function(){Zp(i,a)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Zp(i,a),typeof f!="function"&&(to===null?to=new Set([this]):to.add(this));var x=a.stack;this.componentDidCatch(a.value,{componentStack:x!==null?x:""})}),c}function D0(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new OA;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(c)||(m.add(c),i=WA.bind(null,i,a,c),a.then(i,i))}function O0(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function M0(i,a,c,f,m){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=Ei(-1,1),a.tag=2,Zi(c,a,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var MA=ae.ReactCurrentOwner,Mr=!1;function wr(i,a,c,f){a.child=i===null?t0(a,null,c,f):gl(a,i.child,c,f)}function L0(i,a,c,f,m){c=c.render;var w=a.ref;return vl(a,m),f=qp(i,a,c,f,w,m),c=Hp(),i!==null&&!Mr?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,Ti(i,a,m)):(sn&&c&&kp(a),a.flags|=1,wr(i,a,f,m),a.child)}function j0(i,a,c,f,m){if(i===null){var w=c.type;return typeof w=="function"&&!Em(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=w,V0(i,a,w,f,m)):(i=Jd(c.type,null,f,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(w=i.child,(i.lanes&m)===0){var x=w.memoizedProps;if(c=c.compare,c=c!==null?c:xc,c(x,f)&&i.ref===a.ref)return Ti(i,a,m)}return a.flags|=1,i=io(w,f),i.ref=a.ref,i.return=a,a.child=i}function V0(i,a,c,f,m){if(i!==null){var w=i.memoizedProps;if(xc(w,f)&&i.ref===a.ref)if(Mr=!1,a.pendingProps=f=w,(i.lanes&m)!==0)(i.flags&131072)!==0&&(Mr=!0);else return a.lanes=i.lanes,Ti(i,a,m)}return em(i,a,c,f,m)}function F0(i,a,c){var f=a.pendingProps,m=f.children,w=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(Tl,Jr),Jr|=c;else{if((c&1073741824)===0)return i=w!==null?w.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Jt(Tl,Jr),Jr|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:c,Jt(Tl,Jr),Jr|=f}else w!==null?(f=w.baseLanes|c,a.memoizedState=null):f=c,Jt(Tl,Jr),Jr|=f;return wr(i,a,m,c),a.child}function U0(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function em(i,a,c,f,m){var w=Or(c)?Jo:sr.current;return w=hl(a,w),vl(a,m),c=qp(i,a,c,f,w,m),f=Hp(),i!==null&&!Mr?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,Ti(i,a,m)):(sn&&f&&kp(a),a.flags|=1,wr(i,a,c,m),a.child)}function $0(i,a,c,f,m){if(Or(c)){var w=!0;Td(a)}else w=!1;if(vl(a,m),a.stateNode===null)Ud(i,a),A0(a,c,f),Jp(a,c,f,m),f=!0;else if(i===null){var x=a.stateNode,O=a.memoizedProps;x.props=O;var V=x.context,Y=c.contextType;typeof Y=="object"&&Y!==null?Y=fs(Y):(Y=Or(c)?Jo:sr.current,Y=hl(a,Y));var ue=c.getDerivedStateFromProps,he=typeof ue=="function"||typeof x.getSnapshotBeforeUpdate=="function";he||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O!==f||V!==Y)&&C0(a,x,f,Y),Xi=!1;var le=a.memoizedState;x.state=le,Pd(a,f,x,m),V=a.memoizedState,O!==f||le!==V||Dr.current||Xi?(typeof ue=="function"&&(Yp(a,c,ue,f),V=a.memoizedState),(O=Xi||R0(a,c,O,f,le,V,Y))?(he||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=V),x.props=f,x.state=V,x.context=Y,f=O):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{x=a.stateNode,r0(i,a),O=a.memoizedProps,Y=a.type===a.elementType?O:As(a.type,O),x.props=Y,he=a.pendingProps,le=x.context,V=c.contextType,typeof V=="object"&&V!==null?V=fs(V):(V=Or(c)?Jo:sr.current,V=hl(a,V));var Re=c.getDerivedStateFromProps;(ue=typeof Re=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O!==he||le!==V)&&C0(a,x,f,V),Xi=!1,le=a.memoizedState,x.state=le,Pd(a,f,x,m);var je=a.memoizedState;O!==he||le!==je||Dr.current||Xi?(typeof Re=="function"&&(Yp(a,c,Re,f),je=a.memoizedState),(Y=Xi||R0(a,c,Y,f,le,je,V)||!1)?(ue||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,je,V),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,je,V)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||O===i.memoizedProps&&le===i.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&le===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=je),x.props=f,x.state=je,x.context=V,f=Y):(typeof x.componentDidUpdate!="function"||O===i.memoizedProps&&le===i.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&le===i.memoizedState||(a.flags|=1024),f=!1)}return tm(i,a,c,f,w,m)}function tm(i,a,c,f,m,w){U0(i,a);var x=(a.flags&128)!==0;if(!f&&!x)return m&&G_(a,c,!1),Ti(i,a,w);f=a.stateNode,MA.current=a;var O=x&&typeof c.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&x?(a.child=gl(a,i.child,null,w),a.child=gl(a,null,O,w)):wr(i,a,O,w),a.memoizedState=f.state,m&&G_(a,c,!0),a.child}function z0(i){var a=i.stateNode;a.pendingContext?q_(i,a.pendingContext,a.pendingContext!==a.context):a.context&&q_(i,a.context,!1),Vp(i,a.containerInfo)}function B0(i,a,c,f,m){return ml(),Pp(m),a.flags|=256,wr(i,a,c,f),a.child}var nm={dehydrated:null,treeContext:null,retryLane:0};function rm(i){return{baseLanes:i,cachePool:null,transitions:null}}function q0(i,a,c){var f=a.pendingProps,m=ln.current,w=!1,x=(a.flags&128)!==0,O;if((O=x)||(O=i!==null&&i.memoizedState===null?!1:(m&2)!==0),O?(w=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),Jt(ln,m&1),i===null)return Cp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(x=f.children,i=f.fallback,w?(f=a.mode,w=a.child,x={mode:"hidden",children:x},(f&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=x):w=Xd(x,f,0,null),i=aa(i,f,c,null),w.return=a,i.return=a,w.sibling=i,a.child=w,a.child.memoizedState=rm(c),a.memoizedState=nm,i):sm(a,x));if(m=i.memoizedState,m!==null&&(O=m.dehydrated,O!==null))return LA(i,a,x,f,O,m,c);if(w){w=f.fallback,x=a.mode,m=i.child,O=m.sibling;var V={mode:"hidden",children:f.children};return(x&1)===0&&a.child!==m?(f=a.child,f.childLanes=0,f.pendingProps=V,a.deletions=null):(f=io(m,V),f.subtreeFlags=m.subtreeFlags&14680064),O!==null?w=io(O,w):(w=aa(w,x,c,null),w.flags|=2),w.return=a,f.return=a,f.sibling=w,a.child=f,f=w,w=a.child,x=i.child.memoizedState,x=x===null?rm(c):{baseLanes:x.baseLanes|c,cachePool:null,transitions:x.transitions},w.memoizedState=x,w.childLanes=i.childLanes&~c,a.memoizedState=nm,f}return w=i.child,i=w.sibling,f=io(w,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=c),f.return=a,f.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=f,a.memoizedState=null,f}function sm(i,a){return a=Xd({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Fd(i,a,c,f){return f!==null&&Pp(f),gl(a,i.child,null,c),i=sm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function LA(i,a,c,f,m,w,x){if(c)return a.flags&256?(a.flags&=-257,f=Xp(Error(t(422))),Fd(i,a,x,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(w=f.fallback,m=a.mode,f=Xd({mode:"visible",children:f.children},m,0,null),w=aa(w,m,x,null),w.flags|=2,f.return=a,w.return=a,f.sibling=w,a.child=f,(a.mode&1)!==0&&gl(a,i.child,null,x),a.child.memoizedState=rm(x),a.memoizedState=nm,w);if((a.mode&1)===0)return Fd(i,a,x,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var O=f.dgst;return f=O,w=Error(t(419)),f=Xp(w,f,void 0),Fd(i,a,x,f)}if(O=(x&i.childLanes)!==0,Mr||O){if(f=jn,f!==null){switch(x&-x){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|x))!==0?0:m,m!==0&&m!==w.retryLane&&(w.retryLane=m,wi(i,m),Ns(f,i,m,-1))}return wm(),f=Xp(Error(t(421))),Fd(i,a,x,f)}return m.data==="$?"?(a.flags|=128,a.child=i.child,a=QA.bind(null,i),m._reactRetry=a,null):(i=w.treeContext,Yr=Wi(m.nextSibling),Qr=a,sn=!0,Rs=null,i!==null&&(ds[hs++]=vi,ds[hs++]=_i,ds[hs++]=Xo,vi=i.id,_i=i.overflow,Xo=a),a=sm(a,f.children),a.flags|=4096,a)}function H0(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),Mp(i.return,a,c)}function im(i,a,c,f,m){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=c,w.tailMode=m)}function G0(i,a,c){var f=a.pendingProps,m=f.revealOrder,w=f.tail;if(wr(i,a,f.children,c),f=ln.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&H0(i,c,a);else if(i.tag===19)H0(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Jt(ln,f),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(c=a.child,m=null;c!==null;)i=c.alternate,i!==null&&Nd(i)===null&&(m=c),c=c.sibling;c=m,c===null?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),im(a,!1,m,c,w);break;case"backwards":for(c=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&Nd(i)===null){a.child=m;break}i=m.sibling,m.sibling=c,c=m,m=i}im(a,!0,c,null,w);break;case"together":im(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ud(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Ti(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),ra|=a.lanes,(c&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,c=io(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=io(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function jA(i,a,c){switch(a.tag){case 3:z0(a),ml();break;case 5:o0(a);break;case 1:Or(a.type)&&Td(a);break;case 4:Vp(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,m=a.memoizedProps.value;Jt(Rd,f._currentValue),f._currentValue=m;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Jt(ln,ln.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?q0(i,a,c):(Jt(ln,ln.current&1),i=Ti(i,a,c),i!==null?i.sibling:null);Jt(ln,ln.current&1);break;case 19:if(f=(c&a.childLanes)!==0,(i.flags&128)!==0){if(f)return G0(i,a,c);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Jt(ln,ln.current),f)break;return null;case 22:case 23:return a.lanes=0,F0(i,a,c)}return Ti(i,a,c)}var K0,om,W0,Q0;K0=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},om=function(){},W0=function(i,a,c,f){var m=i.memoizedProps;if(m!==f){i=a.stateNode,ta(Ks.current);var w=null;switch(c){case"input":m=Zn(i,m),f=Zn(i,f),w=[];break;case"select":m=ke({},m,{value:void 0}),f=ke({},f,{value:void 0}),w=[];break;case"textarea":m=Vo(i,m),f=Vo(i,f),w=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=_d)}Bo(c,f);var x;c=null;for(Y in m)if(!f.hasOwnProperty(Y)&&m.hasOwnProperty(Y)&&m[Y]!=null)if(Y==="style"){var O=m[Y];for(x in O)O.hasOwnProperty(x)&&(c||(c={}),c[x]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?w||(w=[]):(w=w||[]).push(Y,null));for(Y in f){var V=f[Y];if(O=m?.[Y],f.hasOwnProperty(Y)&&V!==O&&(V!=null||O!=null))if(Y==="style")if(O){for(x in O)!O.hasOwnProperty(x)||V&&V.hasOwnProperty(x)||(c||(c={}),c[x]="");for(x in V)V.hasOwnProperty(x)&&O[x]!==V[x]&&(c||(c={}),c[x]=V[x])}else c||(w||(w=[]),w.push(Y,c)),c=V;else Y==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,O=O?O.__html:void 0,V!=null&&O!==V&&(w=w||[]).push(Y,V)):Y==="children"?typeof V!="string"&&typeof V!="number"||(w=w||[]).push(Y,""+V):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(V!=null&&Y==="onScroll"&&Zt("scroll",i),w||O===V||(w=[])):(w=w||[]).push(Y,V))}c&&(w=w||[]).push("style",c);var Y=w;(a.updateQueue=Y)&&(a.flags|=4)}},Q0=function(i,a,c,f){c!==f&&(a.flags|=4)};function Vc(i,a){if(!sn)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function or(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var m=i.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function VA(i,a,c){var f=a.pendingProps;switch(Rp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(a),null;case 1:return Or(a.type)&&Ed(),or(a),null;case 3:return f=a.stateNode,_l(),en(Dr),en(sr),$p(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Sd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Rs!==null&&(ym(Rs),Rs=null))),om(i,a),or(a),null;case 5:Fp(a);var m=ta(Dc.current);if(c=a.type,i!==null&&a.stateNode!=null)W0(i,a,c,f,m),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return or(a),null}if(i=ta(Ks.current),Sd(a)){f=a.stateNode,c=a.type;var w=a.memoizedProps;switch(f[Gs]=a,f[Rc]=w,i=(a.mode&1)!==0,c){case"dialog":Zt("cancel",f),Zt("close",f);break;case"iframe":case"object":case"embed":Zt("load",f);break;case"video":case"audio":for(m=0;m<bc.length;m++)Zt(bc[m],f);break;case"source":Zt("error",f);break;case"img":case"image":case"link":Zt("error",f),Zt("load",f);break;case"details":Zt("toggle",f);break;case"input":pr(f,w),Zt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},Zt("invalid",f);break;case"textarea":li(f,w),Zt("invalid",f)}Bo(c,w),m=null;for(var x in w)if(w.hasOwnProperty(x)){var O=w[x];x==="children"?typeof O=="string"?f.textContent!==O&&(w.suppressHydrationWarning!==!0&&vd(f.textContent,O,i),m=["children",O]):typeof O=="number"&&f.textContent!==""+O&&(w.suppressHydrationWarning!==!0&&vd(f.textContent,O,i),m=["children",""+O]):s.hasOwnProperty(x)&&O!=null&&x==="onScroll"&&Zt("scroll",f)}switch(c){case"input":Se(f),jo(f,w,!0);break;case"textarea":Se(f),Fo(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=_d)}f=m,a.updateQueue=f,f!==null&&(a.flags|=4)}else{x=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=tn(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=x.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=x.createElement(c,{is:f.is}):(i=x.createElement(c),c==="select"&&(x=i,f.multiple?x.multiple=!0:f.size&&(x.size=f.size))):i=x.createElementNS(i,c),i[Gs]=a,i[Rc]=f,K0(i,a,!1,!1),a.stateNode=i;e:{switch(x=qo(c,f),c){case"dialog":Zt("cancel",i),Zt("close",i),m=f;break;case"iframe":case"object":case"embed":Zt("load",i),m=f;break;case"video":case"audio":for(m=0;m<bc.length;m++)Zt(bc[m],i);m=f;break;case"source":Zt("error",i),m=f;break;case"img":case"image":case"link":Zt("error",i),Zt("load",i),m=f;break;case"details":Zt("toggle",i),m=f;break;case"input":pr(i,f),m=Zn(i,f),Zt("invalid",i);break;case"option":m=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},m=ke({},f,{value:void 0}),Zt("invalid",i);break;case"textarea":li(i,f),m=Vo(i,f),Zt("invalid",i);break;default:m=f}Bo(c,m),O=m;for(w in O)if(O.hasOwnProperty(w)){var V=O[w];w==="style"?$o(i,V):w==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Uo(i,V)):w==="children"?typeof V=="string"?(c!=="textarea"||V!=="")&&Us(i,V):typeof V=="number"&&Us(i,""+V):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?V!=null&&w==="onScroll"&&Zt("scroll",i):V!=null&&Q(i,w,V,x))}switch(c){case"input":Se(i),jo(i,f,!1);break;case"textarea":Se(i),Fo(i);break;case"option":f.value!=null&&i.setAttribute("value",""+kt(f.value));break;case"select":i.multiple=!!f.multiple,w=f.value,w!=null?cs(i,!!f.multiple,w,!1):f.defaultValue!=null&&cs(i,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=_d)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return or(a),null;case 6:if(i&&a.stateNode!=null)Q0(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(c=ta(Dc.current),ta(Ks.current),Sd(a)){if(f=a.stateNode,c=a.memoizedProps,f[Gs]=a,(w=f.nodeValue!==c)&&(i=Qr,i!==null))switch(i.tag){case 3:vd(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&vd(f.nodeValue,c,(i.mode&1)!==0)}w&&(a.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Gs]=a,a.stateNode=f}return or(a),null;case 13:if(en(ln),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(sn&&Yr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)X_(),ml(),a.flags|=98560,w=!1;else if(w=Sd(a),f!==null&&f.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Gs]=a}else ml(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;or(a),w=!1}else Rs!==null&&(ym(Rs),Rs=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(ln.current&1)!==0?kn===0&&(kn=3):wm())),a.updateQueue!==null&&(a.flags|=4),or(a),null);case 4:return _l(),om(i,a),i===null&&Sc(a.stateNode.containerInfo),or(a),null;case 10:return Op(a.type._context),or(a),null;case 17:return Or(a.type)&&Ed(),or(a),null;case 19:if(en(ln),w=a.memoizedState,w===null)return or(a),null;if(f=(a.flags&128)!==0,x=w.rendering,x===null)if(f)Vc(w,!1);else{if(kn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(x=Nd(i),x!==null){for(a.flags|=128,Vc(w,!1),f=x.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=c,c=a.child;c!==null;)w=c,i=f,w.flags&=14680066,x=w.alternate,x===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=x.childLanes,w.lanes=x.lanes,w.child=x.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=x.memoizedProps,w.memoizedState=x.memoizedState,w.updateQueue=x.updateQueue,w.type=x.type,i=x.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return Jt(ln,ln.current&1|2),a.child}i=i.sibling}w.tail!==null&&xe()>xl&&(a.flags|=128,f=!0,Vc(w,!1),a.lanes=4194304)}else{if(!f)if(i=Nd(x),i!==null){if(a.flags|=128,f=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),Vc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!x.alternate&&!sn)return or(a),null}else 2*xe()-w.renderingStartTime>xl&&c!==1073741824&&(a.flags|=128,f=!0,Vc(w,!1),a.lanes=4194304);w.isBackwards?(x.sibling=a.child,a.child=x):(c=w.last,c!==null?c.sibling=x:a.child=x,w.last=x)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=xe(),a.sibling=null,c=ln.current,Jt(ln,f?c&1|2:c&1),a):(or(a),null);case 22:case 23:return _m(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(Jr&1073741824)!==0&&(or(a),a.subtreeFlags&6&&(a.flags|=8192)):or(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function FA(i,a){switch(Rp(a),a.tag){case 1:return Or(a.type)&&Ed(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return _l(),en(Dr),en(sr),$p(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Fp(a),null;case 13:if(en(ln),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ml()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return en(ln),null;case 4:return _l(),null;case 10:return Op(a.type._context),null;case 22:case 23:return _m(),null;case 24:return null;default:return null}}var $d=!1,ar=!1,UA=typeof WeakSet=="function"?WeakSet:Set,Me=null;function El(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){fn(i,a,f)}else c.current=null}function am(i,a,c){try{c()}catch(f){fn(i,a,f)}}var Y0=!1;function $A(i,a){if(_p=Hi,i=R_(),dp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var x=0,O=-1,V=-1,Y=0,ue=0,he=i,le=null;t:for(;;){for(var Re;he!==c||m!==0&&he.nodeType!==3||(O=x+m),he!==w||f!==0&&he.nodeType!==3||(V=x+f),he.nodeType===3&&(x+=he.nodeValue.length),(Re=he.firstChild)!==null;)le=he,he=Re;for(;;){if(he===i)break t;if(le===c&&++Y===m&&(O=x),le===w&&++ue===f&&(V=x),(Re=he.nextSibling)!==null)break;he=le,le=he.parentNode}he=Re}c=O===-1||V===-1?null:{start:O,end:V}}else c=null}c=c||{start:0,end:0}}else c=null;for(wp={focusedElem:i,selectionRange:c},Hi=!1,Me=a;Me!==null;)if(a=Me,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Me=i;else for(;Me!==null;){a=Me;try{var je=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var qe=je.memoizedProps,vn=je.memoizedState,H=a.stateNode,F=H.getSnapshotBeforeUpdate(a.elementType===a.type?qe:As(a.type,qe),vn);H.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var K=a.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ye){fn(a,a.return,ye)}if(i=a.sibling,i!==null){i.return=a.return,Me=i;break}Me=a.return}return je=Y0,Y0=!1,je}function Fc(i,a,c){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&i)===i){var w=m.destroy;m.destroy=void 0,w!==void 0&&am(a,c,w)}m=m.next}while(m!==f)}}function zd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==a)}}function lm(i){var a=i.ref;if(a!==null){var c=i.stateNode;i.tag,i=c,typeof a=="function"?a(i):a.current=i}}function J0(i){var a=i.alternate;a!==null&&(i.alternate=null,J0(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Gs],delete a[Rc],delete a[Ip],delete a[xA],delete a[IA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function X0(i){return i.tag===5||i.tag===3||i.tag===4}function Z0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||X0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function cm(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=_d));else if(f!==4&&(i=i.child,i!==null))for(cm(i,a,c),i=i.sibling;i!==null;)cm(i,a,c),i=i.sibling}function um(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(um(i,a,c),i=i.sibling;i!==null;)um(i,a,c),i=i.sibling}var Wn=null,Cs=!1;function eo(i,a,c){for(c=c.child;c!==null;)ew(i,a,c),c=c.sibling}function ew(i,a,c){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(J,c)}catch{}switch(c.tag){case 5:ar||El(c,a);case 6:var f=Wn,m=Cs;Wn=null,eo(i,a,c),Wn=f,Cs=m,Wn!==null&&(Cs?(i=Wn,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):Wn.removeChild(c.stateNode));break;case 18:Wn!==null&&(Cs?(i=Wn,c=c.stateNode,i.nodeType===8?xp(i.parentNode,c):i.nodeType===1&&xp(i,c),bs(i)):xp(Wn,c.stateNode));break;case 4:f=Wn,m=Cs,Wn=c.stateNode.containerInfo,Cs=!0,eo(i,a,c),Wn=f,Cs=m;break;case 0:case 11:case 14:case 15:if(!ar&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var w=m,x=w.destroy;w=w.tag,x!==void 0&&((w&2)!==0||(w&4)!==0)&&am(c,a,x),m=m.next}while(m!==f)}eo(i,a,c);break;case 1:if(!ar&&(El(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(O){fn(c,a,O)}eo(i,a,c);break;case 21:eo(i,a,c);break;case 22:c.mode&1?(ar=(f=ar)||c.memoizedState!==null,eo(i,a,c),ar=f):eo(i,a,c);break;default:eo(i,a,c)}}function tw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new UA),a.forEach(function(f){var m=YA.bind(null,i,f);c.has(f)||(c.add(f),f.then(m,m))})}}function Ps(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];try{var w=i,x=a,O=x;e:for(;O!==null;){switch(O.tag){case 5:Wn=O.stateNode,Cs=!1;break e;case 3:Wn=O.stateNode.containerInfo,Cs=!0;break e;case 4:Wn=O.stateNode.containerInfo,Cs=!0;break e}O=O.return}if(Wn===null)throw Error(t(160));ew(w,x,m),Wn=null,Cs=!1;var V=m.alternate;V!==null&&(V.return=null),m.return=null}catch(Y){fn(m,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)nw(a,i),a=a.sibling}function nw(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ps(a,i),Qs(i),f&4){try{Fc(3,i,i.return),zd(3,i)}catch(qe){fn(i,i.return,qe)}try{Fc(5,i,i.return)}catch(qe){fn(i,i.return,qe)}}break;case 1:Ps(a,i),Qs(i),f&512&&c!==null&&El(c,c.return);break;case 5:if(Ps(a,i),Qs(i),f&512&&c!==null&&El(c,c.return),i.flags&32){var m=i.stateNode;try{Us(m,"")}catch(qe){fn(i,i.return,qe)}}if(f&4&&(m=i.stateNode,m!=null)){var w=i.memoizedProps,x=c!==null?c.memoizedProps:w,O=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{O==="input"&&w.type==="radio"&&w.name!=null&&Lo(m,w),qo(O,x);var Y=qo(O,w);for(x=0;x<V.length;x+=2){var ue=V[x],he=V[x+1];ue==="style"?$o(m,he):ue==="dangerouslySetInnerHTML"?Uo(m,he):ue==="children"?Us(m,he):Q(m,ue,he,Y)}switch(O){case"input":Nn(m,w);break;case"textarea":$i(m,w);break;case"select":var le=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!w.multiple;var Re=w.value;Re!=null?cs(m,!!w.multiple,Re,!1):le!==!!w.multiple&&(w.defaultValue!=null?cs(m,!!w.multiple,w.defaultValue,!0):cs(m,!!w.multiple,w.multiple?[]:"",!1))}m[Rc]=w}catch(qe){fn(i,i.return,qe)}}break;case 6:if(Ps(a,i),Qs(i),f&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,w=i.memoizedProps;try{m.nodeValue=w}catch(qe){fn(i,i.return,qe)}}break;case 3:if(Ps(a,i),Qs(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{bs(a.containerInfo)}catch(qe){fn(i,i.return,qe)}break;case 4:Ps(a,i),Qs(i);break;case 13:Ps(a,i),Qs(i),m=i.child,m.flags&8192&&(w=m.memoizedState!==null,m.stateNode.isHidden=w,!w||m.alternate!==null&&m.alternate.memoizedState!==null||(fm=xe())),f&4&&tw(i);break;case 22:if(ue=c!==null&&c.memoizedState!==null,i.mode&1?(ar=(Y=ar)||ue,Ps(a,i),ar=Y):Ps(a,i),Qs(i),f&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ue&&(i.mode&1)!==0)for(Me=i,ue=i.child;ue!==null;){for(he=Me=ue;Me!==null;){switch(le=Me,Re=le.child,le.tag){case 0:case 11:case 14:case 15:Fc(4,le,le.return);break;case 1:El(le,le.return);var je=le.stateNode;if(typeof je.componentWillUnmount=="function"){f=le,c=le.return;try{a=f,je.props=a.memoizedProps,je.state=a.memoizedState,je.componentWillUnmount()}catch(qe){fn(f,c,qe)}}break;case 5:El(le,le.return);break;case 22:if(le.memoizedState!==null){iw(he);continue}}Re!==null?(Re.return=le,Me=Re):iw(he)}ue=ue.sibling}e:for(ue=null,he=i;;){if(he.tag===5){if(ue===null){ue=he;try{m=he.stateNode,Y?(w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(O=he.stateNode,V=he.memoizedProps.style,x=V!=null&&V.hasOwnProperty("display")?V.display:null,O.style.display=ci("display",x))}catch(qe){fn(i,i.return,qe)}}}else if(he.tag===6){if(ue===null)try{he.stateNode.nodeValue=Y?"":he.memoizedProps}catch(qe){fn(i,i.return,qe)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===i)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===i)break e;for(;he.sibling===null;){if(he.return===null||he.return===i)break e;ue===he&&(ue=null),he=he.return}ue===he&&(ue=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:Ps(a,i),Qs(i),f&4&&tw(i);break;case 21:break;default:Ps(a,i),Qs(i)}}function Qs(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(X0(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Us(m,""),f.flags&=-33);var w=Z0(i);um(i,w,m);break;case 3:case 4:var x=f.stateNode.containerInfo,O=Z0(i);cm(i,O,x);break;default:throw Error(t(161))}}catch(V){fn(i,i.return,V)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function zA(i,a,c){Me=i,rw(i)}function rw(i,a,c){for(var f=(i.mode&1)!==0;Me!==null;){var m=Me,w=m.child;if(m.tag===22&&f){var x=m.memoizedState!==null||$d;if(!x){var O=m.alternate,V=O!==null&&O.memoizedState!==null||ar;O=$d;var Y=ar;if($d=x,(ar=V)&&!Y)for(Me=m;Me!==null;)x=Me,V=x.child,x.tag===22&&x.memoizedState!==null?ow(m):V!==null?(V.return=x,Me=V):ow(m);for(;w!==null;)Me=w,rw(w),w=w.sibling;Me=m,$d=O,ar=Y}sw(i)}else(m.subtreeFlags&8772)!==0&&w!==null?(w.return=m,Me=w):sw(i)}}function sw(i){for(;Me!==null;){var a=Me;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:ar||zd(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!ar)if(c===null)f.componentDidMount();else{var m=a.elementType===a.type?c.memoizedProps:As(a.type,c.memoizedProps);f.componentDidUpdate(m,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&i0(a,w,f);break;case 3:var x=a.updateQueue;if(x!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}i0(a,x,c)}break;case 5:var O=a.stateNode;if(c===null&&a.flags&4){c=O;var V=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&c.focus();break;case"img":V.src&&(c.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var ue=Y.memoizedState;if(ue!==null){var he=ue.dehydrated;he!==null&&bs(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ar||a.flags&512&&lm(a)}catch(le){fn(a,a.return,le)}}if(a===i){Me=null;break}if(c=a.sibling,c!==null){c.return=a.return,Me=c;break}Me=a.return}}function iw(i){for(;Me!==null;){var a=Me;if(a===i){Me=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Me=c;break}Me=a.return}}function ow(i){for(;Me!==null;){var a=Me;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{zd(4,a)}catch(V){fn(a,c,V)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var m=a.return;try{f.componentDidMount()}catch(V){fn(a,m,V)}}var w=a.return;try{lm(a)}catch(V){fn(a,w,V)}break;case 5:var x=a.return;try{lm(a)}catch(V){fn(a,x,V)}}}catch(V){fn(a,a.return,V)}if(a===i){Me=null;break}var O=a.sibling;if(O!==null){O.return=a.return,Me=O;break}Me=a.return}}var BA=Math.ceil,Bd=ae.ReactCurrentDispatcher,dm=ae.ReactCurrentOwner,ms=ae.ReactCurrentBatchConfig,Lt=0,jn=null,xn=null,Qn=0,Jr=0,Tl=Qi(0),kn=0,Uc=null,ra=0,qd=0,hm=0,$c=null,Lr=null,fm=0,xl=1/0,xi=null,Hd=!1,pm=null,to=null,Gd=!1,no=null,Kd=0,zc=0,mm=null,Wd=-1,Qd=0;function Er(){return(Lt&6)!==0?xe():Wd!==-1?Wd:Wd=xe()}function ro(i){return(i.mode&1)===0?1:(Lt&2)!==0&&Qn!==0?Qn&-Qn:SA.transition!==null?(Qd===0&&(Qd=Oe()),Qd):(i=Be,i!==0||(i=window.event,i=i===void 0?16:gc(i.type)),i)}function Ns(i,a,c,f){if(50<zc)throw zc=0,mm=null,Error(t(185));ot(i,c,f),((Lt&2)===0||i!==jn)&&(i===jn&&((Lt&2)===0&&(qd|=c),kn===4&&so(i,Qn)),jr(i,f),c===1&&Lt===0&&(a.mode&1)===0&&(xl=xe()+500,xd&&Ji()))}function jr(i,a){var c=i.callbackNode;Le(i,a);var f=Z(i,i===jn?Qn:0);if(f===0)c!==null&&lt(c),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(c!=null&&lt(c),a===1)i.tag===0?bA(lw.bind(null,i)):K_(lw.bind(null,i)),EA(function(){(Lt&6)===0&&Ji()}),c=null;else{switch(Gn(f)){case 1:c=yn;break;case 4:c=Rt;break;case 16:c=vt;break;case 536870912:c=ee;break;default:c=vt}c=gw(c,aw.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function aw(i,a){if(Wd=-1,Qd=0,(Lt&6)!==0)throw Error(t(327));var c=i.callbackNode;if(Il()&&i.callbackNode!==c)return null;var f=Z(i,i===jn?Qn:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=Yd(i,f);else{a=f;var m=Lt;Lt|=2;var w=uw();(jn!==i||Qn!==a)&&(xi=null,xl=xe()+500,ia(i,a));do try{GA();break}catch(O){cw(i,O)}while(!0);Dp(),Bd.current=w,Lt=m,xn!==null?a=0:(jn=null,Qn=0,a=kn)}if(a!==0){if(a===2&&(m=Fe(i),m!==0&&(f=m,a=gm(i,m))),a===1)throw c=Uc,ia(i,0),so(i,f),jr(i,xe()),c;if(a===6)so(i,f);else{if(m=i.current.alternate,(f&30)===0&&!qA(m)&&(a=Yd(i,f),a===2&&(w=Fe(i),w!==0&&(f=w,a=gm(i,w))),a===1))throw c=Uc,ia(i,0),so(i,f),jr(i,xe()),c;switch(i.finishedWork=m,i.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:oa(i,Lr,xi);break;case 3:if(so(i,f),(f&130023424)===f&&(a=fm+500-xe(),10<a)){if(Z(i,0)!==0)break;if(m=i.suspendedLanes,(m&f)!==f){Er(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=Tp(oa.bind(null,i,Lr,xi),a);break}oa(i,Lr,xi);break;case 4:if(so(i,f),(f&4194240)===f)break;for(a=i.eventTimes,m=-1;0<f;){var x=31-et(f);w=1<<x,x=a[x],x>m&&(m=x),f&=~w}if(f=m,f=xe()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*BA(f/1960))-f,10<f){i.timeoutHandle=Tp(oa.bind(null,i,Lr,xi),f);break}oa(i,Lr,xi);break;case 5:oa(i,Lr,xi);break;default:throw Error(t(329))}}}return jr(i,xe()),i.callbackNode===c?aw.bind(null,i):null}function gm(i,a){var c=$c;return i.current.memoizedState.isDehydrated&&(ia(i,a).flags|=256),i=Yd(i,a),i!==2&&(a=Lr,Lr=c,a!==null&&ym(a)),i}function ym(i){Lr===null?Lr=i:Lr.push.apply(Lr,i)}function qA(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var m=c[f],w=m.getSnapshot;m=m.value;try{if(!ks(w(),m))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function so(i,a){for(a&=~hm,a&=~qd,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-et(a),f=1<<c;i[c]=-1,a&=~f}}function lw(i){if((Lt&6)!==0)throw Error(t(327));Il();var a=Z(i,0);if((a&1)===0)return jr(i,xe()),null;var c=Yd(i,a);if(i.tag!==0&&c===2){var f=Fe(i);f!==0&&(a=f,c=gm(i,f))}if(c===1)throw c=Uc,ia(i,0),so(i,a),jr(i,xe()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,oa(i,Lr,xi),jr(i,xe()),null}function vm(i,a){var c=Lt;Lt|=1;try{return i(a)}finally{Lt=c,Lt===0&&(xl=xe()+500,xd&&Ji())}}function sa(i){no!==null&&no.tag===0&&(Lt&6)===0&&Il();var a=Lt;Lt|=1;var c=ms.transition,f=Be;try{if(ms.transition=null,Be=1,i)return i()}finally{Be=f,ms.transition=c,Lt=a,(Lt&6)===0&&Ji()}}function _m(){Jr=Tl.current,en(Tl)}function ia(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,wA(c)),xn!==null)for(c=xn.return;c!==null;){var f=c;switch(Rp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Ed();break;case 3:_l(),en(Dr),en(sr),$p();break;case 5:Fp(f);break;case 4:_l();break;case 13:en(ln);break;case 19:en(ln);break;case 10:Op(f.type._context);break;case 22:case 23:_m()}c=c.return}if(jn=i,xn=i=io(i.current,null),Qn=Jr=a,kn=0,Uc=null,hm=qd=ra=0,Lr=$c=null,ea!==null){for(a=0;a<ea.length;a++)if(c=ea[a],f=c.interleaved,f!==null){c.interleaved=null;var m=f.next,w=c.pending;if(w!==null){var x=w.next;w.next=m,f.next=x}c.pending=f}ea=null}return i}function cw(i,a){do{var c=xn;try{if(Dp(),Dd.current=jd,Od){for(var f=cn.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}Od=!1}if(na=0,Ln=Sn=cn=null,Oc=!1,Mc=0,dm.current=null,c===null||c.return===null){kn=1,Uc=a,xn=null;break}e:{var w=i,x=c.return,O=c,V=a;if(a=Qn,O.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var Y=V,ue=O,he=ue.tag;if((ue.mode&1)===0&&(he===0||he===11||he===15)){var le=ue.alternate;le?(ue.updateQueue=le.updateQueue,ue.memoizedState=le.memoizedState,ue.lanes=le.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var Re=O0(x);if(Re!==null){Re.flags&=-257,M0(Re,x,O,w,a),Re.mode&1&&D0(w,Y,a),a=Re,V=Y;var je=a.updateQueue;if(je===null){var qe=new Set;qe.add(V),a.updateQueue=qe}else je.add(V);break e}else{if((a&1)===0){D0(w,Y,a),wm();break e}V=Error(t(426))}}else if(sn&&O.mode&1){var vn=O0(x);if(vn!==null){(vn.flags&65536)===0&&(vn.flags|=256),M0(vn,x,O,w,a),Pp(wl(V,O));break e}}w=V=wl(V,O),kn!==4&&(kn=2),$c===null?$c=[w]:$c.push(w),w=x;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var H=P0(w,V,a);s0(w,H);break e;case 1:O=V;var F=w.type,K=w.stateNode;if((w.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(to===null||!to.has(K)))){w.flags|=65536,a&=-a,w.lanes|=a;var ye=N0(w,O,a);s0(w,ye);break e}}w=w.return}while(w!==null)}hw(c)}catch(Ke){a=Ke,xn===c&&c!==null&&(xn=c=c.return);continue}break}while(!0)}function uw(){var i=Bd.current;return Bd.current=jd,i===null?jd:i}function wm(){(kn===0||kn===3||kn===2)&&(kn=4),jn===null||(ra&268435455)===0&&(qd&268435455)===0||so(jn,Qn)}function Yd(i,a){var c=Lt;Lt|=2;var f=uw();(jn!==i||Qn!==a)&&(xi=null,ia(i,a));do try{HA();break}catch(m){cw(i,m)}while(!0);if(Dp(),Lt=c,Bd.current=f,xn!==null)throw Error(t(261));return jn=null,Qn=0,kn}function HA(){for(;xn!==null;)dw(xn)}function GA(){for(;xn!==null&&!st();)dw(xn)}function dw(i){var a=mw(i.alternate,i,Jr);i.memoizedProps=i.pendingProps,a===null?hw(i):xn=a,dm.current=null}function hw(i){var a=i;do{var c=a.alternate;if(i=a.return,(a.flags&32768)===0){if(c=VA(c,a,Jr),c!==null){xn=c;return}}else{if(c=FA(c,a),c!==null){c.flags&=32767,xn=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{kn=6,xn=null;return}}if(a=a.sibling,a!==null){xn=a;return}xn=a=i}while(a!==null);kn===0&&(kn=5)}function oa(i,a,c){var f=Be,m=ms.transition;try{ms.transition=null,Be=1,KA(i,a,c,f)}finally{ms.transition=m,Be=f}return null}function KA(i,a,c,f){do Il();while(no!==null);if((Lt&6)!==0)throw Error(t(327));c=i.finishedWork;var m=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=c.lanes|c.childLanes;if(De(i,w),i===jn&&(xn=jn=null,Qn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Gd||(Gd=!0,gw(vt,function(){return Il(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=ms.transition,ms.transition=null;var x=Be;Be=1;var O=Lt;Lt|=4,dm.current=null,$A(i,c),nw(c,i),fA(wp),Hi=!!_p,wp=_p=null,i.current=c,zA(c),yt(),Lt=O,Be=x,ms.transition=w}else i.current=c;if(Gd&&(Gd=!1,no=i,Kd=m),w=i.pendingLanes,w===0&&(to=null),Nt(c.stateNode),jr(i,xe()),a!==null)for(f=i.onRecoverableError,c=0;c<a.length;c++)m=a[c],f(m.value,{componentStack:m.stack,digest:m.digest});if(Hd)throw Hd=!1,i=pm,pm=null,i;return(Kd&1)!==0&&i.tag!==0&&Il(),w=i.pendingLanes,(w&1)!==0?i===mm?zc++:(zc=0,mm=i):zc=0,Ji(),null}function Il(){if(no!==null){var i=Gn(Kd),a=ms.transition,c=Be;try{if(ms.transition=null,Be=16>i?16:i,no===null)var f=!1;else{if(i=no,no=null,Kd=0,(Lt&6)!==0)throw Error(t(331));var m=Lt;for(Lt|=4,Me=i.current;Me!==null;){var w=Me,x=w.child;if((Me.flags&16)!==0){var O=w.deletions;if(O!==null){for(var V=0;V<O.length;V++){var Y=O[V];for(Me=Y;Me!==null;){var ue=Me;switch(ue.tag){case 0:case 11:case 15:Fc(8,ue,w)}var he=ue.child;if(he!==null)he.return=ue,Me=he;else for(;Me!==null;){ue=Me;var le=ue.sibling,Re=ue.return;if(J0(ue),ue===Y){Me=null;break}if(le!==null){le.return=Re,Me=le;break}Me=Re}}}var je=w.alternate;if(je!==null){var qe=je.child;if(qe!==null){je.child=null;do{var vn=qe.sibling;qe.sibling=null,qe=vn}while(qe!==null)}}Me=w}}if((w.subtreeFlags&2064)!==0&&x!==null)x.return=w,Me=x;else e:for(;Me!==null;){if(w=Me,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Fc(9,w,w.return)}var H=w.sibling;if(H!==null){H.return=w.return,Me=H;break e}Me=w.return}}var F=i.current;for(Me=F;Me!==null;){x=Me;var K=x.child;if((x.subtreeFlags&2064)!==0&&K!==null)K.return=x,Me=K;else e:for(x=F;Me!==null;){if(O=Me,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:zd(9,O)}}catch(Ke){fn(O,O.return,Ke)}if(O===x){Me=null;break e}var ye=O.sibling;if(ye!==null){ye.return=O.return,Me=ye;break e}Me=O.return}}if(Lt=m,Ji(),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(J,i)}catch{}f=!0}return f}finally{Be=c,ms.transition=a}}return!1}function fw(i,a,c){a=wl(c,a),a=P0(i,a,1),i=Zi(i,a,1),a=Er(),i!==null&&(ot(i,1,a),jr(i,a))}function fn(i,a,c){if(i.tag===3)fw(i,i,c);else for(;a!==null;){if(a.tag===3){fw(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(to===null||!to.has(f))){i=wl(c,i),i=N0(a,i,1),a=Zi(a,i,1),i=Er(),a!==null&&(ot(a,1,i),jr(a,i));break}}a=a.return}}function WA(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),a=Er(),i.pingedLanes|=i.suspendedLanes&c,jn===i&&(Qn&c)===c&&(kn===4||kn===3&&(Qn&130023424)===Qn&&500>xe()-fm?ia(i,0):hm|=c),jr(i,a)}function pw(i,a){a===0&&((i.mode&1)===0?a=1:(a=_e,_e<<=1,(_e&130023424)===0&&(_e=4194304)));var c=Er();i=wi(i,a),i!==null&&(ot(i,a,c),jr(i,c))}function QA(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),pw(i,c)}function YA(i,a){var c=0;switch(i.tag){case 13:var f=i.stateNode,m=i.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),pw(i,c)}var mw;mw=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||Dr.current)Mr=!0;else{if((i.lanes&c)===0&&(a.flags&128)===0)return Mr=!1,jA(i,a,c);Mr=(i.flags&131072)!==0}else Mr=!1,sn&&(a.flags&1048576)!==0&&W_(a,bd,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Ud(i,a),i=a.pendingProps;var m=hl(a,sr.current);vl(a,c),m=qp(null,a,f,i,m,c);var w=Hp();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Or(f)?(w=!0,Td(a)):w=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,jp(a),m.updater=Vd,a.stateNode=m,m._reactInternals=a,Jp(a,f,i,c),a=tm(null,a,f,!0,w,c)):(a.tag=0,sn&&w&&kp(a),wr(null,a,m,c),a=a.child),a;case 16:f=a.elementType;e:{switch(Ud(i,a),i=a.pendingProps,m=f._init,f=m(f._payload),a.type=f,m=a.tag=XA(f),i=As(f,i),m){case 0:a=em(null,a,f,i,c);break e;case 1:a=$0(null,a,f,i,c);break e;case 11:a=L0(null,a,f,i,c);break e;case 14:a=j0(null,a,f,As(f.type,i),c);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:As(f,m),em(i,a,f,m,c);case 1:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:As(f,m),$0(i,a,f,m,c);case 3:e:{if(z0(a),i===null)throw Error(t(387));f=a.pendingProps,w=a.memoizedState,m=w.element,r0(i,a),Pd(a,f,null,c);var x=a.memoizedState;if(f=x.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){m=wl(Error(t(423)),a),a=B0(i,a,f,c,m);break e}else if(f!==m){m=wl(Error(t(424)),a),a=B0(i,a,f,c,m);break e}else for(Yr=Wi(a.stateNode.containerInfo.firstChild),Qr=a,sn=!0,Rs=null,c=t0(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ml(),f===m){a=Ti(i,a,c);break e}wr(i,a,f,c)}a=a.child}return a;case 5:return o0(a),i===null&&Cp(a),f=a.type,m=a.pendingProps,w=i!==null?i.memoizedProps:null,x=m.children,Ep(f,m)?x=null:w!==null&&Ep(f,w)&&(a.flags|=32),U0(i,a),wr(i,a,x,c),a.child;case 6:return i===null&&Cp(a),null;case 13:return q0(i,a,c);case 4:return Vp(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=gl(a,null,f,c):wr(i,a,f,c),a.child;case 11:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:As(f,m),L0(i,a,f,m,c);case 7:return wr(i,a,a.pendingProps,c),a.child;case 8:return wr(i,a,a.pendingProps.children,c),a.child;case 12:return wr(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(f=a.type._context,m=a.pendingProps,w=a.memoizedProps,x=m.value,Jt(Rd,f._currentValue),f._currentValue=x,w!==null)if(ks(w.value,x)){if(w.children===m.children&&!Dr.current){a=Ti(i,a,c);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var O=w.dependencies;if(O!==null){x=w.child;for(var V=O.firstContext;V!==null;){if(V.context===f){if(w.tag===1){V=Ei(-1,c&-c),V.tag=2;var Y=w.updateQueue;if(Y!==null){Y=Y.shared;var ue=Y.pending;ue===null?V.next=V:(V.next=ue.next,ue.next=V),Y.pending=V}}w.lanes|=c,V=w.alternate,V!==null&&(V.lanes|=c),Mp(w.return,c,a),O.lanes|=c;break}V=V.next}}else if(w.tag===10)x=w.type===a.type?null:w.child;else if(w.tag===18){if(x=w.return,x===null)throw Error(t(341));x.lanes|=c,O=x.alternate,O!==null&&(O.lanes|=c),Mp(x,c,a),x=w.sibling}else x=w.child;if(x!==null)x.return=w;else for(x=w;x!==null;){if(x===a){x=null;break}if(w=x.sibling,w!==null){w.return=x.return,x=w;break}x=x.return}w=x}wr(i,a,m.children,c),a=a.child}return a;case 9:return m=a.type,f=a.pendingProps.children,vl(a,c),m=fs(m),f=f(m),a.flags|=1,wr(i,a,f,c),a.child;case 14:return f=a.type,m=As(f,a.pendingProps),m=As(f.type,m),j0(i,a,f,m,c);case 15:return V0(i,a,a.type,a.pendingProps,c);case 17:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:As(f,m),Ud(i,a),a.tag=1,Or(f)?(i=!0,Td(a)):i=!1,vl(a,c),A0(a,f,m),Jp(a,f,m,c),tm(null,a,f,!0,i,c);case 19:return G0(i,a,c);case 22:return F0(i,a,c)}throw Error(t(156,a.tag))};function gw(i,a){return $t(i,a)}function JA(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(i,a,c,f){return new JA(i,a,c,f)}function Em(i){return i=i.prototype,!(!i||!i.isReactComponent)}function XA(i){if(typeof i=="function")return Em(i)?1:0;if(i!=null){if(i=i.$$typeof,i===C)return 11;if(i===Je)return 14}return 2}function io(i,a){var c=i.alternate;return c===null?(c=gs(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Jd(i,a,c,f,m,w){var x=2;if(f=i,typeof i=="function")Em(i)&&(x=1);else if(typeof i=="string")x=5;else e:switch(i){case N:return aa(c.children,m,w,a);case I:x=8,m|=8;break;case A:return i=gs(12,c,a,m|2),i.elementType=A,i.lanes=w,i;case R:return i=gs(13,c,a,m),i.elementType=R,i.lanes=w,i;case ut:return i=gs(19,c,a,m),i.elementType=ut,i.lanes=w,i;case ft:return Xd(c,m,w,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:x=10;break e;case L:x=9;break e;case C:x=11;break e;case Je:x=14;break e;case hn:x=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=gs(x,c,a,m),a.elementType=i,a.type=f,a.lanes=w,a}function aa(i,a,c,f){return i=gs(7,i,f,a),i.lanes=c,i}function Xd(i,a,c,f){return i=gs(22,i,f,a),i.elementType=ft,i.lanes=c,i.stateNode={isHidden:!1},i}function Tm(i,a,c){return i=gs(6,i,null,a),i.lanes=c,i}function xm(i,a,c){return a=gs(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function ZA(i,a,c,f,m){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=it(0),this.expirationTimes=it(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=it(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Im(i,a,c,f,m,w,x,O,V){return i=new ZA(i,a,c,O,V),a===1?(a=1,w===!0&&(a|=8)):a=0,w=gs(3,null,null,a),i.current=w,w.stateNode=i,w.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},jp(w),i}function eC(i,a,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:f==null?null:""+f,children:i,containerInfo:a,implementation:c}}function yw(i){if(!i)return Yi;i=i._reactInternals;e:{if(Te(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Or(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(Or(c))return H_(i,c,a)}return a}function vw(i,a,c,f,m,w,x,O,V){return i=Im(c,f,!0,i,m,w,x,O,V),i.context=yw(null),c=i.current,f=Er(),m=ro(c),w=Ei(f,m),w.callback=a??null,Zi(c,w,m),i.current.lanes=m,ot(i,m,f),jr(i,f),i}function Zd(i,a,c,f){var m=a.current,w=Er(),x=ro(m);return c=yw(c),a.context===null?a.context=c:a.pendingContext=c,a=Ei(w,x),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=Zi(m,a,x),i!==null&&(Ns(i,m,x,w),Cd(i,m,x)),x}function eh(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function _w(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function bm(i,a){_w(i,a),(i=i.alternate)&&_w(i,a)}function tC(){return null}var ww=typeof reportError=="function"?reportError:function(i){console.error(i)};function Sm(i){this._internalRoot=i}th.prototype.render=Sm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Zd(i,a,null,null)},th.prototype.unmount=Sm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;sa(function(){Zd(null,i,null,null)}),a[gi]=null}};function th(i){this._internalRoot=i}th.prototype.unstable_scheduleHydration=function(i){if(i){var a=Ho();i={blockedOn:null,target:i,priority:a};for(var c=0;c<rr.length&&a!==0&&a<rr[c].priority;c++);rr.splice(c,0,i),c===0&&sd(i)}};function km(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function nh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Ew(){}function nC(i,a,c,f,m){if(m){if(typeof f=="function"){var w=f;f=function(){var Y=eh(x);w.call(Y)}}var x=vw(a,f,i,0,null,!1,!1,"",Ew);return i._reactRootContainer=x,i[gi]=x.current,Sc(i.nodeType===8?i.parentNode:i),sa(),x}for(;m=i.lastChild;)i.removeChild(m);if(typeof f=="function"){var O=f;f=function(){var Y=eh(V);O.call(Y)}}var V=Im(i,0,!1,null,null,!1,!1,"",Ew);return i._reactRootContainer=V,i[gi]=V.current,Sc(i.nodeType===8?i.parentNode:i),sa(function(){Zd(a,V,c,f)}),V}function rh(i,a,c,f,m){var w=c._reactRootContainer;if(w){var x=w;if(typeof m=="function"){var O=m;m=function(){var V=eh(x);O.call(V)}}Zd(a,x,i,m)}else x=nC(c,a,i,m,f);return eh(x)}tr=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=fe(a.pendingLanes);c!==0&&(Pt(a,c|1),jr(a,xe()),(Lt&6)===0&&(xl=xe()+500,Ji()))}break;case 13:sa(function(){var f=wi(i,1);if(f!==null){var m=Er();Ns(f,i,1,m)}}),bm(i,1)}},Ar=function(i){if(i.tag===13){var a=wi(i,134217728);if(a!==null){var c=Er();Ns(a,i,134217728,c)}bm(i,134217728)}},qi=function(i){if(i.tag===13){var a=ro(i),c=wi(i,a);if(c!==null){var f=Er();Ns(c,i,a,f)}bm(i,a)}},Ho=function(){return Be},Wa=function(i,a){var c=Be;try{return Be=i,a()}finally{Be=c}},Bi=function(i,a,c){switch(a){case"input":if(Nn(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var m=wd(f);if(!m)throw Error(t(90));Et(f),Nn(f,m)}}}break;case"textarea":$i(i,c);break;case"select":a=c.value,a!=null&&cs(i,!!c.multiple,a,!1)}},ie=vm,ge=sa;var rC={usingClientEntryPoint:!1,Events:[Ac,ul,wd,se,B,vm]},Bc={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sC={bundleType:Bc.bundleType,version:Bc.version,rendererPackageName:Bc.rendererPackageName,rendererConfig:Bc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Mt(i),i===null?null:i.stateNode},findFiberByHostInstance:Bc.findFiberByHostInstance||tC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{J=sh.inject(sC),Ne=sh}catch{}}return Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rC,Vr.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!km(a))throw Error(t(200));return eC(i,a,null,c)},Vr.createRoot=function(i,a){if(!km(i))throw Error(t(299));var c=!1,f="",m=ww;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=Im(i,1,!1,null,null,c,!1,f,m),i[gi]=a.current,Sc(i.nodeType===8?i.parentNode:i),new Sm(a)},Vr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Mt(a),i=i===null?null:i.stateNode,i},Vr.flushSync=function(i){return sa(i)},Vr.hydrate=function(i,a,c){if(!nh(a))throw Error(t(200));return rh(null,i,a,!0,c)},Vr.hydrateRoot=function(i,a,c){if(!km(i))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,m=!1,w="",x=ww;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(x=c.onRecoverableError)),a=vw(a,null,i,1,c??null,m,!1,w,x),i[gi]=a.current,Sc(i),f)for(i=0;i<f.length;i++)c=f[i],m=c._getVersion,m=m(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,m]:a.mutableSourceEagerHydrationData.push(c,m);return new th(a)},Vr.render=function(i,a,c){if(!nh(a))throw Error(t(200));return rh(null,i,a,!1,c)},Vr.unmountComponentAtNode=function(i){if(!nh(i))throw Error(t(40));return i._reactRootContainer?(sa(function(){rh(null,null,i,!1,function(){i._reactRootContainer=null,i[gi]=null})}),!0):!1},Vr.unstable_batchedUpdates=vm,Vr.unstable_renderSubtreeIntoContainer=function(i,a,c,f){if(!nh(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return rh(i,a,c,!1,f)},Vr.version="18.3.1-next-f1338f8080-20240426",Vr}var Pw;function fC(){if(Pw)return Cm.exports;Pw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cm.exports=hC(),Cm.exports}var Nw;function pC(){if(Nw)return ih;Nw=1;var n=fC();return ih.createRoot=n.createRoot,ih.hydrateRoot=n.hydrateRoot,ih}var mC=pC();const gC=Jx(mC);var Lu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yC={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},vC=class{#e=yC;#t=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,e){return this.#e.setTimeout(n,e)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,e){return this.#e.setInterval(n,e)}clearInterval(n){this.#e.clearInterval(n)}},ga=new vC;function _C(n){setTimeout(n,0)}var xa=typeof window>"u"||"Deno"in globalThis;function Fr(){}function wC(n,e){return typeof n=="function"?n(e):n}function fg(n){return typeof n=="number"&&n>=0&&n!==1/0}function Xx(n,e){return Math.max(n+(e||0)-Date.now(),0)}function yo(n,e){return typeof n=="function"?n(e):n}function ys(n,e){return typeof n=="function"?n(e):n}function Dw(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:o,queryKey:l,stale:u}=n;if(l){if(r){if(e.queryHash!==fy(l,e.options))return!1}else if(!yu(e.queryKey,l))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||o&&!o(e))}function Ow(n,e){const{exact:t,status:r,predicate:s,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(t){if(gu(e.options.mutationKey)!==gu(o))return!1}else if(!yu(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function fy(n,e){return(e?.queryKeyHashFn||gu)(n)}function gu(n){return JSON.stringify(n,(e,t)=>mg(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function yu(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>yu(n[t],e[t])):!1}var EC=Object.prototype.hasOwnProperty;function Zx(n,e,t=0){if(n===e)return n;if(t>500)return e;const r=Mw(n)&&Mw(e);if(!r&&!(mg(n)&&mg(e)))return e;const o=(r?n:Object.keys(n)).length,l=r?e:Object.keys(e),u=l.length,d=r?new Array(u):{};let p=0;for(let y=0;y<u;y++){const _=r?y:l[y],T=n[_],S=e[_];if(T===S){d[_]=T,(r?y<o:EC.call(n,_))&&p++;continue}if(T===null||S===null||typeof T!="object"||typeof S!="object"){d[_]=S;continue}const P=Zx(T,S,t+1);d[_]=P,P===T&&p++}return o===u&&p===o?n:d}function pg(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function Mw(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function mg(n){if(!Lw(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Lw(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Lw(n){return Object.prototype.toString.call(n)==="[object Object]"}function TC(n){return new Promise(e=>{ga.setTimeout(e,n)})}function gg(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Zx(n,e):e}function xC(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function IC(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var py=Symbol();function eI(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===py?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function tI(n,e){return typeof n=="function"?n(...e):!!n}function bC(n,e,t){let r=!1,s;return Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?t():s.addEventListener("abort",t,{once:!0})),s)}),n}var SC=class extends Lu{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!xa&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},my=new SC;function yg(){let n,e;const t=new Promise((s,o)=>{n=s,e=o});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}var kC=_C;function RC(){let n=[],e=0,t=u=>{u()},r=u=>{u()},s=kC;const o=u=>{e?n.push(u):s(()=>{t(u)})},l=()=>{const u=n;n=[],u.length&&s(()=>{r(()=>{u.forEach(d=>{t(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||l()}return d},batchCalls:u=>(...d)=>{o(()=>{u(...d)})},schedule:o,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Jn=RC(),AC=class extends Lu{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!xa&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},Uh=new AC;function CC(n){return Math.min(1e3*2**n,3e4)}function nI(n){return(n??"online")==="online"?Uh.isOnline():!0}var vg=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function rI(n){let e=!1,t=0,r;const s=yg(),o=()=>s.status!=="pending",l=M=>{if(!o()){const D=new vg(M);T(D),n.onCancel?.(D)}},u=()=>{e=!0},d=()=>{e=!1},p=()=>my.isFocused()&&(n.networkMode==="always"||Uh.isOnline())&&n.canRun(),y=()=>nI(n.networkMode)&&n.canRun(),_=M=>{o()||(r?.(),s.resolve(M))},T=M=>{o()||(r?.(),s.reject(M))},S=()=>new Promise(M=>{r=D=>{(o()||p())&&M(D)},n.onPause?.()}).then(()=>{r=void 0,o()||n.onContinue?.()}),P=()=>{if(o())return;let M;const D=t===0?n.initialPromise:void 0;try{M=D??n.fn()}catch(X){M=Promise.reject(X)}Promise.resolve(M).then(_).catch(X=>{if(o())return;const W=n.retry??(xa?0:3),Q=n.retryDelay??CC,ae=typeof Q=="function"?Q(t,X):Q,de=W===!0||typeof W=="number"&&t<W||typeof W=="function"&&W(t,X);if(e||!de){T(X);return}t++,n.onFail?.(t,X),TC(ae).then(()=>p()?void 0:S()).then(()=>{e?T(X):P()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:u,continueRetry:d,canStart:y,start:()=>(y()?P():S().then(P),s)}}var sI=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fg(this.gcTime)&&(this.#e=ga.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(xa?1/0:300*1e3))}clearGcTimeout(){this.#e&&(ga.clearTimeout(this.#e),this.#e=void 0)}},PC=class extends sI{#e;#t;#n;#s;#r;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Vw(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Vw(this.options);t.data!==void 0&&(this.setState(jw(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const r=gg(this.state.data,e,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Fr).catch(Fr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>ys(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===py||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>yo(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Xx(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},o=()=>{const d=eI(this.options,t),y=(()=>{const _={client:this.#s,queryKey:this.queryKey,meta:this.meta};return s(_),_})();return this.#o=!1,this.options.persister?this.options.persister(d,y,this):d(y)},u=(()=>{const d={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:o};return s(d),d})();this.options.behavior?.onFetch(u,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#i({type:"fetch",meta:u.fetchOptions?.meta}),this.#r=rI({initialPromise:t?.initialPromise,fn:u.fetchFn,onCancel:d=>{d instanceof vg&&d.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(d,p)=>{this.#i({type:"failed",failureCount:d,error:p})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0});try{const d=await this.#r.start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),this.#n.config.onSuccess?.(d,this),this.#n.config.onSettled?.(d,this.state.error,this),d}catch(d){if(d instanceof vg){if(d.silent)return this.#r.promise;if(d.revert){if(this.state.data===void 0)throw d;return this.state.data}}throw this.#i({type:"error",error:d}),this.#n.config.onError?.(d,this),this.#n.config.onSettled?.(this.state.data,d,this),d}finally{this.scheduleGc()}}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...iI(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,...jw(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?s:void 0,s;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Jn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function iI(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nI(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function jw(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Vw(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var NC=class extends Lu{constructor(n,e){super(),this.options=e,this.#e=n,this.#i=null,this.#o=yg(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#s=void 0;#r;#a;#o;#i;#m;#h;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Fw(this.#t,this.options)?this.#d():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return _g(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _g(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#E(),this.#t.removeObserver(this)}setOptions(n){const e=this.options,t=this.#t;if(this.options=this.#e.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ys(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#T(),this.#t.setOptions(this.options),e._defaulted&&!pg(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Uw(this.#t,t,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==t||ys(this.options.enabled,this.#t)!==ys(e.enabled,this.#t)||yo(this.options.staleTime,this.#t)!==yo(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==t||ys(this.options.enabled,this.#t)!==ys(e.enabled,this.#t)||s!==this.#l)&&this.#v(s)}getOptimisticResult(n){const e=this.#e.getQueryCache().build(this.#e,n),t=this.createResult(e,n);return OC(this,t)&&(this.#s=t,this.#a=this.options,this.#r=this.#t.state),t}getCurrentResult(){return this.#s}trackResult(n,e){return new Proxy(n,{get:(t,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,r))})}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#t}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#e.defaultQueryOptions(n),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#d({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(n){this.#T();let e=this.#t.fetch(this.options,n);return n?.throwOnError||(e=e.catch(Fr)),e}#g(){this.#w();const n=yo(this.options.staleTime,this.#t);if(xa||this.#s.isStale||!fg(n))return;const t=Xx(this.#s.dataUpdatedAt,n)+1;this.#c=ga.setTimeout(()=>{this.#s.isStale||this.updateResult()},t)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(n){this.#E(),this.#l=n,!(xa||ys(this.options.enabled,this.#t)===!1||!fg(this.#l)||this.#l===0)&&(this.#u=ga.setInterval(()=>{(this.options.refetchIntervalInBackground||my.isFocused())&&this.#d()},this.#l))}#_(){this.#g(),this.#v(this.#y())}#w(){this.#c&&(ga.clearTimeout(this.#c),this.#c=void 0)}#E(){this.#u&&(ga.clearInterval(this.#u),this.#u=void 0)}createResult(n,e){const t=this.#t,r=this.options,s=this.#s,o=this.#r,l=this.#a,d=n!==t?n.state:this.#n,{state:p}=n;let y={...p},_=!1,T;if(e._optimisticResults){const I=this.hasListeners(),A=!I&&Fw(n,e),k=I&&Uw(n,t,e,r);(A||k)&&(y={...y,...iI(p.data,n.options)}),e._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:S,errorUpdatedAt:P,status:M}=y;T=y.data;let D=!1;if(e.placeholderData!==void 0&&T===void 0&&M==="pending"){let I;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(I=s.data,D=!0):I=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,I!==void 0&&(M="success",T=gg(s?.data,I,e),_=!0)}if(e.select&&T!==void 0&&!D)if(s&&T===o?.data&&e.select===this.#m)T=this.#h;else try{this.#m=e.select,T=e.select(T),T=gg(s?.data,T,e),this.#h=T,this.#i=null}catch(I){this.#i=I}this.#i&&(S=this.#i,T=this.#h,P=Date.now(),M="error");const X=y.fetchStatus==="fetching",W=M==="pending",Q=M==="error",ae=W&&X,de=T!==void 0,N={status:M,fetchStatus:y.fetchStatus,isPending:W,isSuccess:M==="success",isError:Q,isInitialLoading:ae,isLoading:ae,data:T,dataUpdatedAt:y.dataUpdatedAt,error:S,errorUpdatedAt:P,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>d.dataUpdateCount||y.errorUpdateCount>d.errorUpdateCount,isFetching:X,isRefetching:X&&!W,isLoadingError:Q&&!de,isPaused:y.fetchStatus==="paused",isPlaceholderData:_,isRefetchError:Q&&de,isStale:gy(n,e),refetch:this.refetch,promise:this.#o,isEnabled:ys(e.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const I=N.data!==void 0,A=N.status==="error"&&!I,k=R=>{A?R.reject(N.error):I&&R.resolve(N.data)},L=()=>{const R=this.#o=N.promise=yg();k(R)},C=this.#o;switch(C.status){case"pending":n.queryHash===t.queryHash&&k(C);break;case"fulfilled":(A||N.data!==C.value)&&L();break;case"rejected":(!A||N.error!==C.reason)&&L();break}}return N}updateResult(){const n=this.#s,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#f=this.#t),pg(e,n))return;this.#s=e;const t=()=>{if(!n)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#p.size)return!0;const o=new Set(s??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#s).some(l=>{const u=l;return this.#s[u]!==n[u]&&o.has(u)})};this.#x({listeners:t()})}#T(){const n=this.#e.getQueryCache().build(this.#e,this.options);if(n===this.#t)return;const e=this.#t;this.#t=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#x(n){Jn.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function DC(n,e){return ys(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Fw(n,e){return DC(n,e)||n.state.data!==void 0&&_g(n,e,e.refetchOnMount)}function _g(n,e,t){if(ys(e.enabled,n)!==!1&&yo(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&gy(n,e)}return!1}function Uw(n,e,t,r){return(n!==e||ys(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&gy(n,t)}function gy(n,e){return ys(e.enabled,n)!==!1&&n.isStaleByTime(yo(e.staleTime,n))}function OC(n,e){return!pg(n.getCurrentResult(),e)}function $h(n){return{onFetch:(e,t)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const p=async()=>{let y=!1;const _=P=>{bC(P,()=>e.signal,()=>y=!0)},T=eI(e.options,e.fetchOptions),S=async(P,M,D)=>{if(y)return Promise.reject();if(M==null&&P.pages.length)return Promise.resolve(P);const W=(()=>{const me={client:e.client,queryKey:e.queryKey,pageParam:M,direction:D?"backward":"forward",meta:e.options.meta};return _(me),me})(),Q=await T(W),{maxPages:ae}=e.options,de=D?IC:xC;return{pages:de(P.pages,Q,ae),pageParams:de(P.pageParams,M,ae)}};if(s&&o.length){const P=s==="backward",M=P?oI:wg,D={pages:o,pageParams:l},X=M(r,D);u=await S(D,X,P)}else{const P=n??o.length;do{const M=d===0?l[0]??r.initialPageParam:wg(r,u);if(d>0&&M==null)break;u=await S(u,M),d++}while(d<P)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=p}}}function wg(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function oI(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}function MC(n,e){return e?wg(n,e)!=null:!1}function LC(n,e){return!e||!n.getPreviousPageParam?!1:oI(n,e)!=null}var jC=class extends NC{constructor(n,e){super(n,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(n){super.setOptions({...n,behavior:$h()})}getOptimisticResult(n){return n.behavior=$h(),super.getOptimisticResult(n)}fetchNextPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"backward"}}})}createResult(n,e){const{state:t}=n,r=super.createResult(n,e),{isFetching:s,isRefetching:o,isError:l,isRefetchError:u}=r,d=t.fetchMeta?.fetchMore?.direction,p=l&&d==="forward",y=s&&d==="forward",_=l&&d==="backward",T=s&&d==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:MC(e,t.data),hasPreviousPage:LC(e,t.data),isFetchNextPageError:p,isFetchingNextPage:y,isFetchPreviousPageError:_,isFetchingPreviousPage:T,isRefetchError:u&&!p&&!_,isRefetching:o&&!y&&!T}}},VC=class extends sI{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||FC(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=rI({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(l,u)=>{this.#r({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const s=this.state.status==="pending",o=!this.#s.canStart();try{if(s)t();else{this.#r({type:"pending",variables:e,isPaused:o}),await this.#n.config.onMutate?.(e,this,r);const u=await this.options.onMutate?.(e,r);u!==this.state.context&&this.#r({type:"pending",context:u,variables:e,isPaused:o})}const l=await this.#s.start();return await this.#n.config.onSuccess?.(l,e,this.state.context,this,r),await this.options.onSuccess?.(l,e,this.state.context,r),await this.#n.config.onSettled?.(l,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(l,null,e,this.state.context,r),this.#r({type:"success",data:l}),l}catch(l){try{await this.#n.config.onError?.(l,e,this.state.context,this,r)}catch(u){Promise.reject(u)}try{await this.options.onError?.(l,e,this.state.context,r)}catch(u){Promise.reject(u)}try{await this.#n.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this,r)}catch(u){Promise.reject(u)}try{await this.options.onSettled?.(void 0,l,e,this.state.context,r)}catch(u){Promise.reject(u)}throw this.#r({type:"error",error:l}),l}finally{this.#n.runNext(this)}}#r(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Jn.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function FC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var UC=class extends Lu{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(n,e,t){const r=new VC({client:n,mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(r),r}add(n){this.#e.add(n);const e=oh(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=oh(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const r=t.indexOf(n);r!==-1&&t.splice(r,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=oh(n);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===n}else return!0}runNext(n){const e=oh(n);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==n&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Jn.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Ow(e,t))}findAll(n={}){return this.getAll().filter(e=>Ow(n,e))}notify(n){Jn.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return Jn.batch(()=>Promise.all(n.map(e=>e.continue().catch(Fr))))}};function oh(n){return n.options.scope?.id}var $C=class extends Lu{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const r=e.queryKey,s=e.queryHash??fy(r,e);let o=this.get(s);return o||(o=new PC({client:n,queryKey:r,queryHash:s,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(r)}),this.add(o)),o}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Jn.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Dw(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>Dw(n,t)):e}notify(n){Jn.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){Jn.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Jn.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},zC=class{#e;#t;#n;#s;#r;#a;#o;#i;constructor(n={}){this.#e=n.queryCache||new $C,this.#t=n.mutationCache||new UC,this.#n=n.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=my.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=Uh.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(yo(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),o=this.#e.get(r.queryHash)?.state.data,l=wC(e,o);if(l!==void 0)return this.#e.build(this,r).setData(l,{...t,manual:!0})}setQueriesData(n,e,t){return Jn.batch(()=>this.#e.findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;Jn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return Jn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Jn.batch(()=>this.#e.findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Fr).catch(Fr)}invalidateQueries(n,e={}){return Jn.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Jn.batch(()=>this.#e.findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,t);return t.throwOnError||(o=o.catch(Fr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Fr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(yo(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Fr).catch(Fr)}fetchInfiniteQuery(n){return n.behavior=$h(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Fr).catch(Fr)}ensureInfiniteQueryData(n){return n.behavior=$h(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Uh.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#s.set(gu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#s.values()],t={};return e.forEach(r=>{yu(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){this.#r.set(gu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(r=>{yu(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=fy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===py&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},aI=j.createContext(void 0),BC=n=>{const e=j.useContext(aI);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qC=({client:n,children:e})=>(j.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),g.jsx(aI.Provider,{value:n,children:e})),lI=j.createContext(!1),HC=()=>j.useContext(lI);lI.Provider;function GC(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var KC=j.createContext(GC()),WC=()=>j.useContext(KC),QC=(n,e,t)=>{const r=t?.state.error&&typeof n.throwOnError=="function"?tI(n.throwOnError,[t.state.error,t]):n.throwOnError;(n.suspense||n.experimental_prefetchInRender||r)&&(e.isReset()||(n.retryOnMount=!1))},YC=n=>{j.useEffect(()=>{n.clearReset()},[n])},JC=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(s&&n.data===void 0||tI(t,[n.error,r])),XC=n=>{if(n.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),r=n.staleTime;n.staleTime=typeof r=="function"?(...s)=>t(r(...s)):t(r),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},ZC=(n,e)=>n.isLoading&&n.isFetching&&!e,eP=(n,e)=>n?.suspense&&e.isPending,$w=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function tP(n,e,t){const r=HC(),s=WC(),o=BC(),l=o.defaultQueryOptions(n);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const u=o.getQueryCache().get(l.queryHash);l._optimisticResults=r?"isRestoring":"optimistic",XC(l),QC(l,s,u),YC(s);const d=!o.getQueryCache().get(l.queryHash),[p]=j.useState(()=>new e(o,l)),y=p.getOptimisticResult(l),_=!r&&n.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(T=>{const S=_?p.subscribe(Jn.batchCalls(T)):Fr;return p.updateResult(),S},[p,_]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),j.useEffect(()=>{p.setOptions(l)},[l,p]),eP(l,y))throw $w(l,p,s);if(JC({result:y,errorResetBoundary:s,throwOnError:l.throwOnError,query:u,suspense:l.suspense}))throw y.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,y),l.experimental_prefetchInRender&&!xa&&ZC(y,r)&&(d?$w(l,p,s):u?.promise)?.catch(Fr).finally(()=>{p.updateResult()}),l.notifyOnChangeProps?y:p.trackResult(y)}function nP(n,e){return tP(n,jC)}const rP="modulepreload",sP=function(n){return"/richard-app-google-studio/"+n},zw={},zt=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let d=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");s=d(t.map(p=>{if(p=sP(p),p in zw)return;zw[p]=!0;const y=p.endsWith(".css"),_=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${_}`))return;const T=document.createElement("link");if(T.rel=y?"stylesheet":rP,y||(T.as="script"),T.crossOrigin="",T.href=p,u&&T.setAttribute("nonce",u),document.head.appendChild(T),y)return new Promise((S,P)=>{T.addEventListener("load",S),T.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};var iP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cI=function(n,e,t,r){function s(o){return o instanceof t?o:new t((function(l){l(o)}))}return new(t||(t=Promise))((function(o,l){function u(y){try{p(r.next(y))}catch(_){l(_)}}function d(y){try{p(r.throw(y))}catch(_){l(_)}}function p(y){y.done?o(y.value):s(y.value).then(u,d)}p((r=r.apply(n,e||[])).next())}))},uI=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(p){return function(y){return d([p,y])}}function d(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(t=0)),t;)try{if(r=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,s=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){t.label=p[1];break}if(p[0]===6&&t.label<o[1]){t.label=o[1],o=p;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(p);break}o[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(y){p=[6,y],s=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Bw=function(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},oP="ionicpwaelements",xh,dI,Xr=!1,Eg=!1,Di=function(n,e){return function(){}},aP=function(n,e){return function(){}},lP="{visibility:hidden}.hydrated{visibility:inherit}",qw={},cP="http://www.w3.org/2000/svg",uP="http://www.w3.org/1999/xhtml",dP=function(n){return n!=null},yy=function(n){return n=typeof n,n==="object"||n==="function"};function hI(n){var e,t,r;return(r=(t=(e=n.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||t===void 0?void 0:t.getAttribute("content"))!==null&&r!==void 0?r:void 0}var hP=function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var s=null,o=!1,l=!1,u=[],d=function(_){for(var T=0;T<_.length;T++)s=_[T],Array.isArray(s)?d(s):s!=null&&typeof s!="boolean"&&((o=typeof n!="function"&&!yy(s))&&(s=String(s)),o&&l?u[u.length-1].$text$+=s:u.push(o?Tg(null,s):s),l=o)};if(d(t),e){var p=e.className||e.class;p&&(e.class=typeof p!="object"?p:Object.keys(p).filter((function(_){return p[_]})).join(" "))}var y=Tg(n,null);return y.$attrs$=e,u.length>0&&(y.$children$=u),y},Tg=function(n,e){var t={$flags$:0,$tag$:n,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t},fP={},pP=function(n){return n&&n.$tag$===fP},mP=function(n,e){return n!=null&&!yy(n)?e&4?n==="false"?!1:n===""||!!n:e&2?parseFloat(n):e&1?String(n):n:n},gP=function(n){return Ro(n).$hostElement$},yz=function(n,e,t){var r=gP(n);return{emit:function(s){return fI(r,e,{bubbles:!0,composed:!0,cancelable:!0,detail:s})}}},fI=function(n,e,t){var r=zn.ce(e,t);return n.dispatchEvent(r),r},Hw=new WeakMap,yP=function(n,e,t){var r=zh.get(n);UP&&t?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,zh.set(n,r)},vP=function(n,e,t,r){var s,o=pI(e),l=zh.get(o);if(n=n.nodeType===11?n:Ms,l)if(typeof l=="string"){n=n.head||n;var u=Hw.get(n),d=void 0;if(u||Hw.set(n,u=new Set),!u.has(o)){{d=Ms.createElement("style"),d.innerHTML=l;var p=(s=zn.$nonce$)!==null&&s!==void 0?s:hI(Ms);p!=null&&d.setAttribute("nonce",p),n.insertBefore(d,n.querySelector("link"))}u&&u.add(o)}}else n.adoptedStyleSheets.includes(l)||(n.adoptedStyleSheets=Bw(Bw([],n.adoptedStyleSheets,!0),[l],!1));return o},_P=function(n){var e=n.$cmpMeta$,t=n.$hostElement$,r=e.$flags$,s=Di("attachStyles",e.$tagName$),o=vP(t.shadowRoot?t.shadowRoot:t.getRootNode(),e);r&10&&(t["s-sc"]=o,t.classList.add(o+"-h")),s()},pI=function(n,e){return"sc-"+n.$tagName$},Gw=function(n,e,t,r,s,o){if(t!==r){var l=Ww(n,e),u=e.toLowerCase();if(e==="class"){var d=n.classList,p=Kw(t),y=Kw(r);d.remove.apply(d,p.filter((function(P){return P&&!y.includes(P)}))),d.add.apply(d,y.filter((function(P){return P&&!p.includes(P)})))}else if(e==="style"){for(var _ in t)(!r||r[_]==null)&&(_.includes("-")?n.style.removeProperty(_):n.style[_]="");for(var _ in r)(!t||r[_]!==t[_])&&(_.includes("-")?n.style.setProperty(_,r[_]):n.style[_]=r[_])}else if(e==="ref")r&&r(n);else if(!l&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):Ww(If,u)?e=u.slice(2):e=u[2]+e.slice(3),t&&zn.rel(n,e,t,!1),r&&zn.ael(n,e,r,!1);else{var T=yy(r);if((l||T&&r!==null)&&!s)try{if(n.tagName.includes("-"))n[e]=r;else{var S=r??"";e==="list"?l=!1:(t==null||n[e]!=S)&&(n[e]=S)}}catch{}r==null||r===!1?(r!==!1||n.getAttribute(e)==="")&&n.removeAttribute(e):(!l||o&4||s)&&!T&&(r=r===!0?"":r,n.setAttribute(e,r))}}},wP=/\s/,Kw=function(n){return n?n.split(wP):[]},mI=function(n,e,t,r){var s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,o=n&&n.$attrs$||qw,l=e.$attrs$||qw;for(r in o)r in l||Gw(s,r,o[r],void 0,t,e.$flags$);for(r in l)Gw(s,r,o[r],l[r],t,e.$flags$)},vy=function(n,e,t,r){var s=e.$children$[t],o=0,l,u;if(s.$text$!==null)l=s.$elm$=Ms.createTextNode(s.$text$);else{if(Xr||(Xr=s.$tag$==="svg"),l=s.$elm$=Ms.createElementNS(Xr?cP:uP,s.$tag$),Xr&&s.$tag$==="foreignObject"&&(Xr=!1),mI(null,s,Xr),dP(xh)&&l["s-si"]!==xh&&l.classList.add(l["s-si"]=xh),s.$children$)for(o=0;o<s.$children$.length;++o)u=vy(n,s,o),u&&l.appendChild(u);s.$tag$==="svg"?Xr=!1:l.tagName==="foreignObject"&&(Xr=!0)}return l},gI=function(n,e,t,r,s,o){var l=n,u;for(l.shadowRoot&&l.tagName===dI&&(l=l.shadowRoot);s<=o;++s)r[s]&&(u=vy(null,t,s),u&&(r[s].$elm$=u,l.insertBefore(u,e)))},yI=function(n,e,t){for(var r=e;r<=t;++r){var s=n[r];if(s){var o=s.$elm$;vI(s),o&&o.remove()}}},EP=function(n,e,t,r){for(var s=0,o=0,l=e.length-1,u=e[0],d=e[l],p=r.length-1,y=r[0],_=r[p],T;s<=l&&o<=p;)u==null?u=e[++s]:d==null?d=e[--l]:y==null?y=r[++o]:_==null?_=r[--p]:ah(u,y)?(Xc(u,y),u=e[++s],y=r[++o]):ah(d,_)?(Xc(d,_),d=e[--l],_=r[--p]):ah(u,_)?(Xc(u,_),n.insertBefore(u.$elm$,d.$elm$.nextSibling),u=e[++s],_=r[--p]):ah(d,y)?(Xc(d,y),n.insertBefore(d.$elm$,u.$elm$),d=e[--l],y=r[++o]):(T=vy(e&&e[o],t,o),y=r[++o],T&&u.$elm$.parentNode.insertBefore(T,u.$elm$));s>l?gI(n,r[p+1]==null?null:r[p+1].$elm$,t,r,o,p):o>p&&yI(e,s,l)},ah=function(n,e){return n.$tag$===e.$tag$},Xc=function(n,e){var t=e.$elm$=n.$elm$,r=n.$children$,s=e.$children$,o=e.$tag$,l=e.$text$;l===null?(Xr=o==="svg"?!0:o==="foreignObject"?!1:Xr,mI(n,e,Xr),r!==null&&s!==null?EP(t,r,e,s):s!==null?(n.$text$!==null&&(t.textContent=""),gI(t,null,e,s,0,s.length-1)):r!==null&&yI(r,0,r.length-1),Xr&&o==="svg"&&(Xr=!1)):n.$text$!==l&&(t.data=l)},vI=function(n){n.$attrs$&&n.$attrs$.ref&&n.$attrs$.ref(null),n.$children$&&n.$children$.map(vI)},TP=function(n,e){var t=n.$hostElement$,r=n.$vnode$||Tg(null,null),s=pP(e)?e:hP(null,null,e);dI=t.tagName,s.$tag$=null,s.$flags$|=4,n.$vnode$=s,s.$elm$=r.$elm$=t.shadowRoot||t,xh=t["s-sc"],Xc(r,s)},_I=function(n,e){e&&!n.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise((function(t){return n.$onRenderResolve$=t})))},xf=function(n,e){if(n.$flags$|=16,n.$flags$&4){n.$flags$|=512;return}_I(n,n.$ancestorComponent$);var t=function(){return xP(n,e)};return zP(t)},xP=function(n,e){var t=Di("scheduleUpdate",n.$cmpMeta$.$tagName$),r=n.$lazyInstance$,s;return e&&(n.$flags$|=256,n.$queuedListeners$&&(n.$queuedListeners$.map((function(o){var l=o[0],u=o[1];return _y(r,l,u)})),n.$queuedListeners$=void 0)),t(),IP(s,(function(){return SP(n,r,e)}))},IP=function(n,e){return bP(n)?n.then(e):e()},bP=function(n){return n instanceof Promise||n&&n.then&&typeof n.then=="function"},SP=function(n,e,t){return cI(void 0,void 0,void 0,(function(){var r,s,o,l,u,d,p;return uI(this,(function(y){return s=n.$hostElement$,o=Di("update",n.$cmpMeta$.$tagName$),l=s["s-rc"],t&&_P(n),u=Di("render",n.$cmpMeta$.$tagName$),kP(n,e),l&&(l.map((function(_){return _()})),s["s-rc"]=void 0),u(),o(),d=(r=s["s-p"])!==null&&r!==void 0?r:[],p=function(){return RP(n)},d.length===0?p():(Promise.all(d).then(p),n.$flags$|=4,d.length=0),[2]}))}))},kP=function(n,e,t){try{e=e.render(),n.$flags$&=-17,n.$flags$|=2,TP(n,e)}catch(r){Os(r,n.$hostElement$)}return null},RP=function(n){n.$cmpMeta$.$tagName$;var e=n.$hostElement$,t=Di(),r=n.$lazyInstance$,s=n.$ancestorComponent$;n.$flags$&64?t():(n.$flags$|=64,EI(e),_y(r,"componentDidLoad"),t(),n.$onReadyResolve$(e),s||wI()),n.$onInstanceResolve$(e),n.$onRenderResolve$&&(n.$onRenderResolve$(),n.$onRenderResolve$=void 0),n.$flags$&512&&Ey((function(){return xf(n,!1)})),n.$flags$&=-517},vz=function(n){{var e=Ro(n),t=e.$hostElement$.isConnected;return t&&(e.$flags$&18)===2&&xf(e,!1),t}},wI=function(n){EI(Ms.documentElement),Ey((function(){return fI(If,"appload",{detail:{namespace:oP}})}))},_y=function(n,e,t){if(n&&n[e])try{return n[e](t)}catch(r){Os(r)}},EI=function(n){return n.classList.add("hydrated")},AP=function(n,e){return Ro(n).$instanceValues$.get(e)},CP=function(n,e,t,r){var s=Ro(n),o=s.$instanceValues$.get(e),l=s.$flags$,u=s.$lazyInstance$;t=mP(t,r.$members$[e][0]);var d=Number.isNaN(o)&&Number.isNaN(t),p=t!==o&&!d;(!(l&8)||o===void 0)&&p&&(s.$instanceValues$.set(e,t),u&&(l&18)===2&&xf(s,!1))},TI=function(n,e,t){if(e.$members$){var r=Object.entries(e.$members$),s=n.prototype;if(r.map((function(l){var u=l[0],d=l[1][0];d&31||t&2&&d&32?Object.defineProperty(s,u,{get:function(){return AP(this,u)},set:function(p){CP(this,u,p,e)},configurable:!0,enumerable:!0}):t&1&&d&64&&Object.defineProperty(s,u,{value:function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];var _=Ro(this);return _.$onInstancePromise$.then((function(){var T;return(T=_.$lazyInstance$)[u].apply(T,p)}))}})})),t&1){var o=new Map;s.attributeChangedCallback=function(l,u,d){var p=this;zn.jmp((function(){var y=o.get(l);if(p.hasOwnProperty(y))d=p[y],delete p[y];else if(s.hasOwnProperty(y)&&typeof p[y]=="number"&&p[y]==d)return;p[y]=d===null&&typeof p[y]=="boolean"?!1:d}))},n.observedAttributes=r.filter((function(l){l[0];var u=l[1];return u[0]&15})).map((function(l){var u=l[0],d=l[1],p=d[1]||u;return o.set(p,u),p}))}}return n},PP=function(n,e,t,r,s){return cI(void 0,void 0,void 0,(function(){var o,l,u,d,p,y,_;return uI(this,(function(T){switch(T.label){case 0:return(e.$flags$&32)!==0?[3,3]:(e.$flags$|=32,s=FP(t),s.then?(o=aP(),[4,s]):[3,2]);case 1:s=T.sent(),o(),T.label=2;case 2:s.isProxied||(TI(s,t,2),s.isProxied=!0),l=Di("createInstance",t.$tagName$),e.$flags$|=8;try{new s(e)}catch(S){Os(S)}e.$flags$&=-9,l(),s.style&&(u=s.style,d=pI(t),zh.has(d)||(p=Di("registerStyles",t.$tagName$),yP(d,u,!!(t.$flags$&1)),p())),T.label=3;case 3:return y=e.$ancestorComponent$,_=function(){return xf(e,!0)},y&&y["s-rc"]?y["s-rc"].push(_):_(),[2]}}))}))},NP=function(n){if((zn.$flags$&1)===0){var e=Ro(n),t=e.$cmpMeta$,r=Di("connectedCallback",t.$tagName$);if(e.$flags$&1)xI(n,e,t.$listeners$);else{e.$flags$|=1;for(var s=n;s=s.parentNode||s.host;)if(s["s-p"]){_I(e,e.$ancestorComponent$=s);break}t.$members$&&Object.entries(t.$members$).map((function(o){var l=o[0],u=o[1][0];if(u&31&&n.hasOwnProperty(l)){var d=n[l];delete n[l],n[l]=d}})),PP(n,e,t)}r()}},DP=function(n){if((zn.$flags$&1)===0){var e=Ro(n),t=e.$lazyInstance$;e.$rmListeners$&&(e.$rmListeners$.map((function(r){return r()})),e.$rmListeners$=void 0),_y(t,"disconnectedCallback")}},OP=function(n,e){e===void 0&&(e={});var t,r=Di(),s=[],o=e.exclude||[],l=If.customElements,u=Ms.head,d=u.querySelector("meta[charset]"),p=Ms.createElement("style"),y=[],_,T=!0;Object.assign(zn,e),zn.$resourcesUrl$=new URL(e.resourcesUrl||"./",Ms.baseURI).href,n.map((function(P){P[1].map((function(M){var D={$flags$:M[0],$tagName$:M[1],$members$:M[2],$listeners$:M[3]};D.$members$=M[2],D.$listeners$=M[3];var X=D.$tagName$,W=(function(Q){iP(ae,Q);function ae(de){var me=Q.call(this,de)||this;return de=me,VP(de,D),D.$flags$&1&&de.attachShadow({mode:"open"}),me}return ae.prototype.connectedCallback=function(){var de=this;_&&(clearTimeout(_),_=null),T?y.push(this):zn.jmp((function(){return NP(de)}))},ae.prototype.disconnectedCallback=function(){var de=this;zn.jmp((function(){return DP(de)}))},ae.prototype.componentOnReady=function(){return Ro(this).$onReadyPromise$},ae})(HTMLElement);D.$lazyBundleId$=P[0],!o.includes(X)&&!l.get(X)&&(s.push(X),l.define(X,TI(W,D,1)))}))}));{p.innerHTML=s+lP,p.setAttribute("data-styles","");var S=(t=zn.$nonce$)!==null&&t!==void 0?t:hI(Ms);S!=null&&p.setAttribute("nonce",S),u.insertBefore(p,d?d.nextSibling:u.firstChild)}T=!1,y.length?y.map((function(P){return P.connectedCallback()})):zn.jmp((function(){return _=setTimeout(wI,30)})),r()},xI=function(n,e,t,r){t&&t.map((function(s){var o=s[0],l=s[1],u=s[2],d=LP(n,o),p=MP(e,u),y=jP(o);zn.ael(d,l,p,y),(e.$rmListeners$=e.$rmListeners$||[]).push((function(){return zn.rel(d,l,p,y)}))}))},MP=function(n,e){return function(t){try{n.$flags$&256?n.$lazyInstance$[e](t):(n.$queuedListeners$=n.$queuedListeners$||[]).push([e,t])}catch(r){Os(r)}}},LP=function(n,e){return e&16?Ms.body:n},jP=function(n){return(n&2)!==0},wy=new WeakMap,Ro=function(n){return wy.get(n)},_z=function(n,e){return wy.set(e.$lazyInstance$=n,e)},VP=function(n,e){var t={$flags$:0,$hostElement$:n,$cmpMeta$:e,$instanceValues$:new Map};return t.$onInstancePromise$=new Promise((function(r){return t.$onInstanceResolve$=r})),t.$onReadyPromise$=new Promise((function(r){return t.$onReadyResolve$=r})),n["s-p"]=[],n["s-rc"]=[],xI(n,t,e.$listeners$),wy.set(n,t)},Ww=function(n,e){return e in n},Os=function(n,e){return(0,console.error)(n,e)},Dm=new Map,FP=function(n,e,t){var r=n.$tagName$.replace(/-/g,"_"),s=n.$lazyBundleId$,o=Dm.get(s);if(o)return o[r];{var l=function(u){return Dm.set(s,u),u[r]};switch(s){case"pwa-action-sheet":return zt(()=>import("./pwa-action-sheet.entry-Dvn3rpWq.js"),[]).then(l,Os);case"pwa-camera-modal":return zt(()=>import("./pwa-camera-modal.entry-DsIKdeER.js"),[]).then(l,Os);case"pwa-toast":return zt(()=>import("./pwa-toast.entry-CcekhpsQ.js"),[]).then(l,Os);case"pwa-camera-modal-instance":return zt(()=>import("./pwa-camera-modal-instance.entry-CqzEkkUC.js"),[]).then(l,Os);case"pwa-camera":return zt(()=>import("./pwa-camera.entry-D7dGyTQl.js"),[]).then(l,Os)}}return zt(()=>import("./".concat(s,".entry.js").concat("")),[]).then((function(u){return Dm.set(s,u),u[r]}),Os)},zh=new Map,If=typeof window<"u"?window:{},Ms=If.document||{head:{}},zn={$flags$:0,$resourcesUrl$:"",jmp:function(n){return n()},raf:function(n){return requestAnimationFrame(n)},ael:function(n,e,t,r){return n.addEventListener(e,t,r)},rel:function(n,e,t,r){return n.removeEventListener(e,t,r)},ce:function(n,e){return new CustomEvent(n,e)}},II=function(n){return Promise.resolve(n)},UP=(function(){try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Qw=[],bI=[],$P=function(n,e){return function(t){n.push(t),Eg||(Eg=!0,zn.$flags$&4?Ey(xg):zn.raf(xg))}},Yw=function(n){for(var e=0;e<n.length;e++)try{n[e](performance.now())}catch(t){Os(t)}n.length=0},xg=function(){Yw(Qw),Yw(bI),(Eg=Qw.length>0)&&zn.raf(xg)},Ey=function(n){return II().then(n)},zP=$P(bI),BP=function(){return II()},qP=function(n,e){return typeof window>"u"?Promise.resolve():BP().then((function(){return OP([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],e)}))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var n=HTMLElement;window.HTMLElement=function(){return Reflect.construct(n,[],this.constructor)},HTMLElement.prototype=n.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,n)}})();var Jw="popstate";function HP(n={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return Bh("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Bl(s)}return SI(e,t,null,n)}function GP(n={}){function e(s,o){let{pathname:l="/",search:u="",hash:d=""}=Ua(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Bh("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=s.location.href,p=d.indexOf("#");u=p===-1?d:d.slice(0,p)}return u+"#"+(typeof o=="string"?o:Bl(o))}function r(s,o){ss(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return SI(e,t,r,n)}function an(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ss(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KP(){return Math.random().toString(36).substring(2,10)}function Xw(n,e){return{usr:n.state,key:n.key,idx:e}}function Bh(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ua(e):e,state:t,key:e&&e.key||r||KP()}}function Bl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ua(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function SI(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",d=null,p=y();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function y(){return(l.state||{idx:null}).idx}function _(){u="POP";let D=y(),X=D==null?null:D-p;p=D,d&&d({action:u,location:M.location,delta:X})}function T(D,X){u="PUSH";let W=Bh(M.location,D,X);t&&t(W,D),p=y()+1;let Q=Xw(W,p),ae=M.createHref(W);try{l.pushState(Q,"",ae)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;s.location.assign(ae)}o&&d&&d({action:u,location:M.location,delta:1})}function S(D,X){u="REPLACE";let W=Bh(M.location,D,X);t&&t(W,D),p=y();let Q=Xw(W,p),ae=M.createHref(W);l.replaceState(Q,"",ae),o&&d&&d({action:u,location:M.location,delta:0})}function P(D){return WP(D)}let M={get action(){return u},get location(){return n(s,l)},listen(D){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Jw,_),d=D,()=>{s.removeEventListener(Jw,_),d=null}},createHref(D){return e(s,D)},createURL:P,encodeLocation(D){let X=P(D);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:T,replace:S,go(D){return l.go(D)}};return M}function WP(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),an(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Bl(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function kI(n,e,t="/"){return QP(n,e,t,!1)}function QP(n,e,t,r){let s=typeof e=="string"?Ua(e):e,o=Oi(s.pathname||"/",t);if(o==null)return null;let l=RI(n);YP(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let p=aN(o);u=iN(l[d],p,r)}return u}function RI(n,e=[],t=[],r="",s=!1){let o=(l,u,d=s,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&d)return;an(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let _=Pi([r,y.relativePath]),T=t.concat(y);l.children&&l.children.length>0&&(an(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),RI(l.children,e,T,_,d)),!(l.path==null&&!l.index)&&e.push({path:_,score:rN(_,l.index),routesMeta:T})};return n.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of AI(l.path))o(l,u,!0,d)}),e}function AI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=AI(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function YP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:sN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var JP=/^:[\w-]+$/,XP=3,ZP=2,eN=1,tN=10,nN=-2,Zw=n=>n==="*";function rN(n,e){let t=n.split("/"),r=t.length;return t.some(Zw)&&(r+=nN),e&&(r+=ZP),t.filter(s=>!Zw(s)).reduce((s,o)=>s+(JP.test(o)?XP:o===""?eN:tN),r)}function sN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function iN(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],p=u===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",_=qh({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),T=d.route;if(!_&&p&&t&&!r[r.length-1].route.index&&(_=qh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!_)return null;Object.assign(s,_.params),l.push({params:s,pathname:Pi([o,_.pathname]),pathnameBase:dN(Pi([o,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(o=Pi([o,_.pathnameBase]))}return l}function qh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=oN(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:_},T)=>{if(y==="*"){let P=u[T]||"";l=o.slice(0,o.length-P.length).replace(/(.)\/+$/,"$1")}const S=u[T];return _&&!S?p[y]=void 0:p[y]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function oN(n,e=!1,t=!0){ss(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function aN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ss(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Oi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var CI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lN=n=>CI.test(n);function cN(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ua(n):n,o;if(t)if(lN(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),ss(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=eE(t.substring(1),"/"):o=eE(t,e)}else o=e;return{pathname:o,search:hN(r),hash:fN(s)}}function eE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Om(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ty(n){let e=uN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function xy(n,e,t,r=!1){let s;typeof n=="string"?s=Ua(n):(s={...n},an(!s.pathname||!s.pathname.includes("?"),Om("?","pathname","search",s)),an(!s.pathname||!s.pathname.includes("#"),Om("#","pathname","hash",s)),an(!s.search||!s.search.includes("#"),Om("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let _=e.length-1;if(!r&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),_-=1;s.pathname=T.join("/")}u=_>=0?e[_]:"/"}let d=cN(s,u),p=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var Pi=n=>n.join("/").replace(/\/\/+/g,"/"),dN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),hN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,fN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,pN=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function mN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function gN(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var PI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function NI(n,e){let t=n;if(typeof t!="string"||!CI.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(PI)try{let o=new URL(window.location.href),l=t.startsWith("//")?new URL(o.protocol+t):new URL(t),u=Oi(l.pathname,e);l.origin===o.origin&&u!=null?t=u+l.search+l.hash:s=!0}catch{ss(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var DI=["POST","PUT","PATCH","DELETE"];new Set(DI);var yN=["GET",...DI];new Set(yN);var ic=j.createContext(null);ic.displayName="DataRouter";var bf=j.createContext(null);bf.displayName="DataRouterState";var vN=j.createContext(!1),OI=j.createContext({isTransitioning:!1});OI.displayName="ViewTransition";var _N=j.createContext(new Map);_N.displayName="Fetchers";var wN=j.createContext(null);wN.displayName="Await";var os=j.createContext(null);os.displayName="Navigation";var ju=j.createContext(null);ju.displayName="Location";var Vs=j.createContext({outlet:null,matches:[],isDataRoute:!1});Vs.displayName="Route";var Iy=j.createContext(null);Iy.displayName="RouteError";var MI="REACT_ROUTER_ERROR",EN="REDIRECT",TN="ROUTE_ERROR_RESPONSE";function xN(n){if(n.startsWith(`${MI}:${EN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function IN(n){if(n.startsWith(`${MI}:${TN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new pN(e.status,e.statusText,e.data)}catch{}}function bN(n,{relative:e}={}){an(oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(os),{hash:s,pathname:o,search:l}=Vu(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Pi([t,o])),r.createHref({pathname:u,search:l,hash:s})}function oc(){return j.useContext(ju)!=null}function Fs(){return an(oc(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(ju).location}var LI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jI(n){j.useContext(os).static||j.useLayoutEffect(n)}function $a(){let{isDataRoute:n}=j.useContext(Vs);return n?VN():SN()}function SN(){an(oc(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(ic),{basename:e,navigator:t}=j.useContext(os),{matches:r}=j.useContext(Vs),{pathname:s}=Fs(),o=JSON.stringify(Ty(r)),l=j.useRef(!1);return jI(()=>{l.current=!0}),j.useCallback((d,p={})=>{if(ss(l.current,LI),!l.current)return;if(typeof d=="number"){t.go(d);return}let y=xy(d,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Pi([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,o,s,n])}j.createContext(null);function wz(){let{matches:n}=j.useContext(Vs),e=n[n.length-1];return e?e.params:{}}function Vu(n,{relative:e}={}){let{matches:t}=j.useContext(Vs),{pathname:r}=Fs(),s=JSON.stringify(Ty(t));return j.useMemo(()=>xy(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function kN(n,e){return VI(n,e)}function VI(n,e,t,r,s){an(oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(os),{matches:l}=j.useContext(Vs),u=l[l.length-1],d=u?u.params:{},p=u?u.pathname:"/",y=u?u.pathnameBase:"/",_=u&&u.route;{let W=_&&_.path||"";UI(p,!_||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let T=Fs(),S;if(e){let W=typeof e=="string"?Ua(e):e;an(y==="/"||W.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${W.pathname}" was given in the \`location\` prop.`),S=W}else S=T;let P=S.pathname||"/",M=P;if(y!=="/"){let W=y.replace(/^\//,"").split("/");M="/"+P.replace(/^\//,"").split("/").slice(W.length).join("/")}let D=kI(n,{pathname:M});ss(_||D!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),ss(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=NN(D&&D.map(W=>Object.assign({},W,{params:Object.assign({},d,W.params),pathname:Pi([y,o.encodeLocation?o.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?y:Pi([y,o.encodeLocation?o.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),l,t,r,s);return e&&X?j.createElement(ju.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},X):X}function RN(){let n=jN(),e=mN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,l)}var AN=j.createElement(RN,null),FI=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=IN(n.digest);t&&(n=t)}let e=n!==void 0?j.createElement(Vs.Provider,{value:this.props.routeContext},j.createElement(Iy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?j.createElement(CN,{error:n},e):e}};FI.contextType=vN;var Mm=new WeakMap;function CN({children:n,error:e}){let{basename:t}=j.useContext(os);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=xN(e.digest);if(r){let s=Mm.get(e);if(s)throw s;let o=NI(r.location,t);if(PI&&!Mm.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Mm.set(e,l),l}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return n}function PN({routeContext:n,match:e,children:t}){let r=j.useContext(ic);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Vs.Provider,{value:n},t)}function NN(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let y=o.findIndex(_=>_.route.id&&l?.[_.route.id]!==void 0);an(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let u=!1,d=-1;if(t)for(let y=0;y<o.length;y++){let _=o[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(d=y),_.route.id){let{loaderData:T,errors:S}=t,P=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!S||S[_.route.id]===void 0);if(_.route.lazy||P){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let p=t&&r?(y,_)=>{r(y,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:gN(t.matches),errorInfo:_})}:void 0;return o.reduceRight((y,_,T)=>{let S,P=!1,M=null,D=null;t&&(S=l&&_.route.id?l[_.route.id]:void 0,M=_.route.errorElement||AN,u&&(d<0&&T===0?(UI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,D=null):d===T&&(P=!0,D=_.route.hydrateFallbackElement||null)));let X=e.concat(o.slice(0,T+1)),W=()=>{let Q;return S?Q=M:P?Q=D:_.route.Component?Q=j.createElement(_.route.Component,null):_.route.element?Q=_.route.element:Q=y,j.createElement(PN,{match:_,routeContext:{outlet:y,matches:X,isDataRoute:t!=null},children:Q})};return t&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?j.createElement(FI,{location:t.location,revalidation:t.revalidation,component:M,error:S,children:W(),routeContext:{outlet:null,matches:X,isDataRoute:!0},onError:p}):W()},null)}function by(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DN(n){let e=j.useContext(ic);return an(e,by(n)),e}function ON(n){let e=j.useContext(bf);return an(e,by(n)),e}function MN(n){let e=j.useContext(Vs);return an(e,by(n)),e}function Sy(n){let e=MN(n),t=e.matches[e.matches.length-1];return an(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function LN(){return Sy("useRouteId")}function jN(){let n=j.useContext(Iy),e=ON("useRouteError"),t=Sy("useRouteError");return n!==void 0?n:e.errors?.[t]}function VN(){let{router:n}=DN("useNavigate"),e=Sy("useNavigate"),t=j.useRef(!1);return jI(()=>{t.current=!0}),j.useCallback(async(s,o={})=>{ss(t.current,LI),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var tE={};function UI(n,e,t){!e&&!tE[n]&&(tE[n]=!0,ss(!1,t))}j.memo(FN);function FN({routes:n,future:e,state:t,onError:r}){return VI(n,void 0,t,r,e)}function $I({to:n,replace:e,state:t,relative:r}){an(oc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(os);ss(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=j.useContext(Vs),{pathname:l}=Fs(),u=$a(),d=xy(n,Ty(o),l,r==="path"),p=JSON.stringify(d);return j.useEffect(()=>{u(JSON.parse(p),{replace:e,state:t,relative:r})},[u,p,r,e,t]),null}function Fn(n){an(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zI({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1,unstable_useTransitions:l}){an(!oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:l,future:{}}),[u,s,o,l]);typeof t=="string"&&(t=Ua(t));let{pathname:p="/",search:y="",hash:_="",state:T=null,key:S="default"}=t,P=j.useMemo(()=>{let M=Oi(p,u);return M==null?null:{location:{pathname:M,search:y,hash:_,state:T,key:S},navigationType:r}},[u,p,y,_,T,S,r]);return ss(P!=null,`<Router basename="${u}"> is not able to match the URL "${p}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:j.createElement(os.Provider,{value:d},j.createElement(ju.Provider,{children:e,value:P}))}function UN({children:n,location:e}){return kN(Ig(n),e)}function Ig(n,e=[]){let t=[];return j.Children.forEach(n,(r,s)=>{if(!j.isValidElement(r))return;let o=[...e,s];if(r.type===j.Fragment){t.push.apply(t,Ig(r.props.children,o));return}an(r.type===Fn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),an(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Ig(r.props.children,o)),t.push(l)}),t}var Ih="get",bh="application/x-www-form-urlencoded";function Sf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function $N(n){return Sf(n)&&n.tagName.toLowerCase()==="button"}function zN(n){return Sf(n)&&n.tagName.toLowerCase()==="form"}function BN(n){return Sf(n)&&n.tagName.toLowerCase()==="input"}function qN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function HN(n,e){return n.button===0&&(!e||e==="_self")&&!qN(n)}var lh=null;function GN(){if(lh===null)try{new FormData(document.createElement("form"),0),lh=!1}catch{lh=!0}return lh}var KN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lm(n){return n!=null&&!KN.has(n)?(ss(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bh}"`),null):n}function WN(n,e){let t,r,s,o,l;if(zN(n)){let u=n.getAttribute("action");r=u?Oi(u,e):null,t=n.getAttribute("method")||Ih,s=Lm(n.getAttribute("enctype"))||bh,o=new FormData(n)}else if($N(n)||BN(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(r=d?Oi(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Ih,s=Lm(n.getAttribute("formenctype"))||Lm(u.getAttribute("enctype"))||bh,o=new FormData(u,n),!GN()){let{name:p,type:y,value:_}=n;if(y==="image"){let T=p?`${p}.`:"";o.append(`${T}x`,"0"),o.append(`${T}y`,"0")}else p&&o.append(p,_)}}else{if(Sf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ih,r=null,s=bh,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ky(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function QN(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Oi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function YN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function JN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function XN(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await YN(o,t);return l.links?l.links():[]}return[]}));return n2(r.flat(1).filter(JN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function nE(n,e,t,r,s,o){let l=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,u=(d,p)=>t[p].pathname!==d.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,p)=>l(d,p)||u(d,p)):o==="data"?e.filter((d,p)=>{let y=r.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(l(d,p)||u(d,p))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function ZN(n,e,{includeHydrateFallback:t}={}){return e2(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function e2(n){return[...new Set(n)]}function t2(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function n2(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(t2(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function BI(){let n=j.useContext(ic);return ky(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function r2(){let n=j.useContext(bf);return ky(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ry=j.createContext(void 0);Ry.displayName="FrameworkContext";function qI(){let n=j.useContext(Ry);return ky(n,"You must render this element inside a <HydratedRouter> element"),n}function s2(n,e){let t=j.useContext(Ry),[r,s]=j.useState(!1),[o,l]=j.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:_}=e,T=j.useRef(null);j.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let M=X=>{X.forEach(W=>{l(W.isIntersecting)})},D=new IntersectionObserver(M,{threshold:.5});return T.current&&D.observe(T.current),()=>{D.disconnect()}}},[n]),j.useEffect(()=>{if(r){let M=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(M)}}},[r]);let S=()=>{s(!0)},P=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,T,{}]:[o,T,{onFocus:Hc(u,S),onBlur:Hc(d,P),onMouseEnter:Hc(p,S),onMouseLeave:Hc(y,P),onTouchStart:Hc(_,S)}]:[!1,T,{}]}function Hc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function i2({page:n,...e}){let{router:t}=BI(),r=j.useMemo(()=>kI(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?j.createElement(a2,{page:n,matches:r,...e}):null}function o2(n){let{manifest:e,routeModules:t}=qI(),[r,s]=j.useState([]);return j.useEffect(()=>{let o=!1;return XN(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function a2({page:n,matches:e,...t}){let r=Fs(),{manifest:s,routeModules:o}=qI(),{basename:l}=BI(),{loaderData:u,matches:d}=r2(),p=j.useMemo(()=>nE(n,e,d,s,r,"data"),[n,e,d,s,r]),y=j.useMemo(()=>nE(n,e,d,s,r,"assets"),[n,e,d,s,r]),_=j.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let P=new Set,M=!1;if(e.forEach(X=>{let W=s.routes[X.route.id];!W||!W.hasLoader||(!p.some(Q=>Q.route.id===X.route.id)&&X.route.id in u&&o[X.route.id]?.shouldRevalidate||W.hasClientLoader?M=!0:P.add(X.route.id))}),P.size===0)return[];let D=QN(n,l,"data");return M&&P.size>0&&D.searchParams.set("_routes",e.filter(X=>P.has(X.route.id)).map(X=>X.route.id).join(",")),[D.pathname+D.search]},[l,u,r,s,p,e,n,o]),T=j.useMemo(()=>ZN(y,s),[y,s]),S=o2(y);return j.createElement(j.Fragment,null,_.map(P=>j.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),T.map(P=>j.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),S.map(({key:P,link:M})=>j.createElement("link",{key:P,nonce:t.nonce,...M})))}function l2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var c2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{c2&&(window.__reactRouterVersion="7.11.0")}catch{}function u2({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=j.useRef();s.current==null&&(s.current=HP({window:r,v5Compat:!0}));let o=s.current,[l,u]=j.useState({action:o.action,location:o.location}),d=j.useCallback(p=>{t===!1?u(p):j.startTransition(()=>u(p))},[t]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.createElement(zI,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:t})}function d2({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=j.useRef();s.current==null&&(s.current=GP({window:r,v5Compat:!0}));let o=s.current,[l,u]=j.useState({action:o.action,location:o.location}),d=j.useCallback(p=>{t===!1?u(p):j.startTransition(()=>u(p))},[t]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.createElement(zI,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:t})}var HI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GI=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:p,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:T,...S},P){let{basename:M,unstable_useTransitions:D}=j.useContext(os),X=typeof p=="string"&&HI.test(p),W=NI(p,M);p=W.to;let Q=bN(p,{relative:s}),[ae,de,me]=s2(r,S),N=m2(p,{replace:l,state:u,target:d,preventScrollReset:y,relative:s,viewTransition:_,unstable_defaultShouldRevalidate:T,unstable_useTransitions:D});function I(k){e&&e(k),k.defaultPrevented||N(k)}let A=j.createElement("a",{...S,...me,href:W.absoluteURL||Q,onClick:W.isExternal||o?e:I,ref:l2(P,de),target:d,"data-discover":!X&&t==="render"?"true":void 0});return ae&&!X?j.createElement(j.Fragment,null,A,j.createElement(i2,{page:Q})):A});GI.displayName="Link";var h2=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...p},y){let _=Vu(l,{relative:p.relative}),T=Fs(),S=j.useContext(bf),{navigator:P,basename:M}=j.useContext(os),D=S!=null&&w2(_)&&u===!0,X=P.encodeLocation?P.encodeLocation(_).pathname:_.pathname,W=T.pathname,Q=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(W=W.toLowerCase(),Q=Q?Q.toLowerCase():null,X=X.toLowerCase()),Q&&M&&(Q=Oi(Q,M)||Q);const ae=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let de=W===X||!s&&W.startsWith(X)&&W.charAt(ae)==="/",me=Q!=null&&(Q===X||!s&&Q.startsWith(X)&&Q.charAt(X.length)==="/"),N={isActive:de,isPending:me,isTransitioning:D},I=de?e:void 0,A;typeof r=="function"?A=r(N):A=[r,de?"active":null,me?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(N):o;return j.createElement(GI,{...p,"aria-current":I,className:A,ref:y,style:k,to:l,viewTransition:u},typeof d=="function"?d(N):d)});h2.displayName="NavLink";var f2=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=Ih,action:u,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:T,...S},P)=>{let{unstable_useTransitions:M}=j.useContext(os),D=v2(),X=_2(u,{relative:p}),W=l.toLowerCase()==="get"?"get":"post",Q=typeof u=="string"&&HI.test(u),ae=de=>{if(d&&d(de),de.defaultPrevented)return;de.preventDefault();let me=de.nativeEvent.submitter,N=me?.getAttribute("formmethod")||l,I=()=>D(me||de.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:s,state:o,relative:p,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:T});M&&t!==!1?j.startTransition(()=>I()):I()};return j.createElement("form",{ref:P,method:W,action:X,onSubmit:r?d:ae,...S,"data-discover":!Q&&n==="render"?"true":void 0})});f2.displayName="Form";function p2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KI(n){let e=j.useContext(ic);return an(e,p2(n)),e}function m2(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let p=$a(),y=Fs(),_=Vu(n,{relative:o});return j.useCallback(T=>{if(HN(T,e)){T.preventDefault();let S=t!==void 0?t:Bl(y)===Bl(_),P=()=>p(n,{replace:S,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});d?j.startTransition(()=>P()):P()}},[y,p,_,t,r,e,n,s,o,l,u,d])}var g2=0,y2=()=>`__${String(++g2)}__`;function v2(){let{router:n}=KI("useSubmit"),{basename:e}=j.useContext(os),t=LN(),r=n.fetch,s=n.navigate;return j.useCallback(async(o,l={})=>{let{action:u,method:d,encType:p,formData:y,body:_}=WN(o,e);if(l.navigate===!1){let T=l.fetcherKey||y2();await r(T,t,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:y,body:_,formMethod:l.method||d,formEncType:l.encType||p,flushSync:l.flushSync})}else await s(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:y,body:_,formMethod:l.method||d,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function _2(n,{relative:e}={}){let{basename:t}=j.useContext(os),r=j.useContext(Vs);an(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Vu(n||".",{relative:e})},l=Fs();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(y=>y==="")){u.delete("index"),d.filter(_=>_).forEach(_=>u.append("index",_));let y=u.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Pi([t,o.pathname])),Bl(o)}function w2(n,{relative:e}={}){let t=j.useContext(OI);an(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=KI("useViewTransitionState"),s=Vu(n,{relative:e});if(!t.isTransitioning)return!1;let o=Oi(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Oi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return qh(s.pathname,l)!=null||qh(s.pathname,o)!=null}var cr=(n=>(n.STOREFRONT="storefront",n.ADMIN="admin",n.AI_CONSULTANT="ai_consultant",n.AI_LAB="ai_lab",n.BLOG="blog",n.DIGITAL_GARAGE="digital_garage",n.PRE_QUALIFY="pre_qualify",n.TRADE_IN="trade_in",n.CHAT="chat",n.CODE_ANALYZER="code_analyzer",n.IMAGES="images",n.VIDEO_STUDIO="video_studio",n.VOICE_ASSISTANT="voice_assistant",n.DEVOPS="devops",n.SETTINGS="settings",n))(cr||{}),rE={};const WI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},E2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Ay={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,y=o>>2,_=(o&3)<<4|u>>4;let T=(u&15)<<2|p>>6,S=p&63;d||(S=64,l||(T=64)),r.push(t[y],t[_],t[T],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(WI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):E2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const _=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||p==null||_==null)throw new T2;const T=o<<2|u>>4;if(r.push(T),p!==64){const S=u<<4&240|p>>2;if(r.push(S),_!==64){const P=p<<6&192|_;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class T2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x2=function(n){const e=WI(n);return Ay.encodeByteArray(e,!0)},Hh=function(n){return x2(n).replace(/\./g,"")},QI=function(n){try{return Ay.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function YI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const I2=()=>YI().__FIREBASE_DEFAULTS__,b2=()=>{if(typeof process>"u"||typeof rE>"u")return;const n=rE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},S2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&QI(n[1]);return e&&JSON.parse(e)},kf=()=>{try{return I2()||b2()||S2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},JI=n=>{var e,t;return(t=(e=kf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Cy=n=>{const e=JI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},XI=()=>{var n;return(n=kf())===null||n===void 0?void 0:n.config},ZI=n=>{var e;return(e=kf())===null||e===void 0?void 0:e[`_${n}`]};class vu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function eb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hh(JSON.stringify(t)),Hh(JSON.stringify(l)),""].join(".")}function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function R2(){var n;const e=(n=kf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function C2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function P2(){const n=Cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nb(){return!R2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ac(){try{return typeof indexedDB=="object"}catch{return!1}}function Py(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function rb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const N2="FirebaseError";class as extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=N2,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fi.prototype.create)}}class Fi{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?D2(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new as(s,u,r)}}function D2(n,e){return n.replace(O2,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const O2=/\{\$([^}]+)}/g;function M2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _u(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(sE(o)&&sE(l)){if(!_u(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function sE(n){return n!==null&&typeof n=="object"}function Fu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function eu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function L2(n,e){const t=new j2(n,e);return t.subscribe.bind(t)}class j2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");V2(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=jm),s.error===void 0&&(s.error=jm),s.complete===void 0&&(s.complete=jm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jm(){}const F2=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})};const U2=1e3,$2=2,z2=14400*1e3,B2=.5;function bg(n,e=U2,t=$2){const r=e*Math.pow(t,n),s=Math.round(B2*r*(Math.random()-.5)*2);return Math.min(z2,r+s)}function Vt(n){return n&&n._delegate?n._delegate:n}class fr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ua="[DEFAULT]";class q2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new vu;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G2(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:H2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H2(n){return n===ua?void 0:n}function G2(n){return n.instantiationMode==="EAGER"}class K2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var bt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(bt||(bt={}));const W2={debug:bt.DEBUG,verbose:bt.VERBOSE,info:bt.INFO,warn:bt.WARN,error:bt.ERROR,silent:bt.SILENT},Q2=bt.INFO,Y2={[bt.DEBUG]:"log",[bt.VERBOSE]:"log",[bt.INFO]:"info",[bt.WARN]:"warn",[bt.ERROR]:"error"},J2=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Y2[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lc{constructor(e){this.name=e,this._logLevel=Q2,this._logHandler=J2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,bt.DEBUG,...e),this._logHandler(this,bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,bt.VERBOSE,...e),this._logHandler(this,bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,bt.INFO,...e),this._logHandler(this,bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,bt.WARN,...e),this._logHandler(this,bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,bt.ERROR,...e),this._logHandler(this,bt.ERROR,...e)}}const X2=(n,e)=>e.some(t=>n instanceof t);let iE,oE;function Z2(){return iE||(iE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eD(){return oE||(oE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sb=new WeakMap,Sg=new WeakMap,ib=new WeakMap,Vm=new WeakMap,Ny=new WeakMap;function tD(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(vo(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&sb.set(t,n)}).catch(()=>{}),Ny.set(e,n),e}function nD(n){if(Sg.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Sg.set(n,e)}let kg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Sg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ib.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rD(n){kg=n(kg)}function sD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Fm(this),e,...t);return ib.set(r,e.sort?e.sort():[e]),vo(r)}:eD().includes(n)?function(...e){return n.apply(Fm(this),e),vo(sb.get(this))}:function(...e){return vo(n.apply(Fm(this),e))}}function iD(n){return typeof n=="function"?sD(n):(n instanceof IDBTransaction&&nD(n),X2(n,Z2())?new Proxy(n,kg):n)}function vo(n){if(n instanceof IDBRequest)return tD(n);if(Vm.has(n))return Vm.get(n);const e=iD(n);return e!==n&&(Vm.set(n,e),Ny.set(e,n)),e}const Fm=n=>Ny.get(n);function ob(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=vo(l);return r&&l.addEventListener("upgradeneeded",d=>{r(vo(l.result),d.oldVersion,d.newVersion,vo(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const oD=["get","getKey","getAll","getAllKeys","count"],aD=["put","add","delete","clear"],Um=new Map;function aE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Um.get(e))return Um.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=aD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oD.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[t](...u),s&&d.done]))[0]};return Um.set(e,o),o}rD(n=>({...n,get:(e,t,r)=>aE(e,t)||n.get(e,t,r),has:(e,t)=>!!aE(e,t)||n.has(e,t)}));class lD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function cD(n){const e=n.getComponent();return e?.type==="VERSION"}const Rg="@firebase/app",lE="0.10.13";const Mi=new lc("@firebase/app"),uD="@firebase/app-compat",dD="@firebase/analytics-compat",hD="@firebase/analytics",fD="@firebase/app-check-compat",pD="@firebase/app-check",mD="@firebase/auth",gD="@firebase/auth-compat",yD="@firebase/database",vD="@firebase/data-connect",_D="@firebase/database-compat",wD="@firebase/functions",ED="@firebase/functions-compat",TD="@firebase/installations",xD="@firebase/installations-compat",ID="@firebase/messaging",bD="@firebase/messaging-compat",SD="@firebase/performance",kD="@firebase/performance-compat",RD="@firebase/remote-config",AD="@firebase/remote-config-compat",CD="@firebase/storage",PD="@firebase/storage-compat",ND="@firebase/firestore",DD="@firebase/vertexai-preview",OD="@firebase/firestore-compat",MD="firebase",LD="10.14.1";const Ag="[DEFAULT]",jD={[Rg]:"fire-core",[uD]:"fire-core-compat",[hD]:"fire-analytics",[dD]:"fire-analytics-compat",[pD]:"fire-app-check",[fD]:"fire-app-check-compat",[mD]:"fire-auth",[gD]:"fire-auth-compat",[yD]:"fire-rtdb",[vD]:"fire-data-connect",[_D]:"fire-rtdb-compat",[wD]:"fire-fn",[ED]:"fire-fn-compat",[TD]:"fire-iid",[xD]:"fire-iid-compat",[ID]:"fire-fcm",[bD]:"fire-fcm-compat",[SD]:"fire-perf",[kD]:"fire-perf-compat",[RD]:"fire-rc",[AD]:"fire-rc-compat",[CD]:"fire-gcs",[PD]:"fire-gcs-compat",[ND]:"fire-fst",[OD]:"fire-fst-compat",[DD]:"fire-vertex","fire-js":"fire-js",[MD]:"fire-js-all"};const Gh=new Map,VD=new Map,Cg=new Map;function cE(n,e){try{n.container.addComponent(e)}catch(t){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sr(n){const e=n.name;if(Cg.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;Cg.set(e,n);for(const t of Gh.values())cE(t,n);for(const t of VD.values())cE(t,n);return!0}function Es(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ls(n){return n.settings!==void 0}const FD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_o=new Fi("app","Firebase",FD);class UD{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}}const za=LD;function ab(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ag,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw _o.create("bad-app-name",{appName:String(s)});if(t||(t=XI()),!t)throw _o.create("no-options");const o=Gh.get(s);if(o){if(_u(t,o.options)&&_u(r,o.config))return o;throw _o.create("duplicate-app",{appName:s})}const l=new K2(s);for(const d of Cg.values())l.addComponent(d);const u=new UD(t,r,l);return Gh.set(s,u),u}function Ba(n=Ag){const e=Gh.get(n);if(!e&&n===Ag&&XI())return ab();if(!e)throw _o.create("no-app",{appName:n});return e}function Rn(n,e,t){var r;let s=(r=jD[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(u.join(" "));return}Sr(new fr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const $D="firebase-heartbeat-database",zD=1,wu="firebase-heartbeat-store";let $m=null;function lb(){return $m||($m=ob($D,zD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wu)}catch(t){console.warn(t)}}}}).catch(n=>{throw _o.create("idb-open",{originalErrorMessage:n.message})})),$m}async function BD(n){try{const t=(await lb()).transaction(wu),r=await t.objectStore(wu).get(cb(n));return await t.done,r}catch(e){if(e instanceof as)Mi.warn(e.message);else{const t=_o.create("idb-get",{originalErrorMessage:e?.message});Mi.warn(t.message)}}}async function uE(n,e){try{const r=(await lb()).transaction(wu,"readwrite");await r.objectStore(wu).put(e,cb(n)),await r.done}catch(t){if(t instanceof as)Mi.warn(t.message);else{const r=_o.create("idb-set",{originalErrorMessage:t?.message});Mi.warn(r.message)}}}function cb(n){return`${n.name}!${n.options.appId}`}const qD=1024,HD=720*60*60*1e3;class GD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=dE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const u=new Date(l.date).valueOf();return Date.now()-u<=HD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=dE(),{heartbeatsToSend:r,unsentEntries:s}=KD(this._heartbeatsCache.heartbeats),o=Hh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Mi.warn(t),""}}}function dE(){return new Date().toISOString().substring(0,10)}function KD(n,e=qD){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),hE(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),hE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class WD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ac()?Py().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await BD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return uE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return uE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function hE(n){return Hh(JSON.stringify({version:2,heartbeats:n})).length}function QD(n){Sr(new fr("platform-logger",e=>new lD(e),"PRIVATE")),Sr(new fr("heartbeat",e=>new GD(e),"PRIVATE")),Rn(Rg,lE,n),Rn(Rg,lE,"esm2017"),Rn("fire-js","")}QD("");var YD="firebase",JD="10.14.1";Rn(YD,JD,"app");const ub="@firebase/installations",Dy="0.6.9";const db=1e4,hb=`w:${Dy}`,fb="FIS_v2",XD="https://firebaseinstallations.googleapis.com/v1",ZD=3600*1e3,eO="installations",tO="Installations";const nO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ia=new Fi(eO,tO,nO);function pb(n){return n instanceof as&&n.code.includes("request-failed")}function mb({projectId:n}){return`${XD}/projects/${n}/installations`}function gb(n){return{token:n.token,requestStatus:2,expiresIn:sO(n.expiresIn),creationTime:Date.now()}}async function yb(n,e){const r=(await e.json()).error;return Ia.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function vb({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function rO(n,{refreshToken:e}){const t=vb(n);return t.append("Authorization",iO(e)),t}async function _b(n){const e=await n();return e.status>=500&&e.status<600?n():e}function sO(n){return Number(n.replace("s","000"))}function iO(n){return`${fb} ${n}`}async function oO({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=mb(n),s=vb(n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:t,authVersion:fb,appId:n.appId,sdkVersion:hb},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await _b(()=>fetch(r,u));if(d.ok){const p=await d.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:gb(p.authToken)}}else throw await yb("Create Installation",d)}function wb(n){return new Promise(e=>{setTimeout(e,n)})}function aO(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const lO=/^[cdef][\w-]{21}$/,Pg="";function cO(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=uO(n);return lO.test(t)?t:Pg}catch{return Pg}}function uO(n){return aO(n).substr(0,22)}function Rf(n){return`${n.appName}!${n.appId}`}const Eb=new Map;function Tb(n,e){const t=Rf(n);xb(t,e),dO(t,e)}function xb(n,e){const t=Eb.get(n);if(t)for(const r of t)r(e)}function dO(n,e){const t=hO();t&&t.postMessage({key:n,fid:e}),fO()}let ya=null;function hO(){return!ya&&"BroadcastChannel"in self&&(ya=new BroadcastChannel("[Firebase] FID Change"),ya.onmessage=n=>{xb(n.data.key,n.data.fid)}),ya}function fO(){Eb.size===0&&ya&&(ya.close(),ya=null)}const pO="firebase-installations-database",mO=1,ba="firebase-installations-store";let zm=null;function Oy(){return zm||(zm=ob(pO,mO,{upgrade:(n,e)=>{e===0&&n.createObjectStore(ba)}})),zm}async function Kh(n,e){const t=Rf(n),s=(await Oy()).transaction(ba,"readwrite"),o=s.objectStore(ba),l=await o.get(t);return await o.put(e,t),await s.done,(!l||l.fid!==e.fid)&&Tb(n,e.fid),e}async function Ib(n){const e=Rf(n),r=(await Oy()).transaction(ba,"readwrite");await r.objectStore(ba).delete(e),await r.done}async function Af(n,e){const t=Rf(n),s=(await Oy()).transaction(ba,"readwrite"),o=s.objectStore(ba),l=await o.get(t),u=e(l);return u===void 0?await o.delete(t):await o.put(u,t),await s.done,u&&(!l||l.fid!==u.fid)&&Tb(n,u.fid),u}async function My(n){let e;const t=await Af(n.appConfig,r=>{const s=gO(r),o=yO(n,s);return e=o.registrationPromise,o.installationEntry});return t.fid===Pg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function gO(n){const e=n||{fid:cO(),registrationStatus:0};return bb(e)}function yO(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ia.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=vO(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:_O(n)}:{installationEntry:e}}async function vO(n,e){try{const t=await oO(n,e);return Kh(n.appConfig,t)}catch(t){throw pb(t)&&t.customData.serverCode===409?await Ib(n.appConfig):await Kh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function _O(n){let e=await fE(n.appConfig);for(;e.registrationStatus===1;)await wb(100),e=await fE(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await My(n);return r||t}return e}function fE(n){return Af(n,e=>{if(!e)throw Ia.create("installation-not-found");return bb(e)})}function bb(n){return wO(n)?{fid:n.fid,registrationStatus:0}:n}function wO(n){return n.registrationStatus===1&&n.registrationTime+db<Date.now()}async function EO({appConfig:n,heartbeatServiceProvider:e},t){const r=TO(n,t),s=rO(n,t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:hb,appId:n.appId}},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await _b(()=>fetch(r,u));if(d.ok){const p=await d.json();return gb(p)}else throw await yb("Generate Auth Token",d)}function TO(n,{fid:e}){return`${mb(n)}/${e}/authTokens:generate`}async function Ly(n,e=!1){let t;const r=await Af(n.appConfig,o=>{if(!Sb(o))throw Ia.create("not-registered");const l=o.authToken;if(!e&&bO(l))return o;if(l.requestStatus===1)return t=xO(n,e),o;{if(!navigator.onLine)throw Ia.create("app-offline");const u=kO(o);return t=IO(n,u),u}});return t?await t:r.authToken}async function xO(n,e){let t=await pE(n.appConfig);for(;t.authToken.requestStatus===1;)await wb(100),t=await pE(n.appConfig);const r=t.authToken;return r.requestStatus===0?Ly(n,e):r}function pE(n){return Af(n,e=>{if(!Sb(e))throw Ia.create("not-registered");const t=e.authToken;return RO(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function IO(n,e){try{const t=await EO(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Kh(n.appConfig,r),t}catch(t){if(pb(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Ib(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Kh(n.appConfig,r)}throw t}}function Sb(n){return n!==void 0&&n.registrationStatus===2}function bO(n){return n.requestStatus===2&&!SO(n)}function SO(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+ZD}function kO(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function RO(n){return n.requestStatus===1&&n.requestTime+db<Date.now()}async function AO(n){const e=n,{installationEntry:t,registrationPromise:r}=await My(e);return r?r.catch(console.error):Ly(e).catch(console.error),t.fid}async function CO(n,e=!1){const t=n;return await PO(t),(await Ly(t,e)).token}async function PO(n){const{registrationPromise:e}=await My(n);e&&await e}function NO(n){if(!n||!n.options)throw Bm("App Configuration");if(!n.name)throw Bm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Bm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Bm(n){return Ia.create("missing-app-config-values",{valueName:n})}const kb="installations",DO="installations-internal",OO=n=>{const e=n.getProvider("app").getImmediate(),t=NO(e),r=Es(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},MO=n=>{const e=n.getProvider("app").getImmediate(),t=Es(e,kb).getImmediate();return{getId:()=>AO(t),getToken:s=>CO(t,s)}};function LO(){Sr(new fr(kb,OO,"PUBLIC")),Sr(new fr(DO,MO,"PRIVATE"))}LO();Rn(ub,Dy);Rn(ub,Dy,"esm2017");const Wh="analytics",jO="firebase_id",VO="origin",FO=60*1e3,UO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jy="https://www.googletagmanager.com/gtag/js";const qr=new lc("@firebase/analytics");const $O={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ns=new Fi("analytics","Analytics",$O);function zO(n){if(!n.startsWith(jy)){const e=ns.create("invalid-gtag-resource",{gtagURL:n});return qr.warn(e.message),""}return n}function Rb(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function BO(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function qO(n,e){const t=BO("firebase-js-sdk-policy",{createScriptURL:zO}),r=document.createElement("script"),s=`${jy}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function HO(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function GO(n,e,t,r,s,o){const l=r[s];try{if(l)await e[l];else{const d=(await Rb(t)).find(p=>p.measurementId===s);d&&await e[d.appId]}}catch(u){qr.error(u)}n("config",s,o)}async function KO(n,e,t,r,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const u=await Rb(t);for(const d of l){const p=u.find(_=>_.measurementId===d),y=p&&e[p.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,s||{})}catch(o){qr.error(o)}}function WO(n,e,t,r){async function s(o,...l){try{if(o==="event"){const[u,d]=l;await KO(n,e,t,u,d)}else if(o==="config"){const[u,d]=l;await GO(n,e,t,r,u,d)}else if(o==="consent"){const[u,d]=l;n("consent",u,d)}else if(o==="get"){const[u,d,p]=l;n("get",u,d,p)}else if(o==="set"){const[u]=l;n("set",u)}else n(o,...l)}catch(u){qr.error(u)}}return s}function QO(n,e,t,r,s){let o=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=WO(o,n,e,t),{gtagCore:o,wrappedGtag:window[s]}}function YO(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(jy)&&t.src.includes(n))return t;return null}const JO=30,XO=1e3;class ZO{constructor(e={},t=XO){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ab=new ZO;function eM(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function tM(n){var e;const{appId:t,apiKey:r}=n,s={method:"GET",headers:eM(r)},o=UO.replace("{app-id}",t),l=await fetch(o,s);if(l.status!==200&&l.status!==304){let u="";try{const d=await l.json();!((e=d.error)===null||e===void 0)&&e.message&&(u=d.error.message)}catch{}throw ns.create("config-fetch-failed",{httpStatus:l.status,responseMessage:u})}return l.json()}async function nM(n,e=Ab,t){const{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw ns.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw ns.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new iM;return setTimeout(async()=>{u.abort()},FO),Cb({appId:r,apiKey:s,measurementId:o},l,u,e)}async function Cb(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=Ab){var o;const{appId:l,measurementId:u}=n;try{await rM(r,e)}catch(d){if(u)return qr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:l,measurementId:u};throw d}try{const d=await tM(n);return s.deleteThrottleMetadata(l),d}catch(d){const p=d;if(!sM(p)){if(s.deleteThrottleMetadata(l),u)return qr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:u};throw d}const y=Number((o=p?.customData)===null||o===void 0?void 0:o.httpStatus)===503?bg(t,s.intervalMillis,JO):bg(t,s.intervalMillis),_={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return s.setThrottleMetadata(l,_),qr.debug(`Calling attemptFetch again in ${y} millis`),Cb(n,_,r,s)}}function rM(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(o),r(ns.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sM(n){if(!(n instanceof as)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class iM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function oM(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const o=await e,l=Object.assign(Object.assign({},r),{send_to:o});n("event",t,l)}}async function aM(){if(ac())try{await Py()}catch(n){return qr.warn(ns.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return qr.warn(ns.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function lM(n,e,t,r,s,o,l){var u;const d=nM(n);d.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&qr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>qr.error(S)),e.push(d);const p=aM().then(S=>{if(S)return r.getId()}),[y,_]=await Promise.all([d,p]);YO(o)||qO(o,y.measurementId),s("js",new Date);const T=(u=l?.config)!==null&&u!==void 0?u:{};return T[VO]="firebase",T.update=!0,_!=null&&(T[jO]=_),s("config",y.measurementId,T),y.measurementId}class cM{constructor(e){this.app=e}_delete(){return delete ou[this.app.options.appId],Promise.resolve()}}let ou={},mE=[];const gE={};let qm="dataLayer",uM="gtag",yE,Pb,vE=!1;function dM(){const n=[];if(tb()&&n.push("This is a browser extension environment."),rb()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=ns.create("invalid-analytics-context",{errorInfo:e});qr.warn(t.message)}}function hM(n,e,t){dM();const r=n.options.appId;if(!r)throw ns.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)qr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ns.create("no-api-key");if(ou[r]!=null)throw ns.create("already-exists",{id:r});if(!vE){HO(qm);const{wrappedGtag:o,gtagCore:l}=QO(ou,mE,gE,qm,uM);Pb=o,yE=l,vE=!0}return ou[r]=lM(n,mE,gE,e,yE,qm,t),new cM(n)}function Nb(n=Ba()){n=Vt(n);const e=Es(n,Wh);return e.isInitialized()?e.getImmediate():Db(n)}function Db(n,e={}){const t=Es(n,Wh);if(t.isInitialized()){const s=t.getImmediate();if(_u(e,t.getOptions()))return s;throw ns.create("already-initialized")}return t.initialize({options:e})}function Ob(n,e,t,r){n=Vt(n),oM(Pb,ou[n.app.options.appId],e,t,r).catch(s=>qr.error(s))}const _E="@firebase/analytics",wE="0.10.8";function fM(){Sr(new fr(Wh,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return hM(r,s,t)},"PUBLIC")),Sr(new fr("analytics-internal",n,"PRIVATE")),Rn(_E,wE),Rn(_E,wE,"esm2017");function n(e){try{const t=e.getProvider(Wh).getImmediate();return{logEvent:(r,s,o)=>Ob(t,r,s,o)}}catch(t){throw ns.create("interop-component-reg-failed",{reason:t})}}}fM();const Vy=Object.freeze(Object.defineProperty({__proto__:null,getAnalytics:Nb,initializeAnalytics:Db,logEvent:Ob},Symbol.toStringTag,{value:"Module"}));var Ng=function(n,e){return Ng=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])},Ng(n,e)};function Ez(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ng(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Fy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Tz(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xz(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),s,o=[],l;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(u){l={error:u}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return o}function Iz(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function Mb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pM=Mb,Lb=new Fi("auth","Firebase",Mb());const Qh=new lc("@firebase/auth");function mM(n,...e){Qh.logLevel<=bt.WARN&&Qh.warn(`Auth (${za}): ${n}`,...e)}function Sh(n,...e){Qh.logLevel<=bt.ERROR&&Qh.error(`Auth (${za}): ${n}`,...e)}function _s(n,...e){throw $y(n,...e)}function js(n,...e){return $y(n,...e)}function Uy(n,e,t){const r=Object.assign(Object.assign({},pM()),{[e]:t});return new Fi("auth","Firebase",r).create(e,{appName:n.name})}function Ni(n){return Uy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gM(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&_s(n,"argument-error"),Uy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $y(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Lb.create(n,...e)}function at(n,e,...t){if(!n)throw $y(e,...t)}function ki(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sh(e),new Error(e)}function Li(n,e){n||ki(e)}function Dg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function yM(){return EE()==="http:"||EE()==="https:"}function EE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function vM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yM()||tb()||"connection"in navigator)?navigator.onLine:!0}function _M(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Uu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Li(t>e,"Short delay should be less than long delay!"),this.isMobile=k2()||C2()}get(){return vM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zy(n,e){Li(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class jb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const EM=new Uu(3e4,6e4);function Ao(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Co(n,e,t,r,s={}){return Vb(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Fu(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:d},o);return A2()||(p.referrerPolicy="no-referrer"),jb.fetch()(Fb(n,n.config.apiHost,t,u),p)})}async function Vb(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},wM),e);try{const s=new xM(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw ch(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,p]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw ch(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw ch(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw ch(n,"user-disabled",l);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Uy(n,y,p);_s(n,y)}}catch(s){if(s instanceof as)throw s;_s(n,"network-request-failed",{message:String(s)})}}async function $u(n,e,t,r,s={}){const o=await Co(n,e,t,r,s);return"mfaPendingCredential"in o&&_s(n,"multi-factor-auth-required",{_serverResponse:o}),o}function Fb(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?zy(n.config,s):`${n.config.apiScheme}://${s}`}function TM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(js(this.auth,"network-request-failed")),EM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ch(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=js(n,e,r);return s.customData._tokenResponse=t,s}function TE(n){return n!==void 0&&n.enterprise!==void 0}class IM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return TM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function bM(n,e){return Co(n,"GET","/v2/recaptchaConfig",Ao(n,e))}async function SM(n,e){return Co(n,"POST","/v1/accounts:delete",e)}async function Ub(n,e){return Co(n,"POST","/v1/accounts:lookup",e)}function au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kM(n,e=!1){const t=Vt(n),r=await t.getIdToken(e),s=By(r);at(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:au(Hm(s.auth_time)),issuedAtTime:au(Hm(s.iat)),expirationTime:au(Hm(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Hm(n){return Number(n)*1e3}function By(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Sh("JWT malformed, contained fewer than 3 sections"),null;try{const s=QI(t);return s?JSON.parse(s):(Sh("Failed to decode base64 JWT payload"),null)}catch(s){return Sh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function xE(n){const e=By(n);return at(e,"internal-error"),at(typeof e.exp<"u","internal-error"),at(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Eu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof as&&RM(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function RM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class AM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Og{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Eu(n,Ub(t,{idToken:r}));at(s?.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?$b(o.providerUserInfo):[],u=PM(n.providerData,l),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!u?.length,y=d?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Og(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,_)}async function CM(n){const e=Vt(n);await Yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PM(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function $b(n){return n.map(e=>{var{providerId:t}=e,r=Fy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function NM(n,e){const t=await Vb(n,{},async()=>{const r=Fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=Fb(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",jb.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DM(n,e){return Co(n,"POST","/v2/accounts:revokeToken",Ao(n,e))}class Ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){at(e.idToken,"internal-error"),at(typeof e.idToken<"u","internal-error"),at(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){at(e.length!==0,"internal-error");const t=xE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(at(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await NM(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new Ll;return r&&(at(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(at(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(at(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ll,this.toJSON())}_performRefresh(){return ki("not implemented")}}function ao(n,e){at(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ri{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=Fy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new AM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Og(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Eu(this,this.stsTokenManager.getToken(this.auth,e));return at(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kM(this,e)}reload(){return CM(this)}_assign(e){this!==e&&(at(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){at(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Yh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ls(this.auth.app))return Promise.reject(Ni(this.auth));const e=await this.getIdToken();return await Eu(this,SM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,l,u,d,p,y;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,S=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,P=(l=t.photoURL)!==null&&l!==void 0?l:void 0,M=(u=t.tenantId)!==null&&u!==void 0?u:void 0,D=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,X=(p=t.createdAt)!==null&&p!==void 0?p:void 0,W=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:Q,emailVerified:ae,isAnonymous:de,providerData:me,stsTokenManager:N}=t;at(Q&&N,e,"internal-error");const I=Ll.fromJSON(this.name,N);at(typeof Q=="string",e,"internal-error"),ao(_,e.name),ao(T,e.name),at(typeof ae=="boolean",e,"internal-error"),at(typeof de=="boolean",e,"internal-error"),ao(S,e.name),ao(P,e.name),ao(M,e.name),ao(D,e.name),ao(X,e.name),ao(W,e.name);const A=new Ri({uid:Q,auth:e,email:T,emailVerified:ae,displayName:_,isAnonymous:de,photoURL:P,phoneNumber:S,tenantId:M,stsTokenManager:I,createdAt:X,lastLoginAt:W});return me&&Array.isArray(me)&&(A.providerData=me.map(k=>Object.assign({},k))),D&&(A._redirectEventId=D),A}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ll;s.updateFromServerResponse(t);const o=new Ri({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yh(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];at(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?$b(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new Ll;u.updateFromIdToken(r);const d=new Ri({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Og(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,p),d}}const IE=new Map;function Ai(n){Li(n instanceof Function,"Expected a class definition");let e=IE.get(n);return e?(Li(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,IE.set(n,e),e)}class zb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zb.type="NONE";const bE=zb;function kh(n,e,t){return`firebase:${n}:${e}:${t}`}class jl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=kh(this.userKey,s.apiKey,o),this.fullPersistenceKey=kh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ri._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new jl(Ai(bE),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Ai(bE);const l=kh(r,e.config.apiKey,e.name);let u=null;for(const p of t)try{const y=await p._get(l);if(y){const _=Ri._fromJSON(e,y);p!==o&&(u=_),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new jl(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new jl(o,e,r))}}function SE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Wb(e))return"Blackberry";if(Qb(e))return"Webos";if(qb(e))return"Safari";if((e.includes("chrome/")||Hb(e))&&!e.includes("edge/"))return"Chrome";if(Kb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Bb(n=Cn()){return/firefox\//i.test(n)}function qb(n=Cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hb(n=Cn()){return/crios\//i.test(n)}function Gb(n=Cn()){return/iemobile/i.test(n)}function Kb(n=Cn()){return/android/i.test(n)}function Wb(n=Cn()){return/blackberry/i.test(n)}function Qb(n=Cn()){return/webos/i.test(n)}function qy(n=Cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function OM(n=Cn()){var e;return qy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MM(){return P2()&&document.documentMode===10}function Yb(n=Cn()){return qy(n)||Kb(n)||Qb(n)||Wb(n)||/windows phone/i.test(n)||Gb(n)}function Jb(n,e=[]){let t;switch(n){case"Browser":t=SE(Cn());break;case"Worker":t=`${SE(Cn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${za}/${r}`}class LM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function jM(n,e={}){return Co(n,"GET","/v2/passwordPolicy",Ao(n,e))}const VM=6;class FM{constructor(e){var t,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:VM,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class UM{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kE(this),this.idTokenSubscription=new kE(this),this.beforeStateQueue=new LM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ai(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await jl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ub(this,{idToken:e}),r=await Ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ls(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&d?.user&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return at(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_M()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ls(this.app))return Promise.reject(Ni(this));const t=e?Vt(e):null;return t&&at(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&at(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ls(this.app)?Promise.reject(Ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ls(this.app)?Promise.reject(Ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jM(this),t=new FM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await DM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ai(e)||this._popupRedirectResolver;at(t,this,"argument-error"),this.redirectPersistenceManager=await jl.create(this,[Ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(at(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return at(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&mM(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Po(n){return Vt(n)}class kE{constructor(e){this.auth=e,this.observer=null,this.addObserver=L2(t=>this.observer=t)}get next(){return at(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Cf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $M(n){Cf=n}function Xb(n){return Cf.loadJS(n)}function zM(){return Cf.recaptchaEnterpriseScript}function BM(){return Cf.gapiScript}function qM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const HM="recaptcha-enterprise",GM="NO_RECAPTCHA";class KM{constructor(e){this.type=HM,this.auth=Po(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{bM(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const p=new IM(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;TE(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(GM)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&TE(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=zM();d.length!==0&&(d+=u),Xb(d).then(()=>{s(u,o,l)}).catch(p=>{l(p)})}}).catch(u=>{l(u)})})}}async function RE(n,e,t,r=!1){const s=new KM(n);let o;try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Mg(n,e,t,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await RE(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await RE(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}function WM(n,e){const t=Es(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(_u(o,e??{}))return s;_s(s,"already-initialized")}return t.initialize({options:e})}function QM(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ai);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function YM(n,e,t){const r=Po(n);at(r._canInitEmulator,r,"emulator-config-failed"),at(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Zb(e),{host:l,port:u}=JM(e),d=u===null?"":`:${u}`;r.config.emulator={url:`${o}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),XM()}function Zb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function JM(n){const e=Zb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:AE(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:AE(l)}}}function AE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function XM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Hy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,t){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}async function ZM(n,e){return Co(n,"POST","/v1/accounts:signUp",e)}async function eL(n,e){return $u(n,"POST","/v1/accounts:signInWithPassword",Ao(n,e))}async function tL(n,e){return $u(n,"POST","/v1/accounts:signInWithEmailLink",Ao(n,e))}async function nL(n,e){return $u(n,"POST","/v1/accounts:signInWithEmailLink",Ao(n,e))}class Tu extends Hy{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Tu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Tu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mg(e,t,"signInWithPassword",eL);case"emailLink":return tL(e,{email:this._email,oobCode:this._password});default:_s(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mg(e,r,"signUpPassword",ZM);case"emailLink":return nL(e,{idToken:t,email:this._email,oobCode:this._password});default:_s(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vl(n,e){return $u(n,"POST","/v1/accounts:signInWithIdp",Ao(n,e))}const rL="http://localhost";class Sa extends Hy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_s("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=Fy(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Sa(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Vl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Vl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vl(e,t)}buildRequest(){const e={requestUri:rL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fu(t)}return e}}function sL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iL(n){const e=Zc(eu(n)).link,t=e?Zc(eu(e)).deep_link_id:null,r=Zc(eu(n)).deep_link_id;return(r?Zc(eu(r)).link:null)||r||t||e||n}class Gy{constructor(e){var t,r,s,o,l,u;const d=Zc(eu(e)),p=(t=d.apiKey)!==null&&t!==void 0?t:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,_=sL((s=d.mode)!==null&&s!==void 0?s:null);at(p&&y&&_,"argument-error"),this.apiKey=p,this.operation=_,this.code=y,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=iL(e);try{return new Gy(t)}catch{return null}}}class cc{constructor(){this.providerId=cc.PROVIDER_ID}static credential(e,t){return Tu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Gy.parseLink(t);return at(r,"argument-error"),Tu._fromEmailAndCode(e,r.code,r.tenantId)}}cc.PROVIDER_ID="password";cc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ky{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class zu extends Ky{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class bi extends zu{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";bi.PROVIDER_ID="facebook.com";class Si extends zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sa._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Si.credential(t,r)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";class ho extends zu{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ho.credential(e.oauthAccessToken)}catch{return null}}}ho.GITHUB_SIGN_IN_METHOD="github.com";ho.PROVIDER_ID="github.com";class fo extends zu{constructor(){super("twitter.com")}static credential(e,t){return Sa._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fo.credentialFromTaggedObject(e)}static credentialFromError(e){return fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return fo.credential(t,r)}catch{return null}}}fo.TWITTER_SIGN_IN_METHOD="twitter.com";fo.PROVIDER_ID="twitter.com";async function oL(n,e){return $u(n,"POST","/v1/accounts:signUp",Ao(n,e))}class ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Ri._fromIdTokenResponse(e,r,s),l=CE(r);return new ka({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=CE(r);return new ka({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function CE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Jh extends as{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Jh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Jh(e,t,r,s)}}function e1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Jh._fromErrorAndOperation(n,o,e,r):o})}async function aL(n,e,t=!1){const r=await Eu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ka._forOperation(n,"link",r)}async function lL(n,e,t=!1){const{auth:r}=n;if(Ls(r.app))return Promise.reject(Ni(r));const s="reauthenticate";try{const o=await Eu(n,e1(r,s,e,n),t);at(o.idToken,r,"internal-error");const l=By(o.idToken);at(l,r,"internal-error");const{sub:u}=l;return at(n.uid===u,r,"user-mismatch"),ka._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&_s(r,"user-mismatch"),o}}async function t1(n,e,t=!1){if(Ls(n.app))return Promise.reject(Ni(n));const r="signIn",s=await e1(n,r,e),o=await ka._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function cL(n,e){return t1(Po(n),e)}async function n1(n){const e=Po(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uL(n,e,t){if(Ls(n.app))return Promise.reject(Ni(n));const r=Po(n),l=await Mg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oL).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&n1(n),d}),u=await ka._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function r1(n,e,t){return Ls(n.app)?Promise.reject(Ni(n)):cL(Vt(n),cc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&n1(n),r})}function dL(n,e,t,r){return Vt(n).onIdTokenChanged(e,t,r)}function hL(n,e,t){return Vt(n).beforeAuthStateChanged(e,t)}function fL(n,e,t,r){return Vt(n).onAuthStateChanged(e,t,r)}function s1(n){return Vt(n).signOut()}const Xh="__sak";class i1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xh,"1"),this.storage.removeItem(Xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const pL=1e3,mL=10;class o1 extends i1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Yb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);MM()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,mL):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},pL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}o1.type="LOCAL";const gL=o1;class a1 extends i1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}a1.type="SESSION";const l1=a1;function yL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Pf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async p=>p(t.origin,o)),d=await yL(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pf.receivers=[];function Wy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class vL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const p=Wy("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(_){const T=_;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(T.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Zs(){return window}function _L(n){Zs().location.href=n}function c1(){return typeof Zs().WorkerGlobalScope<"u"&&typeof Zs().importScripts=="function"}async function wL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EL(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function TL(){return c1()?self:null}const u1="firebaseLocalStorageDb",xL=1,Zh="firebaseLocalStorage",d1="fbase_key";class Bu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nf(n,e){return n.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function IL(){const n=indexedDB.deleteDatabase(u1);return new Bu(n).toPromise()}function Lg(){const n=indexedDB.open(u1,xL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Zh,{keyPath:d1})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Zh)?e(r):(r.close(),await IL(),e(await Lg()))})})}async function PE(n,e,t){const r=Nf(n,!0).put({[d1]:e,value:t});return new Bu(r).toPromise()}async function bL(n,e){const t=Nf(n,!1).get(e),r=await new Bu(t).toPromise();return r===void 0?null:r.value}function NE(n,e){const t=Nf(n,!0).delete(e);return new Bu(t).toPromise()}const SL=800,kL=3;class h1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>kL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return c1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pf._getInstance(TL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await wL(),!this.activeServiceWorker)return;this.sender=new vL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lg();return await PE(e,Xh,"1"),await NE(e,Xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>PE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>bL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>NE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Nf(s,!1).getAll();return new Bu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}h1.type="LOCAL";const RL=h1;new Uu(3e4,6e4);function f1(n,e){return e?Ai(e):(at(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Qy extends Hy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AL(n){return t1(n.auth,new Qy(n),n.bypassAuthState)}function CL(n){const{auth:e,user:t}=n;return at(t,e,"internal-error"),lL(t,new Qy(n),n.bypassAuthState)}async function PL(n){const{auth:e,user:t}=n;return at(t,e,"internal-error"),aL(t,new Qy(n),n.bypassAuthState)}class p1{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AL;case"linkViaPopup":case"linkViaRedirect":return PL;case"reauthViaPopup":case"reauthViaRedirect":return CL;default:_s(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const NL=new Uu(2e3,1e4);async function m1(n,e,t){if(Ls(n.app))return Promise.reject(js(n,"operation-not-supported-in-this-environment"));const r=Po(n);gM(n,e,Ky);const s=f1(r,t);return new va(r,"signInViaPopup",e,s).executeNotNull()}class va extends p1{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,va.currentPopupAction&&va.currentPopupAction.cancel(),va.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return at(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=Wy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(js(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(js(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,va.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(js(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NL.get())};e()}}va.currentPopupAction=null;const DL="pendingRedirect",Rh=new Map;class OL extends p1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Rh.get(this.auth._key());if(!e){try{const r=await ML(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ML(n,e){const t=VL(e),r=jL(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function LL(n,e){Rh.set(n._key(),e)}function jL(n){return Ai(n._redirectPersistence)}function VL(n){return kh(DL,n.config.apiKey,n.name)}async function FL(n,e,t=!1){if(Ls(n.app))return Promise.reject(Ni(n));const r=Po(n),s=f1(r,e),l=await new OL(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const UL=600*1e3;class $L{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!g1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(js(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UL&&this.cachedEventUids.clear(),this.cachedEventUids.has(DE(e))}saveEventToCache(e){this.cachedEventUids.add(DE(e)),this.lastProcessedEventTime=Date.now()}}function DE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function g1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function zL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g1(n);default:return!1}}async function BL(n,e={}){return Co(n,"GET","/v1/projects",e)}const qL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HL=/^https?/;async function GL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await BL(n);for(const t of e)try{if(KL(t))return}catch{}_s(n,"unauthorized-domain")}function KL(n){const e=Dg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!HL.test(t))return!1;if(qL.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const WL=new Uu(3e4,6e4);function OE(){const n=Zs().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function QL(n){return new Promise((e,t)=>{var r,s,o;function l(){OE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OE(),t(js(n,"network-request-failed"))},timeout:WL.get()})}if(!((s=(r=Zs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Zs().gapi)===null||o===void 0)&&o.load)l();else{const u=qM("iframefcb");return Zs()[u]=()=>{gapi.load?l():t(js(n,"network-request-failed"))},Xb(`${BM()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw Ah=null,e})}let Ah=null;function YL(n){return Ah=Ah||QL(n),Ah}const JL=new Uu(5e3,15e3),XL="__/auth/iframe",ZL="emulator/auth/iframe",ej={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nj(n){const e=n.config;at(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zy(e,ZL):`https://${n.config.authDomain}/${XL}`,r={apiKey:e.apiKey,appName:n.name,v:za},s=tj.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Fu(r).slice(1)}`}async function rj(n){const e=await YL(n),t=Zs().gapi;return at(t,n,"internal-error"),e.open({where:document.body,url:nj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ej,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=js(n,"network-request-failed"),u=Zs().setTimeout(()=>{o(l)},JL.get());function d(){Zs().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}const sj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ij=500,oj=600,aj="_blank",lj="http://localhost";class ME{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cj(n,e,t,r=ij,s=oj){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},sj),{width:r.toString(),height:s.toString(),top:o,left:l}),p=Cn().toLowerCase();t&&(u=Hb(p)?aj:t),Bb(p)&&(e=e||lj,d.scrollbars="yes");const y=Object.entries(d).reduce((T,[S,P])=>`${T}${S}=${P},`,"");if(OM(p)&&u!=="_self")return uj(e||"",u),new ME(null);const _=window.open(e||"",u,y);at(_,n,"popup-blocked");try{_.focus()}catch{}return new ME(_)}function uj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const dj="__/auth/handler",hj="emulator/auth/handler",fj=encodeURIComponent("fac");async function LE(n,e,t,r,s,o){at(n.config.authDomain,n,"auth-domain-config-required"),at(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:za,eventId:s};if(e instanceof Ky){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",M2(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))l[y]=_}if(e instanceof zu){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const d=await n._getAppCheckToken(),p=d?`#${fj}=${encodeURIComponent(d)}`:"";return`${pj(n)}?${Fu(u).slice(1)}${p}`}function pj({config:n}){return n.emulator?zy(n,hj):`https://${n.authDomain}/${dj}`}const Gm="webStorageSupport";class mj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=l1,this._completeRedirectFn=FL,this._overrideRedirectResult=LL}async _openPopup(e,t,r,s){var o;Li((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await LE(e,t,r,Dg(),s);return cj(e,l,Wy())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await LE(e,t,r,Dg(),s);return _L(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Li(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await rj(e),r=new $L(e);return t.register("authEvent",s=>(at(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gm,{type:Gm},s=>{var o;const l=(o=s?.[0])===null||o===void 0?void 0:o[Gm];l!==void 0&&t(!!l),_s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Yb()||qb()||qy()}}const gj=mj;var jE="@firebase/auth",VE="1.7.9";class yj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){at(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _j(n){Sr(new fr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;at(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jb(n)},p=new UM(r,s,o,d);return QM(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Sr(new fr("auth-internal",e=>{const t=Po(e.getProvider("auth").getImmediate());return(r=>new yj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rn(jE,VE,vj(n)),Rn(jE,VE,"esm2017")}const wj=300,Ej=ZI("authIdTokenMaxAge")||wj;let FE=null;const Tj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ej)return;const s=t?.token;FE!==s&&(FE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xj(n=Ba()){const e=Es(n,"auth");if(e.isInitialized())return e.getImmediate();const t=WM(n,{popupRedirectResolver:gj,persistence:[RL,gL,l1]}),r=ZI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=Tj(o.toString());hL(t,l,()=>l(t.currentUser)),dL(t,u=>l(u))}}const s=JI("auth");return s&&YM(t,`http://${s}`),t}function Ij(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}$M({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=js("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",Ij().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_j("Browser");var UE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _a,y1;(function(){var n;function e(N,I){function A(){}A.prototype=I.prototype,N.D=I.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(k,L,C){for(var R=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)R[ut-2]=arguments[ut];return I.prototype[L].apply(k,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,I,A){A||(A=0);var k=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)k[L]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(L=0;16>L;++L)k[L]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=N.g[0],A=N.g[1],L=N.g[2];var C=N.g[3],R=I+(C^A&(L^C))+k[0]+3614090360&4294967295;I=A+(R<<7&4294967295|R>>>25),R=C+(L^I&(A^L))+k[1]+3905402710&4294967295,C=I+(R<<12&4294967295|R>>>20),R=L+(A^C&(I^A))+k[2]+606105819&4294967295,L=C+(R<<17&4294967295|R>>>15),R=A+(I^L&(C^I))+k[3]+3250441966&4294967295,A=L+(R<<22&4294967295|R>>>10),R=I+(C^A&(L^C))+k[4]+4118548399&4294967295,I=A+(R<<7&4294967295|R>>>25),R=C+(L^I&(A^L))+k[5]+1200080426&4294967295,C=I+(R<<12&4294967295|R>>>20),R=L+(A^C&(I^A))+k[6]+2821735955&4294967295,L=C+(R<<17&4294967295|R>>>15),R=A+(I^L&(C^I))+k[7]+4249261313&4294967295,A=L+(R<<22&4294967295|R>>>10),R=I+(C^A&(L^C))+k[8]+1770035416&4294967295,I=A+(R<<7&4294967295|R>>>25),R=C+(L^I&(A^L))+k[9]+2336552879&4294967295,C=I+(R<<12&4294967295|R>>>20),R=L+(A^C&(I^A))+k[10]+4294925233&4294967295,L=C+(R<<17&4294967295|R>>>15),R=A+(I^L&(C^I))+k[11]+2304563134&4294967295,A=L+(R<<22&4294967295|R>>>10),R=I+(C^A&(L^C))+k[12]+1804603682&4294967295,I=A+(R<<7&4294967295|R>>>25),R=C+(L^I&(A^L))+k[13]+4254626195&4294967295,C=I+(R<<12&4294967295|R>>>20),R=L+(A^C&(I^A))+k[14]+2792965006&4294967295,L=C+(R<<17&4294967295|R>>>15),R=A+(I^L&(C^I))+k[15]+1236535329&4294967295,A=L+(R<<22&4294967295|R>>>10),R=I+(L^C&(A^L))+k[1]+4129170786&4294967295,I=A+(R<<5&4294967295|R>>>27),R=C+(A^L&(I^A))+k[6]+3225465664&4294967295,C=I+(R<<9&4294967295|R>>>23),R=L+(I^A&(C^I))+k[11]+643717713&4294967295,L=C+(R<<14&4294967295|R>>>18),R=A+(C^I&(L^C))+k[0]+3921069994&4294967295,A=L+(R<<20&4294967295|R>>>12),R=I+(L^C&(A^L))+k[5]+3593408605&4294967295,I=A+(R<<5&4294967295|R>>>27),R=C+(A^L&(I^A))+k[10]+38016083&4294967295,C=I+(R<<9&4294967295|R>>>23),R=L+(I^A&(C^I))+k[15]+3634488961&4294967295,L=C+(R<<14&4294967295|R>>>18),R=A+(C^I&(L^C))+k[4]+3889429448&4294967295,A=L+(R<<20&4294967295|R>>>12),R=I+(L^C&(A^L))+k[9]+568446438&4294967295,I=A+(R<<5&4294967295|R>>>27),R=C+(A^L&(I^A))+k[14]+3275163606&4294967295,C=I+(R<<9&4294967295|R>>>23),R=L+(I^A&(C^I))+k[3]+4107603335&4294967295,L=C+(R<<14&4294967295|R>>>18),R=A+(C^I&(L^C))+k[8]+1163531501&4294967295,A=L+(R<<20&4294967295|R>>>12),R=I+(L^C&(A^L))+k[13]+2850285829&4294967295,I=A+(R<<5&4294967295|R>>>27),R=C+(A^L&(I^A))+k[2]+4243563512&4294967295,C=I+(R<<9&4294967295|R>>>23),R=L+(I^A&(C^I))+k[7]+1735328473&4294967295,L=C+(R<<14&4294967295|R>>>18),R=A+(C^I&(L^C))+k[12]+2368359562&4294967295,A=L+(R<<20&4294967295|R>>>12),R=I+(A^L^C)+k[5]+4294588738&4294967295,I=A+(R<<4&4294967295|R>>>28),R=C+(I^A^L)+k[8]+2272392833&4294967295,C=I+(R<<11&4294967295|R>>>21),R=L+(C^I^A)+k[11]+1839030562&4294967295,L=C+(R<<16&4294967295|R>>>16),R=A+(L^C^I)+k[14]+4259657740&4294967295,A=L+(R<<23&4294967295|R>>>9),R=I+(A^L^C)+k[1]+2763975236&4294967295,I=A+(R<<4&4294967295|R>>>28),R=C+(I^A^L)+k[4]+1272893353&4294967295,C=I+(R<<11&4294967295|R>>>21),R=L+(C^I^A)+k[7]+4139469664&4294967295,L=C+(R<<16&4294967295|R>>>16),R=A+(L^C^I)+k[10]+3200236656&4294967295,A=L+(R<<23&4294967295|R>>>9),R=I+(A^L^C)+k[13]+681279174&4294967295,I=A+(R<<4&4294967295|R>>>28),R=C+(I^A^L)+k[0]+3936430074&4294967295,C=I+(R<<11&4294967295|R>>>21),R=L+(C^I^A)+k[3]+3572445317&4294967295,L=C+(R<<16&4294967295|R>>>16),R=A+(L^C^I)+k[6]+76029189&4294967295,A=L+(R<<23&4294967295|R>>>9),R=I+(A^L^C)+k[9]+3654602809&4294967295,I=A+(R<<4&4294967295|R>>>28),R=C+(I^A^L)+k[12]+3873151461&4294967295,C=I+(R<<11&4294967295|R>>>21),R=L+(C^I^A)+k[15]+530742520&4294967295,L=C+(R<<16&4294967295|R>>>16),R=A+(L^C^I)+k[2]+3299628645&4294967295,A=L+(R<<23&4294967295|R>>>9),R=I+(L^(A|~C))+k[0]+4096336452&4294967295,I=A+(R<<6&4294967295|R>>>26),R=C+(A^(I|~L))+k[7]+1126891415&4294967295,C=I+(R<<10&4294967295|R>>>22),R=L+(I^(C|~A))+k[14]+2878612391&4294967295,L=C+(R<<15&4294967295|R>>>17),R=A+(C^(L|~I))+k[5]+4237533241&4294967295,A=L+(R<<21&4294967295|R>>>11),R=I+(L^(A|~C))+k[12]+1700485571&4294967295,I=A+(R<<6&4294967295|R>>>26),R=C+(A^(I|~L))+k[3]+2399980690&4294967295,C=I+(R<<10&4294967295|R>>>22),R=L+(I^(C|~A))+k[10]+4293915773&4294967295,L=C+(R<<15&4294967295|R>>>17),R=A+(C^(L|~I))+k[1]+2240044497&4294967295,A=L+(R<<21&4294967295|R>>>11),R=I+(L^(A|~C))+k[8]+1873313359&4294967295,I=A+(R<<6&4294967295|R>>>26),R=C+(A^(I|~L))+k[15]+4264355552&4294967295,C=I+(R<<10&4294967295|R>>>22),R=L+(I^(C|~A))+k[6]+2734768916&4294967295,L=C+(R<<15&4294967295|R>>>17),R=A+(C^(L|~I))+k[13]+1309151649&4294967295,A=L+(R<<21&4294967295|R>>>11),R=I+(L^(A|~C))+k[4]+4149444226&4294967295,I=A+(R<<6&4294967295|R>>>26),R=C+(A^(I|~L))+k[11]+3174756917&4294967295,C=I+(R<<10&4294967295|R>>>22),R=L+(I^(C|~A))+k[2]+718787259&4294967295,L=C+(R<<15&4294967295|R>>>17),R=A+(C^(L|~I))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(L+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+L&4294967295,N.g[3]=N.g[3]+C&4294967295}r.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var A=I-this.blockSize,k=this.B,L=this.h,C=0;C<I;){if(L==0)for(;C<=A;)s(this,N,C),C+=this.blockSize;if(typeof N=="string"){for(;C<I;)if(k[L++]=N.charCodeAt(C++),L==this.blockSize){s(this,k),L=0;break}}else for(;C<I;)if(k[L++]=N[C++],L==this.blockSize){s(this,k),L=0;break}}this.h=L,this.o+=I},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var A=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=A&255,A/=256;for(this.u(N),N=Array(16),I=A=0;4>I;++I)for(var k=0;32>k;k+=8)N[A++]=this.g[I]>>>k&255;return N};function o(N,I){var A=u;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=I(N)}function l(N,I){this.h=I;for(var A=[],k=!0,L=N.length-1;0<=L;L--){var C=N[L]|0;k&&C==I||(A[L]=C,k=!1)}this.g=A}var u={};function d(N){return-128<=N&&128>N?o(N,function(I){return new l([I|0],0>I?-1:0)}):new l([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return _;if(0>N)return D(p(-N));for(var I=[],A=1,k=0;N>=A;k++)I[k]=N/A|0,A*=4294967296;return new l(I,0)}function y(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return D(y(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(I,8)),k=_,L=0;L<N.length;L+=8){var C=Math.min(8,N.length-L),R=parseInt(N.substring(L,L+C),I);8>C?(C=p(Math.pow(I,C)),k=k.j(C).add(p(R))):(k=k.j(A),k=k.add(p(R)))}return k}var _=d(0),T=d(1),S=d(16777216);n=l.prototype,n.m=function(){if(M(this))return-D(this).m();for(var N=0,I=1,A=0;A<this.g.length;A++){var k=this.i(A);N+=(0<=k?k:4294967296+k)*I,I*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(M(this))return"-"+D(this).toString(N);for(var I=p(Math.pow(N,6)),A=this,k="";;){var L=ae(A,I).g;A=X(A,L.j(I));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=L,P(A))return C+k;for(;6>C.length;)C="0"+C;k=C+k}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function M(N){return N.h==-1}n.l=function(N){return N=X(this,N),M(N)?-1:P(N)?0:1};function D(N){for(var I=N.g.length,A=[],k=0;k<I;k++)A[k]=~N.g[k];return new l(A,~N.h).add(T)}n.abs=function(){return M(this)?D(this):this},n.add=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0,L=0;L<=I;L++){var C=k+(this.i(L)&65535)+(N.i(L)&65535),R=(C>>>16)+(this.i(L)>>>16)+(N.i(L)>>>16);k=R>>>16,C&=65535,R&=65535,A[L]=R<<16|C}return new l(A,A[A.length-1]&-2147483648?-1:0)};function X(N,I){return N.add(D(I))}n.j=function(N){if(P(this)||P(N))return _;if(M(this))return M(N)?D(this).j(D(N)):D(D(this).j(N));if(M(N))return D(this.j(D(N)));if(0>this.l(S)&&0>N.l(S))return p(this.m()*N.m());for(var I=this.g.length+N.g.length,A=[],k=0;k<2*I;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<N.g.length;L++){var C=this.i(k)>>>16,R=this.i(k)&65535,ut=N.i(L)>>>16,Je=N.i(L)&65535;A[2*k+2*L]+=R*Je,W(A,2*k+2*L),A[2*k+2*L+1]+=C*Je,W(A,2*k+2*L+1),A[2*k+2*L+1]+=R*ut,W(A,2*k+2*L+1),A[2*k+2*L+2]+=C*ut,W(A,2*k+2*L+2)}for(k=0;k<I;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=I;k<2*I;k++)A[k]=0;return new l(A,0)};function W(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function Q(N,I){this.g=N,this.h=I}function ae(N,I){if(P(I))throw Error("division by zero");if(P(N))return new Q(_,_);if(M(N))return I=ae(D(N),I),new Q(D(I.g),D(I.h));if(M(I))return I=ae(N,D(I)),new Q(D(I.g),I.h);if(30<N.g.length){if(M(N)||M(I))throw Error("slowDivide_ only works with positive integers.");for(var A=T,k=I;0>=k.l(N);)A=de(A),k=de(k);var L=me(A,1),C=me(k,1);for(k=me(k,2),A=me(A,2);!P(k);){var R=C.add(k);0>=R.l(N)&&(L=L.add(A),C=R),k=me(k,1),A=me(A,1)}return I=X(N,L.j(I)),new Q(L,I)}for(L=_;0<=N.l(I);){for(A=Math.max(1,Math.floor(N.m()/I.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),C=p(A),R=C.j(I);M(R)||0<R.l(N);)A-=k,C=p(A),R=C.j(I);P(C)&&(C=T),L=L.add(C),N=X(N,R)}return new Q(L,N)}n.A=function(N){return ae(this,N).h},n.and=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)&N.i(k);return new l(A,this.h&N.h)},n.or=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)|N.i(k);return new l(A,this.h|N.h)},n.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)^N.i(k);return new l(A,this.h^N.h)};function de(N){for(var I=N.g.length+1,A=[],k=0;k<I;k++)A[k]=N.i(k)<<1|N.i(k-1)>>>31;return new l(A,N.h)}function me(N,I){var A=I>>5;I%=32;for(var k=N.g.length-A,L=[],C=0;C<k;C++)L[C]=0<I?N.i(C+A)>>>I|N.i(C+A+1)<<32-I:N.i(C+A);return new l(L,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,y1=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,_a=l}).apply(typeof UE<"u"?UE:typeof self<"u"?self:typeof window<"u"?window:{});var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var v1,tu,_1,Ch,jg,w1,E1,T1;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,E){return h==Array.prototype||h==Object.prototype||(h[v]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof uh=="object"&&uh];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(h,v){if(v)e:{var E=r;h=h.split(".");for(var b=0;b<h.length-1;b++){var q=h[b];if(!(q in E))break e;E=E[q]}h=h[h.length-1],b=E[h],v=v(b),v!=b&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}function o(h,v){h instanceof String&&(h+="");var E=0,b=!1,q={next:function(){if(!b&&E<h.length){var ne=E++;return{value:v(ne,h[ne]),done:!1}}return b=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(h){return h||function(){return o(this,function(v,E){return E})}});var l=l||{},u=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,E){return h.call.apply(h.bind,arguments)}function _(h,v,E){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,b),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function T(h,v,E){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,T.apply(null,arguments)}function S(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var b=E.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function P(h,v){function E(){}E.prototype=v.prototype,h.aa=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(b,q,ne){for(var Ee=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)Ee[qt-2]=arguments[qt];return v.prototype[q].apply(b,Ee)}}function M(h){const v=h.length;if(0<v){const E=Array(v);for(let b=0;b<v;b++)E[b]=h[b];return E}return[]}function D(h,v){for(let E=1;E<arguments.length;E++){const b=arguments[E];if(d(b)){const q=h.length||0,ne=b.length||0;h.length=q+ne;for(let Ee=0;Ee<ne;Ee++)h[q+Ee]=b[Ee]}else h.push(b)}}class X{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function W(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function ae(h){return ae[" "](h),h}ae[" "]=function(){};var de=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function me(h,v,E){for(const b in h)v.call(E,h[b],b,h)}function N(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function I(h){const v={};for(const E in h)v[E]=h[E];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,v){let E,b;for(let q=1;q<arguments.length;q++){b=arguments[q];for(E in b)h[E]=b[E];for(let ne=0;ne<A.length;ne++)E=A[ne],Object.prototype.hasOwnProperty.call(b,E)&&(h[E]=b[E])}}function L(h){var v=1;h=h.split(":");const E=[];for(;0<v&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function C(h){u.setTimeout(()=>{throw h},0)}function R(){var h=$e;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ut{constructor(){this.h=this.g=null}add(v,E){const b=Je.get();b.set(v,E),this.h?this.h.next=b:this.g=b,this.h=b}}var Je=new X(()=>new hn,h=>h.reset());class hn{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ft,ve=!1,$e=new ut,ke=()=>{const h=u.Promise.resolve(void 0);ft=()=>{h.then(z)}};var z=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(E){C(E)}var v=Je;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}ve=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var rt=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};u.addEventListener("test",E,v),u.removeEventListener("test",E,v)}catch{}return h})();function pt(h,v){if(Ge.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(de){e:{try{ae(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement);this.relatedTarget=v,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:_t[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&pt.aa.h.call(this)}}P(pt,Ge);var _t={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var St="closure_listenable_"+(1e6*Math.random()|0),kt=0;function wt(h,v,E,b,q){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!b,this.ha=q,this.key=++kt,this.da=this.fa=!1}function Wt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Se(h){this.src=h,this.g={},this.h=0}Se.prototype.add=function(h,v,E,b,q){var ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);var Ee=It(h,v,b,q);return-1<Ee?(v=h[Ee],E||(v.fa=!1)):(v=new wt(v,this.src,ne,!!b,q),v.fa=E,h.push(v)),v};function Et(h,v){var E=v.type;if(E in h.g){var b=h.g[E],q=Array.prototype.indexOf.call(b,v,void 0),ne;(ne=0<=q)&&Array.prototype.splice.call(b,q,1),ne&&(Wt(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function It(h,v,E,b){for(var q=0;q<h.length;++q){var ne=h[q];if(!ne.da&&ne.listener==v&&ne.capture==!!E&&ne.ha==b)return q}return-1}var Zn="closure_lm_"+(1e6*Math.random()|0),pr={};function Lo(h,v,E,b,q){if(Array.isArray(v)){for(var ne=0;ne<v.length;ne++)Lo(h,v[ne],E,b,q);return null}return E=Fo(E),h&&h[St]?h.K(v,E,p(b)?!!b.capture:!1,q):Nn(h,v,E,!1,b,q)}function Nn(h,v,E,b,q,ne){if(!v)throw Error("Invalid event type");var Ee=p(q)?!!q.capture:!!q,qt=li(h);if(qt||(h[Zn]=qt=new Se(h)),E=qt.add(v,E,b,Ee,ne),E.proxy)return E;if(b=jo(),E.proxy=b,b.src=h,b.listener=E,h.addEventListener)rt||(q=Ee),q===void 0&&(q=!1),h.addEventListener(v.toString(),b,q);else if(h.attachEvent)h.attachEvent(cs(v.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return E}function jo(){function h(E){return v.call(h.src,h.listener,E)}const v=Vo;return h}function ai(h,v,E,b,q){if(Array.isArray(v))for(var ne=0;ne<v.length;ne++)ai(h,v[ne],E,b,q);else b=p(b)?!!b.capture:!!b,E=Fo(E),h&&h[St]?(h=h.i,v=String(v).toString(),v in h.g&&(ne=h.g[v],E=It(ne,E,b,q),-1<E&&(Wt(ne[E]),Array.prototype.splice.call(ne,E,1),ne.length==0&&(delete h.g[v],h.h--)))):h&&(h=li(h))&&(v=h.g[v.toString()],h=-1,v&&(h=It(v,E,b,q)),(E=-1<h?v[h]:null)&&ls(E))}function ls(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[St])Et(v.i,h);else{var E=h.type,b=h.proxy;v.removeEventListener?v.removeEventListener(E,b,h.capture):v.detachEvent?v.detachEvent(cs(E),b):v.addListener&&v.removeListener&&v.removeListener(b),(E=li(v))?(Et(E,h),E.h==0&&(E.src=null,v[Zn]=null)):Wt(h)}}}function cs(h){return h in pr?pr[h]:pr[h]="on"+h}function Vo(h,v){if(h.da)h=!0;else{v=new pt(v,this);var E=h.listener,b=h.ha||h.src;h.fa&&ls(h),h=E.call(b,v)}return h}function li(h){return h=h[Zn],h instanceof Se?h:null}var $i="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fo(h){return typeof h=="function"?h:(h[$i]||(h[$i]=function(v){return h.handleEvent(v)}),h[$i])}function tn(){oe.call(this),this.i=new Se(this),this.M=this,this.F=null}P(tn,oe),tn.prototype[St]=!0,tn.prototype.removeEventListener=function(h,v,E,b){ai(this,h,v,E,b)};function Qt(h,v){var E,b=h.F;if(b)for(E=[];b;b=b.F)E.push(b);if(h=h.M,b=v.type||v,typeof v=="string")v=new Ge(v,h);else if(v instanceof Ge)v.target=v.target||h;else{var q=v;v=new Ge(b,h),k(v,q)}if(q=!0,E)for(var ne=E.length-1;0<=ne;ne--){var Ee=v.g=E[ne];q=Ts(Ee,b,!0,v)&&q}if(Ee=v.g=h,q=Ts(Ee,b,!0,v)&&q,q=Ts(Ee,b,!1,v)&&q,E)for(ne=0;ne<E.length;ne++)Ee=v.g=E[ne],q=Ts(Ee,b,!1,v)&&q}tn.prototype.N=function(){if(tn.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var E=h.g[v],b=0;b<E.length;b++)Wt(E[b]);delete h.g[v],h.h--}}this.F=null},tn.prototype.K=function(h,v,E,b){return this.i.add(String(h),v,!1,E,b)},tn.prototype.L=function(h,v,E,b){return this.i.add(String(h),v,!0,E,b)};function Ts(h,v,E,b){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,ne=0;ne<v.length;++ne){var Ee=v[ne];if(Ee&&!Ee.da&&Ee.capture==E){var qt=Ee.listener,bn=Ee.ha||Ee.src;Ee.fa&&Et(h.i,Ee),q=qt.call(bn,b)!==!1&&q}}return q&&!b.defaultPrevented}function Uo(h,v,E){if(typeof h=="function")E&&(h=T(h,E));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:u.setTimeout(h,v||0)}function Us(h){h.g=Uo(()=>{h.g=null,h.i&&(h.i=!1,Us(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class $s extends oe{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Us(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(h){oe.call(this),this.h=h,this.g={}}P(zs,oe);var ci=[];function $o(h){me(h.g,function(v,E){this.g.hasOwnProperty(E)&&ls(v)},h),h.g={}}zs.prototype.N=function(){zs.aa.N.call(this),$o(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zo=u.JSON.stringify,Bo=u.JSON.parse,qo=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function ui(){}ui.prototype.h=null;function zi(h){return h.h||(h.h=h.i())}function Bi(){}var mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $(){Ge.call(this,"d")}P($,Ge);function U(){Ge.call(this,"c")}P(U,Ge);var se={},B=null;function ie(){return B=B||new tn}se.La="serverreachability";function ge(h){Ge.call(this,se.La,h)}P(ge,Ge);function ze(h){const v=ie();Qt(v,new ge(v))}se.STAT_EVENT="statevent";function Ae(h,v){Ge.call(this,se.STAT_EVENT,h),this.stat=v}P(Ae,Ge);function be(h){const v=ie();Qt(v,new Ae(v,h))}se.Ma="timingevent";function Ze(h,v){Ge.call(this,se.Ma,h),this.size=v}P(Ze,Ge);function Ce(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function Ye(){this.g=!0}Ye.prototype.xa=function(){this.g=!1};function dt(h,v,E,b,q,ne){h.info(function(){if(h.g)if(ne)for(var Ee="",qt=ne.split("&"),bn=0;bn<qt.length;bn++){var Dt=qt[bn].split("=");if(1<Dt.length){var Mn=Dt[0];Dt=Dt[1];var Tn=Mn.split("_");Ee=2<=Tn.length&&Tn[1]=="type"?Ee+(Mn+"="+Dt+"&"):Ee+(Mn+"=redacted&")}}else Ee=null;else Ee=ne;return"XMLHTTP REQ ("+b+") [attempt "+q+"]: "+v+`
`+E+`
`+Ee})}function mt(h,v,E,b,q,ne,Ee){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+q+"]: "+v+`
`+E+`
`+ne+" "+Ee})}function Kt(h,v,E,b){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Dn(h,E)+(b?" "+b:"")})}function Bt(h,v){h.info(function(){return"TIMEOUT: "+v})}Ye.prototype.info=function(){};function Dn(h,v){if(!h.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var b=E[h];if(!(2>b.length)){var q=b[1];if(Array.isArray(q)&&!(1>q.length)){var ne=q[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var Ee=1;Ee<q.length;Ee++)q[Ee]=""}}}}return zo(E)}catch{return v}}var Yt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},We={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Te;function Ct(){}P(Ct,ui),Ct.prototype.g=function(){return new XMLHttpRequest},Ct.prototype.i=function(){return{}},Te=new Ct;function gt(h,v,E,b){this.j=h,this.i=v,this.l=E,this.R=b||1,this.U=new zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ut}function Ut(){this.i=null,this.g="",this.h=!1}var Mt={},Ve={};function $t(h,v,E){h.L=1,h.v=Pt(Fe(v)),h.m=E,h.P=!0,lt(h,null)}function lt(h,v){h.F=Date.now(),xe(h),h.A=Fe(h.v);var E=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),xs(E.i,"t",b),h.C=0,E=h.j.J,h.h=new Ut,h.g=ud(h.j,E?v:null,!h.m),0<h.O&&(h.M=new $s(T(h.Y,h,h.g),h.O)),v=h.U,E=h.g,b=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(ci[0]=q.toString()),q=ci);for(var ne=0;ne<q.length;ne++){var Ee=Lo(E,q[ne],b||v.handleEvent,!1,v.h||v);if(!Ee)break;v.g[Ee.key]=Ee}v=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),ze(),dt(h.i,h.u,h.A,h.l,h.R,h.m)}gt.prototype.ca=function(h){h=h.target;const v=this.M;v&&Nr(h)==3?v.j():this.Y(h)},gt.prototype.Y=function(h){try{if(h==this.g)e:{const Tn=Nr(this.g);var v=this.g.Ba();const us=this.g.Z();if(!(3>Tn)&&(Tn!=3||this.g&&(this.h.h||this.g.oa()||yc(this.g)))){this.J||Tn!=4||v==7||(v==8||0>=us?ze(3):ze(2)),yn(this);var E=this.g.Z();this.X=E;t:if(st(this)){var b=yc(this.g);h="";var q=b.length,ne=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vt(this),Rt(this);var Ee="";break t}this.h.i=new u.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(b[v],{stream:!(ne&&v==q-1)});b.length=0,this.h.g+=h,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=E==200,mt(this.i,this.u,this.A,this.l,this.R,Tn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var qt,bn=this.g;if((qt=bn.g?bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(qt)){var Dt=qt;break t}}Dt=null}if(E=Dt)Kt(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,te(this,E);else{this.o=!1,this.s=3,be(12),vt(this),Rt(this);break e}}if(this.P){E=!0;let Wr;for(;!this.J&&this.C<Ee.length;)if(Wr=yt(this,Ee),Wr==Ve){Tn==4&&(this.s=4,be(14),E=!1),Kt(this.i,this.l,null,"[Incomplete Response]");break}else if(Wr==Mt){this.s=4,be(15),Kt(this.i,this.l,Ee,"[Invalid Chunk]"),E=!1;break}else Kt(this.i,this.l,Wr,null),te(this,Wr);if(st(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tn!=4||Ee.length!=0||this.h.h||(this.s=1,be(16),E=!1),this.o=this.o&&E,!E)Kt(this.i,this.l,Ee,"[Invalid Chunked Response]"),vt(this),Rt(this);else if(0<Ee.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),_c(Mn),Mn.M=!0,be(11))}}else Kt(this.i,this.l,Ee,null),te(this,Ee);Tn==4&&vt(this),this.o&&!this.J&&(Tn==4?nl(this.j,this):(this.o=!1,xe(this)))}else Ja(this.g),E==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,be(12)):(this.s=0,be(13)),vt(this),Rt(this)}}}catch{}};function st(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function yt(h,v){var E=h.C,b=v.indexOf(`
`,E);return b==-1?Ve:(E=Number(v.substring(E,b)),isNaN(E)?Mt:(b+=1,b+E>v.length?Ve:(v=v.slice(b,b+E),h.C=b+E,v)))}gt.prototype.cancel=function(){this.J=!0,vt(this)};function xe(h){h.S=Date.now()+h.I,En(h,h.I)}function En(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ce(T(h.ba,h),v)}function yn(h){h.B&&(u.clearTimeout(h.B),h.B=null)}gt.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Bt(this.i,this.A),this.L!=2&&(ze(),be(17)),vt(this),this.s=2,Rt(this)):En(this,this.S-h)};function Rt(h){h.j.G==0||h.J||nl(h.j,h)}function vt(h){yn(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,$o(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function te(h,v){try{var E=h.j;if(E.G!=0&&(E.g==h||et(E.h,h))){if(!h.K&&et(E.h,h)&&E.G==3){try{var b=E.Da.g.parse(v)}catch{b=null}if(Array.isArray(b)&&b.length==3){var q=b;if(q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)tl(E),Ss(E);else break e;el(E),be(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ce(T(E.Za,E),6e3));if(1>=Nt(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else mi(E,11)}else if((h.K||E.g==h)&&tl(E),!W(v))for(q=E.Da.g.parse(v),v=0;v<q.length;v++){let Dt=q[v];if(E.T=Dt[0],Dt=Dt[1],E.G==2)if(Dt[0]=="c"){E.K=Dt[1],E.ia=Dt[2];const Mn=Dt[3];Mn!=null&&(E.la=Mn,E.j.info("VER="+E.la));const Tn=Dt[4];Tn!=null&&(E.Aa=Tn,E.j.info("SVER="+E.Aa));const us=Dt[5];us!=null&&typeof us=="number"&&0<us&&(b=1.5*us,E.L=b,E.j.info("backChannelRequestTimeoutMs_="+b)),b=E;const Wr=h.g;if(Wr){const Qo=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var ne=b.h;ne.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(er(ne,ne.h),ne.h=null))}if(b.D){const sl=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;sl&&(b.ya=sl,De(b.I,b.D,sl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),b=E;var Ee=h;if(b.qa=cd(b,b.J?b.ia:null,b.W),Ee.K){kr(b.h,Ee);var qt=Ee,bn=b.L;bn&&(qt.I=bn),qt.B&&(yn(qt),xe(qt)),b.g=Ee}else Wo(b);0<E.i.length&&qs(E)}else Dt[0]!="stop"&&Dt[0]!="close"||mi(E,7);else E.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?mi(E,7):Kn(E):Dt[0]!="noop"&&E.l&&E.l.ta(Dt),E.v=0)}}ze(4)}catch{}}var ee=class{constructor(h,v){this.g=h,this.map=v}};function J(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ne(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nt(h){return h.h?1:h.g?h.g.size:0}function et(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function er(h,v){h.g?h.g.add(v):h.h=v}function kr(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}J.prototype.cancel=function(){if(this.i=Rr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Rr(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.D);return v}return M(h.i)}function On(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],E=h.length,b=0;b<E;b++)v.push(h[b]);return v}v=[],E=0;for(b in h)v[E++]=h[b];return v}function _e(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var E=0;E<h;E++)v.push(E);return v}v=[],E=0;for(const b in h)v[E++]=b;return v}}}function fe(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var E=_e(h),b=On(h),q=b.length,ne=0;ne<q;ne++)v.call(void 0,b[ne],E&&E[ne],h)}var Z=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function we(h,v){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var b=h[E].indexOf("="),q=null;if(0<=b){var ne=h[E].substring(0,b);q=h[E].substring(b+1)}else ne=h[E];v(ne,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Le(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Le){this.h=h.h,Oe(this,h.j),this.o=h.o,this.g=h.g,it(this,h.s),this.l=h.l;var v=h.i,E=new Gr;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),ot(this,E),this.m=h.m}else h&&(v=String(h).match(Z))?(this.h=!1,Oe(this,v[1]||"",!0),this.o=Be(v[2]||""),this.g=Be(v[3]||"",!0),it(this,v[4]),this.l=Be(v[5]||"",!0),ot(this,v[6]||"",!0),this.m=Be(v[7]||"")):(this.h=!1,this.i=new Gr(null,this.h))}Le.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Gn(v,Ar,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Gn(v,Ar,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Gn(E,E.charAt(0)=="/"?Ho:qi,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Gn(E,di)),h.join("")};function Fe(h){return new Le(h)}function Oe(h,v,E){h.j=E?Be(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function it(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function ot(h,v,E){v instanceof Gr?(h.i=v,rr(h.i,h.h)):(E||(v=Gn(v,Wa)),h.i=new Gr(v,h.h))}function De(h,v,E){h.i.set(v,E)}function Pt(h){return De(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Be(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Gn(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,tr),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function tr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ar=/[#\/\?@]/g,qi=/[#\?:]/g,Ho=/[#\?]/g,Wa=/[#\?@]/g,di=/#/g;function Gr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function nn(h){h.g||(h.g=new Map,h.h=0,h.i&&we(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=Gr.prototype,n.add=function(h,v){nn(this),this.i=null,h=gr(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function Cr(h,v){nn(h),v=gr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function nr(h,v){return nn(h),v=gr(h,v),h.g.has(v)}n.forEach=function(h,v){nn(this),this.g.forEach(function(E,b){E.forEach(function(q){h.call(v,q,b,this)},this)},this)},n.na=function(){nn(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let b=0;b<v.length;b++){const q=h[b];for(let ne=0;ne<q.length;ne++)E.push(v[b])}return E},n.V=function(h){nn(this);let v=[];if(typeof h=="string")nr(this,h)&&(v=v.concat(this.g.get(gr(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)v=v.concat(h[E])}return v},n.set=function(h,v){return nn(this),this.i=null,h=gr(this,h),nr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function xs(h,v,E){Cr(h,v),0<E.length&&(h.i=null,h.g.set(gr(h,v),M(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var b=v[E];const ne=encodeURIComponent(String(b)),Ee=this.V(b);for(b=0;b<Ee.length;b++){var q=ne;Ee[b]!==""&&(q+="="+encodeURIComponent(String(Ee[b]))),h.push(q)}}return this.i=h.join("&")};function gr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function rr(h,v){v&&!h.j&&(nn(h),h.i=null,h.g.forEach(function(E,b){var q=b.toLowerCase();b!=q&&(Cr(this,b),xs(this,q,E))},h)),h.j=v}function yr(h,v){const E=new Ye;if(u.Image){const b=new Image;b.onload=S(Pr,E,"TestLoadImage: loaded",!0,v,b),b.onerror=S(Pr,E,"TestLoadImage: error",!1,v,b),b.onabort=S(Pr,E,"TestLoadImage: abort",!1,v,b),b.ontimeout=S(Pr,E,"TestLoadImage: timeout",!1,v,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else v(!1)}function vr(h,v){const E=new Ye,b=new AbortController,q=setTimeout(()=>{b.abort(),Pr(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:b.signal}).then(ne=>{clearTimeout(q),ne.ok?Pr(E,"TestPingServer: ok",!0,v):Pr(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),Pr(E,"TestPingServer: error",!1,v)})}function Pr(h,v,E,b,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),b(E)}catch{}}function op(){this.g=new qo}function sd(h,v,E){const b=E||"";try{fe(h,function(q,ne){let Ee=q;p(q)&&(Ee=zo(q)),v.push(b+ne+"="+encodeURIComponent(Ee))})}catch(q){throw v.push(b+"type="+encodeURIComponent("_badmap")),q}}function hi(h){this.l=h.Ub||null,this.j=h.eb||!1}P(hi,ui),hi.prototype.g=function(){return new Go(this.l,this.j)},hi.prototype.i=(function(h){return function(){return h}})({});function Go(h,v){tn.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Go,tn),n=Go.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,bs(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||u).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;id(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function id(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Is(this):bs(this),this.readyState==3&&id(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Is(this))},n.Qa=function(h){this.g&&(this.response=h,Is(this))},n.ga=function(){this.g&&Is(this)};function Is(h){h.readyState=4,h.l=null,h.j=null,h.v=null,bs(h)}n.setRequestHeader=function(h,v){this.u.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function bs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Go.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function fi(h){let v="";return me(h,function(E,b){v+=b,v+=":",v+=E,v+=`\r
`}),v}function Hi(h,v,E){e:{for(b in E){var b=!1;break e}b=!0}b||(E=fi(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):De(h,v,E))}function rn(h){tn.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(rn,tn);var ap=/^https?$/i,mc=["POST","PUT"];n=rn.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,v,E,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Te.g(),this.v=this.o?zi(this.o):zi(Te),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ne){Ko(this,ne);return}if(h=E||"",E=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var q in b)E.set(q,b[q]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const ne of b.keys())E.set(ne,b.get(ne));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(E.keys()).find(ne=>ne.toLowerCase()=="content-type"),q=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(mc,v,void 0))||b||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Ee]of E)this.g.setRequestHeader(ne,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ya(this),this.u=!0,this.g.send(h),this.u=!1}catch(ne){Ko(this,ne)}};function Ko(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Qa(h),Kr(h)}function Qa(h){h.A||(h.A=!0,Qt(h,"complete"),Qt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Qt(this,"complete"),Qt(this,"abort"),Kr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kr(this,!0)),rn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?gc(this):this.bb())},n.bb=function(){gc(this)};function gc(h){if(h.h&&typeof l<"u"&&(!h.v[1]||Nr(h)!=4||h.Z()!=2)){if(h.u&&Nr(h)==4)Uo(h.Ea,0,h);else if(Qt(h,"readystatechange"),Nr(h)==4){h.h=!1;try{const Ee=h.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var b;if(b=Ee===0){var q=String(h.D).match(Z)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),b=!ap.test(q?q.toLowerCase():"")}E=b}if(E)Qt(h,"complete"),Qt(h,"success");else{h.m=6;try{var ne=2<Nr(h)?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.Z()+"]",Qa(h)}}finally{Kr(h)}}}}function Kr(h,v){if(h.g){Ya(h);const E=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Qt(h,"ready");try{E.onreadystatechange=b}catch{}}}function Ya(h){h.I&&(u.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Nr(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Bo(v)}};function yc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ja(h){const v={};h=(h.g&&2<=Nr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(W(h[b]))continue;var E=L(h[b]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ne=v[q]||[];v[q]=ne,ne.push(E)}N(v,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bs(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function vc(h){this.Aa=0,this.i=[],this.j=new Ye,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bs("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bs("baseRetryDelayMs",5e3,h),this.cb=Bs("retryDelaySeedMs",1e4,h),this.Wa=Bs("forwardChannelMaxRetries",2,h),this.wa=Bs("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new J(h&&h.concurrentRequestLimit),this.Da=new op,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=vc.prototype,n.la=8,n.G=1,n.connect=function(h,v,E,b){be(0),this.W=h,this.H=v||{},E&&b!==void 0&&(this.H.OSID=E,this.H.OAID=b),this.F=this.X,this.I=cd(this,null,this.W),qs(this)};function Kn(h){if(Xa(h),h.G==3){var v=h.U++,E=Fe(h.I);if(De(E,"SID",h.K),De(E,"RID",v),De(E,"TYPE","terminate"),pi(h,E),v=new gt(h,h.j,v),v.L=2,v.v=Pt(Fe(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=v.v,E=!0),E||(v.g=ud(v.j,null),v.g.ea(v.v)),v.F=Date.now(),xe(v)}ld(h)}function Ss(h){h.g&&(_c(h),h.g.cancel(),h.g=null)}function Xa(h){Ss(h),h.u&&(u.clearTimeout(h.u),h.u=null),tl(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function qs(h){if(!Ne(h.h)&&!h.s){h.s=!0;var v=h.Ga;ft||ke(),ve||(ft(),ve=!0),$e.add(v,h),h.B=0}}function lp(h,v){return Nt(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ce(T(h.Ga,h,v),ad(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new gt(this,this.j,h);let ne=this.o;if(this.S&&(ne?(ne=I(ne),k(ne,this.S)):ne=this.S),this.m!==null||this.O||(q.H=ne,ne=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var b=this.i[E];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(v+=b,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Gi(this,q,v),E=Fe(this.I),De(E,"RID",h),De(E,"CVER",22),this.D&&De(E,"X-HTTP-Session-Id",this.D),pi(this,E),ne&&(this.O?v="headers="+encodeURIComponent(String(fi(ne)))+"&"+v:this.m&&Hi(E,this.m,ne)),er(this.h,q),this.Ua&&De(E,"TYPE","init"),this.P?(De(E,"$req",v),De(E,"SID","null"),q.T=!0,$t(q,E,null)):$t(q,E,v),this.G=2}}else this.G==3&&(h?Za(this,h):this.i.length==0||Ne(this.h)||Za(this))};function Za(h,v){var E;v?E=v.l:E=h.U++;const b=Fe(h.I);De(b,"SID",h.K),De(b,"RID",E),De(b,"AID",h.T),pi(h,b),h.m&&h.o&&Hi(b,h.m,h.o),E=new gt(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Gi(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),er(h.h,E),$t(E,b,v)}function pi(h,v){h.H&&me(h.H,function(E,b){De(v,b,E)}),h.l&&fe({},function(E,b){De(v,b,E)})}function Gi(h,v,E){E=Math.min(h.i.length,E);var b=h.l?T(h.l.Na,h.l,h):null;e:{var q=h.i;let ne=-1;for(;;){const Ee=["count="+E];ne==-1?0<E?(ne=q[0].g,Ee.push("ofs="+ne)):ne=0:Ee.push("ofs="+ne);let qt=!0;for(let bn=0;bn<E;bn++){let Dt=q[bn].g;const Mn=q[bn].map;if(Dt-=ne,0>Dt)ne=Math.max(0,q[bn].g-100),qt=!1;else try{sd(Mn,Ee,"req"+Dt+"_")}catch{b&&b(Mn)}}if(qt){b=Ee.join("&");break e}}}return h=h.i.splice(0,E),v.D=h,b}function Wo(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ft||ke(),ve||(ft(),ve=!0),$e.add(v,h),h.v=0}}function el(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ce(T(h.Fa,h),ad(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,od(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ce(T(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,be(10),Ss(this),od(this))};function _c(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function od(h){h.g=new gt(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Fe(h.qa);De(v,"RID","rpc"),De(v,"SID",h.K),De(v,"AID",h.T),De(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&De(v,"TO",h.ja),De(v,"TYPE","xmlhttp"),pi(h,v),h.m&&h.o&&Hi(v,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Pt(Fe(v)),E.m=null,E.P=!0,lt(E,h)}n.Za=function(){this.C!=null&&(this.C=null,Ss(this),el(this),be(19))};function tl(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function nl(h,v){var E=null;if(h.g==v){tl(h),_c(h),h.g=null;var b=2}else if(et(h.h,v))E=v.D,kr(h.h,v),b=1;else return;if(h.G!=0){if(v.o)if(b==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;b=ie(),Qt(b,new Ze(b,E)),qs(h)}else Wo(h);else if(q=v.s,q==3||q==0&&0<v.X||!(b==1&&lp(h,v)||b==2&&el(h)))switch(E&&0<E.length&&(v=h.h,v.i=v.i.concat(E)),q){case 1:mi(h,5);break;case 4:mi(h,10);break;case 3:mi(h,6);break;default:mi(h,2)}}}function ad(h,v){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*v}function mi(h,v){if(h.j.info("Error code "+v),v==2){var E=T(h.fb,h),b=h.Xa;const q=!b;b=new Le(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Oe(b,"https"),Pt(b),q?yr(b.toString(),E):vr(b.toString(),E)}else be(2);h.G=0,h.l&&h.l.sa(v),ld(h),Xa(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function ld(h){if(h.G=0,h.ka=[],h.l){const v=Rr(h.h);(v.length!=0||h.i.length!=0)&&(D(h.ka,v),D(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function cd(h,v,E){var b=E instanceof Le?Fe(E):new Le(E);if(b.g!="")v&&(b.g=v+"."+b.g),it(b,b.s);else{var q=u.location;b=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var ne=new Le(null);b&&Oe(ne,b),v&&(ne.g=v),q&&it(ne,q),E&&(ne.l=E),b=ne}return E=h.D,v=h.ya,E&&v&&De(b,E,v),De(b,"VER",h.la),pi(h,b),b}function ud(h,v,E){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new rn(new hi({eb:E})):new rn(h.pa),v.Ha(h.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wc(){}n=wc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function rl(){}rl.prototype.g=function(h,v){return new _r(h,v)};function _r(h,v){tn.call(this),this.g=new vc(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!W(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!W(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Hs(this)}P(_r,tn),_r.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){Kn(this.g)},_r.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=zo(h),h=E);v.i.push(new ee(v.Ya++,h)),v.G==3&&qs(v)},_r.prototype.N=function(){this.g.l=null,delete this.j,Kn(this.g),delete this.g,_r.aa.N.call(this)};function dd(h){$.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}P(dd,$);function hd(){U.call(this),this.status=1}P(hd,U);function Hs(h){this.g=h}P(Hs,wc),Hs.prototype.ua=function(){Qt(this.g,"a")},Hs.prototype.ta=function(h){Qt(this.g,new dd(h))},Hs.prototype.sa=function(h){Qt(this.g,new hd)},Hs.prototype.ra=function(){Qt(this.g,"b")},rl.prototype.createWebChannel=rl.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,T1=function(){return new rl},E1=function(){return ie()},w1=se,jg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yt.NO_ERROR=0,Yt.TIMEOUT=8,Yt.HTTP_ERROR=6,Ch=Yt,We.COMPLETE="complete",_1=We,Bi.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",tn.prototype.listen=tn.prototype.K,tu=Bi,rn.prototype.listenOnce=rn.prototype.L,rn.prototype.getLastError=rn.prototype.Ka,rn.prototype.getLastErrorCode=rn.prototype.Ba,rn.prototype.getStatus=rn.prototype.Z,rn.prototype.getResponseJson=rn.prototype.Oa,rn.prototype.getResponseText=rn.prototype.oa,rn.prototype.send=rn.prototype.ea,rn.prototype.setWithCredentials=rn.prototype.Ha,v1=rn}).apply(typeof uh<"u"?uh:typeof self<"u"?self:typeof window<"u"?window:{});const $E="@firebase/firestore";let $n=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$n.UNAUTHENTICATED=new $n(null),$n.GOOGLE_CREDENTIALS=new $n("google-credentials-uid"),$n.FIRST_PARTY=new $n("first-party-uid"),$n.MOCK_USER=new $n("mock-user");let uc="10.14.0";const Ra=new lc("@firebase/firestore");function Cl(){return Ra.logLevel}function ce(n,...e){if(Ra.logLevel<=bt.DEBUG){const t=e.map(Yy);Ra.debug(`Firestore (${uc}): ${n}`,...t)}}function _n(n,...e){if(Ra.logLevel<=bt.ERROR){const t=e.map(Yy);Ra.error(`Firestore (${uc}): ${n}`,...t)}}function Aa(n,...e){if(Ra.logLevel<=bt.WARN){const t=e.map(Yy);Ra.warn(`Firestore (${uc}): ${n}`,...t)}}function Yy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ue(n="Unexpected state"){const e=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: `+n;throw _n(e),new Error(e)}function Qe(n,e){n||Ue()}function He(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends as{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ei{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class x1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($n.UNAUTHENTICATED)))}shutdown(){}}class Sj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kj{constructor(e){this.t=e,this.currentUser=$n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ei,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ei)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string"),new x1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new $n(e)}}class Rj{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=$n.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Aj{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Rj(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t($n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qe(this.o===void 0);const r=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string"),this.R=t.token,new Cj(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Nj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class I1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Nj(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%e.length))}return r}}function ht(n,e){return n<e?-1:n>e?1:0}function ql(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function b1(n){return n+"\0"}class dn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dn.fromMillis(Date.now())}static fromDate(e){return dn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new dn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new dn(0,0))}static max(){return new Xe(new dn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xu{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ue(),r===void 0?r=e.length-t:r>e.length-t&&Ue(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return xu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xu?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=e.get(s),l=t.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ft extends xu{construct(e,t,r){return new Ft(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Ft(t)}static emptyPath(){return new Ft([])}}const Dj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends xu{construct(e,t,r){return new un(e,t,r)}static isValidIdentifier(e){return Dj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(t)}static emptyPath(){return new un([])}}class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(Ft.fromString(e))}static fromName(e){return new Ie(Ft.fromString(e).popFirst(5))}static empty(){return new Ie(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new Ft(e.slice()))}}class ef{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Vg(n){return n.fields.find((e=>e.kind===2))}function da(n){return n.fields.filter((e=>e.kind!==2))}ef.UNKNOWN_ID=-1;class Ph{constructor(e,t){this.fieldPath=e,this.kind=t}}class Iu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Iu(0,is.min())}}function S1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Xe.fromTimestamp(r===1e9?new dn(t+1,0):new dn(t,r));return new is(s,Ie.empty(),e)}function k1(n){return new is(n.readTime,n.key,-1)}class is{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new is(Xe.min(),Ie.empty(),-1)}static max(){return new is(Xe.max(),Ie.empty(),-1)}}function Jy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:ht(n.largestBatchId,e.largestBatchId))}const R1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function No(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==R1)throw n;ce("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,r)=>{t(e)}))}static reject(e){return new G(((t,r)=>{r(e)}))}static waitFor(e){return new G(((t,r)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&t()}),(d=>r(d)))})),l=!0,o===s&&t()}))}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next((s=>s?G.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new G(((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next((y=>{l[p]=y,++u,u===o&&r(l)}),(y=>s(y)))}}))}static doWhile(e,t){return new G(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}class Df{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ei,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new lu(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Xy(r.target.error);this.V.reject(new lu(e,s))}}static open(e,t,r,s){try{return new Df(t,e.transaction(s,r))}catch(o){throw new lu(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Mj(t)}}class wo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,wo.S(Cn())===12.2&&_n("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ce("SimpleDb","Removing database:",e),ha(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ac())return!1;if(wo.v())return!0;const e=Cn(),t=wo.S(e),r=0<t&&t<10,s=C1(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(ce("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const l=o.target.result;t(l)},s.onblocked=()=>{r(new lu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const l=o.target.error;l.name==="VersionError"?r(new pe(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new pe(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new lu(e,l))},s.onupgradeneeded=o=>{ce("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.p.O(l,s.transaction,o.oldVersion,this.version).next((()=>{ce("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.M(e);const u=Df.open(this.db,e,o?"readonly":"readwrite",r),d=s(u).next((p=>(u.g(),p))).catch((p=>(u.abort(p),G.reject(p)))).toPromise();return d.catch((()=>{})),await u.m,d}catch(u){const d=u,p=d.name!=="FirebaseError"&&l<3;if(ce("SimpleDb","Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function C1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Oj{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ha(this.B.delete())}}class lu extends pe{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Do(n){return n.name==="IndexedDbTransactionError"}class Mj{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ha(r)}add(e){return ce("SimpleDb","ADD",this.store.name,e,e),ha(this.store.add(e))}get(e){return ha(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ce("SimpleDb","DELETE",this.store.name,e),ha(this.store.delete(e))}count(){return ce("SimpleDb","COUNT",this.store.name),ha(this.store.count())}U(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new G(((l,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{l(d.target.result)}}))}{const o=this.cursor(r),l=[];return this.W(o,((u,d)=>{l.push(d)})).next((()=>l))}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new G(((s,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{s(l.target.result)}}))}j(e,t){ce("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.W(s,((o,l,u)=>u.delete()))}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Y(e){const t=this.cursor({});return new G(((r,s)=>{t.onerror=o=>{const l=Xy(o.target.error);s(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((u=>{u?l.continue():r()})):r()}}))}W(e,t){const r=[];return new G(((s,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void s();const d=new Oj(u),p=t(u.primaryKey,u.value,d);if(p instanceof G){const y=p.catch((_=>(d.done(),G.reject(_))));r.push(y)}d.isDone?s():d.K===null?u.continue():u.continue(d.K)}})).next((()=>G.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ha(n){return new G(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Xy(r.target.error);t(s)}}))}let zE=!1;function Xy(n){const e=wo.S(Cn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zE||(zE=!0,setTimeout((()=>{throw r}),0)),r}}return n}class Lj{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ce("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ce("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Do(t)?ce("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await No(t)}await this.X(6e4)}))}}class jj{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const r=new Set;let s=t,o=!0;return G.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return ce("IndexBackfiller",`Processing collection: ${l}`),this.ne(e,l,s).next((u=>{s-=u,r.add(l)}));o=!1})))).next((()=>t-s))}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this.re(s,o))).next((u=>(ce("IndexBackfiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>l.size))}))))}re(e,t){let r=e;return t.changes.forEach(((s,o)=>{const l=k1(o);Jy(l,r)>0&&(r=l)})),new is(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class $r{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}$r.oe=-1;function Of(n){return n==null}function bu(n){return n===0&&1/n==-1/0}function P1(n){return typeof n=="number"&&Number.isInteger(n)&&!bu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function xr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BE(e)),e=Vj(n.get(t),e);return BE(e)}function Vj(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function BE(n){return n+""}function Ys(n){const e=n.length;if(Qe(e>=2),e===2)return Qe(n.charAt(0)===""&&n.charAt(1)===""),Ft.emptyPath();const t=e-2,r=[];let s="";for(let o=0;o<e;){const l=n.indexOf("",o);switch((l<0||l>t)&&Ue(),n.charAt(l+1)){case"":const u=n.substring(o,l);let d;s.length===0?d=u:(s+=u,d=s,s=""),r.push(d);break;case"":s+=n.substring(o,l),s+="\0";break;case"":s+=n.substring(o,l+1);break;default:Ue()}o=l+2}return new Ft(r)}const qE=["userId","batchId"];function Nh(n,e){return[n,xr(e)]}function N1(n,e,t){return[n,xr(e),t]}const Fj={},Uj=["prefixPath","collectionGroup","readTime","documentId"],$j=["prefixPath","collectionGroup","documentId"],zj=["collectionGroup","readTime","prefixPath","documentId"],Bj=["canonicalId","targetId"],qj=["targetId","path"],Hj=["path","targetId"],Gj=["collectionId","parent"],Kj=["indexId","uid"],Wj=["uid","sequenceNumber"],Qj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yj=["indexId","uid","orderedDocumentKey"],Jj=["userId","collectionPath","documentId"],Xj=["userId","collectionPath","largestBatchId"],Zj=["userId","collectionGroup","largestBatchId"],D1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eV=[...D1,"documentOverlays"],O1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],M1=O1,Zy=[...M1,"indexConfiguration","indexState","indexEntries"],tV=Zy,nV=[...Zy,"globals"];class Fg extends A1{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Pn(n,e){const t=He(n);return wo.F(t._e,e)}function HE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function L1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Xt{constructor(e,t){this.comparator=e,this.root=t||Yn.EMPTY}insert(e,t){return new Xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dh(this.root,e,this.comparator,!0)}}class dh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yn{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Yn.RED,this.left=s??Yn.EMPTY,this.right=o??Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Yn(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Yn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(e,t,r,s,o){return this}insert(e,t,r){return new Yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new GE(this.data.getIterator())}getIteratorFrom(e){return new GE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class GE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bl(n){return n.hasNext()?n.getNext():void 0}class zr{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new zr([])}unionWith(e){let t=new Gt(un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class j1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new j1("Invalid base64 string: "+o):o}})(e);return new wn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const rV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(n){if(Qe(!!n),typeof n=="string"){let e=0;const t=rV.exec(n);if(Qe(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:on(n.seconds),nanos:on(n.nanos)}}function on(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Io(n){return typeof n=="string"?wn.fromBase64String(n):wn.fromUint8Array(n)}function Mf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ev(n){const e=n.mapValue.fields.__previous_value__;return Mf(e)?ev(e):e}function Su(n){const e=ji(n.mapValue.fields.__local_write_time__.timestampValue);return new dn(e.seconds,e.nanos)}class sV{constructor(e,t,r,s,o,l,u,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p}}class Ca{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ca("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ca&&e.projectId===this.projectId&&e.database===this.database}}const go={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dh={nullValue:"NULL_VALUE"};function Pa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mf(n)?4:V1(n)?9007199254740991:Lf(n)?10:11:Ue()}function ti(n,e){if(n===e)return!0;const t=Pa(n);if(t!==Pa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Su(n).isEqual(Su(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=ji(s.timestampValue),u=ji(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return Io(s.bytesValue).isEqual(Io(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return on(s.geoPointValue.latitude)===on(o.geoPointValue.latitude)&&on(s.geoPointValue.longitude)===on(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return on(s.integerValue)===on(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=on(s.doubleValue),u=on(o.doubleValue);return l===u?bu(l)===bu(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return ql(n.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(HE(l)!==HE(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!ti(l[d],u[d])))return!1;return!0})(n,e);default:return Ue()}}function ku(n,e){return(n.values||[]).find((t=>ti(t,e)))!==void 0}function bo(n,e){if(n===e)return 0;const t=Pa(n),r=Pa(e);if(t!==r)return ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ht(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=on(o.integerValue||o.doubleValue),d=on(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return KE(n.timestampValue,e.timestampValue);case 4:return KE(Su(n),Su(e));case 5:return ht(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=Io(o),d=Io(l);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let p=0;p<u.length&&p<d.length;p++){const y=ht(u[p],d[p]);if(y!==0)return y}return ht(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=ht(on(o.latitude),on(l.latitude));return u!==0?u:ht(on(o.longitude),on(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return WE(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var u,d,p,y;const _=o.fields||{},T=l.fields||{},S=(u=_.value)===null||u===void 0?void 0:u.arrayValue,P=(d=T.value)===null||d===void 0?void 0:d.arrayValue,M=ht(((p=S?.values)===null||p===void 0?void 0:p.length)||0,((y=P?.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:WE(S,P)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===go.mapValue&&l===go.mapValue)return 0;if(o===go.mapValue)return 1;if(l===go.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),p=l.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let _=0;_<d.length&&_<y.length;++_){const T=ht(d[_],y[_]);if(T!==0)return T;const S=bo(u[d[_]],p[y[_]]);if(S!==0)return S}return ht(d.length,y.length)})(n.mapValue,e.mapValue);default:throw Ue()}}function KE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ht(n,e);const t=ji(n),r=ji(e),s=ht(t.seconds,r.seconds);return s!==0?s:ht(t.nanos,r.nanos)}function WE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=bo(t[s],r[s]);if(o)return o}return ht(t.length,r.length)}function Hl(n){return Ug(n)}function Ug(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ji(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Io(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Ug(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Ug(t.fields[l])}`;return s+"}"})(n.mapValue):Ue()}function Na(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $g(n){return!!n&&"integerValue"in n}function Ru(n){return!!n&&"arrayValue"in n}function QE(n){return!!n&&"nullValue"in n}function YE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Oh(n){return!!n&&"mapValue"in n}function Lf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function cu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qa(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=cu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function V1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const F1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function iV(n){return"nullValue"in n?Dh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Na(Ca.empty(),Ie.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Lf(n)?F1:{mapValue:{}}:Ue()}function oV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Na(Ca.empty(),Ie.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?F1:"mapValue"in n?Lf(n)?{mapValue:{}}:go:Ue()}function JE(n,e){const t=bo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function XE(n,e){const t=bo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(t)}setAll(e){let t=un.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=u.popLast()}l?r[u.lastSegment()]=cu(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Oh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){qa(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new dr(cu(this.value))}}function U1(n){const e=[];return qa(n.fields,((t,r)=>{const s=new un([t]);if(Oh(r)){const o=U1(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new zr(e)}class pn{constructor(e,t,r,s,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new pn(e,0,Xe.min(),Xe.min(),Xe.min(),dr.empty(),0)}static newFoundDocument(e,t,r,s){return new pn(e,1,t,Xe.min(),r,s,0)}static newNoDocument(e,t){return new pn(e,2,t,Xe.min(),Xe.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Xe.min(),Xe.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class So{constructor(e,t){this.position=e,this.inclusive=t}}function ZE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=Ie.comparator(Ie.fromName(l.referenceValue),t.key):r=bo(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function eT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ti(n.position[t],e.position[t]))return!1;return!0}class Au{constructor(e,t="asc"){this.field=e,this.dir=t}}function aV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class $1{}class At extends $1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new lV(e,t,r):t==="array-contains"?new dV(e,r):t==="in"?new K1(e,r):t==="not-in"?new hV(e,r):t==="array-contains-any"?new fV(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new cV(e,r):new uV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(bo(t,this.value)):t!==null&&Pa(this.value)===Pa(t)&&this.matchesComparison(bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends $1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ht(e,t)}matches(e){return Gl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gl(n){return n.op==="and"}function zg(n){return n.op==="or"}function tv(n){return z1(n)&&Gl(n)}function z1(n){for(const e of n.filters)if(e instanceof Ht)return!1;return!0}function Bg(n){if(n instanceof At)return n.field.canonicalString()+n.op.toString()+Hl(n.value);if(tv(n))return n.filters.map((e=>Bg(e))).join(",");{const e=n.filters.map((t=>Bg(t))).join(",");return`${n.op}(${e})`}}function B1(n,e){return n instanceof At?(function(r,s){return s instanceof At&&r.op===s.op&&r.field.isEqual(s.field)&&ti(r.value,s.value)})(n,e):n instanceof Ht?(function(r,s){return s instanceof Ht&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,u)=>o&&B1(l,s.filters[u])),!0):!1})(n,e):void Ue()}function q1(n,e){const t=n.filters.concat(e);return Ht.create(t,n.op)}function H1(n){return n instanceof At?(function(t){return`${t.field.canonicalString()} ${t.op} ${Hl(t.value)}`})(n):n instanceof Ht?(function(t){return t.op.toString()+" {"+t.getFilters().map(H1).join(" ,")+"}"})(n):"Filter"}class lV extends At{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class cV extends At{constructor(e,t){super(e,"in",t),this.keys=G1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class uV extends At{constructor(e,t){super(e,"not-in",t),this.keys=G1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function G1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Ie.fromName(r.referenceValue)))}class dV extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ru(t)&&ku(t.arrayValue,this.value)}}class K1 extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ku(this.value.arrayValue,t)}}class hV extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ku(this.value.arrayValue,t)}}class fV extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ru(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ku(this.value.arrayValue,r)))}}class pV{constructor(e,t=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.ue=null}}function qg(n,e=null,t=[],r=[],s=null,o=null,l=null){return new pV(n,e,t,r,s,o,l)}function Da(n){const e=He(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Bg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Of(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Hl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Hl(r))).join(",")),e.ue=t}return e.ue}function qu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!B1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eT(n.startAt,e.startAt)&&eT(n.endAt,e.endAt)}function tf(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function nf(n,e){return n.filters.filter((t=>t instanceof At&&t.field.isEqual(e)))}function tT(n,e,t){let r=Dh,s=!0;for(const o of nf(n,e)){let l=Dh,u=!0;switch(o.op){case"<":case"<=":l=iV(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,u=!1;break;case"!=":case"not-in":l=Dh}JE({value:r,inclusive:s},{value:l,inclusive:u})<0&&(r=l,s=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];JE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}function nT(n,e,t){let r=go,s=!0;for(const o of nf(n,e)){let l=go,u=!0;switch(o.op){case">=":case">":l=oV(o.value),u=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,u=!1;break;case"!=":case"not-in":l=go}XE({value:r,inclusive:s},{value:l,inclusive:u})>0&&(r=l,s=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];XE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}class Ha{constructor(e,t=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function W1(n,e,t,r,s,o,l,u){return new Ha(n,e,t,r,s,o,l,u)}function Hu(n){return new Ha(n)}function rT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nv(n){return n.collectionGroup!==null}function Fl(n){const e=He(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Gt(un.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(u=u.add(p.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Au(o,r))})),t.has(un.keyField().canonicalString())||e.ce.push(new Au(un.keyField(),r))}return e.ce}function rs(n){const e=He(n);return e.le||(e.le=mV(e,Fl(n))),e.le}function mV(n,e){if(n.limitType==="F")return qg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Au(s.field,o)}));const t=n.endAt?new So(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new So(n.startAt.position,n.startAt.inclusive):null;return qg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Hg(n,e){const t=n.filters.concat([e]);return new Ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rf(n,e,t){return new Ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jf(n,e){return qu(rs(n),rs(e))&&n.limitType===e.limitType}function Q1(n){return`${Da(rs(n))}|lt:${n.limitType}`}function Pl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>H1(s))).join(", ")}]`),Of(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Hl(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Hl(s))).join(",")),`Target(${r})`})(rs(n))}; limitType=${n.limitType})`}function Gu(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ie.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of Fl(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const p=ZE(l,u,d);return l.inclusive?p<=0:p<0})(r.startAt,Fl(r),s)||r.endAt&&!(function(l,u,d){const p=ZE(l,u,d);return l.inclusive?p>=0:p>0})(r.endAt,Fl(r),s))})(n,e)}function Y1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function J1(n){return(e,t)=>{let r=!1;for(const s of Fl(n)){const o=gV(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function gV(n,e,t){const r=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(o,l,u){const d=l.data.field(o),p=u.data.field(o);return d!==null&&p!==null?bo(d,p):Ue()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ue()}}class Oo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qa(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return L1(this.inner)}size(){return this.innerSize}}const yV=new Xt(Ie.comparator);function Zr(){return yV}const X1=new Xt(Ie.comparator);function nu(...n){let e=X1;for(const t of n)e=e.insert(t.key,t);return e}function Z1(n){let e=X1;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Js(){return uu()}function eS(){return uu()}function uu(){return new Oo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const vV=new Xt(Ie.comparator),_V=new Gt(Ie.comparator);function Tt(...n){let e=_V;for(const t of n)e=e.add(t);return e}const wV=new Gt(ht);function rv(){return wV}function sv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(e)?"-0":e}}function tS(n){return{integerValue:""+n}}function nS(n,e){return P1(e)?tS(e):sv(n,e)}class Vf{constructor(){this._=void 0}}function EV(n,e,t){return n instanceof Kl?(function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Mf(o)&&(o=ev(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}})(t,e):n instanceof Wl?sS(n,e):n instanceof Ql?iS(n,e):(function(s,o){const l=rS(s,o),u=sT(l)+sT(s.Pe);return $g(l)&&$g(s.Pe)?tS(u):sv(s.serializer,u)})(n,e)}function TV(n,e,t){return n instanceof Wl?sS(n,e):n instanceof Ql?iS(n,e):t}function rS(n,e){return n instanceof Yl?(function(r){return $g(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Kl extends Vf{}class Wl extends Vf{constructor(e){super(),this.elements=e}}function sS(n,e){const t=oS(e);for(const r of n.elements)t.some((s=>ti(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ql extends Vf{constructor(e){super(),this.elements=e}}function iS(n,e){let t=oS(e);for(const r of n.elements)t=t.filter((s=>!ti(s,r)));return{arrayValue:{values:t}}}class Yl extends Vf{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function sT(n){return on(n.integerValue||n.doubleValue)}function oS(n){return Ru(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class iv{constructor(e,t){this.field=e,this.transform=t}}function xV(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Wl&&s instanceof Wl||r instanceof Ql&&s instanceof Ql?ql(r.elements,s.elements,ti):r instanceof Yl&&s instanceof Yl?ti(r.Pe,s.Pe):r instanceof Kl&&s instanceof Kl})(n.transform,e.transform)}class IV{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ff{}function aS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ku(n.key,Bn.none()):new dc(n.key,n.data,Bn.none());{const t=n.data,r=dr.empty();let s=new Gt(un.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Ui(n.key,r,new zr(s.toArray()),Bn.none())}}function bV(n,e,t){n instanceof dc?(function(s,o,l){const u=s.value.clone(),d=oT(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Ui?(function(s,o,l){if(!Mh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=oT(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(lS(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function du(n,e,t,r){return n instanceof dc?(function(o,l,u,d){if(!Mh(o.precondition,l))return u;const p=o.value.clone(),y=aT(o.fieldTransforms,d,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ui?(function(o,l,u,d){if(!Mh(o.precondition,l))return u;const p=aT(o.fieldTransforms,d,l),y=l.data;return y.setAll(lS(o)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,e,t,r):(function(o,l,u){return Mh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function SV(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=rS(r.transform,s||null);o!=null&&(t===null&&(t=dr.empty()),t.set(r.field,o))}return t||null}function iT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ql(r,s,((o,l)=>xV(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class dc extends Ff{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ui extends Ff{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function lS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function oT(n,e,t){const r=new Map;Qe(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,TV(l,u,t[s]))}return r}function aT(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,EV(o,l,e))}return r}class Ku extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cS extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ov{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&bV(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=du(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=du(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eS();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=aS(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Xe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Tt())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,((t,r)=>iT(t,r)))&&ql(this.baseMutations,e.baseMutations,((t,r)=>iT(t,r)))}}class av{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Qe(e.mutations.length===r.length);let s=(function(){return vV})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new av(e,t,r,s)}}class lv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class kV{constructor(e,t){this.count=e,this.unchangedNames=t}}var In,Ot;function RV(n){switch(n){default:return Ue();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function uS(n){if(n===void 0)return _n("GRPC error has no .code"),re.UNKNOWN;switch(n){case In.OK:return re.OK;case In.CANCELLED:return re.CANCELLED;case In.UNKNOWN:return re.UNKNOWN;case In.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case In.INTERNAL:return re.INTERNAL;case In.UNAVAILABLE:return re.UNAVAILABLE;case In.UNAUTHENTICATED:return re.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case In.NOT_FOUND:return re.NOT_FOUND;case In.ALREADY_EXISTS:return re.ALREADY_EXISTS;case In.PERMISSION_DENIED:return re.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case In.ABORTED:return re.ABORTED;case In.OUT_OF_RANGE:return re.OUT_OF_RANGE;case In.UNIMPLEMENTED:return re.UNIMPLEMENTED;case In.DATA_LOSS:return re.DATA_LOSS;default:return Ue()}}(Ot=In||(In={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";function AV(){return new TextEncoder}const CV=new _a([4294967295,4294967295],0);function lT(n){const e=AV().encode(n),t=new y1;return t.update(e),new Uint8Array(t.digest())}function cT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _a([t,r],0),new _a([s,o],0)]}class cv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ru(`Invalid padding: ${t}`);if(r<0)throw new ru(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ru(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=_a.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(_a.fromNumber(r)));return s.compare(CV)===1&&(s=new _a([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=lT(e),[r,s]=cT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);if(!this.de(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new cv(o,s,t);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.Ie===0)return;const t=lT(e),[r,s]=cT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wu{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wu(Xe.min(),s,new Xt(ht),Zr(),Tt())}}class Qu{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Qu(r,t,Tt(),Tt(),Tt())}}class Lh{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class dS{constructor(e,t){this.targetId=e,this.me=t}}class hS{constructor(e,t,r=wn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class uT{constructor(){this.fe=0,this.ge=hT(),this.pe=wn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Tt(),t=Tt(),r=Tt();return this.ge.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ue()}})),new Qu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=hT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class PV{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zr(),this.qe=dT(),this.Qe=new Xt(ht)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ue()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,s)=>{this.ze(s)&&t(s)}))}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const o=s.target;if(tf(o))if(r===0){const l=new Ie(o.path);this.Ue(t,l,pn.newNoDocument(l,Xe.min()))}else Qe(r===1);else{const l=this.Ye(t);if(l!==r){const u=this.Ze(e),d=u?this.Xe(u,e,l):1;if(d!==0){this.je(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,p)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=Io(r).toUint8Array()}catch(d){if(d instanceof j1)return Aa("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new cv(l,s,o)}catch(d){return Aa(d instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Le.tt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(t,o,null),s++)})),s}rt(e){const t=new Map;this.Be.forEach(((o,l)=>{const u=this.Je(l);if(u){if(o.current&&tf(u.target)){const d=new Ie(u.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,pn.newNoDocument(d,e))}o.be&&(t.set(l,o.ve()),o.Ce())}}));let r=Tt();this.qe.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const p=this.Je(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.ke.forEach(((o,l)=>l.setReadTime(e)));const s=new Wu(e,t,this.Qe,this.ke,r);return this.ke=Zr(),this.qe=dT(),this.Qe=new Xt(ht),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new uT,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Gt(ht),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uT),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function dT(){return new Xt(Ie.comparator)}function hT(){return new Xt(Ie.comparator)}const NV={asc:"ASCENDING",desc:"DESCENDING"},DV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OV={and:"AND",or:"OR"};class MV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gg(n,e){return n.useProto3Json||Of(e)?e:{value:e}}function Jl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function LV(n,e){return Jl(n,e.toTimestamp())}function Ir(n){return Qe(!!n),Xe.fromTimestamp((function(t){const r=ji(t);return new dn(r.seconds,r.nanos)})(n))}function uv(n,e){return Kg(n,e).canonicalString()}function Kg(n,e){const t=(function(s){return new Ft(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pS(n){const e=Ft.fromString(n);return Qe(xS(e)),e}function sf(n,e){return uv(n.databaseId,e.path)}function wa(n,e){const t=pS(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(yS(t))}function mS(n,e){return uv(n.databaseId,e)}function gS(n){const e=pS(n);return e.length===4?Ft.emptyPath():yS(e)}function Wg(n){return new Ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yS(n){return Qe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function fT(n,e,t){return{name:sf(n,e),fields:t.value.mapValue.fields}}function jV(n,e,t){const r=wa(n,e.name),s=Ir(e.updateTime),o=e.createTime?Ir(e.createTime):Xe.min(),l=new dr({mapValue:{fields:e.fields}}),u=pn.newFoundDocument(r,s,o,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function VV(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ue()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,y){return p.useProto3Json?(Qe(y===void 0||typeof y=="string"),wn.fromBase64String(y||"")):(Qe(y===void 0||y instanceof Buffer||y instanceof Uint8Array),wn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(p){const y=p.code===void 0?re.UNKNOWN:uS(p.code);return new pe(y,p.message||"")})(l);t=new hS(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wa(n,r.document.name),o=Ir(r.document.updateTime),l=r.document.createTime?Ir(r.document.createTime):Xe.min(),u=new dr({mapValue:{fields:r.document.fields}}),d=pn.newFoundDocument(s,o,l,u),p=r.targetIds||[],y=r.removedTargetIds||[];t=new Lh(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wa(n,r.document),o=r.readTime?Ir(r.readTime):Xe.min(),l=pn.newNoDocument(s,o),u=r.removedTargetIds||[];t=new Lh([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wa(n,r.document),o=r.removedTargetIds||[];t=new Lh([],o,s,null)}else{if(!("filter"in e))return Ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new kV(s,o),u=r.targetId;t=new dS(u,l)}}return t}function of(n,e){let t;if(e instanceof dc)t={update:fT(n,e.key,e.value)};else if(e instanceof Ku)t={delete:sf(n,e.key)};else if(e instanceof Ui)t={update:fT(n,e.key,e.data),updateMask:qV(e.fieldMask)};else{if(!(e instanceof cS))return Ue();t={verify:sf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof Kl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Wl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ql)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Yl)return{fieldPath:l.field.canonicalString(),increment:u.Pe};throw Ue()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:LV(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue()})(n,e.precondition)),t}function Qg(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Bn.updateTime(Ir(o.updateTime)):o.exists!==void 0?Bn.exists(o.exists):Bn.none()})(e.currentDocument):Bn.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(l,u){let d=null;if("setToServerValue"in u)Qe(u.setToServerValue==="REQUEST_TIME"),d=new Kl;else if("appendMissingElements"in u){const y=u.appendMissingElements.values||[];d=new Wl(y)}else if("removeAllFromArray"in u){const y=u.removeAllFromArray.values||[];d=new Ql(y)}else"increment"in u?d=new Yl(l,u.increment):Ue();const p=un.fromServerFormat(u.fieldPath);return new iv(p,d)})(n,s))):[];if(e.update){e.update.name;const s=wa(n,e.update.name),o=new dr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(d){const p=d.fieldPaths||[];return new zr(p.map((y=>un.fromServerFormat(y))))})(e.updateMask);return new Ui(s,o,l,t,r)}return new dc(s,o,t,r)}if(e.delete){const s=wa(n,e.delete);return new Ku(s,t)}if(e.verify){const s=wa(n,e.verify);return new cS(s,t)}return Ue()}function FV(n,e){return n&&n.length>0?(Qe(e!==void 0),n.map((t=>(function(s,o){let l=s.updateTime?Ir(s.updateTime):Ir(o);return l.isEqual(Xe.min())&&(l=Ir(o)),new IV(l,s.transformResults||[])})(t,e)))):[]}function vS(n,e){return{documents:[mS(n,e.path)]}}function _S(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=mS(n,s);const o=(function(p){if(p.length!==0)return TS(Ht.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((y=>(function(T){return{field:Nl(T.field),direction:$V(T.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Gg(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{_t:t,parent:s}}function wS(n){let e=gS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Qe(r===1);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=(function(_){const T=ES(_);return T instanceof Ht&&tv(T)?T.getFilters():[T]})(t.where));let l=[];t.orderBy&&(l=(function(_){return _.map((T=>(function(P){return new Au(Dl(P.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(t.orderBy));let u=null;t.limit&&(u=(function(_){let T;return T=typeof _=="object"?_.value:_,Of(T)?null:T})(t.limit));let d=null;t.startAt&&(d=(function(_){const T=!!_.before,S=_.values||[];return new So(S,T)})(t.startAt));let p=null;return t.endAt&&(p=(function(_){const T=!_.before,S=_.values||[];return new So(S,T)})(t.endAt)),W1(e,s,l,o,u,"F",d,p)}function UV(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ES(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Dl(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Dl(t.unaryFilter.field);return At.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Dl(t.unaryFilter.field);return At.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Dl(t.unaryFilter.field);return At.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}})(n):n.fieldFilter!==void 0?(function(t){return At.create(Dl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ht.create(t.compositeFilter.filters.map((r=>ES(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue()}})(t.compositeFilter.op))})(n):Ue()}function $V(n){return NV[n]}function zV(n){return DV[n]}function BV(n){return OV[n]}function Nl(n){return{fieldPath:n.canonicalString()}}function Dl(n){return un.fromServerFormat(n.fieldPath)}function TS(n){return n instanceof At?(function(t){if(t.op==="=="){if(YE(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NAN"}};if(QE(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(YE(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NAN"}};if(QE(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nl(t.field),op:zV(t.op),value:t.value}}})(n):n instanceof Ht?(function(t){const r=t.getFilters().map((s=>TS(s)));return r.length===1?r[0]:{compositeFilter:{op:BV(t.op),filters:r}}})(n):Ue()}function qV(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ci{constructor(e,t,r,s,o=Xe.min(),l=Xe.min(),u=wn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IS{constructor(e){this.ct=e}}function HV(n,e){let t;if(e.document)t=jV(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ie.fromSegments(e.noDocument.path),s=Ma(e.noDocument.readTime);t=pn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ue();{const r=Ie.fromSegments(e.unknownDocument.path),s=Ma(e.unknownDocument.version);t=pn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const o=new dn(s[0],s[1]);return Xe.fromTimestamp(o)})(e.readTime)),t}function pT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:af(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,l){return{name:sf(o,l.key),fields:l.data.value.mapValue.fields,updateTime:Jl(o,l.version.toTimestamp()),createTime:Jl(o,l.createTime.toTimestamp())}})(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Oa(e.version)};else{if(!e.isUnknownDocument())return Ue();r.unknownDocument={path:t.path.toArray(),version:Oa(e.version)}}return r}function af(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Oa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ma(n){const e=new dn(n.seconds,n.nanoseconds);return Xe.fromTimestamp(e)}function fa(n,e){const t=(e.baseMutations||[]).map((o=>Qg(n.ct,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>Qg(n.ct,o))),s=dn.fromMillis(e.localWriteTimeMs);return new ov(e.batchId,s,t,r)}function su(n){const e=Ma(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ma(n.lastLimboFreeSnapshotVersion):Xe.min();let r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){return Qe(o.documents.length===1),rs(Hu(gS(o.documents[0])))})(n.query):(function(o){return rs(wS(o))})(n.query),new Ci(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,wn.fromBase64String(n.resumeToken))}function bS(n,e){const t=Oa(e.snapshotVersion),r=Oa(e.lastLimboFreeSnapshotVersion);let s;s=tf(e.target)?vS(n.ct,e.target):_S(n.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Da(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function SS(n){const e=wS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rf(e,e.limit,"L"):e}function Km(n,e){return new lv(e.largestBatchId,Qg(n.ct,e.overlayMutation))}function mT(n,e){const t=e.path.lastSegment();return[n,xr(e.path.popLast()),t]}function gT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Oa(r.readTime),documentKey:xr(r.documentKey.path),largestBatchId:r.largestBatchId}}class GV{getBundleMetadata(e,t){return yT(e).get(t).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Ma(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,t){return yT(e).put((function(s){return{bundleId:s.id,createTime:Oa(Ir(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return vT(e).get(t).next((r=>{if(r)return(function(o){return{name:o.name,query:SS(o.bundledQuery),readTime:Ma(o.readTime)}})(r)}))}saveNamedQuery(e,t){return vT(e).put((function(s){return{name:s.name,readTime:Oa(Ir(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function yT(n){return Pn(n,"bundles")}function vT(n){return Pn(n,"namedQueries")}class Uf{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new Uf(e,r)}getOverlay(e,t){return Gc(e).get(mT(this.userId,t)).next((r=>r?Km(this.serializer,r):null))}getOverlays(e,t){const r=Js();return G.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((o,l)=>{const u=new lv(t,l);s.push(this.ht(e,u))})),G.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((l=>s.add(xr(l.getCollectionPath()))));const o=[];return s.forEach((l=>{const u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(Gc(e).j("collectionPathOverlayIndex",u))})),G.waitFor(o)}getOverlaysForCollection(e,t,r){const s=Js(),o=xr(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Gc(e).U("collectionPathOverlayIndex",l).next((u=>{for(const d of u){const p=Km(this.serializer,d);s.set(p.getKey(),p)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const o=Js();let l;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gc(e).J({index:"collectionGroupOverlayIndex",range:u},((d,p,y)=>{const _=Km(this.serializer,p);o.size()<s||_.largestBatchId===l?(o.set(_.getKey(),_),l=_.largestBatchId):y.done()})).next((()=>o))}ht(e,t){return Gc(e).put((function(s,o,l){const[u,d,p]=mT(o,l.mutation.key);return{userId:o,collectionPath:d,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:of(s.ct,l.mutation)}})(this.serializer,this.userId,t))}}function Gc(n){return Pn(n,"documentOverlays")}class KV{Pt(e){return Pn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((t=>{const r=t?.value;return r?wn.fromUint8Array(r):wn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class pa{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(on(e.integerValue));else if("doubleValue"in e){const r=on(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),bu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ji(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Io(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?V1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Lf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ue()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const s of Object.keys(r))this.Vt(s,t),this.Tt(r[s],t)}wt(e,t){var r,s;const o=e.fields||{};this.dt(t,53);const l="value",u=((s=(r=o[l].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(t,15),t.At(on(u)),this.Vt(l,t),this.Tt(o[l],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const s of r)this.Tt(s,t)}yt(e,t){this.dt(t,37),Ie.fromName(e).path.forEach((r=>{this.dt(t,60),this.Dt(r,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}pa.vt=new pa;function WV(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function _T(n){const e=64-(function(r){let s=0;for(let o=0;o<8;++o){const l=WV(255&r[o]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class QV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=t.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=t.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const t=this.qt(e),r=_T(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Kt(e){const t=this.qt(e),r=_T(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class YV{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class JV{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Kc{constructor(){this.jt=new QV,this.Ht=new YV(this.jt),this.Jt=new JV(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class ma{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ma(this.indexId,this.documentKey,this.arrayValue,r)}}function lo(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=wT(n.arrayValue,e.arrayValue),t!==0?t:(t=wT(n.directionalValue,e.directionalValue),t!==0?t:Ie.comparator(n.documentKey,e.documentKey)))}function wT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}class ET{constructor(e){this.Xt=new Gt(((t,r)=>un.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Qe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Vg(e);if(t!==void 0&&!this.sn(t))return!1;const r=da(e);let s=new Set,o=0,l=0;for(;o<r.length&&this.sn(r[o]);++o)s=s.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){const u=this.Xt.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=r[o];if(!this.on(u,d)||!this._n(this.en[l++],d))return!1}++o}for(;o<r.length;++o){const u=r[o];if(l>=this.en.length||!this._n(this.en[l++],u))return!1}return!0}an(){if(this.nn)return null;let e=new Gt(un.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ph(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ph(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ph(r.field,r.dir==="asc"?0:1)));return new ef(ef.UNKNOWN_ID,this.collectionId,t,Iu.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function kS(n){var e,t;if(Qe(n instanceof At||n instanceof Ht),n instanceof At){if(n instanceof K1){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((o=>At.create(n.field,"==",o))))||[];return Ht.create(s,"or")}return n}const r=n.filters.map((s=>kS(s)));return Ht.create(r,n.op)}function XV(n){if(n.getFilters().length===0)return[];const e=Xg(kS(n));return Qe(RS(e)),Yg(e)||Jg(e)?[e]:e.getFilters()}function Yg(n){return n instanceof At}function Jg(n){return n instanceof Ht&&tv(n)}function RS(n){return Yg(n)||Jg(n)||(function(t){if(t instanceof Ht&&zg(t)){for(const r of t.getFilters())if(!Yg(r)&&!Jg(r))return!1;return!0}return!1})(n)}function Xg(n){if(Qe(n instanceof At||n instanceof Ht),n instanceof At)return n;if(n.filters.length===1)return Xg(n.filters[0]);const e=n.filters.map((r=>Xg(r)));let t=Ht.create(e,n.op);return t=lf(t),RS(t)?t:(Qe(t instanceof Ht),Qe(Gl(t)),Qe(t.filters.length>1),t.filters.reduce(((r,s)=>dv(r,s))))}function dv(n,e){let t;return Qe(n instanceof At||n instanceof Ht),Qe(e instanceof At||e instanceof Ht),t=n instanceof At?e instanceof At?(function(s,o){return Ht.create([s,o],"and")})(n,e):TT(n,e):e instanceof At?TT(e,n):(function(s,o){if(Qe(s.filters.length>0&&o.filters.length>0),Gl(s)&&Gl(o))return q1(s,o.getFilters());const l=zg(s)?s:o,u=zg(s)?o:s,d=l.filters.map((p=>dv(p,u)));return Ht.create(d,"or")})(n,e),lf(t)}function TT(n,e){if(Gl(e))return q1(e,n.getFilters());{const t=e.filters.map((r=>dv(n,r)));return Ht.create(t,"or")}}function lf(n){if(Qe(n instanceof At||n instanceof Ht),n instanceof At)return n;const e=n.getFilters();if(e.length===1)return lf(e[0]);if(z1(n))return n;const t=e.map((s=>lf(s))),r=[];return t.forEach((s=>{s instanceof At?r.push(s):s instanceof Ht&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Ht.create(r,n.op)}class ZV{constructor(){this.un=new hv}addToCollectionParentIndex(e,t){return this.un.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(is.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(is.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class hv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Gt(Ft.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Gt(Ft.comparator)).toArray()}}const hh=new Uint8Array(0);class e4{constructor(e,t){this.databaseId=t,this.cn=new hv,this.ln=new Oo((r=>Da(r)),((r,s)=>qu(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const o={collectionId:r,parent:xr(s)};return xT(e).put(o)}return G.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[b1(t),""],!1,!0);return xT(e).U(s).next((o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Ys(l.parent))}return r}))}addFieldIndex(e,t){const r=Wc(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=r.add(s);if(t.indexState){const l=kl(e);return o.next((u=>{l.put(gT(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const r=Wc(e),s=kl(e),o=Sl(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Wc(e),r=Sl(e),s=kl(e);return t.j().next((()=>r.j())).next((()=>s.j()))}createTargetIndexes(e,t){return G.forEach(this.hn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const o=new ET(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const r=Sl(e);let s=!0;const o=new Map;return G.forEach(this.hn(t),(l=>this.Pn(e,l).next((u=>{s&&(s=!!u),o.set(l,u)})))).next((()=>{if(s){let l=Tt();const u=[];return G.forEach(o,((d,p)=>{ce("IndexedDbIndexManager",`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((ae=>`${ae.fieldPath}:${ae.kind}`)).join(",")}`})(d)} to execute ${Da(t)}`);const y=(function(Q,ae){const de=Vg(ae);if(de===void 0)return null;for(const me of nf(Q,de.fieldPath))switch(me.op){case"array-contains-any":return me.value.arrayValue.values||[];case"array-contains":return[me.value]}return null})(p,d),_=(function(Q,ae){const de=new Map;for(const me of da(ae))for(const N of nf(Q,me.fieldPath))switch(N.op){case"==":case"in":de.set(me.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return de.set(me.fieldPath.canonicalString(),N.value),Array.from(de.values())}return null})(p,d),T=(function(Q,ae){const de=[];let me=!0;for(const N of da(ae)){const I=N.kind===0?tT(Q,N.fieldPath,Q.startAt):nT(Q,N.fieldPath,Q.startAt);de.push(I.value),me&&(me=I.inclusive)}return new So(de,me)})(p,d),S=(function(Q,ae){const de=[];let me=!0;for(const N of da(ae)){const I=N.kind===0?nT(Q,N.fieldPath,Q.endAt):tT(Q,N.fieldPath,Q.endAt);de.push(I.value),me&&(me=I.inclusive)}return new So(de,me)})(p,d),P=this.In(d,p,T),M=this.In(d,p,S),D=this.Tn(d,p,_),X=this.En(d.indexId,y,P,T.inclusive,M,S.inclusive,D);return G.forEach(X,(W=>r.G(W,t.limit).next((Q=>{Q.forEach((ae=>{const de=Ie.fromSegments(ae.documentKey);l.has(de)||(l=l.add(de),u.push(de))}))}))))})).next((()=>u))}return G.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=XV(Ht.create(e.filters,"and")).map((r=>qg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,r,s,o,l,u){const d=(t!=null?t.length:1)*Math.max(r.length,o.length),p=d/(t!=null?t.length:1),y=[];for(let _=0;_<d;++_){const T=t?this.dn(t[_/p]):hh,S=this.An(e,T,r[_%p],s),P=this.Rn(e,T,o[_%p],l),M=u.map((D=>this.An(e,T,D,!0)));y.push(...this.createRange(S,P,M))}return y}An(e,t,r,s){const o=new ma(e,Ie.empty(),t,r);return s?o:o.Zt()}Rn(e,t,r,s){const o=new ma(e,Ie.empty(),t,r);return s?o.Zt():o}Pn(e,t){const r=new ET(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let l=null;for(const u of o)r.rn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l}))}getIndexType(e,t){let r=2;const s=this.hn(t);return G.forEach(s,(o=>this.Pn(e,o).next((l=>{l?r!==0&&l.fields.length<(function(d){let p=new Gt(un.comparator),y=!1;for(const _ of d.filters)for(const T of _.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?y=!0:p=p.add(T.field));for(const _ of d.orderBy)_.field.isKeyField()||(p=p.add(_.field));return p.size+(y?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&r===2?1:r))}Vn(e,t){const r=new Kc;for(const s of da(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const l=r.Yt(s.kind);pa.vt.It(o,l)}return r.zt()}dn(e){const t=new Kc;return pa.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Kc;return pa.vt.It(Na(this.databaseId,t),r.Yt((function(o){const l=da(o);return l.length===0?0:l[l.length-1].kind})(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let s=[];s.push(new Kc);let o=0;for(const l of da(e)){const u=r[o++];for(const d of s)if(this.fn(t,l.fieldPath)&&Ru(u))s=this.gn(s,l,u);else{const p=d.Yt(l.kind);pa.vt.It(u,p)}}return this.pn(s)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const s=[...e],o=[];for(const l of r.arrayValue.values||[])for(const u of s){const d=new Kc;d.seed(u.zt()),pa.vt.It(l,d.Yt(t.kind)),o.push(d)}return o}fn(e,t){return!!e.filters.find((r=>r instanceof At&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Wc(e),s=kl(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next((o=>{const l=[];return G.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{l.push((function(y,_){const T=_?new Iu(_.sequenceNumber,new is(Ma(_.readTime),new Ie(Ys(_.documentKey)),_.largestBatchId)):Iu.empty(),S=y.fields.map((([P,M])=>new Ph(un.fromServerFormat(P),M)));return new ef(y.indexId,y.collectionGroup,S,T)})(u,d))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const o=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:ht(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Wc(e),o=kl(e);return this.yn(e).next((l=>s.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((u=>G.forEach(u,(d=>o.put(gT(d.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,((s,o)=>{const l=r.get(s.collectionGroup);return(l?G.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(r.set(s.collectionGroup,u),G.forEach(u,(d=>this.wn(e,s,d).next((p=>{const y=this.Sn(o,d);return p.isEqual(y)?G.resolve():this.bn(e,o,d,p,y)})))))))}))}Dn(e,t,r,s){return Sl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,s){return Sl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=Sl(e);let o=new Gt(lo);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},((l,u)=>{o=o.add(new ma(r.indexId,t,u.arrayValue,u.directionalValue))})).next((()=>o))}Sn(e,t){let r=new Gt(lo);const s=this.Vn(t,e);if(s==null)return r;const o=Vg(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Ru(l))for(const u of l.arrayValue.values||[])r=r.add(new ma(t.indexId,e.key,this.dn(u),s))}else r=r.add(new ma(t.indexId,e.key,hh,s));return r}bn(e,t,r,s,o){ce("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return(function(d,p,y,_,T){const S=d.getIterator(),P=p.getIterator();let M=bl(S),D=bl(P);for(;M||D;){let X=!1,W=!1;if(M&&D){const Q=y(M,D);Q<0?W=!0:Q>0&&(X=!0)}else M!=null?W=!0:X=!0;X?(_(D),D=bl(P)):W?(T(M),M=bl(S)):(M=bl(S),D=bl(P))}})(s,o,lo,(u=>{l.push(this.Dn(e,t,r,u))}),(u=>{l.push(this.vn(e,t,r,u))})),G.waitFor(l)}yn(e){let t=1;return kl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,u)=>lo(l,u))).filter(((l,u,d)=>!u||lo(l,d[u-1])!==0));const s=[];s.push(e);for(const l of r){const u=lo(l,e),d=lo(l,t);if(u===0)s[0]=e.Zt();else if(u>0&&d<0)s.push(l),s.push(l.Zt());else if(d>0)break}s.push(t);const o=[];for(let l=0;l<s.length;l+=2){if(this.Cn(s[l],s[l+1]))return[];const u=[s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,hh,[]],d=[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,hh,[]];o.push(IDBKeyRange.bound(u,d))}return o}Cn(e,t){return lo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(IT)}getMinOffset(e,t){return G.mapArray(this.hn(t),(r=>this.Pn(e,r).next((s=>s||Ue())))).next(IT)}}function xT(n){return Pn(n,"collectionParents")}function Sl(n){return Pn(n,"indexEntries")}function Wc(n){return Pn(n,"indexConfiguration")}function kl(n){return Pn(n,"indexState")}function IT(n){Qe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Jy(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new is(e.readTime,e.documentKey,t)}const bT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ur{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function AS(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let u=0;const d=r.J({range:l},((y,_,T)=>(u++,T.delete())));o.push(d.next((()=>{Qe(u===1)})));const p=[];for(const y of t.mutations){const _=N1(e,y.key.path,t.batchId);o.push(s.delete(_)),p.push(y.key)}return G.waitFor(o).next((()=>p))}function cf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ue();e=n.noDocument}return JSON.stringify(e).length}Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(41943040,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);class $f{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,t,r,s){Qe(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new $f(o,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return co(e).J({index:"userMutationsIndex",range:r},((s,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const o=Ol(e),l=co(e);return l.add({}).next((u=>{Qe(typeof u=="number");const d=new ov(u,t,r,s),p=(function(S,P,M){const D=M.baseMutations.map((W=>of(S.ct,W))),X=M.mutations.map((W=>of(S.ct,W)));return{userId:P,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:D,mutations:X}})(this.serializer,this.userId,d),y=[];let _=new Gt(((T,S)=>ht(T.canonicalString(),S.canonicalString())));for(const T of s){const S=N1(this.userId,T.key.path,u);_=_.add(T.key.path.popLast()),y.push(l.put(p)),y.push(o.put(S,Fj))}return _.forEach((T=>{y.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Fn[u]=d.keys()})),G.waitFor(y).next((()=>d))}))}lookupMutationBatch(e,t){return co(e).get(t).next((r=>r?(Qe(r.userId===this.userId),fa(this.serializer,r)):null))}Mn(e,t){return this.Fn[t]?G.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Fn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return co(e).J({index:"userMutationsIndex",range:s},((l,u,d)=>{u.userId===this.userId&&(Qe(u.batchId>=r),o=fa(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return co(e).J({index:"userMutationsIndex",range:t,reverse:!0},((s,o,l)=>{r=o.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return co(e).U("userMutationsIndex",t).next((r=>r.map((s=>fa(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Nh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=[];return Ol(e).J({range:s},((l,u,d)=>{const[p,y,_]=l,T=Ys(y);if(p===this.userId&&t.path.isEqual(T))return co(e).get(_).next((S=>{if(!S)throw Ue();Qe(S.userId===this.userId),o.push(fa(this.serializer,S))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(ht);const s=[];return t.forEach((o=>{const l=Nh(this.userId,o.path),u=IDBKeyRange.lowerBound(l),d=Ol(e).J({range:u},((p,y,_)=>{const[T,S,P]=p,M=Ys(S);T===this.userId&&o.path.isEqual(M)?r=r.add(P):_.done()}));s.push(d)})),G.waitFor(s).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,o=Nh(this.userId,r),l=IDBKeyRange.lowerBound(o);let u=new Gt(ht);return Ol(e).J({range:l},((d,p,y)=>{const[_,T,S]=d,P=Ys(T);_===this.userId&&r.isPrefixOf(P)?P.length===s&&(u=u.add(S)):y.done()})).next((()=>this.xn(e,u)))}xn(e,t){const r=[],s=[];return t.forEach((o=>{s.push(co(e).get(o).next((l=>{if(l===null)throw Ue();Qe(l.userId===this.userId),r.push(fa(this.serializer,l))})))})),G.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return AS(e._e,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),G.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return Ol(e).J({range:r},((o,l,u)=>{if(o[0]===this.userId){const d=Ys(o[1]);s.push(d)}else u.done()})).next((()=>{Qe(s.length===0)}))}))}containsKey(e,t){return CS(e,this.userId,t)}Nn(e){return PS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function CS(n,e,t){const r=Nh(e,t.path),s=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return Ol(n).J({range:o,H:!0},((u,d,p)=>{const[y,_,T]=u;y===e&&_===s&&(l=!0),p.done()})).next((()=>l))}function co(n){return Pn(n,"mutations")}function Ol(n){return Pn(n,"documentMutations")}function PS(n){return Pn(n,"mutationQueues")}class La{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new La(0)}static kn(){return new La(-1)}}class t4{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const r=new La(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((t=>Xe.fromTimestamp(new dn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.qn(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Qn(e,s))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Rl(e).delete(t.targetId))).next((()=>this.qn(e))).next((r=>(Qe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,t,r){let s=0;const o=[];return Rl(e).J(((l,u)=>{const d=su(u);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>G.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Rl(e).J(((r,s)=>{const o=su(s);t(o)}))}qn(e){return ST(e).get("targetGlobalKey").next((t=>(Qe(t!==null),t)))}Qn(e,t){return ST(e).put("targetGlobalKey",t)}Kn(e,t){return Rl(e).put(bS(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Da(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Rl(e).J({range:s,index:"queryTargetsIndex"},((l,u,d)=>{const p=su(u);qu(t,p.target)&&(o=p,d.done())})).next((()=>o))}addMatchingKeys(e,t,r){const s=[],o=po(e);return t.forEach((l=>{const u=xr(l.path);s.push(o.put({targetId:r,path:u})),s.push(this.referenceDelegate.addReference(e,r,l))})),G.waitFor(s)}removeMatchingKeys(e,t,r){const s=po(e);return G.forEach(t,(o=>{const l=xr(o.path);return G.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,t){const r=po(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=po(e);let o=Tt();return s.J({range:r,H:!0},((l,u,d)=>{const p=Ys(l[1]),y=new Ie(p);o=o.add(y)})).next((()=>o))}containsKey(e,t){const r=xr(t.path),s=IDBKeyRange.bound([r],[b1(r)],!1,!0);let o=0;return po(e).J({index:"documentTargetsIndex",H:!0,range:s},(([l,u],d,p)=>{l!==0&&(o++,p.done())})).next((()=>o>0))}ot(e,t){return Rl(e).get(t).next((r=>r?su(r):null))}}function Rl(n){return Pn(n,"targets")}function ST(n){return Pn(n,"targetGlobal")}function po(n){return Pn(n,"targetDocuments")}function kT([n,e],[t,r]){const s=ht(n,t);return s===0?ht(e,r):s}class n4{constructor(e){this.Un=e,this.buffer=new Gt(kT),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class r4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Do(t)?ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await No(t)}await this.Hn(3e5)}))}}class s4{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return G.resolve($r.oe);const r=new n4(t);return this.Jn.forEachTarget(e,(s=>r.zn(s.sequenceNumber))).next((()=>this.Jn.Zn(e,(s=>r.zn(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(bT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bT):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,s,o,l,u,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,l=Date.now(),this.nthSequenceNumber(e,s)))).next((_=>(r=_,u=Date.now(),this.removeTargets(e,r,t)))).next((_=>(o=_,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),Cl()<=bt.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${_} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:_}))))}}function i4(n,e){return new s4(n,e)}class o4{constructor(e,t){this.db=e,this.garbageCollector=i4(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}er(e){let t=0;return this.Zn(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((r,s)=>t(s)))}addReference(e,t,r){return fh(e,r)}removeReference(e,t,r){return fh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fh(e,t)}nr(e,t){return(function(s,o){let l=!1;return PS(s).Y((u=>CS(s,u,o).next((d=>(d&&(l=!0),G.resolve(!d)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.tr(e,((l,u)=>{if(u<=t){const d=this.nr(e,l).next((p=>{if(!p)return o++,r.getEntry(e,l).next((()=>(r.removeEntry(l,Xe.min()),po(e).delete((function(_){return[0,xr(_.path)]})(l)))))}));s.push(d)}})).next((()=>G.waitFor(s))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fh(e,t)}tr(e,t){const r=po(e);let s,o=$r.oe;return r.J({index:"documentTargetsIndex"},(([l,u],{path:d,sequenceNumber:p})=>{l===0?(o!==$r.oe&&t(new Ie(Ys(s)),o),o=p,s=d):o=$r.oe})).next((()=>{o!==$r.oe&&t(new Ie(Ys(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fh(n,e){return po(n).put((function(r,s){return{targetId:0,path:xr(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class NS{constructor(){this.changes=new Oo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class a4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return la(e).put(r)}removeEntry(e,t,r){return la(e).delete((function(o,l){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],af(l),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.rr(e,r))))}getEntry(e,t){let r=pn.newInvalidDocument(t);return la(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qc(t))},((s,o)=>{r=this.ir(t,o)})).next((()=>r))}sr(e,t){let r={size:0,document:pn.newInvalidDocument(t)};return la(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qc(t))},((s,o)=>{r={document:this.ir(t,o),size:cf(o)}})).next((()=>r))}getEntries(e,t){let r=Zr();return this._r(e,t,((s,o)=>{const l=this.ir(s,o);r=r.insert(s,l)})).next((()=>r))}ar(e,t){let r=Zr(),s=new Xt(Ie.comparator);return this._r(e,t,((o,l)=>{const u=this.ir(o,l);r=r.insert(o,u),s=s.insert(o,cf(l))})).next((()=>({documents:r,ur:s})))}_r(e,t,r){if(t.isEmpty())return G.resolve();let s=new Gt(CT);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Qc(s.first()),Qc(s.last())),l=s.getIterator();let u=l.getNext();return la(e).J({index:"documentKeyIndex",range:o},((d,p,y)=>{const _=Ie.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;u&&CT(u,_)<0;)r(u,null),u=l.getNext();u&&u.isEqual(_)&&(r(u,p),u=l.hasNext()?l.getNext():null),u?y.$(Qc(u)):y.done()})).next((()=>{for(;u;)r(u,null),u=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,o){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),af(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return la(e).U(IDBKeyRange.bound(u,d,!0)).next((p=>{o?.incrementDocumentReadCount(p.length);let y=Zr();for(const _ of p){const T=this.ir(Ie.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);T.isFoundDocument()&&(Gu(t,T)||s.has(T.key))&&(y=y.insert(T.key,T))}return y}))}getAllFromCollectionGroup(e,t,r,s){let o=Zr();const l=AT(t,r),u=AT(t,is.max());return la(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,u,!0)},((d,p,y)=>{const _=this.ir(Ie.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(_.key,_),o.size===s&&y.done()})).next((()=>o))}newChangeBuffer(e){return new l4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return RT(e).get("remoteDocumentGlobalKey").next((t=>(Qe(!!t),t)))}rr(e,t){return RT(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=HV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Xe.min())))return r}return pn.newInvalidDocument(e)}}function DS(n){return new a4(n)}class l4 extends NS{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Oo((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new Gt(((o,l)=>ht(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const u=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,u.readTime)),l.isValidDocument()){const d=pT(this.cr.serializer,l);s=s.add(o.path.popLast());const p=cf(d);r+=p-u.size,t.push(this.cr.addEntry(e,o,d))}else if(r-=u.size,this.trackRemovals){const d=pT(this.cr.serializer,l.convertToNoDocument(Xe.min()));t.push(this.cr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.cr.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:r,ur:s})=>(s.forEach(((o,l)=>{this.lr.set(o,{size:l,readTime:r.get(o).readTime})})),r)))}}function RT(n){return Pn(n,"remoteDocumentGlobal")}function la(n){return Pn(n,"remoteDocumentsV14")}function Qc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AT(n,e){const t=e.documentKey.path.toArray();return[n,af(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function CT(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(s=ht(t[o],r[o]),s)return s;return s=ht(t.length,r.length),s||(s=ht(t[t.length-2],r[r.length-2]),s||ht(t[t.length-1],r[r.length-1]))}class c4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class OS{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&du(r.mutation,s,zr.empty(),dn.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Tt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Tt()){const s=Js();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=nu();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Js();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Tt())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,r,s){let o=Zr();const l=uu(),u=(function(){return uu()})();return t.forEach(((d,p)=>{const y=r.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof Ui)?o=o.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),du(y.mutation,p,y.mutation.getFieldMask(),dn.now())):l.set(p.key,zr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((p,y)=>l.set(p,y))),t.forEach(((p,y)=>{var _;return u.set(p,new c4(y,(_=l.get(p))!==null&&_!==void 0?_:null))})),u)))}recalculateAndSaveOverlays(e,t){const r=uu();let s=new Xt(((l,u)=>l-u)),o=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((d=>{const p=t.get(d);if(p===null)return;let y=r.get(d)||zr.empty();y=u.applyToLocalView(p,y),r.set(d,y);const _=(s.get(u.batchId)||Tt()).add(d);s=s.insert(u.batchId,_)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),p=d.key,y=d.value,_=eS();y.forEach((T=>{if(!o.has(T)){const S=aS(t.get(T),r.get(T));S!==null&&_.set(T,S),o=o.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,_))}return G.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return Ie.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):G.resolve(Js());let u=-1,d=o;return l.next((p=>G.forEach(p,((y,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(y)?G.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{d=d.insert(y,T)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,d,p,Tt()))).next((y=>({batchId:u,changes:Z1(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((r=>{let s=nu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=nu();return this.indexManager.getCollectionParents(e,o).next((u=>G.forEach(u,(d=>{const p=(function(_,T){return new Ha(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((y=>{y.forEach(((_,T)=>{l=l.insert(_,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((d,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,pn.newInvalidDocument(y)))}));let u=nu();return l.forEach(((d,p)=>{const y=o.get(d);y!==void 0&&du(y.mutation,p,zr.empty(),dn.now()),Gu(t,p)&&(u=u.insert(d,p))})),u}))}}class u4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return G.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ir(s.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(s){return{name:s.name,query:SS(s.bundledQuery),readTime:Ir(s.readTime)}})(t)),G.resolve()}}class d4{constructor(){this.overlays=new Xt(Ie.comparator),this.Ir=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Js();return G.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.ht(e,t,o)})),G.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const s=Js(),o=t.length+1,l=new Ie(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return G.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Xt(((p,y)=>p-y));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=Js(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const u=Js(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,y)=>u.set(p,y))),!(u.size()>=s)););return G.resolve(u)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new lv(t,r));let o=this.Ir.get(t);o===void 0&&(o=Tt(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}}class h4{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class fv{constructor(){this.Tr=new Gt(Un.Er),this.dr=new Gt(Un.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Un(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new Un(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new Ie(new Ft([])),r=new Un(t,e),s=new Un(t,e+1),o=[];return this.dr.forEachInRange([r,s],(l=>{this.Vr(l),o.push(l.key)})),o}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ie(new Ft([])),r=new Un(t,e),s=new Un(t,e+1);let o=Tt();return this.dr.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Un(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Un{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ie.comparator(e.key,t.key)||ht(e.wr,t.wr)}static Ar(e,t){return ht(e.wr,t.wr)||Ie.comparator(e.key,t.key)}}class f4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Gt(Un.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new ov(o,t,r,s);this.mutationQueue.push(l);for(const u of s)this.br=this.br.add(new Un(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return G.resolve(l)}lookupMutationBatch(e,t){return G.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.vr(r),o=s<0?0:s;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Un(t,0),s=new Un(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,s],(l=>{const u=this.Dr(l.wr);o.push(u)})),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(ht);return t.forEach((s=>{const o=new Un(s,0),l=new Un(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],(u=>{r=r.add(u.wr)}))})),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Ie.isDocumentKey(o)||(o=o.child(""));const l=new Un(new Ie(o),0);let u=new Gt(ht);return this.br.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(u=u.add(d.wr)),!0)}),l),G.resolve(this.Cr(u))}Cr(e){const t=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Qe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return G.forEach(t.mutations,(s=>{const o=new Un(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new Un(t,0),s=this.br.firstAfterOrEqual(r);return G.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class p4{constructor(e){this.Mr=e,this.docs=(function(){return new Xt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=Zr();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():pn.newInvalidDocument(s))})),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Zr();const l=t.path,u=new Ie(l.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||Jy(k1(y),r)<=0||(s.has(y.key)||Gu(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ue()}Or(e,t){return G.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new m4(this)}getSize(e){return G.resolve(this.size)}}class m4 extends NS{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),G.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class g4{constructor(e){this.persistence=e,this.Nr=new Oo((t=>Da(t)),qu),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fv,this.targetCount=0,this.kr=La.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,s)=>t(s))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),G.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new La(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Kn(t),G.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Nr.forEach(((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),G.waitFor(o).next((()=>s))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),G.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.Br.containsKey(t))}}class MS{constructor(e,t){this.qr={},this.overlays={},this.Qr=new $r(0),this.Kr=!1,this.Kr=!0,this.$r=new h4,this.referenceDelegate=e(this),this.Ur=new g4(this),this.indexManager=new ZV,this.remoteDocumentCache=(function(s){return new p4(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new IS(t),this.Gr=new u4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new f4(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const s=new y4(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((o=>this.referenceDelegate.jr(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Hr(e,t){return G.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class y4 extends A1{constructor(e){super(),this.currentSequenceNumber=e}}class zf{constructor(e){this.persistence=e,this.Jr=new fv,this.Yr=null}static Zr(e){return new zf(e)}get Xr(){if(this.Yr)return this.Yr;throw Ue()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),G.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.Xr.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,(r=>{const s=Ie.fromPath(r);return this.ei(e,s).next((o=>{o||t.removeEntry(s,Xe.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return G.or([()=>G.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class v4{constructor(e){this.serializer=e}O(e,t,r,s){const o=new Df("createOrUpgrade",t);r<1&&s>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qE,{unique:!0}),d.createObjectStore("documentMutations")})(e),PT(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let l=G.resolve();return r<3&&s>=3&&(r!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),PT(e)),l=l.next((()=>(function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xe.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)})(o)))),r<4&&s>=4&&(r!==0&&(l=l.next((()=>(function(d,p){return p.store("mutations").U().next((y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qE,{unique:!0});const _=p.store("mutations"),T=y.map((S=>_.put(S)));return G.waitFor(T)}))})(e,o)))),l=l.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&s>=5&&(l=l.next((()=>this.ni(o)))),r<6&&s>=6&&(l=l.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(o))))),r<7&&s>=7&&(l=l.next((()=>this.ii(o)))),r<8&&s>=8&&(l=l.next((()=>this.si(e,o)))),r<9&&s>=9&&(l=l.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(l=l.next((()=>this.oi(o)))),r<11&&s>=11&&(l=l.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&s>=12&&(l=l.next((()=>{(function(d){const p=d.createObjectStore("documentOverlays",{keyPath:Jj});p.createIndex("collectionPathOverlayIndex",Xj,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",Zj,{unique:!1})})(e)}))),r<13&&s>=13&&(l=l.next((()=>(function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:Uj});p.createIndex("documentKeyIndex",$j),p.createIndex("collectionGroupIndex",zj)})(e))).next((()=>this._i(e,o))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&s>=14&&(l=l.next((()=>this.ai(e,o)))),r<15&&s>=15&&(l=l.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Kj}).createIndex("sequenceNumberIndex",Wj,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Qj}).createIndex("documentKeyIndex",Yj,{unique:!1})})(e)))),r<16&&s>=16&&(l=l.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),r<17&&s>=17&&(l=l.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),l}ri(e){let t=0;return e.store("remoteDocuments").J(((r,s)=>{t+=cf(s)})).next((()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next((s=>G.forEach(s,(o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",l).next((u=>G.forEach(u,(d=>{Qe(d.userId===o.userId);const p=fa(this.serializer,d);return AS(e,o.userId,p).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((s=>{const o=[];return r.J(((l,u)=>{const d=new Ft(l),p=(function(_){return[0,xr(_)]})(d);o.push(t.get(p).next((y=>y?G.resolve():(_=>t.put({targetId:0,path:xr(_),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>G.waitFor(o)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:Gj});const r=t.store("collectionParents"),s=new hv,o=l=>{if(s.add(l)){const u=l.lastSegment(),d=l.popLast();return r.put({collectionId:u,parent:xr(d)})}};return t.store("remoteDocuments").J({H:!0},((l,u)=>{const d=new Ft(l);return o(d.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([l,u,d],p)=>{const y=Ys(u);return o(y.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((r,s)=>{const o=su(s),l=bS(this.serializer,o);return t.put(l)}))}_i(e,t){const r=t.store("remoteDocuments"),s=[];return r.J(((o,l)=>{const u=t.store("remoteDocumentsV14"),d=(function(_){return _.document?new Ie(Ft.fromString(_.document.name).popFirst(5)):_.noDocument?Ie.fromSegments(_.noDocument.path):_.unknownDocument?Ie.fromSegments(_.unknownDocument.path):Ue()})(l).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(u.put(p))})).next((()=>G.waitFor(s)))}ai(e,t){const r=t.store("mutations"),s=DS(this.serializer),o=new MS(zf.Zr,this.serializer.ct);return r.U().next((l=>{const u=new Map;return l.forEach((d=>{var p;let y=(p=u.get(d.userId))!==null&&p!==void 0?p:Tt();fa(this.serializer,d).keys().forEach((_=>y=y.add(_))),u.set(d.userId,y)})),G.forEach(u,((d,p)=>{const y=new $n(p),_=Uf.lt(this.serializer,y),T=o.getIndexManager(y),S=$f.lt(y,this.serializer,T,o.referenceDelegate);return new OS(s,S,_,T).recalculateAndSaveOverlaysForDocumentKeys(new Fg(t,$r.oe),d).next()}))}))}}function PT(n){n.createObjectStore("targetDocuments",{keyPath:qj}).createIndex("documentTargetsIndex",Hj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Bj,{unique:!0}),n.createObjectStore("targetGlobal")}const Wm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pv{constructor(e,t,r,s,o,l,u,d,p,y,_=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=l,this.document=u,this.ci=p,this.li=y,this.hi=_,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=T=>Promise.resolve(),!pv.D())throw new pe(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new o4(this,s),this.Ai=t+"main",this.serializer=new IS(d),this.Ri=new wo(this.Ai,this.hi,new v4(this.serializer)),this.$r=new KV,this.Ur=new t4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DS(this.serializer),this.Gr=new GV,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,y===!1&&_n("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pe(re.FAILED_PRECONDITION,Wm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new $r(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ph(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Do(e))return ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Yc(e).get("owner").next((t=>G.resolve(this.vi(t))))}Ci(e){return ph(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Pn(t,"clientMetadata");return r.U().next((s=>{const o=this.xi(s,18e5),l=s.filter((u=>o.indexOf(u)===-1));return G.forEach(l,(u=>r.delete(u.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?G.resolve(!0):Yc(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new pe(re.FAILED_PRECONDITION,Wm);return!1}}return!(!this.networkEnabled||!this.inForeground)||ph(e).U().next((r=>this.xi(r,5e3).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||l&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Fg(e,$r.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>ph(e).U().next((t=>this.xi(t,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return $f.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new e4(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Uf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ce("IndexedDbPersistence","Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===17?nV:d===16?tV:d===15?Zy:d===14?M1:d===13?O1:d===12?eV:d===11?D1:void Ue()})(this.hi);let l;return this.Ri.runTransaction(e,s,o,(u=>(l=new Fg(u,this.Qr?this.Qr.next():$r.oe),t==="readwrite-primary"?this.wi(l).next((d=>!!d||this.Si(l))).next((d=>{if(!d)throw _n(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new pe(re.FAILED_PRECONDITION,R1);return r(l)})).next((d=>this.Di(l).next((()=>d)))):this.Ki(l).next((()=>r(l)))))).then((u=>(l.raiseOnCommittedEvent(),u)))}Ki(e){return Yc(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new pe(re.FAILED_PRECONDITION,Wm)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yc(e).put("owner",t)}static D(){return wo.D()}bi(e){const t=Yc(e);return t.get("owner").next((r=>this.vi(r)?(ce("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve()))}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(_n(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;nb()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return ce("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _n("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){_n("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yc(n){return Pn(n,"owner")}function ph(n){return Pn(n,"clientMetadata")}function LS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=s}static Wi(e,t){let r=Tt(),s=Tt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new mv(e,t.fromCache,r,s)}}class _4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return nb()?8:C1(Cn())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.Yi(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.Zi(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new _4;return this.Xi(e,t,l).next((u=>{if(o.result=u,this.zi)return this.es(e,t,l,u.size)}))})).next((()=>o.result))}es(e,t,r,s){return r.documentReadCount<this.ji?(Cl()<=bt.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Cl()<=bt.DEBUG&&ce("QueryEngine","Query:",Pl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Cl()<=bt.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(t))):G.resolve())}Yi(e,t){if(rT(t))return G.resolve(null);let r=rs(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=rf(t,null,"F"),r=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Tt(...o);return this.Ji.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.ts(t,u);return this.ns(t,p,l,d.readTime)?this.Yi(e,rf(t,null,"F")):this.rs(e,p,t,d)}))))})))))}Zi(e,t,r,s){return rT(t)||s.isEqual(Xe.min())?G.resolve(null):this.Ji.getDocuments(e,r).next((o=>{const l=this.ts(t,o);return this.ns(t,l,r,s)?G.resolve(null):(Cl()<=bt.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pl(t)),this.rs(e,l,t,S1(s,-1)).next((u=>u)))}))}ts(e,t){let r=new Gt(J1(e));return t.forEach(((s,o)=>{Gu(e,o)&&(r=r.add(o))})),r}ns(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,t,r){return Cl()<=bt.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Pl(t)),this.Ji.getDocumentsMatchingQuery(e,t,is.min(),r)}rs(e,t,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}class w4{constructor(e,t,r,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new Xt(ht),this._s=new Oo((o=>Da(o)),qu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function VS(n,e,t,r){return new w4(n,e,t,r)}async function FS(n,e){const t=He(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let d=Tt();for(const p of s){l.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){u.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(r,d).next((p=>({hs:p,removedBatchIds:l,addedBatchIds:u})))}))}))}function E4(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return(function(u,d,p,y){const _=p.batch,T=_.keys();let S=G.resolve();return T.forEach((P=>{S=S.next((()=>y.getEntry(d,P))).next((M=>{const D=p.docVersions.get(P);Qe(D!==null),M.version.compareTo(D)<0&&(_.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(d,_)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Tt();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function US(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function T4(n,e){const t=He(n),r=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const u=[];e.targetChanges.forEach(((y,_)=>{const T=s.get(_);if(!T)return;u.push(t.Ur.removeMatchingKeys(o,y.removedDocuments,_).next((()=>t.Ur.addMatchingKeys(o,y.addedDocuments,_))));let S=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken(wn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),s=s.insert(_,S),(function(M,D,X){return M.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(T,S,y)&&u.push(t.Ur.updateTargetData(o,S))}));let d=Zr(),p=Tt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))})),u.push(x4(o,l,e.documentUpdates).next((y=>{d=y.Ps,p=y.Is}))),!r.isEqual(Xe.min())){const y=t.Ur.getLastRemoteSnapshotVersion(o).next((_=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(y)}return G.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,p))).next((()=>d))})).then((o=>(t.os=s,o)))}function x4(n,e,t){let r=Tt(),s=Tt();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=Zr();return t.forEach(((u,d)=>{const p=o.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Xe.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):ce("LocalStore","Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)})),{Ps:l,Is:s}}))}function I4(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function uf(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Ur.getTargetData(r,e).next((o=>o?(s=o,G.resolve(s)):t.Ur.allocateTargetId(r).next((l=>(s=new Ci(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function Xl(n,e,t){const r=He(n),s=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Do(l))throw l;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Zg(n,e,t){const r=He(n);let s=Xe.min(),o=Tt();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,p,y){const _=He(d),T=_._s.get(y);return T!==void 0?G.resolve(_.os.get(T)):_.Ur.getTargetData(p,y)})(r,l,rs(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,t?s:Xe.min(),t?o:Tt()))).next((u=>(BS(r,Y1(e),u),{documents:u,Ts:o})))))}function $S(n,e){const t=He(n),r=He(t.Ur),s=t.os.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(o=>r.ot(o,e).next((l=>l?l.target:null))))}function zS(n,e){const t=He(n),r=t.us.get(e)||Xe.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.cs.getAllFromCollectionGroup(s,e,S1(r,-1),Number.MAX_SAFE_INTEGER))).then((s=>(BS(t,e,s),s)))}function BS(n,e,t){let r=n.us.get(e)||Xe.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.us.set(e,r)}function NT(n,e){return`firestore_clients_${n}_${e}`}function DT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Qm(n,e){return`firestore_targets_${n}_${e}`}class df{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Rs(e,t,r){const s=JSON.parse(r);let o,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(o=new pe(s.error.code,s.error.message))),l?new df(e,t,s.state,o):(_n("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let s,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new pe(r.error.code,r.error.message))),o?new hu(e,r.state,s):(_n("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,o=rv();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=P1(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return s?new hf(e,o):(_n("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gv{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new gv(t.clientId,t.onlineState):(_n("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ey{constructor(){this.activeTargetIds=rv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ym{constructor(e,t,r,s,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Xt(ht),this.started=!1,this.bs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=NT(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new ey),this.Cs=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(NT(this.persistenceKey,r));if(s){const o=hf.Rs(r,s);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Qm(this.persistenceKey,e));if(s){const o=hu.Rs(e,s);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach((s=>{this.Qs(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce("SharedClientState","READ",e,t),t}setItem(e,t){ce("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(ce("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void _n("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=(function(o){let l=$r.oe;if(o!=null)try{const u=JSON.parse(o);Qe(typeof u=="number"),l=u}catch(u){_n("SharedClientState","Failed to read sequence number from WebStorage",u)}return l})(t.newValue);r!==$r.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map((s=>this.syncEngine.eo(s))))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const s=new df(this.currentUser,e,t,r),o=DT(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Vs())}Qs(e){const t=DT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const s=Qm(this.persistenceKey,e),o=new hu(e,t,r);this.setItem(s,o.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return hf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),s=Number(r[1]),o=r[2]!==void 0?r[2]:null;return df.Rs(new $n(o),s,t)}Ys(e,t){const r=this.Ms.exec(e),s=Number(r[1]);return hu.Rs(s,t)}Ls(e){return gv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),s=this.ks(this.Ss),o=this.ks(r),l=[],u=[];return o.forEach((d=>{s.has(d)||l.push(d)})),s.forEach((d=>{o.has(d)||u.push(d)})),this.syncEngine.io(l,u).then((()=>{this.Ss=r}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=rv();return e.forEach(((r,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class qS{constructor(){this.so=new ey,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ey,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class b4{_o(e){}shutdown(){}}class OT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let mh=null;function Jm(){return mh===null?mh=(function(){return 268435456+Math.round(2147483648*Math.random())})():mh++,"0x"+mh.toString(16)}const S4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const lr="WebChannelConnection";class R4 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(t,r,s,o,l){const u=Jm(),d=this.xo(t,r.toUriEncodedString());ce("RestConnection",`Sending RPC '${t}' ${u}:`,d,s);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,l),this.No(t,d,p,s).then((y=>(ce("RestConnection",`Received RPC '${t}' ${u}: `,y),y)),(y=>{throw Aa("RestConnection",`RPC '${t}' ${u} failed with error: `,y,"url: ",d,"request:",s),y}))}Lo(t,r,s,o,l,u){return this.Mo(t,r,s,o,l)}Oo(t,r,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((o,l)=>t[l]=o)),s&&s.headers.forEach(((o,l)=>t[l]=o))}xo(t,r){const s=S4[t];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,s){const o=Jm();return new Promise(((l,u)=>{const d=new v1;d.setWithCredentials(!0),d.listenOnce(_1.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Ch.NO_ERROR:const y=d.getResponseJson();ce(lr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),l(y);break;case Ch.TIMEOUT:ce(lr,`RPC '${e}' ${o} timed out`),u(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case Ch.HTTP_ERROR:const _=d.getStatus();if(ce(lr,`RPC '${e}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T?.error;if(S&&S.status&&S.message){const P=(function(D){const X=D.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(X)>=0?X:re.UNKNOWN})(S.status);u(new pe(P,S.message))}else u(new pe(re.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new pe(re.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{ce(lr,`RPC '${e}' ${o} completed.`)}}));const p=JSON.stringify(s);ce(lr,`RPC '${e}' ${o} sending request:`,s),d.send(t,"POST",p,r,15)}))}Bo(e,t,r){const s=Jm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=T1(),u=E1(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const y=o.join("");ce(lr,`Creating RPC '${e}' stream ${s}: ${y}`,d);const _=l.createWebChannel(y,d);let T=!1,S=!1;const P=new k4({Io:D=>{S?ce(lr,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(T||(ce(lr,`Opening RPC '${e}' stream ${s} transport.`),_.open(),T=!0),ce(lr,`RPC '${e}' stream ${s} sending:`,D),_.send(D))},To:()=>_.close()}),M=(D,X,W)=>{D.listen(X,(Q=>{try{W(Q)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return M(_,tu.EventType.OPEN,(()=>{S||(ce(lr,`RPC '${e}' stream ${s} transport opened.`),P.yo())})),M(_,tu.EventType.CLOSE,(()=>{S||(S=!0,ce(lr,`RPC '${e}' stream ${s} transport closed`),P.So())})),M(_,tu.EventType.ERROR,(D=>{S||(S=!0,Aa(lr,`RPC '${e}' stream ${s} transport errored:`,D),P.So(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),M(_,tu.EventType.MESSAGE,(D=>{var X;if(!S){const W=D.data[0];Qe(!!W);const Q=W,ae=Q.error||((X=Q[0])===null||X===void 0?void 0:X.error);if(ae){ce(lr,`RPC '${e}' stream ${s} received error:`,ae);const de=ae.status;let me=(function(A){const k=In[A];if(k!==void 0)return uS(k)})(de),N=ae.message;me===void 0&&(me=re.INTERNAL,N="Unknown error status: "+de+" with message "+ae.message),S=!0,P.So(new pe(me,N)),_.close()}else ce(lr,`RPC '${e}' stream ${s} received:`,W),P.bo(W)}})),M(u,w1.STAT_EVENT,(D=>{D.stat===jg.PROXY?ce(lr,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===jg.NOPROXY&&ce(lr,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{P.wo()}),0),P}}function HS(){return typeof window<"u"?window:null}function jh(){return typeof document<"u"?document:null}function Bf(n){return new MV(n,!0)}class GS{constructor(e,t,r=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-r);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class KS{constructor(e,t,r,s,o,l,u,d){this.ui=e,this.Ho=r,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new GS(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(_n(t.toString()),_n("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===t&&this.P_(r,s)}),(r=>{e((()=>{const s=new pe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class A4 extends KS{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=VV(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Xe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Xe.min():l.readTime?Ir(l.readTime):Xe.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Wg(this.serializer),t.addTarget=(function(o,l){let u;const d=l.target;if(u=tf(d)?{documents:vS(o,d)}:{query:_S(o,d)._t},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=fS(o,l.resumeToken);const p=Gg(o,l.expectedCount);p!==null&&(u.expectedCount=p)}else if(l.snapshotVersion.compareTo(Xe.min())>0){u.readTime=Jl(o,l.snapshotVersion.toTimestamp());const p=Gg(o,l.expectedCount);p!==null&&(u.expectedCount=p)}return u})(this.serializer,e);const r=UV(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.a_(t)}}class C4 extends KS{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=FV(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Wg(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>of(this.serializer,r)))};this.a_(t)}}class P4 extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Mo(e,Kg(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(re.UNKNOWN,o.toString())}))}Lo(e,t,r,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Lo(e,Kg(t,r),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(re.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class N4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_n(t),this.D_=!1):ce("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class D4{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o((l=>{r.enqueueAndForget((async()=>{Ga(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const p=He(d);p.L_.add(4),await Yu(p),p.q_.set("Unknown"),p.L_.delete(4),await qf(p)})(this))}))})),this.q_=new N4(r,s)}}async function qf(n){if(Ga(n))for(const e of n.B_)await e(!0)}async function Yu(n){for(const e of n.B_)await e(!1)}function Hf(n,e){const t=He(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),_v(t)?vv(t):fc(t).r_()&&yv(t,e))}function Zl(n,e){const t=He(n),r=fc(t);t.N_.delete(e),r.r_()&&WS(t,e),t.N_.size===0&&(r.r_()?r.o_():Ga(t)&&t.q_.set("Unknown"))}function yv(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fc(n).A_(e)}function WS(n,e){n.Q_.xe(e),fc(n).R_(e)}function vv(n){n.Q_=new PV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),fc(n).start(),n.q_.v_()}function _v(n){return Ga(n)&&!fc(n).n_()&&n.N_.size>0}function Ga(n){return He(n).L_.size===0}function QS(n){n.Q_=void 0}async function O4(n){n.q_.set("Online")}async function M4(n){n.N_.forEach(((e,t)=>{yv(n,e)}))}async function L4(n,e){QS(n),_v(n)?(n.q_.M_(e),vv(n)):n.q_.set("Unknown")}async function j4(n,e,t){if(n.q_.set("Online"),e instanceof hS&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.N_.delete(u),s.Q_.removeTarget(u))})(n,e)}catch(r){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ff(n,r)}else if(e instanceof Lh?n.Q_.Ke(e):e instanceof dS?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Xe.min()))try{const r=await US(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const u=o.Q_.rt(l);return u.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.N_.get(p);y&&o.N_.set(p,y.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,p)=>{const y=o.N_.get(d);if(!y)return;o.N_.set(d,y.withResumeToken(wn.EMPTY_BYTE_STRING,y.snapshotVersion)),WS(o,d);const _=new Ci(y.target,d,p,y.sequenceNumber);yv(o,_)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){ce("RemoteStore","Failed to raise snapshot:",r),await ff(n,r)}}async function ff(n,e,t){if(!Do(e))throw e;n.L_.add(1),await Yu(n),n.q_.set("Offline"),t||(t=()=>US(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await qf(n)}))}function YS(n,e){return e().catch((t=>ff(n,t,e)))}async function hc(n){const e=He(n),t=ko(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;V4(e);)try{const s=await I4(e.localStore,r);if(s===null){e.O_.length===0&&t.o_();break}r=s.batchId,F4(e,s)}catch(s){await ff(e,s)}JS(e)&&XS(e)}function V4(n){return Ga(n)&&n.O_.length<10}function F4(n,e){n.O_.push(e);const t=ko(n);t.r_()&&t.V_&&t.m_(e.mutations)}function JS(n){return Ga(n)&&!ko(n).n_()&&n.O_.length>0}function XS(n){ko(n).start()}async function U4(n){ko(n).p_()}async function $4(n){const e=ko(n);for(const t of n.O_)e.m_(t.mutations)}async function z4(n,e,t){const r=n.O_.shift(),s=av.from(r,e,t);await YS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await hc(n)}async function B4(n,e){e&&ko(n).V_&&await(async function(r,s){if((function(l){return RV(l)&&l!==re.ABORTED})(s.code)){const o=r.O_.shift();ko(r).s_(),await YS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await hc(r)}})(n,e),JS(n)&&XS(n)}async function MT(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const r=Ga(t);t.L_.add(3),await Yu(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await qf(t)}async function ty(n,e){const t=He(n);e?(t.L_.delete(2),await qf(t)):e||(t.L_.add(2),await Yu(t),t.q_.set("Unknown"))}function fc(n){return n.K_||(n.K_=(function(t,r,s){const o=He(t);return o.w_(),new A4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Eo:O4.bind(null,n),Ro:M4.bind(null,n),mo:L4.bind(null,n),d_:j4.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),_v(n)?vv(n):n.q_.set("Unknown")):(await n.K_.stop(),QS(n))}))),n.K_}function ko(n){return n.U_||(n.U_=(function(t,r,s){const o=He(t);return o.w_(),new C4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:U4.bind(null,n),mo:B4.bind(null,n),f_:$4.bind(null,n),g_:z4.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await hc(n)):(await n.U_.stop(),n.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}class wv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,u=new wv(e,t,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ev(n,e){if(_n("AsyncQueue",`${e}: ${n}`),Do(n))return new pe(re.UNAVAILABLE,`${e}: ${n}`);throw n}class Ul{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ie.comparator(t.key,r.key):(t,r)=>Ie.comparator(t.key,r.key),this.keyedMap=nu(),this.sortedSet=new Xt(this.comparator)}static emptySet(e){return new Ul(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ul;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class LT{constructor(){this.W_=new Xt(Ie.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ue():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ec{constructor(e,t,r,s,o,l,u,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new ec(e,t,Ul.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class q4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class H4{constructor(){this.queries=jT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const s=He(t),o=s.queries;s.queries=jT(),o.forEach(((l,u)=>{for(const d of u.j_)d.onError(r)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function jT(){return new Oo((n=>Q1(n)),jf)}async function Tv(n,e){const t=He(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.H_()&&e.J_()&&(r=2):(o=new q4,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await t.onListen(s,!0);break;case 1:o.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=Ev(l,`Initialization of query '${Pl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Iv(t)}async function xv(n,e){const t=He(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function G4(n,e){const t=He(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.j_)u.X_(s)&&(r=!0);l.z_=s}}r&&Iv(t)}function K4(n,e,t){const r=He(n),s=r.queries.get(e);if(s)for(const o of s.j_)o.onError(t);r.queries.delete(e)}function Iv(n){n.Y_.forEach((e=>{e.next()}))}var ny,VT;(VT=ny||(ny={})).ea="default",VT.Cache="cache";class bv{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ny.Cache}}class ZS{constructor(e){this.key=e}}class ek{constructor(e){this.key=e}}class W4{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Tt(),this.mutatedKeys=Tt(),this.Aa=J1(e),this.Ra=new Ul(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new LT,s=t?t.Ra:this.Ra;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,_)=>{const T=s.get(y),S=Gu(this.query,_)?_:null,P=!!T&&this.mutatedKeys.has(T.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let D=!1;T&&S?T.data.isEqual(S.data)?P!==M&&(r.track({type:3,doc:S}),D=!0):this.ga(T,S)||(r.track({type:2,doc:S}),D=!0,(d&&this.Aa(S,d)>0||p&&this.Aa(S,p)<0)&&(u=!0)):!T&&S?(r.track({type:0,doc:S}),D=!0):T&&!S&&(r.track({type:1,doc:T}),D=!0,(d||p)&&(u=!0)),D&&(S?(l=l.add(S),o=M?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{Ra:l,fa:r,ns:u,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((y,_)=>(function(S,P){const M=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return M(S)-M(P)})(y.type,_.type)||this.Aa(y.doc,_.doc))),this.pa(r),s=s!=null&&s;const u=t&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,p=d!==this.Ea;return this.Ea=d,l.length!==0||p?{snapshot:new ec(this.query,e.Ra,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new LT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Tt(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new ek(r))})),this.da.forEach((r=>{e.has(r)||t.push(new ZS(r))})),t}ba(e){this.Ta=e.Ts,this.da=Tt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ec.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Q4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Y4{constructor(e){this.key=e,this.va=!1}}class J4{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Oo((u=>Q1(u)),jf),this.Ma=new Map,this.xa=new Set,this.Oa=new Xt(Ie.comparator),this.Na=new Map,this.La=new fv,this.Ba={},this.ka=new Map,this.qa=La.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function X4(n,e,t=!0){const r=Gf(n);let s;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await tk(r,e,t,!0),s}async function Z4(n,e){const t=Gf(n);await tk(t,e,!0,!1)}async function tk(n,e,t,r){const s=await uf(n.localStore,rs(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await Sv(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&Hf(n.remoteStore,s),u}async function Sv(n,e,t,r,s){n.Ka=(_,T,S)=>(async function(M,D,X,W){let Q=D.view.ma(X);Q.ns&&(Q=await Zg(M.localStore,D.query,!1).then((({documents:N})=>D.view.ma(N,Q))));const ae=W&&W.targetChanges.get(D.targetId),de=W&&W.targetMismatches.get(D.targetId)!=null,me=D.view.applyChanges(Q,M.isPrimaryClient,ae,de);return ry(M,D.targetId,me.wa),me.snapshot})(n,_,T,S);const o=await Zg(n.localStore,e,!0),l=new W4(e,o.Ts),u=l.ma(o.documents),d=Qu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(u,n.isPrimaryClient,d);ry(n,t,p.wa);const y=new Q4(e,t,l);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),p.snapshot}async function eF(n,e,t){const r=He(n),s=r.Fa.get(e),o=r.Ma.get(s.targetId);if(o.length>1)return r.Ma.set(s.targetId,o.filter((l=>!jf(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Xl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Zl(r.remoteStore,s.targetId),tc(r,s.targetId)})).catch(No)):(tc(r,s.targetId),await Xl(r.localStore,s.targetId,!0))}async function tF(n,e){const t=He(n),r=t.Fa.get(e),s=t.Ma.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zl(t.remoteStore,r.targetId))}async function nF(n,e,t){const r=Cv(n);try{const s=await(function(l,u){const d=He(l),p=dn.now(),y=u.reduce(((S,P)=>S.add(P.key)),Tt());let _,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let P=Zr(),M=Tt();return d.cs.getEntries(S,y).next((D=>{P=D,P.forEach(((X,W)=>{W.isValidDocument()||(M=M.add(X))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,P))).next((D=>{_=D;const X=[];for(const W of u){const Q=SV(W,_.get(W.key).overlayedDocument);Q!=null&&X.push(new Ui(W.key,Q,U1(Q.value.mapValue),Bn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,p,X,u)})).next((D=>{T=D;const X=D.applyToLocalDocumentSet(_,M);return d.documentOverlayCache.saveOverlays(S,D.batchId,X)}))})).then((()=>({batchId:T.batchId,changes:Z1(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let p=l.Ba[l.currentUser.toKey()];p||(p=new Xt(ht)),p=p.insert(u,d),l.Ba[l.currentUser.toKey()]=p})(r,s.batchId,t),await Mo(r,s.changes),await hc(r.remoteStore)}catch(s){const o=Ev(s,"Failed to persist write");t.reject(o)}}async function nk(n,e){const t=He(n);try{const r=await T4(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Na.get(o);l&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Qe(l.va):s.removedDocuments.size>0&&(Qe(l.va),l.va=!1))})),await Mo(t,r,e)}catch(r){await No(r)}}function FT(n,e,t){const r=He(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Fa.forEach(((o,l)=>{const u=l.view.Z_(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=He(l);d.onlineState=u;let p=!1;d.queries.forEach(((y,_)=>{for(const T of _.j_)T.Z_(u)&&(p=!0)})),p&&Iv(d)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rF(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Na.get(e),o=s&&s.key;if(o){let l=new Xt(Ie.comparator);l=l.insert(o,pn.newNoDocument(o,Xe.min()));const u=Tt().add(o),d=new Wu(Xe.min(),new Map,new Xt(ht),l,u);await nk(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),Av(r)}else await Xl(r.localStore,e,!1).then((()=>tc(r,e,t))).catch(No)}async function sF(n,e){const t=He(n),r=e.batch.batchId;try{const s=await E4(t.localStore,e);Rv(t,r,null),kv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Mo(t,s)}catch(s){await No(s)}}async function iF(n,e,t){const r=He(n);try{const s=await(function(l,u){const d=He(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return d.mutationQueue.lookupMutationBatch(p,u).next((_=>(Qe(_!==null),y=_.keys(),d.mutationQueue.removeMutationBatch(p,_)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>d.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);Rv(r,e,t),kv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Mo(r,s)}catch(s){await No(s)}}function kv(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function Rv(n,e,t){const r=He(n);let s=r.Ba[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function tc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||rk(n,r)}))}function rk(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Zl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Av(n))}function ry(n,e,t){for(const r of t)r instanceof ZS?(n.La.addReference(r.key,e),oF(n,r)):r instanceof ek?(ce("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||rk(n,r.key)):Ue()}function oF(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ce("SyncEngine","New document in limbo: "+t),n.xa.add(r),Av(n))}function Av(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ie(Ft.fromString(e)),r=n.qa.next();n.Na.set(r,new Y4(t)),n.Oa=n.Oa.insert(t,r),Hf(n.remoteStore,new Ci(rs(Hu(t.path)),r,"TargetPurposeLimboResolution",$r.oe))}}async function Mo(n,e,t){const r=He(n),s=[],o=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((u,d)=>{l.push(r.Ka(d,e,t).then((p=>{var y;if((p||t)&&r.isPrimaryClient){const _=p?!p.fromCache:(y=t?.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(p){s.push(p);const _=mv.Wi(d.targetId,p);o.push(_)}})))})),await Promise.all(l),r.Ca.d_(s),await(async function(d,p){const y=He(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>G.forEach(p,(T=>G.forEach(T.$i,(S=>y.persistence.referenceDelegate.addReference(_,T.targetId,S))).next((()=>G.forEach(T.Ui,(S=>y.persistence.referenceDelegate.removeReference(_,T.targetId,S)))))))))}catch(_){if(!Do(_))throw _;ce("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of p){const T=_.targetId;if(!_.fromCache){const S=y.os.get(T),P=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(P);y.os=y.os.insert(T,M)}}})(r.localStore,o))}async function aF(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const r=await FS(t.localStore,e);t.currentUser=e,(function(o,l){o.ka.forEach((u=>{u.forEach((d=>{d.reject(new pe(re.CANCELLED,l))}))})),o.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mo(t,r.hs)}}function lF(n,e){const t=He(n),r=t.Na.get(e);if(r&&r.va)return Tt().add(r.key);{let s=Tt();const o=t.Ma.get(e);if(!o)return s;for(const l of o){const u=t.Fa.get(l);s=s.unionWith(u.view.Va)}return s}}async function cF(n,e){const t=He(n),r=await Zg(t.localStore,e.query,!0),s=e.view.ba(r);return t.isPrimaryClient&&ry(t,e.targetId,s.wa),s}async function uF(n,e){const t=He(n);return zS(t.localStore,e).then((r=>Mo(t,r)))}async function dF(n,e,t,r){const s=He(n),o=await(function(u,d){const p=He(u),y=He(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(_=>y.Mn(_,d).next((T=>T?p.localDocuments.getDocuments(_,T):G.resolve(null)))))})(s.localStore,e);o!==null?(t==="pending"?await hc(s.remoteStore):t==="acknowledged"||t==="rejected"?(Rv(s,e,r||null),kv(s,e),(function(u,d){He(He(u).mutationQueue).On(d)})(s.localStore,e)):Ue(),await Mo(s,o)):ce("SyncEngine","Cannot apply mutation batch with id: "+e)}async function hF(n,e){const t=He(n);if(Gf(t),Cv(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await UT(t,r.toArray());t.Qa=!0,await ty(t.remoteStore,!0);for(const o of s)Hf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){const r=[];let s=Promise.resolve();t.Ma.forEach(((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then((()=>(tc(t,l),Xl(t.localStore,l,!0)))),Zl(t.remoteStore,l)})),await s,await UT(t,r),(function(l){const u=He(l);u.Na.forEach(((d,p)=>{Zl(u.remoteStore,p)})),u.La.pr(),u.Na=new Map,u.Oa=new Xt(Ie.comparator)})(t),t.Qa=!1,await ty(t.remoteStore,!1)}}async function UT(n,e,t){const r=He(n),s=[],o=[];for(const l of e){let u;const d=r.Ma.get(l);if(d&&d.length!==0){u=await uf(r.localStore,rs(d[0]));for(const p of d){const y=r.Fa.get(p),_=await cF(r,y);_.snapshot&&o.push(_.snapshot)}}else{const p=await $S(r.localStore,l);u=await uf(r.localStore,p),await Sv(r,sk(p),l,!1,u.resumeToken)}s.push(u)}return r.Ca.d_(o),s}function sk(n){return W1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function fF(n){return(function(t){return He(He(t).persistence).Qi()})(He(n).localStore)}async function pF(n,e,t,r){const s=He(n);if(s.Qa)return void ce("SyncEngine","Ignoring unexpected query state notification.");const o=s.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await zS(s.localStore,Y1(o[0])),u=Wu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",wn.EMPTY_BYTE_STRING);await Mo(s,l,u);break}case"rejected":await Xl(s.localStore,e,!0),tc(s,e,r);break;default:Ue()}}async function mF(n,e,t){const r=Gf(n);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ce("SyncEngine","Adding an already active target "+s);continue}const o=await $S(r.localStore,s),l=await uf(r.localStore,o);await Sv(r,sk(o),l.targetId,!1,l.resumeToken),Hf(r.remoteStore,l)}for(const s of t)r.Ma.has(s)&&await Xl(r.localStore,s,!1).then((()=>{Zl(r.remoteStore,s),tc(r,s)})).catch(No)}}function Gf(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rF.bind(null,e),e.Ca.d_=G4.bind(null,e.eventManager),e.Ca.$a=K4.bind(null,e.eventManager),e}function Cv(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iF.bind(null,e),e}class Cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return VS(this.persistence,new jS,e.initialUser,this.serializer)}Ga(e){return new MS(zf.Zr,this.serializer)}Wa(e){return new qS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cu.provider={build:()=>new Cu};class gF extends Cu{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Cv(this.Ja.syncEngine),await hc(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return VS(this.persistence,new jS,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new r4(r,e.asyncQueue,t)}Ha(e,t){const r=new jj(t,this.persistence);return new Lj(e.asyncQueue,r)}Ga(e){const t=LS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new pv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,HS(),jh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new qS}}class yF extends gF{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Ym&&(this.sharedClientState.syncEngine={no:dF.bind(null,t),ro:pF.bind(null,t),io:mF.bind(null,t),Qi:fF.bind(null,t),eo:uF.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async r=>{await hF(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=HS();if(!Ym.D(t))throw new pe(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=LS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ym(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class pf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>FT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aF.bind(null,this.syncEngine),await ty(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new H4})()}createDatastore(e){const t=Bf(e.databaseInfo.databaseId),r=(function(o){return new R4(o)})(e.databaseInfo);return(function(o,l,u,d){return new P4(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,u){return new D4(r,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>FT(this.syncEngine,t,0)),(function(){return OT.D()?new OT:new b4})())}createSyncEngine(e,t){return(function(s,o,l,u,d,p,y){const _=new J4(s,o,l,u,d,p);return y&&(_.Qa=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const o=He(s);ce("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Yu(o),o.k_.shutdown(),o.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}pf.provider={build:()=>new pf};class Pv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_n("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class vF{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=$n.UNAUTHENTICATED,this.clientId=I1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{ce("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ce("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ev(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Xm(n,e){n.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await FS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function $T(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _F(n);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>MT(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>MT(e.remoteStore,s))),n._onlineComponents=e}async function _F(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Aa("Error using user provided cache. Falling back to memory cache: "+t),await Xm(n,new Cu)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await Xm(n,new Cu);return n._offlineComponents}async function ik(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await $T(n,n._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await $T(n,new pf))),n._onlineComponents}function wF(n){return ik(n).then((e=>e.syncEngine))}async function mf(n){const e=await ik(n),t=e.eventManager;return t.onListen=X4.bind(null,e.syncEngine),t.onUnlisten=eF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Z4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tF.bind(null,e.syncEngine),t}function EF(n,e,t={}){const r=new ei;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,p){const y=new Pv({next:T=>{y.Za(),l.enqueueAndForget((()=>xv(o,_)));const S=T.docs.has(u);!S&&T.fromCache?p.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&d&&d.source==="server"?p.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new bv(Hu(u.path),y,{includeMetadataChanges:!0,_a:!0});return Tv(o,_)})(await mf(n),n.asyncQueue,e,t,r))),r.promise}function TF(n,e,t={}){const r=new ei;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,p){const y=new Pv({next:T=>{y.Za(),l.enqueueAndForget((()=>xv(o,_))),T.fromCache&&d.source==="server"?p.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new bv(u,y,{includeMetadataChanges:!0,_a:!0});return Tv(o,_)})(await mf(n),n.asyncQueue,e,t,r))),r.promise}function ok(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const zT=new Map;function ak(n,e,t){if(!t)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xF(n,e,t,r){if(e===!0&&r===!0)throw new pe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BT(n){if(!Ie.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qT(n){if(Ie.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ue()}function Hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kf(n);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function IF(n,e){if(e<=0)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class HT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ok((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HT(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new bj;switch(r.type){case"firstParty":return new Aj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=zT.get(t);r&&(ce("ComponentProvider","Removing Datastore"),zT.delete(t),r.terminate())})(this),Promise.resolve()}}function bF(n,e,t,r={}){var s;const o=(n=Hr(n,Wf))._getSettings(),l=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=$n.MOCK_USER;else{u=eb(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new $n(p)}n._authCredentials=new Sj(new x1(u,d))}}class ii{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ii(this.firestore,e,this._query)}}class br{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}}class Eo extends ii{constructor(e,t,r){super(e,t,Hu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new Ie(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function Ju(n,e,...t){if(n=Vt(n),ak("collection","path",e),n instanceof Wf){const r=Ft.fromString(e,...t);return qT(r),new Eo(n,null,r)}{if(!(n instanceof br||n instanceof Eo))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ft.fromString(e,...t));return qT(r),new Eo(n.firestore,null,r)}}function ws(n,e,...t){if(n=Vt(n),arguments.length===1&&(e=I1.newId()),ak("doc","path",e),n instanceof Wf){const r=Ft.fromString(e,...t);return BT(r),new br(n,null,new Ie(r))}{if(!(n instanceof br||n instanceof Eo))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ft.fromString(e,...t));return BT(r),new br(n.firestore,n instanceof Eo?n.converter:null,new Ie(r))}}class GT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new GS(this,"async_queue_retry"),this.Vu=()=>{const r=jh();r&&ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=jh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=jh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new ei;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Do(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u})(r);throw _n("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=wv.createAndSchedule(this,e,t,r,(o=>this.yu(o)));return this.Tu.push(s),s}fu(){this.Eu&&Ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function KT(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class ni extends Wf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new GT,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GT(e),this._firestoreClient=void 0,await e}}}function SF(n,e){const t=typeof n=="object"?n:Ba(),r=typeof n=="string"?n:"(default)",s=Es(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Cy("firestore");o&&bF(s,...o)}return s}function Xu(n){if(n._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lk(n),n._firestoreClient}function lk(n){var e,t,r;const s=n._freezeSettings(),o=(function(u,d,p,y){return new sV(u,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,ok(y.experimentalLongPollingOptions),y.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new vF(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(u){const d=u?._online.build();return{_offline:u?._offline.build(d),_online:d}})(n._componentsProvider))}async function kF(n){Aa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();RF(n,pf.provider,{build:t=>new yF(t,e.cacheSizeBytes)})}function RF(n,e,t){if((n=Hr(n,ni))._firestoreClient||n._terminated)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new pe(re.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},lk(n)}class nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nc(wn.fromBase64String(e))}catch(t){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nc(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zu{constructor(e){this._methodName=e}}class Nv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}class Dv{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}}const AF=/^__.*__$/;class CF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms):new dc(e,this.data,t,this.fieldTransforms)}}class ck{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class Ov{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ov(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return gf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uk(this.Cu)&&AF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class PF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bf(e)}Qu(e,t,r,s=!1){return new Ov({Cu:e,methodName:t,qu:r,path:un.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ed(n){const e=n._freezeSettings(),t=Bf(n._databaseId);return new PF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mv(n,e,t,r,s,o={}){const l=n.Qu(o.merge||o.mergeFields?2:0,e,t,s);Vv("Data must be an object, but it was:",l,r);const u=hk(r,l);let d,p;if(o.merge)d=new zr(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const _ of o.mergeFields){const T=sy(e,_,t);if(!l.contains(T))throw new pe(re.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);pk(y,T)||y.push(T)}d=new zr(y),p=l.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,p=l.fieldTransforms;return new CF(new dr(u),d,p)}class Yf extends Zu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}class Lv extends Zu{_toFieldTransform(e){return new iv(e.path,new Kl)}isEqual(e){return e instanceof Lv}}class jv extends Zu{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Yl(e.serializer,nS(e.serializer,this.$u));return new iv(e.path,t)}isEqual(e){return e instanceof jv&&this.$u===e.$u}}function NF(n,e,t,r){const s=n.Qu(1,e,t);Vv("Data must be an object, but it was:",s,r);const o=[],l=dr.empty();qa(r,((d,p)=>{const y=Fv(e,d,t);p=Vt(p);const _=s.Nu(y);if(p instanceof Yf)o.push(y);else{const T=td(p,_);T!=null&&(o.push(y),l.set(y,T))}}));const u=new zr(o);return new ck(l,u,s.fieldTransforms)}function DF(n,e,t,r,s,o){const l=n.Qu(1,e,t),u=[sy(e,r,t)],d=[s];if(o.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)u.push(sy(e,o[T])),d.push(o[T+1]);const p=[],y=dr.empty();for(let T=u.length-1;T>=0;--T)if(!pk(p,u[T])){const S=u[T];let P=d[T];P=Vt(P);const M=l.Nu(S);if(P instanceof Yf)p.push(S);else{const D=td(P,M);D!=null&&(p.push(S),y.set(S,D))}}const _=new zr(p);return new ck(y,_,l.fieldTransforms)}function dk(n,e,t,r=!1){return td(t,n.Qu(r?4:3,e))}function td(n,e){if(fk(n=Vt(n)))return Vv("Unsupported field value:",e,n),hk(n,e);if(n instanceof Zu)return(function(r,s){if(!uk(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const u of r){let d=td(u,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=dn.fromDate(r);return{timestampValue:Jl(s.serializer,o)}}if(r instanceof dn){const o=new dn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jl(s.serializer,o)}}if(r instanceof Nv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nc)return{bytesValue:fS(s.serializer,r._byteString)};if(r instanceof br){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Dv)return(function(l,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return sv(u.serializer,d)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${Kf(r)}`)})(n,e)}function hk(n,e){const t={};return L1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qa(n,((r,s)=>{const o=td(s,e.Mu(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function fk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dn||n instanceof Nv||n instanceof nc||n instanceof br||n instanceof Zu||n instanceof Dv)}function Vv(n,e,t){if(!fk(t)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(t)){const r=Kf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function sy(n,e,t){if((e=Vt(e))instanceof Qf)return e._internalPath;if(typeof e=="string")return Fv(n,e);throw gf("Field path arguments must be of type string or ",n,!1,void 0,t)}const OF=new RegExp("[~\\*/\\[\\]]");function Fv(n,e,t){if(e.search(OF)>=0)throw gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qf(...e.split("."))._internalPath}catch{throw gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gf(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new pe(re.INVALID_ARGUMENT,u+n+d)}function pk(n,e){return n.some((t=>t.isEqual(e)))}class Uv{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class MF extends Uv{data(){return super.data()}}function Jf(n,e){return typeof e=="string"?Fv(n,e):e instanceof Qf?e._internalPath:e._delegate._internalPath}function mk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $v{}class Xf extends $v{}function LF(n,e,...t){let r=[];e instanceof $v&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((d=>d instanceof zv)).length,u=o.filter((d=>d instanceof Zf)).length;if(l>1||l>0&&u>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Zf extends Xf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Zf(e,t,r)}_apply(e){const t=this._parse(e);return gk(e._query,t),new ii(e.firestore,e.converter,Hg(e._query,t))}_parse(e){const t=ed(e.firestore);return(function(o,l,u,d,p,y,_){let T;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){YT(_,y);const S=[];for(const P of _)S.push(QT(d,o,P));T={arrayValue:{values:S}}}else T=QT(d,o,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||YT(_,y),T=dk(u,l,_,y==="in"||y==="not-in");return At.create(p,y,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function jF(n,e,t){const r=e,s=Jf("where",n);return Zf._create(s,r,t)}class zv extends $v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ht.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)gk(l,d),l=Hg(l,d)})(e._query,t),new ii(e.firestore,e.converter,Hg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bv extends Xf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bv(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Au(o,l)})(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new Ha(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function WT(n,e="asc"){const t=e,r=Jf("orderBy",n);return Bv._create(r,t)}class qv extends Xf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new qv(e,t,r)}_apply(e){return new ii(e.firestore,e.converter,rf(e._query,this._limit,this._limitType))}}function VF(n){return IF("limit",n),qv._create("limit",n,"F")}class Hv extends Xf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Hv(e,t,r)}_apply(e){const t=UF(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(function(s,o){return new Ha(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)})(e._query,t))}}function FF(...n){return Hv._create("startAfter",n,!1)}function UF(n,e,t,r){if(t[0]=Vt(t[0]),t[0]instanceof Uv)return(function(o,l,u,d,p){if(!d)throw new pe(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const _ of Fl(o))if(_.field.isKeyField())y.push(Na(l,d.key));else{const T=d.data.field(_.field);if(Mf(T))throw new pe(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const S=_.field.canonicalString();throw new pe(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}y.push(T)}return new So(y,p)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=ed(n.firestore);return(function(l,u,d,p,y,_){const T=l.explicitOrderBy;if(y.length>T.length)throw new pe(re.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let P=0;P<y.length;P++){const M=y[P];if(T[P].field.isKeyField()){if(typeof M!="string")throw new pe(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof M}`);if(!nv(l)&&M.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${M}' contains a slash.`);const D=l.path.child(Ft.fromString(M));if(!Ie.isDocumentKey(D))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const X=new Ie(D);S.push(Na(u,X))}else{const D=dk(d,p,M);S.push(D)}}return new So(S,_)})(n._query,n.firestore._databaseId,s,e,t,r)}}function QT(n,e,t){if(typeof(t=Vt(t))=="string"){if(t==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nv(e)&&t.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ft.fromString(t));if(!Ie.isDocumentKey(r))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Na(n,new Ie(r))}if(t instanceof br)return Na(n,t._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kf(t)}.`)}function YT(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gk(n,e){const t=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $F{convertValue(e,t="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return qa(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((l=>on(l.doubleValue)));return new Dv(o)}convertGeoPoint(e){return new Nv(on(e.latitude),on(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ev(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const t=ji(e);return new dn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ft.fromString(e);Qe(xS(r));const s=new Ca(r.get(1),r.get(3)),o=new Ie(r.popFirst(5));return s.isEqual(t)||_n(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function Gv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class iu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yk extends Uv{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Jf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vh extends yk{data(e={}){return super.data(e)}}class vk{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new iu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Vh(this._firestore,this._userDataWriter,r.key,r,new iu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new Vh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new iu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new Vh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new iu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return u.type!==0&&(p=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:zF(u.type),doc:d,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function zF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}function yf(n){n=Hr(n,br);const e=Hr(n.firestore,ni);return EF(Xu(e),n._key).then((t=>Ek(e,n,t)))}class Kv extends $F{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,t)}}function BF(n){n=Hr(n,ii);const e=Hr(n.firestore,ni),t=Xu(e),r=new Kv(e);return mk(n._query),TF(t,n._query).then((s=>new vk(e,r,n,s)))}function Ka(n,e,t){n=Hr(n,br);const r=Hr(n.firestore,ni),s=Gv(n.converter,e,t);return tp(r,[Mv(ed(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Bn.none())])}function _k(n){return tp(Hr(n.firestore,ni),[new Ku(n._key,Bn.none())])}function ep(n,e){const t=Hr(n.firestore,ni),r=ws(n),s=Gv(n.converter,e);return tp(t,[Mv(ed(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Bn.exists(!1))]).then((()=>r))}function wk(n,...e){var t,r,s;n=Vt(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||KT(e[l])||(o=e[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(KT(e[l])){const _=e[l];e[l]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[l+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[l+2]=(s=_.complete)===null||s===void 0?void 0:s.bind(_)}let d,p,y;if(n instanceof br)p=Hr(n.firestore,ni),y=Hu(n._key.path),d={next:_=>{e[l]&&e[l](Ek(p,n,_))},error:e[l+1],complete:e[l+2]};else{const _=Hr(n,ii);p=Hr(_.firestore,ni),y=_._query;const T=new Kv(p);d={next:S=>{e[l]&&e[l](new vk(p,T,_,S))},error:e[l+1],complete:e[l+2]},mk(n._query)}return(function(T,S,P,M){const D=new Pv(M),X=new bv(S,D,P);return T.asyncQueue.enqueueAndForget((async()=>Tv(await mf(T),X))),()=>{D.Za(),T.asyncQueue.enqueueAndForget((async()=>xv(await mf(T),X)))}})(Xu(p),y,u,d)}function tp(n,e){return(function(r,s){const o=new ei;return r.asyncQueue.enqueueAndForget((async()=>nF(await wF(r),s,o))),o.promise})(Xu(n),e)}function Ek(n,e,t){const r=t.docs.get(e._key),s=new Kv(n);return new yk(n,s,e._key,r,new iu(t.hasPendingWrites,t.fromCache),e.converter)}class qF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ed(e)}set(e,t,r){this._verifyNotCommitted();const s=Zm(e,this._firestore),o=Gv(s.converter,t,r),l=Mv(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,Bn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const o=Zm(e,this._firestore);let l;return l=typeof(t=Vt(t))=="string"||t instanceof Qf?DF(this._dataReader,"WriteBatch.update",o._key,t,r,s):NF(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,Bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Zm(e,this._firestore);return this._mutations=this._mutations.concat(new Ku(t._key,Bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zm(n,e){if((n=Vt(n)).firestore!==e)throw new pe(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function HF(){return new Lv("serverTimestamp")}function Tk(n){return new jv("increment",n)}function GF(n){return Xu(n=Hr(n,ni)),new qF(n,(e=>tp(n,e)))}(function(e,t=!0){(function(s){uc=s})(za),Sr(new fr("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new ni(new kj(r.getProvider("auth-internal")),new Pj(r.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ca(p.options.projectId,y)})(l,s),l);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Rn($E,"4.7.3",e),Rn($E,"4.7.3","esm2017")})();const xk="firebasestorage.googleapis.com",Ik="storageBucket",KF=120*1e3,WF=600*1e3;class gn extends as{constructor(e,t,r=0){super(eg(e),`Firebase Storage: ${t} (${eg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return eg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mn||(mn={}));function eg(n){return"storage/"+n}function Wv(){const n="An unknown error occurred, please check the error payload for server response.";return new gn(mn.UNKNOWN,n)}function QF(n){return new gn(mn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function YF(n){return new gn(mn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function JF(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new gn(mn.UNAUTHENTICATED,n)}function XF(){return new gn(mn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ZF(n){return new gn(mn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function eU(){return new gn(mn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tU(){return new gn(mn.CANCELED,"User canceled the upload/download.")}function nU(n){return new gn(mn.INVALID_URL,"Invalid URL '"+n+"'.")}function rU(n){return new gn(mn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function sU(){return new gn(mn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ik+"' property when initializing the app?")}function iU(){return new gn(mn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oU(){return new gn(mn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function aU(n){return new gn(mn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function iy(n){return new gn(mn.INVALID_ARGUMENT,n)}function bk(){return new gn(mn.APP_DELETED,"The Firebase app was deleted.")}function lU(n){return new gn(mn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fu(n,e){return new gn(mn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Jc(n){throw new gn(mn.INTERNAL_ERROR,"Internal error: "+n)}class es{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=es.makeFromUrl(e,t)}catch{return new es(e,"")}if(r.path==="")return r;throw rU(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function p(ae){ae.path_=decodeURIComponent(ae.path)}const y="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",S=new RegExp(`^https?://${_}/${y}/b/${s}/o${T}`,"i"),P={bucket:1,path:3},M=t===xk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",X=new RegExp(`^https?://${M}/${s}/${D}`,"i"),Q=[{regex:u,indices:d,postModify:o},{regex:S,indices:P,postModify:p},{regex:X,indices:{bucket:1,path:2},postModify:p}];for(let ae=0;ae<Q.length;ae++){const de=Q[ae],me=de.regex.exec(e);if(me){const N=me[de.indices.bucket];let I=me[de.indices.path];I||(I=""),r=new es(N,I),de.postModify(r);break}}if(r==null)throw nU(e);return r}}class cU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function uU(n,e,t){let r=1,s=null,o=null,l=!1,u=0;function d(){return u===2}let p=!1;function y(...D){p||(p=!0,e.apply(null,D))}function _(D){s=setTimeout(()=>{s=null,n(S,d())},D)}function T(){o&&clearTimeout(o)}function S(D,...X){if(p){T();return}if(D){T(),y.call(null,D,...X);return}if(d()||l){T(),y.call(null,D,...X);return}r<64&&(r*=2);let Q;u===1?(u=2,Q=0):Q=(r+Math.random())*1e3,_(Q)}let P=!1;function M(D){P||(P=!0,T(),!p&&(s!==null?(D||(u=2),clearTimeout(s),_(0)):D||(u=1)))}return _(0),o=setTimeout(()=>{l=!0,M(!0)},t),M}function dU(n){n(!1)}function hU(n){return n!==void 0}function fU(n){return typeof n=="object"&&!Array.isArray(n)}function Qv(n){return typeof n=="string"||n instanceof String}function JT(n){return Yv()&&n instanceof Blob}function Yv(){return typeof Blob<"u"}function XT(n,e,t,r){if(r<e)throw iy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw iy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Jv(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Sk(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Ea;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ea||(Ea={}));function pU(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}class mU{constructor(e,t,r,s,o,l,u,d,p,y,_,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=_,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,P)=>{this.resolve_=S,this.reject_=P,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new gh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const d=u.loaded,p=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===Ea.NO_ERROR,d=o.getStatus();if(!u||pU(d,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===Ea.ABORT;r(!1,new gh(!1,null,y));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new gh(p,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());hU(d)?o(d):o()}catch(d){l(d)}else if(u!==null){const d=Wv();d.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,d)):l(d)}else if(s.canceled){const d=this.appDelete_?bk():tU();l(d)}else{const d=eU();l(d)}};this.canceled_?t(!1,new gh(!1,null,!0)):this.backoffId_=uU(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function gU(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function yU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vU(n,e){e&&(n["X-Firebase-GMPID"]=e)}function _U(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function wU(n,e,t,r,s,o,l=!0){const u=Sk(n.urlParams),d=n.url+u,p=Object.assign({},n.headers);return vU(p,e),gU(p,t),yU(p,o),_U(p,r),new mU(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}function EU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function TU(...n){const e=EU();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Yv())return new Blob(n);throw new gn(mn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function IU(n){if(typeof atob>"u")throw aU("base-64");return atob(n)}const Xs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class tg{constructor(e,t){this.data=e,this.contentType=t||null}}function bU(n,e){switch(n){case Xs.RAW:return new tg(kk(e));case Xs.BASE64:case Xs.BASE64URL:return new tg(Rk(n,e));case Xs.DATA_URL:return new tg(kU(e),RU(e))}throw Wv()}function kk(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function SU(n){let e;try{e=decodeURIComponent(n)}catch{throw fu(Xs.DATA_URL,"Malformed data URL.")}return kk(e)}function Rk(n,e){switch(n){case Xs.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw fu(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Xs.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw fu(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=IU(e)}catch(s){throw s.message.includes("polyfill")?s:fu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class Ak{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw fu(Xs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=AU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function kU(n){const e=new Ak(n);return e.base64?Rk(Xs.BASE64,e.rest):SU(e.rest)}function RU(n){return new Ak(n).contentType}function AU(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class mo{constructor(e,t){let r=0,s="";JT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(JT(this.data_)){const r=this.data_,s=xU(r,e,t);return s===null?null:new mo(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new mo(r,!0)}}static getBlob(...e){if(Yv()){const t=e.map(r=>r instanceof mo?r.data_:r);return new mo(TU.apply(null,t))}else{const t=e.map(l=>Qv(l)?bU(Xs.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new mo(s,!0)}}uploadData(){return this.data_}}function Ck(n){let e;try{e=JSON.parse(n)}catch{return null}return fU(e)?e:null}function CU(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function PU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Pk(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function NU(n,e){return e}class Tr{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||NU}}let yh=null;function DU(n){return!Qv(n)||n.length<2?n:Pk(n)}function Nk(){if(yh)return yh;const n=[];n.push(new Tr("bucket")),n.push(new Tr("generation")),n.push(new Tr("metageneration")),n.push(new Tr("name","fullPath",!0));function e(o,l){return DU(l)}const t=new Tr("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new Tr("size");return s.xform=r,n.push(s),n.push(new Tr("timeCreated")),n.push(new Tr("updated")),n.push(new Tr("md5Hash",null,!0)),n.push(new Tr("cacheControl",null,!0)),n.push(new Tr("contentDisposition",null,!0)),n.push(new Tr("contentEncoding",null,!0)),n.push(new Tr("contentLanguage",null,!0)),n.push(new Tr("contentType",null,!0)),n.push(new Tr("metadata","customMetadata",!0)),yh=n,yh}function OU(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new es(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function MU(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return OU(r,n),r}function Dk(n,e,t){const r=Ck(e);return r===null?null:MU(n,r,t)}function LU(n,e,t,r){const s=Ck(e);if(s===null||!Qv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(p=>{const y=n.bucket,_=n.fullPath,T="/b/"+l(y)+"/o/"+l(_),S=Jv(T,t,r),P=Sk({alt:"media",token:p});return S+P})[0]}function jU(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class Ok{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Mk(n){if(!n)throw Wv()}function VU(n,e){function t(r,s){const o=Dk(n,s,e);return Mk(o!==null),o}return t}function FU(n,e){function t(r,s){const o=Dk(n,s,e);return Mk(o!==null),LU(o,s,n.host,n._protocol)}return t}function Lk(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=XF():s=JF():t.getStatus()===402?s=YF(n.bucket):t.getStatus()===403?s=ZF(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function UU(n){const e=Lk(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=QF(n.path)),o.serverResponse=s.serverResponse,o}return t}function $U(n,e,t){const r=e.fullServerUrl(),s=Jv(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,u=new Ok(s,o,FU(n,t),l);return u.errorHandler=UU(e),u}function zU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function BU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=zU(null,e)),r}function qU(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let Q="";for(let ae=0;ae<2;ae++)Q=Q+Math.random().toString().slice(2);return Q}const d=u();l["Content-Type"]="multipart/related; boundary="+d;const p=BU(e,r,s),y=jU(p,t),_="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+p.contentType+`\r
\r
`,T=`\r
--`+d+"--",S=mo.getBlob(_,r,T);if(S===null)throw iU();const P={name:p.fullPath},M=Jv(o,n.host,n._protocol),D="POST",X=n.maxUploadRetryTime,W=new Ok(M,D,VU(n,t),X);return W.urlParams=P,W.headers=l,W.body=S.uploadData(),W.errorHandler=Lk(e),W}class HU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ea.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ea.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ea.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Jc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class GU extends HU{initXhr(){this.xhr_.responseType="text"}}function jk(){return new GU}class ja{constructor(e,t){this._service=e,t instanceof es?this._location=t:this._location=es.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ja(e,t)}get root(){const e=new es(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pk(this._location.path)}get storage(){return this._service}get parent(){const e=CU(this._location.path);if(e===null)return null;const t=new es(this._location.bucket,e);return new ja(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw lU(e)}}function KU(n,e,t){n._throwIfRoot("uploadBytes");const r=qU(n.storage,n._location,Nk(),new mo(e,!0),t);return n.storage.makeRequestWithTokens(r,jk).then(s=>({metadata:s,ref:n}))}function WU(n){n._throwIfRoot("getDownloadURL");const e=$U(n.storage,n._location,Nk());return n.storage.makeRequestWithTokens(e,jk).then(t=>{if(t===null)throw oU();return t})}function QU(n,e){const t=PU(n._location.path,e),r=new es(n._location.bucket,t);return new ja(n.storage,r)}function YU(n){return/^[A-Za-z]+:\/\//.test(n)}function JU(n,e){return new ja(n,e)}function Vk(n,e){if(n instanceof Xv){const t=n;if(t._bucket==null)throw sU();const r=new ja(t,t._bucket);return e!=null?Vk(r,e):r}else return e!==void 0?QU(n,e):n}function XU(n,e){if(e&&YU(e)){if(n instanceof Xv)return JU(n,e);throw iy("To use ref(service, url), the first argument must be a Storage instance.")}else return Vk(n,e)}function ZT(n,e){const t=e?.[Ik];return t==null?null:es.makeFromBucketSpec(t,n)}function ZU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:eb(s,n.app.options.projectId))}class Xv{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=xk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KF,this._maxUploadRetryTime=WF,this._requests=new Set,s!=null?this._bucket=es.makeFromBucketSpec(s,this._host):this._bucket=ZT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=es.makeFromBucketSpec(this._url,e):this._bucket=ZT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){XT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){XT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ja(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new cU(bk());{const l=wU(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const ex="@firebase/storage",tx="0.13.2";const Fk="storage";function e5(n,e,t){return n=Vt(n),KU(n,e,t)}function t5(n){return n=Vt(n),WU(n)}function n5(n,e){return n=Vt(n),XU(n,e)}function r5(n=Ba(),e){n=Vt(n);const r=Es(n,Fk).getImmediate({identifier:e}),s=Cy("storage");return s&&s5(r,...s),r}function s5(n,e,t,r={}){ZU(n,e,t,r)}function i5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Xv(t,r,s,e,za)}function o5(){Sr(new fr(Fk,i5,"PUBLIC").setMultipleInstances(!0)),Rn(ex,tx,""),Rn(ex,tx,"esm2017")}o5();const a5="type.googleapis.com/google.protobuf.Int64Value",l5="type.googleapis.com/google.protobuf.UInt64Value";function Uk(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function oy(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>oy(e));if(typeof n=="function"||typeof n=="object")return Uk(n,e=>oy(e));throw new Error("Data cannot be encoded in JSON: "+n)}function vf(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case a5:case l5:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>vf(e)):typeof n=="function"||typeof n=="object"?Uk(n,e=>vf(e)):n}const Zv="functions";const nx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $l extends as{constructor(e,t,r){super(`${Zv}/${e}`,t||""),this.details=r}}function c5(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function u5(n,e){let t=c5(n),r=t,s;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!nx[l])return new $l("internal","internal");t=nx[l],r=l}const u=o.message;typeof u=="string"&&(r=u),s=o.details,s!==void 0&&(s=vf(s))}}catch{}return t==="ok"?null:new $l(t,r,s)}class d5{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||t.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}const ay="us-central1";function h5(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new $l("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class f5{constructor(e,t,r,s,o=ay,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new d5(t,r,s),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=ay}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function p5(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function m5(n,e,t){return(r=>y5(n,e,r,t||{}))}async function g5(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}function y5(n,e,t,r){const s=n._url(e);return v5(n,s,t,r)}async function v5(n,e,t,r){t=oy(t);const s={data:t},o={},l=await n.contextProvider.getContext(r.limitedUseAppCheckTokens);l.authToken&&(o.Authorization="Bearer "+l.authToken),l.messagingToken&&(o["Firebase-Instance-ID-Token"]=l.messagingToken),l.appCheckToken!==null&&(o["X-Firebase-AppCheck"]=l.appCheckToken);const u=r.timeout||7e4,d=h5(u),p=await Promise.race([g5(e,s,o,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!p)throw new $l("cancelled","Firebase Functions instance was deleted.");const y=u5(p.status,p.json);if(y)throw y;if(!p.json)throw new $l("internal","Response is not valid JSON object.");let _=p.json.data;if(typeof _>"u"&&(_=p.json.result),typeof _>"u")throw new $l("internal","Response is missing data field.");return{data:vf(_)}}const rx="@firebase/functions",sx="0.11.8";const _5="auth-internal",w5="app-check-internal",E5="messaging-internal";function T5(n,e){const t=(r,{instanceIdentifier:s})=>{const o=r.getProvider("app").getImmediate(),l=r.getProvider(_5),u=r.getProvider(E5),d=r.getProvider(w5);return new f5(o,l,u,d,s,n)};Sr(new fr(Zv,t,"PUBLIC").setMultipleInstances(!0)),Rn(rx,sx,e),Rn(rx,sx,"esm2017")}function $k(n=Ba(),e=ay){const r=Es(Vt(n),Zv).getImmediate({identifier:e}),s=Cy("functions");return s&&zk(r,...s),r}function zk(n,e,t){p5(Vt(n),e,t)}function Bk(n,e,t){return m5(Vt(n),e,t)}T5(fetch.bind(self));const Az=Object.freeze(Object.defineProperty({__proto__:null,connectFunctionsEmulator:zk,getFunctions:$k,httpsCallable:Bk},Symbol.toStringTag,{value:"Module"})),ix="@firebase/performance",ly="0.6.9";const qk=ly,x5="FB-PERF-TRACE-START",I5="FB-PERF-TRACE-STOP",cy="FB-PERF-TRACE-MEASURE",Hk="_wt_",Gk="_fp",Kk="_fcp",Wk="_fid",Qk="@firebase/performance/config",Yk="@firebase/performance/configexpire",b5="performance",Jk="Performance";const S5={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},ur=new Fi(b5,Jk,S5);const ri=new lc(Jk);ri.logLevel=bt.INFO;let ng,Xk;class qn{constructor(e){if(this.window=e,!e)throw ur.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!rb()?(ri.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):ac()?!0:(ri.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(s=>{for(const o of s.getEntries())t(o)}).observe({entryTypes:[e]})}static getInstance(){return ng===void 0&&(ng=new qn(Xk)),ng}}function k5(n){Xk=n}let Zk;function R5(n){const e=n.getId();return e.then(t=>{Zk=t}),e}function e_(){return Zk}function A5(n){const e=n.getToken();return e.then(t=>{}),e}function ox(n,e){const t=n.length-e.length;if(t<0||t>1)throw ur.create("invalid String merger input");const r=[];for(let s=0;s<n.length;s++)r.push(n.charAt(s)),e.length>s&&r.push(e.charAt(s));return r.join("")}let rg;class ts{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ox("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ox("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return rg===void 0&&(rg=new ts),rg}}var zl;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"})(zl||(zl={}));const C5=["firebase_","google_","ga_"],P5=new RegExp("^[a-zA-Z]\\w*$"),N5=40,D5=100;function O5(){const n=qn.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function eR(){switch(qn.getInstance().document.visibilityState){case"visible":return zl.VISIBLE;case"hidden":return zl.HIDDEN;default:return zl.UNKNOWN}}function M5(){const e=qn.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function L5(n){return n.length===0||n.length>N5?!1:!C5.some(t=>n.startsWith(t))&&!!n.match(P5)}function j5(n){return n.length!==0&&n.length<=D5}function tR(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.appId;if(!t)throw ur.create("no app id");return t}function V5(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.projectId;if(!t)throw ur.create("no project id");return t}function F5(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw ur.create("no api key");return t}const U5="0.0.1",Ds={loggingEnabled:!0},$5="FIREBASE_INSTALLATIONS_AUTH";function z5(n,e){const t=B5();return t?(ax(t),Promise.resolve()):G5(n,e).then(ax).then(r=>q5(r),()=>{})}function B5(){const n=qn.getInstance().localStorage;if(!n)return;const e=n.getItem(Yk);if(!e||!K5(e))return;const t=n.getItem(Qk);if(t)try{return JSON.parse(t)}catch{return}}function q5(n){const e=qn.getInstance().localStorage;!n||!e||(e.setItem(Qk,JSON.stringify(n)),e.setItem(Yk,String(Date.now()+ts.getInstance().configTimeToLive*60*60*1e3)))}const H5="Could not fetch config, will use default configs";function G5(n,e){return A5(n.installations).then(t=>{const r=V5(n.app),s=F5(n.app),o=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${s}`,l=new Request(o,{method:"POST",headers:{Authorization:`${$5} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:tR(n.app),app_version:qk,sdk_version:U5})});return fetch(l).then(u=>{if(u.ok)return u.json();throw ur.create("RC response not ok")})}).catch(()=>{ri.info(H5)})}function ax(n){if(!n)return n;const e=ts.getInstance(),t=n.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=Ds.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):Ds.logSource&&(e.logSource=Ds.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:Ds.logEndPointUrl&&(e.logEndPointUrl=Ds.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:Ds.transportKey&&(e.transportKey=Ds.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):Ds.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=Ds.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):Ds.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=Ds.tracesSamplingRate),e.logTraceAfterSampling=lx(e.tracesSamplingRate),e.logNetworkAfterSampling=lx(e.networkRequestsSamplingRate),n}function K5(n){return Number(n)>Date.now()}function lx(n){return Math.random()<=n}let t_=1,sg;function nR(n){return t_=2,sg=sg||Q5(n),sg}function W5(){return t_===3}function Q5(n){return Y5().then(()=>R5(n.installations)).then(e=>z5(n,e)).then(()=>cx(),()=>cx())}function Y5(){const n=qn.getInstance().document;return new Promise(e=>{if(n&&n.readyState!=="complete"){const t=()=>{n.readyState==="complete"&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}function cx(){t_=3}const n_=10*1e3,J5=5.5*1e3,rR=3,X5=1e3;let _f=rR,To=[],ux=!1;function Z5(){ux||(np(J5),ux=!0)}function np(n){setTimeout(()=>{if(_f!==0){if(!To.length)return np(n_);e$()}},n)}function e$(){const n=To.splice(0,X5),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:ts.getInstance().logSource,log_event:e};t$(t,n).catch(()=>{To=[...n,...To],_f--,ri.info(`Tries left: ${_f}.`),np(n_)})}function t$(n,e){return n$(n).then(t=>(t.ok||ri.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let s=n_;isNaN(r)||(s=Math.max(r,s));const o=t.logResponseDetails;Array.isArray(o)&&o.length>0&&o[0].responseAction==="RETRY_REQUEST_LATER"&&(To=[...e,...To],ri.info("Retry transport request later.")),_f=rR,np(s)})}function n$(n){const e=ts.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}function r$(n){if(!n.eventTime||!n.message)throw ur.create("invalid cc log");To=[...To,n]}function s$(n){return(...e)=>{const t=n(...e);r$({message:t,eventTime:Date.now()})}}let ig;function sR(n,e){ig||(ig=s$(o$)),ig(n,e)}function vh(n){const e=ts.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||qn.getInstance().requiredApisAvailable()&&(n.isAuto&&eR()!==zl.VISIBLE||(W5()?og(n):nR(n.performanceController).then(()=>og(n),()=>og(n))))}function og(n){if(!e_())return;const e=ts.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>sR(n,1),0)}function i$(n){const e=ts.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],s=e.flTransportEndpointUrl.split("?")[0];t===r||t===s||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>sR(n,0),0)}function o$(n,e){return e===0?a$(n):l$(n)}function a$(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:iR(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function l$(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};Object.keys(n.counters).length!==0&&(e.counters=n.counters);const t=n.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const r={application_info:iR(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}function iR(n){return{google_app_id:tR(n),app_instance_id:e_(),web_app_info:{sdk_version:qk,page_url:qn.getInstance().getUrl(),service_worker_status:O5(),visibility_state:eR(),effective_connection_type:M5()},application_process_state:0}}const c$=100,u$="_",d$=[Gk,Kk,Wk];function h$(n,e){return n.length===0||n.length>c$?!1:e&&e.startsWith(Hk)&&d$.indexOf(n)>-1||!n.startsWith(u$)}function f$(n){const e=Math.floor(n);return e<n&&ri.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}class Ta{constructor(e,t,r=!1,s){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=qn.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${x5}-${this.randomId}-${this.name}`,this.traceStopMark=`${I5}-${this.randomId}-${this.name}`,this.traceMeasure=s||`${cy}-${this.randomId}-${this.name}`,s&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw ur.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw ur.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),vh(this)}record(e,t,r){if(e<=0)throw ur.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw ur.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const s of Object.keys(r.metrics))isNaN(Number(r.metrics[s]))||(this.counters[s]=Math.floor(Number(r.metrics[s])));vh(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(h$(e,this.name))this.counters[e]=f$(t??0);else throw ur.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=L5(e),s=j5(t);if(r&&s){this.customAttributes[e]=t;return}if(!r)throw ur.create("invalid attribute name",{attributeName:e});if(!s)throw ur.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,r,s){const o=qn.getInstance().getUrl();if(!o)return;const l=new Ta(e,Hk+o,!0),u=Math.floor(qn.getInstance().getTimeOrigin()*1e3);l.setStartTime(u),t&&t[0]&&(l.setDuration(Math.floor(t[0].duration*1e3)),l.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),l.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),l.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const d="first-paint",p="first-contentful-paint";if(r){const y=r.find(T=>T.name===d);y&&y.startTime&&l.putMetric(Gk,Math.floor(y.startTime*1e3));const _=r.find(T=>T.name===p);_&&_.startTime&&l.putMetric(Kk,Math.floor(_.startTime*1e3)),s&&l.putMetric(Wk,Math.floor(s*1e3))}vh(l)}static createUserTimingTrace(e,t){const r=new Ta(e,t,!1,t);vh(r)}}function dx(n,e){const t=e;if(!t||t.responseStart===void 0)return;const r=qn.getInstance().getTimeOrigin(),s=Math.floor((t.startTime+r)*1e3),o=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,l=Math.floor((t.responseEnd-t.startTime)*1e3),u=t.name&&t.name.split("?")[0],d={performanceController:n,url:u,responsePayloadBytes:t.transferSize,startTimeUs:s,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:l};i$(d)}const p$=5e3;function hx(n){e_()&&(setTimeout(()=>g$(n),0),setTimeout(()=>m$(n),0),setTimeout(()=>y$(n),0))}function m$(n){const e=qn.getInstance(),t=e.getEntriesByType("resource");for(const r of t)dx(n,r);e.setupObserver("resource",r=>dx(n,r))}function g$(n){const e=qn.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let s=setTimeout(()=>{Ta.createOobTrace(n,t,r),s=void 0},p$);e.onFirstInputDelay(o=>{s&&(clearTimeout(s),Ta.createOobTrace(n,t,r,o))})}else Ta.createOobTrace(n,t,r)}function y$(n){const e=qn.getInstance(),t=e.getEntriesByType("measure");for(const r of t)fx(n,r);e.setupObserver("measure",r=>fx(n,r))}function fx(n,e){const t=e.name;t.substring(0,cy.length)!==cy&&Ta.createUserTimingTrace(n,t)}class v${constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),qn.getInstance().requiredApisAvailable()?Py().then(t=>{t&&(Z5(),nR(this).then(()=>hx(this),()=>hx(this)),this.initialized=!0)}).catch(t=>{ri.info(`Environment doesn't support IndexedDB: ${t}`)}):ri.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){ts.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return ts.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){ts.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return ts.getInstance().dataCollectionEnabled}}const _$="[DEFAULT]";function w$(n=Ba()){return n=Vt(n),Es(n,"performance").getImmediate()}const E$=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if(t.name!==_$)throw ur.create("FB not default");if(typeof window>"u")throw ur.create("no window");k5(window);const s=new v$(t,r);return s._init(e),s};function T$(){Sr(new fr("performance",E$,"PUBLIC")),Rn(ix,ly),Rn(ix,ly,"esm2017")}T$();const uy=new Map,oR={activated:!1,tokenObservers:[]},x$={initialized:!1,enabled:!1};function An(n){return uy.get(n)||Object.assign({},oR)}function I$(n,e){return uy.set(n,e),uy.get(n)}function rp(){return x$}const aR="https://content-firebaseappcheck.googleapis.com/v1",b$="exchangeRecaptchaV3Token",S$="exchangeDebugToken",px={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},k$=1440*60*1e3;class R${constructor(e,t,r,s,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=s,s>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new vu,this.pending.promise.catch(t=>{}),await A$(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new vu,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}function A$(n){return new Promise(e=>{setTimeout(e,n)})}const C$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Br=new Fi("appCheck","AppCheck",C$);function mx(n=!1){var e;return n?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function r_(n){if(!An(n).activated)throw Br.create("use-before-activation",{appName:n.name})}function lR(n){const e=Math.round(n/1e3),t=Math.floor(e/(3600*24)),r=Math.floor((e-t*3600*24)/3600),s=Math.floor((e-t*3600*24-r*3600)/60),o=e-t*3600*24-r*3600-s*60;let l="";return t&&(l+=_h(t)+"d:"),r&&(l+=_h(r)+"h:"),l+=_h(s)+"m:"+_h(o)+"s",l}function _h(n){return n===0?"00":n>=10?n.toString():"0"+n}async function s_({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const _=await s.getHeartbeatsHeader();_&&(r["X-Firebase-Client"]=_)}const o={method:"POST",body:JSON.stringify(e),headers:r};let l;try{l=await fetch(n,o)}catch(_){throw Br.create("fetch-network-error",{originalErrorMessage:_?.message})}if(l.status!==200)throw Br.create("fetch-status-error",{httpStatus:l.status});let u;try{u=await l.json()}catch(_){throw Br.create("fetch-parse-error",{originalErrorMessage:_?.message})}const d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Br.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const p=Number(d[1])*1e3,y=Date.now();return{token:u.token,expireTimeMillis:y+p,issuedAtTimeMillis:y}}function P$(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${aR}/projects/${t}/apps/${r}:${b$}?key=${s}`,body:{recaptcha_v3_token:e}}}function cR(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${aR}/projects/${t}/apps/${r}:${S$}?key=${s}`,body:{debug_token:e}}}const N$="firebase-app-check-database",D$=1,Pu="firebase-app-check-store",uR="debug-token";let wh=null;function dR(){return wh||(wh=new Promise((n,e)=>{try{const t=indexedDB.open(N$,D$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(Br.create("storage-open",{originalErrorMessage:(s=r.target.error)===null||s===void 0?void 0:s.message}))},t.onupgradeneeded=r=>{const s=r.target.result;r.oldVersion===0&&s.createObjectStore(Pu,{keyPath:"compositeKey"})}}catch(t){e(Br.create("storage-open",{originalErrorMessage:t?.message}))}}),wh)}function O$(n){return fR(pR(n))}function M$(n,e){return hR(pR(n),e)}function L$(n){return hR(uR,n)}function j$(){return fR(uR)}async function hR(n,e){const r=(await dR()).transaction(Pu,"readwrite"),o=r.objectStore(Pu).put({compositeKey:n,value:e});return new Promise((l,u)=>{o.onsuccess=d=>{l()},r.onerror=d=>{var p;u(Br.create("storage-set",{originalErrorMessage:(p=d.target.error)===null||p===void 0?void 0:p.message}))}})}async function fR(n){const t=(await dR()).transaction(Pu,"readonly"),s=t.objectStore(Pu).get(n);return new Promise((o,l)=>{s.onsuccess=u=>{const d=u.target.result;o(d?d.value:void 0)},t.onerror=u=>{var d;l(Br.create("storage-get",{originalErrorMessage:(d=u.target.error)===null||d===void 0?void 0:d.message}))}})}function pR(n){return`${n.options.appId}-${n.name}`}const Nu=new lc("@firebase/app-check");async function V$(n){if(ac()){let e;try{e=await O$(n)}catch(t){Nu.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}}function ag(n,e){return ac()?M$(n,e).catch(t=>{Nu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}async function F$(){let n;try{n=await j$()}catch{}if(n)return n;{const e=F2();return L$(e).catch(t=>Nu.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),e}}function i_(){return rp().enabled}async function o_(){const n=rp();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function U$(){const n=YI(),e=rp();if(e.initialized=!0,typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&n.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const t=new vu;e.token=t,typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?t.resolve(n.FIREBASE_APPCHECK_DEBUG_TOKEN):t.resolve(F$())}const $$={error:"UNKNOWN_ERROR"};function z$(n){return Ay.encodeString(JSON.stringify(n),!1)}async function dy(n,e=!1){const t=n.app;r_(t);const r=An(t);let s=r.token,o;if(s&&!Ml(s)&&(r.token=void 0,s=void 0),!s){const d=await r.cachedTokenPromise;d&&(Ml(d)?s=d:await ag(t,void 0))}if(!e&&s&&Ml(s))return{token:s.token};let l=!1;if(i_()){r.exchangeTokenPromise||(r.exchangeTokenPromise=s_(cR(t,await o_()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const d=await r.exchangeTokenPromise;return await ag(t,d),r.token=d,{token:d.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=await An(t).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"?Nu.warn(d.message):Nu.error(d),o=d}let u;return s?o?Ml(s)?u={token:s.token,internalError:o}:u=yx(o):(u={token:s.token},r.token=s,await ag(t,s)):u=yx(o),l&&yR(t,u),u}async function B$(n){const e=n.app;r_(e);const{provider:t}=An(e);if(i_()){const r=await o_(),{token:s}=await s_(cR(e,r),n.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await t.getToken();return{token:r}}}function mR(n,e,t,r){const{app:s}=n,o=An(s),l={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,l],o.token&&Ml(o.token)){const u=o.token;Promise.resolve().then(()=>{t({token:u.token}),gx(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>gx(n))}function gR(n,e){const t=An(n),r=t.tokenObservers.filter(s=>s.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function gx(n){const{app:e}=n,t=An(e);let r=t.tokenRefresher;r||(r=q$(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function q$(n){const{app:e}=n;return new R$(async()=>{const t=An(e);let r;if(t.token?r=await dy(n,!0):r=await dy(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const t=An(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5;const s=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},px.RETRIAL_MIN_WAIT,px.RETRIAL_MAX_WAIT)}function yR(n,e){const t=An(n).tokenObservers;for(const r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ml(n){return n.expireTimeMillis-Date.now()>0}function yx(n){return{token:z$($$),error:n}}class H${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=An(this.app);for(const t of e)gR(this.app,t.next);return Promise.resolve()}}function G$(n,e){return new H$(n,e)}function K$(n){return{getToken:e=>dy(n,e),getLimitedUseToken:()=>B$(n),addTokenListener:e=>mR(n,"INTERNAL",e),removeTokenListener:e=>gR(n.app,e)}}const W$="@firebase/app-check",Q$="0.8.8";const Y$="https://www.google.com/recaptcha/api.js";function J$(n,e){const t=new vu,r=An(n);r.reCAPTCHAState={initialized:t};const s=X$(n),o=mx(!1);return o?vx(n,e,o,s,t):t3(()=>{const l=mx(!1);if(!l)throw new Error("no recaptcha");vx(n,e,l,s,t)}),t.promise}function vx(n,e,t,r,s){t.ready(()=>{e3(n,e,t,r),s.resolve(t)})}function X$(n){const e=`fire_app_check_${n.name}`,t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}async function Z$(n){r_(n);const t=await An(n).reCAPTCHAState.initialized.promise;return new Promise((r,s)=>{const o=An(n).reCAPTCHAState;t.ready(()=>{r(t.execute(o.widgetId,{action:"fire_app_check"}))})})}function e3(n,e,t,r){const s=t.render(r,{sitekey:e,size:"invisible",callback:()=>{An(n).reCAPTCHAState.succeeded=!0},"error-callback":()=>{An(n).reCAPTCHAState.succeeded=!1}}),o=An(n);o.reCAPTCHAState=Object.assign(Object.assign({},o.reCAPTCHAState),{widgetId:s})}function t3(n){const e=document.createElement("script");e.src=Y$,e.onload=n,document.head.appendChild(e)}class a_{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,t,r;r3(this._throttleData);const s=await Z$(this._app).catch(l=>{throw Br.create("recaptcha-error")});if(!(!((e=An(this._app).reCAPTCHAState)===null||e===void 0)&&e.succeeded))throw Br.create("recaptcha-error");let o;try{o=await s_(P$(this._app,s),this._heartbeatServiceProvider)}catch(l){throw!((t=l.code)===null||t===void 0)&&t.includes("fetch-status-error")?(this._throttleData=n3(Number((r=l.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Br.create("throttled",{time:lR(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):l}return this._throttleData=null,o}initialize(e){this._app=e,this._heartbeatServiceProvider=Es(e,"heartbeat"),J$(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof a_?this._siteKey===e._siteKey:!1}}function n3(n,e){if(n===404||n===403)return{backoffCount:1,allowRequestsAfter:Date.now()+k$,httpStatus:n};{const t=e?e.backoffCount:0,r=bg(t,1e3,2);return{backoffCount:t+1,allowRequestsAfter:Date.now()+r,httpStatus:n}}}function r3(n){if(n&&Date.now()-n.allowRequestsAfter<=0)throw Br.create("throttled",{time:lR(n.allowRequestsAfter-Date.now()),httpStatus:n.httpStatus})}function s3(n=Ba(),e){n=Vt(n);const t=Es(n,"app-check");if(rp().initialized||U$(),i_()&&o_().then(s=>console.log(`App Check debug token: ${s}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(o.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&o.provider.isEqual(e.provider))return s;throw Br.create("already-initialized",{appName:n.name})}const r=t.initialize({options:e});return i3(n,e.provider,e.isTokenAutoRefreshEnabled),An(n).isTokenAutoRefreshEnabled&&mR(r,"INTERNAL",()=>{}),r}function i3(n,e,t){const r=I$(n,Object.assign({},oR));r.activated=!0,r.provider=e,r.cachedTokenPromise=V$(n).then(s=>(s&&Ml(s)&&(r.token=s,yR(n,{token:s.token})),s)),r.isTokenAutoRefreshEnabled=t===void 0?n.automaticDataCollectionEnabled:t,r.provider.initialize(n)}const o3="app-check",_x="app-check-internal";function a3(){Sr(new fr(o3,n=>{const e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return G$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(_x).initialize()})),Sr(new fr(_x,n=>{const e=n.getProvider("app-check").getImmediate();return K$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rn(W$,Q$)}a3();const l3={apiKey:"AIzaSyDlj3o08kSJrEhKJjU2Xb1LMNeXD2hxWhY",authDomain:"richard-automotive.firebaseapp.com",projectId:"richard-automotive",storageBucket:"richard-automotive.firebasestorage.app",messagingSenderId:"197990063384",appId:"1:197990063384:web:2e797f109bda021e2e926d",measurementId:"G-BB5QFNTHHG"},Va=ab(l3),sp=Nb(Va),Xn=SF(Va),si=xj(Va),vR=r5(Va),_R=$k(Va);if(typeof window<"u"){w$(Va);const n="6LcjLVEsAAAAACp0uy5e3KOKDkssq45bOM8TRU0r";s3(Va,{provider:new a_(n),isTokenAutoRefreshEnabled:!0})}typeof window<"u"&&kF(Xn).catch(n=>{n.code==="failed-precondition"?console.warn("Persistencia fall: Mltiples pestaas abiertas."):n.code==="unimplemented"&&console.warn("El navegador no soporta persistencia.")});const ip=Ju(Xn,"cars"),wR=Ju(Xn,"applications"),ER=async(n=9,e=null,t="all",r=null)=>{const s=[];t&&t!=="all"&&s.push(jF("type","==",t)),r?s.push(WT("price",r)):s.push(WT("name","asc")),e&&s.push(FF(e)),s.push(VF(n));const o=LF(ip,...s);try{const l=await BF(o),u=l.docs.map(p=>({id:p.id,...p.data()})),d=l.docs[l.docs.length-1]||null;return{cars:u,lastDoc:d,hasMore:l.docs.length===n}}catch(l){throw console.error("Pagination Error:",l),l.code==="failed-precondition"&&console.warn("Index missing for this query. Check console link."),l}},TR=n=>wk(ip,e=>{const t=e.docs.map(r=>({id:r.id,...r.data()}));t.sort((r,s)=>r.name.localeCompare(s.name)),n(t)},e=>{console.error("syncInventory Error:",e)}),c3=async n=>{try{const e=n5(vR,`inventory/${Date.now()}_${n.name}`),t=await e5(e,n);return await t5(t.ref)}catch(e){throw console.error("Error al subir imagen:",e),new Error("No se pudo subir la imagen a Firebase Storage.")}},xR=async n=>{await ep(ip,n)},IR=async n=>{const e=ws(Xn,"cars",n.id),{id:t,...r}=n;await Ka(e,r)},bR=async n=>{const e=ws(Xn,"cars",n);await _k(e)},SR=async n=>{const e=GF(Xn);n.forEach(t=>{const r=ws(ip);e.set(r,t)}),await e.commit()},u3=async n=>{const e=ws(Xn,"cars",n);if(await Ka(e,{views:Tk(1)},{merge:!0}),typeof window<"u"){const{logEvent:t}=await zt(async()=>{const{logEvent:r}=await Promise.resolve().then(()=>Vy);return{logEvent:r}},[]);t(sp,"view_item",{items:[{item_id:n}]})}},kR=async n=>{const e=ws(Xn,"cars",n);await Ka(e,{leads_count:Tk(1)},{merge:!0})},RR=n=>{let e=40;return n.type==="trade-in"&&(e+=15),n.type==="finance"&&n.ssn&&(e+=25),n.firstName&&n.lastName&&(e+=5),n.phone&&n.phone.length>=10&&(e+=15),n.email&&n.email.includes("@")&&(e+=10),n.vehicleInfo&&n.vehicleInfo.id&&(e+=10),n.monthlyIncome&&Number(n.monthlyIncome)>2e3&&(e+=10),n.message&&n.message.length>20&&(e+=5),Math.min(e,99)},d3=async n=>{const e=RR(n),t={...n,...n.ssn?{ssn:`XXX-XX-${n.ssn.slice(-4)}`}:{},timestamp:new Date,status:"new",type:n.type||"finance",aiScore:e,aiSummary:n.aiSummary||"Lead capturado automticamente."};if(await ep(wR,t),n.vehicleInfo&&n.vehicleInfo.id&&await kR(n.vehicleInfo.id),typeof window<"u"){const{logEvent:r}=await zt(async()=>{const{logEvent:s}=await Promise.resolve().then(()=>Vy);return{logEvent:s}},void 0);r(sp,"generate_lead",{currency:"USD",value:e,lead_type:t.type,vehicle_id:t.vehicleId})}},h3=n=>wk(wR,e=>{const t=e.docs.map(r=>{const s=r.data();return{id:r.id,type:s.type||"general",status:s.status||"new",firstName:s.firstName||"Cliente",lastName:s.lastName||"Desconocido",email:s.email,phone:s.phone,timestamp:s.timestamp,vehicleOfInterest:s.vehicleInfo?.name||s.vehicleOfInterest,vehicleId:s.vehicleInfo?.id,tradeInDetails:s.tradeIn?`${s.tradeIn.year} ${s.tradeIn.make} ${s.tradeIn.model}`:void 0,message:s.message,aiScore:s.aiScore||RR(s),aiSummary:s.aiSummary}});t.sort((r,s)=>{const o=l=>l?typeof l.toDate=="function"?l.toDate().getTime():l.seconds?l.seconds*1e3:l instanceof Date?l.getTime():0:0;return o(s.timestamp)-o(r.timestamp)}),n(t)},e=>{console.error("syncLeads Error:",e)}),f3=async(n,e)=>{const t=ws(Xn,"applications",n);await Ka(t,{status:e},{merge:!0})},p3=async(n,e,t)=>{try{return(await Bk(_R,"generateDescription")({carModel:n,features:e})).data}catch(r){throw console.error("Error generating description:",r),new Error("Failed to generate description via AI.")}},m3=async n=>{try{const e=Ju(Xn,"subscribers");await ep(e,{email:n,timestamp:HF()})}catch(e){throw console.error("Error subscribing:",e),e}},Cz=Object.freeze(Object.defineProperty({__proto__:null,addCar:xR,analytics:sp,auth:si,db:Xn,deleteCar:bR,functions:_R,generateCarDescriptionAI:p3,getPaginatedCars:ER,incrementCarLead:kR,incrementCarView:u3,storage:vR,submitApplication:d3,subscribeToNewsletter:m3,syncInventory:TR,syncLeads:h3,updateCar:IR,updateLeadStatus:f3,uploadImage:c3,uploadInitialInventory:SR},Symbol.toStringTag,{value:"Module"}));var g3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const y3=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pe=(n,e)=>{const t=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:u="",children:d,...p},y)=>j.createElement("svg",{ref:y,...g3,width:s,height:s,stroke:r,strokeWidth:l?Number(o)*24/Number(s):o,className:["lucide",`lucide-${y3(n)}`,u].join(" "),...p},[...e.map(([_,T])=>j.createElement(_,T)),...Array.isArray(d)?d:[d]]));return t.displayName=`${n}`,t};const l_=Pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const AR=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const lg=Pe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const v3=Pe("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);const _3=Pe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const w3=Pe("BotMessageSquare",[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z",key:"w2lp3e"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M9 11v2",key:"1ueba0"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M20 12h2",key:"1q8mjw"}]]);const E3=Pe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const wf=Pe("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);const T3=Pe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const x3=Pe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const I3=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const wx=Pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const CR=Pe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);const b3=Pe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const S3=Pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const PR=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const c_=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const k3=Pe("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);const R3=Pe("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const A3=Pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const C3=Pe("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]);const P3=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const N3=Pe("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);const D3=Pe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);const O3=Pe("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]);const M3=Pe("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const L3=Pe("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);const NR=Pe("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);const DR=Pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const Ef=Pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const j3=Pe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const V3=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const F3=Pe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);const U3=Pe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const pu=Pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const $3=Pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const z3=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const B3=Pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const OR=Pe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const q3=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const MR=Pe("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const LR=Pe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const H3=Pe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const G3=Pe("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);const K3=Pe("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);const jR=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const W3=Pe("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);const Q3=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Y3=Pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const J3=Pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const VR=Pe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const u_=Pe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const X3=Pe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const rc=Pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const Z3=Pe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const e9=Pe("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);const Ex=Pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const t9=Pe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);const n9=Pe("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);const FR=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const r9=Pe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);const s9=Pe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);const i9=Pe("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);const o9=Pe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const a9=Pe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const Vi=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const l9=Pe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);const UR=Pe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var Tx;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(Tx||(Tx={}));var xx;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(xx||(xx={}));var Ix;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Ix||(Ix={}));const bx=["user","model","function","system"];var Sx;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Sx||(Sx={}));var kx;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(kx||(kx={}));var Rx;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Rx||(Rx={}));var Ax;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(Ax||(Ax={}));var mu;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(mu||(mu={}));var Cx;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(Cx||(Cx={}));var Px;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Px||(Px={}));var Nx;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Nx||(Nx={}));class hr extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Al extends hr{constructor(e,t){super(e),this.response=t}}class $R extends hr{constructor(e,t,r,s){super(e),this.status=t,this.statusText=r,this.errorDetails=s}}class xo extends hr{}class zR extends hr{}const c9="https://generativelanguage.googleapis.com",u9="v1beta",d9="0.24.1",h9="genai-js";var Fa;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Fa||(Fa={}));class f9{constructor(e,t,r,s,o){this.model=e,this.task=t,this.apiKey=r,this.stream=s,this.requestOptions=o}toString(){var e,t;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||u9;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||c9}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function p9(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${h9}/${d9}`),e.join(" ")}async function m9(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",p9(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new xo(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,o]of r.entries()){if(s==="x-goog-api-key")throw new xo(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new xo(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function g9(n,e,t,r,s,o){const l=new f9(n,e,t,r,o);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},w9(o)),{method:"POST",headers:await m9(l),body:s})}}async function nd(n,e,t,r,s,o={},l=fetch){const{url:u,fetchOptions:d}=await g9(n,e,t,r,s,o);return y9(u,d,l)}async function y9(n,e,t=fetch){let r;try{r=await t(n,e)}catch(s){v9(s,n)}return r.ok||await _9(r,n),r}function v9(n,e){let t=n;throw t.name==="AbortError"?(t=new zR(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof $R||n instanceof xo||(t=new hr(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function _9(n,e){let t="",r;try{const s=await n.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new $R(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)}function w9(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function d_(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Fh(n.candidates[0]))throw new Al(`${uo(n)}`,n);return E9(n)}else if(n.promptFeedback)throw new Al(`Text not available. ${uo(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Fh(n.candidates[0]))throw new Al(`${uo(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Dx(n)[0]}else if(n.promptFeedback)throw new Al(`Function call not available. ${uo(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Fh(n.candidates[0]))throw new Al(`${uo(n)}`,n);return Dx(n)}else if(n.promptFeedback)throw new Al(`Function call not available. ${uo(n)}`,n)},n}function E9(n){var e,t,r,s;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const l of(s=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)l.text&&o.push(l.text),l.executableCode&&o.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&o.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function Dx(n){var e,t,r,s;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const l of(s=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)l.functionCall&&o.push(l.functionCall);if(o.length>0)return o}const T9=[mu.RECITATION,mu.SAFETY,mu.LANGUAGE];function Fh(n){return!!n.finishReason&&T9.includes(n.finishReason)}function uo(n){var e,t,r;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){const o=n.candidates[0];Fh(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function Du(n){return this instanceof Du?(this.v=n,this):new Du(n)}function x9(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,o=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(T){r[T]&&(s[T]=function(S){return new Promise(function(P,M){o.push([T,S,P,M])>1||u(T,S)})})}function u(T,S){try{d(r[T](S))}catch(P){_(o[0][3],P)}}function d(T){T.value instanceof Du?Promise.resolve(T.value.v).then(p,y):_(o[0][2],T)}function p(T){u("next",T)}function y(T){u("throw",T)}function _(T,S){T(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}const Ox=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function I9(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=k9(e),[r,s]=t.tee();return{stream:S9(r),response:b9(s)}}async function b9(n){const e=[],t=n.getReader();for(;;){const{done:r,value:s}=await t.read();if(r)return d_(R9(e));e.push(s)}}function S9(n){return x9(this,arguments,function*(){const t=n.getReader();for(;;){const{value:r,done:s}=yield Du(t.read());if(s)break;yield yield Du(d_(r))}})}function k9(n){const e=n.getReader();return new ReadableStream({start(r){let s="";return o();function o(){return e.read().then(({value:l,done:u})=>{if(u){if(s.trim()){r.error(new hr("Failed to parse stream"));return}r.close();return}s+=l;let d=s.match(Ox),p;for(;d;){try{p=JSON.parse(d[1])}catch{r.error(new hr(`Error parsing JSON response: "${d[1]}"`));return}r.enqueue(p),s=s.substring(d[0].length),d=s.match(Ox)}return o()}).catch(l=>{let u=l;throw u.stack=l.stack,u.name==="AbortError"?u=new zR("Request aborted when reading from the stream"):u=new hr("Error reading from the stream"),u})}}})}function R9(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const r of n){if(r.candidates){let s=0;for(const o of r.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const l={};for(const u of o.content.parts)u.text&&(l.text=u.text),u.functionCall&&(l.functionCall=u.functionCall),u.executableCode&&(l.executableCode=u.executableCode),u.codeExecutionResult&&(l.codeExecutionResult=u.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),t.candidates[s].content.parts.push(l)}s++}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}async function BR(n,e,t,r){const s=await nd(e,Fa.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return I9(s)}async function qR(n,e,t,r){const o=await(await nd(e,Fa.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:d_(o)}}function HR(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Ou(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return A9(e)}function A9(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let r=!1,s=!1;for(const o of n)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),r=!0);if(r&&s)throw new hr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new hr("No content is provided for sending chat message.");return r?e:t}function C9(n,e){var t;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new xo("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(s)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{const o=Ou(n);r.contents=[o]}return{generateContentRequest:r}}function Mx(n){let e;return n.contents?e=n:e={contents:[Ou(n)]},n.systemInstruction&&(e.systemInstruction=HR(n.systemInstruction)),e}function P9(n){return typeof n=="string"||Array.isArray(n)?{content:Ou(n)}:n}const Lx=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],N9={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function D9(n){let e=!1;for(const t of n){const{role:r,parts:s}=t;if(!e&&r!=="user")throw new hr(`First content should be with role 'user', got ${r}`);if(!bx.includes(r))throw new hr(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(bx)}`);if(!Array.isArray(s))throw new hr("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new hr("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const d of Lx)d in u&&(o[d]+=1);const l=N9[r];for(const u of Lx)if(!l.includes(u)&&o[u]>0)throw new hr(`Content with role '${r}' can't contain '${u}' part`);e=!0}}function jx(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const r of t.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const Vx="SILENT_ERROR";class O9{constructor(e,t,r,s={}){this.model=t,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(D9(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,s,o,l,u,d;await this._sendPromise;const p=Ou(e),y={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},_=Object.assign(Object.assign({},this._requestOptions),t);let T;return this._sendPromise=this._sendPromise.then(()=>qR(this._apiKey,this.model,y,_)).then(S=>{var P;if(jx(S.response)){this._history.push(p);const M=Object.assign({parts:[],role:"model"},(P=S.response.candidates)===null||P===void 0?void 0:P[0].content);this._history.push(M)}else{const M=uo(S.response);M&&console.warn(`sendMessage() was unsuccessful. ${M}. Inspect response object for details.`)}T=S}).catch(S=>{throw this._sendPromise=Promise.resolve(),S}),await this._sendPromise,T}async sendMessageStream(e,t={}){var r,s,o,l,u,d;await this._sendPromise;const p=Ou(e),y={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},_=Object.assign(Object.assign({},this._requestOptions),t),T=BR(this._apiKey,this.model,y,_);return this._sendPromise=this._sendPromise.then(()=>T).catch(S=>{throw new Error(Vx)}).then(S=>S.response).then(S=>{if(jx(S)){this._history.push(p);const P=Object.assign({},S.candidates[0].content);P.role||(P.role="model"),this._history.push(P)}else{const P=uo(S);P&&console.warn(`sendMessageStream() was unsuccessful. ${P}. Inspect response object for details.`)}}).catch(S=>{S.message!==Vx&&console.error(S)}),T}}async function M9(n,e,t,r){return(await nd(e,Fa.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()}async function L9(n,e,t,r){return(await nd(e,Fa.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()}async function j9(n,e,t,r){const s=t.requests.map(l=>Object.assign(Object.assign({},l),{model:e}));return(await nd(e,Fa.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),r)).json()}class Fx{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=HR(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;const s=Mx(e),o=Object.assign(Object.assign({},this._requestOptions),t);return qR(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),o)}async generateContentStream(e,t={}){var r;const s=Mx(e),o=Object.assign(Object.assign({},this._requestOptions),t);return BR(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),o)}startChat(e){var t;return new O9(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const r=C9(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return M9(this.apiKey,this.model,r,s)}async embedContent(e,t={}){const r=P9(e),s=Object.assign(Object.assign({},this._requestOptions),t);return L9(this.apiKey,this.model,r,s)}async batchEmbedContents(e,t={}){const r=Object.assign(Object.assign({},this._requestOptions),t);return j9(this.apiKey,this.model,e,r)}}class V9{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new hr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Fx(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new xo("Cached content must contain a `name` field.");if(!e.model)throw new xo("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const l of s)if(t?.[l]&&e[l]&&t?.[l]!==e[l]){if(l==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===d)continue}throw new xo(`Different value for "${l}" specified in modelParams (${t[l]}) and cachedContent (${e[l]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Fx(this.apiKey,o,r)}}const oi=()=>new V9("AIzaSyDX4LrsmMU_FGRFeXLYtVDkNUI9-6TvlFY"),cg={suv:"Tenemos excelentes SUVs como la Hyundai Tucson y Santa Fe. Te gustara ver detalles de alguna?",precio:"Nuestros precios son muy competitivos y transparentes. Buscas algo en un rango especfico?",oferta:"S, tenemos ofertas especiales de 0% APR en modelos seleccionados. Pregntame por la Santa Fe!",financiamiento:"Trabajamos con todos los bancos locales. Te gustara pre-cualificar ahora mismo?",horario:"Estamos abiertos de Lunes a Sbado de 9am a 6pm. Te esperamos!",telefono:"Puedes llamarnos al 787-368-2880 para atencin inmediata.","test drive":"Claro! Podemos agendar tu prueba de manejo hoy mismo. Qu modelo te interesa?",default:"Lo siento, mi conexin con el cerebro central est un poco lenta. Pero estoy aqu para ayudarte. Puedes intentar preguntar de otra forma o llamar al 787-368-2880?"},F9=n=>{const e=(n||"").toLowerCase();for(const t in cg)if(e.includes(t))return cg[t];return cg.default},U9=async(n,e,t=[])=>{const r=e.reduce((u,d)=>{const p=d.type||"Otros";return u[p]||(u[p]=[]),u[p].push(`- ${d.name}: $${(d.price||0).toLocaleString()} ${d.badge?`[${d.badge}]`:""}`),u},{}),s=Object.entries(r).map(([u,d])=>` ${u.toUpperCase()}:
${d.join(`
`)}`).join(`

`),o=t.map(u=>`${u.role==="user"?"CLIENTE":"RICHARD_IA"}: ${u.text}`).join(`
`),l=`
    Eres "Richard IA", el consultor experto de ventas de Richard Automotive en Puerto Rico.
    Tu objetivo es agendar una prueba de manejo o venta.
    
    INVENTARIO ORGANIZADO:
    ${s||"No hay inventario disponible."}
    
    HISTORIAL:
    ${o}
    
    INSTRUCCIONES:
    1. S emptico y profesional.
    2. Usa emojis con moderacin.
    3. Si el cliente pregunta por precio, ofrece opciones de financiamiento.
    4. Responde SIEMPRE en espaol.
  `;try{return(await(await oi().getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:l}).generateContent(n)).response).text()}catch(u){return console.warn("Gemini Error:",u),F9(n)}},Pz=async n=>{const t=`
    Analiza este garaje: ${n.map(r=>`${r.name} ($${r.price})`).join(", ")}.
    
    TASK:
    1. Identify the user's spending power and lifestyle based on cars.
    2. Suggest 1 actionable improvement or trade-in.
    
    OUTPUT FORMAT:
    HTML simple (sin markdown block), use <p>, <strong>, <ul>.
  `;try{return(await oi().getGenerativeModel({model:"gemini-1.5-flash"}).generateContent(t)).response.text()}catch{return"<p>Error de conexin con el asesor IA.</p>"}},$9=async(n,e)=>{if(!e||e.length===0)return{persona:"Analista de Datos",matches:[]};const t=e.map(s=>({id:s.id,name:s.name,price:s.price,type:s.type})),r=`
    User Profile: "${n}". 
    Inventory: ${JSON.stringify(t)}.
    
    TASK:
    1. Analyze user needs (Reasoning).
    2. Match top 3 cars.
    3. Assign 0-100 score.
    
    RETURN JSON ONLY:
    {
      "reasoning": "string analyzing the user",
      "persona": "Creative Persona Name (e.g. 'Fantico de la Velocidad')",
      "matches": [
         { "carId": "id", "score": 95, "reason": "Why this matches" }
      ]
    }
  `;try{const l=(await oi().getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(r)).response.text();return JSON.parse(l)}catch{return{persona:"Error de Anlisis",matches:[]}}},z9=async(n,e)=>{const t=`
    Compare ${n.name} vs ${e.name}.
    
    RETURN JSON ONLY:
    {
        "winnerId": "string (id of winner)",
        "reasoning": "Chain of thought explanation",
        "verdict": "Short final verdict",
        "categories": [
            { "name": "Potencia", "winner": "${n.name} or ${e.name}", "detail": "explanation" },
            { "name": "Economa", "winner": "...", "detail": "..." },
            { "name": "Confort", "winner": "...", "detail": "..." },
            { "name": "Tecnologa", "winner": "...", "detail": "..." }
        ]
    }
  `,s=await oi().getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(t);return JSON.parse(s.response.text())},Nz=async(n,e)=>{try{return(await oi().getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:e}).generateContent(n)).response.text()}catch(t){return console.error("Error generating text:",t),t instanceof Error?`Error: ${t.message}`:"Ocurri un error al procesar tu solicitud."}},Dz=async(n,e)=>{try{return(await oi().getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:e}).generateContent(n)).response.text()}catch{return"Ocurri un error al procesar tu cdigo."}},B9=async n=>{try{const e=oi().getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}),r={inlineData:{data:n.replace(/^data:image\/\w+;base64,/,""),mimeType:"image/jpeg"}},o=await e.generateContent([`
        Analiza esta imagen de un vehculo.
        RETURN JSON ONLY:
        {
            "type": "SUV | Sedan | Truck | Coupe",
            "keywords": ["tag1", "tag2", "tag3"],
            "description": "Professional automated description of the vehicle's design and condition."
        }
    `,r]);return JSON.parse(o.response.text())}catch{throw new Error("No pudimos identificar el vehculo.")}},q9=async n=>{const e=`
    Role: Senior Sales Executive.
    Product: ${n.name}, Price: $${n.price}, Type: ${n.type}.
    Task: Write a short, punchy, persuasive 1-paragraph pitch (HTML <p>) to sell this specific car.
    Focus on value and emotion. Spanish.
    
    RETURN JSON ONLY:
    {
       "reasoning": "Internal thought process",
       "pitch": "Final sales pitch text"
    }
  `;try{const r=await oi().getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(e);return JSON.parse(r.response.text()).pitch||`Este ${n.name} es una oportunidad nica!`}catch{return`Este ${n.name} es increble! Ven a verlo hoy mismo.`}},Oz=async n=>"https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?auto=format&fit=crop&q=80&w=1000",Mz=async n=>{const e=oi().getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}),t=`Write blog post about ${n}. JSON: { title, excerpt, content, tags }.`;try{const r=await e.generateContent(t),s=JSON.parse(r.response.text());return{id:Date.now().toString(),title:s.title,excerpt:s.excerpt,content:s.content,author:"Richard AI",date:new Date().toLocaleDateString(),imageUrl:"https://images.unsplash.com/photo-1492144534655-ae79c964c9d7",tags:s.tags}}catch{throw new Error("Blog Gen Error")}},Lz=async(n,e,t,r)=>{throw new Error("Video generation unavailable.")},jz=n=>Promise.resolve(null),Vz=async n=>{try{const e=oi().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}),t=n.map(o=>({inlineData:{data:o.replace(/^data:image\/\w+;base64,/,""),mimeType:"image/jpeg"}})),s=await e.generateContent([`
            Analyze these vehicle images for trade-in valuation.
            RETURN JSON ONLY:
            {
                "condition": "Excellent | Good | Fair | Poor",
                "defects": ["scratch on bumper", "dent on door"],
                "estimatedValueAdjustment": 0.95 (multiplier),
                "reasoning": "Chain of thought analysis of visible condition"
            }
        `,...t]);return JSON.parse(s.response.text())}catch{return{condition:"Good",defects:[],estimatedValueAdjustment:1,reasoning:"Error"}}},H9=({car:n,onClose:e})=>{const[t,r]=j.useState(0),[s,o]=j.useState(0),[l,u]=j.useState(84),[d,p]=j.useState(.059),[y,_]=j.useState(0),[T,S]=j.useState("calculator"),[P,M]=j.useState(""),[D,X]=j.useState(!1),[W,Q]=j.useState({}),ae=Hn.useMemo(()=>{const k=t===""?0:t,L=s===""?0:s,C=Math.max(0,n.price-k-L);if(C<=0)return 0;const R=d/12;if(R===0)return Math.round(C/l);const ut=R*Math.pow(1+R,l),Je=Math.pow(1+R,l)-1;return Math.round(C*(ut/Je))},[t,s,l,d,n.price]),de=j.useRef(null);j.useEffect(()=>{const k=document.activeElement;de.current&&de.current.focus();const L=C=>{C.key==="Escape"&&e()};return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L),k?.focus()}},[e]);const me=k=>{S(k),k==="insight"&&!P&&!D&&(X(!0),q9(n).then(L=>M(L)).catch(()=>M("No pudimos conectar con Richard IA en este momento.")).finally(()=>X(!1)))},N=()=>{const k={};let L=!0;return t===""?(k.downPayment="Este campo es obligatorio.",L=!1):t<0&&(k.downPayment="El valor no puede ser negativo.",L=!1),Q(k),L},I=()=>{if(T!=="calculator"&&me("calculator"),!N()){const C=document.getElementById("calculator-form");C?.classList.add("animate-shake"),setTimeout(()=>C?.classList.remove("animate-shake"),500);return}const k=t===""?0:t,L=s===""?0:s;window.open(`https://wa.me/17873682880?text=Hola, vi el anlisis de IA del ${n.name}. Me interesa con un pago estimado de $${ae}/mes (Pronto: $${k}, TradeIn: $${L}, Trmino: ${l} meses).`,"_blank")},A=async()=>{const k={title:`Mira este ${n.name}`,text:`Encontr este ${n.name} en Richard Automotive! Precio: $${n.price.toLocaleString()}`,url:window.location.href};if(navigator.share)try{await navigator.share(k)}catch{}else{const L=`https://wa.me/?text=${encodeURIComponent(k.text)}`;window.open(L,"_blank")}};return g.jsxs("div",{ref:de,tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":"car-modal-title",className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0d2232]/80 backdrop-blur-xl animate-in fade-in",children:[g.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-[40px] md:rounded-[60px] shadow-2xl p-4 md:p-6 relative flex flex-col lg:flex-row gap-6 overflow-hidden",children:[g.jsxs("div",{className:"absolute top-6 right-6 lg:top-8 lg:right-8 z-20 flex gap-2",children:[g.jsx("button",{onClick:A,className:"w-10 h-10 lg:w-12 lg:h-12 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md rounded-full flex items-center justify-center text-slate-500 dark:text-slate-300 hover:bg-[#00aed9] hover:text-white transition-all shadow-lg",title:"Compartir en Redes",children:g.jsx(J3,{size:20})}),g.jsx("button",{onClick:e,"aria-label":"Cerrar modal",className:"w-10 h-10 lg:w-12 lg:h-12 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md rounded-full flex items-center justify-center text-slate-500 dark:text-slate-300 hover:bg-rose-500 hover:text-white transition-all shadow-lg",children:g.jsx(Vi,{size:20})})]}),g.jsxs("div",{className:"w-full lg:w-3/5 h-1/3 lg:h-full bg-white dark:bg-slate-800 rounded-[35px] lg:rounded-[45px] flex items-center justify-center p-8 lg:p-12 relative overflow-hidden group border border-slate-200 dark:border-slate-700",children:[g.jsx("div",{className:"absolute inset-0 bg-slate-50/50 dark:bg-slate-900/20"}),g.jsx("img",{src:n.img,alt:n.name,loading:"lazy",decoding:"async",className:"relative z-10 max-w-full max-h-full object-contain transition-transform duration-700 group-hover:scale-105"}),n.badge&&g.jsx("div",{className:"absolute top-6 left-6 lg:top-8 lg:left-8 bg-[#00aed9] text-white px-4 py-2 rounded-full text-[10px] lg:text-xs font-black uppercase tracking-widest shadow-xl z-10",children:n.badge})]}),g.jsxs("div",{className:"w-full lg:w-2/5 flex flex-col h-full overflow-hidden",children:[g.jsxs("div",{className:"mb-6 px-2",children:[g.jsx("span",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-[0.3em]",children:n.type}),g.jsx("h2",{id:"car-modal-title",className:"text-3xl lg:text-4xl font-black text-slate-800 dark:text-white tracking-tighter leading-tight mt-1",children:n.name}),g.jsxs("p",{className:"text-xl font-bold text-slate-500 dark:text-slate-400 mt-2",children:["$",n.price.toLocaleString()]})]}),g.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 lg:p-8 rounded-[35px] text-center shadow-lg dark:shadow-none border border-slate-100 dark:border-slate-700 mb-6 shrink-0 transition-all",children:[g.jsxs("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center justify-center gap-2",children:[g.jsx(x3,{size:14})," Pago Mensual Estimado"]}),g.jsxs("div",{className:"text-5xl lg:text-6xl font-black premium-gradient text-transparent bg-clip-text tracking-tighter my-2",children:["$",ae]})]}),g.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-800 p-1.5 rounded-2xl mb-4 shrink-0",children:[g.jsx("button",{onClick:()=>me("calculator"),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${T==="calculator"?"bg-white dark:bg-slate-600 text-[#00aed9] shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:"Calculadora"}),g.jsxs("button",{onClick:()=>me("insight"),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${T==="insight"?"bg-white dark:bg-slate-600 text-[#00aed9] shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[g.jsx(rc,{size:14})," Richard's Insight"]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:T==="calculator"?g.jsxs("div",{id:"calculator-form",className:"space-y-6 pb-4 animate-in fade-in slide-in-from-bottom-2",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"downPaymentInput",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[g.jsx(_3,{size:12})," Pronto ($) ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{id:"downPaymentInput",type:"number",min:"0",max:n.price,required:!0,value:t,onChange:k=>{r(k.target.value===""?"":Number(k.target.value)),W.downPayment&&Q(L=>({...L,downPayment:void 0}))},className:`w-full px-5 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-2 rounded-[20px] text-lg font-bold outline-none transition-all placeholder:text-slate-300 
                                    ${W.downPayment?"border-red-500 focus:ring-4 focus:ring-red-500/20 bg-red-50 dark:bg-red-900/10":"border-transparent focus:ring-4 focus:ring-[#00aed9]/20"}`,placeholder:"0"}),g.jsx("input",{type:"range",min:"0",max:n.price,value:t||0,onChange:k=>r(Number(k.target.value)),className:"w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-[#00aed9]"}),W.downPayment&&g.jsxs("div",{className:"flex items-center gap-1 ml-2 text-xs font-bold text-red-500 animate-in fade-in slide-in-from-top-1",children:[g.jsx(l_,{size:12})," ",W.downPayment]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"tradeInInput",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[g.jsx(A3,{size:12})," Trade-In ($)"]}),g.jsx("input",{id:"tradeInInput",type:"number",min:"0",max:n.price,value:s,onChange:k=>o(k.target.value===""?"":Number(k.target.value)),className:"w-full px-5 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-2 border-transparent rounded-[20px] focus:ring-4 focus:ring-[#00aed9]/20 text-lg font-bold outline-none transition-all placeholder:text-slate-300",placeholder:"0"}),g.jsx("input",{type:"range",min:"0",max:n.price,value:s||0,onChange:k=>o(Number(k.target.value)),className:"w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-[#00aed9]"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"creditRateSelect",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2",children:["Puntuacin de Crdito ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("select",{id:"creditRateSelect",value:d,onChange:k=>p(Number(k.target.value)),className:"w-full px-6 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-none rounded-[20px] focus:ring-4 focus:ring-[#00aed9]/20 text-sm font-bold appearance-none cursor-pointer outline-none",children:[g.jsx("option",{value:.029,children:"Excelente (720+)"}),g.jsx("option",{value:.059,children:"Bueno (660+)"}),g.jsx("option",{value:.099,children:"Justo (600+)"}),g.jsx("option",{value:.129,children:"Trabajado (580+)"})]}),g.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:""})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[g.jsx(I3,{size:12})," Trmino ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("div",{className:"grid grid-cols-3 gap-3",children:[60,72,84].map(k=>g.jsxs("button",{onClick:()=>u(k),className:`py-4 rounded-[20px] font-bold text-sm transition-all border-2 ${l===k?"bg-[#173d57] border-[#173d57] text-white shadow-lg transform scale-105":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 text-slate-500 hover:border-[#00aed9] hover:text-[#00aed9]"}`,children:[k," Meses"]},k))})]})]}):g.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 h-full flex flex-col",children:g.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-6 rounded-[30px]",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[g.jsx("div",{className:"w-10 h-10 bg-[#00aed9]/10 rounded-full flex items-center justify-center",children:g.jsx(rc,{size:20,className:"text-[#00aed9]"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-black text-slate-800 dark:text-white uppercase tracking-widest",children:"Opinin Experta"}),g.jsx("p",{className:"text-[10px] text-slate-400",children:"Generado por Gemini AI"})]})]}),D?g.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 gap-4 py-8",children:[g.jsx(pu,{className:"animate-spin text-[#00aed9]",size:32}),g.jsx("p",{className:"text-xs font-bold uppercase tracking-widest animate-pulse",children:"Analizando especificaciones..."})]}):g.jsx("div",{className:"prose prose-sm dark:prose-invert leading-relaxed text-slate-600 dark:text-slate-300",children:g.jsx("div",{dangerouslySetInnerHTML:{__html:P.replace(/\*\*(.*?)\*\*/g,'<strong class="text-[#00aed9]">$1</strong>').replace(/\n/g,"<br/>")}})})]})})}),g.jsxs("button",{onClick:I,className:"mt-4 w-full py-5 premium-gradient text-white rounded-[25px] font-black text-xs md:text-sm uppercase tracking-[0.2em] flex items-center justify-center gap-3 shadow-2xl shadow-cyan-500/30 hover:scale-[1.02] active:scale-95 transition-all shrink-0",children:["Solicitar Aprobacin ",g.jsx(c_,{size:18})]})]})]}),g.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.3s ease-in-out;
        }
      `})]})},G9=[" Qu SUVs tienes?"," Ofertas de financiamiento"," Hbridos disponibles"," Agendar Test Drive"],GR=({inventory:n})=>{const[e,t]=j.useState(!1),[r,s]=j.useState([]);j.useEffect(()=>{const C=localStorage.getItem("richard_chat_history");s(C?JSON.parse(C):[{role:"bot",text:"Hola! Soy Richard IA. Analizo nuestro inventario en tiempo real para ti. Qu buscas hoy?"}])},[]),j.useEffect(()=>{r.length>0&&localStorage.setItem("richard_chat_history",JSON.stringify(r))},[r]);const[o,l]=j.useState(""),[u,d]=j.useState(!1),p=j.useRef(null),[y,_]=j.useState(!1),[T,S]=j.useState(0),[P,M]=j.useState("idle"),[D,X]=j.useState([]),W=C=>X(R=>[`[${new Date().toLocaleTimeString()}] ${C}`,...R].slice(0,10)),[Q,ae]=j.useState(!1),[de,me]=j.useState(!1),N=j.useRef(null);j.useEffect(()=>()=>{N.current&&N.current.stop(),window.speechSynthesis.cancel()},[]);const I=C=>{window.speechSynthesis.cancel();const R=new SpeechSynthesisUtterance(C);R.lang="es-US",R.rate=1.1,R.pitch=1,R.onstart=()=>me(!0),R.onend=()=>me(!1),R.onerror=()=>me(!1),window.speechSynthesis.speak(R)},A=()=>{if(Q){N.current?.stop(),ae(!1);return}const C=window.SpeechRecognition||window.webkitSpeechRecognition;if(!C){alert("Tu navegador no soporta voz. Intenta con Chrome.");return}const R=new C;R.lang="es-ES",R.interimResults=!1,R.maxAlternatives=1,R.onstart=()=>{ae(!0),W("Voice: Listening...")},R.onresult=ut=>{const Je=ut.results[0][0].transcript;W(`Voice Result: "${Je}"`),l(Je),k(Je,!0)},R.onerror=ut=>{console.error("Speech error",ut.error),ae(!1),W(`Voice Error: ${ut.error}`)},R.onend=()=>{ae(!1)},N.current=R,R.start()};j.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[r,u,e]);const k=async(C,R=!1)=>{window.speechSynthesis.cancel();const ut=C||o;if(!ut.trim()||u)return;if(ut.trim()==="/debug"){_(!y),l(""),W("Diagnostic Mode Toggled");return}const Je=ut.trim();l(""),s(ft=>[...ft,{role:"user",text:Je}]),d(!0),M("loading");const hn=Date.now();try{W(`Sending: "${Je.slice(0,20)}..."`);const ft=await U9(Je,n,[...r,{role:"user",text:Je}]),ve=Date.now()-hn;S(ve),M("success"),W(`Response (${ve}ms): Success`),s($e=>[...$e,{role:"bot",text:ft}]),R&&I(ft)}catch(ft){M("error"),W(`Error: ${ft}`);const ve="Lo siento, tuve un error de conexin.";s($e=>[...$e,{role:"bot",text:ve}]),R&&I(ve)}finally{d(!1)}},L=()=>{const C=[{role:"bot",text:"Hola de nuevo! En qu ms puedo ayudarte con nuestro inventario?"}];s(C),localStorage.setItem("richard_chat_history",JSON.stringify(C))};return g.jsxs("div",{className:"fixed bottom-6 right-6 z-[1000] flex flex-col items-end gap-4 font-sans",children:[e&&g.jsxs("div",{className:"w-[380px] h-[600px] flex flex-col rounded-[35px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 fade-in duration-300 border border-white/20 backdrop-blur-xl bg-white/90 dark:bg-[#0d2232]/90",children:[g.jsxs("header",{className:"relative p-6 bg-gradient-to-r from-[#173d57] to-[#0f2a3d] text-white flex items-center justify-between shadow-lg z-10",children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 mix-blend-overlay"}),g.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#00aed9] to-blue-600 rounded-full flex items-center justify-center shadow-lg shadow-cyan-500/30",children:g.jsx(E3,{size:22,className:"text-white"})}),g.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-emerald-500 border-2 border-[#173d57] rounded-full animate-pulse"})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-black text-lg tracking-tight leading-none",children:["Richard ",g.jsx("span",{className:"text-[#00aed9]",children:"IA"})]}),g.jsxs("p",{className:"text-[10px] text-cyan-200 font-bold uppercase tracking-widest mt-1 opacity-80 flex items-center gap-1",children:[g.jsx(rc,{size:10})," Online ",de&&g.jsxs("span",{className:"animate-pulse text-green-300 ml-2 flex items-center gap-1",children:[g.jsx(r9,{size:10})," HABLANDO..."]})]})]})]}),g.jsxs("div",{className:"flex gap-2 relative z-10",children:[g.jsx("a",{href:"https://wa.me/17873682880",target:"_blank",rel:"noreferrer",className:"p-2 bg-green-500/10 text-green-400 hover:bg-green-500 hover:text-white rounded-full transition-colors animate-pulse",title:"WhatsApp",children:g.jsx(OR,{size:18})}),g.jsx("button",{onClick:L,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-300 hover:text-white",title:"Reiniciar Chat",children:g.jsx(jR,{size:18})}),g.jsx("button",{onClick:()=>t(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-300 hover:text-white",children:g.jsx(PR,{size:22})})]})]}),y&&g.jsxs("div",{className:"absolute top-[80px] left-4 right-4 bg-black/80 backdrop-blur-md rounded-xl p-3 text-xs font-mono text-green-400 z-50 border border-green-500/30 shadow-2xl animate-in fade-in zoom-in-95",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2 border-b border-white/10 pb-2",children:[g.jsxs("span",{className:"flex items-center gap-2 font-bold uppercase tracking-wider text-white",children:[g.jsx(e9,{size:12})," System Status"]}),g.jsx("span",{className:P==="error"?"text-red-400":"text-green-400",children:P.toUpperCase()})]}),g.jsxs("div",{className:"space-y-1.5 opacity-90",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"API Key:"}),g.jsx("span",{className:"text-green-400",children:"DETECTED"})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Latency:"}),g.jsxs("span",{className:T>2e3?"text-yellow-400":"text-blue-300",children:[T,"ms"]})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Env:"}),g.jsx("span",{children:"production"})]})]}),g.jsxs("div",{className:"mt-3 pt-2 border-t border-white/10",children:[g.jsx("p",{className:"text-[10px] text-zinc-500 mb-1",children:"RECENT LOGS"}),D.map((C,R)=>g.jsx("div",{className:"truncate text-[10px] text-zinc-400",children:C},R))]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5 bg-slate-50/50 dark:bg-transparent",ref:p,children:[r.map((C,R)=>g.jsx("div",{className:`flex ${C.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2`,children:g.jsx("div",{className:`max-w-[85%] p-4 text-sm leading-relaxed shadow-sm ${C.role==="user"?"bg-[#00aed9] text-white rounded-[20px] rounded-br-sm":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-[20px] rounded-bl-sm border border-slate-100 dark:border-slate-700"}`,children:C.text})},R)),u&&g.jsx("div",{className:"flex justify-start animate-in fade-in",children:g.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 rounded-[20px] rounded-bl-sm border border-slate-100 dark:border-slate-700 flex gap-1.5 items-center",children:[g.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce"}),g.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce [animation-delay:-0.15s]"}),g.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce [animation-delay:-0.3s]"})]})})]}),g.jsxs("div",{className:"p-4 bg-white dark:bg-[#0b1d2a] border-t border-slate-100 dark:border-slate-800 space-y-4 relative z-20",children:[r.length<3&&!u&&g.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar mask-gradient-x",children:G9.map((C,R)=>g.jsx("button",{onClick:()=>k(C),className:"whitespace-nowrap px-4 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-600 dark:text-slate-300 text-xs font-bold rounded-full transition-all border border-slate-200 dark:border-slate-700 shrink-0",children:C},R))}),g.jsxs("div",{className:"relative flex items-center gap-2",children:[g.jsx("input",{type:"text",className:"w-full bg-slate-100 dark:bg-slate-900 rounded-full py-3.5 pl-5 pr-12 text-sm font-medium text-slate-900 dark:text-white border border-transparent focus:border-[#00aed9] focus:bg-white dark:focus:bg-slate-900 focus:ring-0 outline-none transition-all shadow-inner",placeholder:"Escribe tu mensaje...",value:o,onChange:C=>l(C.target.value),onKeyDown:C=>C.key==="Enter"&&k()}),g.jsx("button",{onClick:()=>k(),disabled:!o.trim()||u,className:"absolute right-1.5 top-1.5 w-9 h-9 bg-[#00aed9] text-white rounded-full flex items-center justify-center hover:scale-105 active:scale-95 disabled:opacity-50 disabled:hover:scale-100 transition-all shadow-md",children:g.jsx(Y3,{size:16,className:o.trim()?"translate-x-0.5":""})}),g.jsx("button",{onClick:A,className:`w-9 h-9 rounded-full flex items-center justify-center transition-all shadow-md ${Q?"bg-red-500 text-white animate-pulse":"bg-slate-200 dark:bg-slate-800 text-slate-500 hover:text-[#00aed9]"}`,title:"Hablar con Richard",children:Q?g.jsx(MR,{size:16}):g.jsx(LR,{size:16})})]}),g.jsxs("div",{className:"flex justify-center items-center gap-1.5 opacity-40",children:[g.jsx("div",{className:"w-2 h-0.5 bg-slate-400 rounded-full"}),g.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Powered by Gemini 2.5"}),g.jsx("div",{className:"w-2 h-0.5 bg-slate-400 rounded-full"})]})]})]}),g.jsxs("button",{onClick:()=>t(!e),className:`group relative w-16 h-16 rounded-full flex items-center justify-center text-white shadow-[0_10px_40px_-10px_rgba(0,174,217,0.5)] transition-all duration-500 hover:scale-110 ${e?"bg-slate-800 rotate-90":"bg-gradient-to-r from-[#00aed9] to-blue-500"}`,children:[e?g.jsx(Vi,{size:28}):g.jsx(q3,{size:28,className:"fill-white"}),!e&&g.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 border-2 border-slate-50 dark:border-slate-900 rounded-full"})]})]})},K9=[{id:"family",label:"Familia & Seguridad",icon:g.jsx(v3,{size:14}),text:"Priorizo la seguridad y el espacio para mi familia."},{id:"adventure",label:"Aventura & Off-road",icon:g.jsx(G3,{size:14}),text:"Me gusta salir de la carretera y necesito capacidad todoterreno."},{id:"performance",label:"Velocidad & Sport",icon:g.jsx(L3,{size:14}),text:"Busco alto rendimiento, aceleracin y manejo deportivo."},{id:"commute",label:"Uso Diario",icon:g.jsx(CR,{size:14}),text:"Necesito algo eficiente y cmodo para el trfico diario."},{id:"budget",label:"Econmico",icon:g.jsx(s9,{size:14}),text:"Mi prioridad es el ahorro de combustible y bajo costo de mantenimiento."},{id:"luxury",label:"Lujo & Tech",icon:g.jsx(T3,{size:14}),text:"Quiero la mejor tecnologa, confort premium y estatus."},{id:"eco",label:"Eco-Friendly",icon:g.jsx(U3,{size:14}),text:"Me interesa reducir mi huella de carbono (Hbrido/Elctrico)."}],Ux=["Extrayendo variables de estilo de vida...","Analizando patrones de conduccin...","Consultando base de datos global...","Calculando probabilidades de compatibilidad...","Generando perfil psicogrfico..."],W9=({inventory:n,onClose:e,onSelectCar:t})=>{const[r,s]=j.useState(""),[o,l]=j.useState(!1),[u,d]=j.useState([]),[p,y]=j.useState(""),[_,T]=j.useState("input"),[S,P]=j.useState([]),[M,D]=j.useState(!1),[X,W]=j.useState(0),Q=j.useRef(null);j.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const k=window.SpeechRecognition||window.webkitSpeechRecognition;Q.current=new k,Q.current.continuous=!1,Q.current.lang="es-ES",Q.current.interimResults=!1,Q.current.onresult=L=>{const C=L.results[0][0].transcript;s(R=>(R?R+" ":"")+C),D(!1)},Q.current.onerror=()=>D(!1),Q.current.onend=()=>D(!1)}},[]);const ae=()=>{Q.current&&(M?Q.current.stop():(D(!0),Q.current.start()))};j.useEffect(()=>{let k;return _==="scanning"&&(W(0),k=window.setInterval(()=>{W(L=>(L+1)%Ux.length)},1200)),()=>clearInterval(k)},[_]);const de=(k,L)=>{S.includes(k)?(P(C=>C.filter(R=>R!==k)),s(C=>C.replace(L+" ","").replace(L,"").trim())):(P(C=>[...C,k]),s(C=>(C?C+" ":"")+L))},me=async()=>{if(r.trim()){T("scanning"),l(!0);try{const[k]=await Promise.all([$9(r,n),new Promise(L=>setTimeout(L,3500))]);d(k.matches),y(k.persona)}catch(k){console.error("Scan failed",k),d([])}finally{l(!1),T("results")}}},N=k=>n.find(L=>L.id===k),I=Math.min(100,r.length/100*100),A=I<30?"bg-red-500":I<70?"bg-yellow-500":"bg-[#00aed9]";return g.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0d2232]/95 backdrop-blur-xl animate-in fade-in",children:g.jsxs("div",{className:"w-full max-w-4xl bg-slate-900 border border-slate-700 rounded-[40px] shadow-2xl relative overflow-hidden flex flex-col max-h-[95vh]",children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 pointer-events-none"}),g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00aed9] to-transparent opacity-50"}),g.jsx("button",{onClick:e,className:"absolute top-6 right-6 z-20 text-slate-500 hover:text-white transition-colors",children:g.jsx(Vi,{size:24})}),g.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[g.jsxs("div",{className:"p-8 border-b border-slate-800 flex items-center gap-4 shrink-0",children:[g.jsx("div",{className:"w-12 h-12 bg-[#00aed9]/20 rounded-xl flex items-center justify-center border border-[#00aed9]/50 shadow-[0_0_20px_rgba(0,174,217,0.3)]",children:g.jsx(wf,{size:24,className:"text-[#00aed9]"})}),g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:["Neural Match ",g.jsx("span",{className:"text-[#00aed9]",children:"v4.0"})]}),g.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Identidad Digital & Compatibilidad"})]})]}),g.jsxs("div",{className:"flex-1 p-8 overflow-y-auto custom-scrollbar",children:[_==="input"&&g.jsxs("div",{className:"h-full flex flex-col max-w-3xl mx-auto space-y-6 animate-in slide-in-from-bottom-5 duration-300 pb-4",children:[g.jsxs("div",{className:"text-center mb-4",children:[g.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Hblame de tu estilo de vida."}),g.jsx("p",{className:"text-slate-400 text-sm",children:"Nuestra IA analizar tu perfil psicolgico y encontrar el vehculo matemticamente perfecto."})]}),g.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:K9.map(k=>g.jsxs("button",{onClick:()=>de(k.id,k.text),className:`
                                            flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wide border transition-all duration-200
                                            ${S.includes(k.id)?"bg-[#00aed9] text-white border-[#00aed9] shadow-lg shadow-cyan-500/30":"bg-slate-800 text-slate-400 border-slate-700 hover:border-slate-500 hover:text-white"}
                                        `,children:[k.icon," ",k.label]},k.id))}),g.jsxs("div",{className:"w-full relative group",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-slate-800 rounded-t-3xl overflow-hidden",children:g.jsx("div",{className:`h-full ${A} transition-all duration-500`,style:{width:`${I}%`}})}),g.jsx("textarea",{value:r,onChange:k=>s(k.target.value),placeholder:"Escribe o usa el micrfono: 'Busco algo seguro para mi familia, que tenga espacio para las bicicletas y que no gaste mucha gasolina...'",className:"w-full bg-slate-800/80 border-2 border-slate-700 rounded-3xl p-6 text-white placeholder:text-slate-600 focus:border-[#00aed9] focus:bg-slate-800 outline-none text-lg leading-relaxed resize-none min-h-[200px] transition-all shadow-inner relative z-10"}),g.jsx("div",{className:"absolute top-4 right-4 z-20",children:g.jsx("button",{onClick:ae,className:`
                                            p-3 rounded-full transition-all duration-300 flex items-center gap-2 shadow-lg
                                            ${M?"bg-red-500 text-white animate-pulse shadow-red-500/40":"bg-slate-700 text-slate-300 hover:bg-[#00aed9] hover:text-white"}
                                        `,title:"Dictado por Voz",children:M?g.jsx(MR,{size:20}):g.jsx(LR,{size:20})})}),g.jsxs("div",{className:"flex justify-between items-center px-4 py-2",children:[g.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${I>50?"text-[#00aed9]":"text-slate-500"}`,children:M?"Escuchando...":I>80?"Excelente Detalle":I>40?"Buen Comienzo":"Agrega ms detalles"}),g.jsxs("span",{className:"text-[10px] text-slate-600 font-mono",children:[r.length," chars"]})]})]}),g.jsxs("div",{className:"w-full mt-4 flex justify-center relative z-20 group pb-8",children:[g.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r from-cyan-400 to-blue-600 rounded-2xl blur-lg opacity-40 transition-opacity duration-500 ${r.trim()?"opacity-80 animate-pulse":""}`}),g.jsxs("button",{onClick:me,disabled:!r.trim(),className:`
                                        relative w-full py-6 px-8
                                        bg-gradient-to-r from-[#00aed9] via-cyan-500 to-blue-600 
                                        hover:from-cyan-400 hover:via-cyan-300 hover:to-blue-500
                                        text-white text-xl md:text-2xl font-black uppercase tracking-[0.15em]
                                        rounded-2xl border-2 border-white/30 hover:border-white
                                        shadow-[0_10px_40px_-10px_rgba(0,174,217,0.5)]
                                        transform hover:scale-[1.02] active:scale-95 transition-all duration-300
                                        flex items-center justify-center gap-6
                                        disabled:opacity-50 disabled:cursor-not-allowed disabled:grayscale disabled:shadow-none
                                    `,children:[g.jsx("div",{className:"p-2 bg-white/20 rounded-full group-hover:bg-white/30 transition-colors shadow-inner",children:g.jsx(W3,{size:32,strokeWidth:3,className:"drop-shadow-sm"})}),g.jsx("span",{className:"drop-shadow-md",children:"Iniciar Escaneo"}),r.trim()&&g.jsx(rc,{size:32,className:"animate-spin-slow text-yellow-300 drop-shadow-md"})]})]})]}),_==="scanning"&&g.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-12",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-48 h-48 border border-slate-700/50 rounded-full animate-[spin_10s_linear_infinite]"}),g.jsx("div",{className:"absolute inset-4 border border-[#00aed9]/30 rounded-full animate-[spin_5s_linear_infinite_reverse]"}),g.jsx("div",{className:"absolute inset-8 border-2 border-t-[#00aed9] border-r-transparent border-b-[#00aed9] border-l-transparent rounded-full animate-spin"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"w-20 h-20 bg-[#00aed9]/10 rounded-full flex items-center justify-center backdrop-blur-sm animate-pulse",children:g.jsx(wf,{size:40,className:"text-[#00aed9]"})})})]}),g.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[g.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-wider animate-pulse",children:Ux[X]}),g.jsx("div",{className:"h-1 w-full bg-slate-800 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-[#00aed9] animate-[translateX_2s_ease-in-out_infinite] w-1/3 rounded-full"})}),g.jsxs("p",{className:"text-slate-500 font-mono text-xs",children:["Procesando ",n.length," vectores de datos."]})]})]}),_==="results"&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4 bg-[#173d57]/50 p-6 rounded-3xl border border-[#00aed9]/30",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-[#00aed9] rounded-full flex items-center justify-center shadow-lg shadow-cyan-500/30",children:g.jsx(FR,{size:24,className:"text-white"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-[10px] text-cyan-300 font-bold uppercase tracking-widest",children:"Identidad Detectada"}),g.jsx("div",{className:"text-2xl font-black text-white uppercase tracking-tight",children:p||"Perfil Estndar"})]})]}),g.jsx("button",{onClick:()=>T("input"),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-xl text-xs font-bold uppercase tracking-wide transition-colors",children:"Nuevo Anlisis"})]}),u.length===0?g.jsxs("div",{className:"text-center py-20",children:[g.jsx(l_,{size:48,className:"mx-auto text-slate-600 mb-4"}),g.jsx("p",{className:"text-slate-400",children:"No encontramos coincidencias claras para este perfil."})]}):g.jsx("div",{className:"grid gap-4 animate-in slide-in-from-bottom-10 duration-500",children:u.map((k,L)=>{const C=N(k.carId);if(!C)return null;const R=L===0;return g.jsxs("div",{onClick:()=>t(C),className:`
                                                    group relative flex flex-col md:flex-row items-center gap-6 p-6 rounded-3xl cursor-pointer transition-all duration-300
                                                    ${R?"bg-gradient-to-r from-[#00aed9]/20 to-slate-800/80 border border-[#00aed9]/50 shadow-[0_0_30px_rgba(0,174,217,0.15)] transform scale-[1.02]":"bg-slate-800/30 border border-slate-700 hover:bg-slate-800/80"}
                                                `,children:[R&&g.jsxs("div",{className:"absolute -top-3 -right-3 bg-[#00aed9] text-white px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest shadow-lg flex items-center gap-1 z-10",children:[g.jsx(b3,{size:12})," Match Perfecto"]}),g.jsxs("div",{className:"w-full md:w-48 h-32 bg-white/5 rounded-2xl p-2 flex items-center justify-center shrink-0 relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-radial-gradient from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),g.jsx("img",{src:C.img,alt:C.name,className:"max-w-full max-h-full object-contain relative z-10 group-hover:scale-110 transition-transform duration-500"})]}),g.jsxs("div",{className:"flex-1 w-full",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-xl font-black text-white group-hover:text-[#00aed9] transition-colors",children:C.name}),g.jsxs("p",{className:"text-slate-400 text-sm font-bold",children:["$",C.price.toLocaleString()]})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("div",{className:"text-3xl font-black text-white",children:[k.score,"%"]}),g.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Afinidad"})]})]}),g.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full mb-3 overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out ${k.score>85?"bg-[#00aed9]":k.score>60?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${k.score}%`}})}),g.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed border-l-2 border-slate-600 pl-3",children:['"',k.reason,'"']})]}),g.jsx("div",{className:"hidden md:flex bg-slate-700/50 w-10 h-10 rounded-full items-center justify-center group-hover:bg-[#00aed9] group-hover:text-white transition-colors",children:g.jsx(c_,{size:20})})]},k.carId)})})]})]})]})]})})},Q9=({cars:n,onClose:e})=>{const[t,r]=j.useState(null),[s,o]=j.useState(!1),l=n[0],u=n[1],d=async()=>{o(!0);try{const p=await z9(l,u);r(p)}catch(p){console.error(p)}finally{o(!1)}};return!l||!u?null:g.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#0d2232] flex items-center justify-center animate-in fade-in duration-300",children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20"}),g.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-full bg-gradient-to-r from-blue-900/20 to-transparent transform -skew-x-12 -translate-x-20"}),g.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-red-900/20 to-transparent transform -skew-x-12 translate-x-20"})]}),g.jsx("button",{onClick:e,className:"absolute top-6 right-6 z-50 text-slate-500 hover:text-white transition-colors",children:g.jsx(Vi,{size:32})}),g.jsxs("div",{className:"w-full h-full max-w-[1800px] flex flex-col relative z-10 p-4 lg:p-8",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsxs("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter italic",children:["Richard ",g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-purple-500",children:"VS"})," Arena"]}),g.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-[0.3em] mt-2",children:"Simulacin Comparativa IA"})]}),g.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row items-center justify-center gap-8 lg:gap-0 relative",children:[g.jsxs("div",{className:`flex-1 w-full h-full flex flex-col items-center justify-center transition-all duration-700 ${t?.winnerId===l.id?"scale-105":t&&t.winnerId!==l.id?"scale-95 opacity-50 grayscale-[0.5]":""}`,children:[g.jsxs("div",{className:"relative w-full max-w-lg aspect-[4/3]",children:[g.jsx("img",{src:l.img,alt:l.name,className:"w-full h-full object-contain drop-shadow-[0_20px_50px_rgba(59,130,246,0.3)]"}),t?.winnerId===l.id&&g.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 animate-bounce",children:g.jsx(Ex,{size:48,className:"text-yellow-400 drop-shadow-lg",fill:"currentColor"})})]}),g.jsxs("div",{className:"mt-6 text-center",children:[g.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-tight",children:l.name}),g.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:["$",l.price.toLocaleString()]}),g.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[g.jsx("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs font-bold text-slate-300 uppercase",children:l.type}),l.badge&&g.jsx("span",{className:"px-3 py-1 bg-blue-600 rounded-full text-xs font-bold text-white uppercase",children:l.badge})]})]})]}),g.jsxs("div",{className:"w-24 lg:w-96 flex flex-col items-center justify-center z-20 shrink-0",children:[!t&&!s&&g.jsxs("button",{onClick:d,className:"group relative w-24 h-24 lg:w-32 lg:h-32 bg-slate-900 border-4 border-[#00aed9] rounded-full flex items-center justify-center hover:scale-110 hover:shadow-[0_0_50px_rgba(0,174,217,0.6)] transition-all cursor-pointer",children:[g.jsx("span",{className:"text-4xl lg:text-5xl font-black text-white italic group-hover:animate-pulse",children:"VS"}),g.jsx("div",{className:"absolute inset-0 rounded-full border-t-4 border-[#00aed9] animate-spin [animation-duration:3s]"})]}),s&&g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsx("div",{className:"w-24 h-24 border-4 border-slate-700 border-t-[#00aed9] rounded-full animate-spin"}),g.jsx("p",{className:"text-[#00aed9] font-bold text-xs uppercase tracking-widest animate-pulse",children:"Simulando..."})]}),t&&g.jsxs("div",{className:"flex flex-col items-center gap-4 animate-in zoom-in duration-300",children:[g.jsx("div",{className:"px-6 py-2 bg-[#00aed9] rounded-full shadow-lg shadow-cyan-500/50",children:g.jsx("span",{className:"text-white font-black uppercase tracking-widest text-sm",children:"Anlisis Completo"})}),g.jsx("button",{onClick:()=>r(null),className:"text-slate-500 hover:text-white text-xs font-bold underline",children:"Reiniciar Batalla"})]})]}),g.jsxs("div",{className:`flex-1 w-full h-full flex flex-col items-center justify-center transition-all duration-700 ${t?.winnerId===u.id?"scale-105":t&&t.winnerId!==u.id?"scale-95 opacity-50 grayscale-[0.5]":""}`,children:[g.jsxs("div",{className:"relative w-full max-w-lg aspect-[4/3]",children:[g.jsx("img",{src:u.img,alt:u.name,className:"w-full h-full object-contain drop-shadow-[0_20px_50px_rgba(239,68,68,0.3)] transform -scale-x-100"}),t?.winnerId===u.id&&g.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 animate-bounce",children:g.jsx(Ex,{size:48,className:"text-yellow-400 drop-shadow-lg",fill:"currentColor"})})]}),g.jsxs("div",{className:"mt-6 text-center",children:[g.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-tight",children:u.name}),g.jsxs("p",{className:"text-2xl font-bold text-red-400",children:["$",u.price.toLocaleString()]}),g.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[g.jsx("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs font-bold text-slate-300 uppercase",children:u.type}),u.badge&&g.jsx("span",{className:"px-3 py-1 bg-red-600 rounded-full text-xs font-bold text-white uppercase",children:u.badge})]})]})]})]}),t&&g.jsx("div",{className:"mt-12 max-w-5xl mx-auto w-full animate-in slide-in-from-bottom-10 fade-in duration-500",children:g.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-md rounded-[40px] border border-slate-700 p-8 lg:p-10",children:[g.jsxs("div",{className:"text-center mb-10",children:[g.jsxs("h4",{className:"text-[#00aed9] font-black uppercase tracking-[0.2em] mb-3 flex items-center justify-center gap-2",children:[g.jsx(UR,{size:18})," Veredicto de Richard IA"]}),g.jsxs("p",{className:"text-2xl lg:text-3xl font-medium text-white leading-tight max-w-3xl mx-auto",children:['"',t.verdict,'"']})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.categories.map((p,y)=>{const _=p.winnerId===l.id?l.name:p.winnerId===u.id?u.name:"Empate",T=p.winnerId===l.id?"text-blue-400":p.winnerId===u.id?"text-red-400":"text-yellow-400",S=p.winnerId===l.id?"border-blue-500/30 bg-blue-500/5":p.winnerId===u.id?"border-red-500/30 bg-red-500/5":"border-yellow-500/30 bg-yellow-500/5";return g.jsxs("div",{className:`p-6 rounded-3xl border ${S} flex flex-col items-center text-center transition-all hover:scale-105`,children:[g.jsx("span",{className:"text-slate-400 font-bold text-xs uppercase tracking-widest mb-2",children:p.name}),g.jsx("div",{className:`text-lg font-black ${T} mb-2`,children:_}),g.jsxs("p",{className:"text-slate-300 text-sm leading-snug",children:['"',p.reason,'"']})]},y)})})]})})]})]})},Tf=(n,e,t)=>{let r="";if(t){const s=new Date;s.setTime(s.getTime()+t*24*60*60*1e3),r="; expires="+s.toUTCString()}document.cookie=n+"="+(e||"")+r+"; path=/; SameSite=Lax; Secure"},h_=n=>{const e=n+"=",t=document.cookie.split(";");for(let r=0;r<t.length;r++){let s=t[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},$x=()=>{const n=h_("richard_visits"),e=n?parseInt(n)+1:1;return Tf("richard_visits",e.toString(),365),e},Y9="audit_logs",J9="login_attempts",KR=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return"unknown_ip"}},f_=async(n,e="user")=>{(await yf(ws(Xn,"users",n.uid))).exists()||await Ka(ws(Xn,"users",n.uid),{email:n.email,role:e,createdAt:new Date})},WR=async n=>{try{const e=await yf(ws(Xn,"users",n));return e.exists()?e.data().role:"user"}catch(e){return console.error("Error fetching role:",e),"user"}},vs=async(n,e,t,r)=>{const s=await KR(),o=navigator.userAgent;if(await ep(Ju(Xn,Y9),{email:n,ip:s,device:o,method:t,success:e,details:r,timestamp:new Date,location:window.location.pathname}),e&&typeof window<"u")try{const{logEvent:l}=await zt(async()=>{const{logEvent:d}=await Promise.resolve().then(()=>Vy);return{logEvent:d}},void 0),u=t.includes("login")?"login":t.includes("signup")?"sign_up":t;l(sp,u,{method:t})}catch{}};async function X9(n,e){try{const t=await uL(si,n,e),r=n.includes("admin")||n.includes("richard")?"admin":"user";return await f_(t.user,r),await vs(n,!0,"signup_email"),t.user}catch(t){throw t.code!=="auth/cancelled-popup-request"&&await vs(n,!1,"signup_email",t.message),t}}async function Z9(n,e){try{const t=await r1(si,n,e);return await vs(n,!0,"login_email"),t.user}catch(t){throw await vs(n,!1,"login_email",t.message),t}}async function e6(){const n=new Si;try{const e=await m1(si,n);return Promise.all([f_(e.user,"user"),vs(e.user.email||"google_user",!0,"login_google")]).catch(t=>console.error("Background Auth Ops Failed:",t)),e.user}catch(e){throw console.error("Error signing in with Google:",e.message),e}}async function t6(){const n=new bi;try{const e=await m1(si,n);return Promise.all([f_(e.user,"user"),vs(e.user.email||"facebook_user",!0,"login_facebook")]).catch(t=>console.error("Background Auth Ops Failed:",t)),e.user}catch(e){throw console.error("Error signing in with Facebook:",e.message),e}}async function n6(){const n=si.currentUser;try{await s1(si),n?.email&&await vs(n.email,!0,"signout")}catch(e){throw console.error("Error signing out:",e.message),e}}const r6=async(n,e,t)=>{const[r,s]=await Promise.all([KR(),r1(si,n,e).catch(y=>({error:y}))]),o=`${n}_${r}`.replace(/[^a-zA-Z0-9]/g,"_"),l=ws(Ju(Xn,J9),o),u=async()=>{const y=await yf(l),_=y.exists()?y.data().attempts:0;await Ka(l,{attempts:_+1,lastAttempt:new Date().getTime(),ip:r},{merge:!0})},d=await yf(l);if(d.exists()){const y=d.data(),_=new Date().getTime();if(y.attempts>=5&&_-y.lastAttempt<900*1e3)throw await vs(n,!1,"admin_login_blocked","IP Rate Limited"),s.error||await s1(si),new Error("ACCESS_DENIED: IP bloqueada temporalmente por intentos fallidos. Intente en 15 minutos.")}if(s.error){const y=s.error;throw await u(),y.message.includes("IP bloqueada")||await vs(n,!1,"admin_login_failed",y.code),y}const p=s;return d.exists()&&await _k(l),await vs(n,!0,"admin_login_success"),p},QR=n=>fL(si,e=>{n(e)}),s6=async n=>{if(!window.PublicKeyCredential)throw new Error("Passkeys not supported in this browser.");try{const e=new Uint8Array(32);window.crypto.getRandomValues(e);const t=await navigator.credentials.create({publicKey:{challenge:e,rp:{name:"Richard Automotive",id:window.location.hostname},user:{id:Uint8Array.from(n.uid,r=>r.charCodeAt(0)),name:n.email||"user",displayName:n.displayName||n.email||"User"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform"},timeout:6e4,attestation:"none"}});if(t)return await Ka(ws(Xn,"users",n.uid,"credentials",t.id),{credentialId:t.id,type:"passkey",createdAt:new Date,userAgent:navigator.userAgent}),await vs(n.email||"unknown",!0,"passkey_registered"),t}catch(e){throw console.error("Passkey Error:",e),new Error("Error registrando Passkey: "+e.message)}},YR=Object.freeze(Object.defineProperty({__proto__:null,getUserRole:WR,logAuthActivity:vs,loginAdmin:r6,registerPasskey:s6,signInWithEmail:Z9,signInWithFacebook:t6,signInWithGoogle:e6,signOutUser:n6,signUpWithEmail:X9,subscribeToAuthChanges:QR},Symbol.toStringTag,{value:"Module"})),rd=j.createContext({user:null,role:null,loading:!0}),i6=({children:n})=>{const[e,t]=j.useState(null),[r,s]=j.useState(null),[o,l]=j.useState(!0);return j.useEffect(()=>{const u=QR(async d=>{if(d){const p=await WR(d.uid);s(p),t(d)}else t(null),s(null);l(!1)});return()=>u()},[]),g.jsx(rd.Provider,{value:{user:e,role:r,loading:o},children:n})},o6=({onNeuralMatch:n,onBrowseInventory:e,onSellCar:t})=>g.jsxs("section",{className:"relative h-[85vh] min-h-[600px] w-full flex items-center justify-center overflow-hidden rounded-b-[60px] lg:rounded-b-[100px] shadow-2xl shadow-cyan-900/40",children:[g.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[g.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-60 scale-105 animate-in fade-in zoom-in duration-[2s]",style:{backgroundImage:'url("https://www.hyundai.com/content/dam/hyundai/ww/en/images/N/n-vision-74/highlights/n-vision-74-highlights-kv.jpg")'}}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0f172a] via-[#0f172a]/60 to-transparent"}),g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 mix-blend-overlay"})]}),g.jsxs("div",{className:"relative z-10 w-full max-w-7xl mx-auto px-6 lg:px-12 flex flex-col items-center text-center space-y-10",children:[g.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-md border border-white/20 px-6 py-2 rounded-full animate-in slide-in-from-bottom-5 duration-700 fade-in",children:[g.jsx(rc,{size:16,className:"text-[#00aed9] fill-[#00aed9]"}),g.jsx("span",{className:"text-sm font-bold uppercase tracking-[0.2em] text-white",children:"Experiencia Automotriz 2025"})]}),g.jsxs("h1",{className:"text-6xl md:text-8xl lg:text-9xl font-black text-white tracking-tighter leading-[0.9] animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-100",children:["FUTURE ",g.jsx("br",{}),g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-cyan-200",children:"READY."})]}),g.jsx("p",{className:"text-xl md:text-2xl text-slate-300 max-w-2xl font-medium leading-relaxed animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-200",children:"Compra tu prximo auto 100% online. Sin vendedores, sin sorpresas, y con la garanta de Richard Automotive."}),g.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 pt-4 animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-300",children:[g.jsxs("button",{onClick:e,className:"group relative px-8 py-4 bg-[#00aed9] text-white rounded-full font-black uppercase tracking-widest overflow-hidden transition-all hover:scale-105 hover:shadow-[0_0_40px_rgba(0,174,217,0.4)]",children:[g.jsxs("span",{className:"relative z-10 flex items-center gap-3",children:["Ver Inventario ",g.jsx(AR,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),g.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]}),g.jsxs("button",{onClick:n,className:"group px-8 py-4 bg-white/10 backdrop-blur-md border border-white/20 text-white rounded-full font-black uppercase tracking-widest hover:bg-white/20 transition-all flex items-center gap-3",children:[g.jsx(wf,{size:20,className:"text-[#00aed9]"}),"Neural Match"]}),g.jsxs("button",{onClick:t,className:"group px-8 py-4 bg-emerald-500/10 backdrop-blur-md border border-emerald-500/20 text-emerald-400 rounded-full font-black uppercase tracking-widest hover:bg-emerald-500/20 transition-all flex items-center gap-3",children:[g.jsx(P3,{size:20}),"Vender mi Auto"]})]})]}),g.jsxs("div",{className:"absolute bottom-12 left-0 right-0 flex justify-center gap-8 md:gap-16 text-white/60 text-[10px] md:text-xs font-bold uppercase tracking-widest animate-in fade-in delay-700",children:[g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," 7-Day Money Back"]}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," 150-Point Inspection"]}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," Home Delivery"]})]})]}),a6=()=>g.jsx("section",{className:"py-12 border-t border-slate-200 dark:border-slate-800",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[g.jsx(ug,{icon:g.jsx(u_,{size:24}),title:"Certificacin 150 Puntos",desc:"Cada auto pasa una inspeccin rigurosa antes de ser listado.",color:"blue"}),g.jsx(ug,{icon:g.jsx(UR,{size:24}),title:"Love Your Car Guarantee",desc:"Prubalo por 24 horas. Si no te enamora, devulvelo.",color:"cyan"}),g.jsx(ug,{icon:g.jsx(DR,{size:24}),title:"Entrega o Recogido",desc:"T eliges: te lo llevamos a casa o vienes a nuestro centro.",color:"purple"})]})}),ug=({icon:n,title:e,desc:t,color:r})=>{const s={blue:"bg-blue-100 dark:bg-blue-900/20 text-blue-500",cyan:"bg-cyan-100 dark:bg-cyan-900/20 text-[#00aed9]",purple:"bg-purple-100 dark:bg-purple-900/20 text-purple-500"};return g.jsxs("div",{className:"flex items-start gap-4 p-6 rounded-3xl bg-slate-50 dark:bg-slate-900/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors cursor-default",children:[g.jsx("div",{className:`p-3 rounded-2xl ${s[r]}`,children:n}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:e}),g.jsx("p",{className:"text-sm text-slate-500 mt-1 leading-relaxed",children:t})]})]})},l6=()=>{const n=[{id:1,name:"Carlos Rodrguez",role:"Dueo de Santa Fe 2024",comment:"La experiencia con Richard Automotive fue increble. La IA me ayud a elegir la SUV perfecta para mi familia y el proceso fue totalmente transparente.",rating:5,img:"https://randomuser.me/api/portraits/men/32.jpg"},{id:2,name:"Sofa Mndez",role:"Duea de IONIQ 5",comment:"Nunca pens que comprar un auto elctrico fuera tan fcil. El 'Neural Match' acert totalmente con mi estilo de vida. Estoy enamorada de mi IONIQ!",rating:5,img:"https://randomuser.me/api/portraits/women/44.jpg"},{id:3,name:"Miguel ngel",role:"Dueo de Genesis GV80",comment:"Atencin de primera clase. Me trajeron el auto a la oficina para probarlo y cerramos el trato en menos de una hora. Eficiencia pura.",rating:5,img:"https://randomuser.me/api/portraits/men/85.jpg"}];return g.jsxs("section",{className:"py-20 relative",children:[g.jsx("div",{className:"absolute top-0 right-0 p-20 opacity-5 pointer-events-none md:block hidden",children:g.jsx(Ef,{size:300,className:"text-[#00aed9]"})}),g.jsxs("div",{className:"text-center mb-16 space-y-4 relative z-10",children:[g.jsx("span",{className:"text-[#00aed9] font-black uppercase tracking-widest text-sm",children:"Nuestros Clientes"}),g.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-slate-800 dark:text-white uppercase tracking-tighter",children:["Historias de ",g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-cyan-400",children:"xito"})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 px-4 relative z-10",children:n.map(e=>g.jsxs("div",{className:"bg-white dark:bg-slate-800/80 p-8 rounded-[30px] border border-slate-100 dark:border-slate-700 relative hover:transform hover:-translate-y-2 transition-all duration-300 shadow-xl shadow-slate-200/50 dark:shadow-none",children:[g.jsx("div",{className:"flex gap-1 mb-6 text-amber-400",children:[...Array(e.rating)].map((t,r)=>g.jsx(Ef,{size:16,fill:"currentColor",stroke:"none"},r))}),g.jsxs("p",{className:"text-slate-600 dark:text-slate-300 font-medium leading-relaxed mb-8 relative z-10",children:['"',e.comment,'"']}),g.jsxs("div",{className:"flex items-center gap-4 border-t border-slate-100 dark:border-slate-700/50 pt-6",children:[g.jsx("img",{src:e.img,alt:e.name,className:"w-12 h-12 rounded-full object-cover ring-2 ring-[#00aed9]/20"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:e.name}),g.jsx("p",{className:"text-xs text-[#00aed9] font-bold uppercase tracking-wide",children:e.role})]})]})]},e.id))})]})},JR=[{question:"Puedo comprar un auto 100% en lnea sin visitar el concesionario?",answer:"S, absolutamente. Nuestra plataforma 'Richard Automotive Direct' le permite seleccionar su vehculo, personalizar su financiamiento, valorar su trade-in y firmar documentos digitalmente. Entregamos el auto directamente en la puerta de su casa u oficina."},{question:"Cmo funciona la aprobacin de crdito en lnea?",answer:"Es instantnea y segura. Complete nuestro formulario de Pre-Cualificacin encriptado (SSL 256-bit). Nuestro sistema AI analiza su perfil con mltiples bancos simultneamente para ofrecerle los trminos reales (APR, mensualidad y pronto) en minutos, sin afectar su puntaje crediticio inicial (Soft Pull)."},{question:"Aceptan autos en 'Trade-In' aunque deba dinero?",answer:"S. Aceptamos su auto actual como parte de pago. Si todava tiene balance pendiente, nosotros nos encargamos de liquidar el prstamo anterior con su banco. Si el valor de su auto es mayor a la deuda, usamos el excedente a favor de su nueva compra."},{question:"Qu garanta tienen los vehculos usados certificados?"}],c6={"@context":"https://schema.org","@type":"FAQPage",mainEntity:JR.map(n=>({"@type":"Question",name:n.question,acceptedAnswer:{"@type":"Answer",text:n.answer}}))},u6=()=>g.jsx("section",{className:"py-20 bg-white dark:bg-slate-900 border-t border-slate-100 dark:border-slate-800",children:g.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[g.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(c6)}}),g.jsxs("div",{className:"text-center mb-16",children:[g.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#00aed9]/10 text-[#00aed9] font-bold text-xs uppercase tracking-widest mb-4",children:[g.jsx(j3,{size:14})," Soporte al Cliente"]}),g.jsx("h2",{className:"text-3xl md:text-5xl font-black text-slate-800 dark:text-white uppercase tracking-tighter",children:"Preguntas Frecuentes"}),g.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400 max-w-lg mx-auto",children:"Resolvemos sus dudas sobre el proceso de compra digital ms avanzado del mercado."})]}),g.jsx("div",{className:"space-y-4",children:JR.map((n,e)=>g.jsxs("details",{className:"group bg-slate-50 dark:bg-slate-800 rounded-2xl border border-transparent hover:border-[#00aed9] open:border-[#00aed9]/30 transition-all duration-300 overflow-hidden",children:[g.jsxs("summary",{className:"flex justify-between items-center p-6 cursor-pointer list-none text-slate-800 dark:text-white font-bold text-lg select-none group-hover:bg-white dark:group-hover:bg-slate-700/50 transition-colors",children:[g.jsx("span",{children:n.question}),g.jsx("span",{className:"transform group-open:rotate-180 transition-transform duration-300 text-[#00aed9]",children:g.jsx(PR,{})})]}),g.jsx("div",{className:"px-6 pb-6 pt-2 text-slate-500 dark:text-slate-300 leading-relaxed border-t border-slate-100 dark:border-slate-700/50",children:n.answer})]},e))})]})}),d6=()=>g.jsxs("footer",{className:"mt-12 py-12 px-8 lg:px-16 rounded-[40px] bg-[#173d57] dark:bg-[#0d2232] text-white relative overflow-hidden group shadow-2xl shadow-cyan-900/10",children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10 mix-blend-overlay"}),g.jsx("div",{className:"absolute -top-20 -right-20 p-20 opacity-5 pointer-events-none rotate-12 transition-transform duration-[2s] group-hover:rotate-45",children:g.jsx(DR,{size:400})}),g.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-10",children:[g.jsxs("div",{className:"text-center md:text-left",children:[g.jsxs("h3",{className:"text-2xl font-black uppercase tracking-tight flex items-center gap-2 justify-center md:justify-start",children:["Richard",g.jsx("span",{className:"text-[#00aed9]",children:"Automotive"})]}),g.jsx("p",{className:"text-blue-200 text-sm mt-2 max-w-md",children:"Redefiniendo la compra de autos en Puerto Rico con Inteligencia Artificial y transparencia total."})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx(Eh,{icon:g.jsx(F3,{size:20}),label:"Instagram",href:"#"}),g.jsx(Eh,{icon:g.jsx(D3,{size:20}),label:"Facebook",href:"#"}),g.jsx(Eh,{icon:g.jsx(l9,{size:20}),label:"YouTube",href:"#"}),g.jsx(Eh,{icon:g.jsx(t9,{size:20}),label:"X / Twitter",href:"#"})]})]}),g.jsxs("div",{className:"mt-12 pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center text-xs font-bold text-slate-400 gap-6",children:[g.jsx("p",{children:" 2025 Richard Automotive. Todos los derechos reservados."}),g.jsxs("div",{className:"flex gap-8",children:[g.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Poltica de Privacidad"}),g.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Trminos de Servicio"}),g.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Mapa del Sitio"})]})]})]}),Eh=({icon:n,label:e,href:t})=>g.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-white/10 hover:bg-[#00aed9] hover:scale-110 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg backdrop-blur-sm group",title:e,children:g.jsx("span",{className:"text-white group-hover:animate-bounce",children:n})}),XR=j.createContext(void 0),h6=({children:n})=>{const[e,t]=j.useState(()=>{try{const d=localStorage.getItem("richard_compare_cars_full");return d?JSON.parse(d):[]}catch(d){return console.error("Error parsing comparisons from local storage",d),[]}}),r=d=>{t(d),localStorage.setItem("richard_compare_cars_full",JSON.stringify(d))},s=d=>{if(e.length>=3){alert("Puedes comparar mximo 3 vehculos.");return}e.find(p=>p.id===d.id)||r([...e,d])},o=d=>{r(e.filter(p=>p.id!==d))},l=d=>e.some(p=>p.id===d),u=()=>{r([])};return g.jsx(XR.Provider,{value:{selectedCars:e,addCarToCompare:s,removeCarFromCompare:o,isInComparison:l,clearComparison:u},children:n})},ZR=()=>{const n=j.useContext(XR);if(n===void 0)throw new Error("useComparison must be used within a ComparisonProvider");return n},f6=({car:n,isSaved:e,onToggleSave:t})=>{const r=$a(),{addCarToCompare:s,removeCarFromCompare:o,isInComparison:l}=ZR(),[u,d]=j.useState(!1),p=j.useRef(null),y=l(n.id),_=P=>{P.stopPropagation(),y?o(n.id):s(n)},T=P=>{if(!p.current)return;const M=p.current.getBoundingClientRect(),D=P.clientX-M.left,X=P.clientY-M.top;p.current.style.setProperty("--mouse-x",`${D}px`),p.current.style.setProperty("--mouse-y",`${X}px`)},S=Math.round(n.price/72);return g.jsxs("button",{ref:p,onMouseMove:T,onClick:()=>r(`/vehicle/${n.id}`),className:"glass-premium group relative overflow-hidden text-left flex flex-col h-full active:scale-[0.98] transition-all duration-300",children:[g.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden p-8 flex items-center justify-center rounded-t-[24px]",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none"}),g.jsxs("div",{className:"absolute top-6 left-6 z-20 flex flex-col gap-2 items-start",children:[n.badge&&g.jsx("span",{className:"px-3 py-1.5 bg-[#00aed9]/80 backdrop-blur-md text-white text-[10px] font-black uppercase tracking-widest rounded-full shadow-lg border border-white/10",children:n.badge}),g.jsxs("span",{className:"px-3 py-1.5 bg-slate-900/60 text-slate-200 text-[10px] font-bold uppercase tracking-widest rounded-full shadow-sm flex items-center gap-1 backdrop-blur-md border border-white/10",children:[g.jsx(u_,{size:12,className:"text-[#00aed9]"})," Richard Certified"]})]}),g.jsxs("div",{className:"absolute top-6 right-6 z-20 flex flex-col gap-3",children:[g.jsx("div",{onClick:t,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-lg border backdrop-blur-md ${e?"bg-rose-500 border-rose-500 text-white":"bg-slate-900/40 border-white/10 text-white hover:text-rose-400"}`,children:g.jsx(Ef,{size:18,fill:e?"currentColor":"none"})}),g.jsx("div",{onClick:_,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-lg border backdrop-blur-md ${y?"bg-[#00aed9] text-white border-[#00aed9]":"bg-slate-900/40 border-white/10 text-white hover:text-[#00aed9]"}`,children:g.jsx(NR,{size:18})})]}),!u&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-0",children:g.jsx(pu,{className:"text-[#00aed9] animate-spin relative z-10",size:32})}),g.jsx("img",{src:n.img,alt:n.name,loading:"lazy",onLoad:()=>d(!0),className:`w-full h-full object-contain transition-all duration-700 drop-shadow-2xl z-10
                        ${u?"opacity-100 scale-100 group-hover:scale-110 group-hover:-rotate-1":"opacity-0 scale-95"}
                    `})]}),g.jsxs("div",{className:"p-8 flex-1 flex flex-col relative z-20",children:[g.jsxs("div",{className:"mb-4",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("span",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-[0.2em]",children:n.type}),g.jsx("div",{className:"h-px w-8 bg-[#00aed9]/50"})]}),g.jsx("h3",{className:"text-2xl font-black text-white tracking-tighter group-hover:text-[#00aed9] transition-colors line-clamp-1 drop-shadow-md text-glow",children:n.name})]}),g.jsxs("div",{className:"flex gap-2 mb-6 flex-wrap",children:[g.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"Auto"}),g.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"Gasolina"}),g.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"4 Puertas"})]}),g.jsxs("div",{className:"mt-auto flex items-end justify-between border-t border-white/10 pt-6",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"text-3xl font-black text-white tracking-tight text-glow",children:["$",n.price.toLocaleString()]}),g.jsxs("p",{className:"text-[10px] font-bold text-[#00aed9] mt-1 flex items-center gap-1",children:["Est. $",S,"/mo"]})]}),g.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00aed9] text-white flex items-center justify-center shadow-[0_0_15px_rgba(0,174,217,0.5)] group-hover:scale-110 transition-transform",children:g.jsx(c_,{size:20})})]})]})]})},p6=({inventory:n,initialVisualSearch:e,onClearVisualSearch:t,onMagicFix:r,onOpenGarage:s})=>{const[o,l]=j.useState(""),[u,d]=j.useState("all"),[p,y]=j.useState(null),[_,T]=j.useState([]),[S,P]=j.useState(null),[M,D]=j.useState(!1),[X,W]=j.useState(!1),[Q,ae]=j.useState(!1),[de,me]=j.useState(!1),[N,I]=j.useState(null),[A,k]=j.useState([]),[L,C]=j.useState(!1),{user:R}=j.useContext(rd),ut=$a(),Je=Fs();j.useEffect(()=>{const Se=h_("richard_saved_cars");if(Se)try{T(JSON.parse(Se))}catch(Et){console.error("Error parsing saved cars cookie",Et)}},[]),j.useEffect(()=>{e&&ft(e)},[e]);const hn=(Se,Et)=>{if(Se.stopPropagation(),!R){ut("/login",{state:{from:Je}});return}T(It=>{const Zn=It.includes(Et)?It.filter(pr=>pr!==Et):[...It,Et];return Tf("richard_saved_cars",JSON.stringify(Zn),30),Zn})},ft=async Se=>{me(!0),D(!0);try{const Et=await B9(Se);l(Et.keywords[1]||Et.keywords[0]);const It=(Et.type||"").toLowerCase();["suv","sedan","pickup","luxury"].includes(It)?d(It):d("all"),I(Et.description),t&&t(),D(!1)}catch(Et){console.error("Error en bsqueda visual automtica",Et),alert("No pudimos analizar la imagen importada."),D(!1)}finally{me(!1)}},{data:ve,fetchNextPage:$e,hasNextPage:ke,isFetchingNextPage:z,status:oe}=nP({queryKey:["cars",u,p],queryFn:({pageParam:Se})=>ER(9,Se,u,p),initialPageParam:null,getNextPageParam:Se=>Se.hasMore?Se.lastDoc:void 0,enabled:!o&&!N,staleTime:300*1e3}),Ge=ve?.pages.flatMap(Se=>Se.cars)||[],rt=!!o||!!N,pt=n.filter(Se=>{let Et=!0;N?(Se.name||"").toLowerCase().includes(o.toLowerCase())||(N||"").toLowerCase().includes(Se.type||"")||Se.type.includes(N.split(" ")[0]||""):Et=(Se.name||"").toLowerCase().includes(o.toLowerCase());const It=u==="all"||Se.type===u;return Et&&It}).sort((Se,Et)=>p==="asc"?Se.price-Et.price:p==="desc"?Et.price-Se.price:0),_t=rt?pt:Ge,St=!rt&&oe==="pending",kt=async Se=>{const Et=Se.target.files?.[0];if(!Et)return;const It=new FileReader;It.readAsDataURL(Et),It.onload=async()=>{const Zn=It.result.split(",")[1];await ft(Zn)}},wt=(Se,Et)=>{Se.stopPropagation(),k(It=>It.some(pr=>pr.id===Et.id)?It.filter(pr=>pr.id!==Et.id):It.length>=2?(alert("Modo VS: Mximo 2 unidades para comparar."),It):[...It,Et])},Wt=async()=>{r&&(C(!0),await r(),C(!1))};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"p-0 lg:p-0 w-full pb-24 space-y-0 bg-slate-50 dark:bg-slate-950",children:[g.jsx(o6,{onNeuralMatch:()=>W(!0),onBrowseInventory:()=>{document.getElementById("inventory-grid")?.scrollIntoView({behavior:"smooth"})},onSellCar:()=>ut("/appraisal")}),g.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 lg:px-12 space-y-16 -mt-20 relative z-20",children:[g.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-[40px] shadow-xl shadow-slate-200/50 dark:shadow-none p-4 md:p-8",children:g.jsx(a6,{})}),g.jsxs("div",{id:"inventory-grid",className:"scroll-mt-32",children:[g.jsx("div",{className:"sticky top-4 z-30 py-4 px-6 bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl rounded-full shadow-lg border border-slate-100 dark:border-slate-800 transition-all duration-300",children:g.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[g.jsxs("div",{className:"flex-1 relative w-full group",children:[g.jsx(Q3,{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 group-focus-within:text-[#00aed9] transition-colors",size:24}),g.jsx("input",{type:"text",placeholder:N?`Buscando similares a: ${o}...`:"Buscar modelo, ao o caractersticas...",className:"w-full pl-16 pr-20 py-4 bg-transparent outline-none text-lg font-semibold dark:text-white placeholder:text-slate-300 dark:placeholder:text-slate-600",value:o,onChange:Se=>{l(Se.target.value),I(null)}}),g.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:[g.jsxs("button",{onClick:()=>W(!0),className:"hidden md:flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-500 rounded-full transition-all text-xs font-bold uppercase tracking-wide border border-transparent hover:border-cyan-400",title:"Encuentra tu auto ideal por estilo de vida",children:[g.jsx(wf,{size:16})," Neural Match"]}),g.jsx("button",{onClick:()=>D(!0),className:"p-3 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-500 rounded-full transition-all",title:"Bsqueda Visual por IA",children:g.jsx(wx,{size:20})})]})]}),g.jsxs("div",{className:"flex gap-4 items-center w-full lg:w-auto overflow-x-auto pb-2 lg:pb-0 scrollbar-hide",children:[g.jsx("div",{className:"flex gap-2 p-1.5 bg-slate-100 dark:bg-slate-800 rounded-full",children:["all","suv","sedan","pickup"].map(Se=>g.jsx("button",{onClick:()=>d(Se),className:`px-5 py-3 rounded-full font-black text-xs uppercase tracking-widest transition-all whitespace-nowrap ${u===Se?"bg-[#173d57] dark:bg-[#00aed9] text-white shadow-md":"text-slate-400 hover:text-slate-600 dark:hover:text-white"}`,children:Se==="all"?"Todos":Se},Se))}),g.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-slate-100 dark:bg-slate-800 rounded-full",children:[g.jsxs("button",{onClick:()=>y(Se=>Se==="asc"?null:"asc"),className:`px-4 py-3 rounded-full flex items-center gap-2 text-xs font-bold uppercase tracking-wide transition-all ${p==="asc"?"bg-[#00aed9] text-white":"text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,title:"Menor Precio",children:[g.jsx(lg,{size:14,className:"rotate-180"})," ",g.jsx("span",{className:"hidden sm:inline",children:"$-$$$"})]}),g.jsxs("button",{onClick:()=>y(Se=>Se==="desc"?null:"desc"),className:`px-4 py-3 rounded-full flex items-center gap-2 text-xs font-bold uppercase tracking-wide transition-all ${p==="desc"?"bg-[#00aed9] text-white":"text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,title:"Mayor Precio",children:[g.jsx(lg,{size:14})," ",g.jsx("span",{className:"hidden sm:inline",children:"$$$-$"})]})]})]})]})}),g.jsxs("div",{className:"flex justify-between items-end px-2 mt-8 mb-6",children:[g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-black text-slate-800 dark:text-white",children:[_t.length," ",rt?"Resultados":"Vehculos"]}),_.length>0&&g.jsxs("button",{onClick:()=>s&&s(),className:"text-sm text-[#00aed9] font-bold mt-1 flex items-center gap-1 hover:underline cursor-pointer",children:[g.jsx(Ef,{size:14,fill:"currentColor"})," Ver Mi Garaje Digital (",_.length,")"]})]}),N&&g.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-[#00aed9]/10 to-transparent border-l-4 border-[#00aed9] p-3 rounded-r-xl",children:[g.jsx(rc,{size:16,className:"text-[#00aed9]"}),g.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-300",children:[g.jsx("span",{className:"font-bold text-[#00aed9]",children:":"})," Resultados visuales."]}),g.jsx("button",{onClick:()=>{I(null),l(""),d("all")},className:"ml-2 text-[10px] font-bold underline hover:text-[#00aed9]",children:"Limpiar"})]})]}),g.jsx("div",{className:"pb-10 space-y-8",children:St?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(Se=>g.jsx("div",{className:"h-[400px] bg-slate-100 dark:bg-slate-800 rounded-[40px] animate-pulse"},Se))}):_t.length===0?g.jsx("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-center bg-white dark:bg-slate-800/50 rounded-[40px] border-2 border-dashed border-slate-300 dark:border-slate-700 animate-in fade-in",children:rt?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-2xl font-black text-slate-300 dark:text-slate-500 uppercase tracking-tight",children:"Sin Resultados"}),g.jsx("button",{onClick:()=>{l(""),d("all"),I(null)},className:"mt-4 text-[#00aed9] font-bold underline hover:text-cyan-400",children:"Limpiar Filtros"})]}):g.jsxs(g.Fragment,{children:[g.jsx(C3,{size:48,className:"text-slate-400 mb-4"}),g.jsx("h3",{className:"text-2xl font-black text-slate-700 dark:text-white uppercase tracking-tight",children:"Base de datos vaca"}),g.jsx("p",{className:"text-slate-500 mt-2 max-w-md",children:"No hay autos visibles."}),r?g.jsx("button",{onClick:Wt,disabled:L,className:"mt-6 px-8 py-4 bg-rose-600 hover:bg-rose-500 text-white rounded-full font-black uppercase tracking-widest shadow-xl shadow-rose-600/30 active:scale-95 transition-all flex items-center gap-3 animate-bounce",children:L?g.jsxs(g.Fragment,{children:[" ",g.jsx(pu,{className:"animate-spin"})," Reparando... "]}):g.jsxs(g.Fragment,{children:[" ",g.jsx(a9,{size:20}),"  Reparacin Automtica "]})}):g.jsx("p",{className:"text-slate-500 mb-6 max-w-md",children:"Ve al Admin Panel para configurar."})]})}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:_t.map(Se=>g.jsx(f6,{car:Se,onSelect:()=>P(Se),onCompare:Et=>wt(Et,Se),isComparing:A.some(Et=>Et.id===Se.id),isSaved:_.includes(Se.id),onToggleSave:Et=>hn(Et,Se.id)},Se.id))}),!rt&&ke&&g.jsx("div",{className:"flex justify-center pt-8",children:g.jsxs("button",{onClick:()=>$e(),disabled:z,className:"px-8 py-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-full font-bold text-slate-600 dark:text-white hover:bg-[#00aed9] hover:text-white hover:border-[#00aed9] transition-all shadow-lg shadow-slate-200/50 dark:shadow-none active:scale-95 flex items-center gap-2 group",children:[z?g.jsx(pu,{className:"animate-spin"}):g.jsx(lg,{className:"group-hover:translate-y-1 transition-transform",size:18}),z?"Cargando ms...":"Cargar Ms Vehculos"]})})]})})]}),g.jsx(u6,{}),g.jsx(l6,{}),g.jsx(d6,{})]})]}),A.length>0&&g.jsxs("div",{className:"fixed bottom-24 lg:bottom-12 left-1/2 -translate-x-1/2 z-40 bg-[#173d57] dark:bg-[#0d2232] text-white pl-2 pr-6 py-2 rounded-full shadow-2xl flex items-center gap-4 animate-in slide-in-from-bottom-5 border border-[#00aed9]/30 backdrop-blur-md",children:[g.jsxs("div",{className:"flex -space-x-3",children:[A.map(Se=>g.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[#173d57] dark:border-[#0d2232] bg-white flex items-center justify-center overflow-hidden",children:g.jsx("img",{src:Se.img,alt:Se.name,className:"w-full h-full object-cover"})},Se.id)),A.length<2&&g.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[#173d57] dark:border-[#0d2232] bg-white/10 flex items-center justify-center text-xs font-bold border-dashed border-white/30",children:"?"})]}),g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"font-bold text-sm leading-tight",children:"Comparativa VS"}),g.jsxs("span",{className:"text-[10px] text-cyan-300 font-medium",children:[A.length," de 2 Seleccionados"]})]}),A.length===2&&g.jsx("button",{onClick:()=>ae(!0),className:"ml-2 bg-[#00aed9] hover:bg-cyan-400 text-white px-5 py-2 rounded-full text-xs font-black uppercase tracking-wider transition-all shadow-[0_0_15px_rgba(0,174,217,0.5)] animate-pulse",children:"Iniciar"}),g.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),g.jsx("button",{onClick:()=>k([]),className:"p-1.5 hover:bg-white/10 rounded-full text-slate-300 hover:text-white transition-colors",children:g.jsx(Vi,{size:16})})]}),X&&g.jsx(W9,{inventory:n,onClose:()=>W(!1),onSelectCar:Se=>{P(Se),W(!1)}}),Q&&g.jsx(Q9,{cars:A,onClose:()=>ae(!1)}),M&&g.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-[#0d2232]/90 backdrop-blur-xl animate-in fade-in",children:g.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[40px] max-w-lg w-full relative shadow-2xl border border-slate-700",children:[g.jsx("button",{onClick:()=>D(!1),className:"absolute top-6 right-6 text-slate-400 hover:text-white transition-colors",children:g.jsx(Vi,{})}),g.jsxs("h3",{className:"text-3xl font-black text-slate-800 dark:text-white mb-2 flex items-center gap-3",children:[g.jsx(wx,{className:"text-[#00aed9]",size:32})," Visual AI"]}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 font-medium",children:"Sube una foto y nuestra IA encontrar el match perfecto en nuestro inventario."}),de?g.jsxs("div",{className:"flex flex-col items-center justify-center h-48 space-y-4 border-2 border-dashed border-[#00aed9]/30 rounded-3xl bg-[#00aed9]/5",children:[g.jsx(pu,{className:"w-12 h-12 text-[#00aed9] animate-spin"}),g.jsx("p",{className:"text-sm font-bold animate-pulse text-[#00aed9] uppercase tracking-widest",children:"Escaneando..."})]}):g.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-3xl cursor-pointer bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all group hover:border-[#00aed9]",children:[g.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[g.jsx(n9,{className:"w-12 h-12 mb-3 text-slate-400 group-hover:text-[#00aed9] transition-colors scale-100 group-hover:scale-110 duration-300"}),g.jsxs("p",{className:"mb-2 text-sm text-slate-500 dark:text-slate-400",children:[g.jsx("span",{className:"font-bold text-[#00aed9]",children:"Sube una foto"})," o arrastra aqu"]})]}),g.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:kt})]})]})}),S&&g.jsx(H9,{car:S,onClose:()=>P(null)}),g.jsx(GR,{inventory:n})]})},m6=()=>g.jsxs("a",{href:`https://wa.me/17875550123?text=${encodeURIComponent("Hola, me gustara ms informacin sobre su inventario.")}`,target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-24 right-5 z-50 p-4 bg-[#25D366] hover:bg-[#128C7E] text-white rounded-full shadow-lg hover:scale-110 transition-all duration-300 animate-bounce-slow flex items-center justify-center group",title:"Chat en WhatsApp",children:[g.jsx(OR,{size:28,fill:"white"}),g.jsx("span",{className:"absolute right-full mr-3 bg-white dark:bg-slate-800 text-slate-800 dark:text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Habla con Richard IA"})]}),p_=j.createContext({theme:"light",toggleTheme:()=>{}}),g6=({children:n})=>{const[e,t]=j.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),r=()=>{t(s=>{const o=s==="light"?"dark":"light";return localStorage.setItem("theme",o),o})};return g.jsx(p_.Provider,{value:{theme:e,toggleTheme:r},children:n})},y6=()=>{const{theme:n,toggleTheme:e}=j.useContext(p_);return g.jsx("button",{onClick:e,"aria-label":`Activar modo ${n==="light"?"oscuro":"claro"}`,className:"p-2 rounded-full text-slate-400 hover:text-white hover:bg-white/10 transition-colors",children:n==="light"?g.jsx(H3,{size:18}):g.jsx(Z3,{size:18})})},v6=()=>{const[n,e]=j.useState(!1);j.useEffect(()=>{if(h_("richard_cookie_consent"))$x();else{const o=setTimeout(()=>e(!0),1500);return()=>clearTimeout(o)}},[]);const t=()=>{Tf("richard_cookie_consent","true",365),$x(),e(!1)},r=()=>{Tf("richard_cookie_consent","false",7),e(!1)};return n?g.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[1000] p-4 md:p-6 flex justify-center animate-in slide-in-from-bottom-10 fade-in duration-500",children:g.jsxs("div",{className:"bg-[#0d2232]/95 backdrop-blur-xl border border-slate-700 shadow-2xl rounded-3xl p-6 md:p-8 max-w-4xl w-full flex flex-col md:flex-row items-center gap-6 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00aed9] to-transparent opacity-50"}),g.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-[#00aed9]/10 rounded-full shrink-0",children:g.jsx(k3,{size:32,className:"text-[#00aed9]"})}),g.jsxs("div",{className:"flex-1 text-center md:text-left",children:[g.jsx("h4",{className:"text-white font-black text-lg mb-2",children:"Valoramos tu Privacidad"}),g.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed",children:["Utilizamos cookies propias y de terceros para mejorar tu experiencia de navegacin, analizar el trfico del sitio y personalizar el contenido del inventario. Al hacer clic en ",g.jsx("span",{className:"text-white font-bold",children:'"Aceptar todo"'}),", consientes el uso de todas las cookies."]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto shrink-0",children:[g.jsx("button",{onClick:r,className:"px-6 py-3 rounded-xl border border-slate-600 text-slate-300 hover:text-white hover:border-slate-500 text-xs font-bold uppercase tracking-widest transition-colors",children:"Rechazar"}),g.jsxs("button",{onClick:t,className:"px-8 py-3 bg-[#00aed9] hover:bg-cyan-500 text-white rounded-xl text-xs font-bold uppercase tracking-widest shadow-lg shadow-cyan-500/20 transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[g.jsx(u_,{size:16})," Aceptar Todo"]})]}),g.jsx("button",{onClick:()=>e(!1),className:"absolute top-4 right-4 text-slate-500 hover:text-white transition-colors md:hidden",children:g.jsx(Vi,{size:20})})]})}):null};function _6(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:s,onRegisteredSW:o,onRegisterError:l}=n;let u,d;const p=async(_=!0)=>{await d};async function y(){if("serviceWorker"in navigator){if(u=await zt(async()=>{const{Workbox:_}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:_}},[]).then(({Workbox:_})=>new _("/richard-app-google-studio/sw.js",{scope:"/richard-app-google-studio/",type:"classic"})).catch(_=>{l?.(_)}),!u)return;u.addEventListener("activated",_=>{(_.isUpdate||_.isExternal)&&window.location.reload()}),u.addEventListener("installed",_=>{_.isUpdate||r?.()}),u.register({immediate:e}).then(_=>{o?o("/richard-app-google-studio/sw.js",_):s?.(_)}).catch(_=>{l?.(_)})}}return d=y(),p}function w6(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:r,onRegistered:s,onRegisteredSW:o,onRegisterError:l}=n,[u,d]=j.useState(!1),[p,y]=j.useState(!1),[_]=j.useState(()=>_6({immediate:e,onOfflineReady(){y(!0),r?.()},onNeedRefresh(){d(!0),t?.()},onRegistered:s,onRegisteredSW:o,onRegisterError:l}));return{needRefresh:[u,d],offlineReady:[p,y],updateServiceWorker:_}}const E6=()=>{const{offlineReady:[n,e],needRefresh:[t,r],updateServiceWorker:s}=w6({onRegistered(l){},onRegisterError(l){}}),o=()=>{e(!1),r(!1)};return!n&&!t?null:g.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[2000] animate-in slide-in-from-bottom-5 fade-in",children:g.jsxs("div",{className:"bg-[#0d2232] border border-[#00aed9]/30 p-4 rounded-2xl shadow-2xl flex items-center gap-4 text-white min-w-[300px]",children:[g.jsxs("div",{className:"p-3 bg-gradient-to-br from-[#00aed9] to-blue-600 rounded-xl relative",children:[g.jsx(N3,{size:20,className:"text-white relative z-10"}),g.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse rounded-xl"})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-bold text-sm",children:n?"App lista para offline":"Nueva versin disponible"}),g.jsx("p",{className:"text-[10px] text-slate-400",children:n?"Ya puedes usar la app sin internet.":"Recarga para ver los cambios."})]}),t&&g.jsxs("button",{className:"px-4 py-2 bg-white text-[#0d2232] rounded-lg text-xs font-bold hover:bg-slate-200 transition-colors flex items-center gap-2",onClick:()=>s(!0),children:[g.jsx(jR,{size:14})," Recargar"]}),g.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-xs",onClick:o,children:"Cerrar"})]})})},T6=()=>{const[n,e]=j.useState(!navigator.onLine);return j.useEffect(()=>{const t=()=>e(!1),r=()=>e(!0);return window.addEventListener("online",t),window.addEventListener("offline",r),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}},[]),n?g.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[100] bg-red-600 text-white py-2 px-4 shadow-lg flex items-center justify-center gap-2 animate-in slide-in-from-bottom-full duration-500",children:[g.jsx(o9,{size:16}),g.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Modo Offline Activo  Viendo datos guardados"})]}):null},x6=()=>{const{selectedCars:n,removeCarFromCompare:e}=ZR(),t=$a();return n.length===0?null:g.jsx("div",{className:"fixed bottom-0 left-0 w-full z-50 p-4 flex justify-center pointer-events-none",children:g.jsxs("div",{className:"bg-[#0d2232] border border-[#00aed9]/30 rounded-2xl shadow-2xl p-4 flex items-center gap-6 pointer-events-auto max-w-2xl w-full backdrop-blur-xl animate-in slide-in-from-bottom duration-300",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00aed9]/10 flex items-center justify-center text-[#00aed9]",children:g.jsx(NR,{size:20})}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-white font-bold text-sm",children:"Comparando"}),g.jsxs("p",{className:"text-slate-400 text-xs",children:[n.length," Vehculos seleccionados"]})]})]}),g.jsxs("div",{className:"flex-1 flex items-center gap-2 overflow-x-auto",children:[n.map(r=>g.jsxs("div",{className:"relative group shrink-0",children:[g.jsx("img",{src:r.img,alt:r.name,className:"w-16 h-12 object-contain bg-white/5 rounded-lg border border-white/10"}),g.jsx("button",{onClick:()=>e(r.id),className:"absolute -top-2 -right-2 bg-slate-900 border border-slate-700 text-slate-400 hover:text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(Vi,{size:12})})]},r.id)),n.length<3&&g.jsx("div",{className:"w-16 h-12 rounded-lg border border-dashed border-slate-700 flex items-center justify-center text-slate-600 text-xs text-center leading-none",children:"Agregar +"})]}),g.jsxs("button",{onClick:()=>t("/compare"),className:"bg-[#00aed9] hover:bg-[#009ac0] text-slate-900 font-black uppercase text-xs tracking-widest py-3 px-6 rounded-xl transition-all shadow-lg shadow-cyan-500/20 flex items-center gap-2",children:["Comparar ",g.jsx(AR,{size:16})]})]})})},eA=j.createContext(void 0),I6=({children:n})=>{const[e,t]=j.useState([]),r=j.useCallback(o=>{t(l=>l.filter(u=>u.id!==o))},[]),s=j.useCallback((o,l)=>{const u=Date.now().toString();t(d=>[...d,{id:u,type:o,message:l}]),setTimeout(()=>{r(u)},5e3)},[r]);return g.jsxs(eA.Provider,{value:{notifications:e,addNotification:s,removeNotification:r},children:[n,g.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(o=>g.jsxs("div",{className:`
              pointer-events-auto flex items-start gap-3 p-4 rounded-xl shadow-2xl backdrop-blur-md border border-white/10 text-white min-w-[300px] max-w-sm animate-in slide-in-from-right-10 fade-in duration-300
              ${o.type==="success"?"bg-emerald-600/90 shadow-emerald-900/20":""}
              ${o.type==="error"?"bg-rose-600/90 shadow-rose-900/20":""}
              ${o.type==="info"?"bg-slate-800/90 shadow-slate-900/20":""}
            `,children:[g.jsxs("div",{className:"mt-0.5",children:[o.type==="success"&&g.jsx(S3,{size:18}),o.type==="error"&&g.jsx(l_,{size:18}),o.type==="info"&&g.jsx(V3,{size:18})]}),g.jsx("div",{className:"flex-1 text-sm font-medium leading-relaxed",children:o.message}),g.jsx("button",{onClick:()=>r(o.id),className:"text-white/60 hover:text-white transition-colors",children:g.jsx(Vi,{size:16})})]},o.id))})]})},b6=()=>{const n=j.useContext(eA);if(!n)throw new Error("useNotification must be used within a NotificationProvider");return n};var sc;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(sc||(sc={}));class dg extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const S6=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},k6=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},s=()=>e!==null?e.name:S6(n),o=()=>s()!=="web",l=_=>{const T=p.get(_);return!!(T?.platforms.has(s())||u(_))},u=_=>{var T;return(T=t.PluginHeaders)===null||T===void 0?void 0:T.find(S=>S.name===_)},d=_=>n.console.error(_),p=new Map,y=(_,T={})=>{const S=p.get(_);if(S)return console.warn(`Capacitor plugin "${_}" already registered. Cannot register plugins twice.`),S.proxy;const P=s(),M=u(_);let D;const X=async()=>(!D&&P in T?D=typeof T[P]=="function"?D=await T[P]():D=T[P]:e!==null&&!D&&"web"in T&&(D=typeof T.web=="function"?D=await T.web():D=T.web),D),W=(I,A)=>{var k,L;if(M){const C=M?.methods.find(R=>A===R.name);if(C)return C.rtype==="promise"?R=>t.nativePromise(_,A.toString(),R):(R,ut)=>t.nativeCallback(_,A.toString(),R,ut);if(I)return(k=I[A])===null||k===void 0?void 0:k.bind(I)}else{if(I)return(L=I[A])===null||L===void 0?void 0:L.bind(I);throw new dg(`"${_}" plugin is not implemented on ${P}`,sc.Unimplemented)}},Q=I=>{let A;const k=(...L)=>{const C=X().then(R=>{const ut=W(R,I);if(ut){const Je=ut(...L);return A=Je?.remove,Je}else throw new dg(`"${_}.${I}()" is not implemented on ${P}`,sc.Unimplemented)});return I==="addListener"&&(C.remove=async()=>A()),C};return k.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:I,writable:!1,configurable:!1}),k},ae=Q("addListener"),de=Q("removeListener"),me=(I,A)=>{const k=ae({eventName:I},A),L=async()=>{const R=await k;de({eventName:I,callbackId:R},A)},C=new Promise(R=>k.then(()=>R({remove:L})));return C.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},C},N=new Proxy({},{get(I,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return M?me:ae;case"removeListener":return de;default:return Q(A)}}});return r[_]=N,p.set(_,{name:_,proxy:N,platforms:new Set([...Object.keys(T),...M?[P]:[]])}),N};return t.convertFileSrc||(t.convertFileSrc=_=>_),t.getPlatform=s,t.handleError=d,t.isNativePlatform=o,t.isPluginAvailable=l,t.registerPlugin=y,t.Exception=dg,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},R6=n=>n.Capacitor=k6(n),Mu=R6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),pc=Mu.registerPlugin;class m_{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,t);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const s=this.listeners[e];if(!s){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(t),this.retainedEventArguments[e]=o}return}s.forEach(o=>o(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new Mu.Exception(e,sc.Unimplemented)}unavailable(e="not available"){return new Mu.Exception(e,sc.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const s=r.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const zx=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Bx=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class A6 extends m_{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Bx(s).trim(),o=Bx(o).trim(),t[s]=o}),t}async setCookie(e){try{const t=zx(e.key),r=zx(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${s}; path=${o}; ${l};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}pc("CapacitorCookies",{web:()=>new A6});const C6=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>t(s),r.readAsDataURL(n)}),P6=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(s=>s.toLocaleLowerCase()).reduce((s,o,l)=>(s[o]=n[e[l]],s),{})},N6=(n,e=!0)=>n?Object.entries(n).reduce((r,s)=>{const[o,l]=s;let u,d;return Array.isArray(l)?(d="",l.forEach(p=>{u=e?encodeURIComponent(p):p,d+=`${o}=${u}&`}),d.slice(0,-1)):(u=e?encodeURIComponent(l):l,d=`${o}=${u}`),`${r}&${d}`},"").substr(1):null,D6=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),s=P6(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(s.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[l,u]of Object.entries(n.data||{}))o.set(l,u);t.body=o.toString()}else if(s.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((u,d)=>{o.append(d,u)});else for(const u of Object.keys(n.data))o.append(u,n.data[u]);t.body=o;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(s.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class O6 extends m_{async request(e){const t=D6(e,e.webFetchExtra),r=N6(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,o=await fetch(s,t),l=o.headers.get("content-type")||"";let{responseType:u="text"}=o.ok?e:{};l.includes("application/json")&&(u="json");let d,p;switch(u){case"arraybuffer":case"blob":p=await o.blob(),d=await C6(p);break;case"json":d=await o.json();break;default:d=await o.text()}const y={};return o.headers.forEach((_,T)=>{y[T]=_}),{data:d,headers:y,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}pc("CapacitorHttp",{web:()=>new O6});var qx;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(qx||(qx={}));var Hx;(function(n){n.StatusBar="StatusBar",n.NavigationBar="NavigationBar"})(Hx||(Hx={}));class M6 extends m_{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}pc("SystemBars",{web:()=>new M6});const ca=pc("PushNotifications",{}),L6=async()=>{if(!Mu.isNativePlatform())return;let n=await ca.checkPermissions();if(n.receive==="prompt"&&(n=await ca.requestPermissions()),n.receive!=="granted"){console.error("User denied permissions!");return}await ca.register(),ca.addListener("registration",e=>{}),ca.addListener("registrationError",e=>{console.error("Error on registration: "+JSON.stringify(e))}),ca.addListener("pushNotificationReceived",e=>{alert(`Mensaje de Richard Auto: ${e.title}
${e.body}`)}),ca.addListener("pushNotificationActionPerformed",e=>{})};function j6(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,t){return new Proxy({},{get(r,s){return(o,l,u)=>{const d=n.Capacitor.Plugins[t];if(d===void 0){u(new Error(`Capacitor plugin ${t} not found`));return}if(typeof d[s]!="function"){u(new Error(`Method ${s} not found in Capacitor plugin ${t}`));return}(async()=>{try{const p=await d[s](o);l(p)}catch(p){u(p)}})()}}})}})}function V6(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,t){return n.cordova.plugins[t]}})}function F6(n=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!n?j6(window):window.cordova!==void 0&&V6(window))}const Gx=pc("Geolocation",{web:()=>zt(()=>import("./web-4vCtkE4A.js"),[]).then(n=>new n.GeolocationWeb)});F6();var Kx;(function(n){n[n.Sunday=1]="Sunday",n[n.Monday=2]="Monday",n[n.Tuesday=3]="Tuesday",n[n.Wednesday=4]="Wednesday",n[n.Thursday=5]="Thursday",n[n.Friday=6]="Friday",n[n.Saturday=7]="Saturday"})(Kx||(Kx={}));const tA=pc("LocalNotifications",{web:()=>zt(()=>import("./web-BHbXXqM5.js"),[]).then(n=>new n.LocalNotificationsWeb)}),Wx={latitude:18.3986,longitude:-66.1557},U6=500;function $6(n,e,t,r){const o=Th(t-n),l=Th(r-e),u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(Th(n))*Math.cos(Th(t))*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))*1e3}function Th(n){return n*(Math.PI/180)}const z6=async()=>{if(!Mu.isNativePlatform()){console.log("Geofencing skipped (Web Platform)");return}try{const n=await tA.requestPermissions(),e=await Gx.requestPermissions();if(n.display!=="granted"||e.location!=="granted"){console.log("Permissions denied for Geofencing");return}Gx.watchPosition({enableHighAccuracy:!0,timeout:5e3},t=>{if(t){const r=$6(t.coords.latitude,t.coords.longitude,Wx.latitude,Wx.longitude);console.log(`Distance to dealer: ${Math.floor(r)}m`),r<U6&&B6()}})}catch(n){console.error("Geofence Error:",n)}};let Qx=0;const B6=async()=>{const n=Date.now();n-Qx<36e5||(Qx=n,await tA.schedule({notifications:[{title:" Bienvenido a Richard Auto!",body:"Abre tu App para ver las ofertas exclusivas de hoy.",id:1,schedule:{at:new Date(Date.now()+100)},sound:void 0,attachments:void 0,actionTypeId:"",extra:null}]}))},q6=Hn.lazy(()=>zt(()=>import("./AdminPanel-DPAdJRpN.js"),__vite__mapDeps([0,1,2,3,4]))),H6=Hn.lazy(()=>zt(()=>import("./AIConsultant-B3Q5Fhn3.js"),[])),G6=Hn.lazy(()=>zt(()=>import("./AILabView-G3gXMS6E.js"),__vite__mapDeps([5,3,6,7]))),K6=Hn.lazy(()=>zt(()=>import("./UserLogin-DVqxRPDR.js"),[])),W6=Hn.lazy(()=>zt(()=>import("./VehicleDetail-CPsX_KwS.js"),__vite__mapDeps([8,1,9]))),Q6=Hn.lazy(()=>zt(()=>import("./TradeInView-DokH-ciw.js"),__vite__mapDeps([10,6]))),Y6=Hn.lazy(()=>zt(()=>import("./AppraisalView-BYKwcBZP.js"),__vite__mapDeps([11,9]))),J6=Hn.lazy(()=>zt(()=>import("./ComparisonView-Cmp7zfpv.js"),__vite__mapDeps([12,6]))),X6=Hn.lazy(()=>zt(()=>import("./AdminLogin-BLVC_CA6.js"),__vite__mapDeps([13,4,14,15,2,16]))),Z6=Hn.lazy(()=>zt(()=>import("./BlogView-iDDfyp1u.js"),[])),ez=Hn.lazy(()=>zt(()=>import("./DigitalGarage-BOtGg6Uu.js"),__vite__mapDeps([17,6,16,14,18]))),tz=Hn.lazy(()=>zt(()=>import("./PreQualifyView-DvHba2SL.js"),__vite__mapDeps([19,6,14,15,2]))),nz=Hn.lazy(()=>zt(()=>import("./PrivacyView-BH0fnhqM.js"),__vite__mapDeps([20,6,21]))),rz=Hn.lazy(()=>zt(()=>import("./TermsView-DK_0IVMn.js"),__vite__mapDeps([22,6,18]))),sz=Hn.lazy(()=>zt(()=>import("./NotFound-8Jz9avuO.js"),__vite__mapDeps([23,6]))),iz=Hn.lazy(()=>zt(()=>import("./FrameworkDashboard-D3QUi5IT.js"),__vite__mapDeps([24,21,14,7,25]))),oz=[{name:"Hyundai Tucson 2026",price:39500,type:"suv",badge:"Rediseado",img:"https://images.unsplash.com/photo-1695221971766-3d778d910dc7?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Elantra 2026",price:28900,type:"sedan",badge:"Deportivo",img:"https://images.unsplash.com/photo-1609520505218-7421da3b3d80?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Venue 2026",price:24500,type:"suv",badge:"Compacto",img:"https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?q=80&w=1200&auto=format&fit=crop",featured:!1},{name:"Hyundai Santa Fe 2026",price:44200,type:"suv",badge:"Ms Espacio",img:"https://images.unsplash.com/photo-1631522858632-1b157bd752e2?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Palisade 2026",price:58900,type:"luxury",badge:"Flagship",img:"https://images.unsplash.com/photo-1647494480572-c2834b6e56ad?q=80&w=1200&auto=format&fit=crop",featured:!0}],az=()=>g.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0d2232] text-white relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-cyan-900/20 to-[#0d2232]"}),g.jsxs("div",{className:"z-10 flex flex-col items-center",children:[g.jsx("div",{className:"w-16 h-16 border-4 border-cyan-500/30 border-t-cyan-400 rounded-full animate-spin mb-6 shadow-[0_0_30px_rgba(0,174,217,0.3)]"}),g.jsxs("h1",{className:"text-2xl font-black tracking-tighter mb-2",children:["RICHARD ",g.jsx("span",{className:"text-[#00aed9]",children:"AUTOMOTIVE"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),g.jsx("p",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400",children:"Initializing System v2.7"})]})]})]}),Yx=({children:n})=>{const{user:e,loading:t}=j.useContext(rd),r=Fs();return t?g.jsx("div",{className:"p-10 flex justify-center",children:g.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-cyan-500 rounded-full border-t-transparent"})}):e?g.jsx(g.Fragment,{children:n}):g.jsx($I,{to:"/login",state:{from:r},replace:!0})},lz=({children:n})=>{const{user:e,role:t,loading:r}=j.useContext(rd),s=$a(),o=async()=>{try{const{signOutUser:l}=await zt(async()=>{const{signOutUser:u}=await Promise.resolve().then(()=>YR);return{signOutUser:u}},void 0);await l(),s("/")}catch(l){console.error(l)}};return r?g.jsx("div",{className:"p-10 flex justify-center",children:g.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-cyan-500 rounded-full border-t-transparent"})}):e?t!=="admin"?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center bg-slate-50 dark:bg-slate-900",children:[g.jsx(VR,{size:48,className:"text-red-500 mb-6"}),g.jsx("h2",{className:"text-3xl font-black text-slate-800 dark:text-white uppercase mb-2",children:"Acceso Denegado"}),g.jsx("p",{className:"text-slate-500 max-w-md mb-8",children:"Esta seccin es exclusiva para administradores."}),g.jsx("button",{onClick:o,className:"px-8 py-3 bg-slate-800 text-white rounded-xl font-bold uppercase",children:"Cerrar Sesin"})]}):g.jsx(g.Fragment,{children:n}):g.jsx($I,{to:"/admin-login"})},cz=()=>{const[n,e]=j.useState(!1),[t,r]=j.useState([]),[s,o]=j.useState(null),{theme:l}=j.useContext(p_),{user:u,role:d,loading:p}=j.useContext(rd),{addNotification:y}=b6(),_=$a(),T=Fs();j.useEffect(()=>{const M=window.document.documentElement;M.classList.remove("light","dark"),M.classList.add(l)},[l]),j.useEffect(()=>{const M=TR(D=>{r(D)});return L6(),z6(),()=>M()},[]);const S=async()=>{try{const{signOutUser:M}=await zt(async()=>{const{signOutUser:D}=await Promise.resolve().then(()=>YR);return{signOutUser:D}},void 0);await M(),_("/"),y("info","Has cerrado sesin correctamente.")}catch(M){console.error("Logout error:",M),y("error","Error al cerrar sesin.")}},P=()=>{const M=T.pathname;return M.startsWith("/admin")?cr.ADMIN:M==="/garage"?cr.DIGITAL_GARAGE:M==="/qualify"?cr.PRE_QUALIFY:M==="/consultant"?cr.AI_CONSULTANT:M==="/blog"?cr.BLOG:M==="/trade-in"?cr.TRADE_IN:M==="/lab"?cr.AI_LAB:M==="/framework-lab"?"framework-lab":M.startsWith("/login")?"login":cr.STOREFRONT};return g.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-slate-50 dark:bg-slate-900 overflow-hidden relative",children:[g.jsxs("div",{className:"lg:hidden p-4 bg-[#173d57] text-white flex justify-between items-center shadow-md z-50",children:[g.jsxs("span",{className:"font-black text-xl tracking-tight",children:["RICHARD",g.jsx("span",{className:"text-[#00aed9]",children:"AUTO"})]}),g.jsx("button",{onClick:()=>e(!n),children:g.jsx(B3,{})})]}),g.jsxs("nav",{className:"fixed inset-y-0 left-0 w-72 bg-[#173d57]/95 dark:bg-[#0d2232]/95 backdrop-blur-2xl border-r border-white/5 text-white flex flex-col shadow-2xl z-40 transform transition-transform duration-300 lg:translate-x-0 lg:static lg:h-screen pointer-events-auto "+(n?"translate-x-0":"-translate-x-full"),children:[g.jsx("div",{className:"p-10 flex justify-between items-center cursor-pointer group",onClick:()=>_("/"),children:g.jsxs("h1",{className:"text-3xl font-black tracking-tighter leading-none group-hover:scale-105 transition-transform",children:[g.jsx("span",{className:"text-[#00aed9]",children:"RICHARD"}),g.jsx("br",{}),"AUTOMOTIVE"]})}),g.jsxs("div",{className:"flex-1 px-6 space-y-2 overflow-y-auto custom-scrollbar",children:[g.jsx(Ii,{active:P()===cr.STOREFRONT,onClick:()=>{_("/"),e(!1)},icon:g.jsx(X3,{size:20}),label:"Tienda Digital"}),g.jsx(Ii,{active:P()===cr.DIGITAL_GARAGE,onClick:()=>{_("/garage"),e(!1)},icon:g.jsx(i9,{size:20}),label:"Mi Garaje"}),g.jsx(Ii,{active:P()===cr.PRE_QUALIFY,onClick:()=>{_("/qualify"),e(!1)},icon:g.jsx(O3,{size:20}),label:"Pre-Cualificacin"}),g.jsx(Ii,{active:P()===cr.TRADE_IN,onClick:()=>{_("/trade-in"),e(!1)},icon:g.jsx(CR,{size:20}),label:"Vender mi Auto"}),g.jsx(Ii,{active:P()===cr.AI_CONSULTANT,onClick:()=>{_("/consultant"),e(!1)},icon:g.jsx(w3,{size:20}),label:"Consultor IA"}),g.jsx(Ii,{active:P()===cr.BLOG,onClick:()=>{_("/blog"),e(!1)},icon:g.jsx(K3,{size:20}),label:"AI Newsroom"}),g.jsx(Ii,{active:T.pathname==="/framework-lab",onClick:()=>{_("/framework-lab"),e(!1)},icon:g.jsx(R3,{size:20,className:"text-cyan-400"}),label:"Framework Lab"}),g.jsx("div",{className:"pt-4 my-2 border-t border-white/5"}),!p&&u?g.jsxs("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-white/10 shadow-inner",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#00aed9] to-cyan-600 flex items-center justify-center text-white shadow-lg shadow-cyan-500/20",children:g.jsx(FR,{size:18})}),g.jsxs("div",{className:"overflow-hidden",children:[g.jsx("p",{className:"text-xs font-black truncate text-white uppercase tracking-tight",children:u.email}),g.jsx("p",{className:"text-[10px] uppercase tracking-widest text-[#00aed9] font-black",children:d==="admin"?"Administrador":"Usuario"})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[g.jsxs("button",{onClick:S,className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-red-500/10 text-red-400 hover:bg-red-500/20 text-[10px] font-black uppercase tracking-wider transition-all active:scale-95 border border-red-500/10",children:[g.jsx(z3,{size:14})," Salir"]}),d==="admin"&&g.jsxs("button",{onClick:()=>_("/admin"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 hover:bg-cyan-500/20 text-[10px] font-black uppercase tracking-wider transition-all active:scale-95 border border-cyan-500/10",children:[g.jsx(VR,{size:14})," Admin"]})]})]}):g.jsx(Ii,{active:!1,onClick:()=>{_("/login"),e(!1)},icon:g.jsx($3,{size:20}),label:"Iniciar Sesin",isAction:!0}),g.jsx("div",{className:"pt-2 my-2 border-t border-white/5"}),g.jsx(Ii,{active:P()===cr.AI_LAB,onClick:()=>{_("/lab"),e(!1)},icon:g.jsx(M3,{size:20}),label:"Laboratorio IA",highlight:!0})]}),g.jsx("div",{className:"p-6 border-t border-white/5 bg-black/10 backdrop-blur-md",children:g.jsx(y6,{})})]}),g.jsxs("main",{className:"flex-1 relative w-full h-screen overflow-y-auto bg-slate-950 text-slate-100",children:[g.jsx(E6,{}),g.jsx(T6,{}),g.jsx(GR,{inventory:t})," ",g.jsx(m6,{})," ",g.jsx(j.Suspense,{fallback:g.jsx(az,{}),children:g.jsxs(UN,{children:[g.jsx(Fn,{path:"/",element:g.jsx(p6,{inventory:t,initialVisualSearch:s,onClearVisualSearch:()=>o(null),onMagicFix:void 0,onOpenGarage:()=>_("/garage")})}),g.jsx(Fn,{path:"/vehicle/:id",element:g.jsx(W6,{inventory:t})}),g.jsx(Fn,{path:"/trade-in",element:g.jsx(Q6,{})}),g.jsx(Fn,{path:"/appraisal",element:g.jsx(Y6,{})}),g.jsx(Fn,{path:"/compare",element:g.jsx(J6,{})}),g.jsx(Fn,{path:"/garage",element:g.jsx(Yx,{children:g.jsx(ez,{inventory:t,onExit:()=>_("/")})})}),g.jsx(Fn,{path:"/qualify",element:g.jsx(tz,{onExit:()=>_("/")})}),g.jsx(Fn,{path:"/privacidad",element:g.jsx(nz,{})}),g.jsx(Fn,{path:"/terminos",element:g.jsx(rz,{})}),g.jsx(Fn,{path:"/consultant",element:g.jsx(H6,{inventory:t})}),g.jsx(Fn,{path:"/blog",element:g.jsx(Z6,{})}),g.jsx(Fn,{path:"/lab",element:g.jsx(Yx,{children:g.jsx(G6,{onExit:()=>_("/"),onVisualSearch:M=>{o(M),_("/")}})})}),g.jsx(Fn,{path:"/login",element:g.jsx(K6,{})}),g.jsx(Fn,{path:"/admin-login",element:g.jsx(X6,{})}),g.jsx(Fn,{path:"/admin",element:g.jsx(lz,{children:g.jsx(q6,{inventory:t,onUpdate:IR,onAdd:xR,onDelete:bR,onInitializeDb:()=>SR(oz)})})}),g.jsx(Fn,{path:"/framework-lab",element:g.jsx(iz,{})}),g.jsx(Fn,{path:"*",element:g.jsx(sz,{})})]})}),g.jsx(v6,{})]})]})},Ii=({active:n,onClick:e,icon:t,label:r,isAction:s=!1,highlight:o=!1})=>{let l="w-full flex items-center gap-4 px-5 py-4 rounded-2xl font-bold transition-all duration-300 group relative overflow-hidden ";return n?l+="bg-[#00aed9] text-white shadow-xl shadow-[#00aed9]/20":o?l+="bg-gradient-to-r from-amber-500/20 to-orange-600/20 text-amber-500 border border-amber-500/30 hover:shadow-lg hover:shadow-orange-500/20":s?l+="bg-gradient-to-r from-[#00aed9]/10 to-[#00aed9]/5 text-[#00aed9] hover:bg-[#00aed9]/20":l+="text-slate-400 hover:bg-white/5 hover:text-white",g.jsxs("button",{onClick:e,className:l,children:[g.jsx("div",{className:`absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${n?"hidden":""}`}),g.jsx("span",{className:"relative z-10",children:t}),g.jsx("span",{className:"relative z-10",children:r}),n&&g.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white rounded-l-full"})]})},uz=({children:n})=>{const e=!!(window.Capacitor&&window.Capacitor.isNative),t=e?d2:u2;return j.useEffect(()=>{console.log(`[SmartRouter] Active mode: ${e?"HashRouter (Native/Capacitor)":"BrowserRouter (Web)"}`)},[e]),g.jsx(t,{children:n})},dz=()=>g.jsx(g6,{children:g.jsx(i6,{children:g.jsx(I6,{children:g.jsx(h6,{children:g.jsxs(uz,{children:[g.jsx(cz,{}),g.jsx(x6,{})]})})})})});qP();const hz=new zC({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}}),nA=document.getElementById("root");if(!nA)throw new Error("Could not find root element to mount to");const fz=gC.createRoot(nA);fz.render(g.jsx(Hn.StrictMode,{children:g.jsx(qC,{client:hz,children:g.jsx(dz,{})})}));export{NR as $,AR as A,E3 as B,CR as C,ZR as D,e6 as E,t6 as F,X9 as G,fP as H,Z9 as I,P3 as J,l_ as K,pu as L,S3 as M,K3 as N,wz as O,u3 as P,q9 as Q,Hn as R,rc as S,pc as T,FR as U,Mu as V,m_ as W,Vi as X,Ef as Y,UR as Z,zt as _,Y3 as a,h_ as a0,Pz as a1,jR as a2,Tf as a3,c3 as a4,wf as a5,wx as a6,V3 as a7,Vz as a8,q3 as a9,Dz as aA,W3 as aB,Oz as aC,n9 as aD,Lz as aE,MR as aF,jz as aG,a9 as aH,pz as aI,Az as aJ,Cz as aK,YR as aL,f3 as aa,dg as ab,LF as ac,VF as ad,WT as ae,Ju as af,Xn as ag,wk as ah,DR as ai,h3 as aj,C3 as ak,Q3 as al,si as am,Tz as an,Iz as ao,xz as ap,Ez as aq,z3 as ar,p3 as as,e9 as at,R3 as au,cr as av,LR as aw,M3 as ax,Nz as ay,Jx as az,c_ as b,Pe as c,u_ as d,VR as e,b6 as f,U9 as g,I3 as h,J3 as i,g as j,Mz as k,r6 as l,Fs as m,b3 as n,T3 as o,_3 as p,GI as q,j as r,m3 as s,d3 as t,$a as u,hP as v,gP as w,_z as x,yz as y,vz as z};
