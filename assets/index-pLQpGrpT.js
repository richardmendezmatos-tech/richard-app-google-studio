const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pwa-action-sheet.entry-CYDCpgPl.js","assets/vendor-react-BjLkUuqo.js","assets/vendor-firebase-Ba9lQfHy.js","assets/pwa-camera-modal.entry-7vJsq67K.js","assets/pwa-toast.entry-BvUnQCTB.js","assets/pwa-camera-modal-instance.entry-22WdNSuv.js","assets/pwa-camera.entry-5PzksEr5.js","assets/web-Cb26tupp.js","assets/web-tsxwyc3c.js","assets/AdminPanel-DcKFul1X.js","assets/trending-up-DBbTyemq.js","assets/lock-Dnyc9mZp.js","assets/eye-SwHEdBWl.js","assets/B2BBillingDashboard-C5CMw6MW.js","assets/activity-su0IxkW7.js","assets/KanbanBoard-CRqoJN8s.js","assets/mail-B0LfajHM.js","assets/server-TiNRz03B.js","assets/DigitalTwinDashboard-D9aVEXMF.js","assets/AIConsultant-LjTsjYEG.js","assets/AILabView-f4fbmZFL.js","assets/UserLogin-qhRapmuS.js","assets/VehicleDetail-BRovqlcR.js","assets/TradeInView-DZ7BkJXk.js","assets/arrow-left-t85Y-ePG.js","assets/AppraisalView-DB6FN_V4.js","assets/ComparisonView-B4sBsbhu.js","assets/AdminLogin-whyo8557.js","assets/eye-off-X7PgMirx.js","assets/scan-face-Bc47n7Nh.js","assets/BlogView-s8FfvaFW.js","assets/DigitalGarage-CSPWL_sh.js","assets/file-text-D8dH9eSG.js","assets/PreQualifyView-BKklxe-c.js","assets/PrivacyView-DUic90U1.js","assets/shield-CMCzcZOy.js","assets/TermsView-CnJlDhxR.js","assets/NotFound-BjckoYng.js","assets/FrameworkDashboard-DDyx09qf.js","assets/rocket-BO_LGdiT.js","assets/KanbanDemo-BWUpDcyE.js","assets/BetaOnboard-QDvz_pOT.js","assets/EarlyAdopterOnboard-B1oLcRyB.js"])))=>i.map(i=>d[i]);
import{d as Hh,f as i0,g as si,r as b,R as K,u as Ds,a as Vo,H as a0,B as o0,h as l0,i as te,N as Kh}from"./vendor-react-BjLkUuqo.js";import{r as jt,m as Is,C as Os,n as Ls,E as Bo,p as c0,F as zo,L as Wh,t as Us,v as u0,w as Jh,x as Yh,y as hc,z as qo,A as d0,B as Qh,D as h0,H as f0,I as p0,J as m0,K as g0,M as y0,N as v0,O as b0,c as Fs,f as tt,P as is,i as Xh,q as Zh,l as ef,o as Aa,Q as Ra,R as tf,d as Vs,e as Bs,S as w0,T as x0,U as _0,V as S0,W as sf,X as k0,Y as E0,Z as T0,$ as ri,G as rf,s as C0,a0 as kn,a1 as nf,a2 as A0,a3 as R0,a as af,a4 as En,a5 as of,a6 as j0,a7 as lf}from"./vendor-firebase-Ba9lQfHy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var Ai={exports:{}},Zs={};var fc;function P0(){if(fc)return Zs;fc=1;var e=Hh(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var d,h={},f=null,p=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(p=l.ref);for(d in l)r.call(l,d)&&!i.hasOwnProperty(d)&&(h[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)h[d]===void 0&&(h[d]=l[d]);return{$$typeof:t,type:o,key:f,ref:p,props:h,_owner:n.current}}return Zs.Fragment=s,Zs.jsx=a,Zs.jsxs=a,Zs}var pc;function I0(){return pc||(pc=1,Ai.exports=P0()),Ai.exports}var u=I0(),Hr={},mc;function O0(){if(mc)return Hr;mc=1;var e=i0();return Hr.createRoot=e.createRoot,Hr.hydrateRoot=e.hydrateRoot,Hr}var N0=O0();const M0=si(N0);var zs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$0={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},D0=class{#e=$0;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Ht=new D0;function L0(e){setTimeout(e,0)}var Zt=typeof window>"u"||"Deno"in globalThis;function Ce(){}function U0(e,t){return typeof e=="function"?e(t):e}function ja(e){return typeof e=="number"&&e>=0&&e!==1/0}function cf(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ct(e,t){return typeof e=="function"?e(t):e}function Ve(e,t){return typeof e=="function"?e(t):e}function gc(e,t){const{type:s="all",exact:r,fetchStatus:n,predicate:i,queryKey:a,stale:o}=e;if(a){if(r){if(t.queryHash!==Go(a,t.options))return!1}else if(!yr(t.queryKey,a))return!1}if(s!=="all"){const l=t.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||n&&n!==t.state.fetchStatus||i&&!i(t))}function yc(e,t){const{exact:s,status:r,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(es(t.options.mutationKey)!==es(i))return!1}else if(!yr(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function Go(e,t){return(t?.queryKeyHashFn||es)(e)}function es(e){return JSON.stringify(e,(t,s)=>Pa(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function yr(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>yr(e[s],t[s])):!1}var F0=Object.prototype.hasOwnProperty;function uf(e,t,s=0){if(e===t)return e;if(s>500)return t;const r=vc(e)&&vc(t);if(!r&&!(Pa(e)&&Pa(t)))return t;const i=(r?e:Object.keys(e)).length,a=r?t:Object.keys(t),o=a.length,l=r?new Array(o):{};let c=0;for(let d=0;d<o;d++){const h=r?d:a[d],f=e[h],p=t[h];if(f===p){l[h]=f,(r?d<i:F0.call(e,h))&&c++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){l[h]=p;continue}const m=uf(f,p,s+1);l[h]=m,m===f&&c++}return i===o&&c===i?e:l}function Tn(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function vc(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Pa(e){if(!bc(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!bc(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function bc(e){return Object.prototype.toString.call(e)==="[object Object]"}function V0(e){return new Promise(t=>{Ht.setTimeout(t,e)})}function Ia(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?uf(e,t):t}function B0(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function z0(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var Ho=Symbol();function df(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Ho?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Ko(e,t){return typeof e=="function"?e(...t):!!e}function q0(e,t,s){let r=!1,n;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(n??=t(),r||(r=!0,n.aborted?s():n.addEventListener("abort",s,{once:!0})),n)}),e}var G0=class extends zs{#e;#t;#s;constructor(){super(),this.#s=e=>{if(!Zt&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Wo=new G0;function Oa(){let e,t;const s=new Promise((n,i)=>{e=n,t=i});s.status="pending",s.catch(()=>{});function r(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{r({status:"fulfilled",value:n}),e(n)},s.reject=n=>{r({status:"rejected",reason:n}),t(n)},s}var H0=L0;function K0(){let e=[],t=0,s=o=>{o()},r=o=>{o()},n=H0;const i=o=>{t?e.push(o):n(()=>{s(o)})},a=()=>{const o=e;e=[],o.length&&n(()=>{r(()=>{o.forEach(l=>{s(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{n=o}}}var de=K0(),W0=class extends zs{#e=!0;#t;#s;constructor(){super(),this.#s=e=>{if(!Zt&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},Cn=new W0;function J0(e){return Math.min(1e3*2**e,3e4)}function hf(e){return(e??"online")==="online"?Cn.isOnline():!0}var Na=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function ff(e){let t=!1,s=0,r;const n=Oa(),i=()=>n.status!=="pending",a=g=>{if(!i()){const y=new Na(g);f(y),e.onCancel?.(y)}},o=()=>{t=!0},l=()=>{t=!1},c=()=>Wo.isFocused()&&(e.networkMode==="always"||Cn.isOnline())&&e.canRun(),d=()=>hf(e.networkMode)&&e.canRun(),h=g=>{i()||(r?.(),n.resolve(g))},f=g=>{i()||(r?.(),n.reject(g))},p=()=>new Promise(g=>{r=y=>{(i()||c())&&g(y)},e.onPause?.()}).then(()=>{r=void 0,i()||e.onContinue?.()}),m=()=>{if(i())return;let g;const y=s===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{if(i())return;const x=e.retry??(Zt?0:3),v=e.retryDelay??J0,S=typeof v=="function"?v(s,w):v,k=x===!0||typeof x=="number"&&s<x||typeof x=="function"&&x(s,w);if(t||!k){f(w);return}s++,e.onFail?.(s,w),V0(S).then(()=>c()?void 0:p()).then(()=>{t?f(w):m()})})};return{promise:n,status:()=>n.status,cancel:a,continue:()=>(r?.(),n),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),n)}}var pf=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ja(this.gcTime)&&(this.#e=Ht.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zt?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ht.clearTimeout(this.#e),this.#e=void 0)}},Y0=class extends pf{#e;#t;#s;#n;#r;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#s=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=xc(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=xc(this.options);t.data!==void 0&&(this.setState(wc(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,t){const s=Ia(this.state.data,e,this.options);return this.#i({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Ce).catch(Ce):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Ve(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ho||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ct(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!cf(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const o=this.observers.find(l=>l.options.queryFn);o&&this.setOptions(o.options)}const s=new AbortController,r=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},n=()=>{const o=df(this.options,t),c=(()=>{const d={client:this.#n,queryKey:this.queryKey,meta:this.meta};return r(d),d})();return this.#o=!1,this.options.persister?this.options.persister(o,c,this):o(c)},a=(()=>{const o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:n};return r(o),o})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#i({type:"fetch",meta:a.fetchOptions?.meta}),this.#r=ff({initialPromise:t?.initialPromise,fn:a.fetchFn,onCancel:o=>{o instanceof Na&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(o,l)=>{this.#i({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const o=await this.#r.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#s.config.onSuccess?.(o,this),this.#s.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof Na){if(o.silent)return this.#r.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#i({type:"error",error:o}),this.#s.config.onError?.(o,this),this.#s.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#i(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...mf(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,...wc(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":const n=e.error;return{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),de.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function mf(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hf(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function wc(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function xc(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Q0=class extends zs{constructor(e,t){super(),this.options=t,this.#e=e,this.#i=null,this.#o=Oa(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#s=void 0;#n=void 0;#r;#a;#o;#i;#m;#h;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),_c(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ma(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ma(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#x(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ve(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),t._defaulted&&!Tn(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Sc(this.#t,s,this.options,t)&&this.#d(),this.updateResult(),r&&(this.#t!==s||Ve(this.options.enabled,this.#t)!==Ve(t.enabled,this.#t)||Ct(this.options.staleTime,this.#t)!==Ct(t.staleTime,this.#t))&&this.#g();const n=this.#y();r&&(this.#t!==s||Ve(this.options.enabled,this.#t)!==Ve(t.enabled,this.#t)||n!==this.#l)&&this.#v(n)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(t,e);return Z0(this,s)&&(this.#n=s,this.#a=this.options,this.#r=this.#t.state),s}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),t?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,r))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(e){this.#_();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Ce)),t}#g(){this.#w();const e=Ct(this.options.staleTime,this.#t);if(Zt||this.#n.isStale||!ja(e))return;const s=cf(this.#n.dataUpdatedAt,e)+1;this.#c=Ht.setTimeout(()=>{this.#n.isStale||this.updateResult()},s)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#x(),this.#l=e,!(Zt||Ve(this.options.enabled,this.#t)===!1||!ja(this.#l)||this.#l===0)&&(this.#u=Ht.setInterval(()=>{(this.options.refetchIntervalInBackground||Wo.isFocused())&&this.#d()},this.#l))}#b(){this.#g(),this.#v(this.#y())}#w(){this.#c&&(Ht.clearTimeout(this.#c),this.#c=void 0)}#x(){this.#u&&(Ht.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const s=this.#t,r=this.options,n=this.#n,i=this.#r,a=this.#a,l=e!==s?e.state:this.#s,{state:c}=e;let d={...c},h=!1,f;if(t._optimisticResults){const _=this.hasListeners(),A=!_&&_c(e,t),E=_&&Sc(e,s,t,r);(A||E)&&(d={...d,...mf(c.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:g}=d;f=d.data;let y=!1;if(t.placeholderData!==void 0&&f===void 0&&g==="pending"){let _;n?.isPlaceholderData&&t.placeholderData===a?.placeholderData?(_=n.data,y=!0):_=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,_!==void 0&&(g="success",f=Ia(n?.data,_,t),h=!0)}if(t.select&&f!==void 0&&!y)if(n&&f===i?.data&&t.select===this.#m)f=this.#h;else try{this.#m=t.select,f=t.select(f),f=Ia(n?.data,f,t),this.#h=f,this.#i=null}catch(_){this.#i=_}this.#i&&(p=this.#i,f=this.#h,m=Date.now(),g="error");const w=d.fetchStatus==="fetching",x=g==="pending",v=g==="error",S=x&&w,k=f!==void 0,C={status:g,fetchStatus:d.fetchStatus,isPending:x,isSuccess:g==="success",isError:v,isInitialLoading:S,isLoading:S,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!x,isLoadingError:v&&!k,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:v&&k,isStale:Jo(e,t),refetch:this.refetch,promise:this.#o,isEnabled:Ve(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const _=C.data!==void 0,A=C.status==="error"&&!_,E=V=>{A?V.reject(C.error):_&&V.resolve(C.data)},j=()=>{const V=this.#o=C.promise=Oa();E(V)},M=this.#o;switch(M.status){case"pending":e.queryHash===s.queryHash&&E(M);break;case"fulfilled":(A||C.data!==M.value)&&j();break;case"rejected":(!A||C.error!==M.reason)&&j();break}}return C}updateResult(){const e=this.#n,t=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#f=this.#t),Tn(t,e))return;this.#n=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,n=typeof r=="function"?r():r;if(n==="all"||!n&&!this.#p.size)return!0;const i=new Set(n??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some(a=>{const o=a;return this.#n[o]!==e[o]&&i.has(o)})};this.#S({listeners:s()})}#_(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#s=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){de.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function X0(e,t){return Ve(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function _c(e,t){return X0(e,t)||e.state.data!==void 0&&Ma(e,t,t.refetchOnMount)}function Ma(e,t,s){if(Ve(t.enabled,e)!==!1&&Ct(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&Jo(e,t)}return!1}function Sc(e,t,s,r){return(e!==t||Ve(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Jo(e,s)}function Jo(e,t){return Ve(t.enabled,e)!==!1&&e.isStaleByTime(Ct(t.staleTime,e))}function Z0(e,t){return!Tn(e.getCurrentResult(),t)}function An(e){return{onFetch:(t,s)=>{const r=t.options,n=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let d=!1;const h=m=>{q0(m,()=>t.signal,()=>d=!0)},f=df(t.options,t.fetchOptions),p=async(m,g,y)=>{if(d)return Promise.reject();if(g==null&&m.pages.length)return Promise.resolve(m);const x=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:g,direction:y?"backward":"forward",meta:t.options.meta};return h(T),T})(),v=await f(x),{maxPages:S}=t.options,k=y?z0:B0;return{pages:k(m.pages,v,S),pageParams:k(m.pageParams,g,S)}};if(n&&i.length){const m=n==="backward",g=m?gf:$a,y={pages:i,pageParams:a},w=g(r,y);o=await p(y,w,m)}else{const m=e??i.length;do{const g=l===0?a[0]??r.initialPageParam:$a(r,o);if(l>0&&g==null)break;o=await p(o,g),l++}while(l<m)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=c}}}function $a(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function gf(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}function ev(e,t){return t?$a(e,t)!=null:!1}function tv(e,t){return!t||!e.getPreviousPageParam?!1:gf(e,t)!=null}var sv=class extends Q0{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:An()})}getOptimisticResult(e){return e.behavior=An(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:s}=e,r=super.createResult(e,t),{isFetching:n,isRefetching:i,isError:a,isRefetchError:o}=r,l=s.fetchMeta?.fetchMore?.direction,c=a&&l==="forward",d=n&&l==="forward",h=a&&l==="backward",f=n&&l==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:ev(t,s.data),hasPreviousPage:tv(t,s.data),isFetchNextPageError:c,isFetchingNextPage:d,isFetchPreviousPageError:h,isFetchingPreviousPage:f,isRefetchError:o&&!c&&!h,isRefetching:i&&!d&&!f}}},rv=class extends pf{#e;#t;#s;#n;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#s=e.mutationCache,this.#t=[],this.state=e.state||yf(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=ff({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(i,a)=>{this.#r({type:"failed",failureCount:i,error:a})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const r=this.state.status==="pending",n=!this.#n.canStart();try{if(r)t();else{this.#r({type:"pending",variables:e,isPaused:n}),await this.#s.config.onMutate?.(e,this,s);const a=await this.options.onMutate?.(e,s);a!==this.state.context&&this.#r({type:"pending",context:a,variables:e,isPaused:n})}const i=await this.#n.start();return await this.#s.config.onSuccess?.(i,e,this.state.context,this,s),await this.options.onSuccess?.(i,e,this.state.context,s),await this.#s.config.onSettled?.(i,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(i,null,e,this.state.context,s),this.#r({type:"success",data:i}),i}catch(i){try{await this.#s.config.onError?.(i,e,this.state.context,this,s)}catch(a){Promise.reject(a)}try{await this.options.onError?.(i,e,this.state.context,s)}catch(a){Promise.reject(a)}try{await this.#s.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,s)}catch(a){Promise.reject(a)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,s)}catch(a){Promise.reject(a)}throw this.#r({type:"error",error:i}),i}finally{this.#s.runNext(this)}}#r(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),de.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#s.notify({mutation:this,type:"updated",action:e})})}};function yf(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var nv=class extends zs{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(e,t,s){const r=new rv({client:e,mutationCache:this,mutationId:++this.#s,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){this.#e.add(e);const t=Kr(e);if(typeof t=="string"){const s=this.#t.get(t);s?s.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Kr(e);if(typeof t=="string"){const s=this.#t.get(t);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Kr(e);if(typeof t=="string"){const r=this.#t.get(t)?.find(n=>n.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=Kr(e);return typeof t=="string"?this.#t.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){de.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(s=>yc(t,s))}findAll(e={}){return this.getAll().filter(t=>yc(e,t))}notify(e){de.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return de.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ce))))}};function Kr(e){return e.options.scope?.id}var iv=class extends zs{#e;#t=void 0;#s;#n;constructor(t,s){super(),this.#e=t,this.setOptions(s),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const s=this.options;this.options=this.#e.defaultMutationOptions(t),Tn(this.options,s)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),s?.mutationKey&&this.options.mutationKey&&es(s.mutationKey)!==es(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#a()}mutate(t,s){return this.#n=s,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(t)}#r(){const t=this.#s?.state??yf();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){de.batch(()=>{if(this.#n&&this.hasListeners()){const s=this.#t.variables,r=this.#t.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#n.onSuccess?.(t.data,s,r,n)}catch(i){Promise.reject(i)}try{this.#n.onSettled?.(t.data,null,s,r,n)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#n.onError?.(t.error,s,r,n)}catch(i){Promise.reject(i)}try{this.#n.onSettled?.(void 0,t.error,s,r,n)}catch(i){Promise.reject(i)}}}this.listeners.forEach(s=>{s(this.#t)})})}},av=class extends zs{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){const r=t.queryKey,n=t.queryHash??Go(r,t);let i=this.get(n);return i||(i=new Y0({client:e,queryKey:r,queryHash:n,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){de.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>gc(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>gc(e,s)):t}notify(e){de.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){de.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){de.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ov=class{#e;#t;#s;#n;#r;#a;#o;#i;constructor(e={}){this.#e=e.queryCache||new av,this.#t=e.mutationCache||new nv,this.#s=e.defaultOptions||{},this.#n=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=Wo.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=Cn.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=this.#e.build(this,t),r=s.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Ct(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:s})=>{const r=s.data;return[t,r]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(r.queryHash)?.state.data,a=U0(t,i);if(a!==void 0)return this.#e.build(this,r).setData(a,{...s,manual:!0})}setQueriesData(e,t,s){return de.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;de.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=this.#e;return de.batch(()=>(s.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},r=de.batch(()=>this.#e.findAll(e).map(n=>n.cancel(s)));return Promise.all(r).then(Ce).catch(Ce)}invalidateQueries(e,t={}){return de.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},r=de.batch(()=>this.#e.findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,s);return s.throwOnError||(i=i.catch(Ce)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ce)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=this.#e.build(this,t);return s.isStaleByTime(Ct(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ce).catch(Ce)}fetchInfiniteQuery(e){return e.behavior=An(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ce).catch(Ce)}ensureInfiniteQueryData(e){return e.behavior=An(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Cn.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#n.set(es(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],s={};return t.forEach(r=>{yr(e,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(e,t){this.#r.set(es(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],s={};return t.forEach(r=>{yr(e,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Go(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ho&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},vf=b.createContext(void 0),Yo=e=>{const t=b.useContext(vf);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},lv=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(vf.Provider,{value:e,children:t})),bf=b.createContext(!1),cv=()=>b.useContext(bf);bf.Provider;function uv(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var dv=b.createContext(uv()),hv=()=>b.useContext(dv),fv=(e,t,s)=>{const r=s?.state.error&&typeof e.throwOnError=="function"?Ko(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(t.isReset()||(e.retryOnMount=!1))},pv=e=>{b.useEffect(()=>{e.clearReset()},[e])},mv=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(n&&e.data===void 0||Ko(s,[e.error,r])),gv=e=>{if(e.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>s(r(...n)):s(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},yv=(e,t)=>e.isLoading&&e.isFetching&&!t,vv=(e,t)=>e?.suspense&&t.isPending,kc=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function bv(e,t,s){const r=cv(),n=hv(),i=Yo(),a=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(a);const o=i.getQueryCache().get(a.queryHash);a._optimisticResults=r?"isRestoring":"optimistic",gv(a),fv(a,n,o),pv(n);const l=!i.getQueryCache().get(a.queryHash),[c]=b.useState(()=>new t(i,a)),d=c.getOptimisticResult(a),h=!r&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(f=>{const p=h?c.subscribe(de.batchCalls(f)):Ce;return c.updateResult(),p},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(a)},[a,c]),vv(a,d))throw kc(a,c,n);if(mv({result:d,errorResetBoundary:n,throwOnError:a.throwOnError,query:o,suspense:a.suspense}))throw d.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(a,d),a.experimental_prefetchInRender&&!Zt&&yv(d,r)&&(l?kc(a,c,n):o?.promise)?.catch(Ce).finally(()=>{c.updateResult()}),a.notifyOnChangeProps?d:c.trackResult(d)}function Ri(e,t){const s=Yo(),[r]=b.useState(()=>new iv(s,e));b.useEffect(()=>{r.setOptions(e)},[r,e]);const n=b.useSyncExternalStore(b.useCallback(a=>r.subscribe(de.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=b.useCallback((a,o)=>{r.mutate(a,o).catch(Ce)},[r]);if(n.error&&Ko(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}function wf(e,t){return bv(e,sv)}const wv="modulepreload",xv=function(e){return"/"+e},Ec={},q=function(t,s,r){let n=Promise.resolve();if(s&&s.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");n=l(s.map(c=>{if(c=xv(c),c in Ec)return;Ec[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":wv,d||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),d)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};var _v=(function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},e(t,s)};return function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(t,s);function r(){this.constructor=t}t.prototype=s===null?Object.create(s):(r.prototype=s.prototype,new r)}})(),xf=function(e,t,s,r){function n(i){return i instanceof s?i:new s((function(a){a(i)}))}return new(s||(s=Promise))((function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function l(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((r=r.apply(e,t||[])).next())}))},_f=function(e,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(s=0)),s;)try{if(r=1,n&&(i=c[0]&2?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(d){c=[6,d],n=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Tc=function(e,t,s){if(s||arguments.length===2)for(var r=0,n=t.length,i;r<n;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Sv="ionicpwaelements",pn,Sf,Oe=!1,Da=!1,pt=function(e,t){return function(){}},kv=function(e,t){return function(){}},Ev="{visibility:hidden}.hydrated{visibility:inherit}",Cc={},Tv="http://www.w3.org/2000/svg",Cv="http://www.w3.org/1999/xhtml",Av=function(e){return e!=null},Qo=function(e){return e=typeof e,e==="object"||e==="function"};function kf(e){var t,s,r;return(r=(s=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||s===void 0?void 0:s.getAttribute("content"))!==null&&r!==void 0?r:void 0}var Rv=function(e,t){for(var s=[],r=2;r<arguments.length;r++)s[r-2]=arguments[r];var n=null,i=!1,a=!1,o=[],l=function(h){for(var f=0;f<h.length;f++)n=h[f],Array.isArray(n)?l(n):n!=null&&typeof n!="boolean"&&((i=typeof e!="function"&&!Qo(n))&&(n=String(n)),i&&a?o[o.length-1].$text$+=n:o.push(i?La(null,n):n),a=i)};if(l(s),t){var c=t.className||t.class;c&&(t.class=typeof c!="object"?c:Object.keys(c).filter((function(h){return c[h]})).join(" "))}var d=La(e,null);return d.$attrs$=t,o.length>0&&(d.$children$=o),d},La=function(e,t){var s={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return s.$attrs$=null,s},jv={},Pv=function(e){return e&&e.$tag$===jv},Iv=function(e,t){return e!=null&&!Qo(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e},Ov=function(e){return Nt(e).$hostElement$},lN=function(e,t,s){var r=Ov(e);return{emit:function(n){return Ef(r,t,{bubbles:!0,composed:!0,cancelable:!0,detail:n})}}},Ef=function(e,t,s){var r=me.ce(t,s);return e.dispatchEvent(r),r},Ac=new WeakMap,Nv=function(e,t,s){var r=Rn.get(e);rb&&s?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,Rn.set(e,r)},Mv=function(e,t,s,r){var n,i=Tf(t),a=Rn.get(i);if(e=e.nodeType===11?e:Ze,a)if(typeof a=="string"){e=e.head||e;var o=Ac.get(e),l=void 0;if(o||Ac.set(e,o=new Set),!o.has(i)){{l=Ze.createElement("style"),l.innerHTML=a;var c=(n=me.$nonce$)!==null&&n!==void 0?n:kf(Ze);c!=null&&l.setAttribute("nonce",c),e.insertBefore(l,e.querySelector("link"))}o&&o.add(i)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=Tc(Tc([],e.adoptedStyleSheets,!0),[a],!1));return i},$v=function(e){var t=e.$cmpMeta$,s=e.$hostElement$,r=t.$flags$,n=pt("attachStyles",t.$tagName$),i=Mv(s.shadowRoot?s.shadowRoot:s.getRootNode(),t);r&10&&(s["s-sc"]=i,s.classList.add(i+"-h")),n()},Tf=function(e,t){return"sc-"+e.$tagName$},Rc=function(e,t,s,r,n,i){if(s!==r){var a=Pc(e,t),o=t.toLowerCase();if(t==="class"){var l=e.classList,c=jc(s),d=jc(r);l.remove.apply(l,c.filter((function(m){return m&&!d.includes(m)}))),l.add.apply(l,d.filter((function(m){return m&&!c.includes(m)})))}else if(t==="style"){for(var h in s)(!r||r[h]==null)&&(h.includes("-")?e.style.removeProperty(h):e.style[h]="");for(var h in r)(!s||r[h]!==s[h])&&(h.includes("-")?e.style.setProperty(h,r[h]):e.style[h]=r[h])}else if(t==="ref")r&&r(e);else if(!a&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):Pc(ii,o)?t=o.slice(2):t=o[2]+t.slice(3),s&&me.rel(e,t,s,!1),r&&me.ael(e,t,r,!1);else{var f=Qo(r);if((a||f&&r!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{var p=r??"";t==="list"?a=!1:(s==null||e[t]!=p)&&(e[t]=p)}}catch{}r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&e.removeAttribute(t):(!a||i&4||n)&&!f&&(r=r===!0?"":r,e.setAttribute(t,r))}}},Dv=/\s/,jc=function(e){return e?e.split(Dv):[]},Cf=function(e,t,s,r){var n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||Cc,a=t.$attrs$||Cc;for(r in i)r in a||Rc(n,r,i[r],void 0,s,t.$flags$);for(r in a)Rc(n,r,i[r],a[r],s,t.$flags$)},Xo=function(e,t,s,r){var n=t.$children$[s],i=0,a,o;if(n.$text$!==null)a=n.$elm$=Ze.createTextNode(n.$text$);else{if(Oe||(Oe=n.$tag$==="svg"),a=n.$elm$=Ze.createElementNS(Oe?Tv:Cv,n.$tag$),Oe&&n.$tag$==="foreignObject"&&(Oe=!1),Cf(null,n,Oe),Av(pn)&&a["s-si"]!==pn&&a.classList.add(a["s-si"]=pn),n.$children$)for(i=0;i<n.$children$.length;++i)o=Xo(e,n,i),o&&a.appendChild(o);n.$tag$==="svg"?Oe=!1:a.tagName==="foreignObject"&&(Oe=!0)}return a},Af=function(e,t,s,r,n,i){var a=e,o;for(a.shadowRoot&&a.tagName===Sf&&(a=a.shadowRoot);n<=i;++n)r[n]&&(o=Xo(null,s,n),o&&(r[n].$elm$=o,a.insertBefore(o,t)))},Rf=function(e,t,s){for(var r=t;r<=s;++r){var n=e[r];if(n){var i=n.$elm$;jf(n),i&&i.remove()}}},Lv=function(e,t,s,r){for(var n=0,i=0,a=t.length-1,o=t[0],l=t[a],c=r.length-1,d=r[0],h=r[c],f;n<=a&&i<=c;)o==null?o=t[++n]:l==null?l=t[--a]:d==null?d=r[++i]:h==null?h=r[--c]:Wr(o,d)?(nr(o,d),o=t[++n],d=r[++i]):Wr(l,h)?(nr(l,h),l=t[--a],h=r[--c]):Wr(o,h)?(nr(o,h),e.insertBefore(o.$elm$,l.$elm$.nextSibling),o=t[++n],h=r[--c]):Wr(l,d)?(nr(l,d),e.insertBefore(l.$elm$,o.$elm$),l=t[--a],d=r[++i]):(f=Xo(t&&t[i],s,i),d=r[++i],f&&o.$elm$.parentNode.insertBefore(f,o.$elm$));n>a?Af(e,r[c+1]==null?null:r[c+1].$elm$,s,r,i,c):i>c&&Rf(t,n,a)},Wr=function(e,t){return e.$tag$===t.$tag$},nr=function(e,t){var s=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,i=t.$tag$,a=t.$text$;a===null?(Oe=i==="svg"?!0:i==="foreignObject"?!1:Oe,Cf(e,t,Oe),r!==null&&n!==null?Lv(s,r,t,n):n!==null?(e.$text$!==null&&(s.textContent=""),Af(s,null,t,n,0,n.length-1)):r!==null&&Rf(r,0,r.length-1),Oe&&i==="svg"&&(Oe=!1)):e.$text$!==a&&(s.data=a)},jf=function(e){e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(jf)},Uv=function(e,t){var s=e.$hostElement$,r=e.$vnode$||La(null,null),n=Pv(t)?t:Rv(null,null,t);Sf=s.tagName,n.$tag$=null,n.$flags$|=4,e.$vnode$=n,n.$elm$=r.$elm$=s.shadowRoot||s,pn=s["s-sc"],nr(r,n)},Pf=function(e,t){t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((function(s){return e.$onRenderResolve$=s})))},ni=function(e,t){if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}Pf(e,e.$ancestorComponent$);var s=function(){return Fv(e,t)};return ib(s)},Fv=function(e,t){var s=pt("scheduleUpdate",e.$cmpMeta$.$tagName$),r=e.$lazyInstance$,n;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((function(i){var a=i[0],o=i[1];return Zo(r,a,o)})),e.$queuedListeners$=void 0)),s(),Vv(n,(function(){return zv(e,r,t)}))},Vv=function(e,t){return Bv(e)?e.then(t):t()},Bv=function(e){return e instanceof Promise||e&&e.then&&typeof e.then=="function"},zv=function(e,t,s){return xf(void 0,void 0,void 0,(function(){var r,n,i,a,o,l,c;return _f(this,(function(d){return n=e.$hostElement$,i=pt("update",e.$cmpMeta$.$tagName$),a=n["s-rc"],s&&$v(e),o=pt("render",e.$cmpMeta$.$tagName$),qv(e,t),a&&(a.map((function(h){return h()})),n["s-rc"]=void 0),o(),i(),l=(r=n["s-p"])!==null&&r!==void 0?r:[],c=function(){return Gv(e)},l.length===0?c():(Promise.all(l).then(c),e.$flags$|=4,l.length=0),[2]}))}))},qv=function(e,t,s){try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,Uv(e,t)}catch(r){Qe(r,e.$hostElement$)}return null},Gv=function(e){e.$cmpMeta$.$tagName$;var t=e.$hostElement$,s=pt(),r=e.$lazyInstance$,n=e.$ancestorComponent$;e.$flags$&64?s():(e.$flags$|=64,Of(t),Zo(r,"componentDidLoad"),s(),e.$onReadyResolve$(t),n||If()),e.$onInstanceResolve$(t),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&tl((function(){return ni(e,!1)})),e.$flags$&=-517},cN=function(e){{var t=Nt(e),s=t.$hostElement$.isConnected;return s&&(t.$flags$&18)===2&&ni(t,!1),s}},If=function(e){Of(Ze.documentElement),tl((function(){return Ef(ii,"appload",{detail:{namespace:Sv}})}))},Zo=function(e,t,s){if(e&&e[t])try{return e[t](s)}catch(r){Qe(r)}},Of=function(e){return e.classList.add("hydrated")},Hv=function(e,t){return Nt(e).$instanceValues$.get(t)},Kv=function(e,t,s,r){var n=Nt(e),i=n.$instanceValues$.get(t),a=n.$flags$,o=n.$lazyInstance$;s=Iv(s,r.$members$[t][0]);var l=Number.isNaN(i)&&Number.isNaN(s),c=s!==i&&!l;(!(a&8)||i===void 0)&&c&&(n.$instanceValues$.set(t,s),o&&(a&18)===2&&ni(n,!1))},Nf=function(e,t,s){if(t.$members$){var r=Object.entries(t.$members$),n=e.prototype;if(r.map((function(a){var o=a[0],l=a[1][0];l&31||s&2&&l&32?Object.defineProperty(n,o,{get:function(){return Hv(this,o)},set:function(c){Kv(this,o,c,t)},configurable:!0,enumerable:!0}):s&1&&l&64&&Object.defineProperty(n,o,{value:function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var h=Nt(this);return h.$onInstancePromise$.then((function(){var f;return(f=h.$lazyInstance$)[o].apply(f,c)}))}})})),s&1){var i=new Map;n.attributeChangedCallback=function(a,o,l){var c=this;me.jmp((function(){var d=i.get(a);if(c.hasOwnProperty(d))l=c[d],delete c[d];else if(n.hasOwnProperty(d)&&typeof c[d]=="number"&&c[d]==l)return;c[d]=l===null&&typeof c[d]=="boolean"?!1:l}))},e.observedAttributes=r.filter((function(a){a[0];var o=a[1];return o[0]&15})).map((function(a){var o=a[0],l=a[1],c=l[1]||o;return i.set(c,o),c}))}}return e},Wv=function(e,t,s,r,n){return xf(void 0,void 0,void 0,(function(){var i,a,o,l,c,d,h;return _f(this,(function(f){switch(f.label){case 0:return(t.$flags$&32)!==0?[3,3]:(t.$flags$|=32,n=sb(s),n.then?(i=kv(),[4,n]):[3,2]);case 1:n=f.sent(),i(),f.label=2;case 2:n.isProxied||(Nf(n,s,2),n.isProxied=!0),a=pt("createInstance",s.$tagName$),t.$flags$|=8;try{new n(t)}catch(p){Qe(p)}t.$flags$&=-9,a(),n.style&&(o=n.style,l=Tf(s),Rn.has(l)||(c=pt("registerStyles",s.$tagName$),Nv(l,o,!!(s.$flags$&1)),c())),f.label=3;case 3:return d=t.$ancestorComponent$,h=function(){return ni(t,!0)},d&&d["s-rc"]?d["s-rc"].push(h):h(),[2]}}))}))},Jv=function(e){if((me.$flags$&1)===0){var t=Nt(e),s=t.$cmpMeta$,r=pt("connectedCallback",s.$tagName$);if(t.$flags$&1)Mf(e,t,s.$listeners$);else{t.$flags$|=1;for(var n=e;n=n.parentNode||n.host;)if(n["s-p"]){Pf(t,t.$ancestorComponent$=n);break}s.$members$&&Object.entries(s.$members$).map((function(i){var a=i[0],o=i[1][0];if(o&31&&e.hasOwnProperty(a)){var l=e[a];delete e[a],e[a]=l}})),Wv(e,t,s)}r()}},Yv=function(e){if((me.$flags$&1)===0){var t=Nt(e),s=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$.map((function(r){return r()})),t.$rmListeners$=void 0),Zo(s,"disconnectedCallback")}},Qv=function(e,t){t===void 0&&(t={});var s,r=pt(),n=[],i=t.exclude||[],a=ii.customElements,o=Ze.head,l=o.querySelector("meta[charset]"),c=Ze.createElement("style"),d=[],h,f=!0;Object.assign(me,t),me.$resourcesUrl$=new URL(t.resourcesUrl||"./",Ze.baseURI).href,e.map((function(m){m[1].map((function(g){var y={$flags$:g[0],$tagName$:g[1],$members$:g[2],$listeners$:g[3]};y.$members$=g[2],y.$listeners$=g[3];var w=y.$tagName$,x=(function(v){_v(S,v);function S(k){var T=v.call(this,k)||this;return k=T,tb(k,y),y.$flags$&1&&k.attachShadow({mode:"open"}),T}return S.prototype.connectedCallback=function(){var k=this;h&&(clearTimeout(h),h=null),f?d.push(this):me.jmp((function(){return Jv(k)}))},S.prototype.disconnectedCallback=function(){var k=this;me.jmp((function(){return Yv(k)}))},S.prototype.componentOnReady=function(){return Nt(this).$onReadyPromise$},S})(HTMLElement);y.$lazyBundleId$=m[0],!i.includes(w)&&!a.get(w)&&(n.push(w),a.define(w,Nf(x,y,1)))}))}));{c.innerHTML=n+Ev,c.setAttribute("data-styles","");var p=(s=me.$nonce$)!==null&&s!==void 0?s:kf(Ze);p!=null&&c.setAttribute("nonce",p),o.insertBefore(c,l?l.nextSibling:o.firstChild)}f=!1,d.length?d.map((function(m){return m.connectedCallback()})):me.jmp((function(){return h=setTimeout(If,30)})),r()},Mf=function(e,t,s,r){s&&s.map((function(n){var i=n[0],a=n[1],o=n[2],l=Zv(e,i),c=Xv(t,o),d=eb(i);me.ael(l,a,c,d),(t.$rmListeners$=t.$rmListeners$||[]).push((function(){return me.rel(l,a,c,d)}))}))},Xv=function(e,t){return function(s){try{e.$flags$&256?e.$lazyInstance$[t](s):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,s])}catch(r){Qe(r)}}},Zv=function(e,t){return t&16?Ze.body:e},eb=function(e){return(e&2)!==0},el=new WeakMap,Nt=function(e){return el.get(e)},uN=function(e,t){return el.set(t.$lazyInstance$=e,t)},tb=function(e,t){var s={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return s.$onInstancePromise$=new Promise((function(r){return s.$onInstanceResolve$=r})),s.$onReadyPromise$=new Promise((function(r){return s.$onReadyResolve$=r})),e["s-p"]=[],e["s-rc"]=[],Mf(e,s,t.$listeners$),el.set(e,s)},Pc=function(e,t){return t in e},Qe=function(e,t){return(0,console.error)(e,t)},ji=new Map,sb=function(e,t,s){var r=e.$tagName$.replace(/-/g,"_"),n=e.$lazyBundleId$,i=ji.get(n);if(i)return i[r];{var a=function(o){return ji.set(n,o),o[r]};switch(n){case"pwa-action-sheet":return q(()=>import("./pwa-action-sheet.entry-CYDCpgPl.js"),__vite__mapDeps([0,1,2])).then(a,Qe);case"pwa-camera-modal":return q(()=>import("./pwa-camera-modal.entry-7vJsq67K.js"),__vite__mapDeps([3,1,2])).then(a,Qe);case"pwa-toast":return q(()=>import("./pwa-toast.entry-BvUnQCTB.js"),__vite__mapDeps([4,1,2])).then(a,Qe);case"pwa-camera-modal-instance":return q(()=>import("./pwa-camera-modal-instance.entry-22WdNSuv.js"),__vite__mapDeps([5,1,2])).then(a,Qe);case"pwa-camera":return q(()=>import("./pwa-camera.entry-5PzksEr5.js"),__vite__mapDeps([6,1,2])).then(a,Qe)}}return q(()=>import("./".concat(n,".entry.js").concat("")),[]).then((function(o){return ji.set(n,o),o[r]}),Qe)},Rn=new Map,ii=typeof window<"u"?window:{},Ze=ii.document||{head:{}},me={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,s,r){return e.addEventListener(t,s,r)},rel:function(e,t,s,r){return e.removeEventListener(t,s,r)},ce:function(e,t){return new CustomEvent(e,t)}},$f=function(e){return Promise.resolve(e)},rb=(function(){try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Ic=[],Df=[],nb=function(e,t){return function(s){e.push(s),Da||(Da=!0,me.$flags$&4?tl(Ua):me.raf(Ua))}},Oc=function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(s){Qe(s)}e.length=0},Ua=function(){Oc(Ic),Oc(Df),(Da=Ic.length>0)&&me.raf(Ua)},tl=function(e){return $f().then(e)},ib=nb(Df),ab=function(){return $f()},ob=function(e,t){return typeof window>"u"?Promise.resolve():ab().then((function(){return Qv([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],t)}))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();var Pi,Nc;function lb(){if(Nc)return Pi;Nc=1;var e=typeof Element<"u",t=typeof Map=="function",s=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function n(i,a){if(i===a)return!0;if(i&&a&&typeof i=="object"&&typeof a=="object"){if(i.constructor!==a.constructor)return!1;var o,l,c;if(Array.isArray(i)){if(o=i.length,o!=a.length)return!1;for(l=o;l--!==0;)if(!n(i[l],a[l]))return!1;return!0}var d;if(t&&i instanceof Map&&a instanceof Map){if(i.size!==a.size)return!1;for(d=i.entries();!(l=d.next()).done;)if(!a.has(l.value[0]))return!1;for(d=i.entries();!(l=d.next()).done;)if(!n(l.value[1],a.get(l.value[0])))return!1;return!0}if(s&&i instanceof Set&&a instanceof Set){if(i.size!==a.size)return!1;for(d=i.entries();!(l=d.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(a)){if(o=i.length,o!=a.length)return!1;for(l=o;l--!==0;)if(i[l]!==a[l])return!1;return!0}if(i.constructor===RegExp)return i.source===a.source&&i.flags===a.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof a.valueOf=="function")return i.valueOf()===a.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof a.toString=="function")return i.toString()===a.toString();if(c=Object.keys(i),o=c.length,o!==Object.keys(a).length)return!1;for(l=o;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(e&&i instanceof Element)return!1;for(l=o;l--!==0;)if(!((c[l]==="_owner"||c[l]==="__v"||c[l]==="__o")&&i.$$typeof)&&!n(i[c[l]],a[c[l]]))return!1;return!0}return i!==i&&a!==a}return Pi=function(a,o){try{return n(a,o)}catch(l){if((l.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw l}},Pi}var cb=lb();const ub=si(cb);var Ii,Mc;function db(){if(Mc)return Ii;Mc=1;var e=function(t,s,r,n,i,a,o,l){if(!t){var c;if(s===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,i,a,o,l],h=0;c=new Error(s.replace(/%s/g,function(){return d[h++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};return Ii=e,Ii}var hb=db();const $c=si(hb);var Oi,Dc;function fb(){return Dc||(Dc=1,Oi=function(t,s,r,n){var i=r?r.call(n,t,s):void 0;if(i!==void 0)return!!i;if(t===s)return!0;if(typeof t!="object"||!t||typeof s!="object"||!s)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(s),c=0;c<a.length;c++){var d=a[c];if(!l(d))return!1;var h=t[d],f=s[d];if(i=r?r.call(n,h,f,d):void 0,i===!1||i===void 0&&h!==f)return!1}return!0}),Oi}var pb=fb();const mb=si(pb);var Lf=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(Lf||{}),Ni={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Lc=Object.values(Lf),sl={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},gb=Object.entries(sl).reduce((e,[t,s])=>(e[s]=t,e),{}),et="data-rh",Ts={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Cs=(e,t)=>{for(let s=e.length-1;s>=0;s-=1){const r=e[s];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},yb=e=>{let t=Cs(e,"title");const s=Cs(e,Ts.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),s&&t)return s.replace(/%s/g,()=>t);const r=Cs(e,Ts.DEFAULT_TITLE);return t||r||void 0},vb=e=>Cs(e,Ts.ON_CHANGE_CLIENT_STATE)||(()=>{}),Mi=(e,t)=>t.filter(s=>typeof s[e]<"u").map(s=>s[e]).reduce((s,r)=>({...s,...r}),{}),bb=(e,t)=>t.filter(s=>typeof s.base<"u").map(s=>s.base).reverse().reduce((s,r)=>{if(!s.length){const n=Object.keys(r);for(let i=0;i<n.length;i+=1){const o=n[i].toLowerCase();if(e.indexOf(o)!==-1&&r[o])return s.concat(r)}}return s},[]),wb=e=>console&&typeof console.warn=="function"&&console.warn(e),er=(e,t,s)=>{const r={};return s.filter(n=>Array.isArray(n[e])?!0:(typeof n[e]<"u"&&wb(`Helmet: ${e} should be of type "Array". Instead found type "${typeof n[e]}"`),!1)).map(n=>n[e]).reverse().reduce((n,i)=>{const a={};i.filter(l=>{let c;const d=Object.keys(l);for(let f=0;f<d.length;f+=1){const p=d[f],m=p.toLowerCase();t.indexOf(m)!==-1&&!(c==="rel"&&l[c].toLowerCase()==="canonical")&&!(m==="rel"&&l[m].toLowerCase()==="stylesheet")&&(c=m),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(c=p)}if(!c||!l[c])return!1;const h=l[c].toLowerCase();return r[c]||(r[c]={}),a[c]||(a[c]={}),r[c][h]?!1:(a[c][h]=!0,!0)}).reverse().forEach(l=>n.push(l));const o=Object.keys(a);for(let l=0;l<o.length;l+=1){const c=o[l],d={...r[c],...a[c]};r[c]=d}return n},[]).reverse()},xb=(e,t)=>{if(Array.isArray(e)&&e.length){for(let s=0;s<e.length;s+=1)if(e[s][t])return!0}return!1},_b=e=>({baseTag:bb(["href"],e),bodyAttributes:Mi("bodyAttributes",e),defer:Cs(e,Ts.DEFER),encode:Cs(e,Ts.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Mi("htmlAttributes",e),linkTags:er("link",["rel","href"],e),metaTags:er("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:er("noscript",["innerHTML"],e),onChangeClientState:vb(e),scriptTags:er("script",["src","innerHTML"],e),styleTags:er("style",["cssText"],e),title:yb(e),titleAttributes:Mi("titleAttributes",e),prioritizeSeoTags:xb(e,Ts.PRIORITIZE_SEO_TAGS)}),Uf=e=>Array.isArray(e)?e.join(""):e,Sb=(e,t)=>{const s=Object.keys(e);for(let r=0;r<s.length;r+=1)if(t[s[r]]&&t[s[r]].includes(e[s[r]]))return!0;return!1},$i=(e,t)=>Array.isArray(e)?e.reduce((s,r)=>(Sb(r,t)?s.priority.push(r):s.default.push(r),s),{priority:[],default:[]}):{default:e,priority:[]},Uc=(e,t)=>({...e,[t]:void 0}),kb=["noscript","script","style"],Fa=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Ff=e=>Object.keys(e).reduce((t,s)=>{const r=typeof e[s]<"u"?`${s}="${e[s]}"`:`${s}`;return t?`${t} ${r}`:r},""),Eb=(e,t,s,r)=>{const n=Ff(s),i=Uf(t);return n?`<${e} ${et}="true" ${n}>${Fa(i,r)}</${e}>`:`<${e} ${et}="true">${Fa(i,r)}</${e}>`},Tb=(e,t,s=!0)=>t.reduce((r,n)=>{const i=n,a=Object.keys(i).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,d)=>{const h=typeof i[d]>"u"?d:`${d}="${Fa(i[d],s)}"`;return c?`${c} ${h}`:h},""),o=i.innerHTML||i.cssText||"",l=kb.indexOf(e)===-1;return`${r}<${e} ${et}="true" ${a}${l?"/>":`>${o}</${e}>`}`},""),Vf=(e,t={})=>Object.keys(e).reduce((s,r)=>{const n=sl[r];return s[n||r]=e[r],s},t),Cb=(e,t,s)=>{const r={key:t,[et]:!0},n=Vf(s,r);return[K.createElement("title",n,t)]},mn=(e,t)=>t.map((s,r)=>{const n={key:r,[et]:!0};return Object.keys(s).forEach(i=>{const o=sl[i]||i;if(o==="innerHTML"||o==="cssText"){const l=s.innerHTML||s.cssText;n.dangerouslySetInnerHTML={__html:l}}else n[o]=s[i]}),K.createElement(e,n)}),Fe=(e,t,s=!0)=>{switch(e){case"title":return{toComponent:()=>Cb(e,t.title,t.titleAttributes),toString:()=>Eb(e,t.title,t.titleAttributes,s)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Vf(t),toString:()=>Ff(t)};default:return{toComponent:()=>mn(e,t),toString:()=>Tb(e,t,s)}}},Ab=({metaTags:e,linkTags:t,scriptTags:s,encode:r})=>{const n=$i(e,Ni.meta),i=$i(t,Ni.link),a=$i(s,Ni.script);return{priorityMethods:{toComponent:()=>[...mn("meta",n.priority),...mn("link",i.priority),...mn("script",a.priority)],toString:()=>`${Fe("meta",n.priority,r)} ${Fe("link",i.priority,r)} ${Fe("script",a.priority,r)}`},metaTags:n.default,linkTags:i.default,scriptTags:a.default}},Rb=e=>{const{baseTag:t,bodyAttributes:s,encode:r=!0,htmlAttributes:n,noscriptTags:i,styleTags:a,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:h,scriptTags:f}=e,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:d,metaTags:h,scriptTags:f}=Ab(e)),{priority:p,base:Fe("base",t,r),bodyAttributes:Fe("bodyAttributes",s,r),htmlAttributes:Fe("htmlAttributes",n,r),link:Fe("link",d,r),meta:Fe("meta",h,r),noscript:Fe("noscript",i,r),script:Fe("script",f,r),style:Fe("style",a,r),title:Fe("title",{title:o,titleAttributes:l},r)}},Va=Rb,Jr=[],Bf=!!(typeof window<"u"&&window.document&&window.document.createElement),Ba=class{instances=[];canUseDOM=Bf;context;value={setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Jr:this.instances,add:e=>{(this.canUseDOM?Jr:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Jr:this.instances).indexOf(e);(this.canUseDOM?Jr:this.instances).splice(t,1)}}};constructor(e,t){this.context=e,this.canUseDOM=t||!1,t||(e.helmet=Va({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},jb={},zf=K.createContext(jb),qf=class Gf extends b.Component{static canUseDOM=Bf;helmetData;constructor(t){super(t),this.helmetData=new Ba(this.props.context||{},Gf.canUseDOM)}render(){return K.createElement(zf.Provider,{value:this.helmetData.value},this.props.children)}},ls=(e,t)=>{const s=document.head||document.querySelector("head"),r=s.querySelectorAll(`${e}[${et}]`),n=[].slice.call(r),i=[];let a;return t&&t.length&&t.forEach(o=>{const l=document.createElement(e);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c))if(c==="innerHTML")l.innerHTML=o.innerHTML;else if(c==="cssText")l.styleSheet?l.styleSheet.cssText=o.cssText:l.appendChild(document.createTextNode(o.cssText));else{const d=c,h=typeof o[d]>"u"?"":o[d];l.setAttribute(c,h)}l.setAttribute(et,"true"),n.some((c,d)=>(a=d,l.isEqualNode(c)))?n.splice(a,1):i.push(l)}),n.forEach(o=>o.parentNode?.removeChild(o)),i.forEach(o=>s.appendChild(o)),{oldTags:n,newTags:i}},za=(e,t)=>{const s=document.getElementsByTagName(e)[0];if(!s)return;const r=s.getAttribute(et),n=r?r.split(","):[],i=[...n],a=Object.keys(t);for(const o of a){const l=t[o]||"";s.getAttribute(o)!==l&&s.setAttribute(o,l),n.indexOf(o)===-1&&n.push(o);const c=i.indexOf(o);c!==-1&&i.splice(c,1)}for(let o=i.length-1;o>=0;o-=1)s.removeAttribute(i[o]);n.length===i.length?s.removeAttribute(et):s.getAttribute(et)!==a.join(",")&&s.setAttribute(et,a.join(","))},Pb=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=Uf(e)),za("title",t)},Fc=(e,t)=>{const{baseTag:s,bodyAttributes:r,htmlAttributes:n,linkTags:i,metaTags:a,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:d,title:h,titleAttributes:f}=e;za("body",r),za("html",n),Pb(h,f);const p={baseTag:ls("base",s),linkTags:ls("link",i),metaTags:ls("meta",a),noscriptTags:ls("noscript",o),scriptTags:ls("script",c),styleTags:ls("style",d)},m={},g={};Object.keys(p).forEach(y=>{const{newTags:w,oldTags:x}=p[y];w.length&&(m[y]=w),x.length&&(g[y]=p[y].oldTags)}),t&&t(),l(e,m,g)},tr=null,Ib=e=>{tr&&cancelAnimationFrame(tr),e.defer?tr=requestAnimationFrame(()=>{Fc(e,()=>{tr=null})}):(Fc(e),tr=null)},Ob=Ib,Vc=class extends b.Component{rendered=!1;shouldComponentUpdate(e){return!mb(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let s=null;const r=_b(e.get().map(n=>{const i={...n.props};return delete i.context,i}));qf.canUseDOM?Ob(r):Va&&(s=Va(r)),t(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},dN=class extends b.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(e){return!ub(Uc(this.props,"helmetData"),Uc(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,s,r){return{...t,[e.type]:[...t[e.type]||[],{...s,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,s,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...s}};case"body":return{...t,bodyAttributes:{...s}};case"html":return{...t,htmlAttributes:{...s}};default:return{...t,[e.type]:{...s}}}}mapArrayTypeChildrenToProps(e,t){let s={...t};return Object.keys(e).forEach(r=>{s={...s,[r]:e[r]}}),s}warnOnInvalidChildren(e,t){return $c(Lc.some(s=>e.type===s),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Lc.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),$c(!t||typeof t=="string"||Array.isArray(t)&&!t.some(s=>typeof s!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let s={};return K.Children.forEach(e,r=>{if(!r||!r.props)return;const{children:n,...i}=r.props,a=Object.keys(i).reduce((l,c)=>(l[gb[c]||c]=i[c],l),{});let{type:o}=r;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(r,n),o){case"Symbol(react.fragment)":t=this.mapChildrenToProps(n,t);break;case"link":case"meta":case"noscript":case"script":case"style":s=this.flattenArrayTypeChildren(r,s,a,n);break;default:t=this.mapObjectTypeChildren(r,t,a,n);break}}),this.mapArrayTypeChildrenToProps(s,t)}render(){const{children:e,...t}=this.props;let s={...t},{helmetData:r}=t;if(e&&(s=this.mapChildrenToProps(e,s)),r&&!(r instanceof Ba)){const n=r;r=new Ba(n.context,!0),delete s.helmetData}return r?K.createElement(Vc,{...s,context:r.value}):K.createElement(zf.Consumer,null,n=>K.createElement(Vc,{...s,context:n}))}};const Hf="@firebase/installations",rl="0.6.9";const Kf=1e4,Wf=`w:${rl}`,Jf="FIS_v2",Nb="https://firebaseinstallations.googleapis.com/v1",Mb=3600*1e3,$b="installations",Db="Installations";const Lb={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ts=new Bo($b,Db,Lb);function Yf(e){return e instanceof zo&&e.code.includes("request-failed")}function Qf({projectId:e}){return`${Nb}/projects/${e}/installations`}function Xf(e){return{token:e.token,requestStatus:2,expiresIn:Fb(e.expiresIn),creationTime:Date.now()}}async function Zf(e,t){const r=(await t.json()).error;return ts.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ep({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Ub(e,{refreshToken:t}){const s=ep(e);return s.append("Authorization",Vb(t)),s}async function tp(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Fb(e){return Number(e.replace("s","000"))}function Vb(e){return`${Jf} ${e}`}async function Bb({appConfig:e,heartbeatServiceProvider:t},{fid:s}){const r=Qf(e),n=ep(e),i=t.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const a={fid:s,authVersion:Jf,appId:e.appId,sdkVersion:Wf},o={method:"POST",headers:n,body:JSON.stringify(a)},l=await tp(()=>fetch(r,o));if(l.ok){const c=await l.json();return{fid:c.fid||s,registrationStatus:2,refreshToken:c.refreshToken,authToken:Xf(c.authToken)}}else throw await Zf("Create Installation",l)}function sp(e){return new Promise(t=>{setTimeout(t,e)})}function zb(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}const qb=/^[cdef][\w-]{21}$/,qa="";function Gb(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const s=Hb(e);return qb.test(s)?s:qa}catch{return qa}}function Hb(e){return zb(e).substr(0,22)}function ai(e){return`${e.appName}!${e.appId}`}const rp=new Map;function np(e,t){const s=ai(e);ip(s,t),Kb(s,t)}function ip(e,t){const s=rp.get(e);if(s)for(const r of s)r(t)}function Kb(e,t){const s=Wb();s&&s.postMessage({key:e,fid:t}),Jb()}let Kt=null;function Wb(){return!Kt&&"BroadcastChannel"in self&&(Kt=new BroadcastChannel("[Firebase] FID Change"),Kt.onmessage=e=>{ip(e.data.key,e.data.fid)}),Kt}function Jb(){rp.size===0&&Kt&&(Kt.close(),Kt=null)}const Yb="firebase-installations-database",Qb=1,ss="firebase-installations-store";let Di=null;function nl(){return Di||(Di=c0(Yb,Qb,{upgrade:(e,t)=>{t===0&&e.createObjectStore(ss)}})),Di}async function jn(e,t){const s=ai(e),n=(await nl()).transaction(ss,"readwrite"),i=n.objectStore(ss),a=await i.get(s);return await i.put(t,s),await n.done,(!a||a.fid!==t.fid)&&np(e,t.fid),t}async function ap(e){const t=ai(e),r=(await nl()).transaction(ss,"readwrite");await r.objectStore(ss).delete(t),await r.done}async function oi(e,t){const s=ai(e),n=(await nl()).transaction(ss,"readwrite"),i=n.objectStore(ss),a=await i.get(s),o=t(a);return o===void 0?await i.delete(s):await i.put(o,s),await n.done,o&&(!a||a.fid!==o.fid)&&np(e,o.fid),o}async function il(e){let t;const s=await oi(e.appConfig,r=>{const n=Xb(r),i=Zb(e,n);return t=i.registrationPromise,i.installationEntry});return s.fid===qa?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}function Xb(e){const t=e||{fid:Gb(),registrationStatus:0};return op(t)}function Zb(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(ts.create("app-offline"));return{installationEntry:t,registrationPromise:n}}const s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=ew(e,s);return{installationEntry:s,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:tw(e)}:{installationEntry:t}}async function ew(e,t){try{const s=await Bb(e,t);return jn(e.appConfig,s)}catch(s){throw Yf(s)&&s.customData.serverCode===409?await ap(e.appConfig):await jn(e.appConfig,{fid:t.fid,registrationStatus:0}),s}}async function tw(e){let t=await Bc(e.appConfig);for(;t.registrationStatus===1;)await sp(100),t=await Bc(e.appConfig);if(t.registrationStatus===0){const{installationEntry:s,registrationPromise:r}=await il(e);return r||s}return t}function Bc(e){return oi(e,t=>{if(!t)throw ts.create("installation-not-found");return op(t)})}function op(e){return sw(e)?{fid:e.fid,registrationStatus:0}:e}function sw(e){return e.registrationStatus===1&&e.registrationTime+Kf<Date.now()}async function rw({appConfig:e,heartbeatServiceProvider:t},s){const r=nw(e,s),n=Ub(e,s),i=t.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const a={installation:{sdkVersion:Wf,appId:e.appId}},o={method:"POST",headers:n,body:JSON.stringify(a)},l=await tp(()=>fetch(r,o));if(l.ok){const c=await l.json();return Xf(c)}else throw await Zf("Generate Auth Token",l)}function nw(e,{fid:t}){return`${Qf(e)}/${t}/authTokens:generate`}async function al(e,t=!1){let s;const r=await oi(e.appConfig,i=>{if(!lp(i))throw ts.create("not-registered");const a=i.authToken;if(!t&&ow(a))return i;if(a.requestStatus===1)return s=iw(e,t),i;{if(!navigator.onLine)throw ts.create("app-offline");const o=cw(i);return s=aw(e,o),o}});return s?await s:r.authToken}async function iw(e,t){let s=await zc(e.appConfig);for(;s.authToken.requestStatus===1;)await sp(100),s=await zc(e.appConfig);const r=s.authToken;return r.requestStatus===0?al(e,t):r}function zc(e){return oi(e,t=>{if(!lp(t))throw ts.create("not-registered");const s=t.authToken;return uw(s)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function aw(e,t){try{const s=await rw(e,t),r=Object.assign(Object.assign({},t),{authToken:s});return await jn(e.appConfig,r),s}catch(s){if(Yf(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await ap(e.appConfig);else{const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await jn(e.appConfig,r)}throw s}}function lp(e){return e!==void 0&&e.registrationStatus===2}function ow(e){return e.requestStatus===2&&!lw(e)}function lw(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Mb}function cw(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function uw(e){return e.requestStatus===1&&e.requestTime+Kf<Date.now()}async function dw(e){const t=e,{installationEntry:s,registrationPromise:r}=await il(t);return r?r.catch(console.error):al(t).catch(console.error),s.fid}async function hw(e,t=!1){const s=e;return await fw(s),(await al(s,t)).token}async function fw(e){const{registrationPromise:t}=await il(e);t&&await t}function pw(e){if(!e||!e.options)throw Li("App Configuration");if(!e.name)throw Li("App Name");const t=["projectId","apiKey","appId"];for(const s of t)if(!e.options[s])throw Li(s);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Li(e){return ts.create("missing-app-config-values",{valueName:e})}const cp="installations",mw="installations-internal",gw=e=>{const t=e.getProvider("app").getImmediate(),s=pw(t),r=Ls(t,"heartbeat");return{app:t,appConfig:s,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},yw=e=>{const t=e.getProvider("app").getImmediate(),s=Ls(t,cp).getImmediate();return{getId:()=>dw(s),getToken:n=>hw(s,n)}};function vw(){Is(new Os(cp,gw,"PUBLIC")),Is(new Os(mw,yw,"PRIVATE"))}vw();jt(Hf,rl);jt(Hf,rl,"esm2017");const Pn="analytics",bw="firebase_id",ww="origin",xw=60*1e3,_w="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ol="https://www.googletagmanager.com/gtag/js";const Pe=new Wh("@firebase/analytics");const Sw={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Le=new Bo("analytics","Analytics",Sw);function kw(e){if(!e.startsWith(ol)){const t=Le.create("invalid-gtag-resource",{gtagURL:e});return Pe.warn(t.message),""}return e}function up(e){return Promise.all(e.map(t=>t.catch(s=>s)))}function Ew(e,t){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(e,t)),s}function Tw(e,t){const s=Ew("firebase-js-sdk-policy",{createScriptURL:kw}),r=document.createElement("script"),n=`${ol}?l=${e}&id=${t}`;r.src=s?s?.createScriptURL(n):n,r.async=!0,document.head.appendChild(r)}function Cw(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Aw(e,t,s,r,n,i){const a=r[n];try{if(a)await t[a];else{const l=(await up(s)).find(c=>c.measurementId===n);l&&await t[l.appId]}}catch(o){Pe.error(o)}e("config",n,i)}async function Rw(e,t,s,r,n){try{let i=[];if(n&&n.send_to){let a=n.send_to;Array.isArray(a)||(a=[a]);const o=await up(s);for(const l of a){const c=o.find(h=>h.measurementId===l),d=c&&t[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(t)),await Promise.all(i),e("event",r,n||{})}catch(i){Pe.error(i)}}function jw(e,t,s,r){async function n(i,...a){try{if(i==="event"){const[o,l]=a;await Rw(e,t,s,o,l)}else if(i==="config"){const[o,l]=a;await Aw(e,t,s,r,o,l)}else if(i==="consent"){const[o,l]=a;e("consent",o,l)}else if(i==="get"){const[o,l,c]=a;e("get",o,l,c)}else if(i==="set"){const[o]=a;e("set",o)}else e(i,...a)}catch(o){Pe.error(o)}}return n}function Pw(e,t,s,r,n){let i=function(...a){window[r].push(arguments)};return window[n]&&typeof window[n]=="function"&&(i=window[n]),window[n]=jw(i,e,t,s),{gtagCore:i,wrappedGtag:window[n]}}function Iw(e){const t=window.document.getElementsByTagName("script");for(const s of Object.values(t))if(s.src&&s.src.includes(ol)&&s.src.includes(e))return s;return null}const Ow=30,Nw=1e3;class Mw{constructor(t={},s=Nw){this.throttleMetadata=t,this.intervalMillis=s}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,s){this.throttleMetadata[t]=s}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const dp=new Mw;function $w(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Dw(e){var t;const{appId:s,apiKey:r}=e,n={method:"GET",headers:$w(r)},i=_w.replace("{app-id}",s),a=await fetch(i,n);if(a.status!==200&&a.status!==304){let o="";try{const l=await a.json();!((t=l.error)===null||t===void 0)&&t.message&&(o=l.error.message)}catch{}throw Le.create("config-fetch-failed",{httpStatus:a.status,responseMessage:o})}return a.json()}async function Lw(e,t=dp,s){const{appId:r,apiKey:n,measurementId:i}=e.options;if(!r)throw Le.create("no-app-id");if(!n){if(i)return{measurementId:i,appId:r};throw Le.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Vw;return setTimeout(async()=>{o.abort()},xw),hp({appId:r,apiKey:n,measurementId:i},a,o,t)}async function hp(e,{throttleEndTimeMillis:t,backoffCount:s},r,n=dp){var i;const{appId:a,measurementId:o}=e;try{await Uw(r,t)}catch(l){if(o)return Pe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:a,measurementId:o};throw l}try{const l=await Dw(e);return n.deleteThrottleMetadata(a),l}catch(l){const c=l;if(!Fw(c)){if(n.deleteThrottleMetadata(a),o)return Pe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:a,measurementId:o};throw l}const d=Number((i=c?.customData)===null||i===void 0?void 0:i.httpStatus)===503?hc(s,n.intervalMillis,Ow):hc(s,n.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:s+1};return n.setThrottleMetadata(a,h),Pe.debug(`Calling attemptFetch again in ${d} millis`),hp(e,h,r,n)}}function Uw(e,t){return new Promise((s,r)=>{const n=Math.max(t-Date.now(),0),i=setTimeout(s,n);e.addEventListener(()=>{clearTimeout(i),r(Le.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Fw(e){if(!(e instanceof zo)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class Vw{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function Bw(e,t,s,r,n){if(n&&n.global){e("event",s,r);return}else{const i=await t,a=Object.assign(Object.assign({},r),{send_to:i});e("event",s,a)}}async function zw(){if(Jh())try{await Yh()}catch(e){return Pe.warn(Le.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return Pe.warn(Le.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function qw(e,t,s,r,n,i,a){var o;const l=Lw(e);l.then(p=>{s[p.measurementId]=p.appId,e.options.measurementId&&p.measurementId!==e.options.measurementId&&Pe.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Pe.error(p)),t.push(l);const c=zw().then(p=>{if(p)return r.getId()}),[d,h]=await Promise.all([l,c]);Iw(i)||Tw(i,d.measurementId),n("js",new Date);const f=(o=a?.config)!==null&&o!==void 0?o:{};return f[ww]="firebase",f.update=!0,h!=null&&(f[bw]=h),n("config",d.measurementId,f),d.measurementId}class Gw{constructor(t){this.app=t}_delete(){return delete cr[this.app.options.appId],Promise.resolve()}}let cr={},qc=[];const Gc={};let Ui="dataLayer",Hw="gtag",Hc,fp,Kc=!1;function Kw(){const e=[];if(u0()&&e.push("This is a browser extension environment."),Qh()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,n)=>`(${n+1}) ${r}`).join(" "),s=Le.create("invalid-analytics-context",{errorInfo:t});Pe.warn(s.message)}}function Ww(e,t,s){Kw();const r=e.options.appId;if(!r)throw Le.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Pe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Le.create("no-api-key");if(cr[r]!=null)throw Le.create("already-exists",{id:r});if(!Kc){Cw(Ui);const{wrappedGtag:i,gtagCore:a}=Pw(cr,qc,Gc,Ui,Hw);fp=i,Hc=a,Kc=!0}return cr[r]=qw(e,qc,Gc,t,Hc,Ui,s),new Gw(e)}function pp(e=qo()){e=Us(e);const t=Ls(e,Pn);return t.isInitialized()?t.getImmediate():mp(e)}function mp(e,t={}){const s=Ls(e,Pn);if(s.isInitialized()){const n=s.getImmediate();if(d0(t,s.getOptions()))return n;throw Le.create("already-initialized")}return s.initialize({options:t})}function gp(e,t,s,r){e=Us(e),Bw(fp,cr[e.app.options.appId],t,s,r).catch(n=>Pe.error(n))}const Wc="@firebase/analytics",Jc="0.10.8";function Jw(){Is(new Os(Pn,(t,{options:s})=>{const r=t.getProvider("app").getImmediate(),n=t.getProvider("installations-internal").getImmediate();return Ww(r,n,s)},"PUBLIC")),Is(new Os("analytics-internal",e,"PRIVATE")),jt(Wc,Jc),jt(Wc,Jc,"esm2017");function e(t){try{const s=t.getProvider(Pn).getImmediate();return{logEvent:(r,n,i)=>gp(s,r,n,i)}}catch(s){throw Le.create("interop-component-reg-failed",{reason:s})}}}Jw();const ll=Object.freeze(Object.defineProperty({__proto__:null,getAnalytics:pp,initializeAnalytics:mp,logEvent:gp},Symbol.toStringTag,{value:"Module"}));const Yw="type.googleapis.com/google.protobuf.Int64Value",Qw="type.googleapis.com/google.protobuf.UInt64Value";function yp(e,t){const s={};for(const r in e)e.hasOwnProperty(r)&&(s[r]=t(e[r]));return s}function Ga(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>Ga(t));if(typeof e=="function"||typeof e=="object")return yp(e,t=>Ga(t));throw new Error("Data cannot be encoded in JSON: "+e)}function In(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case Yw:case Qw:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>In(t)):typeof e=="function"||typeof e=="object"?yp(e,t=>In(t)):e}const cl="functions";const Yc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let As=class extends zo{constructor(t,s,r){super(`${cl}/${t}`,s||""),this.details=r}};function Xw(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Zw(e,t){let s=Xw(e),r=s,n;try{const i=t&&t.error;if(i){const a=i.status;if(typeof a=="string"){if(!Yc[a])return new As("internal","internal");s=Yc[a],r=a}const o=i.message;typeof o=="string"&&(r=o),n=i.details,n!==void 0&&(n=In(n))}}catch{}return s==="ok"?null:new As(s,r,n)}class ex{constructor(t,s,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||t.get().then(n=>this.auth=n,()=>{}),this.messaging||s.get().then(n=>this.messaging=n,()=>{}),this.appCheck||r.get().then(n=>this.appCheck=n,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.appCheck){const s=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return s.error?null:s.token}return null}async getContext(t){const s=await this.getAuthToken(),r=await this.getMessagingToken(),n=await this.getAppCheckToken(t);return{authToken:s,messagingToken:r,appCheckToken:n}}}const Ha="us-central1";function tx(e){let t=null;return{promise:new Promise((s,r)=>{t=setTimeout(()=>{r(new As("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class sx{constructor(t,s,r,n,i=Ha,a){this.app=t,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new ex(s,r,n),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Ha}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(t){const s=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${s}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${s}.cloudfunctions.net/${t}`}}function rx(e,t,s){e.emulatorOrigin=`http://${t}:${s}`}function nx(e,t,s){return(r=>ax(e,t,r,s||{}))}async function ix(e,t,s,r){s["Content-Type"]="application/json";let n;try{n=await r(e,{method:"POST",body:JSON.stringify(t),headers:s})}catch{return{status:0,json:null}}let i=null;try{i=await n.json()}catch{}return{status:n.status,json:i}}function ax(e,t,s,r){const n=e._url(t);return ox(e,n,s,r)}async function ox(e,t,s,r){s=Ga(s);const n={data:s},i={},a=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=r.timeout||7e4,l=tx(o),c=await Promise.race([ix(t,n,i,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new As("cancelled","Firebase Functions instance was deleted.");const d=Zw(c.status,c.json);if(d)throw d;if(!c.json)throw new As("internal","Response is not valid JSON object.");let h=c.json.data;if(typeof h>"u"&&(h=c.json.result),typeof h>"u")throw new As("internal","Response is missing data field.");return{data:In(h)}}const Qc="@firebase/functions",Xc="0.11.8";const lx="auth-internal",cx="app-check-internal",ux="messaging-internal";function dx(e,t){const s=(r,{instanceIdentifier:n})=>{const i=r.getProvider("app").getImmediate(),a=r.getProvider(lx),o=r.getProvider(ux),l=r.getProvider(cx);return new sx(i,a,o,l,n,e)};Is(new Os(cl,s,"PUBLIC").setMultipleInstances(!0)),jt(Qc,Xc,t),jt(Qc,Xc,"esm2017")}function vp(e=qo(),t=Ha){const r=Ls(Us(e),cl).getImmediate({identifier:t}),n=h0("functions");return n&&bp(r,...n),r}function bp(e,t,s){rx(Us(e),t,s)}function wp(e,t,s){return nx(Us(e),t,s)}dx(fetch.bind(self));const fN=Object.freeze(Object.defineProperty({__proto__:null,connectFunctionsEmulator:bp,getFunctions:vp,httpsCallable:wp},Symbol.toStringTag,{value:"Module"})),Zc="@firebase/performance",Ka="0.6.9";const xp=Ka,hx="FB-PERF-TRACE-START",fx="FB-PERF-TRACE-STOP",Wa="FB-PERF-TRACE-MEASURE",_p="_wt_",Sp="_fp",kp="_fcp",Ep="_fid",Tp="@firebase/performance/config",Cp="@firebase/performance/configexpire",px="performance",Ap="Performance";const mx={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},Se=new Bo(px,Ap,mx);const it=new Wh(Ap);it.logLevel=f0.INFO;let Fi,Rp;class ge{constructor(t){if(this.window=t,!t)throw Se.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(t){!this.performance||!this.performance.mark||this.performance.mark(t)}measure(t,s,r){!this.performance||!this.performance.measure||this.performance.measure(t,s,r)}getEntriesByType(t){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(t)}getEntriesByName(t){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(t)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Qh()?(it.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Jh()?!0:(it.info("IndexedDB is not supported by current browser"),!1)}setupObserver(t,s){if(!this.PerformanceObserver)return;new this.PerformanceObserver(n=>{for(const i of n.getEntries())s(i)}).observe({entryTypes:[t]})}static getInstance(){return Fi===void 0&&(Fi=new ge(Rp)),Fi}}function gx(e){Rp=e}let jp;function yx(e){const t=e.getId();return t.then(s=>{jp=s}),t}function ul(){return jp}function vx(e){const t=e.getToken();return t.then(s=>{}),t}function eu(e,t){const s=e.length-t.length;if(s<0||s>1)throw Se.create("invalid String merger input");const r=[];for(let n=0;n<e.length;n++)r.push(e.charAt(n)),t.length>n&&r.push(t.charAt(n));return r.join("")}let Vi;class $e{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=eu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=eu("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Vi===void 0&&(Vi=new $e),Vi}}var Rs;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"})(Rs||(Rs={}));const bx=["firebase_","google_","ga_"],wx=new RegExp("^[a-zA-Z]\\w*$"),xx=40,_x=100;function Sx(){const e=ge.getInstance().navigator;return e?.serviceWorker?e.serviceWorker.controller?2:3:1}function Pp(){switch(ge.getInstance().document.visibilityState){case"visible":return Rs.VISIBLE;case"hidden":return Rs.HIDDEN;default:return Rs.UNKNOWN}}function kx(){const t=ge.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Ex(e){return e.length===0||e.length>xx?!1:!bx.some(s=>e.startsWith(s))&&!!e.match(wx)}function Tx(e){return e.length!==0&&e.length<=_x}function Ip(e){var t;const s=(t=e.options)===null||t===void 0?void 0:t.appId;if(!s)throw Se.create("no app id");return s}function Cx(e){var t;const s=(t=e.options)===null||t===void 0?void 0:t.projectId;if(!s)throw Se.create("no project id");return s}function Ax(e){var t;const s=(t=e.options)===null||t===void 0?void 0:t.apiKey;if(!s)throw Se.create("no api key");return s}const Rx="0.0.1",Ge={loggingEnabled:!0},jx="FIREBASE_INSTALLATIONS_AUTH";function Px(e,t){const s=Ix();return s?(tu(s),Promise.resolve()):Mx(e,t).then(tu).then(r=>Ox(r),()=>{})}function Ix(){const e=ge.getInstance().localStorage;if(!e)return;const t=e.getItem(Cp);if(!t||!$x(t))return;const s=e.getItem(Tp);if(s)try{return JSON.parse(s)}catch{return}}function Ox(e){const t=ge.getInstance().localStorage;!e||!t||(t.setItem(Tp,JSON.stringify(e)),t.setItem(Cp,String(Date.now()+$e.getInstance().configTimeToLive*60*60*1e3)))}const Nx="Could not fetch config, will use default configs";function Mx(e,t){return vx(e.installations).then(s=>{const r=Cx(e.app),n=Ax(e.app),i=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${n}`,a=new Request(i,{method:"POST",headers:{Authorization:`${jx} ${s}`},body:JSON.stringify({app_instance_id:t,app_instance_id_token:s,app_id:Ip(e.app),app_version:xp,sdk_version:Rx})});return fetch(a).then(o=>{if(o.ok)return o.json();throw Se.create("RC response not ok")})}).catch(()=>{it.info(Nx)})}function tu(e){if(!e)return e;const t=$e.getInstance(),s=e.entries||{};return s.fpr_enabled!==void 0?t.loggingEnabled=String(s.fpr_enabled)==="true":t.loggingEnabled=Ge.loggingEnabled,s.fpr_log_source?t.logSource=Number(s.fpr_log_source):Ge.logSource&&(t.logSource=Ge.logSource),s.fpr_log_endpoint_url?t.logEndPointUrl=s.fpr_log_endpoint_url:Ge.logEndPointUrl&&(t.logEndPointUrl=Ge.logEndPointUrl),s.fpr_log_transport_key?t.transportKey=s.fpr_log_transport_key:Ge.transportKey&&(t.transportKey=Ge.transportKey),s.fpr_vc_network_request_sampling_rate!==void 0?t.networkRequestsSamplingRate=Number(s.fpr_vc_network_request_sampling_rate):Ge.networkRequestsSamplingRate!==void 0&&(t.networkRequestsSamplingRate=Ge.networkRequestsSamplingRate),s.fpr_vc_trace_sampling_rate!==void 0?t.tracesSamplingRate=Number(s.fpr_vc_trace_sampling_rate):Ge.tracesSamplingRate!==void 0&&(t.tracesSamplingRate=Ge.tracesSamplingRate),t.logTraceAfterSampling=su(t.tracesSamplingRate),t.logNetworkAfterSampling=su(t.networkRequestsSamplingRate),e}function $x(e){return Number(e)>Date.now()}function su(e){return Math.random()<=e}let dl=1,Bi;function Op(e){return dl=2,Bi=Bi||Lx(e),Bi}function Dx(){return dl===3}function Lx(e){return Ux().then(()=>yx(e.installations)).then(t=>Px(e,t)).then(()=>ru(),()=>ru())}function Ux(){const e=ge.getInstance().document;return new Promise(t=>{if(e&&e.readyState!=="complete"){const s=()=>{e.readyState==="complete"&&(e.removeEventListener("readystatechange",s),t())};e.addEventListener("readystatechange",s)}else t()})}function ru(){dl=3}const hl=10*1e3,Fx=5.5*1e3,Np=3,Vx=1e3;let On=Np,At=[],nu=!1;function Bx(){nu||(li(Fx),nu=!0)}function li(e){setTimeout(()=>{if(On!==0){if(!At.length)return li(hl);zx()}},e)}function zx(){const e=At.splice(0,Vx),t=e.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),s={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:$e.getInstance().logSource,log_event:t};qx(s,e).catch(()=>{At=[...e,...At],On--,it.info(`Tries left: ${On}.`),li(hl)})}function qx(e,t){return Gx(e).then(s=>(s.ok||it.info("Call to Firebase backend failed."),s.json())).then(s=>{const r=Number(s.nextRequestWaitMillis);let n=hl;isNaN(r)||(n=Math.max(r,n));const i=s.logResponseDetails;Array.isArray(i)&&i.length>0&&i[0].responseAction==="RETRY_REQUEST_LATER"&&(At=[...t,...At],it.info("Retry transport request later.")),On=Np,li(n)})}function Gx(e){const t=$e.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function Hx(e){if(!e.eventTime||!e.message)throw Se.create("invalid cc log");At=[...At,e]}function Kx(e){return(...t)=>{const s=e(...t);Hx({message:s,eventTime:Date.now()})}}let zi;function Mp(e,t){zi||(zi=Kx(Jx)),zi(e,t)}function Yr(e){const t=$e.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||ge.getInstance().requiredApisAvailable()&&(e.isAuto&&Pp()!==Rs.VISIBLE||(Dx()?qi(e):Op(e.performanceController).then(()=>qi(e),()=>qi(e))))}function qi(e){if(!ul())return;const t=$e.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(()=>Mp(e,1),0)}function Wx(e){const t=$e.getInstance();if(!t.instrumentationEnabled)return;const s=e.url,r=t.logEndPointUrl.split("?")[0],n=t.flTransportEndpointUrl.split("?")[0];s===r||s===n||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(()=>Mp(e,0),0)}function Jx(e,t){return t===0?Yx(e):Qx(e)}function Yx(e){const t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},s={application_info:$p(e.performanceController.app),network_request_metric:t};return JSON.stringify(s)}function Qx(e){const t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};Object.keys(e.counters).length!==0&&(t.counters=e.counters);const s=e.getAttributes();Object.keys(s).length!==0&&(t.custom_attributes=s);const r={application_info:$p(e.performanceController.app),trace_metric:t};return JSON.stringify(r)}function $p(e){return{google_app_id:Ip(e),app_instance_id:ul(),web_app_info:{sdk_version:xp,page_url:ge.getInstance().getUrl(),service_worker_status:Sx(),visibility_state:Pp(),effective_connection_type:kx()},application_process_state:0}}const Xx=100,Zx="_",e_=[Sp,kp,Ep];function t_(e,t){return e.length===0||e.length>Xx?!1:t&&t.startsWith(_p)&&e_.indexOf(e)>-1||!e.startsWith(Zx)}function s_(e){const t=Math.floor(e);return t<e&&it.info(`Metric value should be an Integer, setting the value as : ${t}.`),t}class Qt{constructor(t,s,r=!1,n){this.performanceController=t,this.name=s,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=ge.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${hx}-${this.randomId}-${this.name}`,this.traceStopMark=`${fx}-${this.randomId}-${this.name}`,this.traceMeasure=n||`${Wa}-${this.randomId}-${this.name}`,n&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw Se.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw Se.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Yr(this)}record(t,s,r){if(t<=0)throw Se.create("nonpositive trace startTime",{traceName:this.name});if(s<=0)throw Se.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(s*1e3),this.startTimeUs=Math.floor(t*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const n of Object.keys(r.metrics))isNaN(Number(r.metrics[n]))||(this.counters[n]=Math.floor(Number(r.metrics[n])));Yr(this)}incrementMetric(t,s=1){this.counters[t]===void 0?this.putMetric(t,s):this.putMetric(t,this.counters[t]+s)}putMetric(t,s){if(t_(t,this.name))this.counters[t]=s_(s??0);else throw Se.create("invalid custom metric name",{customMetricName:t})}getMetric(t){return this.counters[t]||0}putAttribute(t,s){const r=Ex(t),n=Tx(s);if(r&&n){this.customAttributes[t]=s;return}if(!r)throw Se.create("invalid attribute name",{attributeName:t});if(!n)throw Se.create("invalid attribute value",{attributeValue:s})}getAttribute(t){return this.customAttributes[t]}removeAttribute(t){this.customAttributes[t]!==void 0&&delete this.customAttributes[t]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(t){this.startTimeUs=t}setDuration(t){this.durationUs=t}calculateTraceMetrics(){const t=this.api.getEntriesByName(this.traceMeasure),s=t&&t[0];s&&(this.durationUs=Math.floor(s.duration*1e3),this.startTimeUs=Math.floor((s.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(t,s,r,n){const i=ge.getInstance().getUrl();if(!i)return;const a=new Qt(t,_p+i,!0),o=Math.floor(ge.getInstance().getTimeOrigin()*1e3);a.setStartTime(o),s&&s[0]&&(a.setDuration(Math.floor(s[0].duration*1e3)),a.putMetric("domInteractive",Math.floor(s[0].domInteractive*1e3)),a.putMetric("domContentLoadedEventEnd",Math.floor(s[0].domContentLoadedEventEnd*1e3)),a.putMetric("loadEventEnd",Math.floor(s[0].loadEventEnd*1e3)));const l="first-paint",c="first-contentful-paint";if(r){const d=r.find(f=>f.name===l);d&&d.startTime&&a.putMetric(Sp,Math.floor(d.startTime*1e3));const h=r.find(f=>f.name===c);h&&h.startTime&&a.putMetric(kp,Math.floor(h.startTime*1e3)),n&&a.putMetric(Ep,Math.floor(n*1e3))}Yr(a)}static createUserTimingTrace(t,s){const r=new Qt(t,s,!1,s);Yr(r)}}function iu(e,t){const s=t;if(!s||s.responseStart===void 0)return;const r=ge.getInstance().getTimeOrigin(),n=Math.floor((s.startTime+r)*1e3),i=s.responseStart?Math.floor((s.responseStart-s.startTime)*1e3):void 0,a=Math.floor((s.responseEnd-s.startTime)*1e3),o=s.name&&s.name.split("?")[0],l={performanceController:e,url:o,responsePayloadBytes:s.transferSize,startTimeUs:n,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:a};Wx(l)}const r_=5e3;function au(e){ul()&&(setTimeout(()=>i_(e),0),setTimeout(()=>n_(e),0),setTimeout(()=>a_(e),0))}function n_(e){const t=ge.getInstance(),s=t.getEntriesByType("resource");for(const r of s)iu(e,r);t.setupObserver("resource",r=>iu(e,r))}function i_(e){const t=ge.getInstance(),s=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");if(t.onFirstInputDelay){let n=setTimeout(()=>{Qt.createOobTrace(e,s,r),n=void 0},r_);t.onFirstInputDelay(i=>{n&&(clearTimeout(n),Qt.createOobTrace(e,s,r,i))})}else Qt.createOobTrace(e,s,r)}function a_(e){const t=ge.getInstance(),s=t.getEntriesByType("measure");for(const r of s)ou(e,r);t.setupObserver("measure",r=>ou(e,r))}function ou(e,t){const s=t.name;s.substring(0,Wa.length)!==Wa&&Qt.createUserTimingTrace(e,s)}class o_{constructor(t,s){this.app=t,this.installations=s,this.initialized=!1}_init(t){this.initialized||(t?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=t.dataCollectionEnabled),t?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=t.instrumentationEnabled),ge.getInstance().requiredApisAvailable()?Yh().then(s=>{s&&(Bx(),Op(this).then(()=>au(this),()=>au(this)),this.initialized=!0)}).catch(s=>{it.info(`Environment doesn't support IndexedDB: ${s}`)}):it.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(t){$e.getInstance().instrumentationEnabled=t}get instrumentationEnabled(){return $e.getInstance().instrumentationEnabled}set dataCollectionEnabled(t){$e.getInstance().dataCollectionEnabled=t}get dataCollectionEnabled(){return $e.getInstance().dataCollectionEnabled}}const l_="[DEFAULT]";function c_(e=qo()){return e=Us(e),Ls(e,"performance").getImmediate()}const u_=(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if(s.name!==l_)throw Se.create("FB not default");if(typeof window>"u")throw Se.create("no window");gx(window);const n=new o_(s,r);return n._init(t),n};function d_(){Is(new Os("performance",u_,"PUBLIC")),jt(Zc,Ka),jt(Zc,Ka,"esm2017")}d_();const h_={apiKey:"AIzaSyDlj3o08kSJrEhKJjU2Xb1LMNeXD2hxWhY",authDomain:"richard-automotive.firebaseapp.com",projectId:"richard-automotive",storageBucket:"richard-automotive.firebasestorage.app",messagingSenderId:"197990063384",appId:"1:197990063384:web:2e797f109bda021e2e926d",measurementId:"G-BB5QFNTHHG"},qs=p0(h_),ci=pp(qs),oe=m0(qs),he=g0(qs,{});typeof window<"u"&&y0(oe,k0).catch(e=>console.error("Persistence Config Failed:",e));const Ja=v0(qs),Dp=vp(qs);typeof window<"u"&&c_(qs);typeof window<"u"&&b0(he).catch(e=>{e.code==="failed-precondition"?console.warn("Persistencia fall: Mltiples pestaas abiertas."):e.code==="unimplemented"&&console.warn("El navegador no soporta persistencia.")});const fl=Fs(he,"cars"),Lp=Fs(he,"applications"),pl=async(e=9,t=null,s="all",r=null)=>{const n=[];s&&s!=="all"&&n.push(Ra("type","==",s)),r?n.push(Aa("price",r)):n.push(Aa("name","asc")),t&&n.push(E0(t)),n.push(ef(e));const i=localStorage.getItem("current_dealer_id")||"richard-automotive";n.push(Ra("dealerId","==",i));const a=Zh(fl,...n);try{const o=await tf(a),l=o.docs.map(d=>({id:d.id,...d.data()})),c=o.docs[o.docs.length-1]||null;return{cars:l,lastDoc:c,hasMore:o.docs.length===e}}catch(o){throw console.error("Pagination Error:",o),o.code==="failed-precondition"&&console.warn("Index missing for this query. Check console link."),o}},f_=async()=>{const e=localStorage.getItem("current_dealer_id")||"richard-automotive",t=Zh(Lp,Ra("dealerId","==",e),Aa("timestamp","desc"),ef(50));return(await tf(t)).docs.map(r=>({id:r.id,...r.data()}))},Up=(e,t=800)=>e?e.includes("firebasestorage.googleapis.com")?e:e.includes("images.unsplash.com")?`${e.split("?")[0]}?q=80&w=${t}&auto=format&fit=crop`:e:"",p_=async(e,t)=>(console.log("Strategic Deep Debug: Starting uploadImage...",{fileName:e.name,fileSize:e.size,fileType:e.type,storageBucket:Ja.app.options.storageBucket,authUid:oe.currentUser?.uid||"NOT_LOGGED_IN"}),new Promise((s,r)=>{try{const n=w0(Ja,`inventory/${Date.now()}_${e.name.replace(/[^a-zA-Z0-9.]/g,"_")}`);console.log("Strategic Deep Debug: Storage reference created, starting uploadBytesResumable...");const i=x0(n,e);i.on("state_changed",a=>{const o=a.bytesTransferred/a.totalBytes*100;switch(console.log("Upload is "+o+"% done"),a.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},a=>{console.error("Strategic Deep Debug: Upload FAILED:",a),a.code==="storage/unauthorized"?r(new Error("Permiso denegado: No tienes acceso para subir archivos. (Verifica Login/Reglas)")):a.code==="storage/canceled"?r(new Error("Subida cancelada por el usuario.")):a.code==="storage/unknown"?r(new Error("Error desconocido de Storage. Verifica tu conexin.")):r(new Error(`Fallo en Storage: ${a.message}`))},()=>{_0(i.snapshot.ref).then(a=>{console.log("File available at",a),s(a)})})}catch(n){console.error("Strategic Deep Debug: SYNC FAIL in uploadImage:",n),r(new Error(`Fallo crtico al iniciar subida: ${n.message}`))}})),Fp=async e=>{const t=localStorage.getItem("current_dealer_id")||"richard-automotive";console.log(`[CRUD] Starting addCar... Dealer: ${t}`),await Vs(fl,{dealerId:t,...e,createdAt:Bs()}),console.log("[CRUD] addCar completed successfully.")},Vp=async e=>{const t=localStorage.getItem("current_dealer_id")||"richard-automotive";console.log(`[CRUD] Starting updateCar for ${e.id}...`);const s=tt(he,"cars",e.id),{id:r,...n}=e;await is(s,{...n,dealerId:t,updatedAt:Bs()},{merge:!0}),console.log(`[CRUD] updateCar completed for ${e.id}.`)},Bp=async e=>{const t=tt(he,"cars",e);await sf(t)},zp=async e=>{const t=localStorage.getItem("current_dealer_id")||"richard-automotive",s=S0(he);e.forEach(r=>{const n=tt(fl);s.set(n,{...r,dealerId:t,createdAt:Bs()})}),await s.commit()},m_=async e=>{const t=tt(he,"cars",e);if(await is(t,{views:Xh(1)},{merge:!0}),typeof window<"u"){const{logEvent:s}=await q(async()=>{const{logEvent:r}=await Promise.resolve().then(()=>ll);return{logEvent:r}},void 0);s(ci,"view_item",{items:[{item_id:e}]})}},qp=async e=>{const t=tt(he,"cars",e);await is(t,{leads_count:Xh(1)},{merge:!0})},g_=e=>{let t=30;return e.type==="trade-in"&&(t+=20),e.type==="finance"&&e.ssn&&(t+=35),e.monthlyIncome&&Number(e.monthlyIncome)>3e3&&(t+=10),e.visitCount&&e.visitCount>3&&(t+=15),e.aiInteractions&&e.aiInteractions>5&&(t+=10),e.phone&&e.phone.length>=10&&(t+=10),e.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&(t+=5),e.urgency==="immediate"&&(t+=15),Math.min(t,100)},y_=async e=>{const t=g_(e),s=localStorage.getItem("current_dealer_id")||"richard-automotive",r={...e,dealerId:s,...e.ssn?{ssn:`XXX-XX-${e.ssn.slice(-4)}`}:{},timestamp:new Date,status:"new",type:e.type||"finance",aiScore:t,aiSummary:e.aiSummary||"Lead capturado automticamente.",aiMetaData:{promptVersion:"2.0-flash-optimized",contentType:e.description?"generative":"legacy",hasModifiedByDealer:e.hasModifiedByDealer||!1}};if(await Vs(Lp,r),e.vehicleInfo&&e.vehicleInfo.id&&await qp(e.vehicleInfo.id),typeof window<"u"){const{logEvent:n}=await q(async()=>{const{logEvent:i}=await Promise.resolve().then(()=>ll);return{logEvent:i}},void 0);n(ci,"generate_lead",{currency:"USD",value:t,lead_type:r.type,vehicle_id:r.vehicleId})}},v_=async(e,t)=>{const s=tt(he,"applications",e);await is(s,{status:t},{merge:!0})},b_=async(e,t,s)=>{try{return(await wp(Dp,"generateDescription")({carModel:e,features:t})).data}catch(r){throw console.error("Error generating description:",r),new Error("Failed to generate description via AI.")}},Gp="Aviso: Los precios, pagos y disponibilidad generados por IA son estimaciones para fines informativos y no constituyen una oferta formal. Sujeto a cambios sin previo aviso.",w_=async e=>{try{const t=Fs(he,"subscribers");await Vs(t,{email:e,timestamp:Bs()})}catch(t){throw console.error("Error subscribing:",t),t}},x_=Object.freeze(Object.defineProperty({__proto__:null,AI_LEGAL_DISCLAIMER:Gp,addCar:Fp,analytics:ci,auth:oe,db:he,deleteCar:Bp,functions:Dp,generateCarDescriptionAI:b_,getLeadsOnce:f_,getPaginatedCars:pl,incrementCarLead:qp,incrementCarView:m_,optimizeImage:Up,storage:Ja,submitApplication:y_,subscribeToNewsletter:w_,updateCar:Vp,updateLeadStatus:v_,uploadImage:p_,uploadInitialInventory:zp},Symbol.toStringTag,{value:"Module"}));var __={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const S_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),P=(e,t)=>{const s=b.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...c},d)=>b.createElement("svg",{ref:d,...__,width:n,height:n,stroke:r,strokeWidth:a?Number(i)*24/Number(n):i,className:["lucide",`lucide-${S_(e)}`,o].join(" "),...c},[...t.map(([h,f])=>b.createElement(h,f)),...Array.isArray(l)?l:[l]]));return s.displayName=`${e}`,s};const ml=P("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Hp=P("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Gi=P("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const k_=P("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);const E_=P("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const T_=P("BotMessageSquare",[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z",key:"w2lp3e"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M9 11v2",key:"1ueba0"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M20 12h2",key:"1q8mjw"}]]);const Nn=P("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);const C_=P("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const A_=P("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const R_=P("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const lu=P("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const Kp=P("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);const j_=P("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const P_=P("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Wp=P("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const gl=P("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const I_=P("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);const O_=P("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const N_=P("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const M_=P("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]);const $_=P("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const D_=P("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);const L_=P("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);const U_=P("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]);const F_=P("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const V_=P("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);const Jp=P("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);const Yp=P("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const Mn=P("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const B_=P("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const z_=P("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const q_=P("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);const G_=P("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const gn=P("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const H_=P("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const K_=P("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const W_=P("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const J_=P("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const Y_=P("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const Qp=P("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const Xp=P("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const Q_=P("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const X_=P("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);const Z_=P("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);const Zp=P("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const eS=P("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);const tS=P("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const sS=P("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const rS=P("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const em=P("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const ui=P("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const nS=P("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const vr=P("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const iS=P("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const cu=P("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const aS=P("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);const oS=P("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);const Ya=P("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const lS=P("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);const cS=P("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);const uS=P("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const dS=P("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const mt=P("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const hS=P("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);const tm=P("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var uu;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(uu||(uu={}));var du;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(du||(du={}));var hu;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(hu||(hu={}));const fu=["user","model","function","system"];var pu;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(pu||(pu={}));var mu;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(mu||(mu={}));var gu;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(gu||(gu={}));var yu;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(yu||(yu={}));var ur;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(ur||(ur={}));var vu;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(vu||(vu={}));var bu;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(bu||(bu={}));var wu;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(wu||(wu={}));class ke extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class cs extends ke{constructor(t,s){super(t),this.response=s}}class sm extends ke{constructor(t,s,r,n){super(t),this.status=s,this.statusText=r,this.errorDetails=n}}class Rt extends ke{}class rm extends ke{}const fS="https://generativelanguage.googleapis.com",pS="v1beta",mS="0.24.1",gS="genai-js";var rs;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(rs||(rs={}));class yS{constructor(t,s,r,n,i){this.model=t,this.task=s,this.apiKey=r,this.stream=n,this.requestOptions=i}toString(){var t,s;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||pS;let i=`${((s=this.requestOptions)===null||s===void 0?void 0:s.baseUrl)||fS}/${r}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function vS(e){const t=[];return e?.apiClient&&t.push(e.apiClient),t.push(`${gS}/${mS}`),t.join(" ")}async function bS(e){var t;const s=new Headers;s.append("Content-Type","application/json"),s.append("x-goog-api-client",vS(e.requestOptions)),s.append("x-goog-api-key",e.apiKey);let r=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(n){throw new Rt(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${n.message}`)}for(const[n,i]of r.entries()){if(n==="x-goog-api-key")throw new Rt(`Cannot set reserved header name ${n}`);if(n==="x-goog-api-client")throw new Rt(`Header name ${n} can only be set using the apiClient field`);s.append(n,i)}}return s}async function wS(e,t,s,r,n,i){const a=new yS(e,t,s,r,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},kS(i)),{method:"POST",headers:await bS(a),body:n})}}async function $r(e,t,s,r,n,i={},a=fetch){const{url:o,fetchOptions:l}=await wS(e,t,s,r,n,i);return xS(o,l,a)}async function xS(e,t,s=fetch){let r;try{r=await s(e,t)}catch(n){_S(n,e)}return r.ok||await SS(r,e),r}function _S(e,t){let s=e;throw s.name==="AbortError"?(s=new rm(`Request aborted when fetching ${t.toString()}: ${e.message}`),s.stack=e.stack):e instanceof sm||e instanceof Rt||(s=new ke(`Error fetching from ${t.toString()}: ${e.message}`),s.stack=e.stack),s}async function SS(e,t){let s="",r;try{const n=await e.json();s=n.error.message,n.error.details&&(s+=` ${JSON.stringify(n.error.details)}`,r=n.error.details)}catch{}throw new sm(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${s}`,e.status,e.statusText,r)}function kS(e){const t={};if(e?.signal!==void 0||e?.timeout>=0){const s=new AbortController;e?.timeout>=0&&setTimeout(()=>s.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{s.abort()}),t.signal=s.signal}return t}function yl(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),yn(e.candidates[0]))throw new cs(`${St(e)}`,e);return ES(e)}else if(e.promptFeedback)throw new cs(`Text not available. ${St(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),yn(e.candidates[0]))throw new cs(`${St(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),xu(e)[0]}else if(e.promptFeedback)throw new cs(`Function call not available. ${St(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),yn(e.candidates[0]))throw new cs(`${St(e)}`,e);return xu(e)}else if(e.promptFeedback)throw new cs(`Function call not available. ${St(e)}`,e)},e}function ES(e){var t,s,r,n;const i=[];if(!((s=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||s===void 0)&&s.parts)for(const a of(n=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||n===void 0?void 0:n.parts)a.text&&i.push(a.text),a.executableCode&&i.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&i.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function xu(e){var t,s,r,n;const i=[];if(!((s=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||s===void 0)&&s.parts)for(const a of(n=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||n===void 0?void 0:n.parts)a.functionCall&&i.push(a.functionCall);if(i.length>0)return i}const TS=[ur.RECITATION,ur.SAFETY,ur.LANGUAGE];function yn(e){return!!e.finishReason&&TS.includes(e.finishReason)}function St(e){var t,s,r;let n="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)n+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(n+=` due to ${e.promptFeedback.blockReason}`),!((s=e.promptFeedback)===null||s===void 0)&&s.blockReasonMessage&&(n+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const i=e.candidates[0];yn(i)&&(n+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(n+=`: ${i.finishMessage}`))}return n}function br(e){return this instanceof br?(this.v=e,this):new br(e)}function CS(e,t,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(e,t||[]),n,i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(f){r[f]&&(n[f]=function(p){return new Promise(function(m,g){i.push([f,p,m,g])>1||o(f,p)})})}function o(f,p){try{l(r[f](p))}catch(m){h(i[0][3],m)}}function l(f){f.value instanceof br?Promise.resolve(f.value.v).then(c,d):h(i[0][2],f)}function c(f){o("next",f)}function d(f){o("throw",f)}function h(f,p){f(p),i.shift(),i.length&&o(i[0][0],i[0][1])}}const _u=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function AS(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),s=PS(t),[r,n]=s.tee();return{stream:jS(r),response:RS(n)}}async function RS(e){const t=[],s=e.getReader();for(;;){const{done:r,value:n}=await s.read();if(r)return yl(IS(t));t.push(n)}}function jS(e){return CS(this,arguments,function*(){const s=e.getReader();for(;;){const{value:r,done:n}=yield br(s.read());if(n)break;yield yield br(yl(r))}})}function PS(e){const t=e.getReader();return new ReadableStream({start(r){let n="";return i();function i(){return t.read().then(({value:a,done:o})=>{if(o){if(n.trim()){r.error(new ke("Failed to parse stream"));return}r.close();return}n+=a;let l=n.match(_u),c;for(;l;){try{c=JSON.parse(l[1])}catch{r.error(new ke(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(c),n=n.substring(l[0].length),l=n.match(_u)}return i()}).catch(a=>{let o=a;throw o.stack=a.stack,o.name==="AbortError"?o=new rm("Request aborted when reading from the stream"):o=new ke("Error reading from the stream"),o})}}})}function IS(e){const t=e[e.length-1],s={promptFeedback:t?.promptFeedback};for(const r of e){if(r.candidates){let n=0;for(const i of r.candidates)if(s.candidates||(s.candidates=[]),s.candidates[n]||(s.candidates[n]={index:n}),s.candidates[n].citationMetadata=i.citationMetadata,s.candidates[n].groundingMetadata=i.groundingMetadata,s.candidates[n].finishReason=i.finishReason,s.candidates[n].finishMessage=i.finishMessage,s.candidates[n].safetyRatings=i.safetyRatings,i.content&&i.content.parts){s.candidates[n].content||(s.candidates[n].content={role:i.content.role||"user",parts:[]});const a={};for(const o of i.content.parts)o.text&&(a.text=o.text),o.functionCall&&(a.functionCall=o.functionCall),o.executableCode&&(a.executableCode=o.executableCode),o.codeExecutionResult&&(a.codeExecutionResult=o.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),s.candidates[n].content.parts.push(a)}n++}r.usageMetadata&&(s.usageMetadata=r.usageMetadata)}return s}async function nm(e,t,s,r){const n=await $r(t,rs.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(s),r);return AS(n)}async function im(e,t,s,r){const i=await(await $r(t,rs.GENERATE_CONTENT,e,!1,JSON.stringify(s),r)).json();return{response:yl(i)}}function am(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function wr(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const s of e)typeof s=="string"?t.push({text:s}):t.push(s);return OS(t)}function OS(e){const t={role:"user",parts:[]},s={role:"function",parts:[]};let r=!1,n=!1;for(const i of e)"functionResponse"in i?(s.parts.push(i),n=!0):(t.parts.push(i),r=!0);if(r&&n)throw new ke("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!n)throw new ke("No content is provided for sending chat message.");return r?t:s}function NS(e,t){var s;let r={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(s=t?.cachedContent)===null||s===void 0?void 0:s.name,contents:[]};const n=e.generateContentRequest!=null;if(e.contents){if(n)throw new Rt("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(n)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const i=wr(e);r.contents=[i]}return{generateContentRequest:r}}function Su(e){let t;return e.contents?t=e:t={contents:[wr(e)]},e.systemInstruction&&(t.systemInstruction=am(e.systemInstruction)),t}function MS(e){return typeof e=="string"||Array.isArray(e)?{content:wr(e)}:e}const ku=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],$S={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function DS(e){let t=!1;for(const s of e){const{role:r,parts:n}=s;if(!t&&r!=="user")throw new ke(`First content should be with role 'user', got ${r}`);if(!fu.includes(r))throw new ke(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(fu)}`);if(!Array.isArray(n))throw new ke("Content should have 'parts' property with an array of Parts");if(n.length===0)throw new ke("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of n)for(const l of ku)l in o&&(i[l]+=1);const a=$S[r];for(const o of ku)if(!a.includes(o)&&i[o]>0)throw new ke(`Content with role '${r}' can't contain '${o}' part`);t=!0}}function Eu(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const s=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(s===void 0||s.parts===void 0||s.parts.length===0)return!1;for(const r of s.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const Tu="SILENT_ERROR";class LS{constructor(t,s,r,n={}){this.model=s,this.params=r,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r?.history&&(DS(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,s={}){var r,n,i,a,o,l;await this._sendPromise;const c=wr(t),d={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),s);let f;return this._sendPromise=this._sendPromise.then(()=>im(this._apiKey,this.model,d,h)).then(p=>{var m;if(Eu(p.response)){this._history.push(c);const g=Object.assign({parts:[],role:"model"},(m=p.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(g)}else{const g=St(p.response);g&&console.warn(`sendMessage() was unsuccessful. ${g}. Inspect response object for details.`)}f=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,f}async sendMessageStream(t,s={}){var r,n,i,a,o,l;await this._sendPromise;const c=wr(t),d={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),s),f=nm(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(Tu)}).then(p=>p.response).then(p=>{if(Eu(p)){this._history.push(c);const m=Object.assign({},p.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=St(p);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(p=>{p.message!==Tu&&console.error(p)}),f}}async function US(e,t,s,r){return(await $r(t,rs.COUNT_TOKENS,e,!1,JSON.stringify(s),r)).json()}async function FS(e,t,s,r){return(await $r(t,rs.EMBED_CONTENT,e,!1,JSON.stringify(s),r)).json()}async function VS(e,t,s,r){const n=s.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(await $r(t,rs.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:n}),r)).json()}class Cu{constructor(t,s,r={}){this.apiKey=t,this._requestOptions=r,s.model.includes("/")?this.model=s.model:this.model=`models/${s.model}`,this.generationConfig=s.generationConfig||{},this.safetySettings=s.safetySettings||[],this.tools=s.tools,this.toolConfig=s.toolConfig,this.systemInstruction=am(s.systemInstruction),this.cachedContent=s.cachedContent}async generateContent(t,s={}){var r;const n=Su(t),i=Object.assign(Object.assign({},this._requestOptions),s);return im(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},n),i)}async generateContentStream(t,s={}){var r;const n=Su(t),i=Object.assign(Object.assign({},this._requestOptions),s);return nm(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},n),i)}startChat(t){var s;return new LS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},t),this._requestOptions)}async countTokens(t,s={}){const r=NS(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),s);return US(this.apiKey,this.model,r,n)}async embedContent(t,s={}){const r=MS(t),n=Object.assign(Object.assign({},this._requestOptions),s);return FS(this.apiKey,this.model,r,n)}async batchEmbedContents(t,s={}){const r=Object.assign(Object.assign({},this._requestOptions),s);return VS(this.apiKey,this.model,t,r)}}class BS{constructor(t){this.apiKey=t}getGenerativeModel(t,s){if(!t.model)throw new ke("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Cu(this.apiKey,t,s)}getGenerativeModelFromCachedContent(t,s,r){if(!t.name)throw new Rt("Cached content must contain a `name` field.");if(!t.model)throw new Rt("Cached content must contain a `model` field.");const n=["model","systemInstruction"];for(const a of n)if(s?.[a]&&t[a]&&s?.[a]!==t[a]){if(a==="model"){const o=s.model.startsWith("models/")?s.model.replace("models/",""):s.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===l)continue}throw new Rt(`Different value for "${a}" specified in modelParams (${s[a]}) and cachedContent (${t[a]})`)}const i=Object.assign(Object.assign({},s),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new Cu(this.apiKey,i,r)}}const zS=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class vl extends Error{constructor(t,s="FunctionsError",r){super(t),this.name=s,this.context=r}}class qS extends vl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Au extends vl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ru extends vl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Qa;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Qa||(Qa={}));class GS{constructor(t,{headers:s={},customFetch:r,region:n=Qa.Any}={}){this.url=t,this.headers=s,this.region=n,this.fetch=zS(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return T0(this,arguments,void 0,function*(s,r={}){var n;let i,a;try{const{headers:o,method:l,body:c,signal:d,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${s}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let g;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=c):typeof c=="string"?(f["Content-Type"]="text/plain",g=c):typeof FormData<"u"&&c instanceof FormData?g=c:(f["Content-Type"]="application/json",g=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?g=JSON.stringify(c):g=c;let y=d;h&&(a=new AbortController,i=setTimeout(()=>a.abort(),h),d?(y=a.signal,d.addEventListener("abort",()=>a.abort())):y=a.signal);const w=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:g,signal:y}).catch(k=>{throw new qS(k)}),x=w.headers.get("x-relay-error");if(x&&x==="true")throw new Au(w);if(!w.ok)throw new Ru(w);let v=((n=w.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),S;return v==="application/json"?S=yield w.json():v==="application/octet-stream"||v==="application/pdf"?S=yield w.blob():v==="text/event-stream"?S=w:v==="multipart/form-data"?S=yield w.formData():S=yield w.text(),{data:S,error:null,response:w}}catch(o){return{data:null,error:o,response:o instanceof Ru||o instanceof Au?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var HS=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},KS=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,o=null,l=null,c=i.status,d=i.statusText;if(i.ok){var h,f;if(s.method!=="HEAD"){var p;const w=await i.text();w===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((p=s.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?o=w:o=JSON.parse(w))}const g=(h=s.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),y=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&y&&y.length>1&&(l=parseInt(y[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var m;const g=await i.text();try{a=JSON.parse(g),Array.isArray(a)&&i.status===404&&(o=[],a=null,c=200,d="OK")}catch{i.status===404&&g===""?(c=204,d="No Content"):a={message:g}}if(a&&s.isMaybeSingle&&(!(a==null||(m=a.details)===null||m===void 0)&&m.includes("0 rows"))&&(a=null,c=200,d="OK"),a&&s.shouldThrowOnError)throw new HS(a)}return{error:a,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(n=n.catch(i=>{var a;let o="";const l=i?.cause;if(l){var c,d,h,f;const m=(c=l?.message)!==null&&c!==void 0?c:"",g=(d=l?.code)!==null&&d!==void 0?d:"";o=`${(h=i?.name)!==null&&h!==void 0?h:"FetchError"}: ${i?.message}`,o+=`

Caused by: ${(f=l?.name)!==null&&f!==void 0?f:"Error"}: ${m}`,g&&(o+=` (${g})`),l?.stack&&(o+=`
${l.stack}`)}else{var p;o=(p=i?.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(a=i?.name)!==null&&a!==void 0?a:"FetchError"}: ${i?.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}},WS=class extends KS{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:n=!1,format:i="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const ju=new RegExp("[,()]");var ys=class extends WS{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&ju.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}notIn(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&ju.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let n="";r==="plain"?n="pl":r==="phrase"?n="ph":r==="websearch"&&(n="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${n}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}},JS=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:s=!1,count:r}=t??{},n=s?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",a),r&&l.append("Prefer",`count=${r}`),new ys({method:n,url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;const n="POST",{url:i,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),s||a.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);i.searchParams.set("columns",l.join(","))}}return new ys({method:n,url:i,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:n=!0}={}){var i;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&o.searchParams.set("on_conflict",t),r&&l.append("Prefer",`count=${r}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);o.searchParams.set("columns",d.join(","))}}return new ys({method:a,url:o,headers:l,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var s;const r="PATCH",{url:n,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new ys({method:r,url:n,headers:i,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var t;const s="DELETE",{url:r,headers:n}=this.cloneRequestState();return e&&n.append("Prefer",`count=${e}`),new ys({method:s,url:r,headers:n,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},YS=class om{constructor(t,{headers:s={},schema:r,fetch:n}={}){this.url=t,this.headers=new Headers(s),this.schemaName=r,this.fetch=n}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new JS(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new om(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:r=!1,get:n=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${t}`);let c;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),h=r&&Object.values(s).some(d);h?(o="POST",c=s):r||n?(o=r?"HEAD":"GET",Object.entries(s).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(o="POST",c=s);const f=new Headers(this.headers);return h?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new ys({method:o,url:l,headers:f,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class QS{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const r=s.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const r=this.getWebSocketConstructor();return new r(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const XS="2.91.0",ZS=`realtime-js/${XS}`,ek="1.0.0",lm="2.0.0",Pu=lm,Xa=1e4,tk=1e3,sk=100;var kt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(kt||(kt={}));var ce;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ce||(ce={}));var Ye;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ye||(Ye={}));var Za;(function(e){e.websocket="websocket"})(Za||(Za={}));var qt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(qt||(qt={}));class rk{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,r;const n=(r=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(t){var s,r;const n=(r=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,s,r){var n,i;const a=t.topic,o=(n=t.ref)!==null&&n!==void 0?n:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",c=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+c.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,l.length),m.setUint8(g++,o.length),m.setUint8(g++,a.length),m.setUint8(g++,c.length),m.setUint8(g++,h.length),m.setUint8(g++,s),Array.from(l,w=>m.setUint8(g++,w.charCodeAt(0))),Array.from(o,w=>m.setUint8(g++,w.charCodeAt(0))),Array.from(a,w=>m.setUint8(g++,w.charCodeAt(0))),Array.from(c,w=>m.setUint8(g++,w.charCodeAt(0))),Array.from(h,w=>m.setUint8(g++,w.charCodeAt(0)));var y=new Uint8Array(p.byteLength+r.byteLength);return y.set(new Uint8Array(p),0),y.set(new Uint8Array(r),p.byteLength),y.buffer}decode(t,s){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return s(r)}if(typeof t=="string"){const r=JSON.parse(t),[n,i,a,o,l]=r;return s({join_ref:n,ref:i,topic:a,event:o,payload:l})}return s({})}_binaryDecode(t){const s=new DataView(t),r=s.getUint8(0),n=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,s,n)}_decodeUserBroadcast(t,s,r){const n=s.getUint8(1),i=s.getUint8(2),a=s.getUint8(3),o=s.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(t.slice(l,l+n));l=l+n;const d=r.decode(t.slice(l,l+i));l=l+i;const h=r.decode(t.slice(l,l+a));l=l+a;const f=t.slice(l,t.byteLength),p=o===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,m={type:this.BROADCAST_EVENT,event:d,payload:p};return a>0&&(m.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>s.includes(r)))}}class cm{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var W;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(W||(W={}));const Iu=(e,t,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=nk(a,e,t,n),i),{}):{}},nk=(e,t,s,r)=>{const n=t.find(o=>o.name===e),i=n?.type,a=s[e];return i&&!r.includes(i)?um(i,a):eo(a)},um=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return lk(t,s)}switch(e){case W.bool:return ik(t);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return ak(t);case W.json:case W.jsonb:return ok(t);case W.timestamp:return ck(t);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return eo(t);default:return eo(t)}},eo=e=>e,ik=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ak=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ok=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},lk=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,r=e[s];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,s);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>um(t,o))}return e},ck=e=>typeof e=="string"?e.replace(" ","T"):e,dm=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Hi{constructor(t,s,r={},n=Xa){this.channel=t,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var r;return this._hasReceived(t)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ou;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ou||(Ou={}));class dr{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dr.syncState(this.state,n,i,a),this.pendingDiffs.forEach(l=>{this.state=dr.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=dr.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,r,n){const i=this.cloneDeep(t),a=this.transformState(s),o={},l={};return this.map(i,(c,d)=>{a[c]||(l[c]=d)}),this.map(a,(c,d)=>{const h=i[c];if(h){const f=d.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),m=d.filter(y=>p.indexOf(y.presence_ref)<0),g=h.filter(y=>f.indexOf(y.presence_ref)<0);m.length>0&&(o[c]=m),g.length>0&&(l[c]=g)}else o[c]=d}),this.syncDiff(i,{joins:o,leaves:l},r,n)}static syncDiff(t,s,r,n){const{joins:i,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(o,l)=>{var c;const d=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(l),d.length>0){const h=t[o].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[o].unshift(...f)}r(o,d,l)}),this.map(a,(o,l)=>{let c=t[o];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),t[o]=c,n(o,c,l),c.length===0&&delete t[o]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(r=>s(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,r)=>{const n=t[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Nu||(Nu={}));var hr;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(hr||(hr={}));var ut;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ut||(ut={}));class xs{constructor(t,s={config:{}},r){var n,i;if(this.topic=t,this.params=s,this.socket=r,this.bindings={},this.state=ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Hi(this,Ye.join,this.params,this.timeout),this.rejoinTimer=new cm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ce.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ye.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new dr(this),this.broadcastEndpointURL=dm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ce.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&n!==void 0?n:[],d=!!this.bindings[hr.PRESENCE]&&this.bindings[hr.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t?.(ut.CHANNEL_ERROR,p)),this._onClose(()=>t?.(ut.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t?.(ut.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(m=g?.length)!==null&&m!==void 0?m:0,w=[];for(let x=0;x<y;x++){const v=g[x],{filter:{event:S,schema:k,table:T,filter:C}}=v,_=p&&p[x];if(_&&_.event===S&&xs.isFilterValueEqual(_.schema,k)&&xs.isFilterValueEqual(_.table,T)&&xs.isFilterValueEqual(_.filter,C))w.push(Object.assign(Object.assign({},v),{id:_.id}));else{this.unsubscribe(),this.state=ce.errored,t?.(ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(ut.SUBSCRIBED);return}}).receive("error",p=>{this.state=ce.errored,t?.(ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t?.(ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,r){return this.state===ce.joined&&t===hr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,r)}async httpSend(t,s,r={}){var n;if(s==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,s={}){var r,n;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ce.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ye.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Hi(this,Ye.leave,{},t),r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ce.closed,this.bindings={}}async _fetchWithTimeout(t,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),a}_push(t,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Hi(this,t,s,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>sk){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,r){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,r){var n,i;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:c,join:d}=Ye;if(r&&[o,l,c,d].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,s,r);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var m,g,y;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(g=p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(p=>p.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var m,g,y,w,x,v,S,k;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const T=p.id,C=(m=p.filter)===null||m===void 0?void 0:m.event;return T&&((g=s.ids)===null||g===void 0?void 0:g.includes(T))&&(C==="*"||C?.toLocaleLowerCase()===((y=s.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))&&(!(!((w=p.filter)===null||w===void 0)&&w.table)||p.filter.table===((x=s.data)===null||x===void 0?void 0:x.table))}else{const T=(S=(v=p?.filter)===null||v===void 0?void 0:v.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return T==="*"||T===((k=s?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:y,commit_timestamp:w,type:x,errors:v}=m;f=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:x,new:{},old:{},errors:v}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===ce.closed}_isJoined(){return this.state===ce.joined}_isJoining(){return this.state===ce.joining}_isLeaving(){return this.state===ce.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,r){const n=t.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,s){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&xs.isEqual(n.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ye.close,{},t)}_onError(t){this._on(Ye.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ce.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Iu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Iu(t.columns,t.old_record)),s}}const Ki=()=>{},Qr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uk=[1e3,2e3,5e3,1e4],dk=1e4,hk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fk{constructor(t,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xa,this.transport=null,this.heartbeatIntervalMs=Qr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ki,this.ref=0,this.reconnectTimer=null,this.vsn=Pu,this.logger=Ki,this.conn=null,this.sendBuffer=[],this.serializer=new rk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((r=s?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${Za.websocket}`,this.httpEndpoint=dm(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=QS.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,r){this.logger(t,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case kt.connecting:return qt.Connecting;case kt.open:return qt.Open;case kt.closing:return qt.Closing;default:return qt.Closed}}isConnected(){return this.connectionState()===qt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const r=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new xs(`realtime:${t}`,s,this);return this.channels.push(i),i}}push(t){const{topic:s,event:r,payload:n,ref:i}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(tk,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Qr.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",c)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:n,payload:i,ref:a}=s,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${n} ${o}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(n,i,a)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===kt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===kt.open||this.conn.readyState===kt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ye.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const r=t.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${t}${r}${n}`}_workerObjectUrl(t){let s;if(t)s=t;else{const r=new Blob([hk],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,r=!1;if(t)s=t,r=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),s=this.accessTokenValue}else s=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:ZS};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ye.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(s)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new cm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,r,n,i,a,o,l,c,d,h,f,p;switch(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:Xa,this.heartbeatIntervalMs=(n=t?.heartbeatIntervalMs)!==null&&n!==void 0?n:Qr.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t?.heartbeatCallback)!==null&&o!==void 0?o:Ki,this.vsn=(l=t?.vsn)!==null&&l!==void 0?l:Pu,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t?.reconnectAfterMs)!==null&&c!==void 0?c:(m=>uk[m-1]||dk),this.vsn){case ek:this.encode=(d=t?.encode)!==null&&d!==void 0?d:((m,g)=>g(JSON.stringify(m))),this.decode=(h=t?.decode)!==null&&h!==void 0?h:((m,g)=>g(JSON.parse(m)));break;case lm:this.encode=(f=t?.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var xr=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function pk(e,t,s){const r=new URL(t,e);if(s)for(const[n,i]of Object.entries(s))i!==void 0&&r.searchParams.set(n,i);return r.toString()}async function mk(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function gk(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:s,path:r,query:n,body:i,headers:a}){const o=pk(e.baseUrl,r,n),l=await mk(e.auth),c=await t(o,{method:s,headers:{...i?{"Content-Type":"application/json"}:{},...l,...a},body:i?JSON.stringify(i):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!c.ok){const p=h?f:void 0,m=p?.error;throw new xr(m?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:m?.type,icebergCode:m?.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function Xr(e){return e.join("")}var yk=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Xr(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const s={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xr(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xr(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xr(e.namespace)}`}),!0}catch(t){if(t instanceof xr&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(s){if(s instanceof xr&&s.status===409)return;throw s}}};function us(e){return e.join("")}var vk=class{constructor(e,t="",s){this.client=e,this.prefix=t,this.accessDelegation=s}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${us(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${us(e.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(e,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${us(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${us(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${us(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${us(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(s){if(s instanceof xr&&s.status===404)return!1;throw s}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(s){if(s instanceof xr&&s.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw s}}},bk=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const s=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=gk({baseUrl:s,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new yk(this.client,t),this.tableOps=new vk(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},di=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Z(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var wk=class extends di{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},to=class extends di{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const bl=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),xk=()=>Response,so=e=>{if(Array.isArray(e))return e.map(s=>so(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=so(r)}),t},_k=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Sk=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function _r(e){"@babel/helpers - typeof";return _r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(e)}function kk(e,t){if(_r(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var r=s.call(e,t);if(_r(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ek(e){var t=kk(e,"string");return _r(t)=="symbol"?t:t+""}function Tk(e,t,s){return(t=Ek(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Mu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,r)}return s}function U(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Mu(Object(s),!0).forEach(function(r){Tk(e,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mu(Object(s)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))})}return e}const Wi=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Ck=async(e,t,s)=>{e instanceof await xk()&&!s?.noResolveJson?e.json().then(r=>{const n=e.status||500,i=r?.statusCode||n+"";t(new wk(Wi(r),n,i))}).catch(r=>{t(new to(Wi(r),r))}):t(new to(Wi(e),e))},Ak=(e,t,s,r)=>{const n={method:e,headers:t?.headers||{}};return e==="GET"||!r?n:(_k(r)?(n.headers=U({"Content-Type":"application/json"},t?.headers),n.body=JSON.stringify(r)):n.body=r,t?.duplex&&(n.duplex=t.duplex),U(U({},n),s))};async function Dr(e,t,s,r,n,i){return new Promise((a,o)=>{e(s,Ak(t,r,n,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Ck(l,o,r))})}async function Sr(e,t,s,r){return Dr(e,"GET",t,s,r)}async function Je(e,t,s,r,n){return Dr(e,"POST",t,r,n,s)}async function ro(e,t,s,r,n){return Dr(e,"PUT",t,r,n,s)}async function Rk(e,t,s,r){return Dr(e,"HEAD",t,U(U({},s),{},{noResolveJson:!0}),r)}async function wl(e,t,s,r,n){return Dr(e,"DELETE",t,r,n,s)}var jk=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}}};let hm;hm=Symbol.toStringTag;var Pk=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[hm]="BlobDownloadBuilder",this.promise=null}asStream(){return new jk(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}}};const Ik={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$u={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ok=class{constructor(e,t={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=bl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,s,r){var n=this;try{let i;const a=U(U({},$u),r);let o=U(U({},n.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",n.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),l&&!i.has("metadata")&&i.append("metadata",n.encodeMetadata(l))):(i=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=n.toBase64(n.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),r?.headers&&(o=U(U({},o),r.headers));const c=n._removeEmptyFolders(t),d=n._getFinalPath(c),h=await(e=="PUT"?ro:Je)(n.fetch,`${n.url}/object/${d}`,i,U({headers:o},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Z(i))return{data:null,error:i};throw i}}async upload(e,t,s){return this.uploadOrUpdate("POST",e,t,s)}async uploadToSignedUrl(e,t,s,r){var n=this;const i=n._removeEmptyFolders(e),a=n._getFinalPath(i),o=new URL(n.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const c=U({upsert:$u.upsert},r),d=U(U({},n.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:i,fullPath:(await ro(n.fetch,o.toString(),l,{headers:d})).Key},error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Z(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var s=this;try{let r=s._getFinalPath(e);const n=U({},s.headers);t?.upsert&&(n["x-upsert"]="true");const i=await Je(s.fetch,`${s.url}/object/upload/sign/${r}`,{},{headers:n}),a=new URL(s.url+i.url),o=a.searchParams.get("token");if(!o)throw new di("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async update(e,t,s){return this.uploadOrUpdate("PUT",e,t,s)}async move(e,t,s){var r=this;try{return{data:await Je(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async copy(e,t,s){var r=this;try{return{data:{path:(await Je(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async createSignedUrl(e,t,s){var r=this;try{let n=r._getFinalPath(e),i=await Je(r.fetch,`${r.url}/object/sign/${n}`,U({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:r.headers});const a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async createSignedUrls(e,t,s){var r=this;try{const n=await Je(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>U(U({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}download(e,t){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(t?.transform||{}),n=r?`?${r}`:"",i=this._getFinalPath(e),a=()=>Sr(this.fetch,`${this.url}/${s}/${i}${n}`,{headers:this.headers,noResolveJson:!0});return new Pk(a,this.shouldThrowOnError)}async info(e){var t=this;const s=t._getFinalPath(e);try{return{data:so(await Sr(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const s=t._getFinalPath(e);try{return await Rk(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r)&&r instanceof to){const n=r.originalError;if([400,404].includes(n?.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],n=t?.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&r.push(n);const i=typeof t?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(t?.transform||{});a!==""&&r.push(a);let o=r.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${s}${o}`)}}}async remove(e){var t=this;try{return{data:await wl(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async list(e,t,s){var r=this;try{const n=U(U(U({},Ik),t),{},{prefix:e||""});return{data:await Je(r.fetch,`${r.url}/object/list/${r.bucketId}`,n,{headers:r.headers},s),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async listV2(e,t){var s=this;try{const r=U({},e);return{data:await Je(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,r,{headers:s.headers},t),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const fm="2.91.0",pm={"X-Client-Info":`storage-js/${fm}`};var Nk=class{constructor(e,t={},s,r){this.shouldThrowOnError=!1;const n=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href.replace(/\/$/,""),this.headers=U(U({},pm),t),this.fetch=bl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const s=t.listBucketOptionsToQueryString(e);return{data:await Sr(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async getBucket(e){var t=this;try{return{data:await Sr(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async createBucket(e,t={public:!1}){var s=this;try{return{data:await Je(s.fetch,`${s.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var s=this;try{return{data:await ro(s.fetch,`${s.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await Je(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async deleteBucket(e){var t=this;try{return{data:await wl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Mk=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},pm),t),this.fetch=bl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Je(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async listBuckets(e){var t=this;try{const s=new URLSearchParams;e?.limit!==void 0&&s.set("limit",e.limit.toString()),e?.offset!==void 0&&s.set("offset",e.offset.toString()),e?.sortColumn&&s.set("sortColumn",e.sortColumn),e?.sortOrder&&s.set("sortOrder",e.sortOrder),e?.search&&s.set("search",e.search);const r=s.toString(),n=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Sr(t.fetch,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async deleteBucket(e){var t=this;try{return{data:await wl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}from(e){var t=this;if(!Sk(e))throw new di("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new bk({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(s,{get(n,i){const a=n[i];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(n,o),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const xl={"X-Client-Info":`storage-js/${fm}`,"Content-Type":"application/json"};var mm=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ne(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Ji=class extends mm{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$k=class extends mm{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const _l=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Dk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Du=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Lk=async(e,t,s)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!s?.noResolveJson){const r=e.status||500,n=e;if(typeof n.json=="function")n.json().then(i=>{const a=i?.statusCode||i?.code||r+"";t(new Ji(Du(i),r,a))}).catch(()=>{const i=r+"";t(new Ji(n.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";t(new Ji(n.statusText||`HTTP ${r} error`,r,i))}}else t(new $k(Du(e),e))},Uk=(e,t,s,r)=>{const n={method:e,headers:t?.headers||{}};return r?(Dk(r)?(n.headers=U({"Content-Type":"application/json"},t?.headers),n.body=JSON.stringify(r)):n.body=r,U(U({},n),s)):n};async function Fk(e,t,s,r,n,i){return new Promise((a,o)=>{e(s,Uk(t,r,n,i)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>Lk(l,o,r))})}async function Me(e,t,s,r,n){return Fk(e,"POST",t,r,n,s)}var Vk=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},xl),t),this.fetch=_l(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}async getIndex(e,t){var s=this;try{return{data:await Me(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}async deleteIndex(e,t){var s=this;try{return{data:await Me(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:s.headers})||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}}},Bk=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},xl),t),this.fetch=_l(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Me(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}async getVectors(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Me(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}async queryVectors(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Me(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}},zk=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},xl),t),this.fetch=_l(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}async getBucket(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}async listBuckets(e={}){var t=this;try{return{data:await Me(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}async deleteBucket(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}}},qk=class extends zk{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Gk(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,s=this;return t().call(s,e)}async getBucket(e){var t=()=>super.getBucket,s=this;return t().call(s,e)}async listBuckets(e={}){var t=()=>super.listBuckets,s=this;return t().call(s,e)}async deleteBucket(e){var t=()=>super.deleteBucket,s=this;return t().call(s,e)}},Gk=class extends Vk{constructor(e,t,s,r){super(e,t,r),this.vectorBucketName=s}async createIndex(e){var t=()=>super.createIndex,s=this;return t().call(s,U(U({},e),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,s=this;return t().call(s,U(U({},e),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,e)}index(e){return new Hk(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Hk=class extends Bk{constructor(e,t,s,r,n){super(e,t,n),this.vectorBucketName=s,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,s=this;return t().call(s,U(U({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(e){var t=()=>super.getVectors,s=this;return t().call(s,U(U({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,s=this;return t().call(s,U(U({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,s=this;return t().call(s,U(U({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,s=this;return t().call(s,U(U({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},Kk=class extends Nk{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new Ok(this.url,this.headers,e,this.fetch)}get vectors(){return new qk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Mk(this.url+"/iceberg",this.headers,this.fetch)}};const gm="2.91.0",vs=30*1e3,no=3,Yi=no*vs,Wk="http://localhost:9999",Jk="supabase.auth.token",Yk={"X-Client-Info":`gotrue-js/${gm}`},io="X-Supabase-Api-Version",ym={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Qk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xk=600*1e3;class kr extends Error{constructor(t,s,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function $(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Zk extends kr{constructor(t,s,r){super(t,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function eE(e){return $(e)&&e.name==="AuthApiError"}class Gt extends kr{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class vt extends kr{constructor(t,s,r,n){super(t,r,n),this.name=s,this.status=r}}class Ie extends vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tE(e){return $(e)&&e.name==="AuthSessionMissingError"}class ds extends vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zr extends vt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class en extends vt{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sE(e){return $(e)&&e.name==="AuthImplicitGrantRedirectError"}class Lu extends vt{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rE extends vt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ao extends vt{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Qi(e){return $(e)&&e.name==="AuthRetryableFetchError"}class Uu extends vt{constructor(t,s,r){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class oo extends vt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const $n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fu=` 	
\r=`.split(""),nE=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Fu.length;t+=1)e[Fu[t].charCodeAt(0)]=-2;for(let t=0;t<$n.length;t+=1)e[$n[t].charCodeAt(0)]=t;return e})();function Vu(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;s($n[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;s($n[r]),t.queuedBits-=6}}function vm(e,t,s){const r=nE[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Bu(e){const t=[],s=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{oE(a,r,s)};for(let a=0;a<e.length;a+=1)vm(e.charCodeAt(a),n,i);return t.join("")}function iE(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function aE(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(e.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}iE(r,t)}}function oE(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function js(e){const t=[],s={queue:0,queuedBits:0},r=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)vm(e.charCodeAt(n),s,r);return new Uint8Array(t)}function lE(e){const t=[];return aE(e,s=>t.push(s)),new Uint8Array(t)}function Wt(e){const t=[],s={queue:0,queuedBits:0},r=n=>{t.push(n)};return e.forEach(n=>Vu(n,s,r)),Vu(null,s,r),t.join("")}function cE(e){return Math.round(Date.now()/1e3)+e}function uE(){return Symbol("auth-callback")}const be=()=>typeof window<"u"&&typeof document<"u",Dt={tested:!1,writable:!1},bm=()=>{if(!be())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Dt.tested)return Dt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Dt.tested=!0,Dt.writable=!0}catch{Dt.tested=!0,Dt.writable=!1}return Dt.writable};function dE(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{t[n]=r}),t}const wm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),hE=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",bs=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Lt=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ve=async(e,t)=>{await e.removeItem(t)};class hi{constructor(){this.promise=new hi.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}hi.promiseConstructor=Promise;function Xi(e){const t=e.split(".");if(t.length!==3)throw new oo("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Qk.test(t[r]))throw new oo("JWT not in base64url format");return{header:JSON.parse(Bu(t[0])),payload:JSON.parse(Bu(t[1])),signature:js(t[2]),raw:{header:t[0],payload:t[1]}}}async function fE(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function pE(e,t){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){n(a);return}}})()})}function mE(e){return("0"+e.toString(16)).substr(-2)}function gE(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(t),Array.from(t,mE).join("")}async function yE(e){const s=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function vE(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await yE(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hs(e,t,s=!1){const r=gE();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await bs(e,`${t}-code-verifier`,n);const i=await vE(r);return[i,r===i?"plain":"s256"]}const bE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wE(e){const t=e.headers.get(io);if(!t||!t.match(bE))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function xE(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function _E(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const SE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fs(e){if(!SE.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zi(){const e={};return new Proxy(e,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kE(e,t){return new Proxy(e,{get:(s,r,n)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,n)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,r,n)}})}function zu(e){return JSON.parse(JSON.stringify(e))}const Bt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),EE=[502,503,504];async function qu(e){var t;if(!hE(e))throw new ao(Bt(e),0);if(EE.includes(e.status))throw new ao(Bt(e),e.status);let s;try{s=await e.json()}catch(i){throw new Gt(Bt(i),i)}let r;const n=wE(e);if(n&&n.getTime()>=ym["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Uu(Bt(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ie}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Uu(Bt(s),e.status,s.weak_password.reasons);throw new Zk(Bt(s),e.status||500,r)}const TE=(e,t,s,r)=>{const n={method:e,headers:t?.headers||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function L(e,t,s,r){var n;const i=Object.assign({},r?.headers);i[io]||(i[io]=ym["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(n=r?.query)!==null&&n!==void 0?n:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await CE(e,t,s+o,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function CE(e,t,s,r,n,i){const a=TE(t,r,n,i);let o;try{o=await e(s,Object.assign({},a))}catch(l){throw console.error(l),new ao(Bt(l),0)}if(o.ok||await qu(o),r?.noResolveJson)return o;try{return await o.json()}catch(l){await qu(l)}}function Ke(e){var t;let s=null;jE(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=cE(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:r},error:null}}function Gu(e){const t=Ke(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Et(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function AE(e){return{data:e,error:null}}function RE(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=e,a=ri(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Hu(e){return e}function jE(e){return e.access_token&&e.refresh_token&&e.expires_in}const ea=["global","local","others"];class PE{constructor({url:t="",headers:s={},fetch:r}){this.url=t,this.headers=s,this.fetch=wm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=ea[0]){if(ea.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ea.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,s={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Et})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:s}=t,r=ri(t,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r?.newEmail,delete n.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:RE,redirectTo:s?.redirectTo})}catch(s){if($(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Et})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,r,n,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Hu});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if($(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){fs(t);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Et})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){fs(t);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Et})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,s=!1){fs(t);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Et})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){fs(t.userId);try{const{data:s,error:r}=await L(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if($(s))return{data:null,error:s};throw s}}async _deleteFactor(t){fs(t.userId),fs(t.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if($(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,r,n,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await L(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Hu});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if($(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if($(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await L(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if($(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await L(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await L(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if($(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if($(s))return{data:null,error:s};throw s}}}function Ku(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const ps={debug:!!(globalThis&&bm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xm extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class IE extends xm{}async function OE(e,t,s){ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ps.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new IE(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ps.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function NE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function _m(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function ME(e){return parseInt(e,16)}function $E(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function DE(e){var t;const{chainId:s,domain:r,expirationTime:n,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=_m(e.address),m=d?`${d}://${r}`:r,g=e.statement?`${e.statement}
`:"",y=`${m} wants you to sign in with your Ethereum account:
${p}

${g}`;let w=`URI: ${h}
Version: ${f}
Chain ID: ${s}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(n&&(w+=`
Expiration Time: ${n.toISOString()}`),o&&(w+=`
Not Before: ${o.toISOString()}`),l&&(w+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);x+=`
- ${v}`}w+=x}return`${y}
${w}`}class ie extends Error{constructor({message:t,code:s,cause:r,name:n}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=n??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=s}}class Dn extends ie{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function LE({error:e,options:t}){var s,r,n;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ie({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new ie({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ie({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ie({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ie({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ie({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new ie({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ie({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(Sm(a)){if(i.rp.id!==a)return new ie({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ie({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ie({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function UE({error:e,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ie({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ie({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(Sm(r)){if(s.rpId!==r)return new ie({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ie({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class FE{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const VE=new FE;function BE(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:s,excludeCredentials:r}=e,n=ri(e,["challenge","user","excludeCredentials"]),i=js(t).buffer,a=Object.assign(Object.assign({},s),{id:js(s.id).buffer}),o=Object.assign(Object.assign({},n),{challenge:i,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:js(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function zE(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:s}=e,r=ri(e,["challenge","allowCredentials"]),n=js(t).buffer,i=Object.assign(Object.assign({},r),{challenge:n});if(s&&s.length>0){i.allowCredentials=new Array(s.length);for(let a=0;a<s.length;a++){const o=s[a];i.allowCredentials[a]=Object.assign(Object.assign({},o),{id:js(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function qE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const s=e;return{id:e.id,rawId:e.id,response:{attestationObject:Wt(new Uint8Array(e.response.attestationObject)),clientDataJSON:Wt(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function GE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const s=e,r=e.getClientExtensionResults(),n=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Wt(new Uint8Array(n.authenticatorData)),clientDataJSON:Wt(new Uint8Array(n.clientDataJSON)),signature:Wt(new Uint8Array(n.signature)),userHandle:n.userHandle?Wt(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Sm(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Wu(){var e,t;return!!(be()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function HE(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Dn("Browser returned unexpected credential type",t)}:{data:null,error:new Dn("Empty credential response",t)}}catch(t){return{data:null,error:LE({error:t,options:e})}}}async function KE(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Dn("Browser returned unexpected credential type",t)}:{data:null,error:new Dn("Empty credential response",t)}}catch(t){return{data:null,error:UE({error:t,options:e})}}}const WE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},JE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ln(...e){const t=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),s=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),r={};for(const n of e)if(n)for(const i in n){const a=n[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(s(a))r[i]=a;else if(t(a)){const o=r[i];t(o)?r[i]=Ln(o,a):r[i]=Ln(a)}else r[i]=a}return r}function YE(e,t){return Ln(WE,e,t||{})}function QE(e,t){return Ln(JE,e,t||{})}class XE{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:r,signal:n},i){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!a)return{data:null,error:o};const l=n??VE.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=YE(a.webauthn.credential_options.publicKey,i?.create),{data:d,error:h}=await HE({publicKey:c,signal:l});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=QE(a.webauthn.credential_options.publicKey,i?.request),{data:d,error:h}=await KE(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return $(a)?{data:null,error:a}:{data:null,error:new Gt("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new kr("rpId is required for WebAuthn authentication")};try{if(!Wu())return{data:null,error:new Gt("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:r},signal:n},{request:i});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:l.type,rpId:s,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return $(a)?{data:null,error:a}:{data:null,error:new Gt("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new kr("rpId is required for WebAuthn registration")};try{if(!Wu())return{data:null,error:new Gt("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d?.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:n},{create:i});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:s,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return $(a)?{data:null,error:a}:{data:null,error:new Gt("Unexpected error in register",a)}}}}NE();const ZE={url:Wk,storageKey:Jk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ju(e,t,s){return await s()}const ms={};class Er{get jwks(){var t,s;return(s=(t=ms[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){ms[this.storageKey]=Object.assign(Object.assign({},ms[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=ms[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ms[this.storageKey]=Object.assign(Object.assign({},ms[this.storageKey]),{cachedAt:t})}constructor(t){var s,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},ZE),t);if(this.storageKey=i.storageKey,this.instanceID=(s=Er.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Er.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&be()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new PE({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=wm(i.fetch),this.lock=i.lock||Ju,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&be()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=OE:this.lock=Ju,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new XE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:bm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ku(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Ku(this.memoryStorage)),be()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${gm}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},r="none";if(be()&&(s=dE(window.location.href),this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce")),be()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),sE(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return $(s)?this._returnResult({error:s}):this._returnResult({error:new Gt("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,r,n;try{const i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=t?.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ke}),{data:a,error:o}=i;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if($(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var s,r,n;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await hs(this.storage,this.storageKey)),i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(s=f?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:m},xform:Ke})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},channel:(n=f?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Ke})}else throw new Zr("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return await ve(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await ve(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:a,options:o}=t;s=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Gu})}else if("phone"in t){const{phone:i,password:a,options:o}=t;s=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Gu})}else throw new Zr("You must provide either an email or phone number and a password");const{data:r,error:n}=s;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const i=new ds;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if($(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,r,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,r,n,i,a,o,l,c,d,h,f;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:g,wallet:y,statement:w,options:x}=t;let v;if(be())if(typeof y=="object")v=y;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")v=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const S=new URL((s=x?.url)!==null&&s!==void 0?s:window.location.href),k=await v.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=_m(k[0]);let C=(r=x?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!C){const A=await v.request({method:"eth_chainId"});C=ME(A)}const _={domain:S.host,address:T,statement:w,uri:S.href,version:"1",chainId:C,nonce:(n=x?.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(a=(i=x?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=x?.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=x?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=x?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=DE(_),m=await v.request({method:"personal_sign",params:[$E(p),T]})}try{const{data:g,error:y}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ke});if(y)throw y;if(!g||!g.session||!g.user){const w=new ds;return this._returnResult({data:{user:null,session:null},error:w})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if($(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var s,r,n,i,a,o,l,c,d,h,f,p;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:y,wallet:w,statement:x,options:v}=t;let S;if(be())if(typeof w=="object")S=w;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))S=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=w}const k=new URL((s=v?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in S&&S.signIn){const T=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),x?{statement:x}:null));let C;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")C=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)C=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)m=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${k.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(n=(r=v?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=v?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((o=v?.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const T=await S.signMessage(new TextEncoder().encode(m),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=T}}try{const{data:y,error:w}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Wt(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ke});if(w)throw w;if(!y||!y.session||!y.user){const x=new ds;return this._returnResult({data:{user:null,session:null},error:x})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if($(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){const s=await Lt(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{if(!r&&this.flowType==="pkce")throw new rE;const{data:i,error:a}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ke});if(await ve(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const o=new ds;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",i.session)},0)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(await ve(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:s,provider:r,token:n,access_token:i,nonce:a}=t,o=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Ke}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new ds;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(s){if($(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,r,n,i,a;try{if("email"in t){const{email:o,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await hs(this.storage,this.storageKey));const{error:h}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:o,options:l}=t,{data:c,error:d}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:d})}throw new Zr("You must provide either an email or phone number.")}catch(o){if(await ve(this.storage,`${this.storageKey}-code-verifier`),$(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var s,r;try{let n,i;"options"in t&&(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Ke});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(n){if($(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(t){var s,r,n,i,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await hs(this.storage,this.storageKey));const c=await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=t?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:AE});return!((i=c.data)===null||i===void 0)&&i.url&&be()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await ve(this.storage,`${this.storageKey}-code-verifier`),$(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;if(r)throw r;if(!s)throw new Ie;const{error:n}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(t){if($(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:r,type:n,options:i}=t,{error:a}=await L(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:n,options:i}=t,{data:a,error:o}=await L(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:o})}throw new Zr("You must provide either an email or phone number and a type")}catch(s){if($(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Lt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Yi:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await Lt(this.userStorage,this.storageKey+"-user");a?.user?t.user=a.user:t.user=Zi()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=kE(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Et}):await this._useSession(async s=>{var r,n,i;const{data:a,error:o}=s;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ie}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Et})})}catch(s){if($(s))return tE(s)&&(await this._removeSession(),await ve(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Ie;const a=n.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await hs(this.storage,this.storageKey));const{data:c,error:d}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Et});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await ve(this.storage,`${this.storageKey}-code-verifier`),$(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ie;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:a}=Xi(t.access_token);if(a.exp&&(r=a.exp,n=r<=s),n){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(s){if($(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var r;if(!t){const{data:a,error:o}=s;if(o)throw o;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new Ie;const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if($(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!be())throw new en("No browser detected.");if(t.error||t.error_description||t.error_code)throw new en(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Lu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new en("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Lu("No code detected.");const{data:x,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=t;if(!i||!o||!a||!c)throw new en("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=vs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:t.type},error:null})}catch(r){if($(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Lt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({error:i});const a=(r=n.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(eE(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await ve(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=uE(),r={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:a}=s;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await hs(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(await ve(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var a,o,l,c,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return be()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:t.provider,url:r?.url},error:null})}catch(r){if($(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var r;try{const{error:n,data:{session:i}}=s;if(n)throw n;const{options:a,provider:o,token:l,access_token:c,nonce:d}=t,h=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Ke}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new ds}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(n){if(await ve(this.storage,`${this.storageKey}-code-verifier`),$(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)throw a;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await pE(async n=>(n>0&&await fE(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ke})),(n,i)=>{const a=200*Math.pow(2,n);return i&&Qi(i)&&Date.now()+a-r<vs})}catch(r){if(this._debug(s,"error",r),$(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",r),be()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Lt(this.storage,this.storageKey);if(n&&this.userStorage){let a=await Lt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:n.user},await bs(this.userStorage,this.storageKey+"-user",a)),n.user=(t=a?.user)!==null&&t!==void 0?t:Zi()}else if(n&&!n.user&&!n.user){const a=await Lt(this.storage,this.storageKey+"-user");a&&a?.user?(n.user=a.user,await ve(this.storage,this.storageKey+"-user"),await bs(this.storage,this.storageKey,n)):n.user=Zi()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Yi;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Yi}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Qi(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(n.access_token);!o&&a?.user?(n.user=a.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var s,r;if(!t)throw new Ie;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new hi;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Ie;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),$(i)){const a={data:null,error:i};return Qi(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,s,r=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,s)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ve(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await bs(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const i=zu(n);await bs(this.storage,this.storageKey,i)}else{const n=zu(s);await bs(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ve(this.storage,this.storageKey),await ve(this.storage,this.storageKey+"-code-verifier"),await ve(this.storage,this.storageKey+"-user"),this.userStorage&&await ve(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&be()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),vs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-t)/vs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${vs}ms, refresh threshold is ${no} ticks`),n<=no&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof xm)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!be()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await hs(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(r?.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r?.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?this._returnResult({data:null,error:i}):await L(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await L(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((n=l?.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?qE(t.webauthn.credential_response):GE(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await L(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const a=await L(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:BE(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:zE(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=s?.factors)!==null&&t!==void 0?t:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var t,s;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Xi(r.access_token);let a=null;i.aal&&(a=i.aal);let o=a;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(o="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?await L(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ie})})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ie});const a=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&be()&&!s?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ie});const a=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&be()&&!s?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;return r?this._returnResult({data:null,error:r}):s?await L(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new Ie})})}catch(t){if($(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?(await L(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ie})})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let r=s.keys.find(o=>o.kid===t);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+Xk>n)return r;const{data:i,error:a}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,s={}){try{let r=t;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:n,payload:i,signature:a,raw:{header:o,payload:l}}=Xi(r);s?.allowExpired||xE(i.exp);const c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:n,signature:a},error:null}}const d=_E(n.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,lE(`${o}.${l}`)))throw new oo("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}}Er.nextInstanceID={};const eT=Er,tT="2.91.0";let ir="";typeof Deno<"u"?ir="deno":typeof document<"u"?ir="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ir="react-native":ir="node";const sT={"X-Client-Info":`supabase-js-${ir}/${tT}`},rT={headers:sT},nT={schema:"public"},iT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aT={};function Tr(e){"@babel/helpers - typeof";return Tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr(e)}function oT(e,t){if(Tr(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var r=s.call(e,t);if(Tr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lT(e){var t=oT(e,"string");return Tr(t)=="symbol"?t:t+""}function cT(e,t,s){return(t=lT(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Yu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,r)}return s}function se(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Yu(Object(s),!0).forEach(function(r){cT(e,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yu(Object(s)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))})}return e}const uT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),dT=()=>Headers,hT=(e,t,s)=>{const r=uT(s),n=dT();return async(i,a)=>{var o;const l=(o=await t())!==null&&o!==void 0?o:e;let c=new n(a?.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,se(se({},a),{},{headers:c}))}};function fT(e){return e.endsWith("/")?e:e+"/"}function pT(e,t){var s,r;const{db:n,auth:i,realtime:a,global:o}=e,{db:l,auth:c,realtime:d,global:h}=t,f={db:se(se({},l),n),auth:se(se({},c),i),realtime:se(se({},d),a),storage:{},global:se(se(se({},h),o),{},{headers:se(se({},(s=h?.headers)!==null&&s!==void 0?s:{}),(r=o?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function mT(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var gT=class extends eT{constructor(e){super(e)}},yT=class{constructor(e,t,s){var r,n;this.supabaseUrl=e,this.supabaseKey=t;const i=mT(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,o={db:nT,realtime:aT,auth:se(se({},iT),{},{storageKey:a}),global:rT},l=pT(s??{},o);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(n=l.global.headers)!==null&&n!==void 0?n:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=hT(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(se({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new YS(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Kk(this.storageUrl.href,this.headers,this.fetch,s?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new GS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,s;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:n,storageKey:i,flowType:a,lock:o,debug:l,throwOnError:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gT({url:this.authUrl.href,headers:se(se({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:n,flowType:a,lock:o,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new fk(this.realtimeUrl.href,se(se({},e),{},{params:se(se({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const vT=(e,t,s)=>new yT(e,t,s);function bT(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}bT()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const wT="https://dizzjfijsmxdlnfqydfk.supabase.co",xT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpenpqZmlqc214ZGxuZnF5ZGZrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5Njg4MTIsImV4cCI6MjA4MjU0NDgxMn0.Hh--yKp8SBLbY7EgQVGJ63vwc5XQlO86LghZCGAKVl4",_T=vT(wT,xT),km=async(e,t=.5,s=3)=>{const{data:r,error:n}=await _T.rpc("match_inventory",{query_embedding:e,match_threshold:t,match_count:s});return n?(console.error("Error in semantic search:",n),[]):r},ST=async e=>{try{const t=Fs(he,"usage_logs");await Vs(t,{...e,timestamp:Bs()})}catch(t){console.error("Billing Log Error:",t)}},kT=e=>e/1e3*.002,at=()=>{const e="AIzaSyDm1uXN61V7OI-iRh_Dxbyo-dfDR4u5hYU";return new BS(e)},ta={suv:"Tenemos excelentes SUVs como la Hyundai Tucson y Santa Fe. Te gustara ver detalles de alguna?",precio:"Nuestros precios son muy competitivos y transparentes. Buscas algo en un rango especfico?",oferta:"S, tenemos ofertas especiales de 0% APR en modelos seleccionados. Pregntame por la Santa Fe!",financiamiento:"Trabajamos con todos los bancos locales. Te gustara pre-cualificar ahora mismo?",horario:"Estamos abiertos de Lunes a Sbado de 9am a 6pm. Te esperamos!",telefono:"Puedes llamarnos al 787-368-2880 para atencin inmediata.","test drive":"Claro! Podemos agendar tu prueba de manejo hoy mismo. Qu modelo te interesa?",default:"Lo siento, mi conexin con el cerebro central est un poco lenta. Pero estoy aqu para ayudarte. Puedes intentar preguntar de otra forma o llamar al 787-368-2880?"},ET=e=>{const t=(e||"").toLowerCase();for(const s in ta)if(t.includes(s))return ta[s];return ta.default},Em=async(e,t,s=[],r)=>{const n=t.reduce((c,d)=>{const h=d.type||"Otros";return c[h]||(c[h]=[]),c[h].push(`- ${d.name}: $${(d.price||0).toLocaleString()} ${d.badge?`[${d.badge}]`:""}`),c},{});let i="";try{const h=await at().getGenerativeModel({model:"text-embedding-004"}).embedContent(e),f=await km(h.embedding.values);f.length>0&&(i=`
 COINCIDENCIAS RELEVANTES ENCONTRADAS:
`+f.map(p=>`- ${p.car_name}: ${p.content}`).join(`
`))}catch(c){console.warn("Semantic Search failed, falling back to basic inventory:",c)}const a=Object.entries(n).map(([c,d])=>` ${c.toUpperCase()}:
${d.join(`
`)}`).join(`

`)+i,o=s.map(c=>`${c.role==="user"?"CLIENTE":"AGENTE"}: ${c.text}`).join(`
`),l=r||`
    Eres "Richard IA", el consultor experto de ventas de Richard Automotive en Puerto Rico.
    Tu objetivo es agendar una prueba de manejo o venta.
    
    INVENTARIO ORGANIZADO:
    ${a||"No hay inventario disponible."}
    
    HISTORIAL:
    ${o}
    
    INSTRUCCIONES DE MARKETING PROACTIVO:
    1. S emptico y profesional. Usa emojis con moderacin.
    2. Responde SIEMPRE en espaol.
    3. CTA DINMICO: Si detectas inters serio, termina con: https://wa.me/17873682880?text=Hola
    4. Si no tenemos lo que busca, ofrece la opcin ms cercana.
  `;try{const f=(await(await at().getGenerativeModel({model:"gemini-2.0-flash",systemInstruction:l}).generateContent(e)).response).text(),p=localStorage.getItem("current_dealer_id")||"richard-automotive",m=(e.length+f.length+l.length)/4;return ST({dealerId:p,eventType:"ai_call",count:m,costEstimate:kT(m),metadata:{model:"gemini-2.0-flash",promptLength:e.length}}),f}catch(c){return console.warn("Gemini Error:",c),ET(e)}},TT=async e=>{const s=`
    Analiza este garaje: ${e.map(r=>`${r.name} ($${r.price})`).join(", ")}.
    
    TASK:
    1. Identify the user's spending power and lifestyle based on cars.
    2. Suggest 1 actionable improvement or trade-in.
    
    OUTPUT FORMAT:
    HTML simple (sin markdown block), use <p>, <strong>, <ul>.
  `;try{return(await at().getGenerativeModel({model:"gemini-2.0-flash"}).generateContent(s)).response.text()}catch{return"<p>Error de conexin con el asesor IA.</p>"}},Tm=async(e,t)=>{if(!t||t.length===0)return{persona:"Analista de Datos",matches:[]};const s=t.map(n=>({id:n.id,name:n.name,price:n.price,type:n.type})),r=`
    User Profile: "${e}". 
    Inventory: ${JSON.stringify(s)}.
    
    TASK:
    1. Analyze user needs (Reasoning).
    2. Match top 3 cars.
    3. Assign 0-100 score.
    
    RETURN JSON ONLY:
    {
      "reasoning": "string analyzing the user",
      "persona": "Creative Persona Name (e.g. 'Fantico de la Velocidad')",
      "matches": [
         { "carId": "id", "score": 95, "reason": "Why this matches" }
      ]
    }
  `;try{const a=(await at().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(r)).response.text();return JSON.parse(a)}catch{return{persona:"Error de Anlisis",matches:[]}}},Cm=async(e,t)=>{const s=`
    Compare ${e.name} vs ${t.name}.
    
    RETURN JSON ONLY:
    {
        "winnerId": "string (id of winner)",
        "reasoning": "Chain of thought explanation",
        "verdict": "Short final verdict",
        "categories": [
            { "name": "Potencia", "winner": "${e.name} or ${t.name}", "detail": "explanation" },
            { "name": "Economa", "winner": "...", "detail": "..." },
            { "name": "Confort", "winner": "...", "detail": "..." },
            { "name": "Tecnologa", "winner": "...", "detail": "..." }
        ]
    }
  `,n=await at().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(s);return JSON.parse(n.response.text())},Am=async e=>{try{const t=at().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}),r={inlineData:{data:e.replace(/^data:image\/\w+;base64,/,""),mimeType:"image/jpeg"}},i=await t.generateContent([`
        Analiza esta imagen de un vehculo.
        RETURN JSON ONLY:
        {
            "type": "SUV | Sedan | Truck | Coupe",
            "keywords": ["tag1", "tag2", "tag3"],
            "description": "Professional automated description.",
            "search_query": "Marca y modelo probable o descripcin fsica para bsqueda en inventario"
        }
    `,r]);return JSON.parse(i.response.text())}catch{throw new Error("No pudimos identificar el vehculo.")}},Rm=async e=>{const t=`
    Role: Senior Sales Executive.
    Product: ${e.name}, Price: $${e.price}, Type: ${e.type}.
    Task: Write a short, punchy, persuasive 1-paragraph pitch (HTML <p>) to sell this specific car.
    Focus on value and emotion. Spanish.
    
    RETURN JSON ONLY:
    {
       "reasoning": "Internal thought process",
       "pitch": "Final sales pitch text"
    }
  `;try{const r=await at().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(t);return JSON.parse(r.response.text()).pitch||`Este ${e.name} es una oportunidad nica!`}catch{return`Este ${e.name} es increble! Ven a verlo hoy mismo.`}},CT=async e=>{const t=at().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}),s=`Write blog post about ${e}. JSON: { title, excerpt, content, tags }.`;try{const r=await t.generateContent(s),n=JSON.parse(r.response.text());return{id:Date.now().toString(),title:n.title,excerpt:n.excerpt,content:n.content,author:"Richard AI",date:new Date().toLocaleDateString(),imageUrl:"https://images.unsplash.com/photo-1492144534655-ae79c964c9d7",tags:n.tags}}catch{throw new Error("Blog Gen Error")}},AT=async e=>{try{const t=at().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}),s=e.map(i=>({inlineData:{data:i.replace(/^data:image\/\w+;base64,/,""),mimeType:"image/jpeg"}})),n=await t.generateContent([`
            Analyze these vehicle images for trade-in valuation.
            RETURN JSON ONLY:
            {
                "condition": "Excellent | Good | Fair | Poor",
                "defects": ["scratch on bumper", "dent on door"],
                "estimatedValueAdjustment": 0.95 (multiplier),
                "reasoning": "Chain of thought analysis of visible condition"
            }
        `,...s]);return JSON.parse(n.response.text())}catch{return{condition:"Good",defects:[],estimatedValueAdjustment:1,reasoning:"Error"}}},RT=async e=>{try{const s=await at().getGenerativeModel({model:"text-embedding-004"}).embedContent(e);return await km(s.embedding.values)}catch(t){return console.error("Unified semantic search failed:",t),[]}},jT=Object.freeze(Object.defineProperty({__proto__:null,analyzeCarImage:Am,analyzeGarageSelection:TT,analyzeTradeInImages:AT,calculateNeuralMatch:Tm,compareCars:Cm,generateBlogPost:CT,generateCarPitch:Rm,getAIResponse:Em,searchSemanticInventoryByText:RT},Symbol.toStringTag,{value:"Module"})),PT=({car:e,onClose:t})=>{const[s,r]=b.useState(0),[n,i]=b.useState(0),[a,o]=b.useState(84),[l,c]=b.useState(.059),[d,h]=b.useState(0),[f,p]=b.useState("calculator"),[m,g]=b.useState(""),[y,w]=b.useState(!1),[x,v]=b.useState({}),S=K.useMemo(()=>{const E=s===""?0:s,j=n===""?0:n,M=Math.max(0,e.price-E-j);if(M<=0)return 0;const V=l/12;if(V===0)return Math.round(M/a);const Q=V*Math.pow(1+V,a),F=Math.pow(1+V,a)-1;return Math.round(M*(Q/F))},[s,n,a,l,e.price]),k=b.useRef(null);b.useEffect(()=>{const E=document.activeElement;k.current&&k.current.focus();const j=M=>{M.key==="Escape"&&t()};return document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j),E?.focus()}},[t]);const T=E=>{p(E),E==="insight"&&!m&&!y&&(w(!0),Rm(e).then(j=>g(j)).catch(()=>g("No pudimos conectar con Richard IA en este momento.")).finally(()=>w(!1)))},C=()=>{const E={};let j=!0;return s===""?(E.downPayment="Este campo es obligatorio.",j=!1):s<0&&(E.downPayment="El valor no puede ser negativo.",j=!1),v(E),j},_=()=>{if(f!=="calculator"&&T("calculator"),!C()){const M=document.getElementById("calculator-form");M?.classList.add("animate-shake"),setTimeout(()=>M?.classList.remove("animate-shake"),500);return}const E=s===""?0:s,j=n===""?0:n;window.open(`https://wa.me/17873682880?text=Hola, vi el anlisis de IA del ${e.name}. Me interesa con un pago estimado de $${S}/mes (Pronto: $${E}, TradeIn: $${j}, Trmino: ${a} meses).`,"_blank")},A=async()=>{const E={title:`Mira este ${e.name}`,text:`Encontr este ${e.name} en Richard Automotive! Precio: $${e.price.toLocaleString()}`,url:window.location.href};if(navigator.share)try{await navigator.share(E)}catch{}else{const j=`https://wa.me/?text=${encodeURIComponent(E.text)}`;window.open(j,"_blank")}};return u.jsxs("div",{ref:k,tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":"car-modal-title",className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0d2232]/80 backdrop-blur-xl animate-in fade-in",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-[40px] md:rounded-[60px] shadow-2xl p-4 md:p-6 relative flex flex-col lg:flex-row gap-6 overflow-hidden",children:[u.jsxs("div",{className:"absolute top-6 right-6 lg:top-8 lg:right-8 z-20 flex gap-2",children:[u.jsx("button",{onClick:A,className:"w-10 h-10 lg:w-12 lg:h-12 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md rounded-full flex items-center justify-center text-slate-500 dark:text-slate-300 hover:bg-[#00aed9] hover:text-white transition-all shadow-lg",title:"Compartir en Redes",children:u.jsx(rS,{size:20})}),u.jsx("button",{onClick:t,"aria-label":"Cerrar modal",className:"w-10 h-10 lg:w-12 lg:h-12 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md rounded-full flex items-center justify-center text-slate-500 dark:text-slate-300 hover:bg-rose-500 hover:text-white transition-all shadow-lg",children:u.jsx(mt,{size:20})})]}),u.jsxs("div",{className:"w-full lg:w-3/5 h-1/3 lg:h-full bg-white dark:bg-slate-800 rounded-[35px] lg:rounded-[45px] flex items-center justify-center p-8 lg:p-12 relative overflow-hidden group border border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"absolute inset-0 bg-slate-50/50 dark:bg-slate-900/20"}),u.jsx("img",{src:e.img,alt:e.name,loading:"lazy",decoding:"async",className:"relative z-10 max-w-full max-h-full object-contain transition-transform duration-700 group-hover:scale-105"}),e.badge&&u.jsx("div",{className:"absolute top-6 left-6 lg:top-8 lg:left-8 bg-[#00aed9] text-white px-4 py-2 rounded-full text-[10px] lg:text-xs font-black uppercase tracking-widest shadow-xl z-10",children:e.badge})]}),u.jsxs("div",{className:"w-full lg:w-2/5 flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"mb-6 px-2",children:[u.jsx("span",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-[0.3em]",children:e.type}),u.jsx("h2",{id:"car-modal-title",className:"text-3xl lg:text-4xl font-black text-slate-800 dark:text-white tracking-tighter leading-tight mt-1",children:e.name}),u.jsxs("p",{className:"text-xl font-bold text-slate-500 dark:text-slate-400 mt-2",children:["$",e.price.toLocaleString()]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 lg:p-8 rounded-[35px] text-center shadow-lg dark:shadow-none border border-slate-100 dark:border-slate-700 mb-6 shrink-0 transition-all",children:[u.jsxs("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center justify-center gap-2",children:[u.jsx(A_,{size:14})," Pago Mensual Estimado"]}),u.jsxs("div",{className:"text-5xl lg:text-6xl font-black premium-gradient text-transparent bg-clip-text tracking-tighter my-2",children:["$",S]})]}),u.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-800 p-1.5 rounded-2xl mb-4 shrink-0",children:[u.jsx("button",{onClick:()=>T("calculator"),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${f==="calculator"?"bg-white dark:bg-slate-600 text-[#00aed9] shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:"Calculadora"}),u.jsxs("button",{onClick:()=>T("insight"),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${f==="insight"?"bg-white dark:bg-slate-600 text-[#00aed9] shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[u.jsx(vr,{size:14})," Richard's Insight"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:f==="calculator"?u.jsxs("div",{id:"calculator-form",className:"space-y-6 pb-4 animate-in fade-in slide-in-from-bottom-2",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{htmlFor:"downPaymentInput",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[u.jsx(E_,{size:12})," Pronto ($) ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{id:"downPaymentInput",type:"number",min:"0",max:e.price,required:!0,value:s,onChange:E=>{r(E.target.value===""?"":Number(E.target.value)),x.downPayment&&v(j=>({...j,downPayment:void 0}))},className:`w-full px-5 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-2 rounded-[20px] text-lg font-bold outline-none transition-all placeholder:text-slate-300 
                                    ${x.downPayment?"border-red-500 focus:ring-4 focus:ring-red-500/20 bg-red-50 dark:bg-red-900/10":"border-transparent focus:ring-4 focus:ring-[#00aed9]/20"}`,placeholder:"0"}),u.jsx("input",{type:"range",min:"0",max:e.price,value:s||0,onChange:E=>r(Number(E.target.value)),className:"w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-[#00aed9]"}),x.downPayment&&u.jsxs("div",{className:"flex items-center gap-1 ml-2 text-xs font-bold text-red-500 animate-in fade-in slide-in-from-top-1",children:[u.jsx(ml,{size:12})," ",x.downPayment]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{htmlFor:"tradeInInput",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[u.jsx(N_,{size:12})," Trade-In ($)"]}),u.jsx("input",{id:"tradeInInput",type:"number",min:"0",max:e.price,value:n,onChange:E=>i(E.target.value===""?"":Number(E.target.value)),className:"w-full px-5 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-2 border-transparent rounded-[20px] focus:ring-4 focus:ring-[#00aed9]/20 text-lg font-bold outline-none transition-all placeholder:text-slate-300",placeholder:"0"}),u.jsx("input",{type:"range",min:"0",max:e.price,value:n||0,onChange:E=>i(Number(E.target.value)),className:"w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-[#00aed9]"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{htmlFor:"creditRateSelect",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2",children:["Puntuacin de Crdito ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("select",{id:"creditRateSelect",value:l,onChange:E=>c(Number(E.target.value)),className:"w-full px-6 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-none rounded-[20px] focus:ring-4 focus:ring-[#00aed9]/20 text-sm font-bold appearance-none cursor-pointer outline-none",children:[u.jsx("option",{value:.029,children:"Excelente (720+)"}),u.jsx("option",{value:.059,children:"Bueno (660+)"}),u.jsx("option",{value:.099,children:"Justo (600+)"}),u.jsx("option",{value:.129,children:"Trabajado (580+)"})]}),u.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:""})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[u.jsx(R_,{size:12})," Trmino ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:[60,72,84].map(E=>u.jsxs("button",{onClick:()=>o(E),className:`py-4 rounded-[20px] font-bold text-sm transition-all border-2 ${a===E?"bg-[#173d57] border-[#173d57] text-white shadow-lg transform scale-105":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 text-slate-500 hover:border-[#00aed9] hover:text-[#00aed9]"}`,children:[E," Meses"]},E))})]})]}):u.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 h-full flex flex-col",children:u.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-6 rounded-[30px]",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-[#00aed9]/10 rounded-full flex items-center justify-center",children:u.jsx(vr,{size:20,className:"text-[#00aed9]"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-black text-slate-800 dark:text-white uppercase tracking-widest",children:"Opinin Experta"}),u.jsx("p",{className:"text-[10px] text-slate-400",children:"Generado por Gemini AI"})]})]}),y?u.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 gap-4 py-8",children:[u.jsx(gn,{className:"animate-spin text-[#00aed9]",size:32}),u.jsx("p",{className:"text-xs font-bold uppercase tracking-widest animate-pulse",children:"Analizando especificaciones..."})]}):u.jsx("div",{className:"prose prose-sm dark:prose-invert leading-relaxed text-slate-600 dark:text-slate-300",children:u.jsx("div",{dangerouslySetInnerHTML:{__html:m.replace(/\*\*(.*?)\*\*/g,'<strong class="text-[#00aed9]">$1</strong>').replace(/\n/g,"<br/>")}})})]})})}),u.jsxs("button",{onClick:_,className:"mt-4 w-full py-5 premium-gradient text-white rounded-[25px] font-black text-xs md:text-sm uppercase tracking-[0.2em] flex items-center justify-center gap-3 shadow-2xl shadow-cyan-500/30 hover:scale-[1.02] active:scale-95 transition-all shrink-0",children:["Solicitar Aprobacin ",u.jsx(gl,{size:18})]})]})]}),u.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.3s ease-in-out;
        }
      `})]})},sa={ricardo:{id:"ricardo",name:"Ricardo",role:"Consultor de Ventas",avatar:"https://cdn-icons-png.flaticon.com/512/4128/4128176.png",style:"Entusiasta, persuasivo y experto en autos. Usa emojis de autos .",systemPrompt:"Eres Ricardo, el vendedor estrella de Richard Automotive. Tu objetivo es enamorar al cliente del auto. Enfcate en caractersticas, potencia, diseo y estilo de vida. S enrgico y amigable."},sofia:{id:"sofia",name:"Sofia",role:"Especialista Financiera",avatar:"https://cdn-icons-png.flaticon.com/512/4128/4128335.png",style:"Profesional, precisa y emptica. Usa emojis de dinero .",systemPrompt:"Eres Sofia, la experta en finanzas de Richard Automotive. Tu objetivo es explicar opciones de pago, crdito, trade-ins y pre-cualificacin. S clara, transparente y genera confianza matemtica."},system:{id:"system",name:"Richard AI",role:"Asistente General",avatar:"",style:"Neutral y eficiente.",systemPrompt:"Eres el router del sistema."}},IT=e=>{const t=e.toLowerCase();return t.match(/(precio|mensualidad|pago|credito|banco|interes|financiamiento|dinero|cuota|trade-in|valor|costo)/)?"sofia":(t.match(/(motor|color|asientos|rapido|turbo|espacio|maletero|familia|seguridad|tecnologia|pantalla)/),"ricardo")},OT=[" Qu SUVs tienes?"," Ofertas de financiamiento"," Hbridos disponibles"," Agendar Test Drive"],jm=({inventory:e})=>{const[t,s]=b.useState(!1),[r,n]=b.useState([]),[i,a]=b.useState("ricardo");b.useEffect(()=>{const F=localStorage.getItem("richard_chat_history");n(F?JSON.parse(F):[{role:"bot",text:"Hola! Soy Ricardo, tu experto en autos. Qu buscas hoy?",agent:"ricardo"}])},[]),b.useEffect(()=>{r.length>0&&localStorage.setItem("richard_chat_history",JSON.stringify(r))},[r]);const[o,l]=b.useState(""),[c,d]=b.useState(!1),h=b.useRef(null),[f,p]=b.useState(!1),[m,g]=b.useState(0),[y,w]=b.useState("idle"),[x,v]=b.useState([]),S=F=>v(B=>[`[${new Date().toLocaleTimeString()}] ${F}`,...B].slice(0,10)),[k,T]=b.useState(!1),[C,_]=b.useState(!1),A=b.useRef(null);b.useEffect(()=>()=>{A.current&&A.current.stop(),window.speechSynthesis.cancel()},[]);const E=F=>{window.speechSynthesis.cancel();const B=new SpeechSynthesisUtterance(F);B.lang="es-US",B.rate=1.1,B.pitch=1,B.onstart=()=>_(!0),B.onend=()=>_(!1),B.onerror=()=>_(!1),window.speechSynthesis.speak(B)},j=()=>{if(k){A.current?.stop(),T(!1);return}const F=window.SpeechRecognition||window.webkitSpeechRecognition;if(!F){alert("Tu navegador no soporta voz. Intenta con Chrome.");return}const B=new F;B.lang="es-ES",B.interimResults=!1,B.maxAlternatives=1,B.onstart=()=>{T(!0),S("Voice: Listening...")},B.onresult=G=>{const R=G.results[0][0].transcript;S(`Voice Result: "${R}"`),l(R),M(R,!0)},B.onerror=G=>{console.error("Speech error",G.error),T(!1)},B.onend=()=>T(!1),A.current=B,B.start()};b.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[r,c,t]);const M=async(F,B=!1)=>{window.speechSynthesis.cancel();const G=F||o;if(!G.trim()||c)return;if(G.trim()==="/debug"){p(!f),l("");return}const R=G.trim();l(""),n(qe=>[...qe,{role:"user",text:R}]),d(!0),w("loading");const Te=Date.now(),_e=IT(R);a(_e);const bt=sa[_e];try{S(`Routing to: ${_e}`);const qe=await Em(R,e,r.map(ne=>({role:ne.role,text:ne.text})),bt.systemPrompt),X=Date.now()-Te;g(X),w("success"),n(ne=>[...ne,{role:"bot",text:qe,agent:_e}]),B&&E(qe)}catch{w("error"),n(X=>[...X,{role:"bot",text:"Lo siento, tuve un error de conexin.",agent:"system"}])}finally{d(!1)}},V=()=>{const F=[{role:"bot",text:"Hola! Soy Ricardo. En qu puedo ayudarte?",agent:"ricardo"}];n(F),a("ricardo"),localStorage.setItem("richard_chat_history",JSON.stringify(F))},Q=sa[i];return u.jsxs("div",{className:"fixed bottom-6 right-6 z-[1000] flex flex-col items-end gap-4 font-sans",children:[t&&u.jsxs("div",{className:"w-[380px] h-[600px] flex flex-col rounded-[35px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 fade-in duration-300 border border-white/20 backdrop-blur-xl bg-white/90 dark:bg-[#0d2232]/90",children:[u.jsxs("header",{className:`relative p-6 text-white flex items-center justify-between shadow-lg z-10 transition-colors duration-500 
            ${i==="ricardo"?"bg-gradient-to-r from-[#173d57] to-[#0f2a3d]":i==="sofia"?"bg-gradient-to-r from-emerald-900 to-emerald-800":"bg-slate-900"}`,children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 mix-blend-overlay"}),u.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center shadow-lg border-2 border-white/20 overflow-hidden bg-white",children:u.jsx("img",{src:Q.avatar,alt:Q.name,className:"w-full h-full object-cover p-1"})}),u.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-[#173d57] rounded-full animate-pulse"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-black text-lg tracking-tight leading-none",children:Q.name}),u.jsx("p",{className:"text-[10px] text-white/80 font-bold uppercase tracking-widest mt-1 opacity-80 flex items-center gap-1",children:Q.role})]})]}),u.jsxs("div",{className:"flex gap-2 relative z-10",children:[u.jsx("button",{onClick:V,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-300 hover:text-white",title:"Reiniciar Chat",children:u.jsx(Zp,{size:18})}),u.jsx("button",{onClick:()=>s(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-300 hover:text-white",children:u.jsx(Wp,{size:22})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5 bg-slate-50/50 dark:bg-transparent",ref:h,children:[r.map((F,B)=>u.jsx("div",{className:`flex ${F.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2`,children:u.jsxs("div",{className:`max-w-[85%] p-4 text-sm leading-relaxed shadow-sm ${F.role==="user"?"bg-[#00aed9] text-white rounded-[20px] rounded-br-sm":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-[20px] rounded-bl-sm border border-slate-100 dark:border-slate-700"}`,children:[F.role==="bot"&&F.agent&&u.jsx("div",{className:"text-[9px] font-black uppercase text-slate-400 mb-1 tracking-widest",children:sa[F.agent]?.name||"Richard AI"}),F.text]})},B)),c&&u.jsx("div",{className:"flex justify-start animate-in fade-in",children:u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("span",{className:"text-[9px] text-slate-400 ml-2 animate-pulse",children:[Q.name," est escribiendo..."]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 rounded-[20px] rounded-bl-sm border border-slate-100 dark:border-slate-700 flex gap-1.5 items-center",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce [animation-delay:-0.15s]"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce [animation-delay:-0.3s]"})]})]})}),u.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-white/5 flex items-start gap-2 text-[9px] text-slate-500 italic leading-tight px-2",children:[u.jsx(ui,{size:12,className:"shrink-0 text-[#00aed9]"}),Gp]})]}),u.jsxs("div",{className:"p-4 bg-white dark:bg-[#0b1d2a] border-t border-slate-100 dark:border-slate-800 space-y-4 relative z-20",children:[r.length<3&&!c&&u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar mask-gradient-x",children:OT.map((F,B)=>u.jsx("button",{onClick:()=>M(F),className:"whitespace-nowrap px-4 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-600 dark:text-slate-300 text-xs font-bold rounded-full transition-all border border-slate-200 dark:border-slate-700 shrink-0",children:F},B))}),u.jsxs("div",{className:"relative flex items-center gap-2",children:[u.jsx("input",{type:"text",className:"w-full bg-slate-100 dark:bg-slate-900 rounded-full py-3.5 pl-5 pr-12 text-sm font-medium text-slate-900 dark:text-white border border-transparent focus:border-[#00aed9] focus:bg-white dark:focus:bg-slate-900 focus:ring-0 outline-none transition-all shadow-inner",placeholder:`Hablar con ${Q.name}...`,value:o,onChange:F=>l(F.target.value),onKeyDown:F=>F.key==="Enter"&&M()}),u.jsx("button",{onClick:()=>M(),disabled:!o.trim()||c,className:"absolute right-1.5 top-1.5 w-9 h-9 bg-[#00aed9] text-white rounded-full flex items-center justify-center hover:scale-105 active:scale-95 disabled:opacity-50 disabled:hover:scale-100 transition-all shadow-md",children:u.jsx(sS,{size:16,className:o.trim()?"translate-x-0.5":""})}),u.jsx("button",{onClick:j,className:`w-9 h-9 rounded-full flex items-center justify-center transition-all shadow-md ${k?"bg-red-500 text-white animate-pulse":"bg-slate-200 dark:bg-slate-800 text-slate-500 hover:text-[#00aed9]"}`,children:k?u.jsx(Qp,{size:16}):u.jsx(Xp,{size:16})})]}),u.jsxs("div",{className:"flex justify-center items-center gap-1.5 opacity-40",children:[u.jsx("div",{className:"w-2 h-0.5 bg-slate-400 rounded-full"}),u.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Multi-Agent System Active"}),u.jsx("div",{className:"w-2 h-0.5 bg-slate-400 rounded-full"})]})]})]}),u.jsx("button",{onClick:()=>s(!t),className:`group relative w-16 h-16 rounded-full flex items-center justify-center text-white shadow-[0_10px_40px_-10px_rgba(0,174,217,0.5)] transition-all duration-500 hover:scale-110 ${t?"bg-slate-800 rotate-90":"bg-gradient-to-r from-[#00aed9] to-blue-500"}`,children:t?u.jsx(mt,{size:28}):u.jsxs("div",{className:"relative",children:[u.jsx(Y_,{size:28,className:"fill-white"}),u.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-bounce"})]})})]})},NT=[{id:"family",label:"Familia & Seguridad",icon:u.jsx(k_,{size:14}),text:"Priorizo la seguridad y el espacio para mi familia."},{id:"adventure",label:"Aventura & Off-road",icon:u.jsx(X_,{size:14}),text:"Me gusta salir de la carretera y necesito capacidad todoterreno."},{id:"performance",label:"Velocidad & Sport",icon:u.jsx(V_,{size:14}),text:"Busco alto rendimiento, aceleracin y manejo deportivo."},{id:"commute",label:"Uso Diario",icon:u.jsx(Kp,{size:14}),text:"Necesito algo eficiente y cmodo para el trfico diario."},{id:"budget",label:"Econmico",icon:u.jsx(lS,{size:14}),text:"Mi prioridad es el ahorro de combustible y bajo costo de mantenimiento."},{id:"luxury",label:"Lujo & Tech",icon:u.jsx(C_,{size:14}),text:"Quiero la mejor tecnologa, confort premium y estatus."},{id:"eco",label:"Eco-Friendly",icon:u.jsx(G_,{size:14}),text:"Me interesa reducir mi huella de carbono (Hbrido/Elctrico)."}],Qu=["Extrayendo variables de estilo de vida...","Analizando patrones de conduccin...","Consultando base de datos global...","Calculando probabilidades de compatibilidad...","Generando perfil psicogrfico..."],MT=({inventory:e,onClose:t,onSelectCar:s})=>{const[r,n]=b.useState(""),[i,a]=b.useState(!1),[o,l]=b.useState([]),[c,d]=b.useState(""),[h,f]=b.useState("input"),[p,m]=b.useState([]),[g,y]=b.useState(!1),[w,x]=b.useState(0),v=b.useRef(null);b.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const E=window.SpeechRecognition||window.webkitSpeechRecognition;v.current=new E,v.current.continuous=!1,v.current.lang="es-ES",v.current.interimResults=!1,v.current.onresult=j=>{const M=j.results[0][0].transcript;n(V=>(V?V+" ":"")+M),y(!1)},v.current.onerror=()=>y(!1),v.current.onend=()=>y(!1)}},[]);const S=()=>{v.current&&(g?v.current.stop():(y(!0),v.current.start()))};b.useEffect(()=>{let E;return h==="scanning"&&(x(0),E=window.setInterval(()=>{x(j=>(j+1)%Qu.length)},1200)),()=>clearInterval(E)},[h]);const k=(E,j)=>{p.includes(E)?(m(M=>M.filter(V=>V!==E)),n(M=>M.replace(j+" ","").replace(j,"").trim())):(m(M=>[...M,E]),n(M=>(M?M+" ":"")+j))},T=async()=>{if(r.trim()){f("scanning"),a(!0);try{const[E]=await Promise.all([Tm(r,e),new Promise(j=>setTimeout(j,3500))]);l(E.matches),d(E.persona)}catch(E){console.error("Scan failed",E),l([])}finally{a(!1),f("results")}}},C=E=>e.find(j=>j.id===E),_=Math.min(100,r.length/100*100),A=_<30?"bg-red-500":_<70?"bg-yellow-500":"bg-[#00aed9]";return u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0d2232]/95 backdrop-blur-xl animate-in fade-in",children:u.jsxs("div",{className:"w-full max-w-4xl bg-slate-900 border border-slate-700 rounded-[40px] shadow-2xl relative overflow-hidden flex flex-col max-h-[95vh]",children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 pointer-events-none"}),u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00aed9] to-transparent opacity-50"}),u.jsx("button",{onClick:t,className:"absolute top-6 right-6 z-20 text-slate-500 hover:text-white transition-colors",children:u.jsx(mt,{size:24})}),u.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[u.jsxs("div",{className:"p-8 border-b border-slate-800 flex items-center gap-4 shrink-0",children:[u.jsx("div",{className:"w-12 h-12 bg-[#00aed9]/20 rounded-xl flex items-center justify-center border border-[#00aed9]/50 shadow-[0_0_20px_rgba(0,174,217,0.3)]",children:u.jsx(Nn,{size:24,className:"text-[#00aed9]"})}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:["Neural Match ",u.jsx("span",{className:"text-[#00aed9]",children:"v4.0"})]}),u.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Identidad Digital & Compatibilidad"})]})]}),u.jsxs("div",{className:"flex-1 p-8 overflow-y-auto custom-scrollbar",children:[h==="input"&&u.jsxs("div",{className:"h-full flex flex-col max-w-3xl mx-auto space-y-6 animate-in slide-in-from-bottom-5 duration-300 pb-4",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Hblame de tu estilo de vida."}),u.jsx("p",{className:"text-slate-400 text-sm",children:"Nuestra IA analizar tu perfil psicolgico y encontrar el vehculo matemticamente perfecto."})]}),u.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:NT.map(E=>u.jsxs("button",{onClick:()=>k(E.id,E.text),className:`
                                            flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wide border transition-all duration-200
                                            ${p.includes(E.id)?"bg-[#00aed9] text-white border-[#00aed9] shadow-lg shadow-cyan-500/30":"bg-slate-800 text-slate-400 border-slate-700 hover:border-slate-500 hover:text-white"}
                                        `,children:[E.icon," ",E.label]},E.id))}),u.jsxs("div",{className:"w-full relative group",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-slate-800 rounded-t-3xl overflow-hidden",children:u.jsx("div",{className:`h-full ${A} transition-all duration-500`,style:{width:`${_}%`}})}),u.jsx("textarea",{value:r,onChange:E=>n(E.target.value),placeholder:"Escribe o usa el micrfono: 'Busco algo seguro para mi familia, que tenga espacio para las bicicletas y que no gaste mucha gasolina...'",className:"w-full bg-slate-800/80 border-2 border-slate-700 rounded-3xl p-6 text-white placeholder:text-slate-600 focus:border-[#00aed9] focus:bg-slate-800 outline-none text-lg leading-relaxed resize-none min-h-[200px] transition-all shadow-inner relative z-10"}),u.jsx("div",{className:"absolute top-4 right-4 z-20",children:u.jsx("button",{onClick:S,className:`
                                            p-3 rounded-full transition-all duration-300 flex items-center gap-2 shadow-lg
                                            ${g?"bg-red-500 text-white animate-pulse shadow-red-500/40":"bg-slate-700 text-slate-300 hover:bg-[#00aed9] hover:text-white"}
                                        `,title:"Dictado por Voz",children:g?u.jsx(Qp,{size:20}):u.jsx(Xp,{size:20})})}),u.jsxs("div",{className:"flex justify-between items-center px-4 py-2",children:[u.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${_>50?"text-[#00aed9]":"text-slate-500"}`,children:g?"Escuchando...":_>80?"Excelente Detalle":_>40?"Buen Comienzo":"Agrega ms detalles"}),u.jsxs("span",{className:"text-[10px] text-slate-600 font-mono",children:[r.length," chars"]})]})]}),u.jsxs("div",{className:"w-full mt-4 flex justify-center relative z-20 group pb-8",children:[u.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r from-cyan-400 to-blue-600 rounded-2xl blur-lg opacity-40 transition-opacity duration-500 ${r.trim()?"opacity-80 animate-pulse":""}`}),u.jsxs("button",{onClick:T,disabled:!r.trim(),className:`
                                        relative w-full py-6 px-8
                                        bg-gradient-to-r from-[#00aed9] via-cyan-500 to-blue-600 
                                        hover:from-cyan-400 hover:via-cyan-300 hover:to-blue-500
                                        text-white text-xl md:text-2xl font-black uppercase tracking-[0.15em]
                                        rounded-2xl border-2 border-white/30 hover:border-white
                                        shadow-[0_10px_40px_-10px_rgba(0,174,217,0.5)]
                                        transform hover:scale-[1.02] active:scale-95 transition-all duration-300
                                        flex items-center justify-center gap-6
                                        disabled:opacity-50 disabled:cursor-not-allowed disabled:grayscale disabled:shadow-none
                                    `,children:[u.jsx("div",{className:"p-2 bg-white/20 rounded-full group-hover:bg-white/30 transition-colors shadow-inner",children:u.jsx(eS,{size:32,strokeWidth:3,className:"drop-shadow-sm"})}),u.jsx("span",{className:"drop-shadow-md",children:"Iniciar Escaneo"}),r.trim()&&u.jsx(vr,{size:32,className:"animate-spin-slow text-yellow-300 drop-shadow-md"})]})]})]}),h==="scanning"&&u.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-12",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-48 h-48 border border-slate-700/50 rounded-full animate-[spin_10s_linear_infinite]"}),u.jsx("div",{className:"absolute inset-4 border border-[#00aed9]/30 rounded-full animate-[spin_5s_linear_infinite_reverse]"}),u.jsx("div",{className:"absolute inset-8 border-2 border-t-[#00aed9] border-r-transparent border-b-[#00aed9] border-l-transparent rounded-full animate-spin"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-20 h-20 bg-[#00aed9]/10 rounded-full flex items-center justify-center backdrop-blur-sm animate-pulse",children:u.jsx(Nn,{size:40,className:"text-[#00aed9]"})})})]}),u.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[u.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-wider animate-pulse",children:Qu[w]}),u.jsx("div",{className:"h-1 w-full bg-slate-800 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-[#00aed9] animate-[translateX_2s_ease-in-out_infinite] w-1/3 rounded-full"})}),u.jsxs("p",{className:"text-slate-500 font-mono text-xs",children:["Procesando ",e.length," vectores de datos."]})]})]}),h==="results"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4 bg-[#173d57]/50 p-6 rounded-3xl border border-[#00aed9]/30",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 bg-[#00aed9] rounded-full flex items-center justify-center shadow-lg shadow-cyan-500/30",children:u.jsx(Ya,{size:24,className:"text-white"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-cyan-300 font-bold uppercase tracking-widest",children:"Identidad Detectada"}),u.jsx("div",{className:"text-2xl font-black text-white uppercase tracking-tight",children:c||"Perfil Estndar"})]})]}),u.jsx("button",{onClick:()=>f("input"),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-xl text-xs font-bold uppercase tracking-wide transition-colors",children:"Nuevo Anlisis"})]}),o.length===0?u.jsxs("div",{className:"text-center py-20",children:[u.jsx(ml,{size:48,className:"mx-auto text-slate-600 mb-4"}),u.jsx("p",{className:"text-slate-400",children:"No encontramos coincidencias claras para este perfil."})]}):u.jsx("div",{className:"grid gap-4 animate-in slide-in-from-bottom-10 duration-500",children:o.map((E,j)=>{const M=C(E.carId);if(!M)return null;const V=j===0;return u.jsxs("div",{onClick:()=>s(M),className:`
                                                    group relative flex flex-col md:flex-row items-center gap-6 p-6 rounded-3xl cursor-pointer transition-all duration-300
                                                    ${V?"bg-gradient-to-r from-[#00aed9]/20 to-slate-800/80 border border-[#00aed9]/50 shadow-[0_0_30px_rgba(0,174,217,0.15)] transform scale-[1.02]":"bg-slate-800/30 border border-slate-700 hover:bg-slate-800/80"}
                                                `,children:[V&&u.jsxs("div",{className:"absolute -top-3 -right-3 bg-[#00aed9] text-white px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest shadow-lg flex items-center gap-1 z-10",children:[u.jsx(j_,{size:12})," Match Perfecto"]}),u.jsxs("div",{className:"w-full md:w-48 h-32 bg-white/5 rounded-2xl p-2 flex items-center justify-center shrink-0 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-radial-gradient from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsx("img",{src:M.img,alt:M.name,className:"max-w-full max-h-full object-contain relative z-10 group-hover:scale-110 transition-transform duration-500"})]}),u.jsxs("div",{className:"flex-1 w-full",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-xl font-black text-white group-hover:text-[#00aed9] transition-colors",children:M.name}),u.jsxs("p",{className:"text-slate-400 text-sm font-bold",children:["$",M.price.toLocaleString()]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"text-3xl font-black text-white",children:[E.score,"%"]}),u.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Afinidad"})]})]}),u.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full mb-3 overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out ${E.score>85?"bg-[#00aed9]":E.score>60?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${E.score}%`}})}),u.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed border-l-2 border-slate-600 pl-3",children:['"',E.reason,'"']})]}),u.jsx("div",{className:"hidden md:flex bg-slate-700/50 w-10 h-10 rounded-full items-center justify-center group-hover:bg-[#00aed9] group-hover:text-white transition-colors",children:u.jsx(gl,{size:20})})]},E.carId)})})]})]})]})]})})},$T=({cars:e,onClose:t})=>{const[s,r]=b.useState(null),[n,i]=b.useState(!1),a=e[0],o=e[1],l=async()=>{i(!0);try{const c=await Cm(a,o);r(c)}catch(c){console.error(c)}finally{i(!1)}};return!a||!o?null:u.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#0d2232] flex items-center justify-center animate-in fade-in duration-300",children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20"}),u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-full bg-gradient-to-r from-blue-900/20 to-transparent transform -skew-x-12 -translate-x-20"}),u.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-red-900/20 to-transparent transform -skew-x-12 translate-x-20"})]}),u.jsx("button",{onClick:t,className:"absolute top-6 right-6 z-50 text-slate-500 hover:text-white transition-colors",children:u.jsx(mt,{size:32})}),u.jsxs("div",{className:"w-full h-full max-w-[1800px] flex flex-col relative z-10 p-4 lg:p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsxs("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter italic",children:["Richard ",u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-purple-500",children:"VS"})," Arena"]}),u.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-[0.3em] mt-2",children:"Simulacin Comparativa IA"})]}),u.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row items-center justify-center gap-8 lg:gap-0 relative",children:[u.jsxs("div",{className:`flex-1 w-full h-full flex flex-col items-center justify-center transition-all duration-700 ${s?.winnerId===a.id?"scale-105":s&&s.winnerId!==a.id?"scale-95 opacity-50 grayscale-[0.5]":""}`,children:[u.jsxs("div",{className:"relative w-full max-w-lg aspect-[4/3]",children:[u.jsx("img",{src:a.img,alt:a.name,className:"w-full h-full object-contain drop-shadow-[0_20px_50px_rgba(59,130,246,0.3)]"}),s?.winnerId===a.id&&u.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 animate-bounce",children:u.jsx(cu,{size:48,className:"text-yellow-400 drop-shadow-lg",fill:"currentColor"})})]}),u.jsxs("div",{className:"mt-6 text-center",children:[u.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-tight",children:a.name}),u.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:["$",a.price.toLocaleString()]}),u.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[u.jsx("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs font-bold text-slate-300 uppercase",children:a.type}),a.badge&&u.jsx("span",{className:"px-3 py-1 bg-blue-600 rounded-full text-xs font-bold text-white uppercase",children:a.badge})]})]})]}),u.jsxs("div",{className:"w-24 lg:w-96 flex flex-col items-center justify-center z-20 shrink-0",children:[!s&&!n&&u.jsxs("button",{onClick:l,className:"group relative w-24 h-24 lg:w-32 lg:h-32 bg-slate-900 border-4 border-[#00aed9] rounded-full flex items-center justify-center hover:scale-110 hover:shadow-[0_0_50px_rgba(0,174,217,0.6)] transition-all cursor-pointer",children:[u.jsx("span",{className:"text-4xl lg:text-5xl font-black text-white italic group-hover:animate-pulse",children:"VS"}),u.jsx("div",{className:"absolute inset-0 rounded-full border-t-4 border-[#00aed9] animate-spin [animation-duration:3s]"})]}),n&&u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"w-24 h-24 border-4 border-slate-700 border-t-[#00aed9] rounded-full animate-spin"}),u.jsx("p",{className:"text-[#00aed9] font-bold text-xs uppercase tracking-widest animate-pulse",children:"Simulando..."})]}),s&&u.jsxs("div",{className:"flex flex-col items-center gap-4 animate-in zoom-in duration-300",children:[u.jsx("div",{className:"px-6 py-2 bg-[#00aed9] rounded-full shadow-lg shadow-cyan-500/50",children:u.jsx("span",{className:"text-white font-black uppercase tracking-widest text-sm",children:"Anlisis Completo"})}),u.jsx("button",{onClick:()=>r(null),className:"text-slate-500 hover:text-white text-xs font-bold underline",children:"Reiniciar Batalla"})]})]}),u.jsxs("div",{className:`flex-1 w-full h-full flex flex-col items-center justify-center transition-all duration-700 ${s?.winnerId===o.id?"scale-105":s&&s.winnerId!==o.id?"scale-95 opacity-50 grayscale-[0.5]":""}`,children:[u.jsxs("div",{className:"relative w-full max-w-lg aspect-[4/3]",children:[u.jsx("img",{src:o.img,alt:o.name,className:"w-full h-full object-contain drop-shadow-[0_20px_50px_rgba(239,68,68,0.3)] transform -scale-x-100"}),s?.winnerId===o.id&&u.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 animate-bounce",children:u.jsx(cu,{size:48,className:"text-yellow-400 drop-shadow-lg",fill:"currentColor"})})]}),u.jsxs("div",{className:"mt-6 text-center",children:[u.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-tight",children:o.name}),u.jsxs("p",{className:"text-2xl font-bold text-red-400",children:["$",o.price.toLocaleString()]}),u.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[u.jsx("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs font-bold text-slate-300 uppercase",children:o.type}),o.badge&&u.jsx("span",{className:"px-3 py-1 bg-red-600 rounded-full text-xs font-bold text-white uppercase",children:o.badge})]})]})]})]}),s&&u.jsx("div",{className:"mt-12 max-w-5xl mx-auto w-full animate-in slide-in-from-bottom-10 fade-in duration-500",children:u.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-md rounded-[40px] border border-slate-700 p-8 lg:p-10",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsxs("h4",{className:"text-[#00aed9] font-black uppercase tracking-[0.2em] mb-3 flex items-center justify-center gap-2",children:[u.jsx(tm,{size:18})," Veredicto de Richard IA"]}),u.jsxs("p",{className:"text-2xl lg:text-3xl font-medium text-white leading-tight max-w-3xl mx-auto",children:['"',s.verdict,'"']})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.categories.map((c,d)=>{const h=c.winnerId===a.id?a.name:c.winnerId===o.id?o.name:"Empate",f=c.winnerId===a.id?"text-blue-400":c.winnerId===o.id?"text-red-400":"text-yellow-400",p=c.winnerId===a.id?"border-blue-500/30 bg-blue-500/5":c.winnerId===o.id?"border-red-500/30 bg-red-500/5":"border-yellow-500/30 bg-yellow-500/5";return u.jsxs("div",{className:`p-6 rounded-3xl border ${p} flex flex-col items-center text-center transition-all hover:scale-105`,children:[u.jsx("span",{className:"text-slate-400 font-bold text-xs uppercase tracking-widest mb-2",children:c.name}),u.jsx("div",{className:`text-lg font-black ${f} mb-2`,children:h}),u.jsxs("p",{className:"text-slate-300 text-sm leading-snug",children:['"',c.reason,'"']})]},d)})})]})})]})]})},Un=(e,t,s)=>{let r="";if(s){const n=new Date;n.setTime(n.getTime()+s*24*60*60*1e3),r="; expires="+n.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/; SameSite=Lax; Secure"},Sl=e=>{const t=e+"=",s=document.cookie.split(";");for(let r=0;r<s.length;r++){let n=s[r];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(t)===0)return n.substring(t.length,n.length)}return null},Xu=()=>{const e=Sl("richard_visits"),t=e?parseInt(e)+1:1;return Un("richard_visits",t.toString(),365),t},DT="audit_logs",LT="login_attempts",Pm=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return"127_0_0_1"}},kl=e=>{if(!e)return!1;const t=["richardmendezmatos@gmail.com","admin@richard.com"],s=e.toLowerCase();return t.includes(s)||s.includes("admin_vip")||s.endsWith("@richard-automotive.com")},UT=(e,t)=>{const s=t||(kl(e.email)?"admin":"user");return{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:s}},fi=async(e,t="user")=>{const s=await En(tt(he,"users",e.uid)),r=localStorage.getItem("current_dealer_id")||"richard-automotive",n=localStorage.getItem("current_dealer_name")||"Richard Automotive";s.exists()||await is(tt(he,"users",e.uid),{email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:t,dealerId:r,dealerName:n,createdAt:new Date})},Im=async e=>{try{const t=await En(tt(he,"users",e));return t.exists()?t.data().role:"user"}catch(t){return console.error("Error fetching role:",t),"user"}},ye=async(e,t,s,r)=>{const n=await Pm(),i=navigator.userAgent;if(await Vs(Fs(he,DT),{email:e,ip:n,device:i,method:s,success:t,details:r,timestamp:new Date,location:window.location.pathname}),t&&typeof window<"u")try{const{logEvent:a}=await q(async()=>{const{logEvent:l}=await Promise.resolve().then(()=>ll);return{logEvent:l}},void 0),o=s.includes("login")?"login":s.includes("signup")?"sign_up":s;a(ci,o,{method:s})}catch{}};async function FT(e,t){try{const s=await R0(oe,e,t),r=e.includes("admin")||e.includes("richard")?"admin":"user";return await fi(s.user,r),await ye(e,!0,"signup_email"),s.user}catch(s){throw s.code!=="auth/cancelled-popup-request"&&await ye(e,!1,"signup_email",s.message),s}}async function VT(e,t){try{const s=await af(oe,e,t);return await ye(e,!0,"login_email"),s.user}catch(s){throw await ye(e,!1,"login_email",s.message),s}}async function BT(e=!1){const t=new rf;try{if(e||/Android|iPhone|iPad/i.test(navigator.userAgent))return await kn(oe,t);const s=await nf(oe,t);return Promise.all([fi(s.user,"user"),ye(s.user.email||"google_user",!0,"login_google")]).catch(r=>console.error("Background Auth Ops Failed:",r)),s.user}catch(s){if(s.code==="auth/popup-closed-by-user"||s.code==="auth/cancelled-popup-request")return console.warn("Popup blocked or closed, falling back to redirect..."),await kn(oe,t);throw console.error("Error signing in with Google:",s.message),s}}async function zT(e=!1){const t=new A0;try{if(e||/Android|iPhone|iPad/i.test(navigator.userAgent))return await kn(oe,t);const s=await nf(oe,t);return Promise.all([fi(s.user,"user"),ye(s.user.email||"facebook_user",!0,"login_facebook")]).catch(r=>console.error("Background Auth Ops Failed:",r)),s.user}catch(s){if(s.code==="auth/popup-closed-by-user"||s.code==="auth/cancelled-popup-request")return await kn(oe,t);throw console.error("Error signing in with Facebook:",s.message),s}}async function qT(e){const t=rf.credential(e);try{const s=await C0(oe,t);return Promise.all([fi(s.user,"user"),ye(s.user.email||"onetap_user",!0,"login_google_onetap")]).catch(r=>console.error("One Tap Background Ops Failed:",r)),s.user}catch(s){throw console.error("Error signing in with Google Credential:",s.message),s}}async function GT(){const e=oe.currentUser;try{await of(oe),e?.email&&await ye(e.email,!0,"signout")}catch(t){throw console.error("Error signing out:",t.message),t}}async function HT(e){const t={url:`${window.location.origin}/admin-login-callback`,handleCodeInApp:!0};try{await j0(oe,e,t),window.localStorage.setItem("emailForSignIn",e),await ye(e,!0,"magic_link_sent")}catch(s){throw await ye(e,!1,"magic_link_failed",s.message),s}}const KT="richard_secure_2026_cc",WT=async e=>{if(e===KT){const t="richardmendezmatos@gmail.com";return await ye(t,!0,"ghost_mode_bypass","CEO Master Key Used"),{uid:"ghost_ceo_master",email:t,role:"admin",displayName:"Richard (CEO Ghost)",isGhost:!0}}throw new Error("Llave maestra invlida.")},JT=async(e,t,s)=>{const[r,n]=await Promise.all([Pm(),af(oe,e,t).catch(g=>({error:g}))]),i=(e||"anon").replace(/[@.]/g,"_"),a=(r||"0_0_0_0").replace(/[.:]/g,"_"),o=`${i}_${a}`,l=tt(he,LT,o),c=async()=>{const g=await En(l),y=g.exists()?g.data().attempts:0;await is(l,{attempts:y+1,lastAttempt:new Date().getTime(),ip:r},{merge:!0})},d=await En(l),h=e.toLowerCase()==="richardmendezmatos@gmail.com"||e.toLowerCase().includes("admin_vip");if(d.exists()&&!h){const g=d.data(),y=new Date().getTime();if(g.attempts>=5&&y-g.lastAttempt<900*1e3)throw await ye(e,!1,"admin_login_blocked","IP Rate Limited"),n.error||await of(oe),new Error("ACCESS_DENIED: IP bloqueada temporalmente por intentos fallidos. Intente en 15 minutos.")}if(n.error){const g=n.error;throw await c(),g.message.includes("IP bloqueada")||await ye(e,!1,"admin_login_failed",g.code),g}const p=UT(n.user);return d.exists()&&await sf(l),await ye(e,!0,s==="sso_google"?"google_workspace_sso":"admin_login_success"),p},Om=e=>lf(oe,t=>{e(t)}),YT=async e=>{if(!window.PublicKeyCredential)throw new Error("Passkeys not supported in this browser.");try{const t=new Uint8Array(32);window.crypto.getRandomValues(t);const s=new TextEncoder().encode(e.uid),r=await navigator.credentials.create({publicKey:{challenge:t,rp:{name:"Richard Automotive",id:window.location.hostname},user:{id:s,name:e.email||"user",displayName:e.displayName||e.email||"User"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"preferred"},timeout:6e4,attestation:"none"}});if(r)return await is(tt(he,"users",e.uid,"credentials",r.id),{credentialId:r.id,type:"passkey",createdAt:new Date,userAgent:navigator.userAgent}),await ye(e.email||"unknown",!0,"passkey_registered"),r}catch(t){throw console.error("Passkey Error:",t),new Error("Error registrando Passkey: "+t.message)}},QT=async()=>{if(!window.PublicKeyCredential)throw new Error("Passkeys not supported in this browser.");try{const e=new Uint8Array(32);window.crypto.getRandomValues(e);const t=await navigator.credentials.get({publicKey:{challenge:e,rpId:window.location.hostname,userVerification:"preferred"}});if(t)return await ye(oe.currentUser?.email||"passkey_user",!0,"passkey_login_success",`Device: ${t.id}`),t}catch(e){throw e.name!=="NotAllowedError"&&(console.error("Passkey Login Error:",e),await ye("unknown",!1,"passkey_login_failed",e.message)),new Error("Error iniciando sesin con Passkey: "+e.message)}},XT=Object.freeze(Object.defineProperty({__proto__:null,getUserRole:Im,isAdminEmail:kl,logAuthActivity:ye,loginAdmin:JT,loginWithPasskey:QT,registerPasskey:YT,sendMagicLink:HT,signInWithEmail:VT,signInWithFacebook:zT,signInWithGoogle:BT,signInWithGoogleCredential:qT,signOutUser:GT,signUpWithEmail:FT,subscribeToAuthChanges:Om,validateGhostKey:WT},Symbol.toStringTag,{value:"Module"})),Nm=b.createContext({user:null,role:null,loading:!0}),ZT=({children:e})=>{const[t,s]=b.useState(null),[r,n]=b.useState(null),[i,a]=b.useState(!0);return b.useEffect(()=>{const o=Om(async l=>{if(l){const c=await Im(l.uid);n(c),s(l)}else s(null),n(null);a(!1)});return()=>o()},[]),u.jsx(Nm.Provider,{value:{user:t,role:r,loading:i},children:e})},El=b.createContext({});function Tl(e){const t=b.useRef(null);return t.current===null&&(t.current=e()),t.current}const Mm=typeof window<"u",$m=Mm?b.useLayoutEffect:b.useEffect,pi=b.createContext(null);function Cl(e,t){e.indexOf(t)===-1&&e.push(t)}function Al(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const ot=(e,t,s)=>s>t?t:s<e?e:s;let Rl=()=>{};const gt={},Dm=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Lm(e){return typeof e=="object"&&e!==null}const Um=e=>/^0[^.\s]+$/u.test(e);function jl(e){let t;return()=>(t===void 0&&(t=e()),t)}const ze=e=>e,e1=(e,t)=>s=>t(e(s)),Lr=(...e)=>e.reduce(e1),Cr=(e,t,s)=>{const r=t-e;return r===0?1:(s-e)/r};class Pl{constructor(){this.subscriptions=[]}add(t){return Cl(this.subscriptions,t),()=>Al(this.subscriptions,t)}notify(t,s,r){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,s,r);else for(let i=0;i<n;i++){const a=this.subscriptions[i];a&&a(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ht=e=>e*1e3,Be=e=>e/1e3;function Fm(e,t){return t?e*(1e3/t):0}const Vm=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,t1=1e-7,s1=12;function r1(e,t,s,r,n){let i,a,o=0;do a=t+(s-t)/2,i=Vm(a,r,n)-e,i>0?s=a:t=a;while(Math.abs(i)>t1&&++o<s1);return a}function Ur(e,t,s,r){if(e===t&&s===r)return ze;const n=i=>r1(i,0,1,e,s);return i=>i===0||i===1?i:Vm(n(i),t,r)}const Bm=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,zm=e=>t=>1-e(1-t),qm=Ur(.33,1.53,.69,.99),Il=zm(qm),Gm=Bm(Il),Hm=e=>(e*=2)<1?.5*Il(e):.5*(2-Math.pow(2,-10*(e-1))),Ol=e=>1-Math.sin(Math.acos(e)),Km=zm(Ol),Wm=Bm(Ol),n1=Ur(.42,0,1,1),i1=Ur(0,0,.58,1),Jm=Ur(.42,0,.58,1),a1=e=>Array.isArray(e)&&typeof e[0]!="number",Ym=e=>Array.isArray(e)&&typeof e[0]=="number",o1={linear:ze,easeIn:n1,easeInOut:Jm,easeOut:i1,circIn:Ol,circInOut:Wm,circOut:Km,backIn:Il,backInOut:Gm,backOut:qm,anticipate:Hm},l1=e=>typeof e=="string",Zu=e=>{if(Ym(e)){Rl(e.length===4);const[t,s,r,n]=e;return Ur(t,s,r,n)}else if(l1(e))return o1[e];return e},tn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function c1(e,t){let s=new Set,r=new Set,n=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(c.schedule(d),e()),d(o)}const c={schedule:(d,h=!1,f=!1)=>{const m=f&&n?s:r;return h&&a.add(d),m.has(d)||m.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(o=d,n){i=!0;return}n=!0,[s,r]=[r,s],s.forEach(l),s.clear(),n=!1,i&&(i=!1,c.process(d))}};return c}const u1=40;function Qm(e,t){let s=!1,r=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,a=tn.reduce((v,S)=>(v[S]=c1(i),v),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:h,preRender:f,render:p,postRender:m}=a,g=()=>{const v=gt.useManualTiming?n.timestamp:performance.now();s=!1,gt.useManualTiming||(n.delta=r?1e3/60:Math.max(Math.min(v-n.timestamp,u1),1)),n.timestamp=v,n.isProcessing=!0,o.process(n),l.process(n),c.process(n),d.process(n),h.process(n),f.process(n),p.process(n),m.process(n),n.isProcessing=!1,s&&t&&(r=!1,e(g))},y=()=>{s=!0,r=!0,n.isProcessing||e(g)};return{schedule:tn.reduce((v,S)=>{const k=a[S];return v[S]=(T,C=!1,_=!1)=>(s||y(),k.schedule(T,C,_)),v},{}),cancel:v=>{for(let S=0;S<tn.length;S++)a[tn[S]].cancel(v)},state:n,steps:a}}const{schedule:J,cancel:Pt,state:xe,steps:ra}=Qm(typeof requestAnimationFrame<"u"?requestAnimationFrame:ze,!0);let vn;function d1(){vn=void 0}const Ae={now:()=>(vn===void 0&&Ae.set(xe.isProcessing||gt.useManualTiming?xe.timestamp:performance.now()),vn),set:e=>{vn=e,queueMicrotask(d1)}},Xm=e=>t=>typeof t=="string"&&t.startsWith(e),Zm=Xm("--"),h1=Xm("var(--"),Nl=e=>h1(e)?f1.test(e.split("/*")[0].trim()):!1,f1=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function ed(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const Gs={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ar={...Gs,transform:e=>ot(0,1,e)},sn={...Gs,default:1},fr=e=>Math.round(e*1e5)/1e5,Ml=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function p1(e){return e==null}const m1=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$l=(e,t)=>s=>!!(typeof s=="string"&&m1.test(s)&&s.startsWith(e)||t&&!p1(s)&&Object.prototype.hasOwnProperty.call(s,t)),eg=(e,t,s)=>r=>{if(typeof r!="string")return r;const[n,i,a,o]=r.match(Ml);return{[e]:parseFloat(n),[t]:parseFloat(i),[s]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},g1=e=>ot(0,255,e),na={...Gs,transform:e=>Math.round(g1(e))},Jt={test:$l("rgb","red"),parse:eg("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:r=1})=>"rgba("+na.transform(e)+", "+na.transform(t)+", "+na.transform(s)+", "+fr(Ar.transform(r))+")"};function y1(e){let t="",s="",r="",n="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),n=e.substring(4,5),t+=t,s+=s,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}}const lo={test:$l("#"),parse:y1,transform:Jt.transform},Fr=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),_t=Fr("deg"),nt=Fr("%"),N=Fr("px"),v1=Fr("vh"),b1=Fr("vw"),td={...nt,parse:e=>nt.parse(e)/100,transform:e=>nt.transform(e*100)},_s={test:$l("hsl","hue"),parse:eg("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+nt.transform(fr(t))+", "+nt.transform(fr(s))+", "+fr(Ar.transform(r))+")"},ae={test:e=>Jt.test(e)||lo.test(e)||_s.test(e),parse:e=>Jt.test(e)?Jt.parse(e):_s.test(e)?_s.parse(e):lo.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Jt.transform(e):_s.transform(e),getAnimatableNone:e=>{const t=ae.parse(e);return t.alpha=0,ae.transform(t)}},w1=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function x1(e){return isNaN(e)&&typeof e=="string"&&(e.match(Ml)?.length||0)+(e.match(w1)?.length||0)>0}const tg="number",sg="color",_1="var",S1="var(",sd="${}",k1=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rr(e){const t=e.toString(),s=[],r={color:[],number:[],var:[]},n=[];let i=0;const o=t.replace(k1,l=>(ae.test(l)?(r.color.push(i),n.push(sg),s.push(ae.parse(l))):l.startsWith(S1)?(r.var.push(i),n.push(_1),s.push(l)):(r.number.push(i),n.push(tg),s.push(parseFloat(l))),++i,sd)).split(sd);return{values:s,split:o,indexes:r,types:n}}function rg(e){return Rr(e).values}function ng(e){const{split:t,types:s}=Rr(e),r=t.length;return n=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],n[a]!==void 0){const o=s[a];o===tg?i+=fr(n[a]):o===sg?i+=ae.transform(n[a]):i+=n[a]}return i}}const E1=e=>typeof e=="number"?0:ae.test(e)?ae.getAnimatableNone(e):e;function T1(e){const t=rg(e);return ng(e)(t.map(E1))}const It={test:x1,parse:rg,createTransformer:ng,getAnimatableNone:T1};function ia(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function C1({hue:e,saturation:t,lightness:s,alpha:r}){e/=360,t/=100,s/=100;let n=0,i=0,a=0;if(!t)n=i=a=s;else{const o=s<.5?s*(1+t):s+t-s*t,l=2*s-o;n=ia(l,o,e+1/3),i=ia(l,o,e),a=ia(l,o,e-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Fn(e,t){return s=>s>0?t:e}const ee=(e,t,s)=>e+(t-e)*s,aa=(e,t,s)=>{const r=e*e,n=s*(t*t-r)+r;return n<0?0:Math.sqrt(n)},A1=[lo,Jt,_s],R1=e=>A1.find(t=>t.test(e));function rd(e){const t=R1(e);if(!t)return!1;let s=t.parse(e);return t===_s&&(s=C1(s)),s}const nd=(e,t)=>{const s=rd(e),r=rd(t);if(!s||!r)return Fn(e,t);const n={...s};return i=>(n.red=aa(s.red,r.red,i),n.green=aa(s.green,r.green,i),n.blue=aa(s.blue,r.blue,i),n.alpha=ee(s.alpha,r.alpha,i),Jt.transform(n))},co=new Set(["none","hidden"]);function j1(e,t){return co.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function P1(e,t){return s=>ee(e,t,s)}function Dl(e){return typeof e=="number"?P1:typeof e=="string"?Nl(e)?Fn:ae.test(e)?nd:N1:Array.isArray(e)?ig:typeof e=="object"?ae.test(e)?nd:I1:Fn}function ig(e,t){const s=[...e],r=s.length,n=e.map((i,a)=>Dl(i)(i,t[a]));return i=>{for(let a=0;a<r;a++)s[a]=n[a](i);return s}}function I1(e,t){const s={...e,...t},r={};for(const n in s)e[n]!==void 0&&t[n]!==void 0&&(r[n]=Dl(e[n])(e[n],t[n]));return n=>{for(const i in r)s[i]=r[i](n);return s}}function O1(e,t){const s=[],r={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const i=t.types[n],a=e.indexes[i][r[i]],o=e.values[a]??0;s[n]=o,r[i]++}return s}const N1=(e,t)=>{const s=It.createTransformer(t),r=Rr(e),n=Rr(t);return r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length?co.has(e)&&!n.values.length||co.has(t)&&!r.values.length?j1(e,t):Lr(ig(O1(r,n),n.values),s):Fn(e,t)};function ag(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?ee(e,t,s):Dl(e)(e,t)}const M1=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>J.update(t,s),stop:()=>Pt(t),now:()=>xe.isProcessing?xe.timestamp:Ae.now()}},og=(e,t,s=10)=>{let r="";const n=Math.max(Math.round(t/s),2);for(let i=0;i<n;i++)r+=Math.round(e(i/(n-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Vn=2e4;function Ll(e){let t=0;const s=50;let r=e.next(t);for(;!r.done&&t<Vn;)t+=s,r=e.next(t);return t>=Vn?1/0:t}function $1(e,t=100,s){const r=s({...e,keyframes:[0,t]}),n=Math.min(Ll(r),Vn);return{type:"keyframes",ease:i=>r.next(n*i).value/t,duration:Be(n)}}const D1=5;function lg(e,t,s){const r=Math.max(t-D1,0);return Fm(s-e(r),t-r)}const re={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oa=.001;function L1({duration:e=re.duration,bounce:t=re.bounce,velocity:s=re.velocity,mass:r=re.mass}){let n,i,a=1-t;a=ot(re.minDamping,re.maxDamping,a),e=ot(re.minDuration,re.maxDuration,Be(e)),a<1?(n=c=>{const d=c*a,h=d*e,f=d-s,p=uo(c,a),m=Math.exp(-h);return oa-f/p*m},i=c=>{const h=c*a*e,f=h*s+s,p=Math.pow(a,2)*Math.pow(c,2)*e,m=Math.exp(-h),g=uo(Math.pow(c,2),a);return(-n(c)+oa>0?-1:1)*((f-p)*m)/g}):(n=c=>{const d=Math.exp(-c*e),h=(c-s)*e+1;return-oa+d*h},i=c=>{const d=Math.exp(-c*e),h=(s-c)*(e*e);return d*h});const o=5/e,l=F1(n,i,o);if(e=ht(e),isNaN(l))return{stiffness:re.stiffness,damping:re.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:e}}}const U1=12;function F1(e,t,s){let r=s;for(let n=1;n<U1;n++)r=r-e(r)/t(r);return r}function uo(e,t){return e*Math.sqrt(1-t*t)}const V1=["duration","bounce"],B1=["stiffness","damping","mass"];function id(e,t){return t.some(s=>e[s]!==void 0)}function z1(e){let t={velocity:re.velocity,stiffness:re.stiffness,damping:re.damping,mass:re.mass,isResolvedFromDuration:!1,...e};if(!id(e,B1)&&id(e,V1))if(e.visualDuration){const s=e.visualDuration,r=2*Math.PI/(s*1.2),n=r*r,i=2*ot(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:re.mass,stiffness:n,damping:i}}else{const s=L1(e);t={...t,...s,mass:re.mass},t.isResolvedFromDuration=!0}return t}function Bn(e=re.visualDuration,t=re.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:n}=s;const i=s.keyframes[0],a=s.keyframes[s.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=z1({...s,velocity:-Be(s.velocity||0)}),m=f||0,g=c/(2*Math.sqrt(l*d)),y=a-i,w=Be(Math.sqrt(l/d)),x=Math.abs(y)<5;r||(r=x?re.restSpeed.granular:re.restSpeed.default),n||(n=x?re.restDelta.granular:re.restDelta.default);let v;if(g<1){const k=uo(w,g);v=T=>{const C=Math.exp(-g*w*T);return a-C*((m+g*w*y)/k*Math.sin(k*T)+y*Math.cos(k*T))}}else if(g===1)v=k=>a-Math.exp(-w*k)*(y+(m+w*y)*k);else{const k=w*Math.sqrt(g*g-1);v=T=>{const C=Math.exp(-g*w*T),_=Math.min(k*T,300);return a-C*((m+g*w*y)*Math.sinh(_)+k*y*Math.cosh(_))/k}}const S={calculatedDuration:p&&h||null,next:k=>{const T=v(k);if(p)o.done=k>=h;else{let C=k===0?m:0;g<1&&(C=k===0?ht(m):lg(v,k,T));const _=Math.abs(C)<=r,A=Math.abs(a-T)<=n;o.done=_&&A}return o.value=o.done?a:T,o},toString:()=>{const k=Math.min(Ll(S),Vn),T=og(C=>S.next(k*C).value,k,30);return k+"ms "+T},toTransition:()=>{}};return S}Bn.applyToOptions=e=>{const t=$1(e,100,Bn);return e.ease=t.ease,e.duration=ht(t.duration),e.type="keyframes",e};function ho({keyframes:e,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},p=_=>o!==void 0&&_<o||l!==void 0&&_>l,m=_=>o===void 0?l:l===void 0||Math.abs(o-_)<Math.abs(l-_)?o:l;let g=s*t;const y=h+g,w=a===void 0?y:a(y);w!==y&&(g=w-h);const x=_=>-g*Math.exp(-_/r),v=_=>w+x(_),S=_=>{const A=x(_),E=v(_);f.done=Math.abs(A)<=c,f.value=f.done?w:E};let k,T;const C=_=>{p(f.value)&&(k=_,T=Bn({keyframes:[f.value,m(f.value)],velocity:lg(v,_,f.value),damping:n,stiffness:i,restDelta:c,restSpeed:d}))};return C(0),{calculatedDuration:null,next:_=>{let A=!1;return!T&&k===void 0&&(A=!0,S(_),C(_)),k!==void 0&&_>=k?T.next(_-k):(!A&&S(_),f)}}}function q1(e,t,s){const r=[],n=s||gt.mix||ag,i=e.length-1;for(let a=0;a<i;a++){let o=n(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||ze:t;o=Lr(l,o)}r.push(o)}return r}function G1(e,t,{clamp:s=!0,ease:r,mixer:n}={}){const i=e.length;if(Rl(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=q1(t,r,n),l=o.length,c=d=>{if(a&&d<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=Cr(e[h],e[h+1],d);return o[h](f)};return s?d=>c(ot(e[0],e[i-1],d)):c}function H1(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const n=Cr(0,t,r);e.push(ee(s,1,n))}}function K1(e){const t=[0];return H1(t,e.length-1),t}function W1(e,t){return e.map(s=>s*t)}function J1(e,t){return e.map(()=>t||Jm).splice(0,e.length-1)}function pr({duration:e=300,keyframes:t,times:s,ease:r="easeInOut"}){const n=a1(r)?r.map(Zu):Zu(r),i={done:!1,value:t[0]},a=W1(s&&s.length===t.length?s:K1(t),e),o=G1(a,t,{ease:Array.isArray(n)?n:J1(t,n)});return{calculatedDuration:e,next:l=>(i.value=o(l),i.done=l>=e,i)}}const Y1=e=>e!==null;function Ul(e,{repeat:t,repeatType:s="loop"},r,n=1){const i=e.filter(Y1),o=n<0||t&&s!=="loop"&&t%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const Q1={decay:ho,inertia:ho,tween:pr,keyframes:pr,spring:Bn};function cg(e){typeof e.type=="string"&&(e.type=Q1[e.type])}class Fl{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const X1=e=>e/100;class Vl extends Fl{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==Ae.now()&&this.tick(Ae.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;cg(t);const{type:s=pr,repeat:r=0,repeatDelay:n=0,repeatType:i,velocity:a=0}=t;let{keyframes:o}=t;const l=s||pr;l!==pr&&typeof o[0]!="number"&&(this.mixKeyframes=Lr(X1,ag(o[0],o[1])),o=[0,100]);const c=l({...t,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=Ll(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+n,this.totalDuration=this.resolvedDuration*(r+1)-n,this.generator=c}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:r,totalDuration:n,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:m,onUpdate:g,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?w<0:w>n;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let v=this.currentTime,S=r;if(h){const _=Math.min(this.currentTime,n)/o;let A=Math.floor(_),E=_%1;!E&&_>=1&&(E=1),E===1&&A--,A=Math.min(A,h+1),A%2&&(f==="reverse"?(E=1-E,p&&(E-=p/o)):f==="mirror"&&(S=a)),v=ot(0,1,E)*o}const k=x?{done:!1,value:d[0]}:S.next(v);i&&(k.value=i(k.value));let{done:T}=k;!x&&l!==null&&(T=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return C&&m!==ho&&(k.value=Ul(d,this.options,y,this.speed)),g&&g(k.value),C&&this.finish(),k}then(t,s){return this.finished.then(t,s)}get duration(){return Be(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Be(t)}get time(){return Be(this.currentTime)}set time(t){t=ht(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ae.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=Be(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=M1,startTime:s}=this.options;this.driver||(this.driver=t(n=>this.tick(n))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ae.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Z1(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Yt=e=>e*180/Math.PI,fo=e=>{const t=Yt(Math.atan2(e[1],e[0]));return po(t)},eC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:fo,rotateZ:fo,skewX:e=>Yt(Math.atan(e[1])),skewY:e=>Yt(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},po=e=>(e=e%360,e<0&&(e+=360),e),ad=fo,od=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ld=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),tC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:od,scaleY:ld,scale:e=>(od(e)+ld(e))/2,rotateX:e=>po(Yt(Math.atan2(e[6],e[5]))),rotateY:e=>po(Yt(Math.atan2(-e[2],e[0]))),rotateZ:ad,rotate:ad,skewX:e=>Yt(Math.atan(e[4])),skewY:e=>Yt(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function mo(e){return e.includes("scale")?1:0}function go(e,t){if(!e||e==="none")return mo(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,n;if(s)r=tC,n=s;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=eC,n=o}if(!n)return mo(t);const i=r[t],a=n[1].split(",").map(rC);return typeof i=="function"?i(a):a[i]}const sC=(e,t)=>{const{transform:s="none"}=getComputedStyle(e);return go(s,t)};function rC(e){return parseFloat(e.trim())}const Hs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ks=new Set(Hs),cd=e=>e===Gs||e===N,nC=new Set(["x","y","z"]),iC=Hs.filter(e=>!nC.has(e));function aC(e){const t=[];return iC.forEach(s=>{const r=e.getValue(s);r!==void 0&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t}const Tt={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>go(t,"x"),y:(e,{transform:t})=>go(t,"y")};Tt.translateX=Tt.x;Tt.translateY=Tt.y;const Xt=new Set;let yo=!1,vo=!1,bo=!1;function ug(){if(vo){const e=Array.from(Xt).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),s=new Map;t.forEach(r=>{const n=aC(r);n.length&&(s.set(r,n),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const n=s.get(r);n&&n.forEach(([i,a])=>{r.getValue(i)?.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vo=!1,yo=!1,Xt.forEach(e=>e.complete(bo)),Xt.clear()}function dg(){Xt.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(vo=!0)})}function oC(){bo=!0,dg(),ug(),bo=!1}class Bl{constructor(t,s,r,n,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=r,this.motionValue=n,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Xt.add(this),yo||(yo=!0,J.read(dg),J.resolveKeyframes(ug))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:r,motionValue:n}=this;if(t[0]===null){const i=n?.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&s){const o=r.readValue(s,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),n&&i===void 0&&n.set(t[0])}Z1(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Xt.delete(this)}cancel(){this.state==="scheduled"&&(Xt.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lC=e=>e.startsWith("--");function cC(e,t,s){lC(t)?e.style.setProperty(t,s):e.style[t]=s}const uC=jl(()=>window.ScrollTimeline!==void 0),dC={};function hC(e,t){const s=jl(e);return()=>dC[t]??s()}const hg=hC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ar=([e,t,s,r])=>`cubic-bezier(${e}, ${t}, ${s}, ${r})`,ud={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ar([0,.65,.55,1]),circOut:ar([.55,0,1,.45]),backIn:ar([.31,.01,.66,-.59]),backOut:ar([.33,1.53,.69,.99])};function fg(e,t){if(e)return typeof e=="function"?hg()?og(e,t):"ease-out":Ym(e)?ar(e):Array.isArray(e)?e.map(s=>fg(s,t)||ud.easeOut):ud[e]}function fC(e,t,s,{delay:r=0,duration:n=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:s};l&&(d.offset=l);const h=fg(o,n);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:n,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(d,f)}function pg(e){return typeof e=="function"&&"applyToOptions"in e}function pC({type:e,...t}){return pg(e)&&hg()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class mC extends Fl{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:s,name:r,keyframes:n,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=t,Rl(typeof t.type!="string");const c=pC(t);this.animation=fC(s,r,n,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=Ul(n,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):cC(s,r,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Be(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Be(t)}get time(){return Be(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ht(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&uC()?(this.animation.timeline=t,ze):s(this)}}const mg={anticipate:Hm,backInOut:Gm,circInOut:Wm};function gC(e){return e in mg}function yC(e){typeof e.ease=="string"&&gC(e.ease)&&(e.ease=mg[e.ease])}const la=10;class vC extends mC{constructor(t){yC(t),cg(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:r,onComplete:n,element:i,...a}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const o=new Vl({...a,autoplay:!1}),l=Math.max(la,Ae.now()-this.startTime),c=ot(0,la,l-la);s.setWithVelocity(o.sample(Math.max(0,l-c)).value,o.sample(l).value,c),o.stop()}}const dd=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(It.test(e)||e==="0")&&!e.startsWith("url("));function bC(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function wC(e,t,s,r){const n=e[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=dd(n,t),o=dd(i,t);return!a||!o?!1:bC(e)||(s==="spring"||pg(s))&&r}function wo(e){e.duration=0,e.type="keyframes"}const xC=new Set(["opacity","clipPath","filter","transform"]),_C=jl(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function SC(e){const{motionValue:t,name:s,repeatDelay:r,repeatType:n,damping:i,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return _C()&&s&&xC.has(s)&&(s!=="transform"||!c)&&!l&&!r&&n!=="mirror"&&i!==0&&a!=="inertia"}const kC=40;class EC extends Fl{constructor({autoplay:t=!0,delay:s=0,type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:d,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ae.now();const f={autoplay:t,delay:s,type:r,repeat:n,repeatDelay:i,repeatType:a,name:l,motionValue:c,element:d,...h},p=d?.KeyframeResolver||Bl;this.keyframeResolver=new p(o,(m,g,y)=>this.onKeyframesResolved(m,g,f,!y),l,c,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,s,r,n){this.keyframeResolver=void 0;const{name:i,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=Ae.now(),wC(t,i,a,o)||((gt.instantAnimations||!l)&&d?.(Ul(t,r,s)),t[0]=t[t.length-1],wo(r),r.repeat=0);const f={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>kC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:t},p=!c&&SC(f),m=f.motionValue?.owner?.current,g=p?new vC({...f,element:m}):new Vl(f);g.finished.then(()=>{this.notifyFinished()}).catch(ze),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),oC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function gg(e,t,s,r=0,n=1){const i=Array.from(e).sort((c,d)=>c.sortNodePosition(d)).indexOf(t),a=e.size,o=(a-1)*r;return typeof s=="function"?s(i,a):n===1?i*r:o-i*r}const TC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CC(e){const t=TC.exec(e);if(!t)return[,];const[,s,r,n]=t;return[`--${s??r}`,n]}function yg(e,t,s=1){const[r,n]=CC(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return Dm(a)?parseFloat(a):a}return Nl(n)?yg(n,t,s+1):n}const AC={type:"spring",stiffness:500,damping:25,restSpeed:10},RC=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),jC={type:"keyframes",duration:.8},PC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IC=(e,{keyframes:t})=>t.length>2?jC:Ks.has(e)?e.startsWith("scale")?RC(t[1]):AC:PC,OC=e=>e!==null;function NC(e,{repeat:t,repeatType:s="loop"},r){const n=e.filter(OC),i=t&&s!=="loop"&&t%2===1?0:n.length-1;return n[i]}function zl(e,t){return e?.[t]??e?.default??e}function MC({when:e,delay:t,delayChildren:s,staggerChildren:r,staggerDirection:n,repeat:i,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const ql=(e,t,s,r={},n,i)=>a=>{const o=zl(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-ht(l);const d={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:f=>{t.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:n};MC(o)||Object.assign(d,IC(e,d)),d.duration&&(d.duration=ht(d.duration)),d.repeatDelay&&(d.repeatDelay=ht(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(wo(d),d.delay===0&&(h=!0)),(gt.instantAnimations||gt.skipAnimations)&&(h=!0,wo(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!i&&t.get()!==void 0){const f=NC(d.keyframes,o);if(f!==void 0){J.update(()=>{d.onUpdate(f),d.onComplete()});return}}return o.isSync?new Vl(d):new EC(d)};function hd(e){const t=[{},{}];return e?.values.forEach((s,r)=>{t[0][r]=s.get(),t[1][r]=s.getVelocity()}),t}function Gl(e,t,s,r){if(typeof t=="function"){const[n,i]=hd(r);t=t(s!==void 0?s:e.custom,n,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[n,i]=hd(r);t=t(s!==void 0?s:e.custom,n,i)}return t}function Ps(e,t,s){const r=e.getProps();return Gl(r,t,s!==void 0?s:r.custom,e)}const vg=new Set(["width","height","top","left","right","bottom",...Hs]),fd=30,$C=e=>!isNaN(parseFloat(e));class DC{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const n=Ae.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=Ae.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=$C(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Pl);const r=this.events[t].add(s);return t==="change"?()=>{r(),J.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ae.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>fd)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,fd);return Fm(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ns(e,t){return new DC(e,t)}const xo=e=>Array.isArray(e);function LC(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,Ns(s))}function UC(e){return xo(e)?e[e.length-1]||0:e}function FC(e,t){const s=Ps(e,t);let{transitionEnd:r={},transition:n={},...i}=s||{};i={...i,...r};for(const a in i){const o=UC(i[a]);LC(e,a,o)}}const Ee=e=>!!(e&&e.getVelocity);function VC(e){return!!(Ee(e)&&e.add)}function _o(e,t){const s=e.getValue("willChange");if(VC(s))return s.add(t);if(!s&&gt.WillChange){const r=new gt.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Hl(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const BC="framerAppearId",bg="data-"+Hl(BC);function wg(e){return e.props[bg]}function zC({protectedKeys:e,needsAnimating:t},s){const r=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,r}function xg(e,t,{delay:s=0,transitionOverride:r,type:n}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(i=r);const l=[],c=n&&e.animationState&&e.animationState.getState()[n];for(const d in o){const h=e.getValue(d,e.latestValues[d]??null),f=o[d];if(f===void 0||c&&zC(c,d))continue;const p={delay:s,...zl(i||{},d)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===m&&!p.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const w=wg(e);if(w){const x=window.MotionHandoffAnimation(w,d,J);x!==null&&(p.startTime=x,g=!0)}}_o(e,d),h.start(ql(d,h,f,e.shouldReduceMotion&&vg.has(d)?{type:!1}:p,e,g));const y=h.animation;y&&l.push(y)}return a&&Promise.all(l).then(()=>{J.update(()=>{a&&FC(e,a)})}),l}function So(e,t,s={}){const r=Ps(e,t,s.type==="exit"?e.presenceContext?.custom:void 0);let{transition:n=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(n=s.transitionOverride);const i=r?()=>Promise.all(xg(e,r,s)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=n;return qC(e,t,l,c,d,h,s)}:()=>Promise.resolve(),{when:o}=n;if(o){const[l,c]=o==="beforeChildren"?[i,a]:[a,i];return l().then(()=>c())}else return Promise.all([i(),a(s.delay)])}function qC(e,t,s=0,r=0,n=0,i=1,a){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(So(l,t,{...a,delay:s+(typeof r=="function"?0:r)+gg(e.variantChildren,l,r,n,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}function GC(e,t,s={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const n=t.map(i=>So(e,i,s));r=Promise.all(n)}else if(typeof t=="string")r=So(e,t,s);else{const n=typeof t=="function"?Ps(e,t,s.custom):t;r=Promise.all(xg(e,n,s))}return r.then(()=>{e.notify("AnimationComplete",t)})}const HC={test:e=>e==="auto",parse:e=>e},_g=e=>t=>t.test(e),Sg=[Gs,N,nt,_t,b1,v1,HC],pd=e=>Sg.find(_g(e));function KC(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Um(e):!0}const WC=new Set(["brightness","contrast","saturate","opacity"]);function JC(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=s.match(Ml)||[];if(!r)return e;const n=s.replace(r,"");let i=WC.has(t)?1:0;return r!==s&&(i*=100),t+"("+i+n+")"}const YC=/\b([a-z-]*)\(.*?\)/gu,ko={...It,getAnimatableNone:e=>{const t=e.match(YC);return t?t.map(JC).join(" "):e}},md={...Gs,transform:Math.round},QC={rotate:_t,rotateX:_t,rotateY:_t,rotateZ:_t,scale:sn,scaleX:sn,scaleY:sn,scaleZ:sn,skew:_t,skewX:_t,skewY:_t,distance:N,translateX:N,translateY:N,translateZ:N,x:N,y:N,z:N,perspective:N,transformPerspective:N,opacity:Ar,originX:td,originY:td,originZ:N},Kl={borderWidth:N,borderTopWidth:N,borderRightWidth:N,borderBottomWidth:N,borderLeftWidth:N,borderRadius:N,borderTopLeftRadius:N,borderTopRightRadius:N,borderBottomRightRadius:N,borderBottomLeftRadius:N,width:N,maxWidth:N,height:N,maxHeight:N,top:N,right:N,bottom:N,left:N,inset:N,insetBlock:N,insetBlockStart:N,insetBlockEnd:N,insetInline:N,insetInlineStart:N,insetInlineEnd:N,padding:N,paddingTop:N,paddingRight:N,paddingBottom:N,paddingLeft:N,paddingBlock:N,paddingBlockStart:N,paddingBlockEnd:N,paddingInline:N,paddingInlineStart:N,paddingInlineEnd:N,margin:N,marginTop:N,marginRight:N,marginBottom:N,marginLeft:N,marginBlock:N,marginBlockStart:N,marginBlockEnd:N,marginInline:N,marginInlineStart:N,marginInlineEnd:N,fontSize:N,backgroundPositionX:N,backgroundPositionY:N,...QC,zIndex:md,fillOpacity:Ar,strokeOpacity:Ar,numOctaves:md},XC={...Kl,color:ae,backgroundColor:ae,outlineColor:ae,fill:ae,stroke:ae,borderColor:ae,borderTopColor:ae,borderRightColor:ae,borderBottomColor:ae,borderLeftColor:ae,filter:ko,WebkitFilter:ko},kg=e=>XC[e];function Eg(e,t){let s=kg(e);return s!==ko&&(s=It),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const ZC=new Set(["auto","none","0"]);function eA(e,t,s){let r=0,n;for(;r<e.length&&!n;){const i=e[r];typeof i=="string"&&!ZC.has(i)&&Rr(i).values.length&&(n=e[r]),r++}if(n&&s)for(const i of t)e[i]=Eg(s,n)}class tA extends Bl{constructor(t,s,r,n,i){super(t,s,r,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let h=t[d];if(typeof h=="string"&&(h=h.trim(),Nl(h))){const f=yg(h,s.current);f!==void 0&&(t[d]=f),d===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!vg.has(r)||t.length!==2)return;const[n,i]=t,a=pd(n),o=pd(i),l=ed(n),c=ed(i);if(l!==c&&Tt[r]){this.needsMeasurement=!0;return}if(a!==o)if(cd(a)&&cd(o))for(let d=0;d<t.length;d++){const h=t[d];typeof h=="string"&&(t[d]=parseFloat(h))}else Tt[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,r=[];for(let n=0;n<t.length;n++)(t[n]===null||KC(t[n]))&&r.push(n);r.length&&eA(t,r,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Tt[r](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const n=s[s.length-1];n!==void 0&&t.getValue(r,n).jump(n,!1)}measureEndState(){const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const n=t.getValue(s);n&&n.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=Tt[s](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{t.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function sA(e,t,s){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const n=s?.[e]??r.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e).filter(r=>r!=null)}const Tg=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Eo(e){return Lm(e)&&"offsetHeight"in e}const{schedule:Wl}=Qm(queueMicrotask,!1),We={x:!1,y:!1};function Cg(){return We.x||We.y}function rA(e){return e==="x"||e==="y"?We[e]?null:(We[e]=!0,()=>{We[e]=!1}):We.x||We.y?null:(We.x=We.y=!0,()=>{We.x=We.y=!1})}function Ag(e,t){const s=sA(e),r=new AbortController,n={passive:!0,...t,signal:r.signal};return[s,n,()=>r.abort()]}function gd(e){return!(e.pointerType==="touch"||Cg())}function nA(e,t,s={}){const[r,n,i]=Ag(e,s),a=o=>{if(!gd(o))return;const{target:l}=o,c=t(l,o);if(typeof c!="function"||!l)return;const d=h=>{gd(h)&&(c(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,n)};return r.forEach(o=>{o.addEventListener("pointerenter",a,n)}),i}const Rg=(e,t)=>t?e===t?!0:Rg(e,t.parentElement):!1,Jl=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,iA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jg(e){return iA.has(e.tagName)||e.isContentEditable===!0}const bn=new WeakSet;function yd(e){return t=>{t.key==="Enter"&&e(t)}}function ca(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const aA=(e,t)=>{const s=e.currentTarget;if(!s)return;const r=yd(()=>{if(bn.has(s))return;ca(s,"down");const n=yd(()=>{ca(s,"up")}),i=()=>ca(s,"cancel");s.addEventListener("keyup",n,t),s.addEventListener("blur",i,t)});s.addEventListener("keydown",r,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),t)};function vd(e){return Jl(e)&&!Cg()}function oA(e,t,s={}){const[r,n,i]=Ag(e,s),a=o=>{const l=o.currentTarget;if(!vd(o))return;bn.add(l);const c=t(l,o),d=(p,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),bn.has(l)&&bn.delete(l),vd(p)&&typeof c=="function"&&c(p,{success:m})},h=p=>{d(p,l===window||l===document||s.useGlobalTarget||Rg(l,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,n),window.addEventListener("pointercancel",f,n)};return r.forEach(o=>{(s.useGlobalTarget?window:o).addEventListener("pointerdown",a,n),Eo(o)&&(o.addEventListener("focus",c=>aA(c,n)),!jg(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function Pg(e){return Lm(e)&&"ownerSVGElement"in e}function lA(e){return Pg(e)&&e.tagName==="svg"}const cA=[...Sg,ae,It],uA=e=>cA.find(_g(e)),bd=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ss=()=>({x:bd(),y:bd()}),wd=()=>({min:0,max:0}),ue=()=>({x:wd(),y:wd()}),To={current:null},Ig={current:!1},dA=typeof window<"u";function hA(){if(Ig.current=!0,!!dA)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>To.current=e.matches;e.addEventListener("change",t),t()}else To.current=!1}const fA=new WeakMap;function mi(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function jr(e){return typeof e=="string"||Array.isArray(e)}const Yl=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ql=["initial",...Yl];function gi(e){return mi(e.animate)||Ql.some(t=>jr(e[t]))}function Og(e){return!!(gi(e)||e.variants)}function pA(e,t,s){for(const r in t){const n=t[r],i=s[r];if(Ee(n))e.addValue(r,n);else if(Ee(i))e.addValue(r,Ns(n,{owner:e}));else if(i!==n)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(n):a.hasAnimated||a.set(n)}else{const a=e.getStaticValue(r);e.addValue(r,Ns(a!==void 0?a:n,{owner:e}))}}for(const r in s)t[r]===void 0&&e.removeValue(r);return t}const xd=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let zn={};function Ng(e){zn=e}function mA(){return zn}class gA{scrapeMotionValuesFromProps(t,s,r){return{}}constructor({parent:t,props:s,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Bl,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Ae.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,J.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=gi(s),this.isVariantNode=Og(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&Ee(p)&&p.set(l[f])}}mount(t){this.current=t,fA.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Ig.current||hA(),this.shouldReduceMotion=To.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Pt(this.notifyUpdate),Pt(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ks.has(t);r&&this.onBindTransform&&this.onBindTransform();const n=s.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&J.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{n(),i&&i(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in zn){const s=zn[t];if(!s)continue;const{isEnabled:r,Feature:n}=s;if(!this.features[t]&&n&&r(this.props)&&(this.features[t]=new n(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ue()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<xd.length;r++){const n=xd[r];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,a=t[i];a&&(this.propEventSubscriptions[n]=this.on(n,a))}this.prevMotionValues=pA(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const r=this.values.get(t);s!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&s!==void 0&&(r=Ns(s===null?void 0:s,{owner:this}),this.addValue(t,r)),r}readValue(t,s){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Dm(r)||Um(r))?r=parseFloat(r):!uA(r)&&It.test(s)&&(r=Eg(t,s)),this.setBaseTarget(t,Ee(r)?r.get():r)),Ee(r)?r.get():r}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const i=Gl(this.props,s,this.presenceContext?.custom);i&&(r=i[t])}if(s&&r!==void 0)return r;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!Ee(n)?n:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Pl),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){Wl.render(this.render)}}class Mg extends gA{constructor(){super(...arguments),this.KeyframeResolver=tA}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){const r=t.style;return r?r[s]:void 0}removeValueFromRenderState(t,{vars:s,style:r}){delete s[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ee(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}class Mt{constructor(t){this.isMounted=!1,this.node=t}update(){}}function $g({top:e,left:t,right:s,bottom:r}){return{x:{min:t,max:s},y:{min:e,max:r}}}function yA({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function vA(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function ua(e){return e===void 0||e===1}function Co({scale:e,scaleX:t,scaleY:s}){return!ua(e)||!ua(t)||!ua(s)}function zt(e){return Co(e)||Dg(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Dg(e){return _d(e.x)||_d(e.y)}function _d(e){return e&&e!=="0%"}function qn(e,t,s){const r=e-s,n=t*r;return s+n}function Sd(e,t,s,r,n){return n!==void 0&&(e=qn(e,n,r)),qn(e,s,r)+t}function Ao(e,t=0,s=1,r,n){e.min=Sd(e.min,t,s,r,n),e.max=Sd(e.max,t,s,r,n)}function Lg(e,{x:t,y:s}){Ao(e.x,t.translate,t.scale,t.originPoint),Ao(e.y,s.translate,s.scale,s.originPoint)}const kd=.999999999999,Ed=1.0000000000001;function bA(e,t,s,r=!1){const n=s.length;if(!n)return;t.x=t.y=1;let i,a;for(let o=0;o<n;o++){i=s[o],a=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Es(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Lg(e,a)),r&&zt(i.latestValues)&&Es(e,i.latestValues))}t.x<Ed&&t.x>kd&&(t.x=1),t.y<Ed&&t.y>kd&&(t.y=1)}function ks(e,t){e.min=e.min+t,e.max=e.max+t}function Td(e,t,s,r,n=.5){const i=ee(e.min,e.max,n);Ao(e,t,s,i,r)}function Es(e,t){Td(e.x,t.x,t.scaleX,t.scale,t.originX),Td(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ug(e,t){return $g(vA(e.getBoundingClientRect(),t))}function wA(e,t,s){const r=Ug(e,s),{scroll:n}=t;return n&&(ks(r.x,n.offset.x),ks(r.y,n.offset.y)),r}const xA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_A=Hs.length;function SA(e,t,s){let r="",n=!0;for(let i=0;i<_A;i++){const a=Hs[i],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number")l=o===(a.startsWith("scale")?1:0);else{const c=parseFloat(o);l=a.startsWith("scale")?c===1:c===0}if(!l||s){const c=Tg(o,Kl[a]);if(!l){n=!1;const d=xA[a]||a;r+=`${d}(${c}) `}s&&(t[a]=c)}}return r=r.trim(),s?r=s(t,n?"":r):n&&(r="none"),r}function Xl(e,t,s){const{style:r,vars:n,transformOrigin:i}=e;let a=!1,o=!1;for(const l in t){const c=t[l];if(Ks.has(l)){a=!0;continue}else if(Zm(l)){n[l]=c;continue}else{const d=Tg(c,Kl[l]);l.startsWith("origin")?(o=!0,i[l]=d):r[l]=d}}if(t.transform||(a||s?r.transform=SA(t,e.transform,s):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${c} ${d}`}}function Fg(e,{style:t,vars:s},r,n){const i=e.style;let a;for(a in t)i[a]=t[a];n?.applyProjectionStyles(i,r);for(a in s)i.setProperty(a,s[a])}function Cd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const sr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(N.test(e))e=parseFloat(e);else return e;const s=Cd(e,t.target.x),r=Cd(e,t.target.y);return`${s}% ${r}%`}},kA={correct:(e,{treeScale:t,projectionDelta:s})=>{const r=e,n=It.parse(e);if(n.length>5)return r;const i=It.createTransformer(e),a=typeof n[0]!="number"?1:0,o=s.x.scale*t.x,l=s.y.scale*t.y;n[0+a]/=o,n[1+a]/=l;const c=ee(o,l,.5);return typeof n[2+a]=="number"&&(n[2+a]/=c),typeof n[3+a]=="number"&&(n[3+a]/=c),i(n)}},Ro={borderRadius:{...sr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sr,borderTopRightRadius:sr,borderBottomLeftRadius:sr,borderBottomRightRadius:sr,boxShadow:kA};function Vg(e,{layout:t,layoutId:s}){return Ks.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Ro[e]||e==="opacity")}function Zl(e,t,s){const r=e.style,n=t?.style,i={};if(!r)return i;for(const a in r)(Ee(r[a])||n&&Ee(n[a])||Vg(a,e)||s?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}function EA(e){return window.getComputedStyle(e)}class TA extends Mg{constructor(){super(...arguments),this.type="html",this.renderInstance=Fg}readValueFromInstance(t,s){if(Ks.has(s))return this.projection?.isProjecting?mo(s):sC(t,s);{const r=EA(t),n=(Zm(s)?r.getPropertyValue(s):r[s])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:s}){return Ug(t,s)}build(t,s,r){Xl(t,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,s,r){return Zl(t,s,r)}}const CA={offset:"stroke-dashoffset",array:"stroke-dasharray"},AA={offset:"strokeDashoffset",array:"strokeDasharray"};function RA(e,t,s=1,r=0,n=!0){e.pathLength=1;const i=n?CA:AA;e[i.offset]=`${-r}`,e[i.array]=`${t} ${s}`}const jA=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Bg(e,{attrX:t,attrY:s,attrScale:r,pathLength:n,pathSpacing:i=1,pathOffset:a=0,...o},l,c,d){if(Xl(e,o,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=d?.transformBox??"fill-box",delete h.transformBox);for(const p of jA)h[p]!==void 0&&(f[p]=h[p],delete h[p]);t!==void 0&&(h.x=t),s!==void 0&&(h.y=s),r!==void 0&&(h.scale=r),n!==void 0&&RA(h,n,i,a,!1)}const zg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),qg=e=>typeof e=="string"&&e.toLowerCase()==="svg";function PA(e,t,s,r){Fg(e,t,void 0,r);for(const n in t.attrs)e.setAttribute(zg.has(n)?n:Hl(n),t.attrs[n])}function Gg(e,t,s){const r=Zl(e,t,s);for(const n in e)if(Ee(e[n])||Ee(t[n])){const i=Hs.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[i]=e[n]}return r}class IA extends Mg{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ue}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Ks.has(s)){const r=kg(s);return r&&r.default||0}return s=zg.has(s)?s:Hl(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,r){return Gg(t,s,r)}build(t,s,r){Bg(t,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,s,r,n){PA(t,s,r,n)}mount(t){this.isSVGTag=qg(t.tagName),super.mount(t)}}const OA=Ql.length;function Hg(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?Hg(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<OA;s++){const r=Ql[s],n=e.props[r];(jr(n)||n===!1)&&(t[r]=n)}return t}function Kg(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(t[r]!==e[r])return!1;return!0}const NA=[...Yl].reverse(),MA=Yl.length;function $A(e){return t=>Promise.all(t.map(({animation:s,options:r})=>GC(e,s,r)))}function DA(e){let t=$A(e),s=Ad(),r=!0;const n=l=>(c,d)=>{const h=Ps(e,d,l==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:f,transitionEnd:p,...m}=h;c={...c,...m,...p}}return c};function i(l){t=l(e)}function a(l){const{props:c}=e,d=Hg(e.parent)||{},h=[],f=new Set;let p={},m=1/0;for(let y=0;y<MA;y++){const w=NA[y],x=s[w],v=c[w]!==void 0?c[w]:d[w],S=jr(v),k=w===l?x.isActive:null;k===!1&&(m=y);let T=v===d[w]&&v!==c[w]&&S;if(T&&r&&e.manuallyAnimateOnMount&&(T=!1),x.protectedKeys={...p},!x.isActive&&k===null||!v&&!x.prevProp||mi(v)||typeof v=="boolean")continue;const C=LA(x.prevProp,v);let _=C||w===l&&x.isActive&&!T&&S||y>m&&S,A=!1;const E=Array.isArray(v)?v:[v];let j=E.reduce(n(w),{});k===!1&&(j={});const{prevResolvedValues:M={}}=x,V={...M,...j},Q=G=>{_=!0,f.has(G)&&(A=!0,f.delete(G)),x.needsAnimating[G]=!0;const R=e.getValue(G);R&&(R.liveStyle=!1)};for(const G in V){const R=j[G],Te=M[G];if(p.hasOwnProperty(G))continue;let _e=!1;xo(R)&&xo(Te)?_e=!Kg(R,Te):_e=R!==Te,_e?R!=null?Q(G):f.add(G):R!==void 0&&f.has(G)?Q(G):x.protectedKeys[G]=!0}x.prevProp=v,x.prevResolvedValues=j,x.isActive&&(p={...p,...j}),r&&e.blockInitialAnimation&&(_=!1);const F=T&&C;_&&(!F||A)&&h.push(...E.map(G=>{const R={type:w};if(typeof G=="string"&&r&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:Te}=e,_e=Ps(Te,G);if(Te.enteringChildren&&_e){const{delayChildren:bt}=_e.transition||{};R.delay=gg(Te.enteringChildren,e,bt)}}return{animation:G,options:R}}))}if(f.size){const y={};if(typeof c.initial!="boolean"){const w=Ps(e,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(y.transition=w.transition)}f.forEach(w=>{const x=e.getBaseTarget(w),v=e.getValue(w);v&&(v.liveStyle=!0),y[w]=x??null}),h.push({animation:y})}let g=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(h):Promise.resolve()}function o(l,c){if(s[l].isActive===c)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(l,c)),s[l].isActive=c;const d=a(l);for(const h in s)s[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>s,reset:()=>{s=Ad()}}}function LA(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Kg(t,e):!1}function Ut(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ad(){return{animate:Ut(!0),whileInView:Ut(),whileHover:Ut(),whileTap:Ut(),whileDrag:Ut(),whileFocus:Ut(),exit:Ut()}}function Rd(e,t){e.min=t.min,e.max=t.max}function He(e,t){Rd(e.x,t.x),Rd(e.y,t.y)}function jd(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const Wg=1e-4,UA=1-Wg,FA=1+Wg,Jg=.01,VA=0-Jg,BA=0+Jg;function Re(e){return e.max-e.min}function zA(e,t,s){return Math.abs(e-t)<=s}function Pd(e,t,s,r=.5){e.origin=r,e.originPoint=ee(t.min,t.max,e.origin),e.scale=Re(s)/Re(t),e.translate=ee(s.min,s.max,e.origin)-e.originPoint,(e.scale>=UA&&e.scale<=FA||isNaN(e.scale))&&(e.scale=1),(e.translate>=VA&&e.translate<=BA||isNaN(e.translate))&&(e.translate=0)}function mr(e,t,s,r){Pd(e.x,t.x,s.x,r?r.originX:void 0),Pd(e.y,t.y,s.y,r?r.originY:void 0)}function Id(e,t,s){e.min=s.min+t.min,e.max=e.min+Re(t)}function qA(e,t,s){Id(e.x,t.x,s.x),Id(e.y,t.y,s.y)}function Od(e,t,s){e.min=t.min-s.min,e.max=e.min+Re(t)}function Gn(e,t,s){Od(e.x,t.x,s.x),Od(e.y,t.y,s.y)}function Nd(e,t,s,r,n){return e-=t,e=qn(e,1/s,r),n!==void 0&&(e=qn(e,1/n,r)),e}function GA(e,t=0,s=1,r=.5,n,i=e,a=e){if(nt.test(t)&&(t=parseFloat(t),t=ee(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=ee(i.min,i.max,r);e===i&&(o-=t),e.min=Nd(e.min,t,s,o,n),e.max=Nd(e.max,t,s,o,n)}function Md(e,t,[s,r,n],i,a){GA(e,t[s],t[r],t[n],t.scale,i,a)}const HA=["x","scaleX","originX"],KA=["y","scaleY","originY"];function $d(e,t,s,r){Md(e.x,t,HA,s?s.x:void 0,r?r.x:void 0),Md(e.y,t,KA,s?s.y:void 0,r?r.y:void 0)}function Dd(e){return e.translate===0&&e.scale===1}function Yg(e){return Dd(e.x)&&Dd(e.y)}function Ld(e,t){return e.min===t.min&&e.max===t.max}function WA(e,t){return Ld(e.x,t.x)&&Ld(e.y,t.y)}function Ud(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Qg(e,t){return Ud(e.x,t.x)&&Ud(e.y,t.y)}function Fd(e){return Re(e.x)/Re(e.y)}function Vd(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function Ue(e){return[e("x"),e("y")]}function JA(e,t,s){let r="";const n=e.x.translate/t.x,i=e.y.translate/t.y,a=s?.z||0;if((n||i||a)&&(r=`translate3d(${n}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:m}=s;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Xg=["TopLeft","TopRight","BottomLeft","BottomRight"],YA=Xg.length,Bd=e=>typeof e=="string"?parseFloat(e):e,zd=e=>typeof e=="number"||N.test(e);function QA(e,t,s,r,n,i){n?(e.opacity=ee(0,s.opacity??1,XA(r)),e.opacityExit=ee(t.opacity??1,0,ZA(r))):i&&(e.opacity=ee(t.opacity??1,s.opacity??1,r));for(let a=0;a<YA;a++){const o=`border${Xg[a]}Radius`;let l=qd(t,o),c=qd(s,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||zd(l)===zd(c)?(e[o]=Math.max(ee(Bd(l),Bd(c),r),0),(nt.test(c)||nt.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||s.rotate)&&(e.rotate=ee(t.rotate||0,s.rotate||0,r))}function qd(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const XA=Zg(0,.5,Km),ZA=Zg(.5,.95,ze);function Zg(e,t,s){return r=>r<e?0:r>t?1:s(Cr(e,t,r))}function eR(e,t,s){const r=Ee(e)?e:Ns(e);return r.start(ql("",r,t,s)),r.animation}function Pr(e,t,s,r={passive:!0}){return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s)}const tR=(e,t)=>e.depth-t.depth;class sR{constructor(){this.children=[],this.isDirty=!1}add(t){Cl(this.children,t),this.isDirty=!0}remove(t){Al(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(tR),this.isDirty=!1,this.children.forEach(t)}}function rR(e,t){const s=Ae.now(),r=({timestamp:n})=>{const i=n-s;i>=t&&(Pt(r),e(i-t))};return J.setup(r,!0),()=>Pt(r)}function wn(e){return Ee(e)?e.get():e}class nR{constructor(){this.members=[]}add(t){Cl(this.members,t),t.scheduleRender()}remove(t){if(Al(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(n=>t===n);if(s===0)return!1;let r;for(let n=s;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,s){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender();const n=r.options.layoutDependency,i=t.options.layoutDependency;n!==void 0&&i!==void 0&&n===i||(t.resumeFrom=r,s&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:r}=t;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const xn={hasAnimatedSinceResize:!0,hasEverUpdated:!1},da=["","X","Y","Z"],iR=1e3;let aR=0;function ha(e,t,s,r){const{latestValues:n}=t;n[e]&&(s[e]=n[e],t.setStaticValue(e,0),r&&(r[e]=0))}function ey(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=wg(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:n,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",J,!(n||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&ey(r)}function ty({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:r,resetTransform:n}){return class{constructor(a={},o=t?.()){this.id=aR++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(cR),this.nodes.forEach(fR),this.nodes.forEach(pR),this.nodes.forEach(uR)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new sR)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Pl),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Pg(a)&&!lA(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;J.read(()=>{h=window.innerWidth}),e(a,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=rR(f,250),xn.hasAnimatedSinceResize&&(xn.hasAnimatedSinceResize=!1,this.nodes.forEach(Kd)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||bR,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=c.getProps(),w=!this.targetLayout||!Qg(this.targetLayout,p),x=!h&&f;if(this.options.layoutRoot||this.resumeFrom||x||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...zl(m,"layout"),onPlay:g,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(d,x)}else h||Kd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Pt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mR),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ey(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Gd);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Hd);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(hR),this.nodes.forEach(oR),this.nodes.forEach(lR)):this.nodes.forEach(Hd),this.clearAllSnapshots();const o=Ae.now();xe.delta=ot(0,1e3/60,o-xe.timestamp),xe.timestamp=o,xe.isProcessing=!0,ra.update.process(xe),ra.preRender.process(xe),ra.render.process(xe),xe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Wl.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dR),this.sharedNodes.forEach(gR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,J.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){J.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Re(this.snapshot.measuredBox.x)&&!Re(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!n)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Yg(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||zt(this.latestValues)||d)&&(n(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),wR(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ue();const o=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(xR))){const{scroll:c}=this.root;c&&(ks(o.x,c.offset.x),ks(o.y,c.offset.y))}return o}removeElementScroll(a){const o=ue();if(He(o,a),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:h}=c;c!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&He(o,a),ks(o.x,d.offset.x),ks(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=ue();He(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Es(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),zt(d.latestValues)&&Es(l,d.latestValues)}return zt(this.latestValues)&&Es(l,this.latestValues),l}removeTransform(a){const o=ue();He(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!zt(c.latestValues))continue;Co(c.latestValues)&&c.updateSnapshot();const d=ue(),h=c.measurePageBox();He(d,h),$d(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return zt(this.latestValues)&&$d(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=xe.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ue(),this.targetWithTransforms=ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):He(this.target,this.layout.layoutBox),Lg(this.target,this.targetDelta)):He(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Co(this.parent.latestValues)||Dg(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,o,l){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),Gn(this.relativeTargetOrigin,o,l),He(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===xe.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;He(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;bA(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ue());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jd(this.prevProjectionDelta.x,this.projectionDelta.x),jd(this.prevProjectionDelta.y,this.projectionDelta.y)),mr(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Vd(this.projectionDelta.x,this.prevProjectionDelta.x)||!Vd(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ss(),this.projectionDelta=Ss(),this.projectionDeltaWithTransform=Ss()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=Ss();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=ue(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,y=this.getStack(),w=!y||y.members.length<=1,x=!!(g&&!w&&this.options.crossfade===!0&&!this.path.some(vR));this.animationProgress=0;let v;this.mixTargetDelta=S=>{const k=S/1e3;Wd(h.x,a.x,k),Wd(h.y,a.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gn(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),yR(this.relativeTarget,this.relativeTargetOrigin,f,k),v&&WA(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=ue()),He(v,this.relativeTarget)),g&&(this.animationValues=d,QA(d,c,this.latestValues,k,x,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Pt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=J.update(()=>{xn.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ns(0)),this.currentAnimation=eR(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:d}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&sy(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ue();const h=Re(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const f=Re(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}He(o,l),Es(o,d),mr(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new nR),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&ha("z",a,c,this.animationValues);for(let d=0;d<da.length;d++)ha(`rotate${da[d]}`,a,c,this.animationValues),ha(`skew${da[d]}`,a,c,this.animationValues);a.render();for(const d in c)a.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=wn(o?.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=wn(o?.pointerEvents)||""),this.hasProjected&&!zt(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=JA(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),a.transform=h;const{x:f,y:p}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Ro){if(d[m]===void 0)continue;const{correct:g,applyTo:y,isCSSVariable:w}=Ro[m],x=h==="none"?d[m]:g(d[m],c);if(y){const v=y.length;for(let S=0;S<v;S++)a[y[S]]=x}else w?this.options.visualElement.renderState.vars[m]=x:a[m]=x}this.options.layoutId&&(a.pointerEvents=c===this?wn(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(Gd),this.root.sharedNodes.clear()}}}function oR(e){e.updateLayout()}function lR(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:n}=e.options,i=t.source!==e.layout.source;n==="size"?Ue(d=>{const h=i?t.measuredBox[d]:t.layoutBox[d],f=Re(h);h.min=s[d].min,h.max=h.min+f}):sy(n,t.layoutBox,s)&&Ue(d=>{const h=i?t.measuredBox[d]:t.layoutBox[d],f=Re(s[d]);h.max=h.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+f)});const a=Ss();mr(a,s,t.layoutBox);const o=Ss();i?mr(o,e.applyTransform(r,!0),t.measuredBox):mr(o,s,t.layoutBox);const l=!Yg(a);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const p=ue();Gn(p,t.layoutBox,h.layoutBox);const m=ue();Gn(m,s,f.layoutBox),Qg(p,m)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=p,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function cR(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function uR(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function dR(e){e.clearSnapshot()}function Gd(e){e.clearMeasurements()}function Hd(e){e.isLayoutDirty=!1}function hR(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Kd(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function fR(e){e.resolveTargetDelta()}function pR(e){e.calcProjection()}function mR(e){e.resetSkewAndRotation()}function gR(e){e.removeLeadSnapshot()}function Wd(e,t,s){e.translate=ee(t.translate,0,s),e.scale=ee(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function Jd(e,t,s,r){e.min=ee(t.min,s.min,r),e.max=ee(t.max,s.max,r)}function yR(e,t,s,r){Jd(e.x,t.x,s.x,r),Jd(e.y,t.y,s.y,r)}function vR(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const bR={duration:.45,ease:[.4,0,.1,1]},Yd=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Qd=Yd("applewebkit/")&&!Yd("chrome/")?Math.round:ze;function Xd(e){e.min=Qd(e.min),e.max=Qd(e.max)}function wR(e){Xd(e.x),Xd(e.y)}function sy(e,t,s){return e==="position"||e==="preserve-aspect"&&!zA(Fd(t),Fd(s),.2)}function xR(e){return e!==e.root&&e.scroll?.wasRoot}const _R=ty({attachResizeListener:(e,t)=>Pr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),fa={current:void 0},ry=ty({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!fa.current){const e=new _R({});e.mount(window),e.setOptions({layoutScroll:!0}),fa.current=e}return fa.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ec=b.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Zd(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function SR(...e){return t=>{let s=!1;const r=e.map(n=>{const i=Zd(n,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let n=0;n<r.length;n++){const i=r[n];typeof i=="function"?i():Zd(e[n],null)}}}}function kR(...e){return b.useCallback(SR(...e),e)}class ER extends b.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const r=s.offsetParent,n=Eo(r)&&r.offsetWidth||0,i=Eo(r)&&r.offsetHeight||0,a=this.props.sizeRef.current;a.height=s.offsetHeight||0,a.width=s.offsetWidth||0,a.top=s.offsetTop,a.left=s.offsetLeft,a.right=n-a.width-a.left,a.bottom=i-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function TR({children:e,isPresent:t,anchorX:s,anchorY:r,root:n}){const i=b.useId(),a=b.useRef(null),o=b.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:l}=b.useContext(ec),c=e.props?.ref??e?.ref,d=kR(a,c);return b.useInsertionEffect(()=>{const{width:h,height:f,top:p,left:m,right:g,bottom:y}=o.current;if(t||!a.current||!h||!f)return;const w=s==="left"?`left: ${m}`:`right: ${g}`,x=r==="bottom"?`bottom: ${y}`:`top: ${p}`;a.current.dataset.motionPopId=i;const v=document.createElement("style");l&&(v.nonce=l);const S=n??document.head;return S.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${w}px !important;
            ${x}px !important;
          }
        `),()=>{S.contains(v)&&S.removeChild(v)}},[t]),u.jsx(ER,{isPresent:t,childRef:a,sizeRef:o,children:b.cloneElement(e,{ref:d})})}const CR=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:n,presenceAffectsLayout:i,mode:a,anchorX:o,anchorY:l,root:c})=>{const d=Tl(AR),h=b.useId();let f=!0,p=b.useMemo(()=>(f=!1,{id:h,initial:t,isPresent:s,custom:n,onExitComplete:m=>{d.set(m,!0);for(const g of d.values())if(!g)return;r&&r()},register:m=>(d.set(m,!1),()=>d.delete(m))}),[s,d,r]);return i&&f&&(p={...p}),b.useMemo(()=>{d.forEach((m,g)=>d.set(g,!1))},[s]),b.useEffect(()=>{!s&&!d.size&&r&&r()},[s]),a==="popLayout"&&(e=u.jsx(TR,{isPresent:s,anchorX:o,anchorY:l,root:c,children:e})),u.jsx(pi.Provider,{value:p,children:e})};function AR(){return new Map}function ny(e=!0){const t=b.useContext(pi);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:n}=t,i=b.useId();b.useEffect(()=>{if(e)return n(i)},[e]);const a=b.useCallback(()=>e&&r&&r(i),[i,r,e]);return!s&&r?[!1,a]:[!0]}const rn=e=>e.key||"";function eh(e){const t=[];return b.Children.forEach(e,s=>{b.isValidElement(s)&&t.push(s)}),t}const RR=({children:e,custom:t,initial:s=!0,onExitComplete:r,presenceAffectsLayout:n=!0,mode:i="sync",propagate:a=!1,anchorX:o="left",anchorY:l="top",root:c})=>{const[d,h]=ny(a),f=b.useMemo(()=>eh(e),[e]),p=a&&!d?[]:f.map(rn),m=b.useRef(!0),g=b.useRef(f),y=Tl(()=>new Map),w=b.useRef(new Set),[x,v]=b.useState(f),[S,k]=b.useState(f);$m(()=>{m.current=!1,g.current=f;for(let _=0;_<S.length;_++){const A=rn(S[_]);p.includes(A)?(y.delete(A),w.current.delete(A)):y.get(A)!==!0&&y.set(A,!1)}},[S,p.length,p.join("-")]);const T=[];if(f!==x){let _=[...f];for(let A=0;A<S.length;A++){const E=S[A],j=rn(E);p.includes(j)||(_.splice(A,0,E),T.push(E))}return i==="wait"&&T.length&&(_=T),k(eh(_)),v(f),null}const{forceRender:C}=b.useContext(El);return u.jsx(u.Fragment,{children:S.map(_=>{const A=rn(_),E=a&&!d?!1:f===S||p.includes(A),j=()=>{if(w.current.has(A))return;if(w.current.add(A),y.has(A))y.set(A,!0);else return;let M=!0;y.forEach(V=>{V||(M=!1)}),M&&(C?.(),k(g.current),a&&h?.(),r&&r())};return u.jsx(CR,{isPresent:E,initial:!m.current||s?void 0:!1,custom:t,presenceAffectsLayout:n,mode:i,root:c,onExitComplete:E?void 0:j,anchorX:o,anchorY:l,children:_},A)})})},iy=b.createContext({strict:!1}),th={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let sh=!1;function jR(){if(sh)return;const e={};for(const t in th)e[t]={isEnabled:s=>th[t].some(r=>!!s[r])};Ng(e),sh=!0}function ay(){return jR(),mA()}function PR(e){const t=ay();for(const s in e)t[s]={...t[s],...e[s]};Ng(t)}const IR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hn(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||IR.has(e)}let oy=e=>!Hn(e);function OR(e){typeof e=="function"&&(oy=t=>t.startsWith("on")?!Hn(t):e(t))}try{OR(require("@emotion/is-prop-valid").default)}catch{}function NR(e,t,s){const r={};for(const n in e)n==="values"&&typeof e.values=="object"||(oy(n)||s===!0&&Hn(n)||!t&&!Hn(n)||e.draggable&&n.startsWith("onDrag"))&&(r[n]=e[n]);return r}const yi=b.createContext({});function MR(e,t){if(gi(e)){const{initial:s,animate:r}=e;return{initial:s===!1||jr(s)?s:void 0,animate:jr(r)?r:void 0}}return e.inherit!==!1?t:{}}function $R(e){const{initial:t,animate:s}=MR(e,b.useContext(yi));return b.useMemo(()=>({initial:t,animate:s}),[rh(t),rh(s)])}function rh(e){return Array.isArray(e)?e.join(" "):e}const tc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ly(e,t,s){for(const r in t)!Ee(t[r])&&!Vg(r,s)&&(e[r]=t[r])}function DR({transformTemplate:e},t){return b.useMemo(()=>{const s=tc();return Xl(s,t,e),Object.assign({},s.vars,s.style)},[t])}function LR(e,t){const s=e.style||{},r={};return ly(r,s,e),Object.assign(r,DR(e,t)),r}function UR(e,t){const s={},r=LR(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const cy=()=>({...tc(),attrs:{}});function FR(e,t,s,r){const n=b.useMemo(()=>{const i=cy();return Bg(i,t,qg(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};ly(i,e.style,e),n.style={...i,...n.style}}return n}const VR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sc(e){return typeof e!="string"||e.includes("-")?!1:!!(VR.indexOf(e)>-1||/[A-Z]/u.test(e))}function BR(e,t,s,{latestValues:r},n,i=!1,a){const l=(a??sc(e)?FR:UR)(t,r,n,e),c=NR(t,typeof e=="string",i),d=e!==b.Fragment?{...c,...l,ref:s}:{},{children:h}=t,f=b.useMemo(()=>Ee(h)?h.get():h,[h]);return b.createElement(e,{...d,children:f})}function zR({scrapeMotionValuesFromProps:e,createRenderState:t},s,r,n){return{latestValues:qR(s,r,n,e),renderState:t()}}function qR(e,t,s,r){const n={},i=r(e,{});for(const f in i)n[f]=wn(i[f]);let{initial:a,animate:o}=e;const l=gi(e),c=Og(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=s?s.initial===!1:!1;d=d||a===!1;const h=d?o:a;if(h&&typeof h!="boolean"&&!mi(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const m=Gl(e,f[p]);if(m){const{transitionEnd:g,transition:y,...w}=m;for(const x in w){let v=w[x];if(Array.isArray(v)){const S=d?v.length-1:0;v=v[S]}v!==null&&(n[x]=v)}for(const x in g)n[x]=g[x]}}}return n}const uy=e=>(t,s)=>{const r=b.useContext(yi),n=b.useContext(pi),i=()=>zR(e,t,r,n);return s?i():Tl(i)},GR=uy({scrapeMotionValuesFromProps:Zl,createRenderState:tc}),HR=uy({scrapeMotionValuesFromProps:Gg,createRenderState:cy}),KR=Symbol.for("motionComponentSymbol");function WR(e,t,s){const r=b.useRef(s);b.useInsertionEffect(()=>{r.current=s});const n=b.useRef(null);return b.useCallback(i=>{i&&e.onMount?.(i),t&&(i?t.mount(i):t.unmount());const a=r.current;if(typeof a=="function")if(i){const o=a(i);typeof o=="function"&&(n.current=o)}else n.current?(n.current(),n.current=null):a(i);else a&&(a.current=i)},[t])}const dy=b.createContext({});function or(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function JR(e,t,s,r,n,i){const{visualElement:a}=b.useContext(yi),o=b.useContext(iy),l=b.useContext(pi),c=b.useContext(ec).reducedMotion,d=b.useRef(null),h=b.useRef(!1);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:a,props:s,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c,isSVG:i}),h.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const f=d.current,p=b.useContext(dy);f&&!f.projection&&n&&(f.type==="html"||f.type==="svg")&&YR(d.current,s,n,p);const m=b.useRef(!1);b.useInsertionEffect(()=>{f&&m.current&&f.update(s,l)});const g=s[bg],y=b.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return $m(()=>{h.current=!0,f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),y.current&&f.animationState&&f.animationState.animateChanges())}),b.useEffect(()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),y.current=!1),f.enteringChildren=void 0)}),f}function YR(e,t,s,r){const{layoutId:n,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:hy(e.parent)),e.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!a||o&&or(o),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function hy(e){if(e)return e.options.allowProjection!==!1?e.projection:hy(e.parent)}function pa(e,{forwardMotionProps:t=!1,type:s}={},r,n){r&&PR(r);const i=s?s==="svg":sc(e),a=i?HR:GR;function o(c,d){let h;const f={...b.useContext(ec),...c,layoutId:QR(c)},{isStatic:p}=f,m=$R(c),g=a(c,p);if(!p&&Mm){XR();const y=ZR(f);h=y.MeasureLayout,m.visualElement=JR(e,g,f,n,y.ProjectionNode,i)}return u.jsxs(yi.Provider,{value:m,children:[h&&m.visualElement?u.jsx(h,{visualElement:m.visualElement,...f}):null,BR(e,c,WR(g,m.visualElement,d),g,p,t,i)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const l=b.forwardRef(o);return l[KR]=e,l}function QR({layoutId:e}){const t=b.useContext(El).id;return t&&e!==void 0?t+"-"+e:e}function XR(e,t){b.useContext(iy).strict}function ZR(e){const t=ay(),{drag:s,layout:r}=t;if(!s&&!r)return{};const n={...s,...r};return{MeasureLayout:s?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function ej(e,t){if(typeof Proxy>"u")return pa;const s=new Map,r=(i,a)=>pa(i,a,e,t),n=(i,a)=>r(i,a);return new Proxy(n,{get:(i,a)=>a==="create"?r:(s.has(a)||s.set(a,pa(a,void 0,e,t)),s.get(a))})}const tj=(e,t)=>t.isSVG??sc(e)?new IA(t):new TA(t,{allowProjection:e!==b.Fragment});class sj extends Mt{constructor(t){super(t),t.animationState||(t.animationState=DA(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();mi(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let rj=0;class nj extends Mt{constructor(){super(...arguments),this.id=rj++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const n=this.node.animationState.setActive("exit",!t);s&&!t&&n.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const ij={animation:{Feature:sj},exit:{Feature:nj}};function Vr(e){return{point:{x:e.pageX,y:e.pageY}}}const aj=e=>t=>Jl(t)&&e(t,Vr(t));function gr(e,t,s,r){return Pr(e,t,aj(s),r)}const fy=({current:e})=>e?e.ownerDocument.defaultView:null,nh=(e,t)=>Math.abs(e-t);function oj(e,t){const s=nh(e.x,t.x),r=nh(e.y,t.y);return Math.sqrt(s**2+r**2)}const ih=new Set(["auto","scroll"]);class py{constructor(t,s,{transformPagePoint:r,contextWindow:n=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=p=>{this.handleScroll(p.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=ga(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=oj(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!g)return;const{point:y}=p,{timestamp:w}=xe;this.history.push({...y,timestamp:w});const{onStart:x,onMove:v}=this.handlers;m||(x&&x(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=ma(m,this.transformPagePoint),J.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:w}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=ga(p.type==="pointercancel"?this.lastMoveEventInfo:ma(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,x),y&&y(p,x)},!Jl(t))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=n||window;const l=Vr(t),c=ma(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=xe;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=s;f&&f(t,ga(c,this.history)),this.removeListeners=Lr(gr(this.contextWindow,"pointermove",this.handlePointerMove),gr(this.contextWindow,"pointerup",this.handlePointerUp),gr(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(t){let s=t.parentElement;for(;s;){const r=getComputedStyle(s);(ih.has(r.overflowX)||ih.has(r.overflowY))&&this.scrollPositions.set(s,{x:s.scrollLeft,y:s.scrollTop}),s=s.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const s=this.scrollPositions.get(t);if(!s)return;const r=t===window,n=r?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},i={x:n.x-s.x,y:n.y-s.y};i.x===0&&i.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(t,n),J.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Pt(this.updatePoint)}}function ma(e,t){return t?{point:t(e.point)}:e}function ah(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ga({point:e},t){return{point:e,delta:ah(e,my(t)),offset:ah(e,lj(t)),velocity:cj(t,.1)}}function lj(e){return e[0]}function my(e){return e[e.length-1]}function cj(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const n=my(e);for(;s>=0&&(r=e[s],!(n.timestamp-r.timestamp>ht(t)));)s--;if(!r)return{x:0,y:0};const i=Be(n.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(n.x-r.x)/i,y:(n.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function uj(e,{min:t,max:s},r){return t!==void 0&&e<t?e=r?ee(t,e,r.min):Math.max(e,t):s!==void 0&&e>s&&(e=r?ee(s,e,r.max):Math.min(e,s)),e}function oh(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function dj(e,{top:t,left:s,bottom:r,right:n}){return{x:oh(e.x,s,n),y:oh(e.y,t,r)}}function lh(e,t){let s=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}function hj(e,t){return{x:lh(e.x,t.x),y:lh(e.y,t.y)}}function fj(e,t){let s=.5;const r=Re(e),n=Re(t);return n>r?s=Cr(t.min,t.max-r,e.min):r>n&&(s=Cr(e.min,e.max-n,t.min)),ot(0,1,s)}function pj(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const jo=.35;function mj(e=jo){return e===!1?e=0:e===!0&&(e=jo),{x:ch(e,"left","right"),y:ch(e,"top","bottom")}}function ch(e,t,s){return{min:uh(e,t),max:uh(e,s)}}function uh(e,t){return typeof e=="number"?e:e[t]||0}const gj=new WeakMap;class yj{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ue(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=h=>{s?(this.stopAnimation(),this.snapToCursor(Vr(h).point)):this.pauseAnimation()},a=(h,f)=>{this.stopAnimation();const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=rA(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ue(w=>{let x=this.getAxisMotionValue(w).get()||0;if(nt.test(x)){const{projection:v}=this.visualElement;if(v&&v.layout){const S=v.layout.layoutBox[w];S&&(x=Re(S)*(parseFloat(x)/100))}}this.originPoint[w]=x}),g&&J.postRender(()=>g(h,f)),_o(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:w}=f;if(m&&this.currentDirection===null){this.currentDirection=vj(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),y&&y(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Ue(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new py(t,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:fy(this.visualElement),element:this.visualElement.current})}stop(t,s){const r=t||this.latestPointerEvent,n=s||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!n||!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&J.postRender(()=>o(r,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,s,r){const{drag:n}=this.getProps();if(!r||!nn(t,n,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=uj(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,n=this.constraints;t&&or(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=dj(r.layoutBox,t):this.constraints=!1,this.elastic=mj(s),n!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ue(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=pj(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!or(t))return!1;const r=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=wA(r,n.root,this.visualElement.getTransformPagePoint());let a=hj(n.layout.layoutBox,i);if(s){const o=s(yA(a));this.hasMutatedConstraints=!!o,o&&(a=$g(o))}return a}startAnimation(t){const{drag:s,dragMomentum:r,dragElastic:n,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Ue(d=>{if(!nn(d,s,this.currentDirection))return;let h=l&&l[d]||{};a&&(h={min:0,max:0});const f=n?200:1e6,p=n?40:1e7,m={type:"inertia",velocity:r?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(c).then(o)}startAxisValueAnimation(t,s){const r=this.getAxisMotionValue(t);return _o(this.visualElement,t),r.start(ql(t,r,0,s,this.visualElement,!1))}stopAnimation(){Ue(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ue(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),n=r[s];return n||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ue(s=>{const{drag:r}=this.getProps();if(!nn(s,r,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(s);if(n&&n.layout){const{min:a,max:o}=n.layout.layoutBox[s],l=i.get()||0;i.set(t[s]-ee(a,o,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!or(s)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Ue(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();n[a]=fj({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ue(a=>{if(!nn(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(ee(l,c,n[a]))})}addListeners(){if(!this.visualElement.current)return;gj.set(this.visualElement,this);const t=this.visualElement.current,s=gr(t,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps(),h=l.target,f=h!==t&&jg(h);c&&d&&!f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();or(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),J.read(r);const a=Pr(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ue(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())}));return()=>{a(),s(),i(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:a=jo,dragMomentum:o=!0}=t;return{...t,drag:s,dragDirectionLock:r,dragPropagation:n,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function nn(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function vj(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class bj extends Mt{constructor(t){super(t),this.removeGroupControls=ze,this.removeListeners=ze,this.controls=new yj(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ze}update(){const{dragControls:t}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};t!==s&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const dh=e=>(t,s)=>{e&&J.postRender(()=>e(t,s))};class wj extends Mt{constructor(){super(...arguments),this.removePointerDownListener=ze}onPointerDown(t){this.session=new py(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fy(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:dh(t),onStart:dh(s),onMove:r,onEnd:(i,a)=>{delete this.session,n&&J.postRender(()=>n(i,a))}}}mount(){this.removePointerDownListener=gr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let ya=!1;class xj extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r,layoutId:n}=this.props,{projection:i}=t;i&&(s.group&&s.group.add(i),r&&r.register&&n&&r.register(i),ya&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),xn.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:r,drag:n,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,t.layoutDependency!==s&&a.setOptions({...a.options,layoutDependency:s}),ya=!0,n||t.layoutDependency!==s||s===void 0||t.isPresent!==i?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||J.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Wl.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:n}=t;ya=!0,n&&(n.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function gy(e){const[t,s]=ny(),r=b.useContext(El);return u.jsx(xj,{...e,layoutGroup:r,switchLayoutGroup:b.useContext(dy),isPresent:t,safeToRemove:s})}const _j={pan:{Feature:wj},drag:{Feature:bj,ProjectionNode:ry,MeasureLayout:gy}};function hh(e,t,s){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",s==="Start");const n="onHover"+s,i=r[n];i&&J.postRender(()=>i(t,Vr(t)))}class Sj extends Mt{mount(){const{current:t}=this.node;t&&(this.unmount=nA(t,(s,r)=>(hh(this.node,r,"Start"),n=>hh(this.node,n,"End"))))}unmount(){}}class kj extends Mt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lr(Pr(this.node.current,"focus",()=>this.onFocus()),Pr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fh(e,t,s){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",s==="Start");const n="onTap"+(s==="End"?"":s),i=r[n];i&&J.postRender(()=>i(t,Vr(t)))}class Ej extends Mt{mount(){const{current:t}=this.node;t&&(this.unmount=oA(t,(s,r)=>(fh(this.node,r,"Start"),(n,{success:i})=>fh(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Po=new WeakMap,va=new WeakMap,Tj=e=>{const t=Po.get(e.target);t&&t(e)},Cj=e=>{e.forEach(Tj)};function Aj({root:e,...t}){const s=e||document;va.has(s)||va.set(s,{});const r=va.get(s),n=JSON.stringify(t);return r[n]||(r[n]=new IntersectionObserver(Cj,{root:e,...t})),r[n]}function Rj(e,t,s){const r=Aj(t);return Po.set(e,s),r.observe(e),()=>{Po.delete(e),r.unobserve(e)}}const jj={some:0,all:1};class Pj extends Mt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:r,amount:n="some",once:i}=t,a={root:s?s.current:void 0,rootMargin:r,threshold:typeof n=="number"?n:jj[n]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=c?d:h;f&&f(l)};return Rj(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(Ij(t,s))&&this.startObserver()}unmount(){}}function Ij({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const Oj={inView:{Feature:Pj},tap:{Feature:Ej},focus:{Feature:kj},hover:{Feature:Sj}},Nj={layout:{ProjectionNode:ry,MeasureLayout:gy}},Mj={...ij,...Oj,..._j,...Nj},yy=ej(Mj,tj),$j=({src:e,alt:t,className:s="",width:r=800,priority:n=!1,aspectRatio:i="aspect-video",onLoad:a})=>{const[o,l]=b.useState(!1),[c,d]=b.useState(!1),h=Up(e,r);return u.jsxs("div",{className:`relative overflow-hidden bg-slate-800/20 ${i} ${s}`,children:[u.jsx(RR,{children:!o&&!c&&u.jsx(yy.div,{initial:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-slate-800 animate-pulse z-0"})}),u.jsx("img",{src:h,alt:t,loading:n?"eager":"lazy",className:`w-full h-full object-cover transition-opacity duration-700 ease-in-out ${o?"opacity-100":"opacity-0"}`,onLoad:()=>{l(!0),a&&a()},onError:()=>d(!0)}),c&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/40 text-slate-500",children:u.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Image Error"})})]})},Dj=({onNeuralMatch:e,onBrowseInventory:t,onSellCar:s})=>u.jsxs("section",{className:"relative h-[85vh] min-h-[600px] w-full flex items-center justify-center overflow-hidden rounded-b-[60px] lg:rounded-b-[100px] shadow-2xl shadow-cyan-900/40",children:[u.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[u.jsx($j,{src:"https://www.hyundai.com/content/dam/hyundai/ww/en/images/N/n-vision-74/highlights/n-vision-74-highlights-kv.jpg",alt:"Richard Automotive Future Ready",className:"absolute inset-0 w-full h-full opacity-60 scale-105",priority:!0,aspectRatio:"aspect-none"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0f172a] via-[#0f172a]/60 to-transparent"}),u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 mix-blend-overlay"})]}),u.jsxs("div",{className:"relative z-10 w-full max-w-7xl mx-auto px-6 lg:px-12 flex flex-col items-center text-center space-y-10",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-md border border-white/20 px-6 py-2 rounded-full animate-in slide-in-from-bottom-5 duration-700 fade-in",children:[u.jsx(vr,{size:16,className:"text-[#00aed9] fill-[#00aed9]"}),u.jsx("span",{className:"text-sm font-bold uppercase tracking-[0.2em] text-white",children:"Experiencia Automotriz 2025"})]}),u.jsxs("h1",{className:"text-6xl md:text-8xl lg:text-9xl font-black text-white tracking-tighter leading-[0.9] animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-100",children:["FUTURE ",u.jsx("br",{}),u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-cyan-200",children:"READY."})]}),u.jsx("p",{className:"text-xl md:text-2xl text-slate-300 max-w-2xl font-medium leading-relaxed animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-200",children:"Compra tu prximo auto 100% online. Sin vendedores, sin sorpresas, y con la garanta de Richard Automotive."}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 pt-4 animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-300",children:[u.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-[#00aed9] text-white rounded-full font-black uppercase tracking-widest overflow-hidden transition-all hover:scale-105 hover:shadow-[0_0_40px_rgba(0,174,217,0.4)]",children:[u.jsxs("span",{className:"relative z-10 flex items-center gap-3",children:["Ver Inventario ",u.jsx(Hp,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),u.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]}),u.jsxs("button",{onClick:e,className:"group px-8 py-4 bg-white/10 backdrop-blur-md border border-white/20 text-white rounded-full font-black uppercase tracking-widest hover:bg-white/20 transition-all flex items-center gap-3",children:[u.jsx(Nn,{size:20,className:"text-[#00aed9]"}),"Neural Match"]}),u.jsxs("button",{onClick:s,className:"group px-8 py-4 bg-emerald-500/10 backdrop-blur-md border border-emerald-500/20 text-emerald-400 rounded-full font-black uppercase tracking-widest hover:bg-emerald-500/20 transition-all flex items-center gap-3",children:[u.jsx($_,{size:20}),"Vender mi Auto"]})]})]}),u.jsxs("div",{className:"absolute bottom-12 left-0 right-0 flex justify-center gap-8 md:gap-16 text-white/60 text-[10px] md:text-xs font-bold uppercase tracking-widest animate-in fade-in delay-700",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," 7-Day Money Back"]}),u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," 150-Point Inspection"]}),u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," Home Delivery"]})]})]}),Lj=()=>u.jsx("section",{className:"py-12 border-t border-slate-200 dark:border-slate-800",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsx(ba,{icon:u.jsx(ui,{size:24}),title:"Certificacin 150 Puntos",desc:"Cada auto pasa una inspeccin rigurosa antes de ser listado.",color:"blue"}),u.jsx(ba,{icon:u.jsx(tm,{size:24}),title:"Love Your Car Guarantee",desc:"Prubalo por 24 horas. Si no te enamora, devulvelo.",color:"cyan"}),u.jsx(ba,{icon:u.jsx(Yp,{size:24}),title:"Entrega o Recogido",desc:"T eliges: te lo llevamos a casa o vienes a nuestro centro.",color:"purple"})]})}),ba=({icon:e,title:t,desc:s,color:r})=>{const n={blue:"bg-blue-100 dark:bg-blue-900/20 text-blue-500",cyan:"bg-cyan-100 dark:bg-cyan-900/20 text-[#00aed9]",purple:"bg-purple-100 dark:bg-purple-900/20 text-purple-500"};return u.jsxs("div",{className:"flex items-start gap-4 p-6 rounded-3xl bg-slate-50 dark:bg-slate-900/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors cursor-default",children:[u.jsx("div",{className:`p-3 rounded-2xl ${n[r]}`,children:e}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:t}),u.jsx("p",{className:"text-sm text-slate-500 mt-1 leading-relaxed",children:s})]})]})},Uj=()=>{const e=[{id:1,name:"Carlos Rodrguez",role:"Dueo de Santa Fe 2024",comment:"La experiencia con Richard Automotive fue increble. La IA me ayud a elegir la SUV perfecta para mi familia y el proceso fue totalmente transparente.",rating:5,img:"https://randomuser.me/api/portraits/men/32.jpg"},{id:2,name:"Sofa Mndez",role:"Duea de IONIQ 5",comment:"Nunca pens que comprar un auto elctrico fuera tan fcil. El 'Neural Match' acert totalmente con mi estilo de vida. Estoy enamorada de mi IONIQ!",rating:5,img:"https://randomuser.me/api/portraits/women/44.jpg"},{id:3,name:"Miguel ngel",role:"Dueo de Genesis GV80",comment:"Atencin de primera clase. Me trajeron el auto a la oficina para probarlo y cerramos el trato en menos de una hora. Eficiencia pura.",rating:5,img:"https://randomuser.me/api/portraits/men/85.jpg"}];return u.jsxs("section",{className:"py-20 relative",children:[u.jsx("div",{className:"absolute top-0 right-0 p-20 opacity-5 pointer-events-none md:block hidden",children:u.jsx(Mn,{size:300,className:"text-[#00aed9]"})}),u.jsxs("div",{className:"text-center mb-16 space-y-4 relative z-10",children:[u.jsx("span",{className:"text-[#00aed9] font-black uppercase tracking-widest text-sm",children:"Nuestros Clientes"}),u.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-slate-800 dark:text-white uppercase tracking-tighter",children:["Historias de ",u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-cyan-400",children:"xito"})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 px-4 relative z-10",children:e.map(t=>u.jsxs("div",{className:"bg-white dark:bg-slate-800/80 p-8 rounded-[30px] border border-slate-100 dark:border-slate-700 relative hover:transform hover:-translate-y-2 transition-all duration-300 shadow-xl shadow-slate-200/50 dark:shadow-none",children:[u.jsx("div",{className:"flex gap-1 mb-6 text-amber-400",children:[...Array(t.rating)].map((s,r)=>u.jsx(Mn,{size:16,fill:"currentColor",stroke:"none"},r))}),u.jsxs("p",{className:"text-slate-600 dark:text-slate-300 font-medium leading-relaxed mb-8 relative z-10",children:['"',t.comment,'"']}),u.jsxs("div",{className:"flex items-center gap-4 border-t border-slate-100 dark:border-slate-700/50 pt-6",children:[u.jsx("img",{src:t.img,alt:t.name,className:"w-12 h-12 rounded-full object-cover ring-2 ring-[#00aed9]/20"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:t.name}),u.jsx("p",{className:"text-xs text-[#00aed9] font-bold uppercase tracking-wide",children:t.role})]})]})]},t.id))})]})},vy=[{question:"Puedo comprar un auto 100% en lnea sin visitar el concesionario?",answer:"S, absolutamente. Nuestra plataforma 'Richard Automotive Direct' le permite seleccionar su vehculo, personalizar su financiamiento, valorar su trade-in y firmar documentos digitalmente. Entregamos el auto directamente en la puerta de su casa u oficina."},{question:"Cmo funciona la aprobacin de crdito en lnea?",answer:"Es instantnea y segura. Complete nuestro formulario de Pre-Cualificacin encriptado (SSL 256-bit). Nuestro sistema AI analiza su perfil con mltiples bancos simultneamente para ofrecerle los trminos reales (APR, mensualidad y pronto) en minutos, sin afectar su puntaje crediticio inicial (Soft Pull)."},{question:"Aceptan autos en 'Trade-In' aunque deba dinero?",answer:"S. Aceptamos su auto actual como parte de pago. Si todava tiene balance pendiente, nosotros nos encargamos de liquidar el prstamo anterior con su banco. Si el valor de su auto es mayor a la deuda, usamos el excedente a favor de su nueva compra."},{question:"Qu garanta tienen los vehculos usados certificados?"}],Fj={"@context":"https://schema.org","@type":"FAQPage",mainEntity:vy.map(e=>({"@type":"Question",name:e.question,acceptedAnswer:{"@type":"Answer",text:e.answer}}))},Vj=()=>u.jsx("section",{className:"py-20 bg-white dark:bg-slate-900 border-t border-slate-100 dark:border-slate-800",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[u.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(Fj)}}),u.jsxs("div",{className:"text-center mb-16",children:[u.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#00aed9]/10 text-[#00aed9] font-bold text-xs uppercase tracking-widest mb-4",children:[u.jsx(B_,{size:14})," Soporte al Cliente"]}),u.jsx("h2",{className:"text-3xl md:text-5xl font-black text-slate-800 dark:text-white uppercase tracking-tighter",children:"Preguntas Frecuentes"}),u.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400 max-w-lg mx-auto",children:"Resolvemos sus dudas sobre el proceso de compra digital ms avanzado del mercado."})]}),u.jsx("div",{className:"space-y-4",children:vy.map((e,t)=>u.jsxs("details",{className:"group bg-slate-50 dark:bg-slate-800 rounded-2xl border border-transparent hover:border-[#00aed9] open:border-[#00aed9]/30 transition-all duration-300 overflow-hidden",children:[u.jsxs("summary",{className:"flex justify-between items-center p-6 cursor-pointer list-none text-slate-800 dark:text-white font-bold text-lg select-none group-hover:bg-white dark:group-hover:bg-slate-700/50 transition-colors",children:[u.jsx("span",{children:e.question}),u.jsx("span",{className:"transform group-open:rotate-180 transition-transform duration-300 text-[#00aed9]",children:u.jsx(Wp,{})})]}),u.jsx("div",{className:"px-6 pb-6 pt-2 text-slate-500 dark:text-slate-300 leading-relaxed border-t border-slate-100 dark:border-slate-700/50",children:e.answer})]},t))})]})}),Bj=()=>u.jsxs("footer",{className:"mt-12 py-12 px-8 lg:px-16 rounded-[40px] bg-[#173d57] dark:bg-[#0d2232] text-white relative overflow-hidden group shadow-2xl shadow-cyan-900/10",children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10 mix-blend-overlay"}),u.jsx("div",{className:"absolute -top-20 -right-20 p-20 opacity-5 pointer-events-none rotate-12 transition-transform duration-[2s] group-hover:rotate-45",children:u.jsx(Yp,{size:400})}),u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-10",children:[u.jsxs("div",{className:"text-center md:text-left",children:[u.jsxs("h3",{className:"text-2xl font-black uppercase tracking-tight flex items-center gap-2 justify-center md:justify-start",children:["Richard",u.jsx("span",{className:"text-[#00aed9]",children:"Automotive"})]}),u.jsx("p",{className:"text-blue-200 text-sm mt-2 max-w-md",children:"Redefiniendo la compra de autos en Puerto Rico con Inteligencia Artificial y transparencia total."})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx(an,{icon:u.jsx(q_,{size:20}),label:"Instagram",href:"#"}),u.jsx(an,{icon:u.jsx(L_,{size:20}),label:"Facebook",href:"#"}),u.jsx(an,{icon:u.jsx(hS,{size:20}),label:"YouTube",href:"#"}),u.jsx(an,{icon:u.jsx(aS,{size:20}),label:"X / Twitter",href:"#"})]})]}),u.jsxs("div",{className:"mt-12 pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center text-xs font-bold text-slate-400 gap-6",children:[u.jsx("p",{children:" 2025 Richard Automotive. Todos los derechos reservados."}),u.jsxs("div",{className:"flex gap-8",children:[u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Poltica de Privacidad"}),u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Trminos de Servicio"}),u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Mapa del Sitio"})]})]})]}),an=({icon:e,label:t,href:s})=>u.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-white/10 hover:bg-[#00aed9] hover:scale-110 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg backdrop-blur-sm group",title:t,children:u.jsx("span",{className:"text-white group-hover:animate-bounce",children:e})}),by=b.createContext(void 0),zj=({children:e})=>{const[t,s]=b.useState(()=>{try{const l=localStorage.getItem("richard_compare_cars_full");return l?JSON.parse(l):[]}catch(l){return console.error("Error parsing comparisons from local storage",l),[]}}),r=l=>{s(l),localStorage.setItem("richard_compare_cars_full",JSON.stringify(l))},n=l=>{if(t.length>=3){alert("Puedes comparar mximo 3 vehculos.");return}t.find(c=>c.id===l.id)||r([...t,l])},i=l=>{r(t.filter(c=>c.id!==l))},a=l=>t.some(c=>c.id===l),o=()=>{r([])};return u.jsx(by.Provider,{value:{selectedCars:t,addCarToCompare:n,removeCarFromCompare:i,isInComparison:a,clearComparison:o},children:e})},wy=()=>{const e=b.useContext(by);if(e===void 0)throw new Error("useComparison must be used within a ComparisonProvider");return e},qj=(e,t)=>{const s=new Array(e.length+t.length);for(let r=0;r<e.length;r++)s[r]=e[r];for(let r=0;r<t.length;r++)s[e.length+r]=t[r];return s},Gj=(e,t)=>({classGroupId:e,validator:t}),xy=(e=new Map,t=null,s)=>({nextPart:e,validators:t,classGroupId:s}),Kn="-",ph=[],Hj="arbitrary..",Kj=e=>{const t=Jj(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return Wj(a);const o=a.split(Kn),l=o[0]===""&&o.length>1?1:0;return _y(o,l,t)},getConflictingClassGroupIds:(a,o)=>{if(o){const l=r[a],c=s[a];return l?c?qj(c,l):l:c||ph}return s[a]||ph}}},_y=(e,t,s)=>{if(e.length-t===0)return s.classGroupId;const n=e[t],i=s.nextPart.get(n);if(i){const c=_y(e,t+1,i);if(c)return c}const a=s.validators;if(a===null)return;const o=t===0?e.join(Kn):e.slice(t).join(Kn),l=a.length;for(let c=0;c<l;c++){const d=a[c];if(d.validator(o))return d.classGroupId}},Wj=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),s=t.indexOf(":"),r=t.slice(0,s);return r?Hj+r:void 0})(),Jj=e=>{const{theme:t,classGroups:s}=e;return Yj(s,t)},Yj=(e,t)=>{const s=xy();for(const r in e){const n=e[r];rc(n,s,r,t)}return s},rc=(e,t,s,r)=>{const n=e.length;for(let i=0;i<n;i++){const a=e[i];Qj(a,t,s,r)}},Qj=(e,t,s,r)=>{if(typeof e=="string"){Xj(e,t,s);return}if(typeof e=="function"){Zj(e,t,s,r);return}eP(e,t,s,r)},Xj=(e,t,s)=>{const r=e===""?t:Sy(t,e);r.classGroupId=s},Zj=(e,t,s,r)=>{if(tP(e)){rc(e(r),t,s,r);return}t.validators===null&&(t.validators=[]),t.validators.push(Gj(s,e))},eP=(e,t,s,r)=>{const n=Object.entries(e),i=n.length;for(let a=0;a<i;a++){const[o,l]=n[a];rc(l,Sy(t,o),s,r)}},Sy=(e,t)=>{let s=e;const r=t.split(Kn),n=r.length;for(let i=0;i<n;i++){const a=r[i];let o=s.nextPart.get(a);o||(o=xy(),s.nextPart.set(a,o)),s=o}return s},tP=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,sP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=Object.create(null),r=Object.create(null);const n=(i,a)=>{s[i]=a,t++,t>e&&(t=0,r=s,s=Object.create(null))};return{get(i){let a=s[i];if(a!==void 0)return a;if((a=r[i])!==void 0)return n(i,a),a},set(i,a){i in s?s[i]=a:n(i,a)}}},Io="!",mh=":",rP=[],gh=(e,t,s,r,n)=>({modifiers:e,hasImportantModifier:t,baseClassName:s,maybePostfixModifierPosition:r,isExternal:n}),nP=e=>{const{prefix:t,experimentalParseClassName:s}=e;let r=n=>{const i=[];let a=0,o=0,l=0,c;const d=n.length;for(let g=0;g<d;g++){const y=n[g];if(a===0&&o===0){if(y===mh){i.push(n.slice(l,g)),l=g+1;continue}if(y==="/"){c=g;continue}}y==="["?a++:y==="]"?a--:y==="("?o++:y===")"&&o--}const h=i.length===0?n:n.slice(l);let f=h,p=!1;h.endsWith(Io)?(f=h.slice(0,-1),p=!0):h.startsWith(Io)&&(f=h.slice(1),p=!0);const m=c&&c>l?c-l:void 0;return gh(i,p,f,m)};if(t){const n=t+mh,i=r;r=a=>a.startsWith(n)?i(a.slice(n.length)):gh(rP,!1,a,void 0,!0)}if(s){const n=r;r=i=>s({className:i,parseClassName:n})}return r},iP=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((s,r)=>{t.set(s,1e6+r)}),s=>{const r=[];let n=[];for(let i=0;i<s.length;i++){const a=s[i],o=a[0]==="[",l=t.has(a);o||l?(n.length>0&&(n.sort(),r.push(...n),n=[]),r.push(a)):n.push(a)}return n.length>0&&(n.sort(),r.push(...n)),r}},aP=e=>({cache:sP(e.cacheSize),parseClassName:nP(e),sortModifiers:iP(e),...Kj(e)}),oP=/\s+/,lP=(e,t)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:n,sortModifiers:i}=t,a=[],o=e.trim().split(oP);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{isExternal:h,modifiers:f,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}=s(d);if(h){l=d+(l.length>0?" "+l:l);continue}let y=!!g,w=r(y?m.substring(0,g):m);if(!w){if(!y){l=d+(l.length>0?" "+l:l);continue}if(w=r(m),!w){l=d+(l.length>0?" "+l:l);continue}y=!1}const x=f.length===0?"":f.length===1?f[0]:i(f).join(":"),v=p?x+Io:x,S=v+w;if(a.indexOf(S)>-1)continue;a.push(S);const k=n(w,y);for(let T=0;T<k.length;++T){const C=k[T];a.push(v+C)}l=d+(l.length>0?" "+l:l)}return l},cP=(...e)=>{let t=0,s,r,n="";for(;t<e.length;)(s=e[t++])&&(r=ky(s))&&(n&&(n+=" "),n+=r);return n},ky=e=>{if(typeof e=="string")return e;let t,s="";for(let r=0;r<e.length;r++)e[r]&&(t=ky(e[r]))&&(s&&(s+=" "),s+=t);return s},uP=(e,...t)=>{let s,r,n,i;const a=l=>{const c=t.reduce((d,h)=>h(d),e());return s=aP(c),r=s.cache.get,n=s.cache.set,i=o,o(l)},o=l=>{const c=r(l);if(c)return c;const d=lP(l,s);return n(l,d),d};return i=a,(...l)=>i(cP(...l))},dP=[],le=e=>{const t=s=>s[e]||dP;return t.isThemeGetter=!0,t},Ey=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ty=/^\((?:(\w[\w-]*):)?(.+)\)$/i,hP=/^\d+\/\d+$/,fP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,gP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gs=e=>hP.test(e),z=e=>!!e&&!Number.isNaN(Number(e)),xt=e=>!!e&&Number.isInteger(Number(e)),wa=e=>e.endsWith("%")&&z(e.slice(0,-1)),ct=e=>fP.test(e),vP=()=>!0,bP=e=>pP.test(e)&&!mP.test(e),Cy=()=>!1,wP=e=>gP.test(e),xP=e=>yP.test(e),_P=e=>!I(e)&&!O(e),SP=e=>Ws(e,jy,Cy),I=e=>Ey.test(e),Ft=e=>Ws(e,Py,bP),xa=e=>Ws(e,AP,z),yh=e=>Ws(e,Ay,Cy),kP=e=>Ws(e,Ry,xP),on=e=>Ws(e,Iy,wP),O=e=>Ty.test(e),rr=e=>Js(e,Py),EP=e=>Js(e,RP),vh=e=>Js(e,Ay),TP=e=>Js(e,jy),CP=e=>Js(e,Ry),ln=e=>Js(e,Iy,!0),Ws=(e,t,s)=>{const r=Ey.exec(e);return r?r[1]?t(r[1]):s(r[2]):!1},Js=(e,t,s=!1)=>{const r=Ty.exec(e);return r?r[1]?t(r[1]):s:!1},Ay=e=>e==="position"||e==="percentage",Ry=e=>e==="image"||e==="url",jy=e=>e==="length"||e==="size"||e==="bg-size",Py=e=>e==="length",AP=e=>e==="number",RP=e=>e==="family-name",Iy=e=>e==="shadow",jP=()=>{const e=le("color"),t=le("font"),s=le("text"),r=le("font-weight"),n=le("tracking"),i=le("leading"),a=le("breakpoint"),o=le("container"),l=le("spacing"),c=le("radius"),d=le("shadow"),h=le("inset-shadow"),f=le("text-shadow"),p=le("drop-shadow"),m=le("blur"),g=le("perspective"),y=le("aspect"),w=le("ease"),x=le("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...S(),O,I],T=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],_=()=>[O,I,l],A=()=>[gs,"full","auto",..._()],E=()=>[xt,"none","subgrid",O,I],j=()=>["auto",{span:["full",xt,O,I]},xt,O,I],M=()=>[xt,"auto",O,I],V=()=>["auto","min","max","fr",O,I],Q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],B=()=>["auto",..._()],G=()=>[gs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],R=()=>[e,O,I],Te=()=>[...S(),vh,yh,{position:[O,I]}],_e=()=>["no-repeat",{repeat:["","x","y","space","round"]}],bt=()=>["auto","cover","contain",TP,SP,{size:[O,I]}],qe=()=>[wa,rr,Ft],X=()=>["","none","full",c,O,I],ne=()=>["",z,rr,Ft],Qs=()=>["solid","dashed","dotted","double"],zr=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>[z,wa,vh,yh],qr=()=>["","none",m,O,I],wt=()=>["none",z,O,I],as=()=>["none",z,O,I],Xs=()=>[z,O,I],os=()=>[gs,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ct],breakpoint:[ct],color:[vP],container:[ct],"drop-shadow":[ct],ease:["in","out","in-out"],font:[_P],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ct],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ct],shadow:[ct],spacing:["px",z],text:[ct],"text-shadow":[ct],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",gs,I,O,y]}],container:["container"],columns:[{columns:[z,I,O,o]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[xt,"auto",O,I]}],basis:[{basis:[gs,"full","auto",o,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[z,gs,"auto","initial","none",I]}],grow:[{grow:["",z,O,I]}],shrink:[{shrink:["",z,O,I]}],order:[{order:[xt,"first","last","none",O,I]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...Q(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...Q()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:B()}],mx:[{mx:B()}],my:[{my:B()}],ms:[{ms:B()}],me:[{me:B()}],mt:[{mt:B()}],mr:[{mr:B()}],mb:[{mb:B()}],ml:[{ml:B()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[o,"screen",...G()]}],"min-w":[{"min-w":[o,"screen","none",...G()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...G()]}],h:[{h:["screen","lh",...G()]}],"min-h":[{"min-h":["screen","lh","none",...G()]}],"max-h":[{"max-h":["screen","lh",...G()]}],"font-size":[{text:["base",s,rr,Ft]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,O,xa]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",wa,I]}],"font-family":[{font:[EP,I,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,O,I]}],"line-clamp":[{"line-clamp":[z,"none",O,xa]}],leading:[{leading:[i,..._()]}],"list-image":[{"list-image":["none",O,I]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",O,I]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Qs(),"wavy"]}],"text-decoration-thickness":[{decoration:[z,"from-font","auto",O,Ft]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[z,"auto",O,I]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",O,I]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",O,I]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Te()}],"bg-repeat":[{bg:_e()}],"bg-size":[{bg:bt()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},xt,O,I],radial:["",O,I],conic:[xt,O,I]},CP,kP]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:qe()}],"gradient-via-pos":[{via:qe()}],"gradient-to-pos":[{to:qe()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:X()}],"rounded-s":[{"rounded-s":X()}],"rounded-e":[{"rounded-e":X()}],"rounded-t":[{"rounded-t":X()}],"rounded-r":[{"rounded-r":X()}],"rounded-b":[{"rounded-b":X()}],"rounded-l":[{"rounded-l":X()}],"rounded-ss":[{"rounded-ss":X()}],"rounded-se":[{"rounded-se":X()}],"rounded-ee":[{"rounded-ee":X()}],"rounded-es":[{"rounded-es":X()}],"rounded-tl":[{"rounded-tl":X()}],"rounded-tr":[{"rounded-tr":X()}],"rounded-br":[{"rounded-br":X()}],"rounded-bl":[{"rounded-bl":X()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Qs(),"hidden","none"]}],"divide-style":[{divide:[...Qs(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...Qs(),"none","hidden"]}],"outline-offset":[{"outline-offset":[z,O,I]}],"outline-w":[{outline:["",z,rr,Ft]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",d,ln,on]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",h,ln,on]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[z,Ft]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",f,ln,on]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[z,O,I]}],"mix-blend":[{"mix-blend":[...zr(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":zr()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[z]}],"mask-image-linear-from-pos":[{"mask-linear-from":Y()}],"mask-image-linear-to-pos":[{"mask-linear-to":Y()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":Y()}],"mask-image-t-to-pos":[{"mask-t-to":Y()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":Y()}],"mask-image-r-to-pos":[{"mask-r-to":Y()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":Y()}],"mask-image-b-to-pos":[{"mask-b-to":Y()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":Y()}],"mask-image-l-to-pos":[{"mask-l-to":Y()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":Y()}],"mask-image-x-to-pos":[{"mask-x-to":Y()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":Y()}],"mask-image-y-to-pos":[{"mask-y-to":Y()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[O,I]}],"mask-image-radial-from-pos":[{"mask-radial-from":Y()}],"mask-image-radial-to-pos":[{"mask-radial-to":Y()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[z]}],"mask-image-conic-from-pos":[{"mask-conic-from":Y()}],"mask-image-conic-to-pos":[{"mask-conic-to":Y()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Te()}],"mask-repeat":[{mask:_e()}],"mask-size":[{mask:bt()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",O,I]}],filter:[{filter:["","none",O,I]}],blur:[{blur:qr()}],brightness:[{brightness:[z,O,I]}],contrast:[{contrast:[z,O,I]}],"drop-shadow":[{"drop-shadow":["","none",p,ln,on]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",z,O,I]}],"hue-rotate":[{"hue-rotate":[z,O,I]}],invert:[{invert:["",z,O,I]}],saturate:[{saturate:[z,O,I]}],sepia:[{sepia:["",z,O,I]}],"backdrop-filter":[{"backdrop-filter":["","none",O,I]}],"backdrop-blur":[{"backdrop-blur":qr()}],"backdrop-brightness":[{"backdrop-brightness":[z,O,I]}],"backdrop-contrast":[{"backdrop-contrast":[z,O,I]}],"backdrop-grayscale":[{"backdrop-grayscale":["",z,O,I]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[z,O,I]}],"backdrop-invert":[{"backdrop-invert":["",z,O,I]}],"backdrop-opacity":[{"backdrop-opacity":[z,O,I]}],"backdrop-saturate":[{"backdrop-saturate":[z,O,I]}],"backdrop-sepia":[{"backdrop-sepia":["",z,O,I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",O,I]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[z,"initial",O,I]}],ease:[{ease:["linear","initial",w,O,I]}],delay:[{delay:[z,O,I]}],animate:[{animate:["none",x,O,I]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,O,I]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:wt()}],"rotate-x":[{"rotate-x":wt()}],"rotate-y":[{"rotate-y":wt()}],"rotate-z":[{"rotate-z":wt()}],scale:[{scale:as()}],"scale-x":[{"scale-x":as()}],"scale-y":[{"scale-y":as()}],"scale-z":[{"scale-z":as()}],"scale-3d":["scale-3d"],skew:[{skew:Xs()}],"skew-x":[{"skew-x":Xs()}],"skew-y":[{"skew-y":Xs()}],transform:[{transform:[O,I,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:os()}],"translate-x":[{"translate-x":os()}],"translate-y":[{"translate-y":os()}],"translate-z":[{"translate-z":os()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",O,I]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",O,I]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[z,rr,Ft,xa]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},PP=uP(jP);function Oy(e){var t,s,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(s=Oy(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function IP(){for(var e,t,s=0,r="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=Oy(e))&&(r&&(r+=" "),r+=t);return r}function bh(...e){return PP(IP(e))}const OP=({src:e,alt:t,className:s,placeholder:r,...n})=>{const[i,a]=b.useState(!1);return u.jsxs("div",{className:bh("relative overflow-hidden",s),children:[!i&&u.jsx("div",{className:"absolute inset-0 bg-slate-200 dark:bg-slate-800 animate-pulse",style:{filter:"blur(10px)",backgroundImage:r?`url(${r})`:void 0,backgroundSize:"cover"}}),u.jsx(yy.img,{initial:{opacity:0},animate:{opacity:i?1:0},transition:{duration:.5,ease:"easeOut"},src:e,alt:t,loading:"lazy",decoding:"async",onLoad:()=>a(!0),className:bh("w-full h-full object-cover relative z-10",s),...n})]})},NP=({car:e,isSaved:t,onToggleSave:s})=>{const r=Ds(),{addCarToCompare:n,removeCarFromCompare:i,isInComparison:a}=wy(),o=b.useRef(null),l=a(e.id),c=f=>{f.stopPropagation(),l?i(e.id):n(e)},d=f=>{if(!o.current)return;const p=o.current.getBoundingClientRect(),m=f.clientX-p.left,g=f.clientY-p.top;o.current.style.setProperty("--mouse-x",`${m}px`),o.current.style.setProperty("--mouse-y",`${g}px`)},h=Math.round(e.price/72);return u.jsxs("button",{ref:o,onMouseMove:d,onClick:()=>r(`/vehicle/${e.id}`),className:"glass-premium group relative overflow-hidden text-left flex flex-col h-full active:scale-[0.98] transition-all duration-300",children:[u.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden p-8 flex items-center justify-center rounded-t-[24px]",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none"}),u.jsxs("div",{className:"absolute top-6 left-6 z-20 flex flex-col gap-2 items-start",children:[e.badge&&u.jsx("span",{className:"px-3 py-1.5 bg-[#00aed9]/80 backdrop-blur-md text-white text-[10px] font-black uppercase tracking-widest rounded-full shadow-lg border border-white/10",children:e.badge}),u.jsxs("span",{className:"px-3 py-1.5 bg-slate-900/60 text-slate-200 text-[10px] font-bold uppercase tracking-widest rounded-full shadow-sm flex items-center gap-1 backdrop-blur-md border border-white/10",children:[u.jsx(ui,{size:12,className:"text-[#00aed9]"})," Richard Certified"]})]}),u.jsxs("div",{className:"absolute top-6 right-6 z-20 flex flex-col gap-3",children:[u.jsx("div",{onClick:s,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-lg border backdrop-blur-md ${t?"bg-rose-500 border-rose-500 text-white":"bg-slate-900/40 border-white/10 text-white hover:text-rose-400"}`,children:u.jsx(Mn,{size:18,fill:t?"currentColor":"none"})}),u.jsx("div",{onClick:c,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-lg border backdrop-blur-md ${l?"bg-[#00aed9] text-white border-[#00aed9]":"bg-slate-900/40 border-white/10 text-white hover:text-[#00aed9]"}`,children:u.jsx(Jp,{size:18})})]}),u.jsx(OP,{src:e.img,alt:e.name,className:"w-full h-full object-contain transition-all duration-700 drop-shadow-2xl z-10 group-hover:scale-110 group-hover:-rotate-1"})]}),u.jsxs("div",{className:"p-8 flex-1 flex flex-col relative z-20",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-[0.2em]",children:e.type}),u.jsx("div",{className:"h-px w-8 bg-[#00aed9]/50"})]}),u.jsx("h3",{className:"text-2xl font-black text-white tracking-tighter group-hover:text-[#00aed9] transition-colors line-clamp-1 drop-shadow-md text-glow",children:e.name})]}),u.jsxs("div",{className:"flex gap-2 mb-6 flex-wrap",children:[u.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"Auto"}),u.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"Gasolina"}),u.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"4 Puertas"})]}),u.jsxs("div",{className:"mt-auto flex items-end justify-between border-t border-white/10 pt-6",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"text-3xl font-black text-white tracking-tight text-glow",children:["$",e.price.toLocaleString()]}),u.jsxs("p",{className:"text-[10px] font-bold text-[#00aed9] mt-1 flex items-center gap-1",children:["Est. $",h,"/mo"]})]}),u.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00aed9] text-white flex items-center justify-center shadow-[0_0_15px_rgba(0,174,217,0.5)] group-hover:scale-110 transition-transform",children:u.jsx(gl,{size:20})})]})]})]})},wh=async e=>{try{const t=Fs(he,"behavioral_events");await Vs(t,{...e,timestamp:Bs(),sessionId:sessionStorage.getItem("richard_session_id")||"anonymous"}),MP(e)}catch(t){console.error("Retargeting Log Error:",t)}},MP=e=>{const t=parseInt(localStorage.getItem(`views_${e.carId}`)||"0")+1;if(localStorage.setItem(`views_${e.carId}`,t.toString()),t>=2&&e.action==="view"){const s=localStorage.getItem("current_dealer_name")||"Richard Automotive";"Notification"in window&&Notification.permission==="granted"&&new Notification(`Inters Detectado en ${s}!`,{body:"Has visto este auto varias veces. Quieres una oferta exclusiva por WhatsApp?",icon:"/pwa-192x192.png"})}},$P={id:"richard-automotive",name:"Richard Automotive",themeColor:"#00aed9",welcomeMessage:"Bienvenido a Richard Automotive. En qu vehculo ests interesado hoy?"},Ny=b.createContext(void 0),DP=({children:e})=>{const[t,s]=b.useState(()=>{const n=localStorage.getItem("current_dealer_id"),i=localStorage.getItem("current_dealer_name"),a=localStorage.getItem("current_dealer_logo"),o=localStorage.getItem("current_dealer_welcome");return n&&i?{id:n,name:i,logo:a||void 0,welcomeMessage:o||void 0}:$P}),r=n=>{localStorage.setItem("current_dealer_id",n.id),localStorage.setItem("current_dealer_name",n.name),n.logo&&localStorage.setItem("current_dealer_logo",n.logo),n.welcomeMessage&&localStorage.setItem("current_dealer_welcome",n.welcomeMessage),s(n)};return u.jsx(Ny.Provider,{value:{currentDealer:t,setDealer:r},children:e})},LP=()=>{const e=b.useContext(Ny);if(!e)throw new Error("useDealer must be used within a DealerProvider");return e},UP=({inventory:e,initialVisualSearch:t,onClearVisualSearch:s,onMagicFix:r,onOpenGarage:n})=>{const[i,a]=b.useState(""),[o,l]=b.useState("all"),[c,d]=b.useState(null),[h,f]=b.useState([]),[p,m]=b.useState(null),[g,y]=b.useState(!1),[w,x]=b.useState(!1),[v,S]=b.useState(!1),[k,T]=b.useState(!1),[C,_]=b.useState(null),[A,E]=b.useState([]),[j,M]=b.useState([]),[V,Q]=b.useState(!1),{user:F}=b.useContext(Nm),B=Ds(),G=Vo();b.useEffect(()=>{const D=Sl("richard_saved_cars");if(D)try{f(JSON.parse(D))}catch(H){console.error("Error parsing saved cars cookie",H)}},[]),b.useEffect(()=>{t&&Te(t)},[t]);const R=(D,H)=>{if(D.stopPropagation(),!F){B("/login",{state:{from:G}});return}f(fe=>{const $t=!fe.includes(H),lt=$t?[...fe,H]:fe.filter(Gr=>Gr!==H);return $t&&wh({carId:H,action:"garage_add"}),Un("richard_saved_cars",JSON.stringify(lt),30),lt})},Te=async D=>{T(!0),y(!0);try{const H=await Am(D),fe=H.search_query||H.keywords[0];a(fe);const{searchSemanticInventoryByText:$t}=await q(async()=>{const{searchSemanticInventoryByText:Ci}=await Promise.resolve().then(()=>jT);return{searchSemanticInventoryByText:Ci}},void 0),lt=await $t(fe);lt.length>0?(_(`Identificado: ${H.description}. Encontramos coincidencias similares en el inventario.`),E(lt.map(Ci=>Ci.car_id))):(_(H.description),E([]));const Gr=(H.type||"").toLowerCase();["suv","sedan","pickup","luxury"].includes(Gr)?l(Gr):l("all"),s&&s(),y(!1)}catch(H){console.error("Error en bsqueda visual automtica",H),alert("No pudimos analizar la imagen importada."),y(!1)}finally{T(!1)}},{data:_e,fetchNextPage:bt,hasNextPage:qe,isFetchingNextPage:X,status:ne}=wf({queryKey:["cars",o,c],queryFn:({pageParam:D})=>pl(9,D,o,c),initialPageParam:null,getNextPageParam:D=>D.hasMore?D.lastDoc:void 0,enabled:!i&&!C,staleTime:300*1e3}),{currentDealer:Qs}=LP(),zr=_e?.pages.flatMap(D=>D.cars)||[],Y=!!i||!!C,qr=e.filter(D=>{if(A.length>0)return A.includes(D.id);let H=!0;C?H=(D.name||"").toLowerCase().includes(i.toLowerCase())||(C||"").toLowerCase().includes(D.type||"")||D.type.includes(C.split(" ")[0]||""):H=(D.name||"").toLowerCase().includes(i.toLowerCase());const fe=o==="all"||D.type===o;return H&&fe}).sort((D,H)=>c==="asc"?D.price-H.price:c==="desc"?H.price-D.price:0),wt=Y?qr:zr,as=!Y&&ne==="pending",Xs=async D=>{const H=D.target.files?.[0];if(!H)return;const fe=new FileReader;fe.readAsDataURL(H),fe.onload=async()=>{const $t=fe.result.split(",")[1];await Te($t)}},os=(D,H)=>{D.stopPropagation(),M(fe=>fe.some(lt=>lt.id===H.id)?fe.filter(lt=>lt.id!==H.id):fe.length>=2?(alert("Modo VS: Mximo 2 unidades para comparar."),fe):[...fe,H])},n0=async()=>{r&&(Q(!0),await r(),Q(!1))};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-0 lg:p-0 w-full pb-24 space-y-0 bg-slate-50 dark:bg-slate-950",children:[u.jsx(Dj,{onNeuralMatch:()=>x(!0),onBrowseInventory:()=>{document.getElementById("inventory-grid")?.scrollIntoView({behavior:"smooth"})},onSellCar:()=>B("/appraisal")}),u.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 lg:px-12 space-y-16 -mt-20 relative z-20",children:[u.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-[40px] shadow-xl shadow-slate-200/50 dark:shadow-none p-4 md:p-8",children:u.jsx(Lj,{})}),u.jsxs("div",{id:"inventory-grid",className:"scroll-mt-32",children:[u.jsx("div",{className:"sticky top-4 z-30 py-4 px-6 bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl rounded-full shadow-lg border border-slate-100 dark:border-slate-800 transition-all duration-300",children:u.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[u.jsxs("div",{className:"flex-1 relative w-full group",children:[u.jsx(tS,{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 group-focus-within:text-[#00aed9] transition-colors",size:24}),u.jsx("input",{type:"text",placeholder:C?`Buscando similares a: ${i}...`:"Buscar modelo, ao o caractersticas...",className:"w-full pl-16 pr-20 py-4 bg-transparent outline-none text-lg font-semibold dark:text-white placeholder:text-slate-300 dark:placeholder:text-slate-600",value:i,onChange:D=>{a(D.target.value),_(null),E([])}}),u.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:[u.jsxs("button",{onClick:()=>x(!0),className:"hidden md:flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-500 rounded-full transition-all text-xs font-bold uppercase tracking-wide border border-transparent hover:border-cyan-400",title:"Encuentra tu auto ideal por estilo de vida",children:[u.jsx(Nn,{size:16})," Neural Match"]}),u.jsx("button",{onClick:()=>y(!0),className:"p-3 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-500 rounded-full transition-all",title:"Bsqueda Visual por IA",children:u.jsx(lu,{size:20})})]})]}),u.jsxs("div",{className:"flex gap-4 items-center w-full lg:w-auto overflow-x-auto pb-2 lg:pb-0 scrollbar-hide",children:[u.jsx("div",{className:"flex gap-2 p-1.5 bg-slate-100 dark:bg-slate-800 rounded-full",children:["all","suv","sedan","pickup"].map(D=>u.jsx("button",{onClick:()=>l(D),className:`px-5 py-3 rounded-full font-black text-xs uppercase tracking-widest transition-all whitespace-nowrap ${o===D?"bg-[#173d57] dark:bg-[#00aed9] text-white shadow-md":"text-slate-400 hover:text-slate-600 dark:hover:text-white"}`,children:D==="all"?"Todos":D},D))}),u.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-slate-100 dark:bg-slate-800 rounded-full",children:[u.jsxs("button",{onClick:()=>d(D=>D==="asc"?null:"asc"),className:`px-4 py-3 rounded-full flex items-center gap-2 text-xs font-bold uppercase tracking-wide transition-all ${c==="asc"?"bg-[#00aed9] text-white":"text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,title:"Menor Precio",children:[u.jsx(Gi,{size:14,className:"rotate-180"})," ",u.jsx("span",{className:"hidden sm:inline",children:"$-$$$"})]}),u.jsxs("button",{onClick:()=>d(D=>D==="desc"?null:"desc"),className:`px-4 py-3 rounded-full flex items-center gap-2 text-xs font-bold uppercase tracking-wide transition-all ${c==="desc"?"bg-[#00aed9] text-white":"text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,title:"Mayor Precio",children:[u.jsx(Gi,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"$$$-$"})]})]})]})]})}),u.jsxs("div",{className:"flex justify-between items-end px-2 mt-8 mb-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-black text-slate-800 dark:text-white",children:[wt.length," ",Y?"Resultados":"Vehculos"]}),h.length>0&&u.jsxs("button",{onClick:()=>n&&n(),className:"text-sm text-[#00aed9] font-bold mt-1 flex items-center gap-1 hover:underline cursor-pointer",children:[u.jsx(Mn,{size:14,fill:"currentColor"})," Ver Mi Garaje Digital (",h.length,")"]})]}),C&&u.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-[#00aed9]/10 to-transparent border-l-4 border-[#00aed9] p-3 rounded-r-xl",children:[u.jsx(vr,{size:16,className:"text-[#00aed9]"}),u.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-300",children:[u.jsx("span",{className:"font-bold text-[#00aed9]",children:":"})," Resultados visuales."]}),u.jsx("button",{onClick:()=>{_(null),a(""),l("all"),E([])},className:"ml-2 text-[10px] font-bold underline hover:text-[#00aed9]",children:"Limpiar"})]})]}),u.jsx("div",{className:"pb-10 space-y-8",children:as?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(D=>u.jsx("div",{className:"h-[400px] bg-slate-100 dark:bg-slate-800 rounded-[40px] animate-pulse"},D))}):wt.length===0?u.jsx("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-center bg-white dark:bg-slate-800/50 rounded-[40px] border-2 border-dashed border-slate-300 dark:border-slate-700 animate-in fade-in",children:Y?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-2xl font-black text-slate-300 dark:text-slate-500 uppercase tracking-tight",children:"Sin Resultados"}),u.jsx("button",{onClick:()=>{a(""),l("all"),_(null)},className:"mt-4 text-[#00aed9] font-bold underline hover:text-cyan-400",children:"Limpiar Filtros"})]}):u.jsxs(u.Fragment,{children:[u.jsx(M_,{size:48,className:"text-slate-400 mb-4"}),u.jsx("h3",{className:"text-2xl font-black text-slate-700 dark:text-white uppercase tracking-tight",children:"Base de datos vaca"}),u.jsx("p",{className:"text-slate-500 mt-2 max-w-md",children:"No hay autos visibles."}),r?u.jsx("button",{onClick:n0,disabled:V,className:"mt-6 px-8 py-4 bg-rose-600 hover:bg-rose-500 text-white rounded-full font-black uppercase tracking-widest shadow-xl shadow-rose-600/30 active:scale-95 transition-all flex items-center gap-3 animate-bounce",children:V?u.jsxs(u.Fragment,{children:[" ",u.jsx(gn,{className:"animate-spin"})," Reparando... "]}):u.jsxs(u.Fragment,{children:[" ",u.jsx(dS,{size:20}),"  Reparacin Automtica "]})}):u.jsx("p",{className:"text-slate-500 mb-6 max-w-md",children:"Ve al Admin Panel para configurar."})]})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:wt.map(D=>u.jsx(NP,{car:D,onSelect:()=>{m(D),wh({carId:D.id,action:"view"})},onCompare:H=>os(H,D),isComparing:j.some(H=>H.id===D.id),isSaved:h.includes(D.id),onToggleSave:H=>R(H,D.id)},D.id))}),!Y&&qe&&u.jsx("div",{className:"flex justify-center pt-8",children:u.jsxs("button",{onClick:()=>bt(),disabled:X,className:"px-8 py-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-full font-bold text-slate-600 dark:text-white hover:bg-[#00aed9] hover:text-white hover:border-[#00aed9] transition-all shadow-lg shadow-slate-200/50 dark:shadow-none active:scale-95 flex items-center gap-2 group",children:[X?u.jsx(gn,{className:"animate-spin"}):u.jsx(Gi,{className:"group-hover:translate-y-1 transition-transform",size:18}),X?"Cargando ms...":"Cargar Ms Vehculos"]})})]})})]}),u.jsx(Vj,{}),u.jsx(Uj,{}),u.jsx(Bj,{})]})]}),j.length>0&&u.jsxs("div",{className:"fixed bottom-24 lg:bottom-12 left-1/2 -translate-x-1/2 z-40 bg-[#173d57] dark:bg-[#0d2232] text-white pl-2 pr-6 py-2 rounded-full shadow-2xl flex items-center gap-4 animate-in slide-in-from-bottom-5 border border-[#00aed9]/30 backdrop-blur-md",children:[u.jsxs("div",{className:"flex -space-x-3",children:[j.map(D=>u.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[#173d57] dark:border-[#0d2232] bg-white flex items-center justify-center overflow-hidden",children:u.jsx("img",{src:D.img,alt:D.name,className:"w-full h-full object-cover"})},D.id)),j.length<2&&u.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[#173d57] dark:border-[#0d2232] bg-white/10 flex items-center justify-center text-xs font-bold border-dashed border-white/30",children:"?"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-bold text-sm leading-tight",children:"Comparativa VS"}),u.jsxs("span",{className:"text-[10px] text-cyan-300 font-medium",children:[j.length," de 2 Seleccionados"]})]}),j.length===2&&u.jsx("button",{onClick:()=>S(!0),className:"ml-2 bg-[#00aed9] hover:bg-cyan-400 text-white px-5 py-2 rounded-full text-xs font-black uppercase tracking-wider transition-all shadow-[0_0_15px_rgba(0,174,217,0.5)] animate-pulse",children:"Iniciar"}),u.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),u.jsx("button",{onClick:()=>M([]),className:"p-1.5 hover:bg-white/10 rounded-full text-slate-300 hover:text-white transition-colors",children:u.jsx(mt,{size:16})})]}),w&&u.jsx(MT,{inventory:e,onClose:()=>x(!1),onSelectCar:D=>{m(D),x(!1)}}),v&&u.jsx($T,{cars:j,onClose:()=>S(!1)}),g&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-[#0d2232]/90 backdrop-blur-xl animate-in fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[40px] max-w-lg w-full relative shadow-2xl border border-slate-700",children:[u.jsx("button",{onClick:()=>y(!1),className:"absolute top-6 right-6 text-slate-400 hover:text-white transition-colors",children:u.jsx(mt,{})}),u.jsxs("h3",{className:"text-3xl font-black text-slate-800 dark:text-white mb-2 flex items-center gap-3",children:[u.jsx(lu,{className:"text-[#00aed9]",size:32})," Visual AI"]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 font-medium",children:"Sube una foto y nuestra IA encontrar el match perfecto en nuestro inventario."}),k?u.jsxs("div",{className:"flex flex-col items-center justify-center h-48 space-y-4 border-2 border-dashed border-[#00aed9]/30 rounded-3xl bg-[#00aed9]/5",children:[u.jsx(gn,{className:"w-12 h-12 text-[#00aed9] animate-spin"}),u.jsx("p",{className:"text-sm font-bold animate-pulse text-[#00aed9] uppercase tracking-widest",children:"Escaneando..."})]}):u.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-3xl cursor-pointer bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all group hover:border-[#00aed9]",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[u.jsx(oS,{className:"w-12 h-12 mb-3 text-slate-400 group-hover:text-[#00aed9] transition-colors scale-100 group-hover:scale-110 duration-300"}),u.jsxs("p",{className:"mb-2 text-sm text-slate-500 dark:text-slate-400",children:[u.jsx("span",{className:"font-bold text-[#00aed9]",children:"Sube una foto"})," o arrastra aqu"]})]}),u.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Xs})]})]})}),p&&u.jsx(PT,{car:p,onClose:()=>m(null)}),u.jsx(jm,{inventory:e})]})},FP=()=>u.jsxs("a",{href:`https://wa.me/17875550123?text=${encodeURIComponent("Hola, me gustara ms informacin sobre su inventario.")}`,target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-24 right-5 z-50 p-4 bg-[#25D366] hover:bg-[#128C7E] text-white rounded-full shadow-lg hover:scale-110 transition-all duration-300 animate-bounce-slow flex items-center justify-center group",title:"Chat en WhatsApp",children:[u.jsx(J_,{size:28,fill:"white"}),u.jsx("span",{className:"absolute right-full mr-3 bg-white dark:bg-slate-800 text-slate-800 dark:text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Habla con Richard IA"})]}),VP=()=>{const[e,t]=b.useState(!1);b.useEffect(()=>{if(Sl("richard_cookie_consent"))Xu();else{const i=setTimeout(()=>t(!0),1500);return()=>clearTimeout(i)}},[]);const s=()=>{Un("richard_cookie_consent","true",365),Xu(),t(!1)},r=()=>{Un("richard_cookie_consent","false",7),t(!1)};return e?u.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[1000] p-4 md:p-6 flex justify-center animate-in slide-in-from-bottom-10 fade-in duration-500",children:u.jsxs("div",{className:"bg-[#0d2232]/95 backdrop-blur-xl border border-slate-700 shadow-2xl rounded-3xl p-6 md:p-8 max-w-4xl w-full flex flex-col md:flex-row items-center gap-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00aed9] to-transparent opacity-50"}),u.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-[#00aed9]/10 rounded-full shrink-0",children:u.jsx(I_,{size:32,className:"text-[#00aed9]"})}),u.jsxs("div",{className:"flex-1 text-center md:text-left",children:[u.jsx("h4",{className:"text-white font-black text-lg mb-2",children:"Valoramos tu Privacidad"}),u.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed",children:["Utilizamos cookies propias y de terceros para mejorar tu experiencia de navegacin, analizar el trfico del sitio y personalizar el contenido del inventario. Al hacer clic en ",u.jsx("span",{className:"text-white font-bold",children:'"Aceptar todo"'}),", consientes el uso de todas las cookies."]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto shrink-0",children:[u.jsx("button",{onClick:r,className:"px-6 py-3 rounded-xl border border-slate-600 text-slate-300 hover:text-white hover:border-slate-500 text-xs font-bold uppercase tracking-widest transition-colors",children:"Rechazar"}),u.jsxs("button",{onClick:s,className:"px-8 py-3 bg-[#00aed9] hover:bg-cyan-500 text-white rounded-xl text-xs font-bold uppercase tracking-widest shadow-lg shadow-cyan-500/20 transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[u.jsx(ui,{size:16})," Aceptar Todo"]})]}),u.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-slate-500 hover:text-white transition-colors md:hidden",children:u.jsx(mt,{size:20})})]})}):null},nc=b.createContext({theme:"light",toggleTheme:()=>{}}),BP=({children:e})=>{const[t,s]=b.useState(()=>{const n=localStorage.getItem("theme");return n||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),r=()=>{s(n=>{const i=n==="light"?"dark":"light";return localStorage.setItem("theme",i),i})};return u.jsx(nc.Provider,{value:{theme:t,toggleTheme:r},children:e})};function zP(e={}){const{immediate:t=!1,onNeedRefresh:s,onOfflineReady:r,onRegistered:n,onRegisteredSW:i,onRegisterError:a}=e;let o,l;const c=async(h=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(o=await q(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{a?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:t}).then(h=>{i?i("/sw.js",h):n?.(h)}).catch(h=>{a?.(h)})}}return l=d(),c}function qP(e={}){const{immediate:t=!0,onNeedRefresh:s,onOfflineReady:r,onRegistered:n,onRegisteredSW:i,onRegisterError:a}=e,[o,l]=b.useState(!1),[c,d]=b.useState(!1),[h]=b.useState(()=>zP({immediate:t,onOfflineReady(){d(!0),r?.()},onNeedRefresh(){l(!0),s?.()},onRegistered:n,onRegisteredSW:i,onRegisterError:a}));return{needRefresh:[o,l],offlineReady:[c,d],updateServiceWorker:h}}const GP=()=>{const{offlineReady:[e,t],needRefresh:[s,r],updateServiceWorker:n}=qP({onRegistered(a){},onRegisterError(a){}}),i=()=>{t(!1),r(!1)};return!e&&!s?null:u.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[2000] animate-in slide-in-from-bottom-5 fade-in",children:u.jsxs("div",{className:"bg-[#0d2232] border border-[#00aed9]/30 p-4 rounded-2xl shadow-2xl flex items-center gap-4 text-white min-w-[300px]",children:[u.jsxs("div",{className:"p-3 bg-gradient-to-br from-[#00aed9] to-blue-600 rounded-xl relative",children:[u.jsx(D_,{size:20,className:"text-white relative z-10"}),u.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse rounded-xl"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-bold text-sm",children:e?"App lista para offline":"Nueva versin disponible"}),u.jsx("p",{className:"text-[10px] text-slate-400",children:e?"Ya puedes usar la app sin internet.":"Recarga para ver los cambios."})]}),s&&u.jsxs("button",{className:"px-4 py-2 bg-white text-[#0d2232] rounded-lg text-xs font-bold hover:bg-slate-200 transition-colors flex items-center gap-2",onClick:()=>n(!0),children:[u.jsx(Zp,{size:14})," Recargar"]}),u.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-xs",onClick:i,children:"Cerrar"})]})})},HP=()=>{const[e,t]=b.useState(!navigator.onLine);return b.useEffect(()=>{const s=()=>t(!1),r=()=>t(!0);return window.addEventListener("online",s),window.addEventListener("offline",r),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}},[]),e?u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[100] bg-red-600 text-white py-2 px-4 shadow-lg flex items-center justify-center gap-2 animate-in slide-in-from-bottom-full duration-500",children:[u.jsx(uS,{size:16}),u.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Modo Offline Activo  Viendo datos guardados"})]}):null},KP=()=>{const{selectedCars:e,removeCarFromCompare:t}=wy(),s=Ds();return e.length===0?null:u.jsx("div",{className:"fixed bottom-0 left-0 w-full z-50 p-4 flex justify-center pointer-events-none",children:u.jsxs("div",{className:"bg-[#0d2232] border border-[#00aed9]/30 rounded-2xl shadow-2xl p-4 flex items-center gap-6 pointer-events-auto max-w-2xl w-full backdrop-blur-xl animate-in slide-in-from-bottom duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00aed9]/10 flex items-center justify-center text-[#00aed9]",children:u.jsx(Jp,{size:20})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-white font-bold text-sm",children:"Comparando"}),u.jsxs("p",{className:"text-slate-400 text-xs",children:[e.length," Vehculos seleccionados"]})]})]}),u.jsxs("div",{className:"flex-1 flex items-center gap-2 overflow-x-auto",children:[e.map(r=>u.jsxs("div",{className:"relative group shrink-0",children:[u.jsx("img",{src:r.img,alt:r.name,className:"w-16 h-12 object-contain bg-white/5 rounded-lg border border-white/10"}),u.jsx("button",{onClick:()=>t(r.id),className:"absolute -top-2 -right-2 bg-slate-900 border border-slate-700 text-slate-400 hover:text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(mt,{size:12})})]},r.id)),e.length<3&&u.jsx("div",{className:"w-16 h-12 rounded-lg border border-dashed border-slate-700 flex items-center justify-center text-slate-600 text-xs text-center leading-none",children:"Agregar +"})]}),u.jsxs("button",{onClick:()=>s("/compare"),className:"bg-[#00aed9] hover:bg-[#009ac0] text-slate-900 font-black uppercase text-xs tracking-widest py-3 px-6 rounded-xl transition-all shadow-lg shadow-cyan-500/20 flex items-center gap-2",children:["Comparar ",u.jsx(Hp,{size:16})]})]})})},My=b.createContext(void 0),WP=({children:e})=>{const[t,s]=b.useState([]),r=b.useCallback(i=>{s(a=>a.filter(o=>o.id!==i))},[]),n=b.useCallback((i,a)=>{const o=Date.now().toString();s(l=>[...l,{id:o,type:i,message:a}]),setTimeout(()=>{r(o)},5e3)},[r]);return u.jsxs(My.Provider,{value:{notifications:t,addNotification:n,removeNotification:r},children:[e,u.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(i=>u.jsxs("div",{className:`
              pointer-events-auto flex items-start gap-3 p-4 rounded-xl shadow-2xl backdrop-blur-md border border-white/10 text-white min-w-[300px] max-w-sm animate-in slide-in-from-right-10 fade-in duration-300
              ${i.type==="success"?"bg-emerald-600/90 shadow-emerald-900/20":""}
              ${i.type==="error"?"bg-rose-600/90 shadow-rose-900/20":""}
              ${i.type==="info"?"bg-slate-800/90 shadow-slate-900/20":""}
            `,children:[u.jsxs("div",{className:"mt-0.5",children:[i.type==="success"&&u.jsx(P_,{size:18}),i.type==="error"&&u.jsx(ml,{size:18}),i.type==="info"&&u.jsx(z_,{size:18})]}),u.jsx("div",{className:"flex-1 text-sm font-medium leading-relaxed",children:i.message}),u.jsx("button",{onClick:()=>r(i.id),className:"text-white/60 hover:text-white transition-colors",children:u.jsx(mt,{size:16})})]},i.id))})]})},JP=()=>{const e=b.useContext(My);if(!e)throw new Error("useNotification must be used within a NotificationProvider");return e};var _a={exports:{}},Sa={};var xh;function YP(){if(xh)return Sa;xh=1;var e=Hh();function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var s=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,n=e.useRef,i=e.useEffect,a=e.useMemo,o=e.useDebugValue;return Sa.useSyncExternalStoreWithSelector=function(l,c,d,h,f){var p=n(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function y(k){if(!w){if(w=!0,x=k,k=h(k),f!==void 0&&m.hasValue){var T=m.value;if(f(T,k))return v=T}return v=k}if(T=v,s(x,k))return T;var C=h(k);return f!==void 0&&f(T,C)?(x=k,T):(x=k,v=C)}var w=!1,x,v,S=d===void 0?null:d;return[function(){return y(c())},S===null?void 0:function(){return y(S())}]},[c,d,h,f]);var g=r(l,p[0],p[1]);return i(function(){m.hasValue=!0,m.value=g},[g]),o(g),g},Sa}var _h;function QP(){return _h||(_h=1,_a.exports=YP()),_a.exports}var XP=QP();function ZP(e){e()}function eI(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ZP(()=>{let s=e;for(;s;)s.callback(),s=s.next})},get(){const s=[];let r=e;for(;r;)s.push(r),r=r.next;return s},subscribe(s){let r=!0;const n=t={callback:s,next:null,prev:t};return n.prev?n.prev.next=n:e=n,function(){!r||e===null||(r=!1,n.next?n.next.prev=n.prev:t=n.prev,n.prev?n.prev.next=n.next:e=n.next)}}}}var Sh={notify(){},get:()=>[]};function tI(e,t){let s,r=Sh,n=0,i=!1;function a(g){d();const y=r.subscribe(g);let w=!1;return()=>{w||(w=!0,y(),h())}}function o(){r.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return i}function d(){n++,s||(s=e.subscribe(l),r=eI())}function h(){n--,s&&n===0&&(s(),s=void 0,r.clear(),r=Sh)}function f(){i||(i=!0,d())}function p(){i&&(i=!1,h())}const m={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>r};return m}var sI=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rI=sI(),nI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",iI=nI(),aI=()=>rI||iI?b.useLayoutEffect:b.useEffect,oI=aI(),lI=Symbol.for("react-redux-context"),cI=typeof globalThis<"u"?globalThis:{};function uI(){if(!b.createContext)return{};const e=cI[lI]??=new Map;let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var Ot=uI();function dI(e){const{children:t,context:s,serverState:r,store:n}=e,i=b.useMemo(()=>{const l=tI(n);return{store:n,subscription:l,getServerState:r?()=>r:void 0}},[n,r]),a=b.useMemo(()=>n.getState(),[n]);oI(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==n.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,a]);const o=s||Ot;return b.createElement(o.Provider,{value:i},t)}var hI=dI;function ic(e=Ot){return function(){return b.useContext(e)}}var $y=ic();function Dy(e=Ot){const t=e===Ot?$y:ic(e),s=()=>{const{store:r}=t();return r};return Object.assign(s,{withTypes:()=>s}),s}var fI=Dy();function pI(e=Ot){const t=e===Ot?fI:Dy(e),s=()=>t().dispatch;return Object.assign(s,{withTypes:()=>s}),s}var ac=pI(),mI=(e,t)=>e===t;function gI(e=Ot){const t=e===Ot?$y:ic(e),s=(r,n={})=>{const{equalityFn:i=mI}=typeof n=="function"?{equalityFn:n}:n,a=t(),{store:o,subscription:l,getServerState:c}=a;b.useRef(!0);const d=b.useCallback({[r.name](f){return r(f)}}[r.name],[r]),h=XP.useSyncExternalStoreWithSelector(l.addNestedSub,o.getState,c||o.getState,d,i);return b.useDebugValue(h),h};return Object.assign(s,{withTypes:()=>s}),s}var vi=gI();function we(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yI=typeof Symbol=="function"&&Symbol.observable||"@@observable",kh=yI,ka=()=>Math.random().toString(36).substring(7).split("").join("."),vI={INIT:`@@redux/INIT${ka()}`,REPLACE:`@@redux/REPLACE${ka()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ka()}`},Wn=vI;function oc(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Ly(e,t,s){if(typeof e!="function")throw new Error(we(2));if(typeof t=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(we(0));if(typeof t=="function"&&typeof s>"u"&&(s=t,t=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(we(1));return s(Ly)(e,t)}let r=e,n=t,i=new Map,a=i,o=0,l=!1;function c(){a===i&&(a=new Map,i.forEach((y,w)=>{a.set(w,y)}))}function d(){if(l)throw new Error(we(3));return n}function h(y){if(typeof y!="function")throw new Error(we(4));if(l)throw new Error(we(5));let w=!0;c();const x=o++;return a.set(x,y),function(){if(w){if(l)throw new Error(we(6));w=!1,c(),a.delete(x),i=null}}}function f(y){if(!oc(y))throw new Error(we(7));if(typeof y.type>"u")throw new Error(we(8));if(typeof y.type!="string")throw new Error(we(17));if(l)throw new Error(we(9));try{l=!0,n=r(n,y)}finally{l=!1}return(i=a).forEach(x=>{x()}),y}function p(y){if(typeof y!="function")throw new Error(we(10));r=y,f({type:Wn.REPLACE})}function m(){const y=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(we(11));function x(){const S=w;S.next&&S.next(d())}return x(),{unsubscribe:y(x)}},[kh](){return this}}}return f({type:Wn.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:p,[kh]:m}}function bI(e){Object.keys(e).forEach(t=>{const s=e[t];if(typeof s(void 0,{type:Wn.INIT})>"u")throw new Error(we(12));if(typeof s(void 0,{type:Wn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(we(13))})}function wI(e){const t=Object.keys(e),s={};for(let i=0;i<t.length;i++){const a=t[i];typeof e[a]=="function"&&(s[a]=e[a])}const r=Object.keys(s);let n;try{bI(s)}catch(i){n=i}return function(a={},o){if(n)throw n;let l=!1;const c={};for(let d=0;d<r.length;d++){const h=r[d],f=s[h],p=a[h],m=f(p,o);if(typeof m>"u")throw o&&o.type,new Error(we(14));c[h]=m,l=l||m!==p}return l=l||r.length!==Object.keys(a).length,l?c:a}}function Jn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,s)=>(...r)=>t(s(...r)))}function xI(...e){return t=>(s,r)=>{const n=t(s,r);let i=()=>{throw new Error(we(15))};const a={getState:n.getState,dispatch:(l,...c)=>i(l,...c)},o=e.map(l=>l(a));return i=Jn(...o)(n.dispatch),{...n,dispatch:i}}}function _I(e){return oc(e)&&"type"in e&&typeof e.type=="string"}var Uy=Symbol.for("immer-nothing"),Eh=Symbol.for("immer-draftable"),je=Symbol.for("immer-state");function Xe(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var De=Object,Ms=De.getPrototypeOf,Yn="constructor",bi="prototype",Oo="configurable",Qn="enumerable",_n="writable",Ir="value",yt=e=>!!e&&!!e[je];function st(e){return e?Fy(e)||xi(e)||!!e[Eh]||!!e[Yn]?.[Eh]||_i(e)||Si(e):!1}var SI=De[bi][Yn].toString(),Th=new WeakMap;function Fy(e){if(!e||!lc(e))return!1;const t=Ms(e);if(t===null||t===De[bi])return!0;const s=De.hasOwnProperty.call(t,Yn)&&t[Yn];if(s===Object)return!0;if(!ws(s))return!1;let r=Th.get(s);return r===void 0&&(r=Function.toString.call(s),Th.set(s,r)),r===SI}function wi(e,t,s=!0){Br(e)===0?(s?Reflect.ownKeys(e):De.keys(e)).forEach(n=>{t(n,e[n],e)}):e.forEach((r,n)=>t(n,r,e))}function Br(e){const t=e[je];return t?t.type_:xi(e)?1:_i(e)?2:Si(e)?3:0}var Ch=(e,t,s=Br(e))=>s===2?e.has(t):De[bi].hasOwnProperty.call(e,t),No=(e,t,s=Br(e))=>s===2?e.get(t):e[t],Xn=(e,t,s,r=Br(e))=>{r===2?e.set(t,s):r===3?e.add(s):e[t]=s};function kI(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var xi=Array.isArray,_i=e=>e instanceof Map,Si=e=>e instanceof Set,lc=e=>typeof e=="object",ws=e=>typeof e=="function",Ea=e=>typeof e=="boolean";function EI(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var dt=e=>e.copy_||e.base_,cc=e=>e.modified_?e.copy_:e.base_;function Mo(e,t){if(_i(e))return new Map(e);if(Si(e))return new Set(e);if(xi(e))return Array[bi].slice.call(e);const s=Fy(e);if(t===!0||t==="class_only"&&!s){const r=De.getOwnPropertyDescriptors(e);delete r[je];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){const a=n[i],o=r[a];o[_n]===!1&&(o[_n]=!0,o[Oo]=!0),(o.get||o.set)&&(r[a]={[Oo]:!0,[_n]:!0,[Qn]:o[Qn],[Ir]:e[a]})}return De.create(Ms(e),r)}else{const r=Ms(e);if(r!==null&&s)return{...e};const n=De.create(r);return De.assign(n,e)}}function uc(e,t=!1){return ki(e)||yt(e)||!st(e)||(Br(e)>1&&De.defineProperties(e,{set:cn,add:cn,clear:cn,delete:cn}),De.freeze(e),t&&wi(e,(s,r)=>{uc(r,!0)},!1)),e}function TI(){Xe(2)}var cn={[Ir]:TI};function ki(e){return e===null||!lc(e)?!0:De.isFrozen(e)}var Zn="MapSet",$o="Patches",Ah="ArrayMethods",Vy={};function ns(e){const t=Vy[e];return t||Xe(0,e),t}var Rh=e=>!!Vy[e],Or,By=()=>Or,CI=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Rh(Zn)?ns(Zn):void 0,arrayMethodsPlugin_:Rh(Ah)?ns(Ah):void 0});function jh(e,t){t&&(e.patchPlugin_=ns($o),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Do(e){Lo(e),e.drafts_.forEach(AI),e.drafts_=null}function Lo(e){e===Or&&(Or=e.parent_)}var Ph=e=>Or=CI(Or,e);function AI(e){const t=e[je];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ih(e,t){t.unfinalizedDrafts_=t.drafts_.length;const s=t.drafts_[0];if(e!==void 0&&e!==s){s[je].modified_&&(Do(t),Xe(4)),st(e)&&(e=Oh(t,e));const{patchPlugin_:n}=t;n&&n.generateReplacementPatches_(s[je].base_,e,t)}else e=Oh(t,s);return RI(t,e,!0),Do(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Uy?e:void 0}function Oh(e,t){if(ki(t))return t;const s=t[je];if(!s)return ei(t,e.handledSet_,e);if(!Ei(s,e))return t;if(!s.modified_)return s.base_;if(!s.finalized_){const{callbacks_:r}=s;if(r)for(;r.length>0;)r.pop()(e);Gy(s,e)}return s.copy_}function RI(e,t,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&uc(t,s)}function zy(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Ei=(e,t)=>e.scope_===t,jI=[];function qy(e,t,s,r){const n=dt(e),i=e.type_;if(r!==void 0&&No(n,r,i)===t){Xn(n,r,s,i);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;wi(n,(l,c)=>{if(yt(c)){const d=o.get(c)||[];d.push(l),o.set(c,d)}})}const a=e.draftLocations_.get(t)??jI;for(const o of a)Xn(n,o,s,i)}function PI(e,t,s){e.callbacks_.push(function(n){const i=t;if(!i||!Ei(i,n))return;n.mapSetPlugin_?.fixSetContents(i);const a=cc(i);qy(e,i.draft_??i,a,s),Gy(i,n)})}function Gy(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const n=r.getPath(e);n&&r.generatePatches_(e,n,t)}zy(e)}}function II(e,t,s){const{scope_:r}=e;if(yt(s)){const n=s[je];Ei(n,r)&&n.callbacks_.push(function(){Sn(e);const a=cc(n);qy(e,s,a,t)})}else st(s)&&e.callbacks_.push(function(){const i=dt(e);e.type_===3?i.has(s)&&ei(s,r.handledSet_,r):No(i,t,e.type_)===s&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&ei(No(e.copy_,t,e.type_),r.handledSet_,r)})}function ei(e,t,s){return!s.immer_.autoFreeze_&&s.unfinalizedDrafts_<1||yt(e)||t.has(e)||!st(e)||ki(e)||(t.add(e),wi(e,(r,n)=>{if(yt(n)){const i=n[je];if(Ei(i,s)){const a=cc(i);Xn(e,r,a,e.type_),zy(i)}}else st(n)&&ei(n,t,s)})),e}function OI(e,t){const s=xi(e),r={type_:s?1:0,scope_:t?t.scope_:By(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let n=r,i=ti;s&&(n=[r],i=Nr);const{revoke:a,proxy:o}=Proxy.revocable(n,i);return r.draft_=o,r.revoke_=a,[o,r]}var ti={get(e,t){if(t===je)return e;let s=e.scope_.arrayMethodsPlugin_;const r=e.type_===1&&typeof t=="string";if(r&&s?.isArrayOperationMethod(t))return s.createMethodInterceptor(e,t);const n=dt(e);if(!Ch(n,t,e.type_))return NI(e,n,t);const i=n[t];if(e.finalized_||!st(i)||r&&e.operationMethod&&s?.isMutatingArrayMethod(e.operationMethod)&&EI(t))return i;if(i===Ta(e.base_,t)){Sn(e);const a=e.type_===1?+t:t,o=Fo(e.scope_,i,e,a);return e.copy_[a]=o}return i},has(e,t){return t in dt(e)},ownKeys(e){return Reflect.ownKeys(dt(e))},set(e,t,s){const r=Hy(dt(e),t);if(r?.set)return r.set.call(e.draft_,s),!0;if(!e.modified_){const n=Ta(dt(e),t),i=n?.[je];if(i&&i.base_===s)return e.copy_[t]=s,e.assigned_.set(t,!1),!0;if(kI(s,n)&&(s!==void 0||Ch(e.base_,t,e.type_)))return!0;Sn(e),Uo(e)}return e.copy_[t]===s&&(s!==void 0||t in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=s,e.assigned_.set(t,!0),II(e,t,s)),!0},deleteProperty(e,t){return Sn(e),Ta(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Uo(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const s=dt(e),r=Reflect.getOwnPropertyDescriptor(s,t);return r&&{[_n]:!0,[Oo]:e.type_!==1||t!=="length",[Qn]:r[Qn],[Ir]:s[t]}},defineProperty(){Xe(11)},getPrototypeOf(e){return Ms(e.base_)},setPrototypeOf(){Xe(12)}},Nr={};for(let e in ti){let t=ti[e];Nr[e]=function(){const s=arguments;return s[0]=s[0][0],t.apply(this,s)}}Nr.deleteProperty=function(e,t){return Nr.set.call(this,e,t,void 0)};Nr.set=function(e,t,s){return ti.set.call(this,e[0],t,s,e[0])};function Ta(e,t){const s=e[je];return(s?dt(s):e)[t]}function NI(e,t,s){const r=Hy(t,s);return r?Ir in r?r[Ir]:r.get?.call(e.draft_):void 0}function Hy(e,t){if(!(t in e))return;let s=Ms(e);for(;s;){const r=Object.getOwnPropertyDescriptor(s,t);if(r)return r;s=Ms(s)}}function Uo(e){e.modified_||(e.modified_=!0,e.parent_&&Uo(e.parent_))}function Sn(e){e.copy_||(e.assigned_=new Map,e.copy_=Mo(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var MI=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,s,r)=>{if(ws(t)&&!ws(s)){const i=s;s=t;const a=this;return function(l=i,...c){return a.produce(l,d=>s.call(this,d,...c))}}ws(s)||Xe(6),r!==void 0&&!ws(r)&&Xe(7);let n;if(st(t)){const i=Ph(this),a=Fo(i,t,void 0);let o=!0;try{n=s(a),o=!1}finally{o?Do(i):Lo(i)}return jh(i,r),Ih(n,i)}else if(!t||!lc(t)){if(n=s(t),n===void 0&&(n=t),n===Uy&&(n=void 0),this.autoFreeze_&&uc(n,!0),r){const i=[],a=[];ns($o).generateReplacementPatches_(t,n,{patches_:i,inversePatches_:a}),r(i,a)}return n}else Xe(1,t)},this.produceWithPatches=(t,s)=>{if(ws(t))return(a,...o)=>this.produceWithPatches(a,l=>t(l,...o));let r,n;return[this.produce(t,s,(a,o)=>{r=a,n=o}),r,n]},Ea(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Ea(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Ea(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){st(e)||Xe(8),yt(e)&&(e=$I(e));const t=Ph(this),s=Fo(t,e,void 0);return s[je].isManual_=!0,Lo(t),s}finishDraft(e,t){const s=e&&e[je];(!s||!s.isManual_)&&Xe(9);const{scope_:r}=s;return jh(r,t),Ih(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let s;for(s=t.length-1;s>=0;s--){const n=t[s];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}s>-1&&(t=t.slice(s+1));const r=ns($o).applyPatches_;return yt(e)?r(e,t):this.produce(e,n=>r(n,t))}};function Fo(e,t,s,r){const[n,i]=_i(t)?ns(Zn).proxyMap_(t,s):Si(t)?ns(Zn).proxySet_(t,s):OI(t,s);return(s?.scope_??By()).drafts_.push(n),i.callbacks_=s?.callbacks_??[],i.key_=r,s&&r!==void 0?PI(s,i,r):i.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:c}=l;i.modified_&&c&&c.generatePatches_(i,[],l)}),n}function $I(e){return yt(e)||Xe(10,e),Ky(e)}function Ky(e){if(!st(e)||ki(e))return e;const t=e[je];let s,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,s=Mo(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else s=Mo(e,!0);return wi(s,(n,i)=>{Xn(s,n,Ky(i))},r),t&&(t.finalized_=!1),s}var DI=new MI,Wy=DI.produce;function Jy(e){return({dispatch:s,getState:r})=>n=>i=>typeof i=="function"?i(s,r,e):n(i)}var LI=Jy(),UI=Jy,FI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Jn:Jn.apply(null,arguments)};function Nh(e,t){function s(...r){if(t){let n=t(...r);if(!n)throw new Error(ft(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return s.toString=()=>`${e}`,s.type=e,s.match=r=>_I(r)&&r.type===e,s}var Yy=class lr extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,lr.prototype)}static get[Symbol.species](){return lr}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new lr(...t[0].concat(this)):new lr(...t.concat(this))}};function Mh(e){return st(e)?Wy(e,()=>{}):e}function un(e,t,s){return e.has(t)?e.get(t):e.set(t,s(t)).get(t)}function VI(e){return typeof e=="boolean"}var BI=()=>function(t){const{thunk:s=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=t??{};let a=new Yy;return s&&(VI(s)?a.push(LI):a.push(UI(s.extraArgument))),a},zI="RTK_autoBatch",$h=e=>t=>{setTimeout(t,e)},qI=(e={type:"raf"})=>t=>(...s)=>{const r=t(...s);let n=!0,i=!1,a=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$h(10):e.type==="callback"?e.queueNotification:$h(e.timeout),c=()=>{a=!1,i&&(i=!1,o.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const h=()=>n&&d(),f=r.subscribe(h);return o.add(d),()=>{f(),o.delete(d)}},dispatch(d){try{return n=!d?.meta?.[zI],i=!n,i&&(a||(a=!0,l(c))),r.dispatch(d)}finally{n=!0}}})},GI=e=>function(s){const{autoBatch:r=!0}=s??{};let n=new Yy(e);return r&&n.push(qI(typeof r=="object"?r:void 0)),n};function HI(e){const t=BI(),{reducer:s=void 0,middleware:r,devTools:n=!0,preloadedState:i=void 0,enhancers:a=void 0}=e||{};let o;if(typeof s=="function")o=s;else if(oc(s))o=wI(s);else throw new Error(ft(1));let l;typeof r=="function"?l=r(t):l=t();let c=Jn;n&&(c=FI({trace:!1,...typeof n=="object"&&n}));const d=xI(...l),h=GI(d);let f=typeof a=="function"?a(h):h();const p=c(...f);return Ly(o,i,p)}function Qy(e){const t={},s=[];let r;const n={addCase(i,a){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(ft(28));if(o in t)throw new Error(ft(29));return t[o]=a,n},addAsyncThunk(i,a){return a.pending&&(t[i.pending.type]=a.pending),a.rejected&&(t[i.rejected.type]=a.rejected),a.fulfilled&&(t[i.fulfilled.type]=a.fulfilled),a.settled&&s.push({matcher:i.settled,reducer:a.settled}),n},addMatcher(i,a){return s.push({matcher:i,reducer:a}),n},addDefaultCase(i){return r=i,n}};return e(n),[t,s,r]}function KI(e){return typeof e=="function"}function WI(e,t){let[s,r,n]=Qy(t),i;if(KI(e))i=()=>Mh(e());else{const o=Mh(e);i=()=>o}function a(o=i(),l){let c=[s[l.type],...r.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[n]),c.reduce((d,h)=>{if(h)if(yt(d)){const p=h(d,l);return p===void 0?d:p}else{if(st(d))return Wy(d,f=>h(f,l));{const f=h(d,l);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},o)}return a.getInitialState=i,a}var JI=Symbol.for("rtk-slice-createasyncthunk");function YI(e,t){return`${e}/${t}`}function QI({creators:e}={}){const t=e?.asyncThunk?.[JI];return function(r){const{name:n,reducerPath:i=n}=r;if(!n)throw new Error(ft(11));const a=(typeof r.reducers=="function"?r.reducers(eO()):r.reducers)||{},o=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(v,S){const k=typeof v=="string"?v:v.type;if(!k)throw new Error(ft(12));if(k in l.sliceCaseReducersByType)throw new Error(ft(13));return l.sliceCaseReducersByType[k]=S,c},addMatcher(v,S){return l.sliceMatchers.push({matcher:v,reducer:S}),c},exposeAction(v,S){return l.actionCreators[v]=S,c},exposeCaseReducer(v,S){return l.sliceCaseReducersByName[v]=S,c}};o.forEach(v=>{const S=a[v],k={reducerName:v,type:YI(n,v),createNotation:typeof r.reducers=="function"};sO(S)?nO(k,S,c,t):tO(k,S,c)});function d(){const[v={},S=[],k=void 0]=typeof r.extraReducers=="function"?Qy(r.extraReducers):[r.extraReducers],T={...v,...l.sliceCaseReducersByType};return WI(r.initialState,C=>{for(let _ in T)C.addCase(_,T[_]);for(let _ of l.sliceMatchers)C.addMatcher(_.matcher,_.reducer);for(let _ of S)C.addMatcher(_.matcher,_.reducer);k&&C.addDefaultCase(k)})}const h=v=>v,f=new Map,p=new WeakMap;let m;function g(v,S){return m||(m=d()),m(v,S)}function y(){return m||(m=d()),m.getInitialState()}function w(v,S=!1){function k(C){let _=C[v];return typeof _>"u"&&S&&(_=un(p,k,y)),_}function T(C=h){const _=un(f,S,()=>new WeakMap);return un(_,C,()=>{const A={};for(const[E,j]of Object.entries(r.selectors??{}))A[E]=XI(j,C,()=>un(p,C,y),S);return A})}return{reducerPath:v,getSelectors:T,get selectors(){return T(k)},selectSlice:k}}const x={name:n,reducer:g,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:y,...w(i),injectInto(v,{reducerPath:S,...k}={}){const T=S??i;return v.inject({reducerPath:T,reducer:g},k),{...x,...w(T,!0)}}};return x}}function XI(e,t,s,r){function n(i,...a){let o=t(i);return typeof o>"u"&&r&&(o=s()),e(o,...a)}return n.unwrapped=e,n}var ZI=QI();function eO(){function e(t,s){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...s}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...s){return t(...s)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,s){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:s}},asyncThunk:e}}function tO({type:e,reducerName:t,createNotation:s},r,n){let i,a;if("reducer"in r){if(s&&!rO(r))throw new Error(ft(17));i=r.reducer,a=r.prepare}else i=r;n.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,a?Nh(e,a):Nh(e))}function sO(e){return e._reducerDefinitionType==="asyncThunk"}function rO(e){return e._reducerDefinitionType==="reducerWithPrepare"}function nO({type:e,reducerName:t},s,r,n){if(!n)throw new Error(ft(18));const{payloadCreator:i,fulfilled:a,pending:o,rejected:l,settled:c,options:d}=s,h=n(e,i,d);r.exposeAction(t,h),a&&r.addCase(h.fulfilled,a),o&&r.addCase(h.pending,o),l&&r.addCase(h.rejected,l),c&&r.addMatcher(h.settled,c),r.exposeCaseReducer(t,{fulfilled:a||dn,pending:o||dn,rejected:l||dn,settled:c||dn})}function dn(){}function ft(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const iO={user:null,isAuthenticated:!1,loading:!1,error:null},Xy=ZI({name:"auth",initialState:iO,reducers:{loginStart:e=>{e.loading=!0,e.error=null},loginSuccess:(e,t)=>{e.loading=!1,e.isAuthenticated=!0,e.user=t.payload},loginFailure:(e,t)=>{e.loading=!1,e.error=t.payload},logout:e=>{e.user=null,e.isAuthenticated=!1,e.loading=!1,e.error=null}}}),{loginStart:aO,loginSuccess:Zy,loginFailure:oO,logout:Ti}=Xy.actions,e0=Xy.reducer,mN=Object.freeze(Object.defineProperty({__proto__:null,default:e0,loginFailure:oO,loginStart:aO,loginSuccess:Zy,logout:Ti},Symbol.toStringTag,{value:"Module"}));var $s;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})($s||($s={}));class Ca extends Error{constructor(t,s,r){super(t),this.message=t,this.code=s,this.data=r}}const lO=e=>{var t,s;return e?.androidBridge?"android":!((s=(t=e?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},cO=e=>{const t=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},r=s.Plugins=s.Plugins||{},n=()=>t!==null?t.name:lO(e),i=()=>n()!=="web",a=h=>{const f=c.get(h);return!!(f?.platforms.has(n())||o(h))},o=h=>{var f;return(f=s.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},l=h=>e.console.error(h),c=new Map,d=(h,f={})=>{const p=c.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const m=n(),g=o(h);let y;const w=async()=>(!y&&m in f?y=typeof f[m]=="function"?y=await f[m]():y=f[m]:t!==null&&!y&&"web"in f&&(y=typeof f.web=="function"?y=await f.web():y=f.web),y),x=(_,A)=>{var E,j;if(g){const M=g?.methods.find(V=>A===V.name);if(M)return M.rtype==="promise"?V=>s.nativePromise(h,A.toString(),V):(V,Q)=>s.nativeCallback(h,A.toString(),V,Q);if(_)return(E=_[A])===null||E===void 0?void 0:E.bind(_)}else{if(_)return(j=_[A])===null||j===void 0?void 0:j.bind(_);throw new Ca(`"${h}" plugin is not implemented on ${m}`,$s.Unimplemented)}},v=_=>{let A;const E=(...j)=>{const M=w().then(V=>{const Q=x(V,_);if(Q){const F=Q(...j);return A=F?.remove,F}else throw new Ca(`"${h}.${_}()" is not implemented on ${m}`,$s.Unimplemented)});return _==="addListener"&&(M.remove=async()=>A()),M};return E.toString=()=>`${_.toString()}() { [capacitor code] }`,Object.defineProperty(E,"name",{value:_,writable:!1,configurable:!1}),E},S=v("addListener"),k=v("removeListener"),T=(_,A)=>{const E=S({eventName:_},A),j=async()=>{const V=await E;k({eventName:_,callbackId:V},A)},M=new Promise(V=>E.then(()=>V({remove:j})));return M.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await j()},M},C=new Proxy({},{get(_,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?T:S;case"removeListener":return k;default:return v(A)}}});return r[h]=C,c.set(h,{name:h,proxy:C,platforms:new Set([...Object.keys(f),...g?[m]:[]])}),C};return s.convertFileSrc||(s.convertFileSrc=h=>h),s.getPlatform=n,s.handleError=l,s.isNativePlatform=i,s.isPluginAvailable=a,s.registerPlugin=d,s.Exception=Ca,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},uO=e=>e.Capacitor=cO(e),Mr=uO(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ys=Mr.registerPlugin;class dc{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,s){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(s);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,s);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,s,r){const n=this.listeners[t];if(!n){if(r){let i=this.retainedEventArguments[t];i||(i=[]),i.push(s),this.retainedEventArguments[t]=i}return}n.forEach(i=>i(s))}hasListeners(t){var s;return!!(!((s=this.listeners[t])===null||s===void 0)&&s.length)}registerWindowListener(t,s){this.windowListeners[s]={registered:!1,windowEventName:t,pluginEventName:s,handler:r=>{this.notifyListeners(s,r)}}}unimplemented(t="not implemented"){return new Mr.Exception(t,$s.Unimplemented)}unavailable(t="not available"){return new Mr.Exception(t,$s.Unavailable)}async removeListener(t,s){const r=this.listeners[t];if(!r)return;const n=r.indexOf(s);this.listeners[t].splice(n,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const s=this.retainedEventArguments[t];s&&(delete this.retainedEventArguments[t],s.forEach(r=>{this.notifyListeners(t,r)}))}}const Dh=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Lh=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class dO extends dc{async getCookies(){const t=document.cookie,s={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[n,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=Lh(n).trim(),i=Lh(i).trim(),s[n]=i}),s}async setCookie(t){try{const s=Dh(t.key),r=Dh(t.value),n=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${s}=${r||""}${n}; path=${i}; ${a};`}catch(s){return Promise.reject(s)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const s of t)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Ys("CapacitorCookies",{web:()=>new dO});const hO=async e=>new Promise((t,s)=>{const r=new FileReader;r.onload=()=>{const n=r.result;t(n.indexOf(",")>=0?n.split(",")[1]:n)},r.onerror=n=>s(n),r.readAsDataURL(e)}),fO=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(n=>n.toLocaleLowerCase()).reduce((n,i,a)=>(n[i]=e[t[a]],n),{})},pO=(e,t=!0)=>e?Object.entries(e).reduce((r,n)=>{const[i,a]=n;let o,l;return Array.isArray(a)?(l="",a.forEach(c=>{o=t?encodeURIComponent(c):c,l+=`${i}=${o}&`}),l.slice(0,-1)):(o=t?encodeURIComponent(a):a,l=`${i}=${o}`),`${r}&${l}`},"").substr(1):null,mO=(e,t={})=>{const s=Object.assign({method:e.method||"GET",headers:e.headers},t),n=fO(e.headers)["content-type"]||"";if(typeof e.data=="string")s.body=e.data;else if(n.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,o]of Object.entries(e.data||{}))i.set(a,o);s.body=i.toString()}else if(n.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((o,l)=>{i.append(l,o)});else for(const o of Object.keys(e.data))i.append(o,e.data[o]);s.body=i;const a=new Headers(s.headers);a.delete("content-type"),s.headers=a}else(n.includes("application/json")||typeof e.data=="object")&&(s.body=JSON.stringify(e.data));return s};class gO extends dc{async request(t){const s=mO(t,t.webFetchExtra),r=pO(t.params,t.shouldEncodeUrlParams),n=r?`${t.url}?${r}`:t.url,i=await fetch(n,s),a=i.headers.get("content-type")||"";let{responseType:o="text"}=i.ok?t:{};a.includes("application/json")&&(o="json");let l,c;switch(o){case"arraybuffer":case"blob":c=await i.blob(),l=await hO(c);break;case"json":l=await i.json();break;default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Ys("CapacitorHttp",{web:()=>new gO});var Uh;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Uh||(Uh={}));var Fh;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(Fh||(Fh={}));class yO extends dc{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Ys("SystemBars",{web:()=>new yO});const Vt=Ys("PushNotifications",{}),vO=async()=>{if(!Mr.isNativePlatform())return;let e=await Vt.checkPermissions();if(e.receive==="prompt"&&(e=await Vt.requestPermissions()),e.receive!=="granted"){console.error("User denied permissions!");return}await Vt.register(),Vt.addListener("registration",t=>{}),Vt.addListener("registrationError",t=>{console.error("Error on registration: "+JSON.stringify(t))}),Vt.addListener("pushNotificationReceived",t=>{alert(`Mensaje de Richard Auto: ${t.title}
${t.body}`)}),Vt.addListener("pushNotificationActionPerformed",t=>{})};function bO(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,s){return new Proxy({},{get(r,n){return(i,a,o)=>{const l=e.Capacitor.Plugins[s];if(l===void 0){o(new Error(`Capacitor plugin ${s} not found`));return}if(typeof l[n]!="function"){o(new Error(`Method ${n} not found in Capacitor plugin ${s}`));return}(async()=>{try{const c=await l[n](i);a(c)}catch(c){o(c)}})()}}})}})}function wO(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,s){return e.cordova.plugins[s]}})}function xO(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?bO(window):window.cordova!==void 0&&wO(window))}const Vh=Ys("Geolocation",{web:()=>q(()=>import("./web-Cb26tupp.js"),__vite__mapDeps([7,1,2])).then(e=>new e.GeolocationWeb)});xO();var Bh;(function(e){e[e.Sunday=1]="Sunday",e[e.Monday=2]="Monday",e[e.Tuesday=3]="Tuesday",e[e.Wednesday=4]="Wednesday",e[e.Thursday=5]="Thursday",e[e.Friday=6]="Friday",e[e.Saturday=7]="Saturday"})(Bh||(Bh={}));const t0=Ys("LocalNotifications",{web:()=>q(()=>import("./web-tsxwyc3c.js"),__vite__mapDeps([8,1,2])).then(e=>new e.LocalNotificationsWeb)}),zh={latitude:18.3986,longitude:-66.1557},_O=500;function SO(e,t,s,r){const i=hn(s-e),a=hn(r-t),o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(hn(e))*Math.cos(hn(s))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))*1e3}function hn(e){return e*(Math.PI/180)}const kO=async()=>{if(!Mr.isNativePlatform()){console.log("Geofencing skipped (Web Platform)");return}try{const e=await t0.requestPermissions(),t=await Vh.requestPermissions();if(e.display!=="granted"||t.location!=="granted"){console.log("Permissions denied for Geofencing");return}Vh.watchPosition({enableHighAccuracy:!0,timeout:5e3},s=>{if(s){const r=SO(s.coords.latitude,s.coords.longitude,zh.latitude,zh.longitude);console.log(`Distance to dealer: ${Math.floor(r)}m`),r<_O&&EO()}})}catch(e){console.error("Geofence Error:",e)}};let qh=0;const EO=async()=>{const e=Date.now();e-qh<36e5||(qh=e,await t0.schedule({notifications:[{title:" Bienvenido a Richard Auto!",body:"Abre tu App para ver las ofertas exclusivas de hoy.",id:1,schedule:{at:new Date(Date.now()+100)},sound:void 0,attachments:void 0,actionTypeId:"",extra:null}]}))},TO=[{name:"Hyundai Tucson 2026",price:39500,type:"suv",badge:"Rediseado",img:"https://images.unsplash.com/photo-1695221971766-3d778d910dc7?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Elantra 2026",price:28900,type:"sedan",badge:"Deportivo",img:"https://images.unsplash.com/photo-1609520505218-7421da3b3d80?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Venue 2026",price:24500,type:"suv",badge:"Compacto",img:"https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?q=80&w=1200&auto=format&fit=crop",featured:!1},{name:"Hyundai Santa Fe 2026",price:44200,type:"suv",badge:"Ms Espacio",img:"https://images.unsplash.com/photo-1631522858632-1b157bd752e2?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Palisade 2026",price:58900,type:"luxury",badge:"Flagship",img:"https://images.unsplash.com/photo-1647494480572-c2834b6e56ad?q=80&w=1200&auto=format&fit=crop",featured:!0}],CO=()=>{const{theme:e,toggleTheme:t}=b.useContext(nc);return u.jsx("button",{onClick:t,"aria-label":`Activar modo ${e==="light"?"oscuro":"claro"}`,className:"p-2 rounded-full text-slate-400 hover:text-white hover:bg-white/10 transition-colors",children:e==="light"?u.jsx(Q_,{size:18}):u.jsx(iS,{size:18})})};var pe=(e=>(e.STOREFRONT="storefront",e.ADMIN="admin",e.AI_CONSULTANT="ai_consultant",e.AI_LAB="ai_lab",e.BLOG="blog",e.DIGITAL_GARAGE="digital_garage",e.PRE_QUALIFY="pre_qualify",e.TRADE_IN="trade_in",e.CHAT="chat",e.CODE_ANALYZER="code_analyzer",e.IMAGES="images",e.VIDEO_STUDIO="video_studio",e.VOICE_ASSISTANT="voice_assistant",e.DEVOPS="devops",e.SETTINGS="settings",e.DIGITAL_TWIN="digital_twin",e))(pe||{});const AO=({isMobileOpen:e,setIsMobileOpen:t})=>{const s=Ds(),r=Vo(),n=ac(),{user:i}=vi(d=>d.auth),a=i?.role||"user",o=async()=>{try{const{signOutUser:d}=await q(async()=>{const{signOutUser:h}=await Promise.resolve().then(()=>XT);return{signOutUser:h}},void 0);await d(),n(Ti()),s("/")}catch(d){console.error("Logout error",d)}},c=(()=>{const d=r.pathname;return d.startsWith("/admin")?pe.ADMIN:d==="/garage"?pe.DIGITAL_GARAGE:d==="/qualify"?pe.PRE_QUALIFY:d==="/consultant"?pe.AI_CONSULTANT:d==="/blog"?pe.BLOG:d==="/trade-in"?pe.TRADE_IN:d==="/lab"?pe.AI_LAB:d==="/digital-twin"?pe.DIGITAL_TWIN:d==="/framework-lab"?"framework-lab":d.startsWith("/login")?"login":pe.STOREFRONT})();return u.jsxs("nav",{className:"fixed inset-y-0 left-0 w-72 bg-[#173d57]/95 dark:bg-[#0d2232]/95 backdrop-blur-2xl border-r border-white/5 text-white flex flex-col shadow-2xl z-40 transform transition-transform duration-300 lg:translate-x-0 lg:static lg:h-screen pointer-events-auto "+(e?"translate-x-0":"-translate-x-full"),children:[u.jsx("div",{className:"p-10 flex justify-between items-center cursor-pointer group",onClick:()=>s("/"),children:u.jsxs("h1",{className:"text-3xl font-black tracking-tighter leading-none group-hover:scale-105 transition-transform",children:[u.jsx("span",{className:"text-[#00aed9]",children:"RICHARD"}),u.jsx("br",{}),"AUTOMOTIVE"]})}),u.jsxs("div",{className:"flex-1 px-6 space-y-2 overflow-y-auto custom-scrollbar",children:[u.jsx(rt,{active:c===pe.STOREFRONT,onClick:()=>{s("/"),t(!1)},icon:u.jsx(nS,{size:20}),label:"Tienda Digital"}),u.jsx(rt,{active:c===pe.DIGITAL_GARAGE,onClick:()=>{s("/garage"),t(!1)},icon:u.jsx(cS,{size:20}),label:"Mi Garaje"}),u.jsx(rt,{active:c===pe.PRE_QUALIFY,onClick:()=>{s("/qualify"),t(!1)},icon:u.jsx(U_,{size:20}),label:"Pre-Cualificacin"}),u.jsx(rt,{active:c===pe.TRADE_IN,onClick:()=>{s("/trade-in"),t(!1)},icon:u.jsx(Kp,{size:20}),label:"Vender mi Auto"}),u.jsx(rt,{active:c===pe.AI_CONSULTANT,onClick:()=>{s("/consultant"),t(!1)},icon:u.jsx(T_,{size:20}),label:"Consultor IA"}),u.jsx(rt,{active:c===pe.BLOG,onClick:()=>{s("/blog"),t(!1)},icon:u.jsx(Z_,{size:20}),label:"AI Newsroom"}),a==="admin"&&u.jsx(rt,{active:r.pathname==="/framework-lab",onClick:()=>{s("/framework-lab"),t(!1)},icon:u.jsx(O_,{size:20,className:"text-cyan-400"}),label:"Framework Lab"}),a==="admin"&&u.jsx(rt,{active:c===pe.DIGITAL_TWIN,onClick:()=>{s("/digital-twin"),t(!1)},icon:u.jsx(Ya,{size:20}),label:"Gemelo Digital"}),u.jsx("div",{className:"pt-4 my-2 border-t border-white/5"}),i?u.jsxs("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-white/10 shadow-inner",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#00aed9] to-cyan-600 flex items-center justify-center text-white shadow-lg shadow-cyan-500/20",children:u.jsx(Ya,{size:18})}),u.jsxs("div",{className:"overflow-hidden",children:[u.jsx("p",{className:"text-xs font-black truncate text-white uppercase tracking-tight",children:i.email}),u.jsx("p",{className:"text-[10px] uppercase tracking-widest text-[#00aed9] font-black",children:a==="admin"?"Administrador":"Usuario"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[u.jsxs("button",{onClick:o,className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-red-500/10 text-red-400 hover:bg-red-500/20 text-[10px] font-black uppercase tracking-wider transition-all active:scale-95 border border-red-500/10",children:[u.jsx(K_,{size:14})," Salir"]}),a==="admin"&&u.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 hover:bg-cyan-500/20 text-[10px] font-black uppercase tracking-wider transition-all active:scale-95 border border-cyan-500/10",children:[u.jsx(em,{size:14})," Admin"]})]})]}):u.jsx(rt,{active:!1,onClick:()=>{s("/login"),t(!1)},icon:u.jsx(H_,{size:20}),label:"Iniciar Sesin",isAction:!0}),u.jsx("div",{className:"pt-2 my-2 border-t border-white/5"}),u.jsx(rt,{active:c===pe.AI_LAB,onClick:()=>{s("/lab"),t(!1)},icon:u.jsx(F_,{size:20}),label:"Laboratorio IA",highlight:!0})]}),u.jsx("div",{className:"p-6 border-t border-white/5 bg-black/10 backdrop-blur-md",children:u.jsx(CO,{})})]})},rt=({active:e,onClick:t,icon:s,label:r,isAction:n=!1,highlight:i=!1})=>{let a="w-full flex items-center gap-4 px-5 py-4 rounded-2xl font-bold transition-all duration-300 group relative overflow-hidden ";return e?a+="bg-[#00aed9] text-white shadow-xl shadow-[#00aed9]/20":i?a+="bg-gradient-to-r from-amber-500/20 to-orange-600/20 text-amber-500 border border-amber-500/30 hover:shadow-lg hover:shadow-orange-500/20":n?a+="bg-gradient-to-r from-[#00aed9]/10 to-[#00aed9]/5 text-[#00aed9] hover:bg-[#00aed9]/20":a+="text-slate-400 hover:bg-white/5 hover:text-white",u.jsxs("button",{onClick:t,className:a,children:[u.jsx("div",{className:`absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${e?"hidden":""}`}),u.jsx("span",{className:"relative z-10",children:s}),u.jsx("span",{className:"relative z-10",children:r}),e&&u.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white rounded-l-full"})]})},RO=()=>{const e=ac();b.useEffect(()=>{const t=lf(oe,async s=>{e(s?Zy({uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,role:kl(s.email)?"admin":"user"}):Ti())});return()=>t()},[e])},jO=(e=9,t="all")=>wf({queryKey:["cars",t],queryFn:async({pageParam:s})=>await pl(e,s,t),initialPageParam:null,getNextPageParam:s=>s.hasMore?s.lastDoc:void 0}),PO=()=>{const e=Yo(),t=Ri({mutationFn:Fp,onSuccess:()=>{e.invalidateQueries({queryKey:["cars"]})}}),s=Ri({mutationFn:Vp,onSuccess:()=>{e.invalidateQueries({queryKey:["cars"]})}}),r=Ri({mutationFn:Bp,onSuccess:()=>{e.invalidateQueries({queryKey:["cars"]})}});return{addCar:t.mutateAsync,updateCar:s.mutateAsync,deleteCar:r.mutateAsync,isPending:t.isPending||s.isPending||r.isPending,error:t.error||s.error||r.error}},IO=K.lazy(()=>q(()=>import("./AdminPanel-DcKFul1X.js"),__vite__mapDeps([9,1,10,11,12,13,2,14,15,16,17]))),OO=K.lazy(()=>q(()=>import("./DigitalTwinDashboard-D9aVEXMF.js"),__vite__mapDeps([18,1,14,2]))),NO=K.lazy(()=>q(()=>import("./AIConsultant-LjTsjYEG.js"),__vite__mapDeps([19,1,2]))),MO=K.lazy(()=>q(()=>import("./AILabView-f4fbmZFL.js"),__vite__mapDeps([20,1,14,2]))),$O=K.lazy(()=>q(()=>import("./UserLogin-qhRapmuS.js"),__vite__mapDeps([21,1,2]))),DO=K.lazy(()=>q(()=>import("./VehicleDetail-BRovqlcR.js"),__vite__mapDeps([22,1,2,10]))),LO=K.lazy(()=>q(()=>import("./TradeInView-DZ7BkJXk.js"),__vite__mapDeps([23,1,24,2]))),UO=K.lazy(()=>q(()=>import("./AppraisalView-DB6FN_V4.js"),__vite__mapDeps([25,1,2]))),FO=K.lazy(()=>q(()=>import("./ComparisonView-B4sBsbhu.js"),__vite__mapDeps([26,1,24,2]))),VO=K.lazy(()=>q(()=>import("./AdminLogin-whyo8557.js"),__vite__mapDeps([27,1,2,16,11,28,12,29]))),BO=K.lazy(()=>q(()=>import("./BlogView-s8FfvaFW.js"),__vite__mapDeps([30,1,2]))),zO=K.lazy(()=>q(()=>import("./DigitalGarage-CSPWL_sh.js"),__vite__mapDeps([31,1,24,29,11,32,2]))),qO=K.lazy(()=>q(()=>import("./PreQualifyView-BKklxe-c.js"),__vite__mapDeps([33,1,24,11,28,12,2]))),GO=K.lazy(()=>q(()=>import("./PrivacyView-DUic90U1.js"),__vite__mapDeps([34,24,35,1,2]))),HO=K.lazy(()=>q(()=>import("./TermsView-CnJlDhxR.js"),__vite__mapDeps([36,24,32,1,2]))),KO=K.lazy(()=>q(()=>import("./NotFound-BjckoYng.js"),__vite__mapDeps([37,1,24,2]))),WO=K.lazy(()=>q(()=>import("./FrameworkDashboard-DDyx09qf.js"),__vite__mapDeps([38,1,2,35,11,17,39,14]))),JO=K.lazy(()=>q(()=>import("./KanbanDemo-BWUpDcyE.js"),__vite__mapDeps([40,15,1,16,2]))),YO=K.lazy(()=>q(()=>import("./BetaOnboard-QDvz_pOT.js"),__vite__mapDeps([41,1,39,2]))),QO=K.lazy(()=>q(()=>import("./EarlyAdopterOnboard-B1oLcRyB.js"),__vite__mapDeps([42,1,10,2]))),XO=K.lazy(()=>q(()=>import("./B2BBillingDashboard-C5CMw6MW.js").then(e=>e.a),__vite__mapDeps([13,1,2,10,14]))),s0=()=>u.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0d2232] text-white relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-cyan-900/20 to-[#0d2232]"}),u.jsxs("div",{className:"z-10 flex flex-col items-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-cyan-500/30 border-t-cyan-400 rounded-full animate-spin mb-6 shadow-[0_0_30px_rgba(0,174,217,0.3)]"}),u.jsxs("h1",{className:"text-2xl font-black tracking-tighter mb-2",children:["RICHARD ",u.jsx("span",{className:"text-[#00aed9]",children:"AUTOMOTIVE"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),u.jsx("p",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400",children:"Initializing System v2.7"})]})]})]}),Gh=({children:e})=>{const{user:t,loading:s}=vi(n=>n.auth),r=Vo();return s?u.jsx("div",{className:"p-10 flex justify-center",children:u.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-cyan-500 rounded-full border-t-transparent"})}):t?u.jsx(u.Fragment,{children:e}):u.jsx(Kh,{to:"/login",state:{from:r},replace:!0})},fn=({children:e})=>{const{user:t,loading:s}=vi(c=>c.auth),[r,n]=b.useState(!0),i=Ds(),a=ac();b.useEffect(()=>{let c;return q(async()=>{const{auth:d}=await Promise.resolve().then(()=>x_);return{auth:d}},void 0).then(({auth:d})=>{c=d.onAuthStateChanged(h=>{n(!1)})}),()=>c?.()},[]);const o=()=>{a(Ti()),i("/")};return s||r?u.jsx(s0,{}):t?(t.role||"user")!=="admin"?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center bg-slate-50 dark:bg-slate-900",children:[u.jsx(em,{size:48,className:"text-red-500 mb-6"}),u.jsx("h2",{className:"text-3xl font-black text-slate-800 dark:text-white uppercase mb-2",children:"Acceso Denegado"}),u.jsx("p",{className:"text-slate-500 max-w-md mb-8",children:"Nivel de seguridad insuficiente para esta seccin."}),u.jsx("button",{onClick:o,className:"px-8 py-3 bg-slate-800 text-white rounded-xl font-bold uppercase",children:"Cerrar Sesin"})]}):u.jsx(u.Fragment,{children:e}):(console.warn("[AdminGuard] No active session, redirecting to login."),u.jsx(Kh,{to:"/admin-login",replace:!0}))},ZO=()=>{const[e,t]=b.useState(!1),[s,r]=b.useState(null),{theme:n}=b.useContext(nc),{user:i}=vi(w=>w.auth);RO();const{data:a,fetchNextPage:o,hasNextPage:l,isLoading:c,isFetchingNextPage:d}=jO(12),h=a?.pages.flatMap(w=>w.cars)||[],{addCar:f,updateCar:p,deleteCar:m}=PO(),{addNotification:g}=JP(),y=Ds();return b.useEffect(()=>{const w=window.document.documentElement;w.classList.remove("light","dark"),w.classList.add(n)},[n]),b.useEffect(()=>{vO(),kO(),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(w){for(let x of w)console.log(" Force Unregistering SW:",x),x.unregister()})},[]),u.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-slate-50 dark:bg-slate-900 overflow-hidden relative",children:[u.jsxs("div",{className:"lg:hidden p-4 bg-[#173d57] text-white flex justify-between items-center shadow-md z-50",children:[u.jsxs("span",{className:"font-black text-xl tracking-tight",children:["RICHARD",u.jsx("span",{className:"text-[#00aed9]",children:"AUTO"})]}),u.jsx("button",{onClick:()=>t(!e),children:u.jsx(W_,{})})]}),u.jsx(AO,{isMobileOpen:e,setIsMobileOpen:t}),u.jsxs("main",{className:"flex-1 relative w-full h-screen overflow-y-auto bg-slate-950 text-slate-100",children:[u.jsx(GP,{}),u.jsx(HP,{}),u.jsx(jm,{inventory:h})," ",u.jsx(FP,{})," ",u.jsx(b.Suspense,{fallback:u.jsx(s0,{}),children:u.jsxs(l0,{children:[u.jsx(te,{path:"/",element:u.jsx(UP,{inventory:h,initialVisualSearch:s,onClearVisualSearch:()=>r(null),onMagicFix:void 0,onOpenGarage:()=>y("/garage")})}),u.jsx(te,{path:"/vehicle/:id",element:u.jsx(DO,{inventory:h})}),u.jsx(te,{path:"/trade-in",element:u.jsx(LO,{})}),u.jsx(te,{path:"/appraisal",element:u.jsx(UO,{})}),u.jsx(te,{path:"/compare",element:u.jsx(FO,{})}),u.jsx(te,{path:"/garage",element:u.jsx(Gh,{children:u.jsx(zO,{inventory:h,onExit:()=>y("/")})})}),u.jsx(te,{path:"/qualify",element:u.jsx(qO,{onExit:()=>y("/")})}),u.jsx(te,{path:"/privacidad",element:u.jsx(GO,{})}),u.jsx(te,{path:"/terminos",element:u.jsx(HO,{})}),u.jsx(te,{path:"/consultant",element:u.jsx(NO,{inventory:h})}),u.jsx(te,{path:"/blog",element:u.jsx(BO,{})}),u.jsx(te,{path:"/lab",element:u.jsx(Gh,{children:u.jsx(MO,{onExit:()=>y("/")})})}),u.jsx(te,{path:"/login",element:u.jsx($O,{})}),u.jsx(te,{path:"/admin-login",element:u.jsx(VO,{})}),u.jsx(te,{path:"/admin",element:u.jsx(fn,{children:u.jsx(IO,{inventory:h,onUpdate:p,onAdd:f,onDelete:m,onInitializeDb:()=>zp(TO)})})}),u.jsx(te,{path:"/framework-lab",element:u.jsx(fn,{children:u.jsx(WO,{})})}),u.jsx(te,{path:"/digital-twin",element:u.jsx(fn,{children:u.jsx(OO,{})})}),u.jsx(te,{path:"/kanban-demo",element:u.jsx(JO,{})}),u.jsx(te,{path:"/debug-onboard",element:u.jsx(YO,{})}),u.jsx(te,{path:"/coo-provision",element:u.jsx(QO,{})}),u.jsx(te,{path:"/admin/billing",element:u.jsx(fn,{children:u.jsx(XO,{})})}),u.jsx(te,{path:"*",element:u.jsx(KO,{})})]})}),u.jsx(VP,{})]})]})},eN=({children:e})=>{const t=!!(window.Capacitor&&window.Capacitor.isNative),s=t?a0:o0;return b.useEffect(()=>{console.log(`[SmartRouter] Active mode: ${t?"HashRouter (Native/Capacitor)":"BrowserRouter (Web)"}`)},[t]),u.jsx(s,{children:e})},tN=()=>u.jsx(qf,{children:u.jsx(BP,{children:u.jsx(ZT,{children:u.jsx(WP,{children:u.jsx(zj,{children:u.jsxs(eN,{children:[u.jsx(ZO,{}),u.jsx(KP,{})]})})})})})}),sN=HI({reducer:{auth:e0}});ob();const rN=new ov({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}}),r0=document.getElementById("root");if(!r0)throw new Error("Could not find root element to mount to");const nN=M0.createRoot(r0);nN.render(u.jsx(K.StrictMode,{children:u.jsx(hI,{store:sN,children:u.jsx(DP,{children:u.jsx(lv,{client:rN,children:u.jsx(tN,{})})})})}));export{zT as $,Hp as A,C_ as B,Kp as C,wy as D,oe as E,ac as F,Zy as G,jv as H,z_ as I,em as J,aO as K,gn as L,JT as M,Z_ as N,oO as O,QT as P,LP as Q,Fp as R,vr as S,Yp as T,Ya as U,qT as V,dc as W,mt as X,BT as Y,tm as Z,q as _,gl as a,FT as a0,VT as a1,O_ as a2,Ys as a3,Mr as a4,Mn as a5,Jp as a6,Sl as a7,TT as a8,Zp as a9,Un as aa,he as ab,$_ as ac,N_ as ad,ml as ae,dN as af,m_ as ag,Rm as ah,v_ as ai,Y_ as aj,Ca as ak,_T as al,Up as am,vi as an,M_ as ao,tS as ap,G_ as aq,f_ as ar,K_ as as,b_ as at,Xp as au,Gp as av,fN as aw,x_ as ax,XT as ay,mN as az,R_ as b,rS as c,P as d,j_ as e,ui as f,CT as g,E_ as h,y_ as i,u as j,Rv as k,Ov as l,lN as m,cN as n,sS as o,Em as p,p_ as q,uN as r,w_ as s,RR as t,JP as u,yy as v,P_ as w,Nn as x,lu as y,AT as z};
