const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminPanel-D4c0Zz1S.js","assets/trending-up-IjGK3and.js","assets/eye-CvM3cTGx.js","assets/trash-2-DChAlQjK.js","assets/mail-UnV0u4sH.js","assets/AILabView-qdu_3yTZ.js","assets/arrow-left-C0EeSZrq.js","assets/activity-YsluUPcj.js","assets/VehicleDetail-CWrhaxIG.js","assets/proxy-D4P4w9Jr.js","assets/TradeInView-OdM8Y0me.js","assets/AppraisalView-CLbn5gG7.js","assets/ComparisonView-DZsPTSM0.js","assets/AdminLogin-BJsh_iXw.js","assets/lock-BhpY6d-3.js","assets/eye-off-DbLnScz5.js","assets/scan-face-BTG4FPZ1.js","assets/DigitalGarage-Ddxl24_C.js","assets/file-text-CyoAnTGE.js","assets/PreQualifyView-B30D6vEF.js","assets/PrivacyView-zAkEn1EY.js","assets/shield-CtHdJ923.js","assets/TermsView-ChmAxOcJ.js","assets/NotFound-CZrQuLOL.js","assets/FrameworkDashboard-Hwoa4xMa.js","assets/FrameworkDashboard--8KdJ764.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var N6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $x(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xm={exports:{}},$c={},Im={exports:{}},xt={};var hw;function FA(){if(hw)return xt;hw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function T(z){return z===null||typeof z!="object"?null:(z=w&&z[w]||z["@@iterator"],typeof z=="function"?z:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,M={};function O(z,oe,Ge){this.props=z,this.context=oe,this.refs=M,this.updater=Ge||S}O.prototype.isReactComponent={},O.prototype.setState=function(z,oe){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,oe,"setState")},O.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function X(){}X.prototype=O.prototype;function W(z,oe,Ge){this.props=z,this.context=oe,this.refs=M,this.updater=Ge||S}var Q=W.prototype=new X;Q.constructor=W,P(Q,O.prototype),Q.isPureReactComponent=!0;var ae=Array.isArray,de=Object.prototype.hasOwnProperty,me={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(z,oe,Ge){var rt,pt={},_t=null,St=null;if(oe!=null)for(rt in oe.ref!==void 0&&(St=oe.ref),oe.key!==void 0&&(_t=""+oe.key),oe)de.call(oe,rt)&&!N.hasOwnProperty(rt)&&(pt[rt]=oe[rt]);var kt=arguments.length-2;if(kt===1)pt.children=Ge;else if(1<kt){for(var wt=Array(kt),Wt=0;Wt<kt;Wt++)wt[Wt]=arguments[Wt+2];pt.children=wt}if(z&&z.defaultProps)for(rt in kt=z.defaultProps,kt)pt[rt]===void 0&&(pt[rt]=kt[rt]);return{$$typeof:n,type:z,key:_t,ref:St,props:pt,_owner:me.current}}function A(z,oe){return{$$typeof:n,type:z.type,key:oe,ref:z.ref,props:z.props,_owner:z._owner}}function k(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function L(z){var oe={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ge){return oe[Ge]})}var C=/\/+/g;function R(z,oe){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):oe.toString(36)}function ut(z,oe,Ge,rt,pt){var _t=typeof z;(_t==="undefined"||_t==="boolean")&&(z=null);var St=!1;if(z===null)St=!0;else switch(_t){case"string":case"number":St=!0;break;case"object":switch(z.$$typeof){case n:case e:St=!0}}if(St)return St=z,pt=pt(St),z=rt===""?"."+R(St,0):rt,ae(pt)?(Ge="",z!=null&&(Ge=z.replace(C,"$&/")+"/"),ut(pt,oe,Ge,"",function(Wt){return Wt})):pt!=null&&(k(pt)&&(pt=A(pt,Ge+(!pt.key||St&&St.key===pt.key?"":(""+pt.key).replace(C,"$&/")+"/")+z)),oe.push(pt)),1;if(St=0,rt=rt===""?".":rt+":",ae(z))for(var kt=0;kt<z.length;kt++){_t=z[kt];var wt=rt+R(_t,kt);St+=ut(_t,oe,Ge,wt,pt)}else if(wt=T(z),typeof wt=="function")for(z=wt.call(z),kt=0;!(_t=z.next()).done;)_t=_t.value,wt=rt+R(_t,kt++),St+=ut(_t,oe,Ge,wt,pt);else if(_t==="object")throw oe=String(z),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return St}function Je(z,oe,Ge){if(z==null)return z;var rt=[],pt=0;return ut(z,rt,"","",function(_t){return oe.call(Ge,_t,pt++)}),rt}function hn(z){if(z._status===-1){var oe=z._result;oe=oe(),oe.then(function(Ge){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ge)},function(Ge){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ge)}),z._status===-1&&(z._status=0,z._result=oe)}if(z._status===1)return z._result.default;throw z._result}var ft={current:null},ve={transition:null},$e={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:ve,ReactCurrentOwner:me};function ke(){throw Error("act(...) is not supported in production builds of React.")}return xt.Children={map:Je,forEach:function(z,oe,Ge){Je(z,function(){oe.apply(this,arguments)},Ge)},count:function(z){var oe=0;return Je(z,function(){oe++}),oe},toArray:function(z){return Je(z,function(oe){return oe})||[]},only:function(z){if(!k(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},xt.Component=O,xt.Fragment=t,xt.Profiler=s,xt.PureComponent=W,xt.StrictMode=r,xt.Suspense=d,xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$e,xt.act=ke,xt.cloneElement=function(z,oe,Ge){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var rt=P({},z.props),pt=z.key,_t=z.ref,St=z._owner;if(oe!=null){if(oe.ref!==void 0&&(_t=oe.ref,St=me.current),oe.key!==void 0&&(pt=""+oe.key),z.type&&z.type.defaultProps)var kt=z.type.defaultProps;for(wt in oe)de.call(oe,wt)&&!N.hasOwnProperty(wt)&&(rt[wt]=oe[wt]===void 0&&kt!==void 0?kt[wt]:oe[wt])}var wt=arguments.length-2;if(wt===1)rt.children=Ge;else if(1<wt){kt=Array(wt);for(var Wt=0;Wt<wt;Wt++)kt[Wt]=arguments[Wt+2];rt.children=kt}return{$$typeof:n,type:z.type,key:pt,ref:_t,props:rt,_owner:St}},xt.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},xt.createElement=I,xt.createFactory=function(z){var oe=I.bind(null,z);return oe.type=z,oe},xt.createRef=function(){return{current:null}},xt.forwardRef=function(z){return{$$typeof:u,render:z}},xt.isValidElement=k,xt.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:hn}},xt.memo=function(z,oe){return{$$typeof:p,type:z,compare:oe===void 0?null:oe}},xt.startTransition=function(z){var oe=ve.transition;ve.transition={};try{z()}finally{ve.transition=oe}},xt.unstable_act=ke,xt.useCallback=function(z,oe){return ft.current.useCallback(z,oe)},xt.useContext=function(z){return ft.current.useContext(z)},xt.useDebugValue=function(){},xt.useDeferredValue=function(z){return ft.current.useDeferredValue(z)},xt.useEffect=function(z,oe){return ft.current.useEffect(z,oe)},xt.useId=function(){return ft.current.useId()},xt.useImperativeHandle=function(z,oe,Ge){return ft.current.useImperativeHandle(z,oe,Ge)},xt.useInsertionEffect=function(z,oe){return ft.current.useInsertionEffect(z,oe)},xt.useLayoutEffect=function(z,oe){return ft.current.useLayoutEffect(z,oe)},xt.useMemo=function(z,oe){return ft.current.useMemo(z,oe)},xt.useReducer=function(z,oe,Ge){return ft.current.useReducer(z,oe,Ge)},xt.useRef=function(z){return ft.current.useRef(z)},xt.useState=function(z){return ft.current.useState(z)},xt.useSyncExternalStore=function(z,oe,Ge){return ft.current.useSyncExternalStore(z,oe,Ge)},xt.useTransition=function(){return ft.current.useTransition()},xt.version="18.3.1",xt}var fw;function ay(){return fw||(fw=1,Im.exports=FA()),Im.exports}var pw;function UA(){if(pw)return $c;pw=1;var n=ay(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,p){var y,w={},T=null,S=null;p!==void 0&&(T=""+p),d.key!==void 0&&(T=""+d.key),d.ref!==void 0&&(S=d.ref);for(y in d)r.call(d,y)&&!o.hasOwnProperty(y)&&(w[y]=d[y]);if(u&&u.defaultProps)for(y in d=u.defaultProps,d)w[y]===void 0&&(w[y]=d[y]);return{$$typeof:e,type:u,key:T,ref:S,props:w,_owner:s.current}}return $c.Fragment=t,$c.jsx=l,$c.jsxs=l,$c}var mw;function $A(){return mw||(mw=1,xm.exports=UA()),xm.exports}var g=$A(),gw={},yw;function zA(){if(yw)return gw;yw=1;var n=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=($,U,se)=>U in $?n($,U,{enumerable:!0,configurable:!0,writable:!0,value:se}):$[U]=se,u=($,U)=>{for(var se in U||(U={}))s.call(U,se)&&l($,se,U[se]);if(r)for(var se of r(U))o.call(U,se)&&l($,se,U[se]);return $},d=($,U)=>e($,t(U)),p=($,U,se)=>(l($,typeof U!="symbol"?U+"":U,se),se),y=globalThis;function w($){return(y.__Zone_symbol_prefix||"__zone_symbol__")+$}function T(){const $=y.performance;function U(vt){$&&$.mark&&$.mark(vt)}function se(vt,te){$&&$.measure&&$.measure(vt,te)}U("Zone");const B=class og{constructor(te,ee){p(this,"_parent"),p(this,"_name"),p(this,"_properties"),p(this,"_zoneDelegate"),this._parent=te,this._name=ee?ee.name||"unnamed":"<root>",this._properties=ee&&ee.properties||{},this._zoneDelegate=new ze(this,this._parent&&this._parent._zoneDelegate,ee)}static assertZonePatched(){if(y.Promise!==st.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let te=og.current;for(;te.parent;)te=te.parent;return te}static get current(){return xe.zone}static get currentTask(){return En}static __load_patch(te,ee,J=!1){if(st.hasOwnProperty(te)){const Ne=y[w("forceDuplicateZoneCheck")]===!0;if(!J&&Ne)throw Error("Already loaded patch: "+te)}else if(!y["__Zone_disable_"+te]){const Ne="Zone:"+te;U(Ne),st[te]=ee(y,og,yt),se(Ne,Ne)}}get parent(){return this._parent}get name(){return this._name}get(te){const ee=this.getZoneWith(te);if(ee)return ee._properties[te]}getZoneWith(te){let ee=this;for(;ee;){if(ee._properties.hasOwnProperty(te))return ee;ee=ee._parent}return null}fork(te){if(!te)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,te)}wrap(te,ee){if(typeof te!="function")throw new Error("Expecting function got: "+te);const J=this._zoneDelegate.intercept(this,te,ee),Ne=this;return function(){return Ne.runGuarded(J,this,arguments,ee)}}run(te,ee,J,Ne){xe={parent:xe,zone:this};try{return this._zoneDelegate.invoke(this,te,ee,J,Ne)}finally{xe=xe.parent}}runGuarded(te,ee=null,J,Ne){xe={parent:xe,zone:this};try{try{return this._zoneDelegate.invoke(this,te,ee,J,Ne)}catch(Nt){if(this._zoneDelegate.handleError(this,Nt))throw Nt}}finally{xe=xe.parent}}runTask(te,ee,J){if(te.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(te.zone||Yt).name+"; Execution: "+this.name+")");const Ne=te,{type:Nt,data:{isPeriodic:et=!1,isRefreshable:Zn=!1}={}}=te;if(te.state===We&&(Nt===lt||Nt===$t))return;const Sr=te.state!=gt;Sr&&Ne._transitionTo(gt,Ct);const kr=En;En=Ne,xe={parent:xe,zone:this};try{Nt==$t&&te.data&&!et&&!Zn&&(te.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,Ne,ee,J)}catch(On){if(this._zoneDelegate.handleError(this,On))throw On}}finally{const On=te.state;if(On!==We&&On!==Mt)if(Nt==lt||et||Zn&&On===Te)Sr&&Ne._transitionTo(Ct,gt,Te);else{const _e=Ne._zoneDelegates;this._updateTaskCount(Ne,-1),Sr&&Ne._transitionTo(We,gt,We),Zn&&(Ne._zoneDelegates=_e)}xe=xe.parent,En=kr}}scheduleTask(te){if(te.zone&&te.zone!==this){let J=this;for(;J;){if(J===te.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${te.zone.name}`);J=J.parent}}te._transitionTo(Te,We);const ee=[];te._zoneDelegates=ee,te._zone=this;try{te=this._zoneDelegate.scheduleTask(this,te)}catch(J){throw te._transitionTo(Mt,Te,We),this._zoneDelegate.handleError(this,J),J}return te._zoneDelegates===ee&&this._updateTaskCount(te,1),te.state==Te&&te._transitionTo(Ct,Te),te}scheduleMicroTask(te,ee,J,Ne){return this.scheduleTask(new Ae(Ve,te,ee,J,Ne,void 0))}scheduleMacroTask(te,ee,J,Ne,Nt){return this.scheduleTask(new Ae($t,te,ee,J,Ne,Nt))}scheduleEventTask(te,ee,J,Ne,Nt){return this.scheduleTask(new Ae(lt,te,ee,J,Ne,Nt))}cancelTask(te){if(te.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(te.zone||Yt).name+"; Execution: "+this.name+")");if(!(te.state!==Ct&&te.state!==gt)){te._transitionTo(Ut,Ct,gt);try{this._zoneDelegate.cancelTask(this,te)}catch(ee){throw te._transitionTo(Mt,Ut),this._zoneDelegate.handleError(this,ee),ee}return this._updateTaskCount(te,-1),te._transitionTo(We,Ut),te.runCount=-1,te}}_updateTaskCount(te,ee){const J=te._zoneDelegates;ee==-1&&(te._zoneDelegates=null);for(let Ne=0;Ne<J.length;Ne++)J[Ne]._updateTaskCount(te.type,ee)}};p(B,"__symbol__",w);let ie=B;const ge={name:"",onHasTask:(vt,te,ee,J)=>vt.hasTask(ee,J),onScheduleTask:(vt,te,ee,J)=>vt.scheduleTask(ee,J),onInvokeTask:(vt,te,ee,J,Ne,Nt)=>vt.invokeTask(ee,J,Ne,Nt),onCancelTask:(vt,te,ee,J)=>vt.cancelTask(ee,J)};class ze{constructor(te,ee,J){p(this,"_zone"),p(this,"_taskCounts",{microTask:0,macroTask:0,eventTask:0}),p(this,"_parentDelegate"),p(this,"_forkDlgt"),p(this,"_forkZS"),p(this,"_forkCurrZone"),p(this,"_interceptDlgt"),p(this,"_interceptZS"),p(this,"_interceptCurrZone"),p(this,"_invokeDlgt"),p(this,"_invokeZS"),p(this,"_invokeCurrZone"),p(this,"_handleErrorDlgt"),p(this,"_handleErrorZS"),p(this,"_handleErrorCurrZone"),p(this,"_scheduleTaskDlgt"),p(this,"_scheduleTaskZS"),p(this,"_scheduleTaskCurrZone"),p(this,"_invokeTaskDlgt"),p(this,"_invokeTaskZS"),p(this,"_invokeTaskCurrZone"),p(this,"_cancelTaskDlgt"),p(this,"_cancelTaskZS"),p(this,"_cancelTaskCurrZone"),p(this,"_hasTaskDlgt"),p(this,"_hasTaskDlgtOwner"),p(this,"_hasTaskZS"),p(this,"_hasTaskCurrZone"),this._zone=te,this._parentDelegate=ee,this._forkZS=J&&(J&&J.onFork?J:ee._forkZS),this._forkDlgt=J&&(J.onFork?ee:ee._forkDlgt),this._forkCurrZone=J&&(J.onFork?this._zone:ee._forkCurrZone),this._interceptZS=J&&(J.onIntercept?J:ee._interceptZS),this._interceptDlgt=J&&(J.onIntercept?ee:ee._interceptDlgt),this._interceptCurrZone=J&&(J.onIntercept?this._zone:ee._interceptCurrZone),this._invokeZS=J&&(J.onInvoke?J:ee._invokeZS),this._invokeDlgt=J&&(J.onInvoke?ee:ee._invokeDlgt),this._invokeCurrZone=J&&(J.onInvoke?this._zone:ee._invokeCurrZone),this._handleErrorZS=J&&(J.onHandleError?J:ee._handleErrorZS),this._handleErrorDlgt=J&&(J.onHandleError?ee:ee._handleErrorDlgt),this._handleErrorCurrZone=J&&(J.onHandleError?this._zone:ee._handleErrorCurrZone),this._scheduleTaskZS=J&&(J.onScheduleTask?J:ee._scheduleTaskZS),this._scheduleTaskDlgt=J&&(J.onScheduleTask?ee:ee._scheduleTaskDlgt),this._scheduleTaskCurrZone=J&&(J.onScheduleTask?this._zone:ee._scheduleTaskCurrZone),this._invokeTaskZS=J&&(J.onInvokeTask?J:ee._invokeTaskZS),this._invokeTaskDlgt=J&&(J.onInvokeTask?ee:ee._invokeTaskDlgt),this._invokeTaskCurrZone=J&&(J.onInvokeTask?this._zone:ee._invokeTaskCurrZone),this._cancelTaskZS=J&&(J.onCancelTask?J:ee._cancelTaskZS),this._cancelTaskDlgt=J&&(J.onCancelTask?ee:ee._cancelTaskDlgt),this._cancelTaskCurrZone=J&&(J.onCancelTask?this._zone:ee._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const Ne=J&&J.onHasTask,Nt=ee&&ee._hasTaskZS;(Ne||Nt)&&(this._hasTaskZS=Ne?J:ge,this._hasTaskDlgt=ee,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,J.onScheduleTask||(this._scheduleTaskZS=ge,this._scheduleTaskDlgt=ee,this._scheduleTaskCurrZone=this._zone),J.onInvokeTask||(this._invokeTaskZS=ge,this._invokeTaskDlgt=ee,this._invokeTaskCurrZone=this._zone),J.onCancelTask||(this._cancelTaskZS=ge,this._cancelTaskDlgt=ee,this._cancelTaskCurrZone=this._zone))}get zone(){return this._zone}fork(te,ee){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,te,ee):new ie(te,ee)}intercept(te,ee,J){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,te,ee,J):ee}invoke(te,ee,J,Ne,Nt){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,te,ee,J,Ne,Nt):ee.apply(J,Ne)}handleError(te,ee){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,te,ee):!0}scheduleTask(te,ee){let J=ee;if(this._scheduleTaskZS)this._hasTaskZS&&J._zoneDelegates.push(this._hasTaskDlgtOwner),J=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,te,ee),J||(J=ee);else if(ee.scheduleFn)ee.scheduleFn(ee);else if(ee.type==Ve)Bt(ee);else throw new Error("Task is missing scheduleFn.");return J}invokeTask(te,ee,J,Ne){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,te,ee,J,Ne):ee.callback.apply(J,Ne)}cancelTask(te,ee){let J;if(this._cancelTaskZS)J=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,te,ee);else{if(!ee.cancelFn)throw Error("Task is not cancelable");J=ee.cancelFn(ee)}return J}hasTask(te,ee){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,te,ee)}catch(J){this.handleError(te,J)}}_updateTaskCount(te,ee){const J=this._taskCounts,Ne=J[te],Nt=J[te]=Ne+ee;if(Nt<0)throw new Error("More tasks executed then were scheduled.");if(Ne==0||Nt==0){const et={microTask:J.microTask>0,macroTask:J.macroTask>0,eventTask:J.eventTask>0,change:te};this.hasTask(this._zone,et)}}}class Ae{constructor(te,ee,J,Ne,Nt,et){if(p(this,"type"),p(this,"source"),p(this,"invoke"),p(this,"callback"),p(this,"data"),p(this,"scheduleFn"),p(this,"cancelFn"),p(this,"_zone",null),p(this,"runCount",0),p(this,"_zoneDelegates",null),p(this,"_state","notScheduled"),this.type=te,this.source=ee,this.data=Ne,this.scheduleFn=Nt,this.cancelFn=et,!J)throw new Error("callback is not defined");this.callback=J;const Zn=this;te===lt&&Ne&&Ne.useG?this.invoke=Ae.invokeTask:this.invoke=function(){return Ae.invokeTask.call(y,Zn,this,arguments)}}static invokeTask(te,ee,J){te||(te=this),yn++;try{return te.runCount++,te.zone.runTask(te,ee,J)}finally{yn==1&&Nn(),yn--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(We,Te)}_transitionTo(te,ee,J){if(this._state===ee||this._state===J)this._state=te,te==We&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${te}', expecting state '${ee}'${J?" or '"+J+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const be=w("setTimeout"),Ze=w("Promise"),Ce=w("then");let Ye=[],dt=!1,mt;function Kt(vt){if(mt||y[Ze]&&(mt=y[Ze].resolve(0)),mt){let te=mt[Ce];te||(te=mt.then),te.call(mt,vt)}else y[be](vt,0)}function Bt(vt){yn===0&&Ye.length===0&&Kt(Nn),vt&&Ye.push(vt)}function Nn(){if(!dt){for(dt=!0;Ye.length;){const vt=Ye;Ye=[];for(let te=0;te<vt.length;te++){const ee=vt[te];try{ee.zone.runTask(ee,null,null)}catch(J){yt.onUnhandledError(J)}}}yt.microtaskDrainDone(),dt=!1}}const Yt={name:"NO ZONE"},We="notScheduled",Te="scheduling",Ct="scheduled",gt="running",Ut="canceling",Mt="unknown",Ve="microTask",$t="macroTask",lt="eventTask",st={},yt={symbol:w,currentZoneFrame:()=>xe,onUnhandledError:Rt,microtaskDrainDone:Rt,scheduleMicroTask:Bt,showUncaughtError:()=>!ie[w("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:Rt,patchMethod:()=>Rt,bindArguments:()=>[],patchThen:()=>Rt,patchMacroTask:()=>Rt,patchEventPrototype:()=>Rt,getGlobalObjects:()=>{},ObjectDefineProperty:()=>Rt,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>Rt,wrapWithCurrentZone:()=>Rt,filterProperties:()=>[],attachOriginToPatched:()=>Rt,_redefineProperty:()=>Rt,patchCallbacks:()=>Rt,nativeScheduleMicroTask:Kt};let xe={parent:null,zone:new ie(null,null)},En=null,yn=0;function Rt(){}return se("Zone","Zone"),ie}function S(){var $;const U=globalThis,se=U[w("forceDuplicateZoneCheck")]===!0;if(U.Zone&&(se||typeof U.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return($=U.Zone)!=null||(U.Zone=T()),U.Zone}var P=Object.getOwnPropertyDescriptor,M=Object.defineProperty,O=Object.getPrototypeOf,X=Object.create,W=Array.prototype.slice,Q="addEventListener",ae="removeEventListener",de=w(Q),me=w(ae),N="true",I="false",A=w("");function k($,U){return Zone.current.wrap($,U)}function L($,U,se,B,ie){return Zone.current.scheduleMacroTask($,U,se,B,ie)}var C=w,R=typeof window<"u",ut=R?window:void 0,Je=R&&ut||globalThis,hn="removeAttribute";function ft($,U){for(let se=$.length-1;se>=0;se--)typeof $[se]=="function"&&($[se]=k($[se],U+"_"+se));return $}function ve($,U){const se=$.constructor.name;for(let B=0;B<U.length;B++){const ie=U[B],ge=$[ie];if(ge){const ze=P($,ie);if(!$e(ze))continue;$[ie]=(Ae=>{const be=function(){return Ae.apply(this,ft(arguments,se+"."+ie))};return It(be,Ae),be})(ge)}}}function $e($){return $?$.writable===!1?!1:!(typeof $.get=="function"&&typeof $.set>"u"):!0}var ke=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,z=!("nw"in Je)&&typeof Je.process<"u"&&Je.process.toString()==="[object process]",oe=!z&&!ke&&!!(R&&ut.HTMLElement),Ge=typeof Je.process<"u"&&Je.process.toString()==="[object process]"&&!ke&&!!(R&&ut.HTMLElement),rt={},pt=C("enable_beforeunload"),_t=function($){if($=$||Je.event,!$)return;let U=rt[$.type];U||(U=rt[$.type]=C("ON_PROPERTY"+$.type));const se=this||$.target||Je,B=se[U];let ie;if(oe&&se===ut&&$.type==="error"){const ge=$;ie=B&&B.call(this,ge.message,ge.filename,ge.lineno,ge.colno,ge.error),ie===!0&&$.preventDefault()}else ie=B&&B.apply(this,arguments),$.type==="beforeunload"&&Je[pt]&&typeof ie=="string"?$.returnValue=ie:ie!=null&&!ie&&$.preventDefault();return ie};function St($,U,se){let B=P($,U);if(!B&&se&&P(se,U)&&(B={enumerable:!0,configurable:!0}),!B||!B.configurable)return;const ie=C("on"+U+"patched");if($.hasOwnProperty(ie)&&$[ie])return;delete B.writable,delete B.value;const ge=B.get,ze=B.set,Ae=U.slice(2);let be=rt[Ae];be||(be=rt[Ae]=C("ON_PROPERTY"+Ae)),B.set=function(Ze){let Ce=this;if(!Ce&&$===Je&&(Ce=Je),!Ce)return;typeof Ce[be]=="function"&&Ce.removeEventListener(Ae,_t),ze?.call(Ce,null),Ce[be]=Ze,typeof Ze=="function"&&Ce.addEventListener(Ae,_t,!1)},B.get=function(){let Ze=this;if(!Ze&&$===Je&&(Ze=Je),!Ze)return null;const Ce=Ze[be];if(Ce)return Ce;if(ge){let Ye=ge.call(this);if(Ye)return B.set.call(this,Ye),typeof Ze[hn]=="function"&&Ze.removeAttribute(U),Ye}return null},M($,U,B),$[ie]=!0}function kt($,U,se){if(U)for(let B=0;B<U.length;B++)St($,"on"+U[B],se);else{const B=[];for(const ie in $)ie.slice(0,2)=="on"&&B.push(ie);for(let ie=0;ie<B.length;ie++)St($,B[ie],se)}}var wt=C("originalInstance");function Wt($){const U=Je[$];if(!U)return;Je[C($)]=U,Je[$]=function(){const ie=ft(arguments,$);switch(ie.length){case 0:this[wt]=new U;break;case 1:this[wt]=new U(ie[0]);break;case 2:this[wt]=new U(ie[0],ie[1]);break;case 3:this[wt]=new U(ie[0],ie[1],ie[2]);break;case 4:this[wt]=new U(ie[0],ie[1],ie[2],ie[3]);break;default:throw new Error("Arg list too long.")}},It(Je[$],U);const se=new U(function(){});let B;for(B in se)$==="XMLHttpRequest"&&B==="responseBlob"||(function(ie){typeof se[ie]=="function"?Je[$].prototype[ie]=function(){return this[wt][ie].apply(this[wt],arguments)}:M(Je[$].prototype,ie,{set:function(ge){typeof ge=="function"?(this[wt][ie]=k(ge,$+"."+ie),It(this[wt][ie],ge)):this[wt][ie]=ge},get:function(){return this[wt][ie]}})})(B);for(B in U)B!=="prototype"&&U.hasOwnProperty(B)&&(Je[$][B]=U[B])}function Se($,U,se){let B=$;for(;B&&!B.hasOwnProperty(U);)B=O(B);!B&&$[U]&&(B=$);const ie=C(U);let ge=null;if(B&&(!(ge=B[ie])||!B.hasOwnProperty(ie))){ge=B[ie]=B[U];const ze=B&&P(B,U);if($e(ze)){const Ae=se(ge,ie,U);B[U]=function(){return Ae(this,arguments)},It(B[U],ge)}}return ge}function Et($,U,se){let B=null;function ie(ge){const ze=ge.data;return ze.args[ze.cbIdx]=function(){ge.invoke.apply(this,arguments)},B.apply(ze.target,ze.args),ge}B=Se($,U,ge=>function(ze,Ae){const be=se(ze,Ae);return be.cbIdx>=0&&typeof Ae[be.cbIdx]=="function"?L(be.name,Ae[be.cbIdx],be,ie):ge.apply(ze,Ae)})}function It($,U){$[C("OriginalDelegate")]=U}function Xn($){return typeof $=="function"}function fr($){return typeof $=="number"}var Mo={useG:!0},Pn={},Lo={},oi=new RegExp("^"+A+"(\\w+)(true|false)$"),os=C("propagationStopped");function as($,U){const se=(U?U($):$)+I,B=(U?U($):$)+N,ie=A+se,ge=A+B;Pn[$]={},Pn[$][I]=ie,Pn[$][N]=ge}function jo($,U,se,B){const ie=B&&B.add||Q,ge=B&&B.rm||ae,ze=B&&B.listeners||"eventListeners",Ae=B&&B.rmAll||"removeAllListeners",be=C(ie),Ze="."+ie+":",Ce="prependListener",Ye="."+Ce+":",dt=function(We,Te,Ct){if(We.isRemoved)return;const gt=We.callback;typeof gt=="object"&&gt.handleEvent&&(We.callback=Ve=>gt.handleEvent(Ve),We.originalDelegate=gt);let Ut;try{We.invoke(We,Te,[Ct])}catch(Ve){Ut=Ve}const Mt=We.options;if(Mt&&typeof Mt=="object"&&Mt.once){const Ve=We.originalDelegate?We.originalDelegate:We.callback;Te[ge].call(Te,Ct.type,Ve,Mt)}return Ut};function mt(We,Te,Ct){if(Te=Te||$.event,!Te)return;const gt=We||Te.target||$,Ut=gt[Pn[Te.type][Ct?N:I]];if(Ut){const Mt=[];if(Ut.length===1){const Ve=dt(Ut[0],gt,Te);Ve&&Mt.push(Ve)}else{const Ve=Ut.slice();for(let $t=0;$t<Ve.length&&!(Te&&Te[os]===!0);$t++){const lt=dt(Ve[$t],gt,Te);lt&&Mt.push(lt)}}if(Mt.length===1)throw Mt[0];for(let Ve=0;Ve<Mt.length;Ve++){const $t=Mt[Ve];U.nativeScheduleMicroTask(()=>{throw $t})}}}const Kt=function(We){return mt(this,We,!1)},Bt=function(We){return mt(this,We,!0)};function Nn(We,Te){if(!We)return!1;let Ct=!0;Te&&Te.useG!==void 0&&(Ct=Te.useG);const gt=Te&&Te.vh;let Ut=!0;Te&&Te.chkDup!==void 0&&(Ut=Te.chkDup);let Mt=!1;Te&&Te.rt!==void 0&&(Mt=Te.rt);let Ve=We;for(;Ve&&!Ve.hasOwnProperty(ie);)Ve=O(Ve);if(!Ve&&We[ie]&&(Ve=We),!Ve||Ve[be])return!1;const $t=Te&&Te.eventNameToString,lt={},st=Ve[be]=Ve[ie],yt=Ve[C(ge)]=Ve[ge],xe=Ve[C(ze)]=Ve[ze],En=Ve[C(Ae)]=Ve[Ae];let yn;Te&&Te.prepend&&(yn=Ve[C(Te.prepend)]=Ve[Te.prepend]);function Rt(Z,we){return we?typeof Z=="boolean"?{capture:Z,passive:!0}:Z?typeof Z=="object"&&Z.passive!==!1?d(u({},Z),{passive:!0}):Z:{passive:!0}:Z}const vt=function(Z){if(!lt.isExisting)return st.call(lt.target,lt.eventName,lt.capture?Bt:Kt,lt.options)},te=function(Z){if(!Z.isRemoved){const we=Pn[Z.eventName];let Le;we&&(Le=we[Z.capture?N:I]);const Fe=Le&&Z.target[Le];if(Fe){for(let De=0;De<Fe.length;De++)if(Fe[De]===Z){Fe.splice(De,1),Z.isRemoved=!0,Z.removeAbortListener&&(Z.removeAbortListener(),Z.removeAbortListener=null),Fe.length===0&&(Z.allRemoved=!0,Z.target[Le]=null);break}}}if(Z.allRemoved)return yt.call(Z.target,Z.eventName,Z.capture?Bt:Kt,Z.options)},ee=function(Z){return st.call(lt.target,lt.eventName,Z.invoke,lt.options)},J=function(Z){return yn.call(lt.target,lt.eventName,Z.invoke,lt.options)},Ne=function(Z){return yt.call(Z.target,Z.eventName,Z.invoke,Z.options)},Nt=Ct?vt:ee,et=Ct?te:Ne,Zn=function(Z,we){const Le=typeof we;return Le==="function"&&Z.callback===we||Le==="object"&&Z.originalDelegate===we},Sr=Te?.diff||Zn,kr=Zone[C("UNPATCHED_EVENTS")],On=$[C("PASSIVE_EVENTS")];function _e(Z){if(typeof Z=="object"&&Z!==null){const we=u({},Z);return Z.signal&&(we.signal=Z.signal),we}return Z}const fe=function(Z,we,Le,Fe,De=!1,it=!1){return function(){const ot=this||$;let Oe=arguments[0];Te&&Te.transferEventName&&(Oe=Te.transferEventName(Oe));let Pt=arguments[1];if(!Pt)return Z.apply(this,arguments);if(z&&Oe==="uncaughtException")return Z.apply(this,arguments);let Be=!1;if(typeof Pt!="function"){if(!Pt.handleEvent)return Z.apply(this,arguments);Be=!0}if(gt&&!gt(Z,Pt,ot,arguments))return;const Hn=!!On&&On.indexOf(Oe)!==-1,er=_e(Rt(arguments[2],Hn)),Rr=er?.signal;if(Rr?.aborted)return;if(kr){for(let yr=0;yr<kr.length;yr++)if(Oe===kr[yr])return Hn?Z.call(ot,Oe,Pt,er):Z.apply(this,arguments)}const Bi=er?typeof er=="boolean"?!0:er.capture:!1,qo=er&&typeof er=="object"?er.once:!1,Ha=Zone.current;let ui=Pn[Oe];ui||(as(Oe,$t),ui=Pn[Oe]);const qr=ui[Bi?N:I];let nn=ot[qr],Ar=!1;if(nn){if(Ar=!0,Ut){for(let yr=0;yr<nn.length;yr++)if(Sr(nn[yr],Pt))return}}else nn=ot[qr]=[];let tr;const ws=ot.constructor.name,mr=Lo[ws];mr&&(tr=mr[Oe]),tr||(tr=ws+we+($t?$t(Oe):Oe)),lt.options=er,qo&&(lt.options.once=!1),lt.target=ot,lt.capture=Bi,lt.eventName=Oe,lt.isExisting=Ar;const nr=Ct?Mo:void 0;nr&&(nr.taskData=lt),Rr&&(lt.options.signal=void 0);const gr=Ha.scheduleEventTask(tr,Pt,nr,Le,Fe);if(Rr){lt.options.signal=Rr;const yr=()=>gr.zone.cancelTask(gr);Z.call(Rr,"abort",yr,{once:!0}),gr.removeAbortListener=()=>Rr.removeEventListener("abort",yr)}if(lt.target=null,nr&&(nr.taskData=null),qo&&(lt.options.once=!0),typeof gr.options!="boolean"&&(gr.options=er),gr.target=ot,gr.capture=Bi,gr.eventName=Oe,Be&&(gr.originalDelegate=Pt),it?nn.unshift(gr):nn.push(gr),De)return ot}};return Ve[ie]=fe(st,Ze,Nt,et,Mt),yn&&(Ve[Ce]=fe(yn,Ye,J,et,Mt,!0)),Ve[ge]=function(){const Z=this||$;let we=arguments[0];Te&&Te.transferEventName&&(we=Te.transferEventName(we));const Le=arguments[2],Fe=Le?typeof Le=="boolean"?!0:Le.capture:!1,De=arguments[1];if(!De)return yt.apply(this,arguments);if(gt&&!gt(yt,De,Z,arguments))return;const it=Pn[we];let ot;it&&(ot=it[Fe?N:I]);const Oe=ot&&Z[ot];if(Oe)for(let Pt=0;Pt<Oe.length;Pt++){const Be=Oe[Pt];if(Sr(Be,De)){if(Oe.splice(Pt,1),Be.isRemoved=!0,Oe.length===0&&(Be.allRemoved=!0,Z[ot]=null,!Fe&&typeof we=="string")){const Hn=A+"ON_PROPERTY"+we;Z[Hn]=null}return Be.zone.cancelTask(Be),Mt?Z:void 0}}return yt.apply(this,arguments)},Ve[ze]=function(){const Z=this||$;let we=arguments[0];Te&&Te.transferEventName&&(we=Te.transferEventName(we));const Le=[],Fe=ai(Z,$t?$t(we):we);for(let De=0;De<Fe.length;De++){const it=Fe[De];let ot=it.originalDelegate?it.originalDelegate:it.callback;Le.push(ot)}return Le},Ve[Ae]=function(){const Z=this||$;let we=arguments[0];if(we){Te&&Te.transferEventName&&(we=Te.transferEventName(we));const Le=Pn[we];if(Le){const Fe=Le[I],De=Le[N],it=Z[Fe],ot=Z[De];if(it){const Oe=it.slice();for(let Pt=0;Pt<Oe.length;Pt++){const Be=Oe[Pt];let Hn=Be.originalDelegate?Be.originalDelegate:Be.callback;this[ge].call(this,we,Hn,Be.options)}}if(ot){const Oe=ot.slice();for(let Pt=0;Pt<Oe.length;Pt++){const Be=Oe[Pt];let Hn=Be.originalDelegate?Be.originalDelegate:Be.callback;this[ge].call(this,we,Hn,Be.options)}}}}else{const Le=Object.keys(Z);for(let Fe=0;Fe<Le.length;Fe++){const De=Le[Fe],it=oi.exec(De);let ot=it&&it[1];ot&&ot!=="removeListener"&&this[Ae].call(this,ot)}this[Ae].call(this,"removeListener")}if(Mt)return this},It(Ve[ie],st),It(Ve[ge],yt),En&&It(Ve[Ae],En),xe&&It(Ve[ze],xe),!0}let Yt=[];for(let We=0;We<se.length;We++)Yt[We]=Nn(se[We],B);return Yt}function ai($,U){if(!U){const ge=[];for(let ze in $){const Ae=oi.exec(ze);let be=Ae&&Ae[1];if(be&&(!U||be===U)){const Ze=$[ze];if(Ze)for(let Ce=0;Ce<Ze.length;Ce++)ge.push(Ze[Ce])}}return ge}let se=Pn[U];se||(as(U),se=Pn[U]);const B=$[se[I]],ie=$[se[N]];return B?ie?B.concat(ie):B.slice():ie?ie.slice():[]}function Ui($,U){const se=$.Event;se&&se.prototype&&U.patchMethod(se.prototype,"stopImmediatePropagation",B=>function(ie,ge){ie[os]=!0,B&&B.apply(ie,ge)})}function Vo($,U){U.patchMethod($,"queueMicrotask",se=>function(B,ie){Zone.current.scheduleMicroTask("queueMicrotask",ie[0])})}var tn=C("zoneTask");function Qt($,U,se,B){let ie=null,ge=null;U+=B,se+=B;const ze={};function Ae(Ze){const Ce=Ze.data;Ce.args[0]=function(){return Ze.invoke.apply(this,arguments)};const Ye=ie.apply($,Ce.args);return fr(Ye)?Ce.handleId=Ye:(Ce.handle=Ye,Ce.isRefreshable=Xn(Ye.refresh)),Ze}function be(Ze){const{handle:Ce,handleId:Ye}=Ze.data;return ge.call($,Ce??Ye)}ie=Se($,U,Ze=>function(Ce,Ye){var dt;if(Xn(Ye[0])){const mt={isRefreshable:!1,isPeriodic:B==="Interval",delay:B==="Timeout"||B==="Interval"?Ye[1]||0:void 0,args:Ye},Kt=Ye[0];Ye[0]=function(){try{return Kt.apply(this,arguments)}finally{const{handle:gt,handleId:Ut,isPeriodic:Mt,isRefreshable:Ve}=mt;!Mt&&!Ve&&(Ut?delete ze[Ut]:gt&&(gt[tn]=null))}};const Bt=L(U,Ye[0],mt,Ae,be);if(!Bt)return Bt;const{handleId:Nn,handle:Yt,isRefreshable:We,isPeriodic:Te}=Bt.data;if(Nn)ze[Nn]=Bt;else if(Yt&&(Yt[tn]=Bt,We&&!Te)){const Ct=Yt.refresh;Yt.refresh=function(){const{zone:gt,state:Ut}=Bt;return Ut==="notScheduled"?(Bt._state="scheduled",gt._updateTaskCount(Bt,1)):Ut==="running"&&(Bt._state="scheduling"),Ct.call(this)}}return(dt=Yt??Nn)!=null?dt:Bt}else return Ze.apply($,Ye)}),ge=Se($,se,Ze=>function(Ce,Ye){const dt=Ye[0];let mt;fr(dt)?(mt=ze[dt],delete ze[dt]):(mt=dt?.[tn],mt?dt[tn]=null:mt=dt),mt?.type?mt.cancelFn&&mt.zone.cancelTask(mt):Ze.apply($,Ye)})}function _s($,U){const{isBrowser:se,isMix:B}=U.getGlobalObjects();if(!se&&!B||!$.customElements||!("customElements"in $))return;const ie=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];U.patchCallbacks(U,$.customElements,"customElements","define",ie)}function Fo($,U){if(Zone[U.symbol("patchEventTarget")])return;const{eventNames:se,zoneSymbolEventNames:B,TRUE_STR:ie,FALSE_STR:ge,ZONE_SYMBOL_PREFIX:ze}=U.getGlobalObjects();for(let be=0;be<se.length;be++){const Ze=se[be],Ce=Ze+ge,Ye=Ze+ie,dt=ze+Ce,mt=ze+Ye;B[Ze]={},B[Ze][ge]=dt,B[Ze][ie]=mt}const Ae=$.EventTarget;if(!(!Ae||!Ae.prototype))return U.patchEventTarget($,U,[Ae&&Ae.prototype]),!0}function Vs($,U){U.patchEventPrototype($,U)}function Fs($,U,se){if(!se||se.length===0)return U;const B=se.filter(ge=>ge.target===$);if(B.length===0)return U;const ie=B[0].ignoreProperties;return U.filter(ge=>ie.indexOf(ge)===-1)}function Us($,U,se,B){if(!$)return;const ie=Fs($,U,se);kt($,ie,B)}function li($){return Object.getOwnPropertyNames($).filter(U=>U.startsWith("on")&&U.length>2).map(U=>U.substring(2))}function Uo($,U){if(z&&!Ge||Zone[$.symbol("patchEvents")])return;const se=U.__Zone_ignore_on_properties;let B=[];if(oe){const ie=window;B=B.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]),Us(ie,li(ie),se,O(ie))}B=B.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let ie=0;ie<B.length;ie++){const ge=U[B[ie]];ge?.prototype&&Us(ge.prototype,li(ge.prototype),se)}}function $o($){$.__load_patch("timers",U=>{const B="clear";Qt(U,"set",B,"Timeout"),Qt(U,"set",B,"Interval"),Qt(U,"set",B,"Immediate")}),$.__load_patch("requestAnimationFrame",U=>{Qt(U,"request","cancel","AnimationFrame"),Qt(U,"mozRequest","mozCancel","AnimationFrame"),Qt(U,"webkitRequest","webkitCancel","AnimationFrame")}),$.__load_patch("blocking",(U,se)=>{const B=["alert","prompt","confirm"];for(let ie=0;ie<B.length;ie++){const ge=B[ie];Se(U,ge,(ze,Ae,be)=>function(Ze,Ce){return se.current.run(ze,U,Ce,be)})}}),$.__load_patch("EventTarget",(U,se,B)=>{Vs(U,B),Fo(U,B);const ie=U.XMLHttpRequestEventTarget;ie&&ie.prototype&&B.patchEventTarget(U,B,[ie.prototype])}),$.__load_patch("MutationObserver",(U,se,B)=>{Wt("MutationObserver"),Wt("WebKitMutationObserver")}),$.__load_patch("IntersectionObserver",(U,se,B)=>{Wt("IntersectionObserver")}),$.__load_patch("FileReader",(U,se,B)=>{Wt("FileReader")}),$.__load_patch("on_property",(U,se,B)=>{Uo(B,U)}),$.__load_patch("customElements",(U,se,B)=>{_s(U,B)}),$.__load_patch("XHR",(U,se)=>{Ze(U);const B=C("xhrTask"),ie=C("xhrSync"),ge=C("xhrListener"),ze=C("xhrScheduled"),Ae=C("xhrURL"),be=C("xhrErrorBeforeScheduled");function Ze(Ce){const Ye=Ce.XMLHttpRequest;if(!Ye)return;const dt=Ye.prototype;function mt(st){return st[B]}let Kt=dt[de],Bt=dt[me];if(!Kt){const st=Ce.XMLHttpRequestEventTarget;if(st){const yt=st.prototype;Kt=yt[de],Bt=yt[me]}}const Nn="readystatechange",Yt="scheduled";function We(st){const yt=st.data,xe=yt.target;xe[ze]=!1,xe[be]=!1;const En=xe[ge];Kt||(Kt=xe[de],Bt=xe[me]),En&&Bt.call(xe,Nn,En);const yn=xe[ge]=()=>{if(xe.readyState===xe.DONE)if(!yt.aborted&&xe[ze]&&st.state===Yt){const vt=xe[se.__symbol__("loadfalse")];if(xe.status!==0&&vt&&vt.length>0){const te=st.invoke;st.invoke=function(){const ee=xe[se.__symbol__("loadfalse")];for(let J=0;J<ee.length;J++)ee[J]===st&&ee.splice(J,1);!yt.aborted&&st.state===Yt&&te.call(st)},vt.push(st)}else st.invoke()}else!yt.aborted&&xe[ze]===!1&&(xe[be]=!0)};return Kt.call(xe,Nn,yn),xe[B]||(xe[B]=st),$t.apply(xe,yt.args),xe[ze]=!0,st}function Te(){}function Ct(st){const yt=st.data;return yt.aborted=!0,lt.apply(yt.target,yt.args)}const gt=Se(dt,"open",()=>function(st,yt){return st[ie]=yt[2]==!1,st[Ae]=yt[1],gt.apply(st,yt)}),Ut="XMLHttpRequest.send",Mt=C("fetchTaskAborting"),Ve=C("fetchTaskScheduling"),$t=Se(dt,"send",()=>function(st,yt){if(se.current[Ve]===!0||st[ie])return $t.apply(st,yt);{const xe={target:st,url:st[Ae],isPeriodic:!1,args:yt,aborted:!1},En=L(Ut,Te,xe,We,Ct);st&&st[be]===!0&&!xe.aborted&&En.state===Yt&&En.invoke()}}),lt=Se(dt,"abort",()=>function(st,yt){const xe=mt(st);if(xe&&typeof xe.type=="string"){if(xe.cancelFn==null||xe.data&&xe.data.aborted)return;xe.zone.cancelTask(xe)}else if(se.current[Mt]===!0)return lt.apply(st,yt)})}}),$.__load_patch("geolocation",U=>{U.navigator&&U.navigator.geolocation&&ve(U.navigator.geolocation,["getCurrentPosition","watchPosition"])}),$.__load_patch("PromiseRejectionEvent",(U,se)=>{function B(ie){return function(ge){ai(U,ie).forEach(Ae=>{const be=U.PromiseRejectionEvent;if(be){const Ze=new be(ie,{promise:ge.promise,reason:ge.rejection});Ae.invoke(Ze)}})}}U.PromiseRejectionEvent&&(se[C("unhandledPromiseRejectionHandler")]=B("unhandledrejection"),se[C("rejectionHandledHandler")]=B("rejectionhandled"))}),$.__load_patch("queueMicrotask",(U,se,B)=>{Vo(U,B)})}function zo($){$.__load_patch("ZoneAwarePromise",(U,se,B)=>{const ie=Object.getOwnPropertyDescriptor,ge=Object.defineProperty;function ze(_e){if(_e&&_e.toString===Object.prototype.toString){const fe=_e.constructor&&_e.constructor.name;return(fe||"")+": "+JSON.stringify(_e)}return _e?_e.toString():Object.prototype.toString.call(_e)}const Ae=B.symbol,be=[],Ze=U[Ae("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,Ce=Ae("Promise"),Ye=Ae("then"),dt="__creationTrace__";B.onUnhandledError=_e=>{if(B.showUncaughtError()){const fe=_e&&_e.rejection;fe?console.error("Unhandled Promise rejection:",fe instanceof Error?fe.message:fe,"; Zone:",_e.zone.name,"; Task:",_e.task&&_e.task.source,"; Value:",fe,fe instanceof Error?fe.stack:void 0):console.error(_e)}},B.microtaskDrainDone=()=>{for(;be.length;){const _e=be.shift();try{_e.zone.runGuarded(()=>{throw _e.throwOriginal?_e.rejection:_e})}catch(fe){Kt(fe)}}};const mt=Ae("unhandledPromiseRejectionHandler");function Kt(_e){B.onUnhandledError(_e);try{const fe=se[mt];typeof fe=="function"&&fe.call(this,_e)}catch{}}function Bt(_e){return _e&&typeof _e.then=="function"}function Nn(_e){return _e}function Yt(_e){return et.reject(_e)}const We=Ae("state"),Te=Ae("value"),Ct=Ae("finally"),gt=Ae("parentPromiseValue"),Ut=Ae("parentPromiseState"),Mt="Promise.then",Ve=null,$t=!0,lt=!1,st=0;function yt(_e,fe){return Z=>{try{Rt(_e,fe,Z)}catch(we){Rt(_e,!1,we)}}}const xe=function(){let _e=!1;return function(Z){return function(){_e||(_e=!0,Z.apply(null,arguments))}}},En="Promise resolved with itself",yn=Ae("currentTaskTrace");function Rt(_e,fe,Z){const we=xe();if(_e===Z)throw new TypeError(En);if(_e[We]===Ve){let Le=null;try{(typeof Z=="object"||typeof Z=="function")&&(Le=Z&&Z.then)}catch(Fe){return we(()=>{Rt(_e,!1,Fe)})(),_e}if(fe!==lt&&Z instanceof et&&Z.hasOwnProperty(We)&&Z.hasOwnProperty(Te)&&Z[We]!==Ve)te(Z),Rt(_e,Z[We],Z[Te]);else if(fe!==lt&&typeof Le=="function")try{Le.call(Z,we(yt(_e,fe)),we(yt(_e,!1)))}catch(Fe){we(()=>{Rt(_e,!1,Fe)})()}else{_e[We]=fe;const Fe=_e[Te];if(_e[Te]=Z,_e[Ct]===Ct&&fe===$t&&(_e[We]=_e[Ut],_e[Te]=_e[gt]),fe===lt&&Z instanceof Error){const De=se.currentTask&&se.currentTask.data&&se.currentTask.data[dt];De&&ge(Z,yn,{configurable:!0,enumerable:!1,writable:!0,value:De})}for(let De=0;De<Fe.length;)ee(_e,Fe[De++],Fe[De++],Fe[De++],Fe[De++]);if(Fe.length==0&&fe==lt){_e[We]=st;let De=Z;try{throw new Error("Uncaught (in promise): "+ze(Z)+(Z&&Z.stack?`
`+Z.stack:""))}catch(it){De=it}Ze&&(De.throwOriginal=!0),De.rejection=Z,De.promise=_e,De.zone=se.current,De.task=se.currentTask,be.push(De),B.scheduleMicroTask()}}}return _e}const vt=Ae("rejectionHandledHandler");function te(_e){if(_e[We]===st){try{const fe=se[vt];fe&&typeof fe=="function"&&fe.call(this,{rejection:_e[Te],promise:_e})}catch{}_e[We]=lt;for(let fe=0;fe<be.length;fe++)_e===be[fe].promise&&be.splice(fe,1)}}function ee(_e,fe,Z,we,Le){te(_e);const Fe=_e[We],De=Fe?typeof we=="function"?we:Nn:typeof Le=="function"?Le:Yt;fe.scheduleMicroTask(Mt,()=>{try{const it=_e[Te],ot=!!Z&&Ct===Z[Ct];ot&&(Z[gt]=it,Z[Ut]=Fe);const Oe=fe.run(De,void 0,ot&&De!==Yt&&De!==Nn?[]:[it]);Rt(Z,!0,Oe)}catch(it){Rt(Z,!1,it)}},Z)}const J="function ZoneAwarePromise() { [native code] }",Ne=function(){},Nt=U.AggregateError;class et{static toString(){return J}static resolve(fe){return fe instanceof et?fe:Rt(new this(null),$t,fe)}static reject(fe){return Rt(new this(null),lt,fe)}static withResolvers(){const fe={};return fe.promise=new et((Z,we)=>{fe.resolve=Z,fe.reject=we}),fe}static any(fe){if(!fe||typeof fe[Symbol.iterator]!="function")return Promise.reject(new Nt([],"All promises were rejected"));const Z=[];let we=0;try{for(let De of fe)we++,Z.push(et.resolve(De))}catch{return Promise.reject(new Nt([],"All promises were rejected"))}if(we===0)return Promise.reject(new Nt([],"All promises were rejected"));let Le=!1;const Fe=[];return new et((De,it)=>{for(let ot=0;ot<Z.length;ot++)Z[ot].then(Oe=>{Le||(Le=!0,De(Oe))},Oe=>{Fe.push(Oe),we--,we===0&&(Le=!0,it(new Nt(Fe,"All promises were rejected")))})})}static race(fe){let Z,we,Le=new this((it,ot)=>{Z=it,we=ot});function Fe(it){Z(it)}function De(it){we(it)}for(let it of fe)Bt(it)||(it=this.resolve(it)),it.then(Fe,De);return Le}static all(fe){return et.allWithCallback(fe)}static allSettled(fe){return(this&&this.prototype instanceof et?this:et).allWithCallback(fe,{thenCallback:we=>({status:"fulfilled",value:we}),errorCallback:we=>({status:"rejected",reason:we})})}static allWithCallback(fe,Z){let we,Le,Fe=new this((Oe,Pt)=>{we=Oe,Le=Pt}),De=2,it=0;const ot=[];for(let Oe of fe){Bt(Oe)||(Oe=this.resolve(Oe));const Pt=it;try{Oe.then(Be=>{ot[Pt]=Z?Z.thenCallback(Be):Be,De--,De===0&&we(ot)},Be=>{Z?(ot[Pt]=Z.errorCallback(Be),De--,De===0&&we(ot)):Le(Be)})}catch(Be){Le(Be)}De++,it++}return De-=2,De===0&&we(ot),Fe}constructor(fe){const Z=this;if(!(Z instanceof et))throw new Error("Must be an instanceof Promise.");Z[We]=Ve,Z[Te]=[];try{const we=xe();fe&&fe(we(yt(Z,$t)),we(yt(Z,lt)))}catch(we){Rt(Z,!1,we)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return et}then(fe,Z){var we;let Le=(we=this.constructor)==null?void 0:we[Symbol.species];(!Le||typeof Le!="function")&&(Le=this.constructor||et);const Fe=new Le(Ne),De=se.current;return this[We]==Ve?this[Te].push(De,Fe,fe,Z):ee(this,De,Fe,fe,Z),Fe}catch(fe){return this.then(null,fe)}finally(fe){var Z;let we=(Z=this.constructor)==null?void 0:Z[Symbol.species];(!we||typeof we!="function")&&(we=et);const Le=new we(Ne);Le[Ct]=Ct;const Fe=se.current;return this[We]==Ve?this[Te].push(Fe,Le,fe,fe):ee(this,Fe,Le,fe,fe),Le}}et.resolve=et.resolve,et.reject=et.reject,et.race=et.race,et.all=et.all;const Zn=U[Ce]=U.Promise;U.Promise=et;const Sr=Ae("thenPatched");function kr(_e){const fe=_e.prototype,Z=ie(fe,"then");if(Z&&(Z.writable===!1||!Z.configurable))return;const we=fe.then;fe[Ye]=we,_e.prototype.then=function(Le,Fe){return new et((it,ot)=>{we.call(this,it,ot)}).then(Le,Fe)},_e[Sr]=!0}B.patchThen=kr;function On(_e){return function(fe,Z){let we=_e.apply(fe,Z);if(we instanceof et)return we;let Le=we.constructor;return Le[Sr]||kr(Le),we}}return Zn&&(kr(Zn),Se(U,"fetch",_e=>On(_e))),Promise[se.__symbol__("uncaughtPromiseErrors")]=be,et})}function Bo($){$.__load_patch("toString",U=>{const se=Function.prototype.toString,B=C("OriginalDelegate"),ie=C("Promise"),ge=C("Error"),ze=function(){if(typeof this=="function"){const Ce=this[B];if(Ce)return typeof Ce=="function"?se.call(Ce):Object.prototype.toString.call(Ce);if(this===Promise){const Ye=U[ie];if(Ye)return se.call(Ye)}if(this===Error){const Ye=U[ge];if(Ye)return se.call(Ye)}}return se.call(this)};ze[B]=se,Function.prototype.toString=ze;const Ae=Object.prototype.toString,be="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?be:Ae.call(this)}})}function ci($,U,se,B,ie){const ge=Zone.__symbol__(B);if(U[ge])return;const ze=U[ge]=U[B];U[B]=function(Ae,be,Ze){return be&&be.prototype&&ie.forEach(function(Ce){const Ye=`${se}.${B}::`+Ce,dt=be.prototype;try{if(dt.hasOwnProperty(Ce)){const mt=$.ObjectGetOwnPropertyDescriptor(dt,Ce);mt&&mt.value?(mt.value=$.wrapWithCurrentZone(mt.value,Ye),$._redefineProperty(be.prototype,Ce,mt)):dt[Ce]&&(dt[Ce]=$.wrapWithCurrentZone(dt[Ce],Ye))}else dt[Ce]&&(dt[Ce]=$.wrapWithCurrentZone(dt[Ce],Ye))}catch{}}),ze.call(U,Ae,be,Ze)},$.attachOriginToPatched(U[B],ze)}function $i($){$.__load_patch("util",(U,se,B)=>{const ie=li(U);B.patchOnProperties=kt,B.patchMethod=Se,B.bindArguments=ft,B.patchMacroTask=Et;const ge=se.__symbol__("BLACK_LISTED_EVENTS"),ze=se.__symbol__("UNPATCHED_EVENTS");U[ze]&&(U[ge]=U[ze]),U[ge]&&(se[ge]=se[ze]=U[ge]),B.patchEventPrototype=Ui,B.patchEventTarget=jo,B.ObjectDefineProperty=M,B.ObjectGetOwnPropertyDescriptor=P,B.ObjectCreate=X,B.ArraySlice=W,B.patchClass=Wt,B.wrapWithCurrentZone=k,B.filterProperties=Fs,B.attachOriginToPatched=It,B._redefineProperty=Object.defineProperty,B.patchCallbacks=ci,B.getGlobalObjects=()=>({globalSources:Lo,zoneSymbolEventNames:Pn,eventNames:ie,isBrowser:oe,isMix:Ge,isNode:z,TRUE_STR:N,FALSE_STR:I,ZONE_SYMBOL_PREFIX:A,ADD_EVENT_LISTENER_STR:Q,REMOVE_EVENT_LISTENER_STR:ae})})}function zi($){zo($),Bo($),$i($)}var pr=S();return zi(pr),$o(pr),gw}zA();var j=ay();const qn=$x(j);var th={},bm={exports:{}},jr={},Sm={exports:{}},km={};var vw;function BA(){return vw||(vw=1,(function(n){function e(ve,$e){var ke=ve.length;ve.push($e);e:for(;0<ke;){var z=ke-1>>>1,oe=ve[z];if(0<s(oe,$e))ve[z]=$e,ve[ke]=oe,ke=z;else break e}}function t(ve){return ve.length===0?null:ve[0]}function r(ve){if(ve.length===0)return null;var $e=ve[0],ke=ve.pop();if(ke!==$e){ve[0]=ke;e:for(var z=0,oe=ve.length,Ge=oe>>>1;z<Ge;){var rt=2*(z+1)-1,pt=ve[rt],_t=rt+1,St=ve[_t];if(0>s(pt,ke))_t<oe&&0>s(St,pt)?(ve[z]=St,ve[_t]=ke,z=_t):(ve[z]=pt,ve[rt]=ke,z=rt);else if(_t<oe&&0>s(St,ke))ve[z]=St,ve[_t]=ke,z=_t;else break e}}return $e}function s(ve,$e){var ke=ve.sortIndex-$e.sortIndex;return ke!==0?ke:ve.id-$e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],y=1,w=null,T=3,S=!1,P=!1,M=!1,O=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(ve){for(var $e=t(p);$e!==null;){if($e.callback===null)r(p);else if($e.startTime<=ve)r(p),$e.sortIndex=$e.expirationTime,e(d,$e);else break;$e=t(p)}}function ae(ve){if(M=!1,Q(ve),!P)if(t(d)!==null)P=!0,hn(de);else{var $e=t(p);$e!==null&&ft(ae,$e.startTime-ve)}}function de(ve,$e){P=!1,M&&(M=!1,X(I),I=-1),S=!0;var ke=T;try{for(Q($e),w=t(d);w!==null&&(!(w.expirationTime>$e)||ve&&!L());){var z=w.callback;if(typeof z=="function"){w.callback=null,T=w.priorityLevel;var oe=z(w.expirationTime<=$e);$e=n.unstable_now(),typeof oe=="function"?w.callback=oe:w===t(d)&&r(d),Q($e)}else r(d);w=t(d)}if(w!==null)var Ge=!0;else{var rt=t(p);rt!==null&&ft(ae,rt.startTime-$e),Ge=!1}return Ge}finally{w=null,T=ke,S=!1}}var me=!1,N=null,I=-1,A=5,k=-1;function L(){return!(n.unstable_now()-k<A)}function C(){if(N!==null){var ve=n.unstable_now();k=ve;var $e=!0;try{$e=N(!0,ve)}finally{$e?R():(me=!1,N=null)}}else me=!1}var R;if(typeof W=="function")R=function(){W(C)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,Je=ut.port2;ut.port1.onmessage=C,R=function(){Je.postMessage(null)}}else R=function(){O(C,0)};function hn(ve){N=ve,me||(me=!0,R())}function ft(ve,$e){I=O(function(){ve(n.unstable_now())},$e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ve){ve.callback=null},n.unstable_continueExecution=function(){P||S||(P=!0,hn(de))},n.unstable_forceFrameRate=function(ve){0>ve||125<ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ve?Math.floor(1e3/ve):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ve){switch(T){case 1:case 2:case 3:var $e=3;break;default:$e=T}var ke=T;T=$e;try{return ve()}finally{T=ke}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ve,$e){switch(ve){case 1:case 2:case 3:case 4:case 5:break;default:ve=3}var ke=T;T=ve;try{return $e()}finally{T=ke}},n.unstable_scheduleCallback=function(ve,$e,ke){var z=n.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?z+ke:z):ke=z,ve){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ke+oe,ve={id:y++,callback:$e,priorityLevel:ve,startTime:ke,expirationTime:oe,sortIndex:-1},ke>z?(ve.sortIndex=ke,e(p,ve),t(d)===null&&ve===t(p)&&(M?(X(I),I=-1):M=!0,ft(ae,ke-z))):(ve.sortIndex=oe,e(d,ve),P||S||(P=!0,hn(de))),ve},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ve){var $e=T;return function(){var ke=T;T=$e;try{return ve.apply(this,arguments)}finally{T=ke}}}})(km)),km}var _w;function qA(){return _w||(_w=1,Sm.exports=BA()),Sm.exports}var ww;function HA(){if(ww)return jr;ww=1;var n=ay(),e=qA();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function T(i){return d.call(w,i)?!0:d.call(y,i)?!1:p.test(i)?w[i]=!0:(y[i]=!0,!1)}function S(i,a,c,f){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function P(i,a,c,f){if(a===null||typeof a>"u"||S(i,a,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function M(i,a,c,f,m,_,x){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=x}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){O[i]=new M(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];O[a]=new M(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){O[i]=new M(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){O[i]=new M(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){O[i]=new M(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){O[i]=new M(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){O[i]=new M(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){O[i]=new M(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){O[i]=new M(i,5,!1,i.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function W(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(X,W);O[a]=new M(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(X,W);O[a]=new M(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(X,W);O[a]=new M(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){O[i]=new M(i,1,!1,i.toLowerCase(),null,!1,!1)}),O.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){O[i]=new M(i,1,!1,i.toLowerCase(),null,!0,!0)});function Q(i,a,c,f){var m=O.hasOwnProperty(a)?O[a]:null;(m!==null?m.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(P(a,c,m,f)&&(c=null),f||m===null?T(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):m.mustUseProperty?i[m.propertyName]=c===null?m.type===3?!1:"":c:(a=m.attributeName,f=m.attributeNamespace,c===null?i.removeAttribute(a):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,f?i.setAttributeNS(f,a,c):i.setAttribute(a,c))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),me=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),Je=Symbol.for("react.memo"),hn=Symbol.for("react.lazy"),ft=Symbol.for("react.offscreen"),ve=Symbol.iterator;function $e(i){return i===null||typeof i!="object"?null:(i=ve&&i[ve]||i["@@iterator"],typeof i=="function"?i:null)}var ke=Object.assign,z;function oe(i){if(z===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+i}var Ge=!1;function rt(i,a){if(!i||Ge)return"";Ge=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var f=Y}Reflect.construct(i,[],a)}else{try{a.call()}catch(Y){f=Y}i.call(a.prototype)}else{try{throw Error()}catch(Y){f=Y}i()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var m=Y.stack.split(`
`),_=f.stack.split(`
`),x=m.length-1,D=_.length-1;1<=x&&0<=D&&m[x]!==_[D];)D--;for(;1<=x&&0<=D;x--,D--)if(m[x]!==_[D]){if(x!==1||D!==1)do if(x--,D--,0>D||m[x]!==_[D]){var V=`
`+m[x].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=x&&0<=D);break}}}finally{Ge=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?oe(i):""}function pt(i){switch(i.tag){case 5:return oe(i.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return i=rt(i.type,!1),i;case 11:return i=rt(i.type.render,!1),i;case 1:return i=rt(i.type,!0),i;default:return""}}function _t(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case me:return"Portal";case A:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case ut:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case k:return(i._context.displayName||"Context")+".Provider";case C:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Je:return a=i.displayName||null,a!==null?a:_t(i.type)||"Memo";case hn:a=i._payload,i=i._init;try{return _t(i(a))}catch{}}return null}function St(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _t(a);case 8:return a===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function kt(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function wt(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Wt(i){var a=wt(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,_=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(x){f=""+x,_.call(this,x)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(x){f=""+x},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Se(i){i._valueTracker||(i._valueTracker=Wt(i))}function Et(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=wt(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function It(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Xn(i,a){var c=a.checked;return ke({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function fr(i,a){var c=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;c=kt(a.value!=null?a.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Mo(i,a){a=a.checked,a!=null&&Q(i,"checked",a,!1)}function Pn(i,a){Mo(i,a);var c=kt(a.value),f=a.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?oi(i,a.type,c):a.hasOwnProperty("defaultValue")&&oi(i,a.type,kt(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Lo(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function oi(i,a,c){(a!=="number"||It(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var os=Array.isArray;function as(i,a,c,f){if(i=i.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<i.length;c++)m=a.hasOwnProperty("$"+i[c].value),i[c].selected!==m&&(i[c].selected=m),m&&f&&(i[c].defaultSelected=!0)}else{for(c=""+kt(c),a=null,m=0;m<i.length;m++){if(i[m].value===c){i[m].selected=!0,f&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function jo(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ke({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ai(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(os(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:kt(c)}}function Ui(i,a){var c=kt(a.value),f=kt(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function Vo(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function tn(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?tn(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var _s,Fo=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,f,m){MSApp.execUnsafeLocalFunction(function(){return i(a,c,f,m)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(_s=_s||document.createElement("div"),_s.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=_s.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Vs(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var Fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Us=["Webkit","ms","Moz","O"];Object.keys(Fs).forEach(function(i){Us.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Fs[a]=Fs[i]})});function li(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||Fs.hasOwnProperty(i)&&Fs[i]?(""+a).trim():a+"px"}function Uo(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var f=c.indexOf("--")===0,m=li(c,a[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,m):i[c]=m}}var $o=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zo(i,a){if(a){if($o[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Bo(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ci=null;function $i(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var zi=null,pr=null,$=null;function U(i){if(i=Sc(i)){if(typeof zi!="function")throw Error(t(280));var a=i.stateNode;a&&(a=gd(a),zi(i.stateNode,i.type,a))}}function se(i){pr?$?$.push(i):$=[i]:pr=i}function B(){if(pr){var i=pr,a=$;if($=pr=null,U(i),a)for(i=0;i<a.length;i++)U(a[i])}}function ie(i,a){return i(a)}function ge(){}var ze=!1;function Ae(i,a,c){if(ze)return i(a,c);ze=!0;try{return ie(i,a,c)}finally{ze=!1,(pr!==null||$!==null)&&(ge(),B())}}function be(i,a){var c=i.stateNode;if(c===null)return null;var f=gd(c);if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var Ze=!1;if(u)try{var Ce={};Object.defineProperty(Ce,"passive",{get:function(){Ze=!0}}),window.addEventListener("test",Ce,Ce),window.removeEventListener("test",Ce,Ce)}catch{Ze=!1}function Ye(i,a,c,f,m,_,x,D,V){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(c,Y)}catch(ue){this.onError(ue)}}var dt=!1,mt=null,Kt=!1,Bt=null,Nn={onError:function(i){dt=!0,mt=i}};function Yt(i,a,c,f,m,_,x,D,V){dt=!1,mt=null,Ye.apply(Nn,arguments)}function We(i,a,c,f,m,_,x,D,V){if(Yt.apply(this,arguments),dt){if(dt){var Y=mt;dt=!1,mt=null}else throw Error(t(198));Kt||(Kt=!0,Bt=Y)}}function Te(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function Ct(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function gt(i){if(Te(i)!==i)throw Error(t(188))}function Ut(i){var a=i.alternate;if(!a){if(a=Te(i),a===null)throw Error(t(188));return a!==i?null:i}for(var c=i,f=a;;){var m=c.return;if(m===null)break;var _=m.alternate;if(_===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===c)return gt(m),i;if(_===f)return gt(m),a;_=_.sibling}throw Error(t(188))}if(c.return!==f.return)c=m,f=_;else{for(var x=!1,D=m.child;D;){if(D===c){x=!0,c=m,f=_;break}if(D===f){x=!0,f=m,c=_;break}D=D.sibling}if(!x){for(D=_.child;D;){if(D===c){x=!0,c=_,f=m;break}if(D===f){x=!0,f=_,c=m;break}D=D.sibling}if(!x)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:a}function Mt(i){return i=Ut(i),i!==null?Ve(i):null}function Ve(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Ve(i);if(a!==null)return a;i=i.sibling}return null}var $t=e.unstable_scheduleCallback,lt=e.unstable_cancelCallback,st=e.unstable_shouldYield,yt=e.unstable_requestPaint,xe=e.unstable_now,En=e.unstable_getCurrentPriorityLevel,yn=e.unstable_ImmediatePriority,Rt=e.unstable_UserBlockingPriority,vt=e.unstable_NormalPriority,te=e.unstable_LowPriority,ee=e.unstable_IdlePriority,J=null,Ne=null;function Nt(i){if(Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(J,i,void 0,(i.current.flags&128)===128)}catch{}}var et=Math.clz32?Math.clz32:kr,Zn=Math.log,Sr=Math.LN2;function kr(i){return i>>>=0,i===0?32:31-(Zn(i)/Sr|0)|0}var On=64,_e=4194304;function fe(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Z(i,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,m=i.suspendedLanes,_=i.pingedLanes,x=c&268435455;if(x!==0){var D=x&~m;D!==0?f=fe(D):(_&=x,_!==0&&(f=fe(_)))}else x=c&~m,x!==0?f=fe(x):_!==0&&(f=fe(_));if(f===0)return 0;if(a!==0&&a!==f&&(a&m)===0&&(m=f&-f,_=a&-a,m>=_||m===16&&(_&4194240)!==0))return a;if((f&4)!==0&&(f|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)c=31-et(a),m=1<<c,f|=i[c],a&=~m;return f}function we(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Le(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,m=i.expirationTimes,_=i.pendingLanes;0<_;){var x=31-et(_),D=1<<x,V=m[x];V===-1?((D&c)===0||(D&f)!==0)&&(m[x]=we(D,a)):V<=a&&(i.expiredLanes|=D),_&=~D}}function Fe(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function De(){var i=On;return On<<=1,(On&4194240)===0&&(On=64),i}function it(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function ot(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-et(a),i[a]=c}function Oe(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var m=31-et(c),_=1<<m;a[m]=0,f[m]=-1,i[m]=-1,c&=~_}}function Pt(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-et(c),m=1<<f;m&a|i[f]&a&&(i[f]|=a),c&=~m}}var Be=0;function Hn(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var er,Rr,Bi,qo,Ha,ui=!1,qr=[],nn=null,Ar=null,tr=null,ws=new Map,mr=new Map,nr=[],gr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yr(i,a){switch(i){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":ws.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":mr.delete(a.pointerId)}}function Cr(i,a,c,f,m,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:_,targetContainers:[m]},a!==null&&(a=Sc(a),a!==null&&Rr(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function tp(i,a,c,f,m){switch(a){case"focusin":return nn=Cr(nn,i,a,c,f,m),!0;case"dragenter":return Ar=Cr(Ar,i,a,c,f,m),!0;case"mouseover":return tr=Cr(tr,i,a,c,f,m),!0;case"pointerover":var _=m.pointerId;return ws.set(_,Cr(ws.get(_)||null,i,a,c,f,m)),!0;case"gotpointercapture":return _=m.pointerId,mr.set(_,Cr(mr.get(_)||null,i,a,c,f,m)),!0}return!1}function ed(i){var a=Qo(i.target);if(a!==null){var c=Te(a);if(c!==null){if(a=c.tag,a===13){if(a=Ct(c),a!==null){i.blockedOn=a,Ha(i.priority,function(){Bi(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function di(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Ga(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);ci=f,c.target.dispatchEvent(f),ci=null}else return a=Sc(c),a!==null&&Rr(a),i.blockedOn=c,!1;a.shift()}return!0}function Ho(i,a,c){di(i)&&c.delete(a)}function td(){ui=!1,nn!==null&&di(nn)&&(nn=null),Ar!==null&&di(Ar)&&(Ar=null),tr!==null&&di(tr)&&(tr=null),ws.forEach(Ho),mr.forEach(Ho)}function Es(i,a){i.blockedOn===a&&(i.blockedOn=null,ui||(ui=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,td)))}function Ts(i){function a(m){return Es(m,i)}if(0<qr.length){Es(qr[0],i);for(var c=1;c<qr.length;c++){var f=qr[c];f.blockedOn===i&&(f.blockedOn=null)}}for(nn!==null&&Es(nn,i),Ar!==null&&Es(Ar,i),tr!==null&&Es(tr,i),ws.forEach(a),mr.forEach(a),c=0;c<nr.length;c++)f=nr[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<nr.length&&(c=nr[0],c.blockedOn===null);)ed(c),c.blockedOn===null&&nr.shift()}var hi=ae.ReactCurrentBatchConfig,qi=!0;function rn(i,a,c,f){var m=Be,_=hi.transition;hi.transition=null;try{Be=1,hc(i,a,c,f)}finally{Be=m,hi.transition=_}}function np(i,a,c,f){var m=Be,_=hi.transition;hi.transition=null;try{Be=4,hc(i,a,c,f)}finally{Be=m,hi.transition=_}}function hc(i,a,c,f){if(qi){var m=Ga(i,a,c,f);if(m===null)fp(i,a,f,Go,c),yr(i,f);else if(tp(m,i,a,c,f))f.stopPropagation();else if(yr(i,f),a&4&&-1<gr.indexOf(i)){for(;m!==null;){var _=Sc(m);if(_!==null&&er(_),_=Ga(i,a,c,f),_===null&&fp(i,a,f,Go,c),_===m)break;m=_}m!==null&&f.stopPropagation()}else fp(i,a,f,null,c)}}var Go=null;function Ga(i,a,c,f){if(Go=null,i=$i(f),i=Qo(i),i!==null)if(a=Te(i),a===null)i=null;else if(c=a.tag,c===13){if(i=Ct(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Go=i,null}function fc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(En()){case yn:return 1;case Rt:return 4;case vt:case te:return 16;case ee:return 536870912;default:return 16}default:return 16}}var Hr=null,Ka=null,Pr=null;function pc(){if(Pr)return Pr;var i,a=Ka,c=a.length,f,m="value"in Hr?Hr.value:Hr.textContent,_=m.length;for(i=0;i<c&&a[i]===m[i];i++);var x=c-i;for(f=1;f<=x&&a[c-f]===m[_-f];f++);return Pr=m.slice(i,1<f?1-f:void 0)}function Wa(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function $s(){return!0}function mc(){return!1}function Gn(i){function a(c,f,m,_,x){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(c=i[D],this[D]=c?c(_):_[D]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?$s:mc,this.isPropagationStopped=mc,this}return ke(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),a}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=Gn(xs),zs=ke({},xs,{view:0,detail:0}),rp=Gn(zs),Ya,fi,Hi,Ko=ke({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Hi&&(Hi&&i.type==="mousemove"?(Ya=i.screenX-Hi.screenX,fi=i.screenY-Hi.screenY):fi=Ya=0,Hi=i),Ya)},movementY:function(i){return"movementY"in i?i.movementY:fi}}),Ja=Gn(Ko),gc=ke({},Ko,{dataTransfer:0}),nd=Gn(gc),Xa=ke({},zs,{relatedTarget:0}),Za=Gn(Xa),rd=ke({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),pi=Gn(rd),sd=ke({},xs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),id=Gn(sd),od=ke({},xs,{data:0}),yc=Gn(od),el={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ad={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ld(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=ad[i])?!!a[i]:!1}function Bs(){return ld}var h=ke({},zs,{key:function(i){if(i.key){var a=el[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Wa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vr[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(i){return i.type==="keypress"?Wa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Wa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=Gn(h),E=ke({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b=Gn(E),q=ke({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),ne=Gn(q),Ee=ke({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),qt=Gn(Ee),bn=ke({},Ko,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ot=Gn(bn),Dn=[9,13,27,32],Tn=u&&"CompositionEvent"in window,ls=null;u&&"documentMode"in document&&(ls=document.documentMode);var Gr=u&&"TextEvent"in window&&!ls,Wo=u&&(!Tn||ls&&8<ls&&11>=ls),tl=" ",o_=!1;function a_(i,a){switch(i){case"keyup":return Dn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var nl=!1;function LR(i,a){switch(i){case"compositionend":return l_(a);case"keypress":return a.which!==32?null:(o_=!0,tl);case"textInput":return i=a.data,i===tl&&o_?null:i;default:return null}}function jR(i,a){if(nl)return i==="compositionend"||!Tn&&a_(i,a)?(i=pc(),Pr=Ka=Hr=null,nl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Wo&&a.locale!=="ko"?null:a.data;default:return null}}var VR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c_(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!VR[i.type]:a==="textarea"}function u_(i,a,c,f){se(f),a=fd(a,"onChange"),0<a.length&&(c=new Qa("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var vc=null,_c=null;function FR(i){R_(i,0)}function cd(i){var a=al(i);if(Et(a))return i}function UR(i,a){if(i==="change")return a}var d_=!1;if(u){var sp;if(u){var ip="oninput"in document;if(!ip){var h_=document.createElement("div");h_.setAttribute("oninput","return;"),ip=typeof h_.oninput=="function"}sp=ip}else sp=!1;d_=sp&&(!document.documentMode||9<document.documentMode)}function f_(){vc&&(vc.detachEvent("onpropertychange",p_),_c=vc=null)}function p_(i){if(i.propertyName==="value"&&cd(_c)){var a=[];u_(a,_c,i,$i(i)),Ae(FR,a)}}function $R(i,a,c){i==="focusin"?(f_(),vc=a,_c=c,vc.attachEvent("onpropertychange",p_)):i==="focusout"&&f_()}function zR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return cd(_c)}function BR(i,a){if(i==="click")return cd(a)}function qR(i,a){if(i==="input"||i==="change")return cd(a)}function HR(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Is=typeof Object.is=="function"?Object.is:HR;function wc(i,a){if(Is(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!d.call(a,m)||!Is(i[m],a[m]))return!1}return!0}function m_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function g_(i,a){var c=m_(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=m_(c)}}function y_(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?y_(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function v_(){for(var i=window,a=It();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=It(i.document)}return a}function op(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function GR(i){var a=v_(),c=i.focusedElem,f=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&y_(c.ownerDocument.documentElement,c)){if(f!==null&&op(c)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var m=c.textContent.length,_=Math.min(f.start,m);f=f.end===void 0?_:Math.min(f.end,m),!i.extend&&_>f&&(m=f,f=_,_=m),m=g_(c,_);var x=g_(c,f);m&&x&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==x.node||i.focusOffset!==x.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),i.removeAllRanges(),_>f?(i.addRange(a),i.extend(x.node,x.offset)):(a.setEnd(x.node,x.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var KR=u&&"documentMode"in document&&11>=document.documentMode,rl=null,ap=null,Ec=null,lp=!1;function __(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;lp||rl==null||rl!==It(f)||(f=rl,"selectionStart"in f&&op(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ec&&wc(Ec,f)||(Ec=f,f=fd(ap,"onSelect"),0<f.length&&(a=new Qa("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=rl)))}function ud(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var sl={animationend:ud("Animation","AnimationEnd"),animationiteration:ud("Animation","AnimationIteration"),animationstart:ud("Animation","AnimationStart"),transitionend:ud("Transition","TransitionEnd")},cp={},w_={};u&&(w_=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function dd(i){if(cp[i])return cp[i];if(!sl[i])return i;var a=sl[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in w_)return cp[i]=a[c];return i}var E_=dd("animationend"),T_=dd("animationiteration"),x_=dd("animationstart"),I_=dd("transitionend"),b_=new Map,S_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(i,a){b_.set(i,a),o(a,[i])}for(var up=0;up<S_.length;up++){var dp=S_[up],WR=dp.toLowerCase(),QR=dp[0].toUpperCase()+dp.slice(1);Gi(WR,"on"+QR)}Gi(E_,"onAnimationEnd"),Gi(T_,"onAnimationIteration"),Gi(x_,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(I_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tc));function k_(i,a,c){var f=i.type||"unknown-event";i.currentTarget=c,We(f,a,void 0,i),i.currentTarget=null}function R_(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],m=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var x=f.length-1;0<=x;x--){var D=f[x],V=D.instance,Y=D.currentTarget;if(D=D.listener,V!==_&&m.isPropagationStopped())break e;k_(m,D,Y),_=V}else for(x=0;x<f.length;x++){if(D=f[x],V=D.instance,Y=D.currentTarget,D=D.listener,V!==_&&m.isPropagationStopped())break e;k_(m,D,Y),_=V}}}if(Kt)throw i=Bt,Kt=!1,Bt=null,i}function Zt(i,a){var c=a[_p];c===void 0&&(c=a[_p]=new Set);var f=i+"__bubble";c.has(f)||(A_(a,i,2,!1),c.add(f))}function hp(i,a,c){var f=0;a&&(f|=4),A_(c,i,f,a)}var hd="_reactListening"+Math.random().toString(36).slice(2);function xc(i){if(!i[hd]){i[hd]=!0,r.forEach(function(c){c!=="selectionchange"&&(YR.has(c)||hp(c,!1,i),hp(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[hd]||(a[hd]=!0,hp("selectionchange",!1,a))}}function A_(i,a,c,f){switch(fc(a)){case 1:var m=rn;break;case 4:m=np;break;default:m=hc}c=m.bind(null,a,c,i),m=void 0,!Ze||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?i.addEventListener(a,c,{capture:!0,passive:m}):i.addEventListener(a,c,!0):m!==void 0?i.addEventListener(a,c,{passive:m}):i.addEventListener(a,c,!1)}function fp(i,a,c,f,m){var _=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var x=f.tag;if(x===3||x===4){var D=f.stateNode.containerInfo;if(D===m||D.nodeType===8&&D.parentNode===m)break;if(x===4)for(x=f.return;x!==null;){var V=x.tag;if((V===3||V===4)&&(V=x.stateNode.containerInfo,V===m||V.nodeType===8&&V.parentNode===m))return;x=x.return}for(;D!==null;){if(x=Qo(D),x===null)return;if(V=x.tag,V===5||V===6){f=_=x;continue e}D=D.parentNode}}f=f.return}Ae(function(){var Y=_,ue=$i(c),he=[];e:{var le=b_.get(i);if(le!==void 0){var Re=Qa,je=i;switch(i){case"keypress":if(Wa(c)===0)break e;case"keydown":case"keyup":Re=v;break;case"focusin":je="focus",Re=Za;break;case"focusout":je="blur",Re=Za;break;case"beforeblur":case"afterblur":Re=Za;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=Ja;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=nd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=ne;break;case E_:case T_:case x_:Re=pi;break;case I_:Re=qt;break;case"scroll":Re=rp;break;case"wheel":Re=Ot;break;case"copy":case"cut":case"paste":Re=id;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=b}var qe=(a&4)!==0,vn=!qe&&i==="scroll",H=qe?le!==null?le+"Capture":null:le;qe=[];for(var F=Y,K;F!==null;){K=F;var ye=K.stateNode;if(K.tag===5&&ye!==null&&(K=ye,H!==null&&(ye=be(F,H),ye!=null&&qe.push(Ic(F,ye,K)))),vn)break;F=F.return}0<qe.length&&(le=new Re(le,je,null,c,ue),he.push({event:le,listeners:qe}))}}if((a&7)===0){e:{if(le=i==="mouseover"||i==="pointerover",Re=i==="mouseout"||i==="pointerout",le&&c!==ci&&(je=c.relatedTarget||c.fromElement)&&(Qo(je)||je[mi]))break e;if((Re||le)&&(le=ue.window===ue?ue:(le=ue.ownerDocument)?le.defaultView||le.parentWindow:window,Re?(je=c.relatedTarget||c.toElement,Re=Y,je=je?Qo(je):null,je!==null&&(vn=Te(je),je!==vn||je.tag!==5&&je.tag!==6)&&(je=null)):(Re=null,je=Y),Re!==je)){if(qe=Ja,ye="onMouseLeave",H="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(qe=b,ye="onPointerLeave",H="onPointerEnter",F="pointer"),vn=Re==null?le:al(Re),K=je==null?le:al(je),le=new qe(ye,F+"leave",Re,c,ue),le.target=vn,le.relatedTarget=K,ye=null,Qo(ue)===Y&&(qe=new qe(H,F+"enter",je,c,ue),qe.target=K,qe.relatedTarget=vn,ye=qe),vn=ye,Re&&je)t:{for(qe=Re,H=je,F=0,K=qe;K;K=il(K))F++;for(K=0,ye=H;ye;ye=il(ye))K++;for(;0<F-K;)qe=il(qe),F--;for(;0<K-F;)H=il(H),K--;for(;F--;){if(qe===H||H!==null&&qe===H.alternate)break t;qe=il(qe),H=il(H)}qe=null}else qe=null;Re!==null&&C_(he,le,Re,qe,!1),je!==null&&vn!==null&&C_(he,vn,je,qe,!0)}}e:{if(le=Y?al(Y):window,Re=le.nodeName&&le.nodeName.toLowerCase(),Re==="select"||Re==="input"&&le.type==="file")var Ke=UR;else if(c_(le))if(d_)Ke=qR;else{Ke=zR;var tt=$R}else(Re=le.nodeName)&&Re.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(Ke=BR);if(Ke&&(Ke=Ke(i,Y))){u_(he,Ke,c,ue);break e}tt&&tt(i,le,Y),i==="focusout"&&(tt=le._wrapperState)&&tt.controlled&&le.type==="number"&&oi(le,"number",le.value)}switch(tt=Y?al(Y):window,i){case"focusin":(c_(tt)||tt.contentEditable==="true")&&(rl=tt,ap=Y,Ec=null);break;case"focusout":Ec=ap=rl=null;break;case"mousedown":lp=!0;break;case"contextmenu":case"mouseup":case"dragend":lp=!1,__(he,c,ue);break;case"selectionchange":if(KR)break;case"keydown":case"keyup":__(he,c,ue)}var nt;if(Tn)e:{switch(i){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else nl?a_(i,c)&&(ct="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(ct="onCompositionStart");ct&&(Wo&&c.locale!=="ko"&&(nl||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&nl&&(nt=pc()):(Hr=ue,Ka="value"in Hr?Hr.value:Hr.textContent,nl=!0)),tt=fd(Y,ct),0<tt.length&&(ct=new yc(ct,i,null,c,ue),he.push({event:ct,listeners:tt}),nt?ct.data=nt:(nt=l_(c),nt!==null&&(ct.data=nt)))),(nt=Gr?LR(i,c):jR(i,c))&&(Y=fd(Y,"onBeforeInput"),0<Y.length&&(ue=new yc("onBeforeInput","beforeinput",null,c,ue),he.push({event:ue,listeners:Y}),ue.data=nt))}R_(he,a)})}function Ic(i,a,c){return{instance:i,listener:a,currentTarget:c}}function fd(i,a){for(var c=a+"Capture",f=[];i!==null;){var m=i,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=be(i,c),_!=null&&f.unshift(Ic(i,_,m)),_=be(i,a),_!=null&&f.push(Ic(i,_,m))),i=i.return}return f}function il(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function C_(i,a,c,f,m){for(var _=a._reactName,x=[];c!==null&&c!==f;){var D=c,V=D.alternate,Y=D.stateNode;if(V!==null&&V===f)break;D.tag===5&&Y!==null&&(D=Y,m?(V=be(c,_),V!=null&&x.unshift(Ic(c,V,D))):m||(V=be(c,_),V!=null&&x.push(Ic(c,V,D)))),c=c.return}x.length!==0&&i.push({event:a,listeners:x})}var JR=/\r\n?/g,XR=/\u0000|\uFFFD/g;function P_(i){return(typeof i=="string"?i:""+i).replace(JR,`
`).replace(XR,"")}function pd(i,a,c){if(a=P_(a),P_(i)!==a&&c)throw Error(t(425))}function md(){}var pp=null,mp=null;function gp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var yp=typeof setTimeout=="function"?setTimeout:void 0,ZR=typeof clearTimeout=="function"?clearTimeout:void 0,N_=typeof Promise=="function"?Promise:void 0,eA=typeof queueMicrotask=="function"?queueMicrotask:typeof N_<"u"?function(i){return N_.resolve(null).then(i).catch(tA)}:yp;function tA(i){setTimeout(function(){throw i})}function vp(i,a){var c=a,f=0;do{var m=c.nextSibling;if(i.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){i.removeChild(m),Ts(a);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);Ts(a)}function Ki(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function O_(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var ol=Math.random().toString(36).slice(2),qs="__reactFiber$"+ol,bc="__reactProps$"+ol,mi="__reactContainer$"+ol,_p="__reactEvents$"+ol,nA="__reactListeners$"+ol,rA="__reactHandles$"+ol;function Qo(i){var a=i[qs];if(a)return a;for(var c=i.parentNode;c;){if(a=c[mi]||c[qs]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=O_(i);i!==null;){if(c=i[qs])return c;i=O_(i)}return a}i=c,c=i.parentNode}return null}function Sc(i){return i=i[qs]||i[mi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function al(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function gd(i){return i[bc]||null}var wp=[],ll=-1;function Wi(i){return{current:i}}function en(i){0>ll||(i.current=wp[ll],wp[ll]=null,ll--)}function Jt(i,a){ll++,wp[ll]=i.current,i.current=a}var Qi={},rr=Wi(Qi),Nr=Wi(!1),Yo=Qi;function cl(i,a){var c=i.type.contextTypes;if(!c)return Qi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in c)m[_]=a[_];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=m),m}function Or(i){return i=i.childContextTypes,i!=null}function yd(){en(Nr),en(rr)}function D_(i,a,c){if(rr.current!==Qi)throw Error(t(168));Jt(rr,a),Jt(Nr,c)}function M_(i,a,c){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var m in f)if(!(m in a))throw Error(t(108,St(i)||"Unknown",m));return ke({},c,f)}function vd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Qi,Yo=rr.current,Jt(rr,i),Jt(Nr,Nr.current),!0}function L_(i,a,c){var f=i.stateNode;if(!f)throw Error(t(169));c?(i=M_(i,a,Yo),f.__reactInternalMemoizedMergedChildContext=i,en(Nr),en(rr),Jt(rr,i)):en(Nr),Jt(Nr,c)}var gi=null,_d=!1,Ep=!1;function j_(i){gi===null?gi=[i]:gi.push(i)}function sA(i){_d=!0,j_(i)}function Yi(){if(!Ep&&gi!==null){Ep=!0;var i=0,a=Be;try{var c=gi;for(Be=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}gi=null,_d=!1}catch(m){throw gi!==null&&(gi=gi.slice(i+1)),$t(yn,Yi),m}finally{Be=a,Ep=!1}}return null}var ul=[],dl=0,wd=null,Ed=0,cs=[],us=0,Jo=null,yi=1,vi="";function Xo(i,a){ul[dl++]=Ed,ul[dl++]=wd,wd=i,Ed=a}function V_(i,a,c){cs[us++]=yi,cs[us++]=vi,cs[us++]=Jo,Jo=i;var f=yi;i=vi;var m=32-et(f)-1;f&=~(1<<m),c+=1;var _=32-et(a)+m;if(30<_){var x=m-m%5;_=(f&(1<<x)-1).toString(32),f>>=x,m-=x,yi=1<<32-et(a)+m|c<<m|f,vi=_+i}else yi=1<<_|c<<m|f,vi=i}function Tp(i){i.return!==null&&(Xo(i,1),V_(i,1,0))}function xp(i){for(;i===wd;)wd=ul[--dl],ul[dl]=null,Ed=ul[--dl],ul[dl]=null;for(;i===Jo;)Jo=cs[--us],cs[us]=null,vi=cs[--us],cs[us]=null,yi=cs[--us],cs[us]=null}var Kr=null,Wr=null,sn=!1,bs=null;function F_(i,a){var c=ps(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function U_(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Kr=i,Wr=Ki(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Kr=i,Wr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=Jo!==null?{id:yi,overflow:vi}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=ps(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,Kr=i,Wr=null,!0):!1;default:return!1}}function Ip(i){return(i.mode&1)!==0&&(i.flags&128)===0}function bp(i){if(sn){var a=Wr;if(a){var c=a;if(!U_(i,a)){if(Ip(i))throw Error(t(418));a=Ki(c.nextSibling);var f=Kr;a&&U_(i,a)?F_(f,c):(i.flags=i.flags&-4097|2,sn=!1,Kr=i)}}else{if(Ip(i))throw Error(t(418));i.flags=i.flags&-4097|2,sn=!1,Kr=i}}}function $_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Kr=i}function Td(i){if(i!==Kr)return!1;if(!sn)return $_(i),sn=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!gp(i.type,i.memoizedProps)),a&&(a=Wr)){if(Ip(i))throw z_(),Error(t(418));for(;a;)F_(i,a),a=Ki(a.nextSibling)}if($_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){Wr=Ki(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}Wr=null}}else Wr=Kr?Ki(i.stateNode.nextSibling):null;return!0}function z_(){for(var i=Wr;i;)i=Ki(i.nextSibling)}function hl(){Wr=Kr=null,sn=!1}function Sp(i){bs===null?bs=[i]:bs.push(i)}var iA=ae.ReactCurrentBatchConfig;function kc(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,i));var m=f,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(x){var D=m.refs;x===null?delete D[_]:D[_]=x},a._stringRef=_,a)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function xd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function B_(i){var a=i._init;return a(i._payload)}function q_(i){function a(H,F){if(i){var K=H.deletions;K===null?(H.deletions=[F],H.flags|=16):K.push(F)}}function c(H,F){if(!i)return null;for(;F!==null;)a(H,F),F=F.sibling;return null}function f(H,F){for(H=new Map;F!==null;)F.key!==null?H.set(F.key,F):H.set(F.index,F),F=F.sibling;return H}function m(H,F){return H=so(H,F),H.index=0,H.sibling=null,H}function _(H,F,K){return H.index=K,i?(K=H.alternate,K!==null?(K=K.index,K<F?(H.flags|=2,F):K):(H.flags|=2,F)):(H.flags|=1048576,F)}function x(H){return i&&H.alternate===null&&(H.flags|=2),H}function D(H,F,K,ye){return F===null||F.tag!==6?(F=ym(K,H.mode,ye),F.return=H,F):(F=m(F,K),F.return=H,F)}function V(H,F,K,ye){var Ke=K.type;return Ke===N?ue(H,F,K.props.children,ye,K.key):F!==null&&(F.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===hn&&B_(Ke)===F.type)?(ye=m(F,K.props),ye.ref=kc(H,F,K),ye.return=H,ye):(ye=Kd(K.type,K.key,K.props,null,H.mode,ye),ye.ref=kc(H,F,K),ye.return=H,ye)}function Y(H,F,K,ye){return F===null||F.tag!==4||F.stateNode.containerInfo!==K.containerInfo||F.stateNode.implementation!==K.implementation?(F=vm(K,H.mode,ye),F.return=H,F):(F=m(F,K.children||[]),F.return=H,F)}function ue(H,F,K,ye,Ke){return F===null||F.tag!==7?(F=oa(K,H.mode,ye,Ke),F.return=H,F):(F=m(F,K),F.return=H,F)}function he(H,F,K){if(typeof F=="string"&&F!==""||typeof F=="number")return F=ym(""+F,H.mode,K),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case de:return K=Kd(F.type,F.key,F.props,null,H.mode,K),K.ref=kc(H,null,F),K.return=H,K;case me:return F=vm(F,H.mode,K),F.return=H,F;case hn:var ye=F._init;return he(H,ye(F._payload),K)}if(os(F)||$e(F))return F=oa(F,H.mode,K,null),F.return=H,F;xd(H,F)}return null}function le(H,F,K,ye){var Ke=F!==null?F.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Ke!==null?null:D(H,F,""+K,ye);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case de:return K.key===Ke?V(H,F,K,ye):null;case me:return K.key===Ke?Y(H,F,K,ye):null;case hn:return Ke=K._init,le(H,F,Ke(K._payload),ye)}if(os(K)||$e(K))return Ke!==null?null:ue(H,F,K,ye,null);xd(H,K)}return null}function Re(H,F,K,ye,Ke){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return H=H.get(K)||null,D(F,H,""+ye,Ke);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case de:return H=H.get(ye.key===null?K:ye.key)||null,V(F,H,ye,Ke);case me:return H=H.get(ye.key===null?K:ye.key)||null,Y(F,H,ye,Ke);case hn:var tt=ye._init;return Re(H,F,K,tt(ye._payload),Ke)}if(os(ye)||$e(ye))return H=H.get(K)||null,ue(F,H,ye,Ke,null);xd(F,ye)}return null}function je(H,F,K,ye){for(var Ke=null,tt=null,nt=F,ct=F=0,jn=null;nt!==null&&ct<K.length;ct++){nt.index>ct?(jn=nt,nt=null):jn=nt.sibling;var jt=le(H,nt,K[ct],ye);if(jt===null){nt===null&&(nt=jn);break}i&&nt&&jt.alternate===null&&a(H,nt),F=_(jt,F,ct),tt===null?Ke=jt:tt.sibling=jt,tt=jt,nt=jn}if(ct===K.length)return c(H,nt),sn&&Xo(H,ct),Ke;if(nt===null){for(;ct<K.length;ct++)nt=he(H,K[ct],ye),nt!==null&&(F=_(nt,F,ct),tt===null?Ke=nt:tt.sibling=nt,tt=nt);return sn&&Xo(H,ct),Ke}for(nt=f(H,nt);ct<K.length;ct++)jn=Re(nt,H,ct,K[ct],ye),jn!==null&&(i&&jn.alternate!==null&&nt.delete(jn.key===null?ct:jn.key),F=_(jn,F,ct),tt===null?Ke=jn:tt.sibling=jn,tt=jn);return i&&nt.forEach(function(io){return a(H,io)}),sn&&Xo(H,ct),Ke}function qe(H,F,K,ye){var Ke=$e(K);if(typeof Ke!="function")throw Error(t(150));if(K=Ke.call(K),K==null)throw Error(t(151));for(var tt=Ke=null,nt=F,ct=F=0,jn=null,jt=K.next();nt!==null&&!jt.done;ct++,jt=K.next()){nt.index>ct?(jn=nt,nt=null):jn=nt.sibling;var io=le(H,nt,jt.value,ye);if(io===null){nt===null&&(nt=jn);break}i&&nt&&io.alternate===null&&a(H,nt),F=_(io,F,ct),tt===null?Ke=io:tt.sibling=io,tt=io,nt=jn}if(jt.done)return c(H,nt),sn&&Xo(H,ct),Ke;if(nt===null){for(;!jt.done;ct++,jt=K.next())jt=he(H,jt.value,ye),jt!==null&&(F=_(jt,F,ct),tt===null?Ke=jt:tt.sibling=jt,tt=jt);return sn&&Xo(H,ct),Ke}for(nt=f(H,nt);!jt.done;ct++,jt=K.next())jt=Re(nt,H,ct,jt.value,ye),jt!==null&&(i&&jt.alternate!==null&&nt.delete(jt.key===null?ct:jt.key),F=_(jt,F,ct),tt===null?Ke=jt:tt.sibling=jt,tt=jt);return i&&nt.forEach(function(VA){return a(H,VA)}),sn&&Xo(H,ct),Ke}function vn(H,F,K,ye){if(typeof K=="object"&&K!==null&&K.type===N&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case de:e:{for(var Ke=K.key,tt=F;tt!==null;){if(tt.key===Ke){if(Ke=K.type,Ke===N){if(tt.tag===7){c(H,tt.sibling),F=m(tt,K.props.children),F.return=H,H=F;break e}}else if(tt.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===hn&&B_(Ke)===tt.type){c(H,tt.sibling),F=m(tt,K.props),F.ref=kc(H,tt,K),F.return=H,H=F;break e}c(H,tt);break}else a(H,tt);tt=tt.sibling}K.type===N?(F=oa(K.props.children,H.mode,ye,K.key),F.return=H,H=F):(ye=Kd(K.type,K.key,K.props,null,H.mode,ye),ye.ref=kc(H,F,K),ye.return=H,H=ye)}return x(H);case me:e:{for(tt=K.key;F!==null;){if(F.key===tt)if(F.tag===4&&F.stateNode.containerInfo===K.containerInfo&&F.stateNode.implementation===K.implementation){c(H,F.sibling),F=m(F,K.children||[]),F.return=H,H=F;break e}else{c(H,F);break}else a(H,F);F=F.sibling}F=vm(K,H.mode,ye),F.return=H,H=F}return x(H);case hn:return tt=K._init,vn(H,F,tt(K._payload),ye)}if(os(K))return je(H,F,K,ye);if($e(K))return qe(H,F,K,ye);xd(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,F!==null&&F.tag===6?(c(H,F.sibling),F=m(F,K),F.return=H,H=F):(c(H,F),F=ym(K,H.mode,ye),F.return=H,H=F),x(H)):c(H,F)}return vn}var fl=q_(!0),H_=q_(!1),Id=Wi(null),bd=null,pl=null,kp=null;function Rp(){kp=pl=bd=null}function Ap(i){var a=Id.current;en(Id),i._currentValue=a}function Cp(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function ml(i,a){bd=i,kp=pl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Dr=!0),i.firstContext=null)}function ds(i){var a=i._currentValue;if(kp!==i)if(i={context:i,memoizedValue:a,next:null},pl===null){if(bd===null)throw Error(t(308));pl=i,bd.dependencies={lanes:0,firstContext:i}}else pl=pl.next=i;return a}var Zo=null;function Pp(i){Zo===null?Zo=[i]:Zo.push(i)}function G_(i,a,c,f){var m=a.interleaved;return m===null?(c.next=c,Pp(a)):(c.next=m.next,m.next=c),a.interleaved=c,_i(i,f)}function _i(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Ji=!1;function Np(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K_(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function wi(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Xi(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Lt&2)!==0){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,_i(i,c)}return m=f.interleaved,m===null?(a.next=a,Pp(f)):(a.next=m.next,m.next=a),f.interleaved=a,_i(i,c)}function Sd(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Pt(i,c)}}function W_(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var x={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?m=_=x:_=_.next=x,c=c.next}while(c!==null);_===null?m=_=a:_=_.next=a}else m=_=a;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function kd(i,a,c,f){var m=i.updateQueue;Ji=!1;var _=m.firstBaseUpdate,x=m.lastBaseUpdate,D=m.shared.pending;if(D!==null){m.shared.pending=null;var V=D,Y=V.next;V.next=null,x===null?_=Y:x.next=Y,x=V;var ue=i.alternate;ue!==null&&(ue=ue.updateQueue,D=ue.lastBaseUpdate,D!==x&&(D===null?ue.firstBaseUpdate=Y:D.next=Y,ue.lastBaseUpdate=V))}if(_!==null){var he=m.baseState;x=0,ue=Y=V=null,D=_;do{var le=D.lane,Re=D.eventTime;if((f&le)===le){ue!==null&&(ue=ue.next={eventTime:Re,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var je=i,qe=D;switch(le=a,Re=c,qe.tag){case 1:if(je=qe.payload,typeof je=="function"){he=je.call(Re,he,le);break e}he=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=qe.payload,le=typeof je=="function"?je.call(Re,he,le):je,le==null)break e;he=ke({},he,le);break e;case 2:Ji=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,le=m.effects,le===null?m.effects=[D]:le.push(D))}else Re={eventTime:Re,lane:le,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ue===null?(Y=ue=Re,V=he):ue=ue.next=Re,x|=le;if(D=D.next,D===null){if(D=m.shared.pending,D===null)break;le=D,D=le.next,le.next=null,m.lastBaseUpdate=le,m.shared.pending=null}}while(!0);if(ue===null&&(V=he),m.baseState=V,m.firstBaseUpdate=Y,m.lastBaseUpdate=ue,a=m.shared.interleaved,a!==null){m=a;do x|=m.lane,m=m.next;while(m!==a)}else _===null&&(m.shared.lanes=0);na|=x,i.lanes=x,i.memoizedState=he}}function Q_(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],m=f.callback;if(m!==null){if(f.callback=null,f=c,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var Rc={},Hs=Wi(Rc),Ac=Wi(Rc),Cc=Wi(Rc);function ea(i){if(i===Rc)throw Error(t(174));return i}function Op(i,a){switch(Jt(Cc,a),Jt(Ac,i),Jt(Hs,Rc),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Qt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Qt(a,i)}en(Hs),Jt(Hs,a)}function gl(){en(Hs),en(Ac),en(Cc)}function Y_(i){ea(Cc.current);var a=ea(Hs.current),c=Qt(a,i.type);a!==c&&(Jt(Ac,i),Jt(Hs,c))}function Dp(i){Ac.current===i&&(en(Hs),en(Ac))}var ln=Wi(0);function Rd(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Mp=[];function Lp(){for(var i=0;i<Mp.length;i++)Mp[i]._workInProgressVersionPrimary=null;Mp.length=0}var Ad=ae.ReactCurrentDispatcher,jp=ae.ReactCurrentBatchConfig,ta=0,cn=null,Sn=null,Mn=null,Cd=!1,Pc=!1,Nc=0,oA=0;function sr(){throw Error(t(321))}function Vp(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!Is(i[c],a[c]))return!1;return!0}function Fp(i,a,c,f,m,_){if(ta=_,cn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ad.current=i===null||i.memoizedState===null?uA:dA,i=c(f,m),Pc){_=0;do{if(Pc=!1,Nc=0,25<=_)throw Error(t(301));_+=1,Mn=Sn=null,a.updateQueue=null,Ad.current=hA,i=c(f,m)}while(Pc)}if(Ad.current=Od,a=Sn!==null&&Sn.next!==null,ta=0,Mn=Sn=cn=null,Cd=!1,a)throw Error(t(300));return i}function Up(){var i=Nc!==0;return Nc=0,i}function Gs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?cn.memoizedState=Mn=i:Mn=Mn.next=i,Mn}function hs(){if(Sn===null){var i=cn.alternate;i=i!==null?i.memoizedState:null}else i=Sn.next;var a=Mn===null?cn.memoizedState:Mn.next;if(a!==null)Mn=a,Sn=i;else{if(i===null)throw Error(t(310));Sn=i,i={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Mn===null?cn.memoizedState=Mn=i:Mn=Mn.next=i}return Mn}function Oc(i,a){return typeof a=="function"?a(i):a}function $p(i){var a=hs(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=Sn,m=f.baseQueue,_=c.pending;if(_!==null){if(m!==null){var x=m.next;m.next=_.next,_.next=x}f.baseQueue=m=_,c.pending=null}if(m!==null){_=m.next,f=f.baseState;var D=x=null,V=null,Y=_;do{var ue=Y.lane;if((ta&ue)===ue)V!==null&&(V=V.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:i(f,Y.action);else{var he={lane:ue,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};V===null?(D=V=he,x=f):V=V.next=he,cn.lanes|=ue,na|=ue}Y=Y.next}while(Y!==null&&Y!==_);V===null?x=f:V.next=D,Is(f,a.memoizedState)||(Dr=!0),a.memoizedState=f,a.baseState=x,a.baseQueue=V,c.lastRenderedState=f}if(i=c.interleaved,i!==null){m=i;do _=m.lane,cn.lanes|=_,na|=_,m=m.next;while(m!==i)}else m===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function zp(i){var a=hs(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=c.dispatch,m=c.pending,_=a.memoizedState;if(m!==null){c.pending=null;var x=m=m.next;do _=i(_,x.action),x=x.next;while(x!==m);Is(_,a.memoizedState)||(Dr=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),c.lastRenderedState=_}return[_,f]}function J_(){}function X_(i,a){var c=cn,f=hs(),m=a(),_=!Is(f.memoizedState,m);if(_&&(f.memoizedState=m,Dr=!0),f=f.queue,Bp(t0.bind(null,c,f,i),[i]),f.getSnapshot!==a||_||Mn!==null&&Mn.memoizedState.tag&1){if(c.flags|=2048,Dc(9,e0.bind(null,c,f,m,a),void 0,null),Ln===null)throw Error(t(349));(ta&30)!==0||Z_(c,a,m)}return m}function Z_(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=cn.updateQueue,a===null?(a={lastEffect:null,stores:null},cn.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function e0(i,a,c,f){a.value=c,a.getSnapshot=f,n0(a)&&r0(i)}function t0(i,a,c){return c(function(){n0(a)&&r0(i)})}function n0(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!Is(i,c)}catch{return!0}}function r0(i){var a=_i(i,1);a!==null&&As(a,i,1,-1)}function s0(i){var a=Gs();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:i},a.queue=i,i=i.dispatch=cA.bind(null,cn,i),[a.memoizedState,i]}function Dc(i,a,c,f){return i={tag:i,create:a,destroy:c,deps:f,next:null},a=cn.updateQueue,a===null?(a={lastEffect:null,stores:null},cn.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i)),i}function i0(){return hs().memoizedState}function Pd(i,a,c,f){var m=Gs();cn.flags|=i,m.memoizedState=Dc(1|a,c,void 0,f===void 0?null:f)}function Nd(i,a,c,f){var m=hs();f=f===void 0?null:f;var _=void 0;if(Sn!==null){var x=Sn.memoizedState;if(_=x.destroy,f!==null&&Vp(f,x.deps)){m.memoizedState=Dc(a,c,_,f);return}}cn.flags|=i,m.memoizedState=Dc(1|a,c,_,f)}function o0(i,a){return Pd(8390656,8,i,a)}function Bp(i,a){return Nd(2048,8,i,a)}function a0(i,a){return Nd(4,2,i,a)}function l0(i,a){return Nd(4,4,i,a)}function c0(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function u0(i,a,c){return c=c!=null?c.concat([i]):null,Nd(4,4,c0.bind(null,a,i),c)}function qp(){}function d0(i,a){var c=hs();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&Vp(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function h0(i,a){var c=hs();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&Vp(a,f[1])?f[0]:(i=i(),c.memoizedState=[i,a],i)}function f0(i,a,c){return(ta&21)===0?(i.baseState&&(i.baseState=!1,Dr=!0),i.memoizedState=c):(Is(c,a)||(c=De(),cn.lanes|=c,na|=c,i.baseState=!0),a)}function aA(i,a){var c=Be;Be=c!==0&&4>c?c:4,i(!0);var f=jp.transition;jp.transition={};try{i(!1),a()}finally{Be=c,jp.transition=f}}function p0(){return hs().memoizedState}function lA(i,a,c){var f=no(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},m0(i))g0(a,c);else if(c=G_(i,a,c,f),c!==null){var m=wr();As(c,i,f,m),y0(c,a,f)}}function cA(i,a,c){var f=no(i),m={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(m0(i))g0(a,m);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var x=a.lastRenderedState,D=_(x,c);if(m.hasEagerState=!0,m.eagerState=D,Is(D,x)){var V=a.interleaved;V===null?(m.next=m,Pp(a)):(m.next=V.next,V.next=m),a.interleaved=m;return}}catch{}c=G_(i,a,m,f),c!==null&&(m=wr(),As(c,i,f,m),y0(c,a,f))}}function m0(i){var a=i.alternate;return i===cn||a!==null&&a===cn}function g0(i,a){Pc=Cd=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function y0(i,a,c){if((c&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Pt(i,c)}}var Od={readContext:ds,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},uA={readContext:ds,useCallback:function(i,a){return Gs().memoizedState=[i,a===void 0?null:a],i},useContext:ds,useEffect:o0,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,Pd(4194308,4,c0.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Pd(4194308,4,i,a)},useInsertionEffect:function(i,a){return Pd(4,2,i,a)},useMemo:function(i,a){var c=Gs();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var f=Gs();return a=c!==void 0?c(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=lA.bind(null,cn,i),[f.memoizedState,i]},useRef:function(i){var a=Gs();return i={current:i},a.memoizedState=i},useState:s0,useDebugValue:qp,useDeferredValue:function(i){return Gs().memoizedState=i},useTransition:function(){var i=s0(!1),a=i[0];return i=aA.bind(null,i[1]),Gs().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var f=cn,m=Gs();if(sn){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),Ln===null)throw Error(t(349));(ta&30)!==0||Z_(f,a,c)}m.memoizedState=c;var _={value:c,getSnapshot:a};return m.queue=_,o0(t0.bind(null,f,_,i),[i]),f.flags|=2048,Dc(9,e0.bind(null,f,_,c,a),void 0,null),c},useId:function(){var i=Gs(),a=Ln.identifierPrefix;if(sn){var c=vi,f=yi;c=(f&~(1<<32-et(f)-1)).toString(32)+c,a=":"+a+"R"+c,c=Nc++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=oA++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},dA={readContext:ds,useCallback:d0,useContext:ds,useEffect:Bp,useImperativeHandle:u0,useInsertionEffect:a0,useLayoutEffect:l0,useMemo:h0,useReducer:$p,useRef:i0,useState:function(){return $p(Oc)},useDebugValue:qp,useDeferredValue:function(i){var a=hs();return f0(a,Sn.memoizedState,i)},useTransition:function(){var i=$p(Oc)[0],a=hs().memoizedState;return[i,a]},useMutableSource:J_,useSyncExternalStore:X_,useId:p0,unstable_isNewReconciler:!1},hA={readContext:ds,useCallback:d0,useContext:ds,useEffect:Bp,useImperativeHandle:u0,useInsertionEffect:a0,useLayoutEffect:l0,useMemo:h0,useReducer:zp,useRef:i0,useState:function(){return zp(Oc)},useDebugValue:qp,useDeferredValue:function(i){var a=hs();return Sn===null?a.memoizedState=i:f0(a,Sn.memoizedState,i)},useTransition:function(){var i=zp(Oc)[0],a=hs().memoizedState;return[i,a]},useMutableSource:J_,useSyncExternalStore:X_,useId:p0,unstable_isNewReconciler:!1};function Ss(i,a){if(i&&i.defaultProps){a=ke({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function Hp(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:ke({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Dd={isMounted:function(i){return(i=i._reactInternals)?Te(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var f=wr(),m=no(i),_=wi(f,m);_.payload=a,c!=null&&(_.callback=c),a=Xi(i,_,m),a!==null&&(As(a,i,m,f),Sd(a,i,m))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=wr(),m=no(i),_=wi(f,m);_.tag=1,_.payload=a,c!=null&&(_.callback=c),a=Xi(i,_,m),a!==null&&(As(a,i,m,f),Sd(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=wr(),f=no(i),m=wi(c,f);m.tag=2,a!=null&&(m.callback=a),a=Xi(i,m,f),a!==null&&(As(a,i,f,c),Sd(a,i,f))}};function v0(i,a,c,f,m,_,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,x):a.prototype&&a.prototype.isPureReactComponent?!wc(c,f)||!wc(m,_):!0}function _0(i,a,c){var f=!1,m=Qi,_=a.contextType;return typeof _=="object"&&_!==null?_=ds(_):(m=Or(a)?Yo:rr.current,f=a.contextTypes,_=(f=f!=null)?cl(i,m):Qi),a=new a(c,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Dd,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=_),a}function w0(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&Dd.enqueueReplaceState(a,a.state,null)}function Gp(i,a,c,f){var m=i.stateNode;m.props=c,m.state=i.memoizedState,m.refs={},Np(i);var _=a.contextType;typeof _=="object"&&_!==null?m.context=ds(_):(_=Or(a)?Yo:rr.current,m.context=cl(i,_)),m.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Hp(i,a,_,c),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&Dd.enqueueReplaceState(m,m.state,null),kd(i,c,m,f),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function yl(i,a){try{var c="",f=a;do c+=pt(f),f=f.return;while(f);var m=c}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:m,digest:null}}function Kp(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function Wp(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var fA=typeof WeakMap=="function"?WeakMap:Map;function E0(i,a,c){c=wi(-1,c),c.tag=3,c.payload={element:null};var f=a.value;return c.callback=function(){$d||($d=!0,cm=f),Wp(i,a)},c}function T0(i,a,c){c=wi(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=a.value;c.payload=function(){return f(m)},c.callback=function(){Wp(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){Wp(i,a),typeof f!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var x=a.stack;this.componentDidCatch(a.value,{componentStack:x!==null?x:""})}),c}function x0(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new fA;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(c)||(m.add(c),i=kA.bind(null,i,a,c),a.then(i,i))}function I0(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function b0(i,a,c,f,m){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=wi(-1,1),a.tag=2,Xi(c,a,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var pA=ae.ReactCurrentOwner,Dr=!1;function _r(i,a,c,f){a.child=i===null?H_(a,null,c,f):fl(a,i.child,c,f)}function S0(i,a,c,f,m){c=c.render;var _=a.ref;return ml(a,m),f=Fp(i,a,c,f,_,m),c=Up(),i!==null&&!Dr?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,Ei(i,a,m)):(sn&&c&&Tp(a),a.flags|=1,_r(i,a,f,m),a.child)}function k0(i,a,c,f,m){if(i===null){var _=c.type;return typeof _=="function"&&!gm(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=_,R0(i,a,_,f,m)):(i=Kd(c.type,null,f,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,(i.lanes&m)===0){var x=_.memoizedProps;if(c=c.compare,c=c!==null?c:wc,c(x,f)&&i.ref===a.ref)return Ei(i,a,m)}return a.flags|=1,i=so(_,f),i.ref=a.ref,i.return=a,a.child=i}function R0(i,a,c,f,m){if(i!==null){var _=i.memoizedProps;if(wc(_,f)&&i.ref===a.ref)if(Dr=!1,a.pendingProps=f=_,(i.lanes&m)!==0)(i.flags&131072)!==0&&(Dr=!0);else return a.lanes=i.lanes,Ei(i,a,m)}return Qp(i,a,c,f,m)}function A0(i,a,c){var f=a.pendingProps,m=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(_l,Qr),Qr|=c;else{if((c&1073741824)===0)return i=_!==null?_.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Jt(_l,Qr),Qr|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:c,Jt(_l,Qr),Qr|=f}else _!==null?(f=_.baseLanes|c,a.memoizedState=null):f=c,Jt(_l,Qr),Qr|=f;return _r(i,a,m,c),a.child}function C0(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Qp(i,a,c,f,m){var _=Or(c)?Yo:rr.current;return _=cl(a,_),ml(a,m),c=Fp(i,a,c,f,_,m),f=Up(),i!==null&&!Dr?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,Ei(i,a,m)):(sn&&f&&Tp(a),a.flags|=1,_r(i,a,c,m),a.child)}function P0(i,a,c,f,m){if(Or(c)){var _=!0;vd(a)}else _=!1;if(ml(a,m),a.stateNode===null)Ld(i,a),_0(a,c,f),Gp(a,c,f,m),f=!0;else if(i===null){var x=a.stateNode,D=a.memoizedProps;x.props=D;var V=x.context,Y=c.contextType;typeof Y=="object"&&Y!==null?Y=ds(Y):(Y=Or(c)?Yo:rr.current,Y=cl(a,Y));var ue=c.getDerivedStateFromProps,he=typeof ue=="function"||typeof x.getSnapshotBeforeUpdate=="function";he||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D!==f||V!==Y)&&w0(a,x,f,Y),Ji=!1;var le=a.memoizedState;x.state=le,kd(a,f,x,m),V=a.memoizedState,D!==f||le!==V||Nr.current||Ji?(typeof ue=="function"&&(Hp(a,c,ue,f),V=a.memoizedState),(D=Ji||v0(a,c,D,f,le,V,Y))?(he||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=V),x.props=f,x.state=V,x.context=Y,f=D):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{x=a.stateNode,K_(i,a),D=a.memoizedProps,Y=a.type===a.elementType?D:Ss(a.type,D),x.props=Y,he=a.pendingProps,le=x.context,V=c.contextType,typeof V=="object"&&V!==null?V=ds(V):(V=Or(c)?Yo:rr.current,V=cl(a,V));var Re=c.getDerivedStateFromProps;(ue=typeof Re=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D!==he||le!==V)&&w0(a,x,f,V),Ji=!1,le=a.memoizedState,x.state=le,kd(a,f,x,m);var je=a.memoizedState;D!==he||le!==je||Nr.current||Ji?(typeof Re=="function"&&(Hp(a,c,Re,f),je=a.memoizedState),(Y=Ji||v0(a,c,Y,f,le,je,V)||!1)?(ue||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,je,V),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,je,V)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||D===i.memoizedProps&&le===i.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&le===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=je),x.props=f,x.state=je,x.context=V,f=Y):(typeof x.componentDidUpdate!="function"||D===i.memoizedProps&&le===i.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&le===i.memoizedState||(a.flags|=1024),f=!1)}return Yp(i,a,c,f,_,m)}function Yp(i,a,c,f,m,_){C0(i,a);var x=(a.flags&128)!==0;if(!f&&!x)return m&&L_(a,c,!1),Ei(i,a,_);f=a.stateNode,pA.current=a;var D=x&&typeof c.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&x?(a.child=fl(a,i.child,null,_),a.child=fl(a,null,D,_)):_r(i,a,D,_),a.memoizedState=f.state,m&&L_(a,c,!0),a.child}function N0(i){var a=i.stateNode;a.pendingContext?D_(i,a.pendingContext,a.pendingContext!==a.context):a.context&&D_(i,a.context,!1),Op(i,a.containerInfo)}function O0(i,a,c,f,m){return hl(),Sp(m),a.flags|=256,_r(i,a,c,f),a.child}var Jp={dehydrated:null,treeContext:null,retryLane:0};function Xp(i){return{baseLanes:i,cachePool:null,transitions:null}}function D0(i,a,c){var f=a.pendingProps,m=ln.current,_=!1,x=(a.flags&128)!==0,D;if((D=x)||(D=i!==null&&i.memoizedState===null?!1:(m&2)!==0),D?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),Jt(ln,m&1),i===null)return bp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(x=f.children,i=f.fallback,_?(f=a.mode,_=a.child,x={mode:"hidden",children:x},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=x):_=Wd(x,f,0,null),i=oa(i,f,c,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=Xp(c),a.memoizedState=Jp,i):Zp(a,x));if(m=i.memoizedState,m!==null&&(D=m.dehydrated,D!==null))return mA(i,a,x,f,D,m,c);if(_){_=f.fallback,x=a.mode,m=i.child,D=m.sibling;var V={mode:"hidden",children:f.children};return(x&1)===0&&a.child!==m?(f=a.child,f.childLanes=0,f.pendingProps=V,a.deletions=null):(f=so(m,V),f.subtreeFlags=m.subtreeFlags&14680064),D!==null?_=so(D,_):(_=oa(_,x,c,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,x=i.child.memoizedState,x=x===null?Xp(c):{baseLanes:x.baseLanes|c,cachePool:null,transitions:x.transitions},_.memoizedState=x,_.childLanes=i.childLanes&~c,a.memoizedState=Jp,f}return _=i.child,i=_.sibling,f=so(_,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=c),f.return=a,f.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=f,a.memoizedState=null,f}function Zp(i,a){return a=Wd({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Md(i,a,c,f){return f!==null&&Sp(f),fl(a,i.child,null,c),i=Zp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function mA(i,a,c,f,m,_,x){if(c)return a.flags&256?(a.flags&=-257,f=Kp(Error(t(422))),Md(i,a,x,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=f.fallback,m=a.mode,f=Wd({mode:"visible",children:f.children},m,0,null),_=oa(_,m,x,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,(a.mode&1)!==0&&fl(a,i.child,null,x),a.child.memoizedState=Xp(x),a.memoizedState=Jp,_);if((a.mode&1)===0)return Md(i,a,x,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var D=f.dgst;return f=D,_=Error(t(419)),f=Kp(_,f,void 0),Md(i,a,x,f)}if(D=(x&i.childLanes)!==0,Dr||D){if(f=Ln,f!==null){switch(x&-x){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|x))!==0?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,_i(i,m),As(f,i,m,-1))}return mm(),f=Kp(Error(t(421))),Md(i,a,x,f)}return m.data==="$?"?(a.flags|=128,a.child=i.child,a=RA.bind(null,i),m._reactRetry=a,null):(i=_.treeContext,Wr=Ki(m.nextSibling),Kr=a,sn=!0,bs=null,i!==null&&(cs[us++]=yi,cs[us++]=vi,cs[us++]=Jo,yi=i.id,vi=i.overflow,Jo=a),a=Zp(a,f.children),a.flags|=4096,a)}function M0(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),Cp(i.return,a,c)}function em(i,a,c,f,m){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=c,_.tailMode=m)}function L0(i,a,c){var f=a.pendingProps,m=f.revealOrder,_=f.tail;if(_r(i,a,f.children,c),f=ln.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&M0(i,c,a);else if(i.tag===19)M0(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Jt(ln,f),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(c=a.child,m=null;c!==null;)i=c.alternate,i!==null&&Rd(i)===null&&(m=c),c=c.sibling;c=m,c===null?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),em(a,!1,m,c,_);break;case"backwards":for(c=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&Rd(i)===null){a.child=m;break}i=m.sibling,m.sibling=c,c=m,m=i}em(a,!0,c,null,_);break;case"together":em(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ld(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Ei(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),na|=a.lanes,(c&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,c=so(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=so(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function gA(i,a,c){switch(a.tag){case 3:N0(a),hl();break;case 5:Y_(a);break;case 1:Or(a.type)&&vd(a);break;case 4:Op(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,m=a.memoizedProps.value;Jt(Id,f._currentValue),f._currentValue=m;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Jt(ln,ln.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?D0(i,a,c):(Jt(ln,ln.current&1),i=Ei(i,a,c),i!==null?i.sibling:null);Jt(ln,ln.current&1);break;case 19:if(f=(c&a.childLanes)!==0,(i.flags&128)!==0){if(f)return L0(i,a,c);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Jt(ln,ln.current),f)break;return null;case 22:case 23:return a.lanes=0,A0(i,a,c)}return Ei(i,a,c)}var j0,tm,V0,F0;j0=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},tm=function(){},V0=function(i,a,c,f){var m=i.memoizedProps;if(m!==f){i=a.stateNode,ea(Hs.current);var _=null;switch(c){case"input":m=Xn(i,m),f=Xn(i,f),_=[];break;case"select":m=ke({},m,{value:void 0}),f=ke({},f,{value:void 0}),_=[];break;case"textarea":m=jo(i,m),f=jo(i,f),_=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=md)}zo(c,f);var x;c=null;for(Y in m)if(!f.hasOwnProperty(Y)&&m.hasOwnProperty(Y)&&m[Y]!=null)if(Y==="style"){var D=m[Y];for(x in D)D.hasOwnProperty(x)&&(c||(c={}),c[x]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?_||(_=[]):(_=_||[]).push(Y,null));for(Y in f){var V=f[Y];if(D=m?.[Y],f.hasOwnProperty(Y)&&V!==D&&(V!=null||D!=null))if(Y==="style")if(D){for(x in D)!D.hasOwnProperty(x)||V&&V.hasOwnProperty(x)||(c||(c={}),c[x]="");for(x in V)V.hasOwnProperty(x)&&D[x]!==V[x]&&(c||(c={}),c[x]=V[x])}else c||(_||(_=[]),_.push(Y,c)),c=V;else Y==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,D=D?D.__html:void 0,V!=null&&D!==V&&(_=_||[]).push(Y,V)):Y==="children"?typeof V!="string"&&typeof V!="number"||(_=_||[]).push(Y,""+V):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(V!=null&&Y==="onScroll"&&Zt("scroll",i),_||D===V||(_=[])):(_=_||[]).push(Y,V))}c&&(_=_||[]).push("style",c);var Y=_;(a.updateQueue=Y)&&(a.flags|=4)}},F0=function(i,a,c,f){c!==f&&(a.flags|=4)};function Mc(i,a){if(!sn)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function ir(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var m=i.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function yA(i,a,c){var f=a.pendingProps;switch(xp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(a),null;case 1:return Or(a.type)&&yd(),ir(a),null;case 3:return f=a.stateNode,gl(),en(Nr),en(rr),Lp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Td(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,bs!==null&&(hm(bs),bs=null))),tm(i,a),ir(a),null;case 5:Dp(a);var m=ea(Cc.current);if(c=a.type,i!==null&&a.stateNode!=null)V0(i,a,c,f,m),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return ir(a),null}if(i=ea(Hs.current),Td(a)){f=a.stateNode,c=a.type;var _=a.memoizedProps;switch(f[qs]=a,f[bc]=_,i=(a.mode&1)!==0,c){case"dialog":Zt("cancel",f),Zt("close",f);break;case"iframe":case"object":case"embed":Zt("load",f);break;case"video":case"audio":for(m=0;m<Tc.length;m++)Zt(Tc[m],f);break;case"source":Zt("error",f);break;case"img":case"image":case"link":Zt("error",f),Zt("load",f);break;case"details":Zt("toggle",f);break;case"input":fr(f,_),Zt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},Zt("invalid",f);break;case"textarea":ai(f,_),Zt("invalid",f)}zo(c,_),m=null;for(var x in _)if(_.hasOwnProperty(x)){var D=_[x];x==="children"?typeof D=="string"?f.textContent!==D&&(_.suppressHydrationWarning!==!0&&pd(f.textContent,D,i),m=["children",D]):typeof D=="number"&&f.textContent!==""+D&&(_.suppressHydrationWarning!==!0&&pd(f.textContent,D,i),m=["children",""+D]):s.hasOwnProperty(x)&&D!=null&&x==="onScroll"&&Zt("scroll",f)}switch(c){case"input":Se(f),Lo(f,_,!0);break;case"textarea":Se(f),Vo(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=md)}f=m,a.updateQueue=f,f!==null&&(a.flags|=4)}else{x=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=tn(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=x.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=x.createElement(c,{is:f.is}):(i=x.createElement(c),c==="select"&&(x=i,f.multiple?x.multiple=!0:f.size&&(x.size=f.size))):i=x.createElementNS(i,c),i[qs]=a,i[bc]=f,j0(i,a,!1,!1),a.stateNode=i;e:{switch(x=Bo(c,f),c){case"dialog":Zt("cancel",i),Zt("close",i),m=f;break;case"iframe":case"object":case"embed":Zt("load",i),m=f;break;case"video":case"audio":for(m=0;m<Tc.length;m++)Zt(Tc[m],i);m=f;break;case"source":Zt("error",i),m=f;break;case"img":case"image":case"link":Zt("error",i),Zt("load",i),m=f;break;case"details":Zt("toggle",i),m=f;break;case"input":fr(i,f),m=Xn(i,f),Zt("invalid",i);break;case"option":m=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},m=ke({},f,{value:void 0}),Zt("invalid",i);break;case"textarea":ai(i,f),m=jo(i,f),Zt("invalid",i);break;default:m=f}zo(c,m),D=m;for(_ in D)if(D.hasOwnProperty(_)){var V=D[_];_==="style"?Uo(i,V):_==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Fo(i,V)):_==="children"?typeof V=="string"?(c!=="textarea"||V!=="")&&Vs(i,V):typeof V=="number"&&Vs(i,""+V):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?V!=null&&_==="onScroll"&&Zt("scroll",i):V!=null&&Q(i,_,V,x))}switch(c){case"input":Se(i),Lo(i,f,!1);break;case"textarea":Se(i),Vo(i);break;case"option":f.value!=null&&i.setAttribute("value",""+kt(f.value));break;case"select":i.multiple=!!f.multiple,_=f.value,_!=null?as(i,!!f.multiple,_,!1):f.defaultValue!=null&&as(i,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=md)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return ir(a),null;case 6:if(i&&a.stateNode!=null)F0(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(c=ea(Cc.current),ea(Hs.current),Td(a)){if(f=a.stateNode,c=a.memoizedProps,f[qs]=a,(_=f.nodeValue!==c)&&(i=Kr,i!==null))switch(i.tag){case 3:pd(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&pd(f.nodeValue,c,(i.mode&1)!==0)}_&&(a.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[qs]=a,a.stateNode=f}return ir(a),null;case 13:if(en(ln),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(sn&&Wr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)z_(),hl(),a.flags|=98560,_=!1;else if(_=Td(a),f!==null&&f.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[qs]=a}else hl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ir(a),_=!1}else bs!==null&&(hm(bs),bs=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(ln.current&1)!==0?kn===0&&(kn=3):mm())),a.updateQueue!==null&&(a.flags|=4),ir(a),null);case 4:return gl(),tm(i,a),i===null&&xc(a.stateNode.containerInfo),ir(a),null;case 10:return Ap(a.type._context),ir(a),null;case 17:return Or(a.type)&&yd(),ir(a),null;case 19:if(en(ln),_=a.memoizedState,_===null)return ir(a),null;if(f=(a.flags&128)!==0,x=_.rendering,x===null)if(f)Mc(_,!1);else{if(kn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(x=Rd(i),x!==null){for(a.flags|=128,Mc(_,!1),f=x.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=c,c=a.child;c!==null;)_=c,i=f,_.flags&=14680066,x=_.alternate,x===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=x.childLanes,_.lanes=x.lanes,_.child=x.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=x.memoizedProps,_.memoizedState=x.memoizedState,_.updateQueue=x.updateQueue,_.type=x.type,i=x.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return Jt(ln,ln.current&1|2),a.child}i=i.sibling}_.tail!==null&&xe()>wl&&(a.flags|=128,f=!0,Mc(_,!1),a.lanes=4194304)}else{if(!f)if(i=Rd(x),i!==null){if(a.flags|=128,f=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),Mc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!x.alternate&&!sn)return ir(a),null}else 2*xe()-_.renderingStartTime>wl&&c!==1073741824&&(a.flags|=128,f=!0,Mc(_,!1),a.lanes=4194304);_.isBackwards?(x.sibling=a.child,a.child=x):(c=_.last,c!==null?c.sibling=x:a.child=x,_.last=x)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=xe(),a.sibling=null,c=ln.current,Jt(ln,f?c&1|2:c&1),a):(ir(a),null);case 22:case 23:return pm(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(Qr&1073741824)!==0&&(ir(a),a.subtreeFlags&6&&(a.flags|=8192)):ir(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function vA(i,a){switch(xp(a),a.tag){case 1:return Or(a.type)&&yd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return gl(),en(Nr),en(rr),Lp(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Dp(a),null;case 13:if(en(ln),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));hl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return en(ln),null;case 4:return gl(),null;case 10:return Ap(a.type._context),null;case 22:case 23:return pm(),null;case 24:return null;default:return null}}var jd=!1,or=!1,_A=typeof WeakSet=="function"?WeakSet:Set,Me=null;function vl(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){fn(i,a,f)}else c.current=null}function nm(i,a,c){try{c()}catch(f){fn(i,a,f)}}var U0=!1;function wA(i,a){if(pp=qi,i=v_(),op(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var x=0,D=-1,V=-1,Y=0,ue=0,he=i,le=null;t:for(;;){for(var Re;he!==c||m!==0&&he.nodeType!==3||(D=x+m),he!==_||f!==0&&he.nodeType!==3||(V=x+f),he.nodeType===3&&(x+=he.nodeValue.length),(Re=he.firstChild)!==null;)le=he,he=Re;for(;;){if(he===i)break t;if(le===c&&++Y===m&&(D=x),le===_&&++ue===f&&(V=x),(Re=he.nextSibling)!==null)break;he=le,le=he.parentNode}he=Re}c=D===-1||V===-1?null:{start:D,end:V}}else c=null}c=c||{start:0,end:0}}else c=null;for(mp={focusedElem:i,selectionRange:c},qi=!1,Me=a;Me!==null;)if(a=Me,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Me=i;else for(;Me!==null;){a=Me;try{var je=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var qe=je.memoizedProps,vn=je.memoizedState,H=a.stateNode,F=H.getSnapshotBeforeUpdate(a.elementType===a.type?qe:Ss(a.type,qe),vn);H.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var K=a.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ye){fn(a,a.return,ye)}if(i=a.sibling,i!==null){i.return=a.return,Me=i;break}Me=a.return}return je=U0,U0=!1,je}function Lc(i,a,c){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&i)===i){var _=m.destroy;m.destroy=void 0,_!==void 0&&nm(a,c,_)}m=m.next}while(m!==f)}}function Vd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==a)}}function rm(i){var a=i.ref;if(a!==null){var c=i.stateNode;i.tag,i=c,typeof a=="function"?a(i):a.current=i}}function $0(i){var a=i.alternate;a!==null&&(i.alternate=null,$0(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[qs],delete a[bc],delete a[_p],delete a[nA],delete a[rA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function z0(i){return i.tag===5||i.tag===3||i.tag===4}function B0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||z0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function sm(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=md));else if(f!==4&&(i=i.child,i!==null))for(sm(i,a,c),i=i.sibling;i!==null;)sm(i,a,c),i=i.sibling}function im(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(im(i,a,c),i=i.sibling;i!==null;)im(i,a,c),i=i.sibling}var Kn=null,ks=!1;function Zi(i,a,c){for(c=c.child;c!==null;)q0(i,a,c),c=c.sibling}function q0(i,a,c){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(J,c)}catch{}switch(c.tag){case 5:or||vl(c,a);case 6:var f=Kn,m=ks;Kn=null,Zi(i,a,c),Kn=f,ks=m,Kn!==null&&(ks?(i=Kn,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):Kn.removeChild(c.stateNode));break;case 18:Kn!==null&&(ks?(i=Kn,c=c.stateNode,i.nodeType===8?vp(i.parentNode,c):i.nodeType===1&&vp(i,c),Ts(i)):vp(Kn,c.stateNode));break;case 4:f=Kn,m=ks,Kn=c.stateNode.containerInfo,ks=!0,Zi(i,a,c),Kn=f,ks=m;break;case 0:case 11:case 14:case 15:if(!or&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var _=m,x=_.destroy;_=_.tag,x!==void 0&&((_&2)!==0||(_&4)!==0)&&nm(c,a,x),m=m.next}while(m!==f)}Zi(i,a,c);break;case 1:if(!or&&(vl(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(D){fn(c,a,D)}Zi(i,a,c);break;case 21:Zi(i,a,c);break;case 22:c.mode&1?(or=(f=or)||c.memoizedState!==null,Zi(i,a,c),or=f):Zi(i,a,c);break;default:Zi(i,a,c)}}function H0(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new _A),a.forEach(function(f){var m=AA.bind(null,i,f);c.has(f)||(c.add(f),f.then(m,m))})}}function Rs(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];try{var _=i,x=a,D=x;e:for(;D!==null;){switch(D.tag){case 5:Kn=D.stateNode,ks=!1;break e;case 3:Kn=D.stateNode.containerInfo,ks=!0;break e;case 4:Kn=D.stateNode.containerInfo,ks=!0;break e}D=D.return}if(Kn===null)throw Error(t(160));q0(_,x,m),Kn=null,ks=!1;var V=m.alternate;V!==null&&(V.return=null),m.return=null}catch(Y){fn(m,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)G0(a,i),a=a.sibling}function G0(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Rs(a,i),Ks(i),f&4){try{Lc(3,i,i.return),Vd(3,i)}catch(qe){fn(i,i.return,qe)}try{Lc(5,i,i.return)}catch(qe){fn(i,i.return,qe)}}break;case 1:Rs(a,i),Ks(i),f&512&&c!==null&&vl(c,c.return);break;case 5:if(Rs(a,i),Ks(i),f&512&&c!==null&&vl(c,c.return),i.flags&32){var m=i.stateNode;try{Vs(m,"")}catch(qe){fn(i,i.return,qe)}}if(f&4&&(m=i.stateNode,m!=null)){var _=i.memoizedProps,x=c!==null?c.memoizedProps:_,D=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{D==="input"&&_.type==="radio"&&_.name!=null&&Mo(m,_),Bo(D,x);var Y=Bo(D,_);for(x=0;x<V.length;x+=2){var ue=V[x],he=V[x+1];ue==="style"?Uo(m,he):ue==="dangerouslySetInnerHTML"?Fo(m,he):ue==="children"?Vs(m,he):Q(m,ue,he,Y)}switch(D){case"input":Pn(m,_);break;case"textarea":Ui(m,_);break;case"select":var le=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var Re=_.value;Re!=null?as(m,!!_.multiple,Re,!1):le!==!!_.multiple&&(_.defaultValue!=null?as(m,!!_.multiple,_.defaultValue,!0):as(m,!!_.multiple,_.multiple?[]:"",!1))}m[bc]=_}catch(qe){fn(i,i.return,qe)}}break;case 6:if(Rs(a,i),Ks(i),f&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,_=i.memoizedProps;try{m.nodeValue=_}catch(qe){fn(i,i.return,qe)}}break;case 3:if(Rs(a,i),Ks(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ts(a.containerInfo)}catch(qe){fn(i,i.return,qe)}break;case 4:Rs(a,i),Ks(i);break;case 13:Rs(a,i),Ks(i),m=i.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(lm=xe())),f&4&&H0(i);break;case 22:if(ue=c!==null&&c.memoizedState!==null,i.mode&1?(or=(Y=or)||ue,Rs(a,i),or=Y):Rs(a,i),Ks(i),f&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ue&&(i.mode&1)!==0)for(Me=i,ue=i.child;ue!==null;){for(he=Me=ue;Me!==null;){switch(le=Me,Re=le.child,le.tag){case 0:case 11:case 14:case 15:Lc(4,le,le.return);break;case 1:vl(le,le.return);var je=le.stateNode;if(typeof je.componentWillUnmount=="function"){f=le,c=le.return;try{a=f,je.props=a.memoizedProps,je.state=a.memoizedState,je.componentWillUnmount()}catch(qe){fn(f,c,qe)}}break;case 5:vl(le,le.return);break;case 22:if(le.memoizedState!==null){Q0(he);continue}}Re!==null?(Re.return=le,Me=Re):Q0(he)}ue=ue.sibling}e:for(ue=null,he=i;;){if(he.tag===5){if(ue===null){ue=he;try{m=he.stateNode,Y?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(D=he.stateNode,V=he.memoizedProps.style,x=V!=null&&V.hasOwnProperty("display")?V.display:null,D.style.display=li("display",x))}catch(qe){fn(i,i.return,qe)}}}else if(he.tag===6){if(ue===null)try{he.stateNode.nodeValue=Y?"":he.memoizedProps}catch(qe){fn(i,i.return,qe)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===i)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===i)break e;for(;he.sibling===null;){if(he.return===null||he.return===i)break e;ue===he&&(ue=null),he=he.return}ue===he&&(ue=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:Rs(a,i),Ks(i),f&4&&H0(i);break;case 21:break;default:Rs(a,i),Ks(i)}}function Ks(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(z0(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Vs(m,""),f.flags&=-33);var _=B0(i);im(i,_,m);break;case 3:case 4:var x=f.stateNode.containerInfo,D=B0(i);sm(i,D,x);break;default:throw Error(t(161))}}catch(V){fn(i,i.return,V)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function EA(i,a,c){Me=i,K0(i)}function K0(i,a,c){for(var f=(i.mode&1)!==0;Me!==null;){var m=Me,_=m.child;if(m.tag===22&&f){var x=m.memoizedState!==null||jd;if(!x){var D=m.alternate,V=D!==null&&D.memoizedState!==null||or;D=jd;var Y=or;if(jd=x,(or=V)&&!Y)for(Me=m;Me!==null;)x=Me,V=x.child,x.tag===22&&x.memoizedState!==null?Y0(m):V!==null?(V.return=x,Me=V):Y0(m);for(;_!==null;)Me=_,K0(_),_=_.sibling;Me=m,jd=D,or=Y}W0(i)}else(m.subtreeFlags&8772)!==0&&_!==null?(_.return=m,Me=_):W0(i)}}function W0(i){for(;Me!==null;){var a=Me;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:or||Vd(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!or)if(c===null)f.componentDidMount();else{var m=a.elementType===a.type?c.memoizedProps:Ss(a.type,c.memoizedProps);f.componentDidUpdate(m,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Q_(a,_,f);break;case 3:var x=a.updateQueue;if(x!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}Q_(a,x,c)}break;case 5:var D=a.stateNode;if(c===null&&a.flags&4){c=D;var V=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&c.focus();break;case"img":V.src&&(c.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var ue=Y.memoizedState;if(ue!==null){var he=ue.dehydrated;he!==null&&Ts(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}or||a.flags&512&&rm(a)}catch(le){fn(a,a.return,le)}}if(a===i){Me=null;break}if(c=a.sibling,c!==null){c.return=a.return,Me=c;break}Me=a.return}}function Q0(i){for(;Me!==null;){var a=Me;if(a===i){Me=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Me=c;break}Me=a.return}}function Y0(i){for(;Me!==null;){var a=Me;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Vd(4,a)}catch(V){fn(a,c,V)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var m=a.return;try{f.componentDidMount()}catch(V){fn(a,m,V)}}var _=a.return;try{rm(a)}catch(V){fn(a,_,V)}break;case 5:var x=a.return;try{rm(a)}catch(V){fn(a,x,V)}}}catch(V){fn(a,a.return,V)}if(a===i){Me=null;break}var D=a.sibling;if(D!==null){D.return=a.return,Me=D;break}Me=a.return}}var TA=Math.ceil,Fd=ae.ReactCurrentDispatcher,om=ae.ReactCurrentOwner,fs=ae.ReactCurrentBatchConfig,Lt=0,Ln=null,xn=null,Wn=0,Qr=0,_l=Wi(0),kn=0,jc=null,na=0,Ud=0,am=0,Vc=null,Mr=null,lm=0,wl=1/0,Ti=null,$d=!1,cm=null,eo=null,zd=!1,to=null,Bd=0,Fc=0,um=null,qd=-1,Hd=0;function wr(){return(Lt&6)!==0?xe():qd!==-1?qd:qd=xe()}function no(i){return(i.mode&1)===0?1:(Lt&2)!==0&&Wn!==0?Wn&-Wn:iA.transition!==null?(Hd===0&&(Hd=De()),Hd):(i=Be,i!==0||(i=window.event,i=i===void 0?16:fc(i.type)),i)}function As(i,a,c,f){if(50<Fc)throw Fc=0,um=null,Error(t(185));ot(i,c,f),((Lt&2)===0||i!==Ln)&&(i===Ln&&((Lt&2)===0&&(Ud|=c),kn===4&&ro(i,Wn)),Lr(i,f),c===1&&Lt===0&&(a.mode&1)===0&&(wl=xe()+500,_d&&Yi()))}function Lr(i,a){var c=i.callbackNode;Le(i,a);var f=Z(i,i===Ln?Wn:0);if(f===0)c!==null&&lt(c),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(c!=null&&lt(c),a===1)i.tag===0?sA(X0.bind(null,i)):j_(X0.bind(null,i)),eA(function(){(Lt&6)===0&&Yi()}),c=null;else{switch(Hn(f)){case 1:c=yn;break;case 4:c=Rt;break;case 16:c=vt;break;case 536870912:c=ee;break;default:c=vt}c=ow(c,J0.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function J0(i,a){if(qd=-1,Hd=0,(Lt&6)!==0)throw Error(t(327));var c=i.callbackNode;if(El()&&i.callbackNode!==c)return null;var f=Z(i,i===Ln?Wn:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=Gd(i,f);else{a=f;var m=Lt;Lt|=2;var _=ew();(Ln!==i||Wn!==a)&&(Ti=null,wl=xe()+500,sa(i,a));do try{bA();break}catch(D){Z0(i,D)}while(!0);Rp(),Fd.current=_,Lt=m,xn!==null?a=0:(Ln=null,Wn=0,a=kn)}if(a!==0){if(a===2&&(m=Fe(i),m!==0&&(f=m,a=dm(i,m))),a===1)throw c=jc,sa(i,0),ro(i,f),Lr(i,xe()),c;if(a===6)ro(i,f);else{if(m=i.current.alternate,(f&30)===0&&!xA(m)&&(a=Gd(i,f),a===2&&(_=Fe(i),_!==0&&(f=_,a=dm(i,_))),a===1))throw c=jc,sa(i,0),ro(i,f),Lr(i,xe()),c;switch(i.finishedWork=m,i.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:ia(i,Mr,Ti);break;case 3:if(ro(i,f),(f&130023424)===f&&(a=lm+500-xe(),10<a)){if(Z(i,0)!==0)break;if(m=i.suspendedLanes,(m&f)!==f){wr(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=yp(ia.bind(null,i,Mr,Ti),a);break}ia(i,Mr,Ti);break;case 4:if(ro(i,f),(f&4194240)===f)break;for(a=i.eventTimes,m=-1;0<f;){var x=31-et(f);_=1<<x,x=a[x],x>m&&(m=x),f&=~_}if(f=m,f=xe()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*TA(f/1960))-f,10<f){i.timeoutHandle=yp(ia.bind(null,i,Mr,Ti),f);break}ia(i,Mr,Ti);break;case 5:ia(i,Mr,Ti);break;default:throw Error(t(329))}}}return Lr(i,xe()),i.callbackNode===c?J0.bind(null,i):null}function dm(i,a){var c=Vc;return i.current.memoizedState.isDehydrated&&(sa(i,a).flags|=256),i=Gd(i,a),i!==2&&(a=Mr,Mr=c,a!==null&&hm(a)),i}function hm(i){Mr===null?Mr=i:Mr.push.apply(Mr,i)}function xA(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var m=c[f],_=m.getSnapshot;m=m.value;try{if(!Is(_(),m))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ro(i,a){for(a&=~am,a&=~Ud,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-et(a),f=1<<c;i[c]=-1,a&=~f}}function X0(i){if((Lt&6)!==0)throw Error(t(327));El();var a=Z(i,0);if((a&1)===0)return Lr(i,xe()),null;var c=Gd(i,a);if(i.tag!==0&&c===2){var f=Fe(i);f!==0&&(a=f,c=dm(i,f))}if(c===1)throw c=jc,sa(i,0),ro(i,a),Lr(i,xe()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,ia(i,Mr,Ti),Lr(i,xe()),null}function fm(i,a){var c=Lt;Lt|=1;try{return i(a)}finally{Lt=c,Lt===0&&(wl=xe()+500,_d&&Yi())}}function ra(i){to!==null&&to.tag===0&&(Lt&6)===0&&El();var a=Lt;Lt|=1;var c=fs.transition,f=Be;try{if(fs.transition=null,Be=1,i)return i()}finally{Be=f,fs.transition=c,Lt=a,(Lt&6)===0&&Yi()}}function pm(){Qr=_l.current,en(_l)}function sa(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,ZR(c)),xn!==null)for(c=xn.return;c!==null;){var f=c;switch(xp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&yd();break;case 3:gl(),en(Nr),en(rr),Lp();break;case 5:Dp(f);break;case 4:gl();break;case 13:en(ln);break;case 19:en(ln);break;case 10:Ap(f.type._context);break;case 22:case 23:pm()}c=c.return}if(Ln=i,xn=i=so(i.current,null),Wn=Qr=a,kn=0,jc=null,am=Ud=na=0,Mr=Vc=null,Zo!==null){for(a=0;a<Zo.length;a++)if(c=Zo[a],f=c.interleaved,f!==null){c.interleaved=null;var m=f.next,_=c.pending;if(_!==null){var x=_.next;_.next=m,f.next=x}c.pending=f}Zo=null}return i}function Z0(i,a){do{var c=xn;try{if(Rp(),Ad.current=Od,Cd){for(var f=cn.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}Cd=!1}if(ta=0,Mn=Sn=cn=null,Pc=!1,Nc=0,om.current=null,c===null||c.return===null){kn=1,jc=a,xn=null;break}e:{var _=i,x=c.return,D=c,V=a;if(a=Wn,D.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var Y=V,ue=D,he=ue.tag;if((ue.mode&1)===0&&(he===0||he===11||he===15)){var le=ue.alternate;le?(ue.updateQueue=le.updateQueue,ue.memoizedState=le.memoizedState,ue.lanes=le.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var Re=I0(x);if(Re!==null){Re.flags&=-257,b0(Re,x,D,_,a),Re.mode&1&&x0(_,Y,a),a=Re,V=Y;var je=a.updateQueue;if(je===null){var qe=new Set;qe.add(V),a.updateQueue=qe}else je.add(V);break e}else{if((a&1)===0){x0(_,Y,a),mm();break e}V=Error(t(426))}}else if(sn&&D.mode&1){var vn=I0(x);if(vn!==null){(vn.flags&65536)===0&&(vn.flags|=256),b0(vn,x,D,_,a),Sp(yl(V,D));break e}}_=V=yl(V,D),kn!==4&&(kn=2),Vc===null?Vc=[_]:Vc.push(_),_=x;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var H=E0(_,V,a);W_(_,H);break e;case 1:D=V;var F=_.type,K=_.stateNode;if((_.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(eo===null||!eo.has(K)))){_.flags|=65536,a&=-a,_.lanes|=a;var ye=T0(_,D,a);W_(_,ye);break e}}_=_.return}while(_!==null)}nw(c)}catch(Ke){a=Ke,xn===c&&c!==null&&(xn=c=c.return);continue}break}while(!0)}function ew(){var i=Fd.current;return Fd.current=Od,i===null?Od:i}function mm(){(kn===0||kn===3||kn===2)&&(kn=4),Ln===null||(na&268435455)===0&&(Ud&268435455)===0||ro(Ln,Wn)}function Gd(i,a){var c=Lt;Lt|=2;var f=ew();(Ln!==i||Wn!==a)&&(Ti=null,sa(i,a));do try{IA();break}catch(m){Z0(i,m)}while(!0);if(Rp(),Lt=c,Fd.current=f,xn!==null)throw Error(t(261));return Ln=null,Wn=0,kn}function IA(){for(;xn!==null;)tw(xn)}function bA(){for(;xn!==null&&!st();)tw(xn)}function tw(i){var a=iw(i.alternate,i,Qr);i.memoizedProps=i.pendingProps,a===null?nw(i):xn=a,om.current=null}function nw(i){var a=i;do{var c=a.alternate;if(i=a.return,(a.flags&32768)===0){if(c=yA(c,a,Qr),c!==null){xn=c;return}}else{if(c=vA(c,a),c!==null){c.flags&=32767,xn=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{kn=6,xn=null;return}}if(a=a.sibling,a!==null){xn=a;return}xn=a=i}while(a!==null);kn===0&&(kn=5)}function ia(i,a,c){var f=Be,m=fs.transition;try{fs.transition=null,Be=1,SA(i,a,c,f)}finally{fs.transition=m,Be=f}return null}function SA(i,a,c,f){do El();while(to!==null);if((Lt&6)!==0)throw Error(t(327));c=i.finishedWork;var m=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=c.lanes|c.childLanes;if(Oe(i,_),i===Ln&&(xn=Ln=null,Wn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||zd||(zd=!0,ow(vt,function(){return El(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=fs.transition,fs.transition=null;var x=Be;Be=1;var D=Lt;Lt|=4,om.current=null,wA(i,c),G0(c,i),GR(mp),qi=!!pp,mp=pp=null,i.current=c,EA(c),yt(),Lt=D,Be=x,fs.transition=_}else i.current=c;if(zd&&(zd=!1,to=i,Bd=m),_=i.pendingLanes,_===0&&(eo=null),Nt(c.stateNode),Lr(i,xe()),a!==null)for(f=i.onRecoverableError,c=0;c<a.length;c++)m=a[c],f(m.value,{componentStack:m.stack,digest:m.digest});if($d)throw $d=!1,i=cm,cm=null,i;return(Bd&1)!==0&&i.tag!==0&&El(),_=i.pendingLanes,(_&1)!==0?i===um?Fc++:(Fc=0,um=i):Fc=0,Yi(),null}function El(){if(to!==null){var i=Hn(Bd),a=fs.transition,c=Be;try{if(fs.transition=null,Be=16>i?16:i,to===null)var f=!1;else{if(i=to,to=null,Bd=0,(Lt&6)!==0)throw Error(t(331));var m=Lt;for(Lt|=4,Me=i.current;Me!==null;){var _=Me,x=_.child;if((Me.flags&16)!==0){var D=_.deletions;if(D!==null){for(var V=0;V<D.length;V++){var Y=D[V];for(Me=Y;Me!==null;){var ue=Me;switch(ue.tag){case 0:case 11:case 15:Lc(8,ue,_)}var he=ue.child;if(he!==null)he.return=ue,Me=he;else for(;Me!==null;){ue=Me;var le=ue.sibling,Re=ue.return;if($0(ue),ue===Y){Me=null;break}if(le!==null){le.return=Re,Me=le;break}Me=Re}}}var je=_.alternate;if(je!==null){var qe=je.child;if(qe!==null){je.child=null;do{var vn=qe.sibling;qe.sibling=null,qe=vn}while(qe!==null)}}Me=_}}if((_.subtreeFlags&2064)!==0&&x!==null)x.return=_,Me=x;else e:for(;Me!==null;){if(_=Me,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Lc(9,_,_.return)}var H=_.sibling;if(H!==null){H.return=_.return,Me=H;break e}Me=_.return}}var F=i.current;for(Me=F;Me!==null;){x=Me;var K=x.child;if((x.subtreeFlags&2064)!==0&&K!==null)K.return=x,Me=K;else e:for(x=F;Me!==null;){if(D=Me,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Vd(9,D)}}catch(Ke){fn(D,D.return,Ke)}if(D===x){Me=null;break e}var ye=D.sibling;if(ye!==null){ye.return=D.return,Me=ye;break e}Me=D.return}}if(Lt=m,Yi(),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(J,i)}catch{}f=!0}return f}finally{Be=c,fs.transition=a}}return!1}function rw(i,a,c){a=yl(c,a),a=E0(i,a,1),i=Xi(i,a,1),a=wr(),i!==null&&(ot(i,1,a),Lr(i,a))}function fn(i,a,c){if(i.tag===3)rw(i,i,c);else for(;a!==null;){if(a.tag===3){rw(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(eo===null||!eo.has(f))){i=yl(c,i),i=T0(a,i,1),a=Xi(a,i,1),i=wr(),a!==null&&(ot(a,1,i),Lr(a,i));break}}a=a.return}}function kA(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),a=wr(),i.pingedLanes|=i.suspendedLanes&c,Ln===i&&(Wn&c)===c&&(kn===4||kn===3&&(Wn&130023424)===Wn&&500>xe()-lm?sa(i,0):am|=c),Lr(i,a)}function sw(i,a){a===0&&((i.mode&1)===0?a=1:(a=_e,_e<<=1,(_e&130023424)===0&&(_e=4194304)));var c=wr();i=_i(i,a),i!==null&&(ot(i,a,c),Lr(i,c))}function RA(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),sw(i,c)}function AA(i,a){var c=0;switch(i.tag){case 13:var f=i.stateNode,m=i.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),sw(i,c)}var iw;iw=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||Nr.current)Dr=!0;else{if((i.lanes&c)===0&&(a.flags&128)===0)return Dr=!1,gA(i,a,c);Dr=(i.flags&131072)!==0}else Dr=!1,sn&&(a.flags&1048576)!==0&&V_(a,Ed,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Ld(i,a),i=a.pendingProps;var m=cl(a,rr.current);ml(a,c),m=Fp(null,a,f,i,m,c);var _=Up();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Or(f)?(_=!0,vd(a)):_=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Np(a),m.updater=Dd,a.stateNode=m,m._reactInternals=a,Gp(a,f,i,c),a=Yp(null,a,f,!0,_,c)):(a.tag=0,sn&&_&&Tp(a),_r(null,a,m,c),a=a.child),a;case 16:f=a.elementType;e:{switch(Ld(i,a),i=a.pendingProps,m=f._init,f=m(f._payload),a.type=f,m=a.tag=PA(f),i=Ss(f,i),m){case 0:a=Qp(null,a,f,i,c);break e;case 1:a=P0(null,a,f,i,c);break e;case 11:a=S0(null,a,f,i,c);break e;case 14:a=k0(null,a,f,Ss(f.type,i),c);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Ss(f,m),Qp(i,a,f,m,c);case 1:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Ss(f,m),P0(i,a,f,m,c);case 3:e:{if(N0(a),i===null)throw Error(t(387));f=a.pendingProps,_=a.memoizedState,m=_.element,K_(i,a),kd(a,f,null,c);var x=a.memoizedState;if(f=x.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){m=yl(Error(t(423)),a),a=O0(i,a,f,c,m);break e}else if(f!==m){m=yl(Error(t(424)),a),a=O0(i,a,f,c,m);break e}else for(Wr=Ki(a.stateNode.containerInfo.firstChild),Kr=a,sn=!0,bs=null,c=H_(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(hl(),f===m){a=Ei(i,a,c);break e}_r(i,a,f,c)}a=a.child}return a;case 5:return Y_(a),i===null&&bp(a),f=a.type,m=a.pendingProps,_=i!==null?i.memoizedProps:null,x=m.children,gp(f,m)?x=null:_!==null&&gp(f,_)&&(a.flags|=32),C0(i,a),_r(i,a,x,c),a.child;case 6:return i===null&&bp(a),null;case 13:return D0(i,a,c);case 4:return Op(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=fl(a,null,f,c):_r(i,a,f,c),a.child;case 11:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Ss(f,m),S0(i,a,f,m,c);case 7:return _r(i,a,a.pendingProps,c),a.child;case 8:return _r(i,a,a.pendingProps.children,c),a.child;case 12:return _r(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(f=a.type._context,m=a.pendingProps,_=a.memoizedProps,x=m.value,Jt(Id,f._currentValue),f._currentValue=x,_!==null)if(Is(_.value,x)){if(_.children===m.children&&!Nr.current){a=Ei(i,a,c);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var D=_.dependencies;if(D!==null){x=_.child;for(var V=D.firstContext;V!==null;){if(V.context===f){if(_.tag===1){V=wi(-1,c&-c),V.tag=2;var Y=_.updateQueue;if(Y!==null){Y=Y.shared;var ue=Y.pending;ue===null?V.next=V:(V.next=ue.next,ue.next=V),Y.pending=V}}_.lanes|=c,V=_.alternate,V!==null&&(V.lanes|=c),Cp(_.return,c,a),D.lanes|=c;break}V=V.next}}else if(_.tag===10)x=_.type===a.type?null:_.child;else if(_.tag===18){if(x=_.return,x===null)throw Error(t(341));x.lanes|=c,D=x.alternate,D!==null&&(D.lanes|=c),Cp(x,c,a),x=_.sibling}else x=_.child;if(x!==null)x.return=_;else for(x=_;x!==null;){if(x===a){x=null;break}if(_=x.sibling,_!==null){_.return=x.return,x=_;break}x=x.return}_=x}_r(i,a,m.children,c),a=a.child}return a;case 9:return m=a.type,f=a.pendingProps.children,ml(a,c),m=ds(m),f=f(m),a.flags|=1,_r(i,a,f,c),a.child;case 14:return f=a.type,m=Ss(f,a.pendingProps),m=Ss(f.type,m),k0(i,a,f,m,c);case 15:return R0(i,a,a.type,a.pendingProps,c);case 17:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Ss(f,m),Ld(i,a),a.tag=1,Or(f)?(i=!0,vd(a)):i=!1,ml(a,c),_0(a,f,m),Gp(a,f,m,c),Yp(null,a,f,!0,i,c);case 19:return L0(i,a,c);case 22:return A0(i,a,c)}throw Error(t(156,a.tag))};function ow(i,a){return $t(i,a)}function CA(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(i,a,c,f){return new CA(i,a,c,f)}function gm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function PA(i){if(typeof i=="function")return gm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===C)return 11;if(i===Je)return 14}return 2}function so(i,a){var c=i.alternate;return c===null?(c=ps(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Kd(i,a,c,f,m,_){var x=2;if(f=i,typeof i=="function")gm(i)&&(x=1);else if(typeof i=="string")x=5;else e:switch(i){case N:return oa(c.children,m,_,a);case I:x=8,m|=8;break;case A:return i=ps(12,c,a,m|2),i.elementType=A,i.lanes=_,i;case R:return i=ps(13,c,a,m),i.elementType=R,i.lanes=_,i;case ut:return i=ps(19,c,a,m),i.elementType=ut,i.lanes=_,i;case ft:return Wd(c,m,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:x=10;break e;case L:x=9;break e;case C:x=11;break e;case Je:x=14;break e;case hn:x=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=ps(x,c,a,m),a.elementType=i,a.type=f,a.lanes=_,a}function oa(i,a,c,f){return i=ps(7,i,f,a),i.lanes=c,i}function Wd(i,a,c,f){return i=ps(22,i,f,a),i.elementType=ft,i.lanes=c,i.stateNode={isHidden:!1},i}function ym(i,a,c){return i=ps(6,i,null,a),i.lanes=c,i}function vm(i,a,c){return a=ps(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function NA(i,a,c,f,m){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=it(0),this.expirationTimes=it(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=it(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function _m(i,a,c,f,m,_,x,D,V){return i=new NA(i,a,c,D,V),a===1?(a=1,_===!0&&(a|=8)):a=0,_=ps(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Np(_),i}function OA(i,a,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:f==null?null:""+f,children:i,containerInfo:a,implementation:c}}function aw(i){if(!i)return Qi;i=i._reactInternals;e:{if(Te(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Or(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(Or(c))return M_(i,c,a)}return a}function lw(i,a,c,f,m,_,x,D,V){return i=_m(c,f,!0,i,m,_,x,D,V),i.context=aw(null),c=i.current,f=wr(),m=no(c),_=wi(f,m),_.callback=a??null,Xi(c,_,m),i.current.lanes=m,ot(i,m,f),Lr(i,f),i}function Qd(i,a,c,f){var m=a.current,_=wr(),x=no(m);return c=aw(c),a.context===null?a.context=c:a.pendingContext=c,a=wi(_,x),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=Xi(m,a,x),i!==null&&(As(i,m,x,_),Sd(i,m,x)),x}function Yd(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function cw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function wm(i,a){cw(i,a),(i=i.alternate)&&cw(i,a)}function DA(){return null}var uw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Em(i){this._internalRoot=i}Jd.prototype.render=Em.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Qd(i,a,null,null)},Jd.prototype.unmount=Em.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ra(function(){Qd(null,i,null,null)}),a[mi]=null}};function Jd(i){this._internalRoot=i}Jd.prototype.unstable_scheduleHydration=function(i){if(i){var a=qo();i={blockedOn:null,target:i,priority:a};for(var c=0;c<nr.length&&a!==0&&a<nr[c].priority;c++);nr.splice(c,0,i),c===0&&ed(i)}};function Tm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Xd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function dw(){}function MA(i,a,c,f,m){if(m){if(typeof f=="function"){var _=f;f=function(){var Y=Yd(x);_.call(Y)}}var x=lw(a,f,i,0,null,!1,!1,"",dw);return i._reactRootContainer=x,i[mi]=x.current,xc(i.nodeType===8?i.parentNode:i),ra(),x}for(;m=i.lastChild;)i.removeChild(m);if(typeof f=="function"){var D=f;f=function(){var Y=Yd(V);D.call(Y)}}var V=_m(i,0,!1,null,null,!1,!1,"",dw);return i._reactRootContainer=V,i[mi]=V.current,xc(i.nodeType===8?i.parentNode:i),ra(function(){Qd(a,V,c,f)}),V}function Zd(i,a,c,f,m){var _=c._reactRootContainer;if(_){var x=_;if(typeof m=="function"){var D=m;m=function(){var V=Yd(x);D.call(V)}}Qd(a,x,i,m)}else x=MA(c,a,i,m,f);return Yd(x)}er=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=fe(a.pendingLanes);c!==0&&(Pt(a,c|1),Lr(a,xe()),(Lt&6)===0&&(wl=xe()+500,Yi()))}break;case 13:ra(function(){var f=_i(i,1);if(f!==null){var m=wr();As(f,i,1,m)}}),wm(i,1)}},Rr=function(i){if(i.tag===13){var a=_i(i,134217728);if(a!==null){var c=wr();As(a,i,134217728,c)}wm(i,134217728)}},Bi=function(i){if(i.tag===13){var a=no(i),c=_i(i,a);if(c!==null){var f=wr();As(c,i,a,f)}wm(i,a)}},qo=function(){return Be},Ha=function(i,a){var c=Be;try{return Be=i,a()}finally{Be=c}},zi=function(i,a,c){switch(a){case"input":if(Pn(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var m=gd(f);if(!m)throw Error(t(90));Et(f),Pn(f,m)}}}break;case"textarea":Ui(i,c);break;case"select":a=c.value,a!=null&&as(i,!!c.multiple,a,!1)}},ie=fm,ge=ra;var LA={usingClientEntryPoint:!1,Events:[Sc,al,gd,se,B,fm]},Uc={findFiberByHostInstance:Qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jA={bundleType:Uc.bundleType,version:Uc.version,rendererPackageName:Uc.rendererPackageName,rendererConfig:Uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Mt(i),i===null?null:i.stateNode},findFiberByHostInstance:Uc.findFiberByHostInstance||DA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{J=eh.inject(jA),Ne=eh}catch{}}return jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LA,jr.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tm(a))throw Error(t(200));return OA(i,a,null,c)},jr.createRoot=function(i,a){if(!Tm(i))throw Error(t(299));var c=!1,f="",m=uw;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=_m(i,1,!1,null,null,c,!1,f,m),i[mi]=a.current,xc(i.nodeType===8?i.parentNode:i),new Em(a)},jr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Mt(a),i=i===null?null:i.stateNode,i},jr.flushSync=function(i){return ra(i)},jr.hydrate=function(i,a,c){if(!Xd(a))throw Error(t(200));return Zd(null,i,a,!0,c)},jr.hydrateRoot=function(i,a,c){if(!Tm(i))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,m=!1,_="",x=uw;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(x=c.onRecoverableError)),a=lw(a,null,i,1,c??null,m,!1,_,x),i[mi]=a.current,xc(i),f)for(i=0;i<f.length;i++)c=f[i],m=c._getVersion,m=m(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,m]:a.mutableSourceEagerHydrationData.push(c,m);return new Jd(a)},jr.render=function(i,a,c){if(!Xd(a))throw Error(t(200));return Zd(null,i,a,!1,c)},jr.unmountComponentAtNode=function(i){if(!Xd(i))throw Error(t(40));return i._reactRootContainer?(ra(function(){Zd(null,null,i,!1,function(){i._reactRootContainer=null,i[mi]=null})}),!0):!1},jr.unstable_batchedUpdates=fm,jr.unstable_renderSubtreeIntoContainer=function(i,a,c,f){if(!Xd(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Zd(i,a,c,!1,f)},jr.version="18.3.1-next-f1338f8080-20240426",jr}var Ew;function GA(){if(Ew)return bm.exports;Ew=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bm.exports=HA(),bm.exports}var Tw;function KA(){if(Tw)return th;Tw=1;var n=GA();return th.createRoot=n.createRoot,th.hydrateRoot=n.hydrateRoot,th}var WA=KA();const QA=$x(WA);var Pu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},YA={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},JA=class{#e=YA;#t=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,e){return this.#e.setTimeout(n,e)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,e){return this.#e.setInterval(n,e)}clearInterval(n){this.#e.clearInterval(n)}},ma=new JA;function XA(n){setTimeout(n,0)}var Ta=typeof window>"u"||"Deno"in globalThis;function Vr(){}function ZA(n,e){return typeof n=="function"?n(e):n}function ag(n){return typeof n=="number"&&n>=0&&n!==1/0}function zx(n,e){return Math.max(n+(e||0)-Date.now(),0)}function go(n,e){return typeof n=="function"?n(e):n}function ms(n,e){return typeof n=="function"?n(e):n}function xw(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:o,queryKey:l,stale:u}=n;if(l){if(r){if(e.queryHash!==ly(l,e.options))return!1}else if(!mu(e.queryKey,l))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||o&&!o(e))}function Iw(n,e){const{exact:t,status:r,predicate:s,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(t){if(pu(e.options.mutationKey)!==pu(o))return!1}else if(!mu(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function ly(n,e){return(e?.queryKeyHashFn||pu)(n)}function pu(n){return JSON.stringify(n,(e,t)=>cg(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function mu(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>mu(n[t],e[t])):!1}var eC=Object.prototype.hasOwnProperty;function Bx(n,e,t=0){if(n===e)return n;if(t>500)return e;const r=bw(n)&&bw(e);if(!r&&!(cg(n)&&cg(e)))return e;const o=(r?n:Object.keys(n)).length,l=r?e:Object.keys(e),u=l.length,d=r?new Array(u):{};let p=0;for(let y=0;y<u;y++){const w=r?y:l[y],T=n[w],S=e[w];if(T===S){d[w]=T,(r?y<o:eC.call(n,w))&&p++;continue}if(T===null||S===null||typeof T!="object"||typeof S!="object"){d[w]=S;continue}const P=Bx(T,S,t+1);d[w]=P,P===T&&p++}return o===u&&p===o?n:d}function lg(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function bw(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function cg(n){if(!Sw(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Sw(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Sw(n){return Object.prototype.toString.call(n)==="[object Object]"}function tC(n){return new Promise(e=>{ma.setTimeout(e,n)})}function ug(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Bx(n,e):e}function nC(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function rC(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var cy=Symbol();function qx(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===cy?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function Hx(n,e){return typeof n=="function"?n(...e):!!n}function sC(n,e,t){let r=!1,s;return Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?t():s.addEventListener("abort",t,{once:!0})),s)}),n}var iC=class extends Pu{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!Ta&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},uy=new iC;function dg(){let n,e;const t=new Promise((s,o)=>{n=s,e=o});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}var oC=XA;function aC(){let n=[],e=0,t=u=>{u()},r=u=>{u()},s=oC;const o=u=>{e?n.push(u):s(()=>{t(u)})},l=()=>{const u=n;n=[],u.length&&s(()=>{r(()=>{u.forEach(d=>{t(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||l()}return d},batchCalls:u=>(...d)=>{o(()=>{u(...d)})},schedule:o,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Yn=aC(),lC=class extends Pu{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!Ta&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},Mh=new lC;function cC(n){return Math.min(1e3*2**n,3e4)}function Gx(n){return(n??"online")==="online"?Mh.isOnline():!0}var hg=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function Kx(n){let e=!1,t=0,r;const s=dg(),o=()=>s.status!=="pending",l=M=>{if(!o()){const O=new hg(M);T(O),n.onCancel?.(O)}},u=()=>{e=!0},d=()=>{e=!1},p=()=>uy.isFocused()&&(n.networkMode==="always"||Mh.isOnline())&&n.canRun(),y=()=>Gx(n.networkMode)&&n.canRun(),w=M=>{o()||(r?.(),s.resolve(M))},T=M=>{o()||(r?.(),s.reject(M))},S=()=>new Promise(M=>{r=O=>{(o()||p())&&M(O)},n.onPause?.()}).then(()=>{r=void 0,o()||n.onContinue?.()}),P=()=>{if(o())return;let M;const O=t===0?n.initialPromise:void 0;try{M=O??n.fn()}catch(X){M=Promise.reject(X)}Promise.resolve(M).then(w).catch(X=>{if(o())return;const W=n.retry??(Ta?0:3),Q=n.retryDelay??cC,ae=typeof Q=="function"?Q(t,X):Q,de=W===!0||typeof W=="number"&&t<W||typeof W=="function"&&W(t,X);if(e||!de){T(X);return}t++,n.onFail?.(t,X),tC(ae).then(()=>p()?void 0:S()).then(()=>{e?T(X):P()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:u,continueRetry:d,canStart:y,start:()=>(y()?P():S().then(P),s)}}var Wx=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ag(this.gcTime)&&(this.#e=ma.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ta?1/0:300*1e3))}clearGcTimeout(){this.#e&&(ma.clearTimeout(this.#e),this.#e=void 0)}},uC=class extends Wx{#e;#t;#n;#s;#r;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Rw(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Rw(this.options);t.data!==void 0&&(this.setState(kw(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const r=ug(this.state.data,e,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Vr).catch(Vr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>ms(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===cy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>go(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!zx(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},o=()=>{const d=qx(this.options,t),y=(()=>{const w={client:this.#s,queryKey:this.queryKey,meta:this.meta};return s(w),w})();return this.#o=!1,this.options.persister?this.options.persister(d,y,this):d(y)},u=(()=>{const d={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:o};return s(d),d})();this.options.behavior?.onFetch(u,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#i({type:"fetch",meta:u.fetchOptions?.meta}),this.#r=Kx({initialPromise:t?.initialPromise,fn:u.fetchFn,onCancel:d=>{d instanceof hg&&d.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(d,p)=>{this.#i({type:"failed",failureCount:d,error:p})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0});try{const d=await this.#r.start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),this.#n.config.onSuccess?.(d,this),this.#n.config.onSettled?.(d,this.state.error,this),d}catch(d){if(d instanceof hg){if(d.silent)return this.#r.promise;if(d.revert){if(this.state.data===void 0)throw d;return this.state.data}}throw this.#i({type:"error",error:d}),this.#n.config.onError?.(d,this),this.#n.config.onSettled?.(this.state.data,d,this),d}finally{this.scheduleGc()}}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Qx(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,...kw(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?s:void 0,s;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Yn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function Qx(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Gx(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function kw(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Rw(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var dC=class extends Pu{constructor(n,e){super(),this.options=e,this.#e=n,this.#i=null,this.#o=dg(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#s=void 0;#r;#a;#o;#i;#m;#h;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Aw(this.#t,this.options)?this.#d():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return fg(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return fg(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#E(),this.#t.removeObserver(this)}setOptions(n){const e=this.options,t=this.#t;if(this.options=this.#e.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ms(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#T(),this.#t.setOptions(this.options),e._defaulted&&!lg(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Cw(this.#t,t,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==t||ms(this.options.enabled,this.#t)!==ms(e.enabled,this.#t)||go(this.options.staleTime,this.#t)!==go(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==t||ms(this.options.enabled,this.#t)!==ms(e.enabled,this.#t)||s!==this.#l)&&this.#v(s)}getOptimisticResult(n){const e=this.#e.getQueryCache().build(this.#e,n),t=this.createResult(e,n);return fC(this,t)&&(this.#s=t,this.#a=this.options,this.#r=this.#t.state),t}getCurrentResult(){return this.#s}trackResult(n,e){return new Proxy(n,{get:(t,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,r))})}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#t}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#e.defaultQueryOptions(n),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#d({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(n){this.#T();let e=this.#t.fetch(this.options,n);return n?.throwOnError||(e=e.catch(Vr)),e}#g(){this.#w();const n=go(this.options.staleTime,this.#t);if(Ta||this.#s.isStale||!ag(n))return;const t=zx(this.#s.dataUpdatedAt,n)+1;this.#c=ma.setTimeout(()=>{this.#s.isStale||this.updateResult()},t)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(n){this.#E(),this.#l=n,!(Ta||ms(this.options.enabled,this.#t)===!1||!ag(this.#l)||this.#l===0)&&(this.#u=ma.setInterval(()=>{(this.options.refetchIntervalInBackground||uy.isFocused())&&this.#d()},this.#l))}#_(){this.#g(),this.#v(this.#y())}#w(){this.#c&&(ma.clearTimeout(this.#c),this.#c=void 0)}#E(){this.#u&&(ma.clearInterval(this.#u),this.#u=void 0)}createResult(n,e){const t=this.#t,r=this.options,s=this.#s,o=this.#r,l=this.#a,d=n!==t?n.state:this.#n,{state:p}=n;let y={...p},w=!1,T;if(e._optimisticResults){const I=this.hasListeners(),A=!I&&Aw(n,e),k=I&&Cw(n,t,e,r);(A||k)&&(y={...y,...Qx(p.data,n.options)}),e._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:S,errorUpdatedAt:P,status:M}=y;T=y.data;let O=!1;if(e.placeholderData!==void 0&&T===void 0&&M==="pending"){let I;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(I=s.data,O=!0):I=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,I!==void 0&&(M="success",T=ug(s?.data,I,e),w=!0)}if(e.select&&T!==void 0&&!O)if(s&&T===o?.data&&e.select===this.#m)T=this.#h;else try{this.#m=e.select,T=e.select(T),T=ug(s?.data,T,e),this.#h=T,this.#i=null}catch(I){this.#i=I}this.#i&&(S=this.#i,T=this.#h,P=Date.now(),M="error");const X=y.fetchStatus==="fetching",W=M==="pending",Q=M==="error",ae=W&&X,de=T!==void 0,N={status:M,fetchStatus:y.fetchStatus,isPending:W,isSuccess:M==="success",isError:Q,isInitialLoading:ae,isLoading:ae,data:T,dataUpdatedAt:y.dataUpdatedAt,error:S,errorUpdatedAt:P,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>d.dataUpdateCount||y.errorUpdateCount>d.errorUpdateCount,isFetching:X,isRefetching:X&&!W,isLoadingError:Q&&!de,isPaused:y.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:Q&&de,isStale:dy(n,e),refetch:this.refetch,promise:this.#o,isEnabled:ms(e.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const I=N.data!==void 0,A=N.status==="error"&&!I,k=R=>{A?R.reject(N.error):I&&R.resolve(N.data)},L=()=>{const R=this.#o=N.promise=dg();k(R)},C=this.#o;switch(C.status){case"pending":n.queryHash===t.queryHash&&k(C);break;case"fulfilled":(A||N.data!==C.value)&&L();break;case"rejected":(!A||N.error!==C.reason)&&L();break}}return N}updateResult(){const n=this.#s,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#f=this.#t),lg(e,n))return;this.#s=e;const t=()=>{if(!n)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#p.size)return!0;const o=new Set(s??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#s).some(l=>{const u=l;return this.#s[u]!==n[u]&&o.has(u)})};this.#x({listeners:t()})}#T(){const n=this.#e.getQueryCache().build(this.#e,this.options);if(n===this.#t)return;const e=this.#t;this.#t=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#x(n){Yn.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function hC(n,e){return ms(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Aw(n,e){return hC(n,e)||n.state.data!==void 0&&fg(n,e,e.refetchOnMount)}function fg(n,e,t){if(ms(e.enabled,n)!==!1&&go(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&dy(n,e)}return!1}function Cw(n,e,t,r){return(n!==e||ms(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&dy(n,t)}function dy(n,e){return ms(e.enabled,n)!==!1&&n.isStaleByTime(go(e.staleTime,n))}function fC(n,e){return!lg(n.getCurrentResult(),e)}function Lh(n){return{onFetch:(e,t)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const p=async()=>{let y=!1;const w=P=>{sC(P,()=>e.signal,()=>y=!0)},T=qx(e.options,e.fetchOptions),S=async(P,M,O)=>{if(y)return Promise.reject();if(M==null&&P.pages.length)return Promise.resolve(P);const W=(()=>{const me={client:e.client,queryKey:e.queryKey,pageParam:M,direction:O?"backward":"forward",meta:e.options.meta};return w(me),me})(),Q=await T(W),{maxPages:ae}=e.options,de=O?rC:nC;return{pages:de(P.pages,Q,ae),pageParams:de(P.pageParams,M,ae)}};if(s&&o.length){const P=s==="backward",M=P?Yx:pg,O={pages:o,pageParams:l},X=M(r,O);u=await S(O,X,P)}else{const P=n??o.length;do{const M=d===0?l[0]??r.initialPageParam:pg(r,u);if(d>0&&M==null)break;u=await S(u,M),d++}while(d<P)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=p}}}function pg(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function Yx(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}function pC(n,e){return e?pg(n,e)!=null:!1}function mC(n,e){return!e||!n.getPreviousPageParam?!1:Yx(n,e)!=null}var gC=class extends dC{constructor(n,e){super(n,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(n){super.setOptions({...n,behavior:Lh()})}getOptimisticResult(n){return n.behavior=Lh(),super.getOptimisticResult(n)}fetchNextPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"backward"}}})}createResult(n,e){const{state:t}=n,r=super.createResult(n,e),{isFetching:s,isRefetching:o,isError:l,isRefetchError:u}=r,d=t.fetchMeta?.fetchMore?.direction,p=l&&d==="forward",y=s&&d==="forward",w=l&&d==="backward",T=s&&d==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:pC(e,t.data),hasPreviousPage:mC(e,t.data),isFetchNextPageError:p,isFetchingNextPage:y,isFetchPreviousPageError:w,isFetchingPreviousPage:T,isRefetchError:u&&!p&&!w,isRefetching:o&&!y&&!T}}},yC=class extends Wx{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||vC(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Kx({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(l,u)=>{this.#r({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const s=this.state.status==="pending",o=!this.#s.canStart();try{if(s)t();else{this.#r({type:"pending",variables:e,isPaused:o}),await this.#n.config.onMutate?.(e,this,r);const u=await this.options.onMutate?.(e,r);u!==this.state.context&&this.#r({type:"pending",context:u,variables:e,isPaused:o})}const l=await this.#s.start();return await this.#n.config.onSuccess?.(l,e,this.state.context,this,r),await this.options.onSuccess?.(l,e,this.state.context,r),await this.#n.config.onSettled?.(l,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(l,null,e,this.state.context,r),this.#r({type:"success",data:l}),l}catch(l){try{await this.#n.config.onError?.(l,e,this.state.context,this,r)}catch(u){Promise.reject(u)}try{await this.options.onError?.(l,e,this.state.context,r)}catch(u){Promise.reject(u)}try{await this.#n.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this,r)}catch(u){Promise.reject(u)}try{await this.options.onSettled?.(void 0,l,e,this.state.context,r)}catch(u){Promise.reject(u)}throw this.#r({type:"error",error:l}),l}finally{this.#n.runNext(this)}}#r(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Yn.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function vC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _C=class extends Pu{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(n,e,t){const r=new yC({client:n,mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(r),r}add(n){this.#e.add(n);const e=nh(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=nh(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const r=t.indexOf(n);r!==-1&&t.splice(r,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=nh(n);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===n}else return!0}runNext(n){const e=nh(n);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==n&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Yn.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Iw(e,t))}findAll(n={}){return this.getAll().filter(e=>Iw(n,e))}notify(n){Yn.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return Yn.batch(()=>Promise.all(n.map(e=>e.continue().catch(Vr))))}};function nh(n){return n.options.scope?.id}var wC=class extends Pu{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const r=e.queryKey,s=e.queryHash??ly(r,e);let o=this.get(s);return o||(o=new uC({client:n,queryKey:r,queryHash:s,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(r)}),this.add(o)),o}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Yn.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>xw(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>xw(n,t)):e}notify(n){Yn.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){Yn.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Yn.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},EC=class{#e;#t;#n;#s;#r;#a;#o;#i;constructor(n={}){this.#e=n.queryCache||new wC,this.#t=n.mutationCache||new _C,this.#n=n.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=uy.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=Mh.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(go(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),o=this.#e.get(r.queryHash)?.state.data,l=ZA(e,o);if(l!==void 0)return this.#e.build(this,r).setData(l,{...t,manual:!0})}setQueriesData(n,e,t){return Yn.batch(()=>this.#e.findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;Yn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return Yn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Yn.batch(()=>this.#e.findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Vr).catch(Vr)}invalidateQueries(n,e={}){return Yn.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Yn.batch(()=>this.#e.findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,t);return t.throwOnError||(o=o.catch(Vr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Vr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(go(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Vr).catch(Vr)}fetchInfiniteQuery(n){return n.behavior=Lh(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Vr).catch(Vr)}ensureInfiniteQueryData(n){return n.behavior=Lh(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Mh.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#s.set(pu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#s.values()],t={};return e.forEach(r=>{mu(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){this.#r.set(pu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(r=>{mu(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=ly(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===cy&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Jx=j.createContext(void 0),TC=n=>{const e=j.useContext(Jx);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},xC=({client:n,children:e})=>(j.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),g.jsx(Jx.Provider,{value:n,children:e})),Xx=j.createContext(!1),IC=()=>j.useContext(Xx);Xx.Provider;function bC(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var SC=j.createContext(bC()),kC=()=>j.useContext(SC),RC=(n,e,t)=>{const r=t?.state.error&&typeof n.throwOnError=="function"?Hx(n.throwOnError,[t.state.error,t]):n.throwOnError;(n.suspense||n.experimental_prefetchInRender||r)&&(e.isReset()||(n.retryOnMount=!1))},AC=n=>{j.useEffect(()=>{n.clearReset()},[n])},CC=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(s&&n.data===void 0||Hx(t,[n.error,r])),PC=n=>{if(n.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),r=n.staleTime;n.staleTime=typeof r=="function"?(...s)=>t(r(...s)):t(r),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},NC=(n,e)=>n.isLoading&&n.isFetching&&!e,OC=(n,e)=>n?.suspense&&e.isPending,Pw=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function DC(n,e,t){const r=IC(),s=kC(),o=TC(),l=o.defaultQueryOptions(n);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const u=o.getQueryCache().get(l.queryHash);l._optimisticResults=r?"isRestoring":"optimistic",PC(l),RC(l,s,u),AC(s);const d=!o.getQueryCache().get(l.queryHash),[p]=j.useState(()=>new e(o,l)),y=p.getOptimisticResult(l),w=!r&&n.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(T=>{const S=w?p.subscribe(Yn.batchCalls(T)):Vr;return p.updateResult(),S},[p,w]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),j.useEffect(()=>{p.setOptions(l)},[l,p]),OC(l,y))throw Pw(l,p,s);if(CC({result:y,errorResetBoundary:s,throwOnError:l.throwOnError,query:u,suspense:l.suspense}))throw y.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,y),l.experimental_prefetchInRender&&!Ta&&NC(y,r)&&(d?Pw(l,p,s):u?.promise)?.catch(Vr).finally(()=>{p.updateResult()}),l.notifyOnChangeProps?y:p.trackResult(y)}function MC(n,e){return DC(n,gC)}const LC="modulepreload",jC=function(n){return"/richard-app-google-studio/"+n},Nw={},zt=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let d=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");s=d(t.map(p=>{if(p=jC(p),p in Nw)return;Nw[p]=!0;const y=p.endsWith(".css"),w=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const T=document.createElement("link");if(T.rel=y?"stylesheet":LC,y||(T.as="script"),T.crossOrigin="",T.href=p,u&&T.setAttribute("nonce",u),document.head.appendChild(T),y)return new Promise((S,P)=>{T.addEventListener("load",S),T.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};var VC=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Zx=function(n,e,t,r){function s(o){return o instanceof t?o:new t((function(l){l(o)}))}return new(t||(t=Promise))((function(o,l){function u(y){try{p(r.next(y))}catch(w){l(w)}}function d(y){try{p(r.throw(y))}catch(w){l(w)}}function p(y){y.done?o(y.value):s(y.value).then(u,d)}p((r=r.apply(n,e||[])).next())}))},eI=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(p){return function(y){return d([p,y])}}function d(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(t=0)),t;)try{if(r=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,s=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){t.label=p[1];break}if(p[0]===6&&t.label<o[1]){t.label=o[1],o=p;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(p);break}o[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(y){p=[6,y],s=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Ow=function(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},FC="ionicpwaelements",vh,tI,Yr=!1,mg=!1,Ni=function(n,e){return function(){}},UC=function(n,e){return function(){}},$C="{visibility:hidden}.hydrated{visibility:inherit}",Dw={},zC="http://www.w3.org/2000/svg",BC="http://www.w3.org/1999/xhtml",qC=function(n){return n!=null},hy=function(n){return n=typeof n,n==="object"||n==="function"};function nI(n){var e,t,r;return(r=(t=(e=n.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||t===void 0?void 0:t.getAttribute("content"))!==null&&r!==void 0?r:void 0}var HC=function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var s=null,o=!1,l=!1,u=[],d=function(w){for(var T=0;T<w.length;T++)s=w[T],Array.isArray(s)?d(s):s!=null&&typeof s!="boolean"&&((o=typeof n!="function"&&!hy(s))&&(s=String(s)),o&&l?u[u.length-1].$text$+=s:u.push(o?gg(null,s):s),l=o)};if(d(t),e){var p=e.className||e.class;p&&(e.class=typeof p!="object"?p:Object.keys(p).filter((function(w){return p[w]})).join(" "))}var y=gg(n,null);return y.$attrs$=e,u.length>0&&(y.$children$=u),y},gg=function(n,e){var t={$flags$:0,$tag$:n,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t},GC={},KC=function(n){return n&&n.$tag$===GC},WC=function(n,e){return n!=null&&!hy(n)?e&4?n==="false"?!1:n===""||!!n:e&2?parseFloat(n):e&1?String(n):n:n},QC=function(n){return ko(n).$hostElement$},M6=function(n,e,t){var r=QC(n);return{emit:function(s){return rI(r,e,{bubbles:!0,composed:!0,cancelable:!0,detail:s})}}},rI=function(n,e,t){var r=$n.ce(e,t);return n.dispatchEvent(r),r},Mw=new WeakMap,YC=function(n,e,t){var r=jh.get(n);_P&&t?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,jh.set(n,r)},JC=function(n,e,t,r){var s,o=sI(e),l=jh.get(o);if(n=n.nodeType===11?n:Ns,l)if(typeof l=="string"){n=n.head||n;var u=Mw.get(n),d=void 0;if(u||Mw.set(n,u=new Set),!u.has(o)){{d=Ns.createElement("style"),d.innerHTML=l;var p=(s=$n.$nonce$)!==null&&s!==void 0?s:nI(Ns);p!=null&&d.setAttribute("nonce",p),n.insertBefore(d,n.querySelector("link"))}u&&u.add(o)}}else n.adoptedStyleSheets.includes(l)||(n.adoptedStyleSheets=Ow(Ow([],n.adoptedStyleSheets,!0),[l],!1));return o},XC=function(n){var e=n.$cmpMeta$,t=n.$hostElement$,r=e.$flags$,s=Ni("attachStyles",e.$tagName$),o=JC(t.shadowRoot?t.shadowRoot:t.getRootNode(),e);r&10&&(t["s-sc"]=o,t.classList.add(o+"-h")),s()},sI=function(n,e){return"sc-"+n.$tagName$},Lw=function(n,e,t,r,s,o){if(t!==r){var l=Vw(n,e),u=e.toLowerCase();if(e==="class"){var d=n.classList,p=jw(t),y=jw(r);d.remove.apply(d,p.filter((function(P){return P&&!y.includes(P)}))),d.add.apply(d,y.filter((function(P){return P&&!p.includes(P)})))}else if(e==="style"){for(var w in t)(!r||r[w]==null)&&(w.includes("-")?n.style.removeProperty(w):n.style[w]="");for(var w in r)(!t||r[w]!==t[w])&&(w.includes("-")?n.style.setProperty(w,r[w]):n.style[w]=r[w])}else if(e==="ref")r&&r(n);else if(!l&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):Vw(wf,u)?e=u.slice(2):e=u[2]+e.slice(3),t&&$n.rel(n,e,t,!1),r&&$n.ael(n,e,r,!1);else{var T=hy(r);if((l||T&&r!==null)&&!s)try{if(n.tagName.includes("-"))n[e]=r;else{var S=r??"";e==="list"?l=!1:(t==null||n[e]!=S)&&(n[e]=S)}}catch{}r==null||r===!1?(r!==!1||n.getAttribute(e)==="")&&n.removeAttribute(e):(!l||o&4||s)&&!T&&(r=r===!0?"":r,n.setAttribute(e,r))}}},ZC=/\s/,jw=function(n){return n?n.split(ZC):[]},iI=function(n,e,t,r){var s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,o=n&&n.$attrs$||Dw,l=e.$attrs$||Dw;for(r in o)r in l||Lw(s,r,o[r],void 0,t,e.$flags$);for(r in l)Lw(s,r,o[r],l[r],t,e.$flags$)},fy=function(n,e,t,r){var s=e.$children$[t],o=0,l,u;if(s.$text$!==null)l=s.$elm$=Ns.createTextNode(s.$text$);else{if(Yr||(Yr=s.$tag$==="svg"),l=s.$elm$=Ns.createElementNS(Yr?zC:BC,s.$tag$),Yr&&s.$tag$==="foreignObject"&&(Yr=!1),iI(null,s,Yr),qC(vh)&&l["s-si"]!==vh&&l.classList.add(l["s-si"]=vh),s.$children$)for(o=0;o<s.$children$.length;++o)u=fy(n,s,o),u&&l.appendChild(u);s.$tag$==="svg"?Yr=!1:l.tagName==="foreignObject"&&(Yr=!0)}return l},oI=function(n,e,t,r,s,o){var l=n,u;for(l.shadowRoot&&l.tagName===tI&&(l=l.shadowRoot);s<=o;++s)r[s]&&(u=fy(null,t,s),u&&(r[s].$elm$=u,l.insertBefore(u,e)))},aI=function(n,e,t){for(var r=e;r<=t;++r){var s=n[r];if(s){var o=s.$elm$;lI(s),o&&o.remove()}}},eP=function(n,e,t,r){for(var s=0,o=0,l=e.length-1,u=e[0],d=e[l],p=r.length-1,y=r[0],w=r[p],T;s<=l&&o<=p;)u==null?u=e[++s]:d==null?d=e[--l]:y==null?y=r[++o]:w==null?w=r[--p]:rh(u,y)?(Qc(u,y),u=e[++s],y=r[++o]):rh(d,w)?(Qc(d,w),d=e[--l],w=r[--p]):rh(u,w)?(Qc(u,w),n.insertBefore(u.$elm$,d.$elm$.nextSibling),u=e[++s],w=r[--p]):rh(d,y)?(Qc(d,y),n.insertBefore(d.$elm$,u.$elm$),d=e[--l],y=r[++o]):(T=fy(e&&e[o],t,o),y=r[++o],T&&u.$elm$.parentNode.insertBefore(T,u.$elm$));s>l?oI(n,r[p+1]==null?null:r[p+1].$elm$,t,r,o,p):o>p&&aI(e,s,l)},rh=function(n,e){return n.$tag$===e.$tag$},Qc=function(n,e){var t=e.$elm$=n.$elm$,r=n.$children$,s=e.$children$,o=e.$tag$,l=e.$text$;l===null?(Yr=o==="svg"?!0:o==="foreignObject"?!1:Yr,iI(n,e,Yr),r!==null&&s!==null?eP(t,r,e,s):s!==null?(n.$text$!==null&&(t.textContent=""),oI(t,null,e,s,0,s.length-1)):r!==null&&aI(r,0,r.length-1),Yr&&o==="svg"&&(Yr=!1)):n.$text$!==l&&(t.data=l)},lI=function(n){n.$attrs$&&n.$attrs$.ref&&n.$attrs$.ref(null),n.$children$&&n.$children$.map(lI)},tP=function(n,e){var t=n.$hostElement$,r=n.$vnode$||gg(null,null),s=KC(e)?e:HC(null,null,e);tI=t.tagName,s.$tag$=null,s.$flags$|=4,n.$vnode$=s,s.$elm$=r.$elm$=t.shadowRoot||t,vh=t["s-sc"],Qc(r,s)},cI=function(n,e){e&&!n.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise((function(t){return n.$onRenderResolve$=t})))},_f=function(n,e){if(n.$flags$|=16,n.$flags$&4){n.$flags$|=512;return}cI(n,n.$ancestorComponent$);var t=function(){return nP(n,e)};return EP(t)},nP=function(n,e){var t=Ni("scheduleUpdate",n.$cmpMeta$.$tagName$),r=n.$lazyInstance$,s;return e&&(n.$flags$|=256,n.$queuedListeners$&&(n.$queuedListeners$.map((function(o){var l=o[0],u=o[1];return py(r,l,u)})),n.$queuedListeners$=void 0)),t(),rP(s,(function(){return iP(n,r,e)}))},rP=function(n,e){return sP(n)?n.then(e):e()},sP=function(n){return n instanceof Promise||n&&n.then&&typeof n.then=="function"},iP=function(n,e,t){return Zx(void 0,void 0,void 0,(function(){var r,s,o,l,u,d,p;return eI(this,(function(y){return s=n.$hostElement$,o=Ni("update",n.$cmpMeta$.$tagName$),l=s["s-rc"],t&&XC(n),u=Ni("render",n.$cmpMeta$.$tagName$),oP(n,e),l&&(l.map((function(w){return w()})),s["s-rc"]=void 0),u(),o(),d=(r=s["s-p"])!==null&&r!==void 0?r:[],p=function(){return aP(n)},d.length===0?p():(Promise.all(d).then(p),n.$flags$|=4,d.length=0),[2]}))}))},oP=function(n,e,t){try{e=e.render(),n.$flags$&=-17,n.$flags$|=2,tP(n,e)}catch(r){Ps(r,n.$hostElement$)}return null},aP=function(n){n.$cmpMeta$.$tagName$;var e=n.$hostElement$,t=Ni(),r=n.$lazyInstance$,s=n.$ancestorComponent$;n.$flags$&64?t():(n.$flags$|=64,dI(e),py(r,"componentDidLoad"),t(),n.$onReadyResolve$(e),s||uI()),n.$onInstanceResolve$(e),n.$onRenderResolve$&&(n.$onRenderResolve$(),n.$onRenderResolve$=void 0),n.$flags$&512&&gy((function(){return _f(n,!1)})),n.$flags$&=-517},L6=function(n){{var e=ko(n),t=e.$hostElement$.isConnected;return t&&(e.$flags$&18)===2&&_f(e,!1),t}},uI=function(n){dI(Ns.documentElement),gy((function(){return rI(wf,"appload",{detail:{namespace:FC}})}))},py=function(n,e,t){if(n&&n[e])try{return n[e](t)}catch(r){Ps(r)}},dI=function(n){return n.classList.add("hydrated")},lP=function(n,e){return ko(n).$instanceValues$.get(e)},cP=function(n,e,t,r){var s=ko(n),o=s.$instanceValues$.get(e),l=s.$flags$,u=s.$lazyInstance$;t=WC(t,r.$members$[e][0]);var d=Number.isNaN(o)&&Number.isNaN(t),p=t!==o&&!d;(!(l&8)||o===void 0)&&p&&(s.$instanceValues$.set(e,t),u&&(l&18)===2&&_f(s,!1))},hI=function(n,e,t){if(e.$members$){var r=Object.entries(e.$members$),s=n.prototype;if(r.map((function(l){var u=l[0],d=l[1][0];d&31||t&2&&d&32?Object.defineProperty(s,u,{get:function(){return lP(this,u)},set:function(p){cP(this,u,p,e)},configurable:!0,enumerable:!0}):t&1&&d&64&&Object.defineProperty(s,u,{value:function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];var w=ko(this);return w.$onInstancePromise$.then((function(){var T;return(T=w.$lazyInstance$)[u].apply(T,p)}))}})})),t&1){var o=new Map;s.attributeChangedCallback=function(l,u,d){var p=this;$n.jmp((function(){var y=o.get(l);if(p.hasOwnProperty(y))d=p[y],delete p[y];else if(s.hasOwnProperty(y)&&typeof p[y]=="number"&&p[y]==d)return;p[y]=d===null&&typeof p[y]=="boolean"?!1:d}))},n.observedAttributes=r.filter((function(l){l[0];var u=l[1];return u[0]&15})).map((function(l){var u=l[0],d=l[1],p=d[1]||u;return o.set(p,u),p}))}}return n},uP=function(n,e,t,r,s){return Zx(void 0,void 0,void 0,(function(){var o,l,u,d,p,y,w;return eI(this,(function(T){switch(T.label){case 0:return(e.$flags$&32)!==0?[3,3]:(e.$flags$|=32,s=vP(t),s.then?(o=UC(),[4,s]):[3,2]);case 1:s=T.sent(),o(),T.label=2;case 2:s.isProxied||(hI(s,t,2),s.isProxied=!0),l=Ni("createInstance",t.$tagName$),e.$flags$|=8;try{new s(e)}catch(S){Ps(S)}e.$flags$&=-9,l(),s.style&&(u=s.style,d=sI(t),jh.has(d)||(p=Ni("registerStyles",t.$tagName$),YC(d,u,!!(t.$flags$&1)),p())),T.label=3;case 3:return y=e.$ancestorComponent$,w=function(){return _f(e,!0)},y&&y["s-rc"]?y["s-rc"].push(w):w(),[2]}}))}))},dP=function(n){if(($n.$flags$&1)===0){var e=ko(n),t=e.$cmpMeta$,r=Ni("connectedCallback",t.$tagName$);if(e.$flags$&1)fI(n,e,t.$listeners$);else{e.$flags$|=1;for(var s=n;s=s.parentNode||s.host;)if(s["s-p"]){cI(e,e.$ancestorComponent$=s);break}t.$members$&&Object.entries(t.$members$).map((function(o){var l=o[0],u=o[1][0];if(u&31&&n.hasOwnProperty(l)){var d=n[l];delete n[l],n[l]=d}})),uP(n,e,t)}r()}},hP=function(n){if(($n.$flags$&1)===0){var e=ko(n),t=e.$lazyInstance$;e.$rmListeners$&&(e.$rmListeners$.map((function(r){return r()})),e.$rmListeners$=void 0),py(t,"disconnectedCallback")}},fP=function(n,e){e===void 0&&(e={});var t,r=Ni(),s=[],o=e.exclude||[],l=wf.customElements,u=Ns.head,d=u.querySelector("meta[charset]"),p=Ns.createElement("style"),y=[],w,T=!0;Object.assign($n,e),$n.$resourcesUrl$=new URL(e.resourcesUrl||"./",Ns.baseURI).href,n.map((function(P){P[1].map((function(M){var O={$flags$:M[0],$tagName$:M[1],$members$:M[2],$listeners$:M[3]};O.$members$=M[2],O.$listeners$=M[3];var X=O.$tagName$,W=(function(Q){VC(ae,Q);function ae(de){var me=Q.call(this,de)||this;return de=me,yP(de,O),O.$flags$&1&&de.attachShadow({mode:"open"}),me}return ae.prototype.connectedCallback=function(){var de=this;w&&(clearTimeout(w),w=null),T?y.push(this):$n.jmp((function(){return dP(de)}))},ae.prototype.disconnectedCallback=function(){var de=this;$n.jmp((function(){return hP(de)}))},ae.prototype.componentOnReady=function(){return ko(this).$onReadyPromise$},ae})(HTMLElement);O.$lazyBundleId$=P[0],!o.includes(X)&&!l.get(X)&&(s.push(X),l.define(X,hI(W,O,1)))}))}));{p.innerHTML=s+$C,p.setAttribute("data-styles","");var S=(t=$n.$nonce$)!==null&&t!==void 0?t:nI(Ns);S!=null&&p.setAttribute("nonce",S),u.insertBefore(p,d?d.nextSibling:u.firstChild)}T=!1,y.length?y.map((function(P){return P.connectedCallback()})):$n.jmp((function(){return w=setTimeout(uI,30)})),r()},fI=function(n,e,t,r){t&&t.map((function(s){var o=s[0],l=s[1],u=s[2],d=mP(n,o),p=pP(e,u),y=gP(o);$n.ael(d,l,p,y),(e.$rmListeners$=e.$rmListeners$||[]).push((function(){return $n.rel(d,l,p,y)}))}))},pP=function(n,e){return function(t){try{n.$flags$&256?n.$lazyInstance$[e](t):(n.$queuedListeners$=n.$queuedListeners$||[]).push([e,t])}catch(r){Ps(r)}}},mP=function(n,e){return e&16?Ns.body:n},gP=function(n){return(n&2)!==0},my=new WeakMap,ko=function(n){return my.get(n)},j6=function(n,e){return my.set(e.$lazyInstance$=n,e)},yP=function(n,e){var t={$flags$:0,$hostElement$:n,$cmpMeta$:e,$instanceValues$:new Map};return t.$onInstancePromise$=new Promise((function(r){return t.$onInstanceResolve$=r})),t.$onReadyPromise$=new Promise((function(r){return t.$onReadyResolve$=r})),n["s-p"]=[],n["s-rc"]=[],fI(n,t,e.$listeners$),my.set(n,t)},Vw=function(n,e){return e in n},Ps=function(n,e){return(0,console.error)(n,e)},Rm=new Map,vP=function(n,e,t){var r=n.$tagName$.replace(/-/g,"_"),s=n.$lazyBundleId$,o=Rm.get(s);if(o)return o[r];{var l=function(u){return Rm.set(s,u),u[r]};switch(s){case"pwa-action-sheet":return zt(()=>import("./pwa-action-sheet.entry-nDq2WDh6.js"),[]).then(l,Ps);case"pwa-camera-modal":return zt(()=>import("./pwa-camera-modal.entry-C8EtfcRG.js"),[]).then(l,Ps);case"pwa-toast":return zt(()=>import("./pwa-toast.entry-BMO5V-93.js"),[]).then(l,Ps);case"pwa-camera-modal-instance":return zt(()=>import("./pwa-camera-modal-instance.entry-BH-kN0mh.js"),[]).then(l,Ps);case"pwa-camera":return zt(()=>import("./pwa-camera.entry-01d2eaNV.js"),[]).then(l,Ps)}}return zt(()=>import("./".concat(s,".entry.js").concat("")),[]).then((function(u){return Rm.set(s,u),u[r]}),Ps)},jh=new Map,wf=typeof window<"u"?window:{},Ns=wf.document||{head:{}},$n={$flags$:0,$resourcesUrl$:"",jmp:function(n){return n()},raf:function(n){return requestAnimationFrame(n)},ael:function(n,e,t,r){return n.addEventListener(e,t,r)},rel:function(n,e,t,r){return n.removeEventListener(e,t,r)},ce:function(n,e){return new CustomEvent(n,e)}},pI=function(n){return Promise.resolve(n)},_P=(function(){try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Fw=[],mI=[],wP=function(n,e){return function(t){n.push(t),mg||(mg=!0,$n.$flags$&4?gy(yg):$n.raf(yg))}},Uw=function(n){for(var e=0;e<n.length;e++)try{n[e](performance.now())}catch(t){Ps(t)}n.length=0},yg=function(){Uw(Fw),Uw(mI),(mg=Fw.length>0)&&$n.raf(yg)},gy=function(n){return pI().then(n)},EP=wP(mI),TP=function(){return pI()},xP=function(n,e){return typeof window>"u"?Promise.resolve():TP().then((function(){return fP([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],e)}))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var n=HTMLElement;window.HTMLElement=function(){return Reflect.construct(n,[],this.constructor)},HTMLElement.prototype=n.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,n)}})();var $w="popstate";function IP(n={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return Vh("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Fl(s)}return gI(e,t,null,n)}function bP(n={}){function e(s,o){let{pathname:l="/",search:u="",hash:d=""}=Va(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Vh("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=s.location.href,p=d.indexOf("#");u=p===-1?d:d.slice(0,p)}return u+"#"+(typeof o=="string"?o:Fl(o))}function r(s,o){ns(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return gI(e,t,r,n)}function an(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ns(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SP(){return Math.random().toString(36).substring(2,10)}function zw(n,e){return{usr:n.state,key:n.key,idx:e}}function Vh(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Va(e):e,state:t,key:e&&e.key||r||SP()}}function Fl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Va(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function gI(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",d=null,p=y();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function y(){return(l.state||{idx:null}).idx}function w(){u="POP";let O=y(),X=O==null?null:O-p;p=O,d&&d({action:u,location:M.location,delta:X})}function T(O,X){u="PUSH";let W=Vh(M.location,O,X);t&&t(W,O),p=y()+1;let Q=zw(W,p),ae=M.createHref(W);try{l.pushState(Q,"",ae)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;s.location.assign(ae)}o&&d&&d({action:u,location:M.location,delta:1})}function S(O,X){u="REPLACE";let W=Vh(M.location,O,X);t&&t(W,O),p=y();let Q=zw(W,p),ae=M.createHref(W);l.replaceState(Q,"",ae),o&&d&&d({action:u,location:M.location,delta:0})}function P(O){return kP(O)}let M={get action(){return u},get location(){return n(s,l)},listen(O){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener($w,w),d=O,()=>{s.removeEventListener($w,w),d=null}},createHref(O){return e(s,O)},createURL:P,encodeLocation(O){let X=P(O);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:T,replace:S,go(O){return l.go(O)}};return M}function kP(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),an(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Fl(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function yI(n,e,t="/"){return RP(n,e,t,!1)}function RP(n,e,t,r){let s=typeof e=="string"?Va(e):e,o=Oi(s.pathname||"/",t);if(o==null)return null;let l=vI(n);AP(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let p=UP(o);u=VP(l[d],p,r)}return u}function vI(n,e=[],t=[],r="",s=!1){let o=(l,u,d=s,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&d)return;an(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let w=Ci([r,y.relativePath]),T=t.concat(y);l.children&&l.children.length>0&&(an(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),vI(l.children,e,T,w,d)),!(l.path==null&&!l.index)&&e.push({path:w,score:LP(w,l.index),routesMeta:T})};return n.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of _I(l.path))o(l,u,!0,d)}),e}function _I(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=_I(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function AP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:jP(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var CP=/^:[\w-]+$/,PP=3,NP=2,OP=1,DP=10,MP=-2,Bw=n=>n==="*";function LP(n,e){let t=n.split("/"),r=t.length;return t.some(Bw)&&(r+=MP),e&&(r+=NP),t.filter(s=>!Bw(s)).reduce((s,o)=>s+(CP.test(o)?PP:o===""?OP:DP),r)}function jP(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function VP(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],p=u===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",w=Fh({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),T=d.route;if(!w&&p&&t&&!r[r.length-1].route.index&&(w=Fh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!w)return null;Object.assign(s,w.params),l.push({params:s,pathname:Ci([o,w.pathname]),pathnameBase:qP(Ci([o,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(o=Ci([o,w.pathnameBase]))}return l}function Fh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=FP(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:w},T)=>{if(y==="*"){let P=u[T]||"";l=o.slice(0,o.length-P.length).replace(/(.)\/+$/,"$1")}const S=u[T];return w&&!S?p[y]=void 0:p[y]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function FP(n,e=!1,t=!0){ns(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function UP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ns(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Oi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var wI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$P=n=>wI.test(n);function zP(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Va(n):n,o;if(t)if($P(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),ns(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=qw(t.substring(1),"/"):o=qw(t,e)}else o=e;return{pathname:o,search:HP(r),hash:GP(s)}}function qw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Am(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yy(n){let e=BP(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function vy(n,e,t,r=!1){let s;typeof n=="string"?s=Va(n):(s={...n},an(!s.pathname||!s.pathname.includes("?"),Am("?","pathname","search",s)),an(!s.pathname||!s.pathname.includes("#"),Am("#","pathname","hash",s)),an(!s.search||!s.search.includes("#"),Am("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let w=e.length-1;if(!r&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),w-=1;s.pathname=T.join("/")}u=w>=0?e[w]:"/"}let d=zP(s,u),p=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var Ci=n=>n.join("/").replace(/\/\/+/g,"/"),qP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),HP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,GP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,KP=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function WP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function QP(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var EI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function TI(n,e){let t=n;if(typeof t!="string"||!wI.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(EI)try{let o=new URL(window.location.href),l=t.startsWith("//")?new URL(o.protocol+t):new URL(t),u=Oi(l.pathname,e);l.origin===o.origin&&u!=null?t=u+l.search+l.hash:s=!0}catch{ns(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xI=["POST","PUT","PATCH","DELETE"];new Set(xI);var YP=["GET",...xI];new Set(YP);var tc=j.createContext(null);tc.displayName="DataRouter";var Ef=j.createContext(null);Ef.displayName="DataRouterState";var JP=j.createContext(!1),II=j.createContext({isTransitioning:!1});II.displayName="ViewTransition";var XP=j.createContext(new Map);XP.displayName="Fetchers";var ZP=j.createContext(null);ZP.displayName="Await";var ss=j.createContext(null);ss.displayName="Navigation";var Nu=j.createContext(null);Nu.displayName="Location";var Ls=j.createContext({outlet:null,matches:[],isDataRoute:!1});Ls.displayName="Route";var _y=j.createContext(null);_y.displayName="RouteError";var bI="REACT_ROUTER_ERROR",eN="REDIRECT",tN="ROUTE_ERROR_RESPONSE";function nN(n){if(n.startsWith(`${bI}:${eN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function rN(n){if(n.startsWith(`${bI}:${tN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new KP(e.status,e.statusText,e.data)}catch{}}function sN(n,{relative:e}={}){an(nc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(ss),{hash:s,pathname:o,search:l}=Ou(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Ci([t,o])),r.createHref({pathname:u,search:l,hash:s})}function nc(){return j.useContext(Nu)!=null}function js(){return an(nc(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Nu).location}var SI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kI(n){j.useContext(ss).static||j.useLayoutEffect(n)}function Fa(){let{isDataRoute:n}=j.useContext(Ls);return n?yN():iN()}function iN(){an(nc(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(tc),{basename:e,navigator:t}=j.useContext(ss),{matches:r}=j.useContext(Ls),{pathname:s}=js(),o=JSON.stringify(yy(r)),l=j.useRef(!1);return kI(()=>{l.current=!0}),j.useCallback((d,p={})=>{if(ns(l.current,SI),!l.current)return;if(typeof d=="number"){t.go(d);return}let y=vy(d,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ci([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,o,s,n])}j.createContext(null);function V6(){let{matches:n}=j.useContext(Ls),e=n[n.length-1];return e?e.params:{}}function Ou(n,{relative:e}={}){let{matches:t}=j.useContext(Ls),{pathname:r}=js(),s=JSON.stringify(yy(t));return j.useMemo(()=>vy(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function oN(n,e){return RI(n,e)}function RI(n,e,t,r,s){an(nc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(ss),{matches:l}=j.useContext(Ls),u=l[l.length-1],d=u?u.params:{},p=u?u.pathname:"/",y=u?u.pathnameBase:"/",w=u&&u.route;{let W=w&&w.path||"";CI(p,!w||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let T=js(),S;if(e){let W=typeof e=="string"?Va(e):e;an(y==="/"||W.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${W.pathname}" was given in the \`location\` prop.`),S=W}else S=T;let P=S.pathname||"/",M=P;if(y!=="/"){let W=y.replace(/^\//,"").split("/");M="/"+P.replace(/^\//,"").split("/").slice(W.length).join("/")}let O=yI(n,{pathname:M});ns(w||O!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),ns(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=dN(O&&O.map(W=>Object.assign({},W,{params:Object.assign({},d,W.params),pathname:Ci([y,o.encodeLocation?o.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?y:Ci([y,o.encodeLocation?o.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),l,t,r,s);return e&&X?j.createElement(Nu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},X):X}function aN(){let n=gN(),e=WP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,l)}var lN=j.createElement(aN,null),AI=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=rN(n.digest);t&&(n=t)}let e=n!==void 0?j.createElement(Ls.Provider,{value:this.props.routeContext},j.createElement(_y.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?j.createElement(cN,{error:n},e):e}};AI.contextType=JP;var Cm=new WeakMap;function cN({children:n,error:e}){let{basename:t}=j.useContext(ss);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=nN(e.digest);if(r){let s=Cm.get(e);if(s)throw s;let o=TI(r.location,t);if(EI&&!Cm.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Cm.set(e,l),l}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return n}function uN({routeContext:n,match:e,children:t}){let r=j.useContext(tc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Ls.Provider,{value:n},t)}function dN(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let y=o.findIndex(w=>w.route.id&&l?.[w.route.id]!==void 0);an(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let u=!1,d=-1;if(t)for(let y=0;y<o.length;y++){let w=o[y];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(d=y),w.route.id){let{loaderData:T,errors:S}=t,P=w.route.loader&&!T.hasOwnProperty(w.route.id)&&(!S||S[w.route.id]===void 0);if(w.route.lazy||P){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let p=t&&r?(y,w)=>{r(y,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:QP(t.matches),errorInfo:w})}:void 0;return o.reduceRight((y,w,T)=>{let S,P=!1,M=null,O=null;t&&(S=l&&w.route.id?l[w.route.id]:void 0,M=w.route.errorElement||lN,u&&(d<0&&T===0?(CI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,O=null):d===T&&(P=!0,O=w.route.hydrateFallbackElement||null)));let X=e.concat(o.slice(0,T+1)),W=()=>{let Q;return S?Q=M:P?Q=O:w.route.Component?Q=j.createElement(w.route.Component,null):w.route.element?Q=w.route.element:Q=y,j.createElement(uN,{match:w,routeContext:{outlet:y,matches:X,isDataRoute:t!=null},children:Q})};return t&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?j.createElement(AI,{location:t.location,revalidation:t.revalidation,component:M,error:S,children:W(),routeContext:{outlet:null,matches:X,isDataRoute:!0},onError:p}):W()},null)}function wy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hN(n){let e=j.useContext(tc);return an(e,wy(n)),e}function fN(n){let e=j.useContext(Ef);return an(e,wy(n)),e}function pN(n){let e=j.useContext(Ls);return an(e,wy(n)),e}function Ey(n){let e=pN(n),t=e.matches[e.matches.length-1];return an(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function mN(){return Ey("useRouteId")}function gN(){let n=j.useContext(_y),e=fN("useRouteError"),t=Ey("useRouteError");return n!==void 0?n:e.errors?.[t]}function yN(){let{router:n}=hN("useNavigate"),e=Ey("useNavigate"),t=j.useRef(!1);return kI(()=>{t.current=!0}),j.useCallback(async(s,o={})=>{ns(t.current,SI),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Hw={};function CI(n,e,t){!e&&!Hw[n]&&(Hw[n]=!0,ns(!1,t))}j.memo(vN);function vN({routes:n,future:e,state:t,onError:r}){return RI(n,void 0,t,r,e)}function PI({to:n,replace:e,state:t,relative:r}){an(nc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(ss);ns(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=j.useContext(Ls),{pathname:l}=js(),u=Fa(),d=vy(n,yy(o),l,r==="path"),p=JSON.stringify(d);return j.useEffect(()=>{u(JSON.parse(p),{replace:e,state:t,relative:r})},[u,p,r,e,t]),null}function Vn(n){an(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NI({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1,unstable_useTransitions:l}){an(!nc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:l,future:{}}),[u,s,o,l]);typeof t=="string"&&(t=Va(t));let{pathname:p="/",search:y="",hash:w="",state:T=null,key:S="default"}=t,P=j.useMemo(()=>{let M=Oi(p,u);return M==null?null:{location:{pathname:M,search:y,hash:w,state:T,key:S},navigationType:r}},[u,p,y,w,T,S,r]);return ns(P!=null,`<Router basename="${u}"> is not able to match the URL "${p}${y}${w}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:j.createElement(ss.Provider,{value:d},j.createElement(Nu.Provider,{children:e,value:P}))}function _N({children:n,location:e}){return oN(vg(n),e)}function vg(n,e=[]){let t=[];return j.Children.forEach(n,(r,s)=>{if(!j.isValidElement(r))return;let o=[...e,s];if(r.type===j.Fragment){t.push.apply(t,vg(r.props.children,o));return}an(r.type===Vn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),an(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=vg(r.props.children,o)),t.push(l)}),t}var _h="get",wh="application/x-www-form-urlencoded";function Tf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function wN(n){return Tf(n)&&n.tagName.toLowerCase()==="button"}function EN(n){return Tf(n)&&n.tagName.toLowerCase()==="form"}function TN(n){return Tf(n)&&n.tagName.toLowerCase()==="input"}function xN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function IN(n,e){return n.button===0&&(!e||e==="_self")&&!xN(n)}var sh=null;function bN(){if(sh===null)try{new FormData(document.createElement("form"),0),sh=!1}catch{sh=!0}return sh}var SN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pm(n){return n!=null&&!SN.has(n)?(ns(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wh}"`),null):n}function kN(n,e){let t,r,s,o,l;if(EN(n)){let u=n.getAttribute("action");r=u?Oi(u,e):null,t=n.getAttribute("method")||_h,s=Pm(n.getAttribute("enctype"))||wh,o=new FormData(n)}else if(wN(n)||TN(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(r=d?Oi(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||_h,s=Pm(n.getAttribute("formenctype"))||Pm(u.getAttribute("enctype"))||wh,o=new FormData(u,n),!bN()){let{name:p,type:y,value:w}=n;if(y==="image"){let T=p?`${p}.`:"";o.append(`${T}x`,"0"),o.append(`${T}y`,"0")}else p&&o.append(p,w)}}else{if(Tf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=_h,r=null,s=wh,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ty(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function RN(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Oi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function AN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function PN(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await AN(o,t);return l.links?l.links():[]}return[]}));return MN(r.flat(1).filter(CN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Gw(n,e,t,r,s,o){let l=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,u=(d,p)=>t[p].pathname!==d.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,p)=>l(d,p)||u(d,p)):o==="data"?e.filter((d,p)=>{let y=r.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(l(d,p)||u(d,p))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function NN(n,e,{includeHydrateFallback:t}={}){return ON(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function ON(n){return[...new Set(n)]}function DN(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function MN(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(DN(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function OI(){let n=j.useContext(tc);return Ty(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function LN(){let n=j.useContext(Ef);return Ty(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var xy=j.createContext(void 0);xy.displayName="FrameworkContext";function DI(){let n=j.useContext(xy);return Ty(n,"You must render this element inside a <HydratedRouter> element"),n}function jN(n,e){let t=j.useContext(xy),[r,s]=j.useState(!1),[o,l]=j.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:w}=e,T=j.useRef(null);j.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let M=X=>{X.forEach(W=>{l(W.isIntersecting)})},O=new IntersectionObserver(M,{threshold:.5});return T.current&&O.observe(T.current),()=>{O.disconnect()}}},[n]),j.useEffect(()=>{if(r){let M=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(M)}}},[r]);let S=()=>{s(!0)},P=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,T,{}]:[o,T,{onFocus:zc(u,S),onBlur:zc(d,P),onMouseEnter:zc(p,S),onMouseLeave:zc(y,P),onTouchStart:zc(w,S)}]:[!1,T,{}]}function zc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function VN({page:n,...e}){let{router:t}=OI(),r=j.useMemo(()=>yI(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?j.createElement(UN,{page:n,matches:r,...e}):null}function FN(n){let{manifest:e,routeModules:t}=DI(),[r,s]=j.useState([]);return j.useEffect(()=>{let o=!1;return PN(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function UN({page:n,matches:e,...t}){let r=js(),{manifest:s,routeModules:o}=DI(),{basename:l}=OI(),{loaderData:u,matches:d}=LN(),p=j.useMemo(()=>Gw(n,e,d,s,r,"data"),[n,e,d,s,r]),y=j.useMemo(()=>Gw(n,e,d,s,r,"assets"),[n,e,d,s,r]),w=j.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let P=new Set,M=!1;if(e.forEach(X=>{let W=s.routes[X.route.id];!W||!W.hasLoader||(!p.some(Q=>Q.route.id===X.route.id)&&X.route.id in u&&o[X.route.id]?.shouldRevalidate||W.hasClientLoader?M=!0:P.add(X.route.id))}),P.size===0)return[];let O=RN(n,l,"data");return M&&P.size>0&&O.searchParams.set("_routes",e.filter(X=>P.has(X.route.id)).map(X=>X.route.id).join(",")),[O.pathname+O.search]},[l,u,r,s,p,e,n,o]),T=j.useMemo(()=>NN(y,s),[y,s]),S=FN(y);return j.createElement(j.Fragment,null,w.map(P=>j.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),T.map(P=>j.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),S.map(({key:P,link:M})=>j.createElement("link",{key:P,nonce:t.nonce,...M})))}function $N(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var zN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zN&&(window.__reactRouterVersion="7.11.0")}catch{}function BN({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=j.useRef();s.current==null&&(s.current=IP({window:r,v5Compat:!0}));let o=s.current,[l,u]=j.useState({action:o.action,location:o.location}),d=j.useCallback(p=>{t===!1?u(p):j.startTransition(()=>u(p))},[t]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.createElement(NI,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:t})}function qN({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=j.useRef();s.current==null&&(s.current=bP({window:r,v5Compat:!0}));let o=s.current,[l,u]=j.useState({action:o.action,location:o.location}),d=j.useCallback(p=>{t===!1?u(p):j.startTransition(()=>u(p))},[t]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.createElement(NI,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:t})}var MI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LI=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:p,preventScrollReset:y,viewTransition:w,unstable_defaultShouldRevalidate:T,...S},P){let{basename:M,unstable_useTransitions:O}=j.useContext(ss),X=typeof p=="string"&&MI.test(p),W=TI(p,M);p=W.to;let Q=sN(p,{relative:s}),[ae,de,me]=jN(r,S),N=WN(p,{replace:l,state:u,target:d,preventScrollReset:y,relative:s,viewTransition:w,unstable_defaultShouldRevalidate:T,unstable_useTransitions:O});function I(k){e&&e(k),k.defaultPrevented||N(k)}let A=j.createElement("a",{...S,...me,href:W.absoluteURL||Q,onClick:W.isExternal||o?e:I,ref:$N(P,de),target:d,"data-discover":!X&&t==="render"?"true":void 0});return ae&&!X?j.createElement(j.Fragment,null,A,j.createElement(VN,{page:Q})):A});LI.displayName="Link";var HN=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...p},y){let w=Ou(l,{relative:p.relative}),T=js(),S=j.useContext(Ef),{navigator:P,basename:M}=j.useContext(ss),O=S!=null&&ZN(w)&&u===!0,X=P.encodeLocation?P.encodeLocation(w).pathname:w.pathname,W=T.pathname,Q=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(W=W.toLowerCase(),Q=Q?Q.toLowerCase():null,X=X.toLowerCase()),Q&&M&&(Q=Oi(Q,M)||Q);const ae=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let de=W===X||!s&&W.startsWith(X)&&W.charAt(ae)==="/",me=Q!=null&&(Q===X||!s&&Q.startsWith(X)&&Q.charAt(X.length)==="/"),N={isActive:de,isPending:me,isTransitioning:O},I=de?e:void 0,A;typeof r=="function"?A=r(N):A=[r,de?"active":null,me?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(N):o;return j.createElement(LI,{...p,"aria-current":I,className:A,ref:y,style:k,to:l,viewTransition:u},typeof d=="function"?d(N):d)});HN.displayName="NavLink";var GN=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=_h,action:u,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:w,unstable_defaultShouldRevalidate:T,...S},P)=>{let{unstable_useTransitions:M}=j.useContext(ss),O=JN(),X=XN(u,{relative:p}),W=l.toLowerCase()==="get"?"get":"post",Q=typeof u=="string"&&MI.test(u),ae=de=>{if(d&&d(de),de.defaultPrevented)return;de.preventDefault();let me=de.nativeEvent.submitter,N=me?.getAttribute("formmethod")||l,I=()=>O(me||de.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:s,state:o,relative:p,preventScrollReset:y,viewTransition:w,unstable_defaultShouldRevalidate:T});M&&t!==!1?j.startTransition(()=>I()):I()};return j.createElement("form",{ref:P,method:W,action:X,onSubmit:r?d:ae,...S,"data-discover":!Q&&n==="render"?"true":void 0})});GN.displayName="Form";function KN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jI(n){let e=j.useContext(tc);return an(e,KN(n)),e}function WN(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let p=Fa(),y=js(),w=Ou(n,{relative:o});return j.useCallback(T=>{if(IN(T,e)){T.preventDefault();let S=t!==void 0?t:Fl(y)===Fl(w),P=()=>p(n,{replace:S,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});d?j.startTransition(()=>P()):P()}},[y,p,w,t,r,e,n,s,o,l,u,d])}var QN=0,YN=()=>`__${String(++QN)}__`;function JN(){let{router:n}=jI("useSubmit"),{basename:e}=j.useContext(ss),t=mN(),r=n.fetch,s=n.navigate;return j.useCallback(async(o,l={})=>{let{action:u,method:d,encType:p,formData:y,body:w}=kN(o,e);if(l.navigate===!1){let T=l.fetcherKey||YN();await r(T,t,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:y,body:w,formMethod:l.method||d,formEncType:l.encType||p,flushSync:l.flushSync})}else await s(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:y,body:w,formMethod:l.method||d,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function XN(n,{relative:e}={}){let{basename:t}=j.useContext(ss),r=j.useContext(Ls);an(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Ou(n||".",{relative:e})},l=js();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(y=>y==="")){u.delete("index"),d.filter(w=>w).forEach(w=>u.append("index",w));let y=u.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ci([t,o.pathname])),Fl(o)}function ZN(n,{relative:e}={}){let t=j.useContext(II);an(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=jI("useViewTransitionState"),s=Ou(n,{relative:e});if(!t.isTransitioning)return!1;let o=Oi(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Oi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Fh(s.pathname,l)!=null||Fh(s.pathname,o)!=null}var lr=(n=>(n.STOREFRONT="storefront",n.ADMIN="admin",n.AI_CONSULTANT="ai_consultant",n.AI_LAB="ai_lab",n.BLOG="blog",n.DIGITAL_GARAGE="digital_garage",n.PRE_QUALIFY="pre_qualify",n.TRADE_IN="trade_in",n.CHAT="chat",n.CODE_ANALYZER="code_analyzer",n.IMAGES="images",n.VIDEO_STUDIO="video_studio",n.VOICE_ASSISTANT="voice_assistant",n.DEVOPS="devops",n.SETTINGS="settings",n))(lr||{}),Kw={};const VI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},e2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Iy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,y=o>>2,w=(o&3)<<4|u>>4;let T=(u&15)<<2|p>>6,S=p&63;d||(S=64,l||(T=64)),r.push(t[y],t[w],t[T],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(VI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):e2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const w=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||p==null||w==null)throw new t2;const T=o<<2|u>>4;if(r.push(T),p!==64){const S=u<<4&240|p>>2;if(r.push(S),w!==64){const P=p<<6&192|w;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class t2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n2=function(n){const e=VI(n);return Iy.encodeByteArray(e,!0)},Uh=function(n){return n2(n).replace(/\./g,"")},FI=function(n){try{return Iy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function r2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const s2=()=>r2().__FIREBASE_DEFAULTS__,i2=()=>{if(typeof process>"u"||typeof Kw>"u")return;const n=Kw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},o2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&FI(n[1]);return e&&JSON.parse(e)},xf=()=>{try{return s2()||i2()||o2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},UI=n=>{var e,t;return(t=(e=xf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},by=n=>{const e=UI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$I=()=>{var n;return(n=xf())===null||n===void 0?void 0:n.config},zI=n=>{var e;return(e=xf())===null||e===void 0?void 0:e[`_${n}`]};class _g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function BI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Uh(JSON.stringify(t)),Uh(JSON.stringify(l)),""].join(".")}function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function l2(){var n;const e=(n=xf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function c2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function u2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function d2(){const n=An();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function HI(){return!l2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Du(){try{return typeof indexedDB=="object"}catch{return!1}}function Sy(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function GI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const h2="FirebaseError";class is extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=h2,Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vi.prototype.create)}}class Vi{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?f2(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new is(s,u,r)}}function f2(n,e){return n.replace(p2,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const p2=/\{\$([^}]+)}/g;function m2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function gu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(Ww(o)&&Ww(l)){if(!gu(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Ww(n){return n!==null&&typeof n=="object"}function Mu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Jc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function g2(n,e){const t=new y2(n,e);return t.subscribe.bind(t)}class y2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");v2(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Nm),s.error===void 0&&(s.error=Nm),s.complete===void 0&&(s.complete=Nm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function v2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Nm(){}const _2=1e3,w2=2,E2=14400*1e3,T2=.5;function Qw(n,e=_2,t=w2){const r=e*Math.pow(t,n),s=Math.round(T2*r*(Math.random()-.5)*2);return Math.min(E2,r+s)}function Ft(n){return n&&n._delegate?n._delegate:n}class hr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ca="[DEFAULT]";class x2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _g;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(b2(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:I2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function I2(n){return n===ca?void 0:n}function b2(n){return n.instantiationMode==="EAGER"}class S2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new x2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var bt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(bt||(bt={}));const k2={debug:bt.DEBUG,verbose:bt.VERBOSE,info:bt.INFO,warn:bt.WARN,error:bt.ERROR,silent:bt.SILENT},R2=bt.INFO,A2={[bt.DEBUG]:"log",[bt.VERBOSE]:"log",[bt.INFO]:"info",[bt.WARN]:"warn",[bt.ERROR]:"error"},C2=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=A2[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rc{constructor(e){this.name=e,this._logLevel=R2,this._logHandler=C2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,bt.DEBUG,...e),this._logHandler(this,bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,bt.VERBOSE,...e),this._logHandler(this,bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,bt.INFO,...e),this._logHandler(this,bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,bt.WARN,...e),this._logHandler(this,bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,bt.ERROR,...e),this._logHandler(this,bt.ERROR,...e)}}const P2=(n,e)=>e.some(t=>n instanceof t);let Yw,Jw;function N2(){return Yw||(Yw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O2(){return Jw||(Jw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KI=new WeakMap,wg=new WeakMap,WI=new WeakMap,Om=new WeakMap,ky=new WeakMap;function D2(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(yo(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&KI.set(t,n)}).catch(()=>{}),ky.set(e,n),e}function M2(n){if(wg.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});wg.set(n,e)}let Eg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function L2(n){Eg=n(Eg)}function j2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Dm(this),e,...t);return WI.set(r,e.sort?e.sort():[e]),yo(r)}:O2().includes(n)?function(...e){return n.apply(Dm(this),e),yo(KI.get(this))}:function(...e){return yo(n.apply(Dm(this),e))}}function V2(n){return typeof n=="function"?j2(n):(n instanceof IDBTransaction&&M2(n),P2(n,N2())?new Proxy(n,Eg):n)}function yo(n){if(n instanceof IDBRequest)return D2(n);if(Om.has(n))return Om.get(n);const e=V2(n);return e!==n&&(Om.set(n,e),ky.set(e,n)),e}const Dm=n=>ky.get(n);function QI(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=yo(l);return r&&l.addEventListener("upgradeneeded",d=>{r(yo(l.result),d.oldVersion,d.newVersion,yo(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const F2=["get","getKey","getAll","getAllKeys","count"],U2=["put","add","delete","clear"],Mm=new Map;function Xw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=U2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||F2.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[t](...u),s&&d.done]))[0]};return Mm.set(e,o),o}L2(n=>({...n,get:(e,t,r)=>Xw(e,t)||n.get(e,t,r),has:(e,t)=>!!Xw(e,t)||n.has(e,t)}));class $2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(z2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function z2(n){const e=n.getComponent();return e?.type==="VERSION"}const Tg="@firebase/app",Zw="0.10.13";const Di=new rc("@firebase/app"),B2="@firebase/app-compat",q2="@firebase/analytics-compat",H2="@firebase/analytics",G2="@firebase/app-check-compat",K2="@firebase/app-check",W2="@firebase/auth",Q2="@firebase/auth-compat",Y2="@firebase/database",J2="@firebase/data-connect",X2="@firebase/database-compat",Z2="@firebase/functions",eO="@firebase/functions-compat",tO="@firebase/installations",nO="@firebase/installations-compat",rO="@firebase/messaging",sO="@firebase/messaging-compat",iO="@firebase/performance",oO="@firebase/performance-compat",aO="@firebase/remote-config",lO="@firebase/remote-config-compat",cO="@firebase/storage",uO="@firebase/storage-compat",dO="@firebase/firestore",hO="@firebase/vertexai-preview",fO="@firebase/firestore-compat",pO="firebase",mO="10.14.1";const xg="[DEFAULT]",gO={[Tg]:"fire-core",[B2]:"fire-core-compat",[H2]:"fire-analytics",[q2]:"fire-analytics-compat",[K2]:"fire-app-check",[G2]:"fire-app-check-compat",[W2]:"fire-auth",[Q2]:"fire-auth-compat",[Y2]:"fire-rtdb",[J2]:"fire-data-connect",[X2]:"fire-rtdb-compat",[Z2]:"fire-fn",[eO]:"fire-fn-compat",[tO]:"fire-iid",[nO]:"fire-iid-compat",[rO]:"fire-fcm",[sO]:"fire-fcm-compat",[iO]:"fire-perf",[oO]:"fire-perf-compat",[aO]:"fire-rc",[lO]:"fire-rc-compat",[cO]:"fire-gcs",[uO]:"fire-gcs-compat",[dO]:"fire-fst",[fO]:"fire-fst-compat",[hO]:"fire-vertex","fire-js":"fire-js",[pO]:"fire-js-all"};const $h=new Map,yO=new Map,Ig=new Map;function eE(n,e){try{n.container.addComponent(e)}catch(t){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function br(n){const e=n.name;if(Ig.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;Ig.set(e,n);for(const t of $h.values())eE(t,n);for(const t of yO.values())eE(t,n);return!0}function ri(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Os(n){return n.settings!==void 0}const vO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vo=new Vi("app","Firebase",vO);class _O{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}const Ua=mO;function YI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw vo.create("bad-app-name",{appName:String(s)});if(t||(t=$I()),!t)throw vo.create("no-options");const o=$h.get(s);if(o){if(gu(t,o.options)&&gu(r,o.config))return o;throw vo.create("duplicate-app",{appName:s})}const l=new S2(s);for(const d of Ig.values())l.addComponent(d);const u=new _O(t,r,l);return $h.set(s,u),u}function sc(n=xg){const e=$h.get(n);if(!e&&n===xg&&$I())return YI();if(!e)throw vo.create("no-app",{appName:n});return e}function Rn(n,e,t){var r;let s=(r=gO[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Di.warn(u.join(" "));return}br(new hr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const wO="firebase-heartbeat-database",EO=1,yu="firebase-heartbeat-store";let Lm=null;function JI(){return Lm||(Lm=QI(wO,EO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yu)}catch(t){console.warn(t)}}}}).catch(n=>{throw vo.create("idb-open",{originalErrorMessage:n.message})})),Lm}async function TO(n){try{const t=(await JI()).transaction(yu),r=await t.objectStore(yu).get(XI(n));return await t.done,r}catch(e){if(e instanceof is)Di.warn(e.message);else{const t=vo.create("idb-get",{originalErrorMessage:e?.message});Di.warn(t.message)}}}async function tE(n,e){try{const r=(await JI()).transaction(yu,"readwrite");await r.objectStore(yu).put(e,XI(n)),await r.done}catch(t){if(t instanceof is)Di.warn(t.message);else{const r=vo.create("idb-set",{originalErrorMessage:t?.message});Di.warn(r.message)}}}function XI(n){return`${n.name}!${n.options.appId}`}const xO=1024,IO=720*60*60*1e3;class bO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=nE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const u=new Date(l.date).valueOf();return Date.now()-u<=IO}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nE(),{heartbeatsToSend:r,unsentEntries:s}=SO(this._heartbeatsCache.heartbeats),o=Uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Di.warn(t),""}}}function nE(){return new Date().toISOString().substring(0,10)}function SO(n,e=xO){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),rE(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),rE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class kO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Du()?Sy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return tE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return tE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rE(n){return Uh(JSON.stringify({version:2,heartbeats:n})).length}function RO(n){br(new hr("platform-logger",e=>new $2(e),"PRIVATE")),br(new hr("heartbeat",e=>new bO(e),"PRIVATE")),Rn(Tg,Zw,n),Rn(Tg,Zw,"esm2017"),Rn("fire-js","")}RO("");var AO="firebase",CO="10.14.1";Rn(AO,CO,"app");const ZI="@firebase/installations",Ry="0.6.9";const eb=1e4,tb=`w:${Ry}`,nb="FIS_v2",PO="https://firebaseinstallations.googleapis.com/v1",NO=3600*1e3,OO="installations",DO="Installations";const MO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xa=new Vi(OO,DO,MO);function rb(n){return n instanceof is&&n.code.includes("request-failed")}function sb({projectId:n}){return`${PO}/projects/${n}/installations`}function ib(n){return{token:n.token,requestStatus:2,expiresIn:jO(n.expiresIn),creationTime:Date.now()}}async function ob(n,e){const r=(await e.json()).error;return xa.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ab({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function LO(n,{refreshToken:e}){const t=ab(n);return t.append("Authorization",VO(e)),t}async function lb(n){const e=await n();return e.status>=500&&e.status<600?n():e}function jO(n){return Number(n.replace("s","000"))}function VO(n){return`${nb} ${n}`}async function FO({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=sb(n),s=ab(n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:t,authVersion:nb,appId:n.appId,sdkVersion:tb},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await lb(()=>fetch(r,u));if(d.ok){const p=await d.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:ib(p.authToken)}}else throw await ob("Create Installation",d)}function cb(n){return new Promise(e=>{setTimeout(e,n)})}function UO(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const $O=/^[cdef][\w-]{21}$/,bg="";function zO(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=BO(n);return $O.test(t)?t:bg}catch{return bg}}function BO(n){return UO(n).substr(0,22)}function If(n){return`${n.appName}!${n.appId}`}const ub=new Map;function db(n,e){const t=If(n);hb(t,e),qO(t,e)}function hb(n,e){const t=ub.get(n);if(t)for(const r of t)r(e)}function qO(n,e){const t=HO();t&&t.postMessage({key:n,fid:e}),GO()}let ga=null;function HO(){return!ga&&"BroadcastChannel"in self&&(ga=new BroadcastChannel("[Firebase] FID Change"),ga.onmessage=n=>{hb(n.data.key,n.data.fid)}),ga}function GO(){ub.size===0&&ga&&(ga.close(),ga=null)}const KO="firebase-installations-database",WO=1,Ia="firebase-installations-store";let jm=null;function Ay(){return jm||(jm=QI(KO,WO,{upgrade:(n,e)=>{e===0&&n.createObjectStore(Ia)}})),jm}async function zh(n,e){const t=If(n),s=(await Ay()).transaction(Ia,"readwrite"),o=s.objectStore(Ia),l=await o.get(t);return await o.put(e,t),await s.done,(!l||l.fid!==e.fid)&&db(n,e.fid),e}async function fb(n){const e=If(n),r=(await Ay()).transaction(Ia,"readwrite");await r.objectStore(Ia).delete(e),await r.done}async function bf(n,e){const t=If(n),s=(await Ay()).transaction(Ia,"readwrite"),o=s.objectStore(Ia),l=await o.get(t),u=e(l);return u===void 0?await o.delete(t):await o.put(u,t),await s.done,u&&(!l||l.fid!==u.fid)&&db(n,u.fid),u}async function Cy(n){let e;const t=await bf(n.appConfig,r=>{const s=QO(r),o=YO(n,s);return e=o.registrationPromise,o.installationEntry});return t.fid===bg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function QO(n){const e=n||{fid:zO(),registrationStatus:0};return pb(e)}function YO(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(xa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=JO(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XO(n)}:{installationEntry:e}}async function JO(n,e){try{const t=await FO(n,e);return zh(n.appConfig,t)}catch(t){throw rb(t)&&t.customData.serverCode===409?await fb(n.appConfig):await zh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function XO(n){let e=await sE(n.appConfig);for(;e.registrationStatus===1;)await cb(100),e=await sE(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Cy(n);return r||t}return e}function sE(n){return bf(n,e=>{if(!e)throw xa.create("installation-not-found");return pb(e)})}function pb(n){return ZO(n)?{fid:n.fid,registrationStatus:0}:n}function ZO(n){return n.registrationStatus===1&&n.registrationTime+eb<Date.now()}async function eD({appConfig:n,heartbeatServiceProvider:e},t){const r=tD(n,t),s=LO(n,t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:tb,appId:n.appId}},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await lb(()=>fetch(r,u));if(d.ok){const p=await d.json();return ib(p)}else throw await ob("Generate Auth Token",d)}function tD(n,{fid:e}){return`${sb(n)}/${e}/authTokens:generate`}async function Py(n,e=!1){let t;const r=await bf(n.appConfig,o=>{if(!mb(o))throw xa.create("not-registered");const l=o.authToken;if(!e&&sD(l))return o;if(l.requestStatus===1)return t=nD(n,e),o;{if(!navigator.onLine)throw xa.create("app-offline");const u=oD(o);return t=rD(n,u),u}});return t?await t:r.authToken}async function nD(n,e){let t=await iE(n.appConfig);for(;t.authToken.requestStatus===1;)await cb(100),t=await iE(n.appConfig);const r=t.authToken;return r.requestStatus===0?Py(n,e):r}function iE(n){return bf(n,e=>{if(!mb(e))throw xa.create("not-registered");const t=e.authToken;return aD(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function rD(n,e){try{const t=await eD(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await zh(n.appConfig,r),t}catch(t){if(rb(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await fb(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await zh(n.appConfig,r)}throw t}}function mb(n){return n!==void 0&&n.registrationStatus===2}function sD(n){return n.requestStatus===2&&!iD(n)}function iD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+NO}function oD(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function aD(n){return n.requestStatus===1&&n.requestTime+eb<Date.now()}async function lD(n){const e=n,{installationEntry:t,registrationPromise:r}=await Cy(e);return r?r.catch(console.error):Py(e).catch(console.error),t.fid}async function cD(n,e=!1){const t=n;return await uD(t),(await Py(t,e)).token}async function uD(n){const{registrationPromise:e}=await Cy(n);e&&await e}function dD(n){if(!n||!n.options)throw Vm("App Configuration");if(!n.name)throw Vm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Vm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Vm(n){return xa.create("missing-app-config-values",{valueName:n})}const gb="installations",hD="installations-internal",fD=n=>{const e=n.getProvider("app").getImmediate(),t=dD(e),r=ri(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},pD=n=>{const e=n.getProvider("app").getImmediate(),t=ri(e,gb).getImmediate();return{getId:()=>lD(t),getToken:s=>cD(t,s)}};function mD(){br(new hr(gb,fD,"PUBLIC")),br(new hr(hD,pD,"PRIVATE"))}mD();Rn(ZI,Ry);Rn(ZI,Ry,"esm2017");const Bh="analytics",gD="firebase_id",yD="origin",vD=60*1e3,_D="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ny="https://www.googletagmanager.com/gtag/js";const zr=new rc("@firebase/analytics");const wD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},es=new Vi("analytics","Analytics",wD);function ED(n){if(!n.startsWith(Ny)){const e=es.create("invalid-gtag-resource",{gtagURL:n});return zr.warn(e.message),""}return n}function yb(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function TD(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function xD(n,e){const t=TD("firebase-js-sdk-policy",{createScriptURL:ED}),r=document.createElement("script"),s=`${Ny}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function ID(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function bD(n,e,t,r,s,o){const l=r[s];try{if(l)await e[l];else{const d=(await yb(t)).find(p=>p.measurementId===s);d&&await e[d.appId]}}catch(u){zr.error(u)}n("config",s,o)}async function SD(n,e,t,r,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const u=await yb(t);for(const d of l){const p=u.find(w=>w.measurementId===d),y=p&&e[p.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,s||{})}catch(o){zr.error(o)}}function kD(n,e,t,r){async function s(o,...l){try{if(o==="event"){const[u,d]=l;await SD(n,e,t,u,d)}else if(o==="config"){const[u,d]=l;await bD(n,e,t,r,u,d)}else if(o==="consent"){const[u,d]=l;n("consent",u,d)}else if(o==="get"){const[u,d,p]=l;n("get",u,d,p)}else if(o==="set"){const[u]=l;n("set",u)}else n(o,...l)}catch(u){zr.error(u)}}return s}function RD(n,e,t,r,s){let o=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=kD(o,n,e,t),{gtagCore:o,wrappedGtag:window[s]}}function AD(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ny)&&t.src.includes(n))return t;return null}const CD=30,PD=1e3;class ND{constructor(e={},t=PD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const vb=new ND;function OD(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function DD(n){var e;const{appId:t,apiKey:r}=n,s={method:"GET",headers:OD(r)},o=_D.replace("{app-id}",t),l=await fetch(o,s);if(l.status!==200&&l.status!==304){let u="";try{const d=await l.json();!((e=d.error)===null||e===void 0)&&e.message&&(u=d.error.message)}catch{}throw es.create("config-fetch-failed",{httpStatus:l.status,responseMessage:u})}return l.json()}async function MD(n,e=vb,t){const{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw es.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw es.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new VD;return setTimeout(async()=>{u.abort()},vD),_b({appId:r,apiKey:s,measurementId:o},l,u,e)}async function _b(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=vb){var o;const{appId:l,measurementId:u}=n;try{await LD(r,e)}catch(d){if(u)return zr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:l,measurementId:u};throw d}try{const d=await DD(n);return s.deleteThrottleMetadata(l),d}catch(d){const p=d;if(!jD(p)){if(s.deleteThrottleMetadata(l),u)return zr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:u};throw d}const y=Number((o=p?.customData)===null||o===void 0?void 0:o.httpStatus)===503?Qw(t,s.intervalMillis,CD):Qw(t,s.intervalMillis),w={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return s.setThrottleMetadata(l,w),zr.debug(`Calling attemptFetch again in ${y} millis`),_b(n,w,r,s)}}function LD(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(o),r(es.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function jD(n){if(!(n instanceof is)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class VD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function FD(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const o=await e,l=Object.assign(Object.assign({},r),{send_to:o});n("event",t,l)}}async function UD(){if(Du())try{await Sy()}catch(n){return zr.warn(es.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return zr.warn(es.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function $D(n,e,t,r,s,o,l){var u;const d=MD(n);d.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&zr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>zr.error(S)),e.push(d);const p=UD().then(S=>{if(S)return r.getId()}),[y,w]=await Promise.all([d,p]);AD(o)||xD(o,y.measurementId),s("js",new Date);const T=(u=l?.config)!==null&&u!==void 0?u:{};return T[yD]="firebase",T.update=!0,w!=null&&(T[gD]=w),s("config",y.measurementId,T),y.measurementId}class zD{constructor(e){this.app=e}_delete(){return delete su[this.app.options.appId],Promise.resolve()}}let su={},oE=[];const aE={};let Fm="dataLayer",BD="gtag",lE,wb,cE=!1;function qD(){const n=[];if(qI()&&n.push("This is a browser extension environment."),GI()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=es.create("invalid-analytics-context",{errorInfo:e});zr.warn(t.message)}}function HD(n,e,t){qD();const r=n.options.appId;if(!r)throw es.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)zr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw es.create("no-api-key");if(su[r]!=null)throw es.create("already-exists",{id:r});if(!cE){ID(Fm);const{wrappedGtag:o,gtagCore:l}=RD(su,oE,aE,Fm,BD);wb=o,lE=l,cE=!0}return su[r]=$D(n,oE,aE,e,lE,Fm,t),new zD(n)}function Eb(n=sc()){n=Ft(n);const e=ri(n,Bh);return e.isInitialized()?e.getImmediate():Tb(n)}function Tb(n,e={}){const t=ri(n,Bh);if(t.isInitialized()){const s=t.getImmediate();if(gu(e,t.getOptions()))return s;throw es.create("already-initialized")}return t.initialize({options:e})}function xb(n,e,t,r){n=Ft(n),FD(wb,su[n.app.options.appId],e,t,r).catch(s=>zr.error(s))}const uE="@firebase/analytics",dE="0.10.8";function GD(){br(new hr(Bh,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return HD(r,s,t)},"PUBLIC")),br(new hr("analytics-internal",n,"PRIVATE")),Rn(uE,dE),Rn(uE,dE,"esm2017");function n(e){try{const t=e.getProvider(Bh).getImmediate();return{logEvent:(r,s,o)=>xb(t,r,s,o)}}catch(t){throw es.create("interop-component-reg-failed",{reason:t})}}}GD();const Oy=Object.freeze(Object.defineProperty({__proto__:null,getAnalytics:Eb,initializeAnalytics:Tb,logEvent:xb},Symbol.toStringTag,{value:"Module"}));var Sg=function(n,e){return Sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])},Sg(n,e)};function F6(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Sg(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Dy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function U6(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $6(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),s,o=[],l;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(u){l={error:u}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return o}function z6(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function Ib(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KD=Ib,bb=new Vi("auth","Firebase",Ib());const qh=new rc("@firebase/auth");function WD(n,...e){qh.logLevel<=bt.WARN&&qh.warn(`Auth (${Ua}): ${n}`,...e)}function Eh(n,...e){qh.logLevel<=bt.ERROR&&qh.error(`Auth (${Ua}): ${n}`,...e)}function ys(n,...e){throw Ly(n,...e)}function Ds(n,...e){return Ly(n,...e)}function My(n,e,t){const r=Object.assign(Object.assign({},KD()),{[e]:t});return new Vi("auth","Firebase",r).create(e,{appName:n.name})}function Pi(n){return My(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QD(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ys(n,"argument-error"),My(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ly(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bb.create(n,...e)}function at(n,e,...t){if(!n)throw Ly(e,...t)}function Si(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Eh(e),new Error(e)}function Mi(n,e){n||Si(e)}function kg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function YD(){return hE()==="http:"||hE()==="https:"}function hE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function JD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YD()||qI()||"connection"in navigator)?navigator.onLine:!0}function XD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mi(t>e,"Short delay should be less than long delay!"),this.isMobile=a2()||u2()}get(){return JD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jy(n,e){Mi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Sb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ZD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const eM=new Lu(3e4,6e4);function Ro(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ao(n,e,t,r,s={}){return kb(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Mu(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:d},o);return c2()||(p.referrerPolicy="no-referrer"),Sb.fetch()(Rb(n,n.config.apiHost,t,u),p)})}async function kb(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZD),e);try{const s=new nM(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw ih(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,p]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw ih(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw ih(n,"user-disabled",l);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw My(n,y,p);ys(n,y)}}catch(s){if(s instanceof is)throw s;ys(n,"network-request-failed",{message:String(s)})}}async function ju(n,e,t,r,s={}){const o=await Ao(n,e,t,r,s);return"mfaPendingCredential"in o&&ys(n,"multi-factor-auth-required",{_serverResponse:o}),o}function Rb(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?jy(n.config,s):`${n.config.apiScheme}://${s}`}function tM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),eM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ih(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Ds(n,e,r);return s.customData._tokenResponse=t,s}function fE(n){return n!==void 0&&n.enterprise!==void 0}class rM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function sM(n,e){return Ao(n,"GET","/v2/recaptchaConfig",Ro(n,e))}async function iM(n,e){return Ao(n,"POST","/v1/accounts:delete",e)}async function Ab(n,e){return Ao(n,"POST","/v1/accounts:lookup",e)}function iu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oM(n,e=!1){const t=Ft(n),r=await t.getIdToken(e),s=Vy(r);at(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:iu(Um(s.auth_time)),issuedAtTime:iu(Um(s.iat)),expirationTime:iu(Um(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Um(n){return Number(n)*1e3}function Vy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Eh("JWT malformed, contained fewer than 3 sections"),null;try{const s=FI(t);return s?JSON.parse(s):(Eh("Failed to decode base64 JWT payload"),null)}catch(s){return Eh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function pE(n){const e=Vy(n);return at(e,"internal-error"),at(typeof e.exp<"u","internal-error"),at(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function vu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof is&&aM(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function aM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class lM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Rg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Hh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await vu(n,Ab(t,{idToken:r}));at(s?.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Cb(o.providerUserInfo):[],u=uM(n.providerData,l),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!u?.length,y=d?p:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Rg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,w)}async function cM(n){const e=Ft(n);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uM(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Cb(n){return n.map(e=>{var{providerId:t}=e,r=Dy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function dM(n,e){const t=await kb(n,{},async()=>{const r=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=Rb(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Sb.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hM(n,e){return Ao(n,"POST","/v2/accounts:revokeToken",Ro(n,e))}class Nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){at(e.idToken,"internal-error"),at(typeof e.idToken<"u","internal-error"),at(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){at(e.length!==0,"internal-error");const t=pE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(at(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await dM(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new Nl;return r&&(at(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(at(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(at(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nl,this.toJSON())}_performRefresh(){return Si("not implemented")}}function oo(n,e){at(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ki{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=Dy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await vu(this,this.stsTokenManager.getToken(this.auth,e));return at(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oM(this,e)}reload(){return cM(this)}_assign(e){this!==e&&(at(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ki(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){at(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Os(this.auth.app))return Promise.reject(Pi(this.auth));const e=await this.getIdToken();return await vu(this,iM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,l,u,d,p,y;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,S=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,P=(l=t.photoURL)!==null&&l!==void 0?l:void 0,M=(u=t.tenantId)!==null&&u!==void 0?u:void 0,O=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,X=(p=t.createdAt)!==null&&p!==void 0?p:void 0,W=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:Q,emailVerified:ae,isAnonymous:de,providerData:me,stsTokenManager:N}=t;at(Q&&N,e,"internal-error");const I=Nl.fromJSON(this.name,N);at(typeof Q=="string",e,"internal-error"),oo(w,e.name),oo(T,e.name),at(typeof ae=="boolean",e,"internal-error"),at(typeof de=="boolean",e,"internal-error"),oo(S,e.name),oo(P,e.name),oo(M,e.name),oo(O,e.name),oo(X,e.name),oo(W,e.name);const A=new ki({uid:Q,auth:e,email:T,emailVerified:ae,displayName:w,isAnonymous:de,photoURL:P,phoneNumber:S,tenantId:M,stsTokenManager:I,createdAt:X,lastLoginAt:W});return me&&Array.isArray(me)&&(A.providerData=me.map(k=>Object.assign({},k))),O&&(A._redirectEventId=O),A}static async _fromIdTokenResponse(e,t,r=!1){const s=new Nl;s.updateFromServerResponse(t);const o=new ki({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hh(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];at(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?Cb(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new Nl;u.updateFromIdToken(r);const d=new ki({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Rg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,p),d}}const mE=new Map;function Ri(n){Mi(n instanceof Function,"Expected a class definition");let e=mE.get(n);return e?(Mi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mE.set(n,e),e)}class Pb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Pb.type="NONE";const gE=Pb;function Th(n,e,t){return`firebase:${n}:${e}:${t}`}class Ol{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Th(this.userKey,s.apiKey,o),this.fullPersistenceKey=Th("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ki._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ol(Ri(gE),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Ri(gE);const l=Th(r,e.config.apiKey,e.name);let u=null;for(const p of t)try{const y=await p._get(l);if(y){const w=ki._fromJSON(e,y);p!==o&&(u=w),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Ol(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Ol(o,e,r))}}function yE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jb(e))return"Blackberry";if(Vb(e))return"Webos";if(Ob(e))return"Safari";if((e.includes("chrome/")||Db(e))&&!e.includes("edge/"))return"Chrome";if(Lb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Nb(n=An()){return/firefox\//i.test(n)}function Ob(n=An()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Db(n=An()){return/crios\//i.test(n)}function Mb(n=An()){return/iemobile/i.test(n)}function Lb(n=An()){return/android/i.test(n)}function jb(n=An()){return/blackberry/i.test(n)}function Vb(n=An()){return/webos/i.test(n)}function Fy(n=An()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fM(n=An()){var e;return Fy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pM(){return d2()&&document.documentMode===10}function Fb(n=An()){return Fy(n)||Lb(n)||Vb(n)||jb(n)||/windows phone/i.test(n)||Mb(n)}function Ub(n,e=[]){let t;switch(n){case"Browser":t=yE(An());break;case"Worker":t=`${yE(An())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ua}/${r}`}class mM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function gM(n,e={}){return Ao(n,"GET","/v2/passwordPolicy",Ro(n,e))}const yM=6;class vM{constructor(e){var t,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:yM,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class _M{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vE(this),this.idTokenSubscription=new vE(this),this.beforeStateQueue=new mM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ri(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ol.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ab(this,{idToken:e}),r=await ki._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Os(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&d?.user&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return at(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Os(this.app))return Promise.reject(Pi(this));const t=e?Ft(e):null;return t&&at(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&at(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Os(this.app)?Promise.reject(Pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Os(this.app)?Promise.reject(Pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gM(this),t=new vM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await hM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ri(e)||this._popupRedirectResolver;at(t,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[Ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(at(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return at(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ub(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&WD(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Co(n){return Ft(n)}class vE{constructor(e){this.auth=e,this.observer=null,this.addObserver=g2(t=>this.observer=t)}get next(){return at(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wM(n){Sf=n}function $b(n){return Sf.loadJS(n)}function EM(){return Sf.recaptchaEnterpriseScript}function TM(){return Sf.gapiScript}function xM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const IM="recaptcha-enterprise",bM="NO_RECAPTCHA";class SM{constructor(e){this.type=IM,this.auth=Co(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{sM(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const p=new rM(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;fE(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(bM)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&fE(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=EM();d.length!==0&&(d+=u),$b(d).then(()=>{s(u,o,l)}).catch(p=>{l(p)})}}).catch(u=>{l(u)})})}}async function _E(n,e,t,r=!1){const s=new SM(n);let o;try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ag(n,e,t,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await _E(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await _E(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}function kM(n,e){const t=ri(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(gu(o,e??{}))return s;ys(s,"already-initialized")}return t.initialize({options:e})}function RM(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ri);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function AM(n,e,t){const r=Co(n);at(r._canInitEmulator,r,"emulator-config-failed"),at(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=zb(e),{host:l,port:u}=CM(e),d=u===null?"":`:${u}`;r.config.emulator={url:`${o}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),PM()}function zb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CM(n){const e=zb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:wE(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:wE(l)}}}function wE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function PM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Uy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Si("not implemented")}_getIdTokenResponse(e){return Si("not implemented")}_linkToIdToken(e,t){return Si("not implemented")}_getReauthenticationResolver(e){return Si("not implemented")}}async function NM(n,e){return Ao(n,"POST","/v1/accounts:signUp",e)}async function OM(n,e){return ju(n,"POST","/v1/accounts:signInWithPassword",Ro(n,e))}async function DM(n,e){return ju(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))}async function MM(n,e){return ju(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))}class _u extends Uy{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new _u(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new _u(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ag(e,t,"signInWithPassword",OM);case"emailLink":return DM(e,{email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ag(e,r,"signUpPassword",NM);case"emailLink":return MM(e,{idToken:t,email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Dl(n,e){return ju(n,"POST","/v1/accounts:signInWithIdp",Ro(n,e))}const LM="http://localhost";class ba extends Uy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ys("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=Dy(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new ba(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Dl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Dl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Dl(e,t)}buildRequest(){const e={requestUri:LM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mu(t)}return e}}function jM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VM(n){const e=Yc(Jc(n)).link,t=e?Yc(Jc(e)).deep_link_id:null,r=Yc(Jc(n)).deep_link_id;return(r?Yc(Jc(r)).link:null)||r||t||e||n}class $y{constructor(e){var t,r,s,o,l,u;const d=Yc(Jc(e)),p=(t=d.apiKey)!==null&&t!==void 0?t:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,w=jM((s=d.mode)!==null&&s!==void 0?s:null);at(p&&y&&w,"argument-error"),this.apiKey=p,this.operation=w,this.code=y,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=VM(e);try{return new $y(t)}catch{return null}}}class ic{constructor(){this.providerId=ic.PROVIDER_ID}static credential(e,t){return _u._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=$y.parseLink(t);return at(r,"argument-error"),_u._fromEmailAndCode(e,r.code,r.tenantId)}}ic.PROVIDER_ID="password";ic.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ic.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class zy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Vu extends zy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ii extends Vu{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";class bi extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ba._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return bi.credential(t,r)}catch{return null}}}bi.GOOGLE_SIGN_IN_METHOD="google.com";bi.PROVIDER_ID="google.com";class uo extends Vu{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.GITHUB_SIGN_IN_METHOD="github.com";uo.PROVIDER_ID="github.com";class ho extends Vu{constructor(){super("twitter.com")}static credential(e,t){return ba._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ho.credential(t,r)}catch{return null}}}ho.TWITTER_SIGN_IN_METHOD="twitter.com";ho.PROVIDER_ID="twitter.com";async function FM(n,e){return ju(n,"POST","/v1/accounts:signUp",Ro(n,e))}class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await ki._fromIdTokenResponse(e,r,s),l=EE(r);return new Sa({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=EE(r);return new Sa({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function EE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Gh extends is{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Gh(e,t,r,s)}}function Bb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(n,o,e,r):o})}async function UM(n,e,t=!1){const r=await vu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sa._forOperation(n,"link",r)}async function $M(n,e,t=!1){const{auth:r}=n;if(Os(r.app))return Promise.reject(Pi(r));const s="reauthenticate";try{const o=await vu(n,Bb(r,s,e,n),t);at(o.idToken,r,"internal-error");const l=Vy(o.idToken);at(l,r,"internal-error");const{sub:u}=l;return at(n.uid===u,r,"user-mismatch"),Sa._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ys(r,"user-mismatch"),o}}async function qb(n,e,t=!1){if(Os(n.app))return Promise.reject(Pi(n));const r="signIn",s=await Bb(n,r,e),o=await Sa._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function zM(n,e){return qb(Co(n),e)}async function Hb(n){const e=Co(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BM(n,e,t){if(Os(n.app))return Promise.reject(Pi(n));const r=Co(n),l=await Ag(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FM).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Hb(n),d}),u=await Sa._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function Gb(n,e,t){return Os(n.app)?Promise.reject(Pi(n)):zM(Ft(n),ic.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Hb(n),r})}function qM(n,e,t,r){return Ft(n).onIdTokenChanged(e,t,r)}function HM(n,e,t){return Ft(n).beforeAuthStateChanged(e,t)}function GM(n,e,t,r){return Ft(n).onAuthStateChanged(e,t,r)}function Kb(n){return Ft(n).signOut()}const Kh="__sak";class Wb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const KM=1e3,WM=10;class Qb extends Wb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);pM()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,WM):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},KM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qb.type="LOCAL";const QM=Qb;class Yb extends Wb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Yb.type="SESSION";const Jb=Yb;function YM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new kf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async p=>p(t.origin,o)),d=await YM(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kf.receivers=[];function By(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class JM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const p=By("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const T=w;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(T.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Js(){return window}function XM(n){Js().location.href=n}function Xb(){return typeof Js().WorkerGlobalScope<"u"&&typeof Js().importScripts=="function"}async function ZM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eL(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function tL(){return Xb()?self:null}const Zb="firebaseLocalStorageDb",nL=1,Wh="firebaseLocalStorage",e1="fbase_key";class Fu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Rf(n,e){return n.transaction([Wh],e?"readwrite":"readonly").objectStore(Wh)}function rL(){const n=indexedDB.deleteDatabase(Zb);return new Fu(n).toPromise()}function Cg(){const n=indexedDB.open(Zb,nL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Wh,{keyPath:e1})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Wh)?e(r):(r.close(),await rL(),e(await Cg()))})})}async function TE(n,e,t){const r=Rf(n,!0).put({[e1]:e,value:t});return new Fu(r).toPromise()}async function sL(n,e){const t=Rf(n,!1).get(e),r=await new Fu(t).toPromise();return r===void 0?null:r.value}function xE(n,e){const t=Rf(n,!0).delete(e);return new Fu(t).toPromise()}const iL=800,oL=3;class t1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>oL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kf._getInstance(tL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ZM(),!this.activeServiceWorker)return;this.sender=new JM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cg();return await TE(e,Kh,"1"),await xE(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>TE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>sL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Rf(s,!1).getAll();return new Fu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}t1.type="LOCAL";const aL=t1;new Lu(3e4,6e4);function n1(n,e){return e?Ri(e):(at(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class qy extends Uy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Dl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lL(n){return qb(n.auth,new qy(n),n.bypassAuthState)}function cL(n){const{auth:e,user:t}=n;return at(t,e,"internal-error"),$M(t,new qy(n),n.bypassAuthState)}async function uL(n){const{auth:e,user:t}=n;return at(t,e,"internal-error"),UM(t,new qy(n),n.bypassAuthState)}class r1{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lL;case"linkViaPopup":case"linkViaRedirect":return uL;case"reauthViaPopup":case"reauthViaRedirect":return cL;default:ys(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dL=new Lu(2e3,1e4);async function s1(n,e,t){if(Os(n.app))return Promise.reject(Ds(n,"operation-not-supported-in-this-environment"));const r=Co(n);QD(n,e,zy);const s=n1(r,t);return new ya(r,"signInViaPopup",e,s).executeNotNull()}class ya extends r1{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,ya.currentPopupAction&&ya.currentPopupAction.cancel(),ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return at(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=By();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dL.get())};e()}}ya.currentPopupAction=null;const hL="pendingRedirect",xh=new Map;class fL extends r1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=xh.get(this.auth._key());if(!e){try{const r=await pL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}xh.set(this.auth._key(),e)}return this.bypassAuthState||xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pL(n,e){const t=yL(e),r=gL(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function mL(n,e){xh.set(n._key(),e)}function gL(n){return Ri(n._redirectPersistence)}function yL(n){return Th(hL,n.config.apiKey,n.name)}async function vL(n,e,t=!1){if(Os(n.app))return Promise.reject(Pi(n));const r=Co(n),s=n1(r,e),l=await new fL(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const _L=600*1e3;class wL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!i1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ds(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_L&&this.cachedEventUids.clear(),this.cachedEventUids.has(IE(e))}saveEventToCache(e){this.cachedEventUids.add(IE(e)),this.lastProcessedEventTime=Date.now()}}function IE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function i1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function EL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i1(n);default:return!1}}async function TL(n,e={}){return Ao(n,"GET","/v1/projects",e)}const xL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IL=/^https?/;async function bL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await TL(n);for(const t of e)try{if(SL(t))return}catch{}ys(n,"unauthorized-domain")}function SL(n){const e=kg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!IL.test(t))return!1;if(xL.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const kL=new Lu(3e4,6e4);function bE(){const n=Js().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function RL(n){return new Promise((e,t)=>{var r,s,o;function l(){bE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bE(),t(Ds(n,"network-request-failed"))},timeout:kL.get()})}if(!((s=(r=Js().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Js().gapi)===null||o===void 0)&&o.load)l();else{const u=xM("iframefcb");return Js()[u]=()=>{gapi.load?l():t(Ds(n,"network-request-failed"))},$b(`${TM()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw Ih=null,e})}let Ih=null;function AL(n){return Ih=Ih||RL(n),Ih}const CL=new Lu(5e3,15e3),PL="__/auth/iframe",NL="emulator/auth/iframe",OL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ML(n){const e=n.config;at(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?jy(e,NL):`https://${n.config.authDomain}/${PL}`,r={apiKey:e.apiKey,appName:n.name,v:Ua},s=DL.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Mu(r).slice(1)}`}async function LL(n){const e=await AL(n),t=Js().gapi;return at(t,n,"internal-error"),e.open({where:document.body,url:ML(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OL,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Ds(n,"network-request-failed"),u=Js().setTimeout(()=>{o(l)},CL.get());function d(){Js().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}const jL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VL=500,FL=600,UL="_blank",$L="http://localhost";class SE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zL(n,e,t,r=VL,s=FL){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},jL),{width:r.toString(),height:s.toString(),top:o,left:l}),p=An().toLowerCase();t&&(u=Db(p)?UL:t),Nb(p)&&(e=e||$L,d.scrollbars="yes");const y=Object.entries(d).reduce((T,[S,P])=>`${T}${S}=${P},`,"");if(fM(p)&&u!=="_self")return BL(e||"",u),new SE(null);const w=window.open(e||"",u,y);at(w,n,"popup-blocked");try{w.focus()}catch{}return new SE(w)}function BL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const qL="__/auth/handler",HL="emulator/auth/handler",GL=encodeURIComponent("fac");async function kE(n,e,t,r,s,o){at(n.config.authDomain,n,"auth-domain-config-required"),at(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ua,eventId:s};if(e instanceof zy){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",m2(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))l[y]=w}if(e instanceof Vu){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const d=await n._getAppCheckToken(),p=d?`#${GL}=${encodeURIComponent(d)}`:"";return`${KL(n)}?${Mu(u).slice(1)}${p}`}function KL({config:n}){return n.emulator?jy(n,HL):`https://${n.authDomain}/${qL}`}const $m="webStorageSupport";class WL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jb,this._completeRedirectFn=vL,this._overrideRedirectResult=mL}async _openPopup(e,t,r,s){var o;Mi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await kE(e,t,r,kg(),s);return zL(e,l,By())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await kE(e,t,r,kg(),s);return XM(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Mi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await LL(e),r=new wL(e);return t.register("authEvent",s=>(at(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($m,{type:$m},s=>{var o;const l=(o=s?.[0])===null||o===void 0?void 0:o[$m];l!==void 0&&t(!!l),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fb()||Ob()||Fy()}}const QL=WL;var RE="@firebase/auth",AE="1.7.9";class YL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){at(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function JL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XL(n){br(new hr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;at(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ub(n)},p=new _M(r,s,o,d);return RM(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),br(new hr("auth-internal",e=>{const t=Co(e.getProvider("auth").getImmediate());return(r=>new YL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rn(RE,AE,JL(n)),Rn(RE,AE,"esm2017")}const ZL=300,ej=zI("authIdTokenMaxAge")||ZL;let CE=null;const tj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ej)return;const s=t?.token;CE!==s&&(CE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function nj(n=sc()){const e=ri(n,"auth");if(e.isInitialized())return e.getImmediate();const t=kM(n,{popupRedirectResolver:QL,persistence:[aL,QM,Jb]}),r=zI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=tj(o.toString());HM(t,l,()=>l(t.currentUser)),qM(t,u=>l(u))}}const s=UI("auth");return s&&AM(t,`http://${s}`),t}function rj(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}wM({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Ds("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",rj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XL("Browser");var PE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var va,o1;(function(){var n;function e(N,I){function A(){}A.prototype=I.prototype,N.D=I.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(k,L,C){for(var R=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)R[ut-2]=arguments[ut];return I.prototype[L].apply(k,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,I,A){A||(A=0);var k=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)k[L]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(L=0;16>L;++L)k[L]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=N.g[0],A=N.g[1],L=N.g[2];var C=N.g[3],R=I+(C^A&(L^C))+k[0]+3614090360&4294967295;I=A+(R<<7&4294967295|R>>>25),R=C+(L^I&(A^L))+k[1]+3905402710&4294967295,C=I+(R<<12&4294967295|R>>>20),R=L+(A^C&(I^A))+k[2]+606105819&4294967295,L=C+(R<<17&4294967295|R>>>15),R=A+(I^L&(C^I))+k[3]+3250441966&4294967295,A=L+(R<<22&4294967295|R>>>10),R=I+(C^A&(L^C))+k[4]+4118548399&4294967295,I=A+(R<<7&4294967295|R>>>25),R=C+(L^I&(A^L))+k[5]+1200080426&4294967295,C=I+(R<<12&4294967295|R>>>20),R=L+(A^C&(I^A))+k[6]+2821735955&4294967295,L=C+(R<<17&4294967295|R>>>15),R=A+(I^L&(C^I))+k[7]+4249261313&4294967295,A=L+(R<<22&4294967295|R>>>10),R=I+(C^A&(L^C))+k[8]+1770035416&4294967295,I=A+(R<<7&4294967295|R>>>25),R=C+(L^I&(A^L))+k[9]+2336552879&4294967295,C=I+(R<<12&4294967295|R>>>20),R=L+(A^C&(I^A))+k[10]+4294925233&4294967295,L=C+(R<<17&4294967295|R>>>15),R=A+(I^L&(C^I))+k[11]+2304563134&4294967295,A=L+(R<<22&4294967295|R>>>10),R=I+(C^A&(L^C))+k[12]+1804603682&4294967295,I=A+(R<<7&4294967295|R>>>25),R=C+(L^I&(A^L))+k[13]+4254626195&4294967295,C=I+(R<<12&4294967295|R>>>20),R=L+(A^C&(I^A))+k[14]+2792965006&4294967295,L=C+(R<<17&4294967295|R>>>15),R=A+(I^L&(C^I))+k[15]+1236535329&4294967295,A=L+(R<<22&4294967295|R>>>10),R=I+(L^C&(A^L))+k[1]+4129170786&4294967295,I=A+(R<<5&4294967295|R>>>27),R=C+(A^L&(I^A))+k[6]+3225465664&4294967295,C=I+(R<<9&4294967295|R>>>23),R=L+(I^A&(C^I))+k[11]+643717713&4294967295,L=C+(R<<14&4294967295|R>>>18),R=A+(C^I&(L^C))+k[0]+3921069994&4294967295,A=L+(R<<20&4294967295|R>>>12),R=I+(L^C&(A^L))+k[5]+3593408605&4294967295,I=A+(R<<5&4294967295|R>>>27),R=C+(A^L&(I^A))+k[10]+38016083&4294967295,C=I+(R<<9&4294967295|R>>>23),R=L+(I^A&(C^I))+k[15]+3634488961&4294967295,L=C+(R<<14&4294967295|R>>>18),R=A+(C^I&(L^C))+k[4]+3889429448&4294967295,A=L+(R<<20&4294967295|R>>>12),R=I+(L^C&(A^L))+k[9]+568446438&4294967295,I=A+(R<<5&4294967295|R>>>27),R=C+(A^L&(I^A))+k[14]+3275163606&4294967295,C=I+(R<<9&4294967295|R>>>23),R=L+(I^A&(C^I))+k[3]+4107603335&4294967295,L=C+(R<<14&4294967295|R>>>18),R=A+(C^I&(L^C))+k[8]+1163531501&4294967295,A=L+(R<<20&4294967295|R>>>12),R=I+(L^C&(A^L))+k[13]+2850285829&4294967295,I=A+(R<<5&4294967295|R>>>27),R=C+(A^L&(I^A))+k[2]+4243563512&4294967295,C=I+(R<<9&4294967295|R>>>23),R=L+(I^A&(C^I))+k[7]+1735328473&4294967295,L=C+(R<<14&4294967295|R>>>18),R=A+(C^I&(L^C))+k[12]+2368359562&4294967295,A=L+(R<<20&4294967295|R>>>12),R=I+(A^L^C)+k[5]+4294588738&4294967295,I=A+(R<<4&4294967295|R>>>28),R=C+(I^A^L)+k[8]+2272392833&4294967295,C=I+(R<<11&4294967295|R>>>21),R=L+(C^I^A)+k[11]+1839030562&4294967295,L=C+(R<<16&4294967295|R>>>16),R=A+(L^C^I)+k[14]+4259657740&4294967295,A=L+(R<<23&4294967295|R>>>9),R=I+(A^L^C)+k[1]+2763975236&4294967295,I=A+(R<<4&4294967295|R>>>28),R=C+(I^A^L)+k[4]+1272893353&4294967295,C=I+(R<<11&4294967295|R>>>21),R=L+(C^I^A)+k[7]+4139469664&4294967295,L=C+(R<<16&4294967295|R>>>16),R=A+(L^C^I)+k[10]+3200236656&4294967295,A=L+(R<<23&4294967295|R>>>9),R=I+(A^L^C)+k[13]+681279174&4294967295,I=A+(R<<4&4294967295|R>>>28),R=C+(I^A^L)+k[0]+3936430074&4294967295,C=I+(R<<11&4294967295|R>>>21),R=L+(C^I^A)+k[3]+3572445317&4294967295,L=C+(R<<16&4294967295|R>>>16),R=A+(L^C^I)+k[6]+76029189&4294967295,A=L+(R<<23&4294967295|R>>>9),R=I+(A^L^C)+k[9]+3654602809&4294967295,I=A+(R<<4&4294967295|R>>>28),R=C+(I^A^L)+k[12]+3873151461&4294967295,C=I+(R<<11&4294967295|R>>>21),R=L+(C^I^A)+k[15]+530742520&4294967295,L=C+(R<<16&4294967295|R>>>16),R=A+(L^C^I)+k[2]+3299628645&4294967295,A=L+(R<<23&4294967295|R>>>9),R=I+(L^(A|~C))+k[0]+4096336452&4294967295,I=A+(R<<6&4294967295|R>>>26),R=C+(A^(I|~L))+k[7]+1126891415&4294967295,C=I+(R<<10&4294967295|R>>>22),R=L+(I^(C|~A))+k[14]+2878612391&4294967295,L=C+(R<<15&4294967295|R>>>17),R=A+(C^(L|~I))+k[5]+4237533241&4294967295,A=L+(R<<21&4294967295|R>>>11),R=I+(L^(A|~C))+k[12]+1700485571&4294967295,I=A+(R<<6&4294967295|R>>>26),R=C+(A^(I|~L))+k[3]+2399980690&4294967295,C=I+(R<<10&4294967295|R>>>22),R=L+(I^(C|~A))+k[10]+4293915773&4294967295,L=C+(R<<15&4294967295|R>>>17),R=A+(C^(L|~I))+k[1]+2240044497&4294967295,A=L+(R<<21&4294967295|R>>>11),R=I+(L^(A|~C))+k[8]+1873313359&4294967295,I=A+(R<<6&4294967295|R>>>26),R=C+(A^(I|~L))+k[15]+4264355552&4294967295,C=I+(R<<10&4294967295|R>>>22),R=L+(I^(C|~A))+k[6]+2734768916&4294967295,L=C+(R<<15&4294967295|R>>>17),R=A+(C^(L|~I))+k[13]+1309151649&4294967295,A=L+(R<<21&4294967295|R>>>11),R=I+(L^(A|~C))+k[4]+4149444226&4294967295,I=A+(R<<6&4294967295|R>>>26),R=C+(A^(I|~L))+k[11]+3174756917&4294967295,C=I+(R<<10&4294967295|R>>>22),R=L+(I^(C|~A))+k[2]+718787259&4294967295,L=C+(R<<15&4294967295|R>>>17),R=A+(C^(L|~I))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(L+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+L&4294967295,N.g[3]=N.g[3]+C&4294967295}r.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var A=I-this.blockSize,k=this.B,L=this.h,C=0;C<I;){if(L==0)for(;C<=A;)s(this,N,C),C+=this.blockSize;if(typeof N=="string"){for(;C<I;)if(k[L++]=N.charCodeAt(C++),L==this.blockSize){s(this,k),L=0;break}}else for(;C<I;)if(k[L++]=N[C++],L==this.blockSize){s(this,k),L=0;break}}this.h=L,this.o+=I},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var A=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=A&255,A/=256;for(this.u(N),N=Array(16),I=A=0;4>I;++I)for(var k=0;32>k;k+=8)N[A++]=this.g[I]>>>k&255;return N};function o(N,I){var A=u;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=I(N)}function l(N,I){this.h=I;for(var A=[],k=!0,L=N.length-1;0<=L;L--){var C=N[L]|0;k&&C==I||(A[L]=C,k=!1)}this.g=A}var u={};function d(N){return-128<=N&&128>N?o(N,function(I){return new l([I|0],0>I?-1:0)}):new l([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return w;if(0>N)return O(p(-N));for(var I=[],A=1,k=0;N>=A;k++)I[k]=N/A|0,A*=4294967296;return new l(I,0)}function y(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return O(y(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(I,8)),k=w,L=0;L<N.length;L+=8){var C=Math.min(8,N.length-L),R=parseInt(N.substring(L,L+C),I);8>C?(C=p(Math.pow(I,C)),k=k.j(C).add(p(R))):(k=k.j(A),k=k.add(p(R)))}return k}var w=d(0),T=d(1),S=d(16777216);n=l.prototype,n.m=function(){if(M(this))return-O(this).m();for(var N=0,I=1,A=0;A<this.g.length;A++){var k=this.i(A);N+=(0<=k?k:4294967296+k)*I,I*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(M(this))return"-"+O(this).toString(N);for(var I=p(Math.pow(N,6)),A=this,k="";;){var L=ae(A,I).g;A=X(A,L.j(I));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=L,P(A))return C+k;for(;6>C.length;)C="0"+C;k=C+k}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function M(N){return N.h==-1}n.l=function(N){return N=X(this,N),M(N)?-1:P(N)?0:1};function O(N){for(var I=N.g.length,A=[],k=0;k<I;k++)A[k]=~N.g[k];return new l(A,~N.h).add(T)}n.abs=function(){return M(this)?O(this):this},n.add=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0,L=0;L<=I;L++){var C=k+(this.i(L)&65535)+(N.i(L)&65535),R=(C>>>16)+(this.i(L)>>>16)+(N.i(L)>>>16);k=R>>>16,C&=65535,R&=65535,A[L]=R<<16|C}return new l(A,A[A.length-1]&-2147483648?-1:0)};function X(N,I){return N.add(O(I))}n.j=function(N){if(P(this)||P(N))return w;if(M(this))return M(N)?O(this).j(O(N)):O(O(this).j(N));if(M(N))return O(this.j(O(N)));if(0>this.l(S)&&0>N.l(S))return p(this.m()*N.m());for(var I=this.g.length+N.g.length,A=[],k=0;k<2*I;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<N.g.length;L++){var C=this.i(k)>>>16,R=this.i(k)&65535,ut=N.i(L)>>>16,Je=N.i(L)&65535;A[2*k+2*L]+=R*Je,W(A,2*k+2*L),A[2*k+2*L+1]+=C*Je,W(A,2*k+2*L+1),A[2*k+2*L+1]+=R*ut,W(A,2*k+2*L+1),A[2*k+2*L+2]+=C*ut,W(A,2*k+2*L+2)}for(k=0;k<I;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=I;k<2*I;k++)A[k]=0;return new l(A,0)};function W(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function Q(N,I){this.g=N,this.h=I}function ae(N,I){if(P(I))throw Error("division by zero");if(P(N))return new Q(w,w);if(M(N))return I=ae(O(N),I),new Q(O(I.g),O(I.h));if(M(I))return I=ae(N,O(I)),new Q(O(I.g),I.h);if(30<N.g.length){if(M(N)||M(I))throw Error("slowDivide_ only works with positive integers.");for(var A=T,k=I;0>=k.l(N);)A=de(A),k=de(k);var L=me(A,1),C=me(k,1);for(k=me(k,2),A=me(A,2);!P(k);){var R=C.add(k);0>=R.l(N)&&(L=L.add(A),C=R),k=me(k,1),A=me(A,1)}return I=X(N,L.j(I)),new Q(L,I)}for(L=w;0<=N.l(I);){for(A=Math.max(1,Math.floor(N.m()/I.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),C=p(A),R=C.j(I);M(R)||0<R.l(N);)A-=k,C=p(A),R=C.j(I);P(C)&&(C=T),L=L.add(C),N=X(N,R)}return new Q(L,N)}n.A=function(N){return ae(this,N).h},n.and=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)&N.i(k);return new l(A,this.h&N.h)},n.or=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)|N.i(k);return new l(A,this.h|N.h)},n.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)^N.i(k);return new l(A,this.h^N.h)};function de(N){for(var I=N.g.length+1,A=[],k=0;k<I;k++)A[k]=N.i(k)<<1|N.i(k-1)>>>31;return new l(A,N.h)}function me(N,I){var A=I>>5;I%=32;for(var k=N.g.length-A,L=[],C=0;C<k;C++)L[C]=0<I?N.i(C+A)>>>I|N.i(C+A+1)<<32-I:N.i(C+A);return new l(L,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o1=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,va=l}).apply(typeof PE<"u"?PE:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var a1,Xc,l1,bh,Pg,c1,u1,d1;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,E){return h==Array.prototype||h==Object.prototype||(h[v]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(h,v){if(v)e:{var E=r;h=h.split(".");for(var b=0;b<h.length-1;b++){var q=h[b];if(!(q in E))break e;E=E[q]}h=h[h.length-1],b=E[h],v=v(b),v!=b&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}function o(h,v){h instanceof String&&(h+="");var E=0,b=!1,q={next:function(){if(!b&&E<h.length){var ne=E++;return{value:v(ne,h[ne]),done:!1}}return b=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(h){return h||function(){return o(this,function(v,E){return E})}});var l=l||{},u=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,E){return h.call.apply(h.bind,arguments)}function w(h,v,E){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,b),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function T(h,v,E){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:w,T.apply(null,arguments)}function S(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var b=E.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function P(h,v){function E(){}E.prototype=v.prototype,h.aa=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(b,q,ne){for(var Ee=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)Ee[qt-2]=arguments[qt];return v.prototype[q].apply(b,Ee)}}function M(h){const v=h.length;if(0<v){const E=Array(v);for(let b=0;b<v;b++)E[b]=h[b];return E}return[]}function O(h,v){for(let E=1;E<arguments.length;E++){const b=arguments[E];if(d(b)){const q=h.length||0,ne=b.length||0;h.length=q+ne;for(let Ee=0;Ee<ne;Ee++)h[q+Ee]=b[Ee]}else h.push(b)}}class X{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function W(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function ae(h){return ae[" "](h),h}ae[" "]=function(){};var de=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function me(h,v,E){for(const b in h)v.call(E,h[b],b,h)}function N(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function I(h){const v={};for(const E in h)v[E]=h[E];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,v){let E,b;for(let q=1;q<arguments.length;q++){b=arguments[q];for(E in b)h[E]=b[E];for(let ne=0;ne<A.length;ne++)E=A[ne],Object.prototype.hasOwnProperty.call(b,E)&&(h[E]=b[E])}}function L(h){var v=1;h=h.split(":");const E=[];for(;0<v&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function C(h){u.setTimeout(()=>{throw h},0)}function R(){var h=$e;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ut{constructor(){this.h=this.g=null}add(v,E){const b=Je.get();b.set(v,E),this.h?this.h.next=b:this.g=b,this.h=b}}var Je=new X(()=>new hn,h=>h.reset());class hn{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ft,ve=!1,$e=new ut,ke=()=>{const h=u.Promise.resolve(void 0);ft=()=>{h.then(z)}};var z=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(E){C(E)}var v=Je;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}ve=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var rt=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};u.addEventListener("test",E,v),u.removeEventListener("test",E,v)}catch{}return h})();function pt(h,v){if(Ge.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(de){e:{try{ae(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement);this.relatedTarget=v,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:_t[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&pt.aa.h.call(this)}}P(pt,Ge);var _t={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var St="closure_listenable_"+(1e6*Math.random()|0),kt=0;function wt(h,v,E,b,q){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!b,this.ha=q,this.key=++kt,this.da=this.fa=!1}function Wt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Se(h){this.src=h,this.g={},this.h=0}Se.prototype.add=function(h,v,E,b,q){var ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);var Ee=It(h,v,b,q);return-1<Ee?(v=h[Ee],E||(v.fa=!1)):(v=new wt(v,this.src,ne,!!b,q),v.fa=E,h.push(v)),v};function Et(h,v){var E=v.type;if(E in h.g){var b=h.g[E],q=Array.prototype.indexOf.call(b,v,void 0),ne;(ne=0<=q)&&Array.prototype.splice.call(b,q,1),ne&&(Wt(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function It(h,v,E,b){for(var q=0;q<h.length;++q){var ne=h[q];if(!ne.da&&ne.listener==v&&ne.capture==!!E&&ne.ha==b)return q}return-1}var Xn="closure_lm_"+(1e6*Math.random()|0),fr={};function Mo(h,v,E,b,q){if(Array.isArray(v)){for(var ne=0;ne<v.length;ne++)Mo(h,v[ne],E,b,q);return null}return E=Vo(E),h&&h[St]?h.K(v,E,p(b)?!!b.capture:!1,q):Pn(h,v,E,!1,b,q)}function Pn(h,v,E,b,q,ne){if(!v)throw Error("Invalid event type");var Ee=p(q)?!!q.capture:!!q,qt=ai(h);if(qt||(h[Xn]=qt=new Se(h)),E=qt.add(v,E,b,Ee,ne),E.proxy)return E;if(b=Lo(),E.proxy=b,b.src=h,b.listener=E,h.addEventListener)rt||(q=Ee),q===void 0&&(q=!1),h.addEventListener(v.toString(),b,q);else if(h.attachEvent)h.attachEvent(as(v.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Lo(){function h(E){return v.call(h.src,h.listener,E)}const v=jo;return h}function oi(h,v,E,b,q){if(Array.isArray(v))for(var ne=0;ne<v.length;ne++)oi(h,v[ne],E,b,q);else b=p(b)?!!b.capture:!!b,E=Vo(E),h&&h[St]?(h=h.i,v=String(v).toString(),v in h.g&&(ne=h.g[v],E=It(ne,E,b,q),-1<E&&(Wt(ne[E]),Array.prototype.splice.call(ne,E,1),ne.length==0&&(delete h.g[v],h.h--)))):h&&(h=ai(h))&&(v=h.g[v.toString()],h=-1,v&&(h=It(v,E,b,q)),(E=-1<h?v[h]:null)&&os(E))}function os(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[St])Et(v.i,h);else{var E=h.type,b=h.proxy;v.removeEventListener?v.removeEventListener(E,b,h.capture):v.detachEvent?v.detachEvent(as(E),b):v.addListener&&v.removeListener&&v.removeListener(b),(E=ai(v))?(Et(E,h),E.h==0&&(E.src=null,v[Xn]=null)):Wt(h)}}}function as(h){return h in fr?fr[h]:fr[h]="on"+h}function jo(h,v){if(h.da)h=!0;else{v=new pt(v,this);var E=h.listener,b=h.ha||h.src;h.fa&&os(h),h=E.call(b,v)}return h}function ai(h){return h=h[Xn],h instanceof Se?h:null}var Ui="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vo(h){return typeof h=="function"?h:(h[Ui]||(h[Ui]=function(v){return h.handleEvent(v)}),h[Ui])}function tn(){oe.call(this),this.i=new Se(this),this.M=this,this.F=null}P(tn,oe),tn.prototype[St]=!0,tn.prototype.removeEventListener=function(h,v,E,b){oi(this,h,v,E,b)};function Qt(h,v){var E,b=h.F;if(b)for(E=[];b;b=b.F)E.push(b);if(h=h.M,b=v.type||v,typeof v=="string")v=new Ge(v,h);else if(v instanceof Ge)v.target=v.target||h;else{var q=v;v=new Ge(b,h),k(v,q)}if(q=!0,E)for(var ne=E.length-1;0<=ne;ne--){var Ee=v.g=E[ne];q=_s(Ee,b,!0,v)&&q}if(Ee=v.g=h,q=_s(Ee,b,!0,v)&&q,q=_s(Ee,b,!1,v)&&q,E)for(ne=0;ne<E.length;ne++)Ee=v.g=E[ne],q=_s(Ee,b,!1,v)&&q}tn.prototype.N=function(){if(tn.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var E=h.g[v],b=0;b<E.length;b++)Wt(E[b]);delete h.g[v],h.h--}}this.F=null},tn.prototype.K=function(h,v,E,b){return this.i.add(String(h),v,!1,E,b)},tn.prototype.L=function(h,v,E,b){return this.i.add(String(h),v,!0,E,b)};function _s(h,v,E,b){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,ne=0;ne<v.length;++ne){var Ee=v[ne];if(Ee&&!Ee.da&&Ee.capture==E){var qt=Ee.listener,bn=Ee.ha||Ee.src;Ee.fa&&Et(h.i,Ee),q=qt.call(bn,b)!==!1&&q}}return q&&!b.defaultPrevented}function Fo(h,v,E){if(typeof h=="function")E&&(h=T(h,E));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:u.setTimeout(h,v||0)}function Vs(h){h.g=Fo(()=>{h.g=null,h.i&&(h.i=!1,Vs(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Fs extends oe{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Vs(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(h){oe.call(this),this.h=h,this.g={}}P(Us,oe);var li=[];function Uo(h){me(h.g,function(v,E){this.g.hasOwnProperty(E)&&os(v)},h),h.g={}}Us.prototype.N=function(){Us.aa.N.call(this),Uo(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $o=u.JSON.stringify,zo=u.JSON.parse,Bo=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function ci(){}ci.prototype.h=null;function $i(h){return h.h||(h.h=h.i())}function zi(){}var pr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $(){Ge.call(this,"d")}P($,Ge);function U(){Ge.call(this,"c")}P(U,Ge);var se={},B=null;function ie(){return B=B||new tn}se.La="serverreachability";function ge(h){Ge.call(this,se.La,h)}P(ge,Ge);function ze(h){const v=ie();Qt(v,new ge(v))}se.STAT_EVENT="statevent";function Ae(h,v){Ge.call(this,se.STAT_EVENT,h),this.stat=v}P(Ae,Ge);function be(h){const v=ie();Qt(v,new Ae(v,h))}se.Ma="timingevent";function Ze(h,v){Ge.call(this,se.Ma,h),this.size=v}P(Ze,Ge);function Ce(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function Ye(){this.g=!0}Ye.prototype.xa=function(){this.g=!1};function dt(h,v,E,b,q,ne){h.info(function(){if(h.g)if(ne)for(var Ee="",qt=ne.split("&"),bn=0;bn<qt.length;bn++){var Ot=qt[bn].split("=");if(1<Ot.length){var Dn=Ot[0];Ot=Ot[1];var Tn=Dn.split("_");Ee=2<=Tn.length&&Tn[1]=="type"?Ee+(Dn+"="+Ot+"&"):Ee+(Dn+"=redacted&")}}else Ee=null;else Ee=ne;return"XMLHTTP REQ ("+b+") [attempt "+q+"]: "+v+`
`+E+`
`+Ee})}function mt(h,v,E,b,q,ne,Ee){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+q+"]: "+v+`
`+E+`
`+ne+" "+Ee})}function Kt(h,v,E,b){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Nn(h,E)+(b?" "+b:"")})}function Bt(h,v){h.info(function(){return"TIMEOUT: "+v})}Ye.prototype.info=function(){};function Nn(h,v){if(!h.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var b=E[h];if(!(2>b.length)){var q=b[1];if(Array.isArray(q)&&!(1>q.length)){var ne=q[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var Ee=1;Ee<q.length;Ee++)q[Ee]=""}}}}return $o(E)}catch{return v}}var Yt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},We={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Te;function Ct(){}P(Ct,ci),Ct.prototype.g=function(){return new XMLHttpRequest},Ct.prototype.i=function(){return{}},Te=new Ct;function gt(h,v,E,b){this.j=h,this.i=v,this.l=E,this.R=b||1,this.U=new Us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ut}function Ut(){this.i=null,this.g="",this.h=!1}var Mt={},Ve={};function $t(h,v,E){h.L=1,h.v=Pt(Fe(v)),h.m=E,h.P=!0,lt(h,null)}function lt(h,v){h.F=Date.now(),xe(h),h.A=Fe(h.v);var E=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),ws(E.i,"t",b),h.C=0,E=h.j.J,h.h=new Ut,h.g=od(h.j,E?v:null,!h.m),0<h.O&&(h.M=new Fs(T(h.Y,h,h.g),h.O)),v=h.U,E=h.g,b=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(li[0]=q.toString()),q=li);for(var ne=0;ne<q.length;ne++){var Ee=Mo(E,q[ne],b||v.handleEvent,!1,v.h||v);if(!Ee)break;v.g[Ee.key]=Ee}v=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),ze(),dt(h.i,h.u,h.A,h.l,h.R,h.m)}gt.prototype.ca=function(h){h=h.target;const v=this.M;v&&Pr(h)==3?v.j():this.Y(h)},gt.prototype.Y=function(h){try{if(h==this.g)e:{const Tn=Pr(this.g);var v=this.g.Ba();const ls=this.g.Z();if(!(3>Tn)&&(Tn!=3||this.g&&(this.h.h||this.g.oa()||pc(this.g)))){this.J||Tn!=4||v==7||(v==8||0>=ls?ze(3):ze(2)),yn(this);var E=this.g.Z();this.X=E;t:if(st(this)){var b=pc(this.g);h="";var q=b.length,ne=Pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vt(this),Rt(this);var Ee="";break t}this.h.i=new u.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(b[v],{stream:!(ne&&v==q-1)});b.length=0,this.h.g+=h,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=E==200,mt(this.i,this.u,this.A,this.l,this.R,Tn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var qt,bn=this.g;if((qt=bn.g?bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(qt)){var Ot=qt;break t}}Ot=null}if(E=Ot)Kt(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,te(this,E);else{this.o=!1,this.s=3,be(12),vt(this),Rt(this);break e}}if(this.P){E=!0;let Gr;for(;!this.J&&this.C<Ee.length;)if(Gr=yt(this,Ee),Gr==Ve){Tn==4&&(this.s=4,be(14),E=!1),Kt(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==Mt){this.s=4,be(15),Kt(this.i,this.l,Ee,"[Invalid Chunk]"),E=!1;break}else Kt(this.i,this.l,Gr,null),te(this,Gr);if(st(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tn!=4||Ee.length!=0||this.h.h||(this.s=1,be(16),E=!1),this.o=this.o&&E,!E)Kt(this.i,this.l,Ee,"[Invalid Chunked Response]"),vt(this),Rt(this);else if(0<Ee.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),gc(Dn),Dn.M=!0,be(11))}}else Kt(this.i,this.l,Ee,null),te(this,Ee);Tn==4&&vt(this),this.o&&!this.J&&(Tn==4?Za(this.j,this):(this.o=!1,xe(this)))}else Wa(this.g),E==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,be(12)):(this.s=0,be(13)),vt(this),Rt(this)}}}catch{}};function st(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function yt(h,v){var E=h.C,b=v.indexOf(`
`,E);return b==-1?Ve:(E=Number(v.substring(E,b)),isNaN(E)?Mt:(b+=1,b+E>v.length?Ve:(v=v.slice(b,b+E),h.C=b+E,v)))}gt.prototype.cancel=function(){this.J=!0,vt(this)};function xe(h){h.S=Date.now()+h.I,En(h,h.I)}function En(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ce(T(h.ba,h),v)}function yn(h){h.B&&(u.clearTimeout(h.B),h.B=null)}gt.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Bt(this.i,this.A),this.L!=2&&(ze(),be(17)),vt(this),this.s=2,Rt(this)):En(this,this.S-h)};function Rt(h){h.j.G==0||h.J||Za(h.j,h)}function vt(h){yn(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Uo(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function te(h,v){try{var E=h.j;if(E.G!=0&&(E.g==h||et(E.h,h))){if(!h.K&&et(E.h,h)&&E.G==3){try{var b=E.Da.g.parse(v)}catch{b=null}if(Array.isArray(b)&&b.length==3){var q=b;if(q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Xa(E),xs(E);else break e;Ja(E),be(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ce(T(E.Za,E),6e3));if(1>=Nt(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else pi(E,11)}else if((h.K||E.g==h)&&Xa(E),!W(v))for(q=E.Da.g.parse(v),v=0;v<q.length;v++){let Ot=q[v];if(E.T=Ot[0],Ot=Ot[1],E.G==2)if(Ot[0]=="c"){E.K=Ot[1],E.ia=Ot[2];const Dn=Ot[3];Dn!=null&&(E.la=Dn,E.j.info("VER="+E.la));const Tn=Ot[4];Tn!=null&&(E.Aa=Tn,E.j.info("SVER="+E.Aa));const ls=Ot[5];ls!=null&&typeof ls=="number"&&0<ls&&(b=1.5*ls,E.L=b,E.j.info("backChannelRequestTimeoutMs_="+b)),b=E;const Gr=h.g;if(Gr){const Wo=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wo){var ne=b.h;ne.g||Wo.indexOf("spdy")==-1&&Wo.indexOf("quic")==-1&&Wo.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Zn(ne,ne.h),ne.h=null))}if(b.D){const tl=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(b.ya=tl,Oe(b.I,b.D,tl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),b=E;var Ee=h;if(b.qa=id(b,b.J?b.ia:null,b.W),Ee.K){Sr(b.h,Ee);var qt=Ee,bn=b.L;bn&&(qt.I=bn),qt.B&&(yn(qt),xe(qt)),b.g=Ee}else Ko(b);0<E.i.length&&zs(E)}else Ot[0]!="stop"&&Ot[0]!="close"||pi(E,7);else E.G==3&&(Ot[0]=="stop"||Ot[0]=="close"?Ot[0]=="stop"?pi(E,7):Gn(E):Ot[0]!="noop"&&E.l&&E.l.ta(Ot),E.v=0)}}ze(4)}catch{}}var ee=class{constructor(h,v){this.g=h,this.map=v}};function J(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ne(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nt(h){return h.h?1:h.g?h.g.size:0}function et(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Zn(h,v){h.g?h.g.add(v):h.h=v}function Sr(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}J.prototype.cancel=function(){if(this.i=kr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function kr(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.D);return v}return M(h.i)}function On(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],E=h.length,b=0;b<E;b++)v.push(h[b]);return v}v=[],E=0;for(b in h)v[E++]=h[b];return v}function _e(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var E=0;E<h;E++)v.push(E);return v}v=[],E=0;for(const b in h)v[E++]=b;return v}}}function fe(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var E=_e(h),b=On(h),q=b.length,ne=0;ne<q;ne++)v.call(void 0,b[ne],E&&E[ne],h)}var Z=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function we(h,v){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var b=h[E].indexOf("="),q=null;if(0<=b){var ne=h[E].substring(0,b);q=h[E].substring(b+1)}else ne=h[E];v(ne,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Le(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Le){this.h=h.h,De(this,h.j),this.o=h.o,this.g=h.g,it(this,h.s),this.l=h.l;var v=h.i,E=new qr;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),ot(this,E),this.m=h.m}else h&&(v=String(h).match(Z))?(this.h=!1,De(this,v[1]||"",!0),this.o=Be(v[2]||""),this.g=Be(v[3]||"",!0),it(this,v[4]),this.l=Be(v[5]||"",!0),ot(this,v[6]||"",!0),this.m=Be(v[7]||"")):(this.h=!1,this.i=new qr(null,this.h))}Le.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Hn(v,Rr,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Hn(v,Rr,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Hn(E,E.charAt(0)=="/"?qo:Bi,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Hn(E,ui)),h.join("")};function Fe(h){return new Le(h)}function De(h,v,E){h.j=E?Be(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function it(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function ot(h,v,E){v instanceof qr?(h.i=v,nr(h.i,h.h)):(E||(v=Hn(v,Ha)),h.i=new qr(v,h.h))}function Oe(h,v,E){h.i.set(v,E)}function Pt(h){return Oe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Be(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Hn(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,er),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function er(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Rr=/[#\/\?@]/g,Bi=/[#\?:]/g,qo=/[#\?]/g,Ha=/[#\?@]/g,ui=/#/g;function qr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function nn(h){h.g||(h.g=new Map,h.h=0,h.i&&we(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=qr.prototype,n.add=function(h,v){nn(this),this.i=null,h=mr(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function Ar(h,v){nn(h),v=mr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function tr(h,v){return nn(h),v=mr(h,v),h.g.has(v)}n.forEach=function(h,v){nn(this),this.g.forEach(function(E,b){E.forEach(function(q){h.call(v,q,b,this)},this)},this)},n.na=function(){nn(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let b=0;b<v.length;b++){const q=h[b];for(let ne=0;ne<q.length;ne++)E.push(v[b])}return E},n.V=function(h){nn(this);let v=[];if(typeof h=="string")tr(this,h)&&(v=v.concat(this.g.get(mr(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)v=v.concat(h[E])}return v},n.set=function(h,v){return nn(this),this.i=null,h=mr(this,h),tr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function ws(h,v,E){Ar(h,v),0<E.length&&(h.i=null,h.g.set(mr(h,v),M(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var b=v[E];const ne=encodeURIComponent(String(b)),Ee=this.V(b);for(b=0;b<Ee.length;b++){var q=ne;Ee[b]!==""&&(q+="="+encodeURIComponent(String(Ee[b]))),h.push(q)}}return this.i=h.join("&")};function mr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function nr(h,v){v&&!h.j&&(nn(h),h.i=null,h.g.forEach(function(E,b){var q=b.toLowerCase();b!=q&&(Ar(this,b),ws(this,q,E))},h)),h.j=v}function gr(h,v){const E=new Ye;if(u.Image){const b=new Image;b.onload=S(Cr,E,"TestLoadImage: loaded",!0,v,b),b.onerror=S(Cr,E,"TestLoadImage: error",!1,v,b),b.onabort=S(Cr,E,"TestLoadImage: abort",!1,v,b),b.ontimeout=S(Cr,E,"TestLoadImage: timeout",!1,v,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else v(!1)}function yr(h,v){const E=new Ye,b=new AbortController,q=setTimeout(()=>{b.abort(),Cr(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:b.signal}).then(ne=>{clearTimeout(q),ne.ok?Cr(E,"TestPingServer: ok",!0,v):Cr(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),Cr(E,"TestPingServer: error",!1,v)})}function Cr(h,v,E,b,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),b(E)}catch{}}function tp(){this.g=new Bo}function ed(h,v,E){const b=E||"";try{fe(h,function(q,ne){let Ee=q;p(q)&&(Ee=$o(q)),v.push(b+ne+"="+encodeURIComponent(Ee))})}catch(q){throw v.push(b+"type="+encodeURIComponent("_badmap")),q}}function di(h){this.l=h.Ub||null,this.j=h.eb||!1}P(di,ci),di.prototype.g=function(){return new Ho(this.l,this.j)},di.prototype.i=(function(h){return function(){return h}})({});function Ho(h,v){tn.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ho,tn),n=Ho.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,Ts(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||u).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ts(this)),this.g&&(this.readyState=3,Ts(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;td(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function td(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Es(this):Ts(this),this.readyState==3&&td(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Es(this))},n.Qa=function(h){this.g&&(this.response=h,Es(this))},n.ga=function(){this.g&&Es(this)};function Es(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ts(h)}n.setRequestHeader=function(h,v){this.u.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function Ts(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function hi(h){let v="";return me(h,function(E,b){v+=b,v+=":",v+=E,v+=`\r
`}),v}function qi(h,v,E){e:{for(b in E){var b=!1;break e}b=!0}b||(E=hi(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):Oe(h,v,E))}function rn(h){tn.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(rn,tn);var np=/^https?$/i,hc=["POST","PUT"];n=rn.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,v,E,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Te.g(),this.v=this.o?$i(this.o):$i(Te),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ne){Go(this,ne);return}if(h=E||"",E=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var q in b)E.set(q,b[q]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const ne of b.keys())E.set(ne,b.get(ne));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(E.keys()).find(ne=>ne.toLowerCase()=="content-type"),q=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(hc,v,void 0))||b||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Ee]of E)this.g.setRequestHeader(ne,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ka(this),this.u=!0,this.g.send(h),this.u=!1}catch(ne){Go(this,ne)}};function Go(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Ga(h),Hr(h)}function Ga(h){h.A||(h.A=!0,Qt(h,"complete"),Qt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Qt(this,"complete"),Qt(this,"abort"),Hr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hr(this,!0)),rn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?fc(this):this.bb())},n.bb=function(){fc(this)};function fc(h){if(h.h&&typeof l<"u"&&(!h.v[1]||Pr(h)!=4||h.Z()!=2)){if(h.u&&Pr(h)==4)Fo(h.Ea,0,h);else if(Qt(h,"readystatechange"),Pr(h)==4){h.h=!1;try{const Ee=h.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var b;if(b=Ee===0){var q=String(h.D).match(Z)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),b=!np.test(q?q.toLowerCase():"")}E=b}if(E)Qt(h,"complete"),Qt(h,"success");else{h.m=6;try{var ne=2<Pr(h)?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.Z()+"]",Ga(h)}}finally{Hr(h)}}}}function Hr(h,v){if(h.g){Ka(h);const E=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Qt(h,"ready");try{E.onreadystatechange=b}catch{}}}function Ka(h){h.I&&(u.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Pr(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Pr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),zo(v)}};function pc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wa(h){const v={};h=(h.g&&2<=Pr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(W(h[b]))continue;var E=L(h[b]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ne=v[q]||[];v[q]=ne,ne.push(E)}N(v,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $s(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function mc(h){this.Aa=0,this.i=[],this.j=new Ye,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$s("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$s("baseRetryDelayMs",5e3,h),this.cb=$s("retryDelaySeedMs",1e4,h),this.Wa=$s("forwardChannelMaxRetries",2,h),this.wa=$s("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new J(h&&h.concurrentRequestLimit),this.Da=new tp,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=mc.prototype,n.la=8,n.G=1,n.connect=function(h,v,E,b){be(0),this.W=h,this.H=v||{},E&&b!==void 0&&(this.H.OSID=E,this.H.OAID=b),this.F=this.X,this.I=id(this,null,this.W),zs(this)};function Gn(h){if(Qa(h),h.G==3){var v=h.U++,E=Fe(h.I);if(Oe(E,"SID",h.K),Oe(E,"RID",v),Oe(E,"TYPE","terminate"),fi(h,E),v=new gt(h,h.j,v),v.L=2,v.v=Pt(Fe(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=v.v,E=!0),E||(v.g=od(v.j,null),v.g.ea(v.v)),v.F=Date.now(),xe(v)}sd(h)}function xs(h){h.g&&(gc(h),h.g.cancel(),h.g=null)}function Qa(h){xs(h),h.u&&(u.clearTimeout(h.u),h.u=null),Xa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function zs(h){if(!Ne(h.h)&&!h.s){h.s=!0;var v=h.Ga;ft||ke(),ve||(ft(),ve=!0),$e.add(v,h),h.B=0}}function rp(h,v){return Nt(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ce(T(h.Ga,h,v),rd(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new gt(this,this.j,h);let ne=this.o;if(this.S&&(ne?(ne=I(ne),k(ne,this.S)):ne=this.S),this.m!==null||this.O||(q.H=ne,ne=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var b=this.i[E];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(v+=b,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Hi(this,q,v),E=Fe(this.I),Oe(E,"RID",h),Oe(E,"CVER",22),this.D&&Oe(E,"X-HTTP-Session-Id",this.D),fi(this,E),ne&&(this.O?v="headers="+encodeURIComponent(String(hi(ne)))+"&"+v:this.m&&qi(E,this.m,ne)),Zn(this.h,q),this.Ua&&Oe(E,"TYPE","init"),this.P?(Oe(E,"$req",v),Oe(E,"SID","null"),q.T=!0,$t(q,E,null)):$t(q,E,v),this.G=2}}else this.G==3&&(h?Ya(this,h):this.i.length==0||Ne(this.h)||Ya(this))};function Ya(h,v){var E;v?E=v.l:E=h.U++;const b=Fe(h.I);Oe(b,"SID",h.K),Oe(b,"RID",E),Oe(b,"AID",h.T),fi(h,b),h.m&&h.o&&qi(b,h.m,h.o),E=new gt(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Hi(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Zn(h.h,E),$t(E,b,v)}function fi(h,v){h.H&&me(h.H,function(E,b){Oe(v,b,E)}),h.l&&fe({},function(E,b){Oe(v,b,E)})}function Hi(h,v,E){E=Math.min(h.i.length,E);var b=h.l?T(h.l.Na,h.l,h):null;e:{var q=h.i;let ne=-1;for(;;){const Ee=["count="+E];ne==-1?0<E?(ne=q[0].g,Ee.push("ofs="+ne)):ne=0:Ee.push("ofs="+ne);let qt=!0;for(let bn=0;bn<E;bn++){let Ot=q[bn].g;const Dn=q[bn].map;if(Ot-=ne,0>Ot)ne=Math.max(0,q[bn].g-100),qt=!1;else try{ed(Dn,Ee,"req"+Ot+"_")}catch{b&&b(Dn)}}if(qt){b=Ee.join("&");break e}}}return h=h.i.splice(0,E),v.D=h,b}function Ko(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ft||ke(),ve||(ft(),ve=!0),$e.add(v,h),h.v=0}}function Ja(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ce(T(h.Fa,h),rd(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,nd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ce(T(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,be(10),xs(this),nd(this))};function gc(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function nd(h){h.g=new gt(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Fe(h.qa);Oe(v,"RID","rpc"),Oe(v,"SID",h.K),Oe(v,"AID",h.T),Oe(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Oe(v,"TO",h.ja),Oe(v,"TYPE","xmlhttp"),fi(h,v),h.m&&h.o&&qi(v,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Pt(Fe(v)),E.m=null,E.P=!0,lt(E,h)}n.Za=function(){this.C!=null&&(this.C=null,xs(this),Ja(this),be(19))};function Xa(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Za(h,v){var E=null;if(h.g==v){Xa(h),gc(h),h.g=null;var b=2}else if(et(h.h,v))E=v.D,Sr(h.h,v),b=1;else return;if(h.G!=0){if(v.o)if(b==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;b=ie(),Qt(b,new Ze(b,E)),zs(h)}else Ko(h);else if(q=v.s,q==3||q==0&&0<v.X||!(b==1&&rp(h,v)||b==2&&Ja(h)))switch(E&&0<E.length&&(v=h.h,v.i=v.i.concat(E)),q){case 1:pi(h,5);break;case 4:pi(h,10);break;case 3:pi(h,6);break;default:pi(h,2)}}}function rd(h,v){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*v}function pi(h,v){if(h.j.info("Error code "+v),v==2){var E=T(h.fb,h),b=h.Xa;const q=!b;b=new Le(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||De(b,"https"),Pt(b),q?gr(b.toString(),E):yr(b.toString(),E)}else be(2);h.G=0,h.l&&h.l.sa(v),sd(h),Qa(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function sd(h){if(h.G=0,h.ka=[],h.l){const v=kr(h.h);(v.length!=0||h.i.length!=0)&&(O(h.ka,v),O(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function id(h,v,E){var b=E instanceof Le?Fe(E):new Le(E);if(b.g!="")v&&(b.g=v+"."+b.g),it(b,b.s);else{var q=u.location;b=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var ne=new Le(null);b&&De(ne,b),v&&(ne.g=v),q&&it(ne,q),E&&(ne.l=E),b=ne}return E=h.D,v=h.ya,E&&v&&Oe(b,E,v),Oe(b,"VER",h.la),fi(h,b),b}function od(h,v,E){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new rn(new di({eb:E})):new rn(h.pa),v.Ha(h.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yc(){}n=yc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function el(){}el.prototype.g=function(h,v){return new vr(h,v)};function vr(h,v){tn.call(this),this.g=new mc(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!W(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!W(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Bs(this)}P(vr,tn),vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vr.prototype.close=function(){Gn(this.g)},vr.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=$o(h),h=E);v.i.push(new ee(v.Ya++,h)),v.G==3&&zs(v)},vr.prototype.N=function(){this.g.l=null,delete this.j,Gn(this.g),delete this.g,vr.aa.N.call(this)};function ad(h){$.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}P(ad,$);function ld(){U.call(this),this.status=1}P(ld,U);function Bs(h){this.g=h}P(Bs,yc),Bs.prototype.ua=function(){Qt(this.g,"a")},Bs.prototype.ta=function(h){Qt(this.g,new ad(h))},Bs.prototype.sa=function(h){Qt(this.g,new ld)},Bs.prototype.ra=function(){Qt(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,vr.prototype.send=vr.prototype.o,vr.prototype.open=vr.prototype.m,vr.prototype.close=vr.prototype.close,d1=function(){return new el},u1=function(){return ie()},c1=se,Pg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yt.NO_ERROR=0,Yt.TIMEOUT=8,Yt.HTTP_ERROR=6,bh=Yt,We.COMPLETE="complete",l1=We,zi.EventType=pr,pr.OPEN="a",pr.CLOSE="b",pr.ERROR="c",pr.MESSAGE="d",tn.prototype.listen=tn.prototype.K,Xc=zi,rn.prototype.listenOnce=rn.prototype.L,rn.prototype.getLastError=rn.prototype.Ka,rn.prototype.getLastErrorCode=rn.prototype.Ba,rn.prototype.getStatus=rn.prototype.Z,rn.prototype.getResponseJson=rn.prototype.Oa,rn.prototype.getResponseText=rn.prototype.oa,rn.prototype.send=rn.prototype.ea,rn.prototype.setWithCredentials=rn.prototype.Ha,a1=rn}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const NE="@firebase/firestore";let Un=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Un.UNAUTHENTICATED=new Un(null),Un.GOOGLE_CREDENTIALS=new Un("google-credentials-uid"),Un.FIRST_PARTY=new Un("first-party-uid"),Un.MOCK_USER=new Un("mock-user");let oc="10.14.0";const ka=new rc("@firebase/firestore");function kl(){return ka.logLevel}function ce(n,...e){if(ka.logLevel<=bt.DEBUG){const t=e.map(Hy);ka.debug(`Firestore (${oc}): ${n}`,...t)}}function _n(n,...e){if(ka.logLevel<=bt.ERROR){const t=e.map(Hy);ka.error(`Firestore (${oc}): ${n}`,...t)}}function Ra(n,...e){if(ka.logLevel<=bt.WARN){const t=e.map(Hy);ka.warn(`Firestore (${oc}): ${n}`,...t)}}function Hy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ue(n="Unexpected state"){const e=`FIRESTORE (${oc}) INTERNAL ASSERTION FAILED: `+n;throw _n(e),new Error(e)}function Qe(n,e){n||Ue()}function He(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends is{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class h1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Un.UNAUTHENTICATED)))}shutdown(){}}class ij{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class oj{constructor(e){this.t=e,this.currentUser=Un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xs,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xs)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string"),new h1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new Un(e)}}class aj{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Un.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lj{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new aj(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class cj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qe(this.o===void 0);const r=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string"),this.R=t.token,new cj(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function dj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class f1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=dj(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%e.length))}return r}}function ht(n,e){return n<e?-1:n>e?1:0}function Ul(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function p1(n){return n+"\0"}class dn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dn.fromMillis(Date.now())}static fromDate(e){return dn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new dn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new dn(0,0))}static max(){return new Xe(new dn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wu{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ue(),r===void 0?r=e.length-t:r>e.length-t&&Ue(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return wu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wu?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=e.get(s),l=t.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Vt extends wu{construct(e,t,r){return new Vt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Vt(t)}static emptyPath(){return new Vt([])}}const hj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends wu{construct(e,t,r){return new un(e,t,r)}static isValidIdentifier(e){return hj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(t)}static emptyPath(){return new un([])}}class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(Vt.fromString(e))}static fromName(e){return new Ie(Vt.fromString(e).popFirst(5))}static empty(){return new Ie(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new Vt(e.slice()))}}class Qh{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Ng(n){return n.fields.find((e=>e.kind===2))}function ua(n){return n.fields.filter((e=>e.kind!==2))}Qh.UNKNOWN_ID=-1;class Sh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Eu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Eu(0,rs.min())}}function m1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Xe.fromTimestamp(r===1e9?new dn(t+1,0):new dn(t,r));return new rs(s,Ie.empty(),e)}function g1(n){return new rs(n.readTime,n.key,-1)}class rs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rs(Xe.min(),Ie.empty(),-1)}static max(){return new rs(Xe.max(),Ie.empty(),-1)}}function Gy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:ht(n.largestBatchId,e.largestBatchId))}const y1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Po(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==y1)throw n;ce("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,r)=>{t(e)}))}static reject(e){return new G(((t,r)=>{r(e)}))}static waitFor(e){return new G(((t,r)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&t()}),(d=>r(d)))})),l=!0,o===s&&t()}))}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next((s=>s?G.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new G(((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next((y=>{l[p]=y,++u,u===o&&r(l)}),(y=>s(y)))}}))}static doWhile(e,t){return new G(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}class Af{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Xs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ou(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Ky(r.target.error);this.V.reject(new ou(e,s))}}static open(e,t,r,s){try{return new Af(t,e.transaction(s,r))}catch(o){throw new ou(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pj(t)}}class _o{constructor(e,t,r){this.name=e,this.version=t,this.p=r,_o.S(An())===12.2&&_n("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ce("SimpleDb","Removing database:",e),da(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Du())return!1;if(_o.v())return!0;const e=An(),t=_o.S(e),r=0<t&&t<10,s=_1(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(ce("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const l=o.target.result;t(l)},s.onblocked=()=>{r(new ou(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const l=o.target.error;l.name==="VersionError"?r(new pe(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new pe(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new ou(e,l))},s.onupgradeneeded=o=>{ce("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.p.O(l,s.transaction,o.oldVersion,this.version).next((()=>{ce("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.M(e);const u=Af.open(this.db,e,o?"readonly":"readwrite",r),d=s(u).next((p=>(u.g(),p))).catch((p=>(u.abort(p),G.reject(p)))).toPromise();return d.catch((()=>{})),await u.m,d}catch(u){const d=u,p=d.name!=="FirebaseError"&&l<3;if(ce("SimpleDb","Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class fj{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return da(this.B.delete())}}class ou extends pe{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function No(n){return n.name==="IndexedDbTransactionError"}class pj{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),da(r)}add(e){return ce("SimpleDb","ADD",this.store.name,e,e),da(this.store.add(e))}get(e){return da(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ce("SimpleDb","DELETE",this.store.name,e),da(this.store.delete(e))}count(){return ce("SimpleDb","COUNT",this.store.name),da(this.store.count())}U(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new G(((l,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{l(d.target.result)}}))}{const o=this.cursor(r),l=[];return this.W(o,((u,d)=>{l.push(d)})).next((()=>l))}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new G(((s,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{s(l.target.result)}}))}j(e,t){ce("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.W(s,((o,l,u)=>u.delete()))}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Y(e){const t=this.cursor({});return new G(((r,s)=>{t.onerror=o=>{const l=Ky(o.target.error);s(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((u=>{u?l.continue():r()})):r()}}))}W(e,t){const r=[];return new G(((s,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void s();const d=new fj(u),p=t(u.primaryKey,u.value,d);if(p instanceof G){const y=p.catch((w=>(d.done(),G.reject(w))));r.push(y)}d.isDone?s():d.K===null?u.continue():u.continue(d.K)}})).next((()=>G.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function da(n){return new G(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Ky(r.target.error);t(s)}}))}let OE=!1;function Ky(n){const e=_o.S(An());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return OE||(OE=!0,setTimeout((()=>{throw r}),0)),r}}return n}class mj{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ce("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ce("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){No(t)?ce("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Po(t)}await this.X(6e4)}))}}class gj{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const r=new Set;let s=t,o=!0;return G.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return ce("IndexBackfiller",`Processing collection: ${l}`),this.ne(e,l,s).next((u=>{s-=u,r.add(l)}));o=!1})))).next((()=>t-s))}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this.re(s,o))).next((u=>(ce("IndexBackfiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>l.size))}))))}re(e,t){let r=e;return t.changes.forEach(((s,o)=>{const l=g1(o);Gy(l,r)>0&&(r=l)})),new rs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ur{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ur.oe=-1;function Cf(n){return n==null}function Tu(n){return n===0&&1/n==-1/0}function w1(n){return typeof n=="number"&&Number.isInteger(n)&&!Tu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Tr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DE(e)),e=yj(n.get(t),e);return DE(e)}function yj(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function DE(n){return n+""}function Ws(n){const e=n.length;if(Qe(e>=2),e===2)return Qe(n.charAt(0)===""&&n.charAt(1)===""),Vt.emptyPath();const t=e-2,r=[];let s="";for(let o=0;o<e;){const l=n.indexOf("",o);switch((l<0||l>t)&&Ue(),n.charAt(l+1)){case"":const u=n.substring(o,l);let d;s.length===0?d=u:(s+=u,d=s,s=""),r.push(d);break;case"":s+=n.substring(o,l),s+="\0";break;case"":s+=n.substring(o,l+1);break;default:Ue()}o=l+2}return new Vt(r)}const ME=["userId","batchId"];function kh(n,e){return[n,Tr(e)]}function E1(n,e,t){return[n,Tr(e),t]}const vj={},_j=["prefixPath","collectionGroup","readTime","documentId"],wj=["prefixPath","collectionGroup","documentId"],Ej=["collectionGroup","readTime","prefixPath","documentId"],Tj=["canonicalId","targetId"],xj=["targetId","path"],Ij=["path","targetId"],bj=["collectionId","parent"],Sj=["indexId","uid"],kj=["uid","sequenceNumber"],Rj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Aj=["indexId","uid","orderedDocumentKey"],Cj=["userId","collectionPath","documentId"],Pj=["userId","collectionPath","largestBatchId"],Nj=["userId","collectionGroup","largestBatchId"],T1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oj=[...T1,"documentOverlays"],x1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],I1=x1,Wy=[...I1,"indexConfiguration","indexState","indexEntries"],Dj=Wy,Mj=[...Wy,"globals"];class Og extends v1{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Cn(n,e){const t=He(n);return _o.F(t._e,e)}function LE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $a(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function b1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Xt{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new Xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Qn.RED,this.left=s??Qn.EMPTY,this.right=o??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Qn(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Qn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(e,t,r,s,o){return this}insert(e,t,r){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jE(this.data.getIterator())}getIteratorFrom(e){return new jE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class jE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tl(n){return n.hasNext()?n.getNext():void 0}class $r{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new $r([])}unionWith(e){let t=new Gt(un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $r(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ul(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class S1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new S1("Invalid base64 string: "+o):o}})(e);return new wn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const Lj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(n){if(Qe(!!n),typeof n=="string"){let e=0;const t=Lj.exec(n);if(Qe(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:on(n.seconds),nanos:on(n.nanos)}}function on(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xo(n){return typeof n=="string"?wn.fromBase64String(n):wn.fromUint8Array(n)}function Pf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Qy(n){const e=n.mapValue.fields.__previous_value__;return Pf(e)?Qy(e):e}function xu(n){const e=Li(n.mapValue.fields.__local_write_time__.timestampValue);return new dn(e.seconds,e.nanos)}class jj{constructor(e,t,r,s,o,l,u,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p}}class Aa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Aa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}const mo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rh={nullValue:"NULL_VALUE"};function Ca(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pf(n)?4:k1(n)?9007199254740991:Nf(n)?10:11:Ue()}function Zs(n,e){if(n===e)return!0;const t=Ca(n);if(t!==Ca(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xu(n).isEqual(xu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Li(s.timestampValue),u=Li(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return xo(s.bytesValue).isEqual(xo(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return on(s.geoPointValue.latitude)===on(o.geoPointValue.latitude)&&on(s.geoPointValue.longitude)===on(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return on(s.integerValue)===on(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=on(s.doubleValue),u=on(o.doubleValue);return l===u?Tu(l)===Tu(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return Ul(n.arrayValue.values||[],e.arrayValue.values||[],Zs);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(LE(l)!==LE(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Zs(l[d],u[d])))return!1;return!0})(n,e);default:return Ue()}}function Iu(n,e){return(n.values||[]).find((t=>Zs(t,e)))!==void 0}function Io(n,e){if(n===e)return 0;const t=Ca(n),r=Ca(e);if(t!==r)return ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ht(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=on(o.integerValue||o.doubleValue),d=on(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return VE(n.timestampValue,e.timestampValue);case 4:return VE(xu(n),xu(e));case 5:return ht(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=xo(o),d=xo(l);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let p=0;p<u.length&&p<d.length;p++){const y=ht(u[p],d[p]);if(y!==0)return y}return ht(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=ht(on(o.latitude),on(l.latitude));return u!==0?u:ht(on(o.longitude),on(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return FE(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var u,d,p,y;const w=o.fields||{},T=l.fields||{},S=(u=w.value)===null||u===void 0?void 0:u.arrayValue,P=(d=T.value)===null||d===void 0?void 0:d.arrayValue,M=ht(((p=S?.values)===null||p===void 0?void 0:p.length)||0,((y=P?.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:FE(S,P)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===mo.mapValue&&l===mo.mapValue)return 0;if(o===mo.mapValue)return 1;if(l===mo.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),p=l.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const T=ht(d[w],y[w]);if(T!==0)return T;const S=Io(u[d[w]],p[y[w]]);if(S!==0)return S}return ht(d.length,y.length)})(n.mapValue,e.mapValue);default:throw Ue()}}function VE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ht(n,e);const t=Li(n),r=Li(e),s=ht(t.seconds,r.seconds);return s!==0?s:ht(t.nanos,r.nanos)}function FE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Io(t[s],r[s]);if(o)return o}return ht(t.length,r.length)}function $l(n){return Dg(n)}function Dg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Li(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return xo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Dg(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Dg(t.fields[l])}`;return s+"}"})(n.mapValue):Ue()}function Pa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Mg(n){return!!n&&"integerValue"in n}function bu(n){return!!n&&"arrayValue"in n}function UE(n){return!!n&&"nullValue"in n}function $E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ah(n){return!!n&&"mapValue"in n}function Nf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $a(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=au(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function k1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const R1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Vj(n){return"nullValue"in n?Rh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Pa(Aa.empty(),Ie.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Nf(n)?R1:{mapValue:{}}:Ue()}function Fj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Pa(Aa.empty(),Ie.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?R1:"mapValue"in n?Nf(n)?{mapValue:{}}:mo:Ue()}function zE(n,e){const t=Io(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function BE(n,e){const t=Io(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ur{constructor(e){this.value=e}static empty(){return new ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ah(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=un.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=u.popLast()}l?r[u.lastSegment()]=au(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Ah(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ah(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){$a(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new ur(au(this.value))}}function A1(n){const e=[];return $a(n.fields,((t,r)=>{const s=new un([t]);if(Ah(r)){const o=A1(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new $r(e)}class pn{constructor(e,t,r,s,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new pn(e,0,Xe.min(),Xe.min(),Xe.min(),ur.empty(),0)}static newFoundDocument(e,t,r,s){return new pn(e,1,t,Xe.min(),r,s,0)}static newNoDocument(e,t){return new pn(e,2,t,Xe.min(),Xe.min(),ur.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Xe.min(),Xe.min(),ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bo{constructor(e,t){this.position=e,this.inclusive=t}}function qE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=Ie.comparator(Ie.fromName(l.referenceValue),t.key):r=Io(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function HE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zs(n.position[t],e.position[t]))return!1;return!0}class Su{constructor(e,t="asc"){this.field=e,this.dir=t}}function Uj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class C1{}class At extends C1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $j(e,t,r):t==="array-contains"?new qj(e,r):t==="in"?new L1(e,r):t==="not-in"?new Hj(e,r):t==="array-contains-any"?new Gj(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new zj(e,r):new Bj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Io(t,this.value)):t!==null&&Ca(this.value)===Ca(t)&&this.matchesComparison(Io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends C1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ht(e,t)}matches(e){return zl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zl(n){return n.op==="and"}function Lg(n){return n.op==="or"}function Yy(n){return P1(n)&&zl(n)}function P1(n){for(const e of n.filters)if(e instanceof Ht)return!1;return!0}function jg(n){if(n instanceof At)return n.field.canonicalString()+n.op.toString()+$l(n.value);if(Yy(n))return n.filters.map((e=>jg(e))).join(",");{const e=n.filters.map((t=>jg(t))).join(",");return`${n.op}(${e})`}}function N1(n,e){return n instanceof At?(function(r,s){return s instanceof At&&r.op===s.op&&r.field.isEqual(s.field)&&Zs(r.value,s.value)})(n,e):n instanceof Ht?(function(r,s){return s instanceof Ht&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,u)=>o&&N1(l,s.filters[u])),!0):!1})(n,e):void Ue()}function O1(n,e){const t=n.filters.concat(e);return Ht.create(t,n.op)}function D1(n){return n instanceof At?(function(t){return`${t.field.canonicalString()} ${t.op} ${$l(t.value)}`})(n):n instanceof Ht?(function(t){return t.op.toString()+" {"+t.getFilters().map(D1).join(" ,")+"}"})(n):"Filter"}class $j extends At{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class zj extends At{constructor(e,t){super(e,"in",t),this.keys=M1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Bj extends At{constructor(e,t){super(e,"not-in",t),this.keys=M1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function M1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Ie.fromName(r.referenceValue)))}class qj extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bu(t)&&Iu(t.arrayValue,this.value)}}class L1 extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Iu(this.value.arrayValue,t)}}class Hj extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Iu(this.value.arrayValue,t)}}class Gj extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Iu(this.value.arrayValue,r)))}}class Kj{constructor(e,t=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.ue=null}}function Vg(n,e=null,t=[],r=[],s=null,o=null,l=null){return new Kj(n,e,t,r,s,o,l)}function Na(n){const e=He(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>jg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>$l(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>$l(r))).join(",")),e.ue=t}return e.ue}function Uu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Uj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!N1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HE(n.startAt,e.startAt)&&HE(n.endAt,e.endAt)}function Yh(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Jh(n,e){return n.filters.filter((t=>t instanceof At&&t.field.isEqual(e)))}function GE(n,e,t){let r=Rh,s=!0;for(const o of Jh(n,e)){let l=Rh,u=!0;switch(o.op){case"<":case"<=":l=Vj(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,u=!1;break;case"!=":case"not-in":l=Rh}zE({value:r,inclusive:s},{value:l,inclusive:u})<0&&(r=l,s=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];zE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}function KE(n,e,t){let r=mo,s=!0;for(const o of Jh(n,e)){let l=mo,u=!0;switch(o.op){case">=":case">":l=Fj(o.value),u=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,u=!1;break;case"!=":case"not-in":l=mo}BE({value:r,inclusive:s},{value:l,inclusive:u})>0&&(r=l,s=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];BE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}class za{constructor(e,t=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function j1(n,e,t,r,s,o,l,u){return new za(n,e,t,r,s,o,l,u)}function $u(n){return new za(n)}function WE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Jy(n){return n.collectionGroup!==null}function Ml(n){const e=He(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Gt(un.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(u=u.add(p.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Su(o,r))})),t.has(un.keyField().canonicalString())||e.ce.push(new Su(un.keyField(),r))}return e.ce}function ts(n){const e=He(n);return e.le||(e.le=Wj(e,Ml(n))),e.le}function Wj(n,e){if(n.limitType==="F")return Vg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Su(s.field,o)}));const t=n.endAt?new bo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bo(n.startAt.position,n.startAt.inclusive):null;return Vg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Fg(n,e){const t=n.filters.concat([e]);return new za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xh(n,e,t){return new za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Of(n,e){return Uu(ts(n),ts(e))&&n.limitType===e.limitType}function V1(n){return`${Na(ts(n))}|lt:${n.limitType}`}function Rl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>D1(s))).join(", ")}]`),Cf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>$l(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>$l(s))).join(",")),`Target(${r})`})(ts(n))}; limitType=${n.limitType})`}function zu(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ie.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of Ml(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const p=qE(l,u,d);return l.inclusive?p<=0:p<0})(r.startAt,Ml(r),s)||r.endAt&&!(function(l,u,d){const p=qE(l,u,d);return l.inclusive?p>=0:p>0})(r.endAt,Ml(r),s))})(n,e)}function F1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function U1(n){return(e,t)=>{let r=!1;for(const s of Ml(n)){const o=Qj(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Qj(n,e,t){const r=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(o,l,u){const d=l.data.field(o),p=u.data.field(o);return d!==null&&p!==null?Io(d,p):Ue()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ue()}}class Oo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$a(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return b1(this.inner)}size(){return this.innerSize}}const Yj=new Xt(Ie.comparator);function Jr(){return Yj}const $1=new Xt(Ie.comparator);function Zc(...n){let e=$1;for(const t of n)e=e.insert(t.key,t);return e}function z1(n){let e=$1;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Qs(){return lu()}function B1(){return lu()}function lu(){return new Oo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Jj=new Xt(Ie.comparator),Xj=new Gt(Ie.comparator);function Tt(...n){let e=Xj;for(const t of n)e=e.add(t);return e}const Zj=new Gt(ht);function Xy(){return Zj}function Zy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tu(e)?"-0":e}}function q1(n){return{integerValue:""+n}}function H1(n,e){return w1(e)?q1(e):Zy(n,e)}class Df{constructor(){this._=void 0}}function eV(n,e,t){return n instanceof Bl?(function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Pf(o)&&(o=Qy(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}})(t,e):n instanceof ql?K1(n,e):n instanceof Hl?W1(n,e):(function(s,o){const l=G1(s,o),u=QE(l)+QE(s.Pe);return Mg(l)&&Mg(s.Pe)?q1(u):Zy(s.serializer,u)})(n,e)}function tV(n,e,t){return n instanceof ql?K1(n,e):n instanceof Hl?W1(n,e):t}function G1(n,e){return n instanceof Gl?(function(r){return Mg(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Bl extends Df{}class ql extends Df{constructor(e){super(),this.elements=e}}function K1(n,e){const t=Q1(e);for(const r of n.elements)t.some((s=>Zs(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Hl extends Df{constructor(e){super(),this.elements=e}}function W1(n,e){let t=Q1(e);for(const r of n.elements)t=t.filter((s=>!Zs(s,r)));return{arrayValue:{values:t}}}class Gl extends Df{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function QE(n){return on(n.integerValue||n.doubleValue)}function Q1(n){return bu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ev{constructor(e,t){this.field=e,this.transform=t}}function nV(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof ql&&s instanceof ql||r instanceof Hl&&s instanceof Hl?Ul(r.elements,s.elements,Zs):r instanceof Gl&&s instanceof Gl?Zs(r.Pe,s.Pe):r instanceof Bl&&s instanceof Bl})(n.transform,e.transform)}class rV{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ch(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mf{}function Y1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bu(n.key,zn.none()):new ac(n.key,n.data,zn.none());{const t=n.data,r=ur.empty();let s=new Gt(un.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Fi(n.key,r,new $r(s.toArray()),zn.none())}}function sV(n,e,t){n instanceof ac?(function(s,o,l){const u=s.value.clone(),d=JE(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Fi?(function(s,o,l){if(!Ch(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=JE(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(J1(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function cu(n,e,t,r){return n instanceof ac?(function(o,l,u,d){if(!Ch(o.precondition,l))return u;const p=o.value.clone(),y=XE(o.fieldTransforms,d,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Fi?(function(o,l,u,d){if(!Ch(o.precondition,l))return u;const p=XE(o.fieldTransforms,d,l),y=l.data;return y.setAll(J1(o)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(o,l,u){return Ch(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function iV(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=G1(r.transform,s||null);o!=null&&(t===null&&(t=ur.empty()),t.set(r.field,o))}return t||null}function YE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ul(r,s,((o,l)=>nV(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ac extends Mf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fi extends Mf{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function J1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function JE(n,e,t){const r=new Map;Qe(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,tV(l,u,t[s]))}return r}function XE(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,eV(o,l,e))}return r}class Bu extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X1 extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tv{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&sV(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=B1();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=Y1(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Xe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Tt())}isEqual(e){return this.batchId===e.batchId&&Ul(this.mutations,e.mutations,((t,r)=>YE(t,r)))&&Ul(this.baseMutations,e.baseMutations,((t,r)=>YE(t,r)))}}class nv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Qe(e.mutations.length===r.length);let s=(function(){return Jj})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new nv(e,t,r,s)}}class rv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class oV{constructor(e,t){this.count=e,this.unchangedNames=t}}var In,Dt;function aV(n){switch(n){default:return Ue();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function Z1(n){if(n===void 0)return _n("GRPC error has no .code"),re.UNKNOWN;switch(n){case In.OK:return re.OK;case In.CANCELLED:return re.CANCELLED;case In.UNKNOWN:return re.UNKNOWN;case In.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case In.INTERNAL:return re.INTERNAL;case In.UNAVAILABLE:return re.UNAVAILABLE;case In.UNAUTHENTICATED:return re.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case In.NOT_FOUND:return re.NOT_FOUND;case In.ALREADY_EXISTS:return re.ALREADY_EXISTS;case In.PERMISSION_DENIED:return re.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case In.ABORTED:return re.ABORTED;case In.OUT_OF_RANGE:return re.OUT_OF_RANGE;case In.UNIMPLEMENTED:return re.UNIMPLEMENTED;case In.DATA_LOSS:return re.DATA_LOSS;default:return Ue()}}(Dt=In||(In={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";function lV(){return new TextEncoder}const cV=new va([4294967295,4294967295],0);function ZE(n){const e=lV().encode(n),t=new o1;return t.update(e),new Uint8Array(t.digest())}function eT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new va([t,r],0),new va([s,o],0)]}class sv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new eu(`Invalid padding: ${t}`);if(r<0)throw new eu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new eu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=va.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(va.fromNumber(r)));return s.compare(cV)===1&&(s=new va([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=ZE(e),[r,s]=eT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);if(!this.de(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new sv(o,s,t);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.Ie===0)return;const t=ZE(e),[r,s]=eT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qu{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qu(Xe.min(),s,new Xt(ht),Jr(),Tt())}}class Hu{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Hu(r,t,Tt(),Tt(),Tt())}}class Ph{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class eS{constructor(e,t){this.targetId=e,this.me=t}}class tS{constructor(e,t,r=wn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class tT{constructor(){this.fe=0,this.ge=rT(),this.pe=wn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Tt(),t=Tt(),r=Tt();return this.ge.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ue()}})),new Hu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=rT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uV{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jr(),this.qe=nT(),this.Qe=new Xt(ht)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ue()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,s)=>{this.ze(s)&&t(s)}))}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const o=s.target;if(Yh(o))if(r===0){const l=new Ie(o.path);this.Ue(t,l,pn.newNoDocument(l,Xe.min()))}else Qe(r===1);else{const l=this.Ye(t);if(l!==r){const u=this.Ze(e),d=u?this.Xe(u,e,l):1;if(d!==0){this.je(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,p)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=xo(r).toUint8Array()}catch(d){if(d instanceof S1)return Ra("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new sv(l,s,o)}catch(d){return Ra(d instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Le.tt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(t,o,null),s++)})),s}rt(e){const t=new Map;this.Be.forEach(((o,l)=>{const u=this.Je(l);if(u){if(o.current&&Yh(u.target)){const d=new Ie(u.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,pn.newNoDocument(d,e))}o.be&&(t.set(l,o.ve()),o.Ce())}}));let r=Tt();this.qe.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const p=this.Je(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.ke.forEach(((o,l)=>l.setReadTime(e)));const s=new qu(e,t,this.Qe,this.ke,r);return this.ke=Jr(),this.qe=nT(),this.Qe=new Xt(ht),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new tT,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Gt(ht),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tT),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function nT(){return new Xt(Ie.comparator)}function rT(){return new Xt(Ie.comparator)}const dV={asc:"ASCENDING",desc:"DESCENDING"},hV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fV={and:"AND",or:"OR"};class pV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ug(n,e){return n.useProto3Json||Cf(e)?e:{value:e}}function Kl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mV(n,e){return Kl(n,e.toTimestamp())}function xr(n){return Qe(!!n),Xe.fromTimestamp((function(t){const r=Li(t);return new dn(r.seconds,r.nanos)})(n))}function iv(n,e){return $g(n,e).canonicalString()}function $g(n,e){const t=(function(s){return new Vt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function rS(n){const e=Vt.fromString(n);return Qe(hS(e)),e}function Zh(n,e){return iv(n.databaseId,e.path)}function _a(n,e){const t=rS(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(oS(t))}function sS(n,e){return iv(n.databaseId,e)}function iS(n){const e=rS(n);return e.length===4?Vt.emptyPath():oS(e)}function zg(n){return new Vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oS(n){return Qe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function sT(n,e,t){return{name:Zh(n,e),fields:t.value.mapValue.fields}}function gV(n,e,t){const r=_a(n,e.name),s=xr(e.updateTime),o=e.createTime?xr(e.createTime):Xe.min(),l=new ur({mapValue:{fields:e.fields}}),u=pn.newFoundDocument(r,s,o,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function yV(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ue()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,y){return p.useProto3Json?(Qe(y===void 0||typeof y=="string"),wn.fromBase64String(y||"")):(Qe(y===void 0||y instanceof Buffer||y instanceof Uint8Array),wn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(p){const y=p.code===void 0?re.UNKNOWN:Z1(p.code);return new pe(y,p.message||"")})(l);t=new tS(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_a(n,r.document.name),o=xr(r.document.updateTime),l=r.document.createTime?xr(r.document.createTime):Xe.min(),u=new ur({mapValue:{fields:r.document.fields}}),d=pn.newFoundDocument(s,o,l,u),p=r.targetIds||[],y=r.removedTargetIds||[];t=new Ph(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_a(n,r.document),o=r.readTime?xr(r.readTime):Xe.min(),l=pn.newNoDocument(s,o),u=r.removedTargetIds||[];t=new Ph([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_a(n,r.document),o=r.removedTargetIds||[];t=new Ph([],o,s,null)}else{if(!("filter"in e))return Ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new oV(s,o),u=r.targetId;t=new eS(u,l)}}return t}function ef(n,e){let t;if(e instanceof ac)t={update:sT(n,e.key,e.value)};else if(e instanceof Bu)t={delete:Zh(n,e.key)};else if(e instanceof Fi)t={update:sT(n,e.key,e.data),updateMask:xV(e.fieldMask)};else{if(!(e instanceof X1))return Ue();t={verify:Zh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof Bl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ql)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Hl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Gl)return{fieldPath:l.field.canonicalString(),increment:u.Pe};throw Ue()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:mV(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue()})(n,e.precondition)),t}function Bg(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?zn.updateTime(xr(o.updateTime)):o.exists!==void 0?zn.exists(o.exists):zn.none()})(e.currentDocument):zn.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(l,u){let d=null;if("setToServerValue"in u)Qe(u.setToServerValue==="REQUEST_TIME"),d=new Bl;else if("appendMissingElements"in u){const y=u.appendMissingElements.values||[];d=new ql(y)}else if("removeAllFromArray"in u){const y=u.removeAllFromArray.values||[];d=new Hl(y)}else"increment"in u?d=new Gl(l,u.increment):Ue();const p=un.fromServerFormat(u.fieldPath);return new ev(p,d)})(n,s))):[];if(e.update){e.update.name;const s=_a(n,e.update.name),o=new ur({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(d){const p=d.fieldPaths||[];return new $r(p.map((y=>un.fromServerFormat(y))))})(e.updateMask);return new Fi(s,o,l,t,r)}return new ac(s,o,t,r)}if(e.delete){const s=_a(n,e.delete);return new Bu(s,t)}if(e.verify){const s=_a(n,e.verify);return new X1(s,t)}return Ue()}function vV(n,e){return n&&n.length>0?(Qe(e!==void 0),n.map((t=>(function(s,o){let l=s.updateTime?xr(s.updateTime):xr(o);return l.isEqual(Xe.min())&&(l=xr(o)),new rV(l,s.transformResults||[])})(t,e)))):[]}function aS(n,e){return{documents:[sS(n,e.path)]}}function lS(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sS(n,s);const o=(function(p){if(p.length!==0)return dS(Ht.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((y=>(function(T){return{field:Al(T.field),direction:wV(T.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Ug(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{_t:t,parent:s}}function cS(n){let e=iS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Qe(r===1);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=(function(w){const T=uS(w);return T instanceof Ht&&Yy(T)?T.getFilters():[T]})(t.where));let l=[];t.orderBy&&(l=(function(w){return w.map((T=>(function(P){return new Su(Cl(P.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(t.orderBy));let u=null;t.limit&&(u=(function(w){let T;return T=typeof w=="object"?w.value:w,Cf(T)?null:T})(t.limit));let d=null;t.startAt&&(d=(function(w){const T=!!w.before,S=w.values||[];return new bo(S,T)})(t.startAt));let p=null;return t.endAt&&(p=(function(w){const T=!w.before,S=w.values||[];return new bo(S,T)})(t.endAt)),j1(e,s,l,o,u,"F",d,p)}function _V(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Cl(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Cl(t.unaryFilter.field);return At.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Cl(t.unaryFilter.field);return At.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Cl(t.unaryFilter.field);return At.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}})(n):n.fieldFilter!==void 0?(function(t){return At.create(Cl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ht.create(t.compositeFilter.filters.map((r=>uS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue()}})(t.compositeFilter.op))})(n):Ue()}function wV(n){return dV[n]}function EV(n){return hV[n]}function TV(n){return fV[n]}function Al(n){return{fieldPath:n.canonicalString()}}function Cl(n){return un.fromServerFormat(n.fieldPath)}function dS(n){return n instanceof At?(function(t){if(t.op==="=="){if($E(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NAN"}};if(UE(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($E(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NOT_NAN"}};if(UE(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Al(t.field),op:EV(t.op),value:t.value}}})(n):n instanceof Ht?(function(t){const r=t.getFilters().map((s=>dS(s)));return r.length===1?r[0]:{compositeFilter:{op:TV(t.op),filters:r}}})(n):Ue()}function xV(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ai{constructor(e,t,r,s,o=Xe.min(),l=Xe.min(),u=wn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class fS{constructor(e){this.ct=e}}function IV(n,e){let t;if(e.document)t=gV(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ie.fromSegments(e.noDocument.path),s=Da(e.noDocument.readTime);t=pn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ue();{const r=Ie.fromSegments(e.unknownDocument.path),s=Da(e.unknownDocument.version);t=pn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const o=new dn(s[0],s[1]);return Xe.fromTimestamp(o)})(e.readTime)),t}function iT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,l){return{name:Zh(o,l.key),fields:l.data.value.mapValue.fields,updateTime:Kl(o,l.version.toTimestamp()),createTime:Kl(o,l.createTime.toTimestamp())}})(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Oa(e.version)};else{if(!e.isUnknownDocument())return Ue();r.unknownDocument={path:t.path.toArray(),version:Oa(e.version)}}return r}function tf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Oa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Da(n){const e=new dn(n.seconds,n.nanoseconds);return Xe.fromTimestamp(e)}function ha(n,e){const t=(e.baseMutations||[]).map((o=>Bg(n.ct,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>Bg(n.ct,o))),s=dn.fromMillis(e.localWriteTimeMs);return new tv(e.batchId,s,t,r)}function tu(n){const e=Da(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Da(n.lastLimboFreeSnapshotVersion):Xe.min();let r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){return Qe(o.documents.length===1),ts($u(iS(o.documents[0])))})(n.query):(function(o){return ts(cS(o))})(n.query),new Ai(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,wn.fromBase64String(n.resumeToken))}function pS(n,e){const t=Oa(e.snapshotVersion),r=Oa(e.lastLimboFreeSnapshotVersion);let s;s=Yh(e.target)?aS(n.ct,e.target):lS(n.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Na(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function mS(n){const e=cS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xh(e,e.limit,"L"):e}function zm(n,e){return new rv(e.largestBatchId,Bg(n.ct,e.overlayMutation))}function oT(n,e){const t=e.path.lastSegment();return[n,Tr(e.path.popLast()),t]}function aT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Oa(r.readTime),documentKey:Tr(r.documentKey.path),largestBatchId:r.largestBatchId}}class bV{getBundleMetadata(e,t){return lT(e).get(t).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Da(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,t){return lT(e).put((function(s){return{bundleId:s.id,createTime:Oa(xr(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return cT(e).get(t).next((r=>{if(r)return(function(o){return{name:o.name,query:mS(o.bundledQuery),readTime:Da(o.readTime)}})(r)}))}saveNamedQuery(e,t){return cT(e).put((function(s){return{name:s.name,readTime:Oa(xr(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function lT(n){return Cn(n,"bundles")}function cT(n){return Cn(n,"namedQueries")}class Lf{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new Lf(e,r)}getOverlay(e,t){return Bc(e).get(oT(this.userId,t)).next((r=>r?zm(this.serializer,r):null))}getOverlays(e,t){const r=Qs();return G.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((o,l)=>{const u=new rv(t,l);s.push(this.ht(e,u))})),G.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((l=>s.add(Tr(l.getCollectionPath()))));const o=[];return s.forEach((l=>{const u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(Bc(e).j("collectionPathOverlayIndex",u))})),G.waitFor(o)}getOverlaysForCollection(e,t,r){const s=Qs(),o=Tr(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Bc(e).U("collectionPathOverlayIndex",l).next((u=>{for(const d of u){const p=zm(this.serializer,d);s.set(p.getKey(),p)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const o=Qs();let l;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bc(e).J({index:"collectionGroupOverlayIndex",range:u},((d,p,y)=>{const w=zm(this.serializer,p);o.size()<s||w.largestBatchId===l?(o.set(w.getKey(),w),l=w.largestBatchId):y.done()})).next((()=>o))}ht(e,t){return Bc(e).put((function(s,o,l){const[u,d,p]=oT(o,l.mutation.key);return{userId:o,collectionPath:d,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:ef(s.ct,l.mutation)}})(this.serializer,this.userId,t))}}function Bc(n){return Cn(n,"documentOverlays")}class SV{Pt(e){return Cn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((t=>{const r=t?.value;return r?wn.fromUint8Array(r):wn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class fa{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(on(e.integerValue));else if("doubleValue"in e){const r=on(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Tu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Li(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(xo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?k1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Nf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ue()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const s of Object.keys(r))this.Vt(s,t),this.Tt(r[s],t)}wt(e,t){var r,s;const o=e.fields||{};this.dt(t,53);const l="value",u=((s=(r=o[l].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(t,15),t.At(on(u)),this.Vt(l,t),this.Tt(o[l],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const s of r)this.Tt(s,t)}yt(e,t){this.dt(t,37),Ie.fromName(e).path.forEach((r=>{this.dt(t,60),this.Dt(r,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}fa.vt=new fa;function kV(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function uT(n){const e=64-(function(r){let s=0;for(let o=0;o<8;++o){const l=kV(255&r[o]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class RV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=t.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=t.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const t=this.qt(e),r=uT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Kt(e){const t=this.qt(e),r=uT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class AV{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class CV{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class qc{constructor(){this.jt=new RV,this.Ht=new AV(this.jt),this.Jt=new CV(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class pa{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new pa(this.indexId,this.documentKey,this.arrayValue,r)}}function ao(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=dT(n.arrayValue,e.arrayValue),t!==0?t:(t=dT(n.directionalValue,e.directionalValue),t!==0?t:Ie.comparator(n.documentKey,e.documentKey)))}function dT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}class hT{constructor(e){this.Xt=new Gt(((t,r)=>un.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Qe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Ng(e);if(t!==void 0&&!this.sn(t))return!1;const r=ua(e);let s=new Set,o=0,l=0;for(;o<r.length&&this.sn(r[o]);++o)s=s.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){const u=this.Xt.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=r[o];if(!this.on(u,d)||!this._n(this.en[l++],d))return!1}++o}for(;o<r.length;++o){const u=r[o];if(l>=this.en.length||!this._n(this.en[l++],u))return!1}return!0}an(){if(this.nn)return null;let e=new Gt(un.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Sh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Sh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Sh(r.field,r.dir==="asc"?0:1)));return new Qh(Qh.UNKNOWN_ID,this.collectionId,t,Eu.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function gS(n){var e,t;if(Qe(n instanceof At||n instanceof Ht),n instanceof At){if(n instanceof L1){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((o=>At.create(n.field,"==",o))))||[];return Ht.create(s,"or")}return n}const r=n.filters.map((s=>gS(s)));return Ht.create(r,n.op)}function PV(n){if(n.getFilters().length===0)return[];const e=Gg(gS(n));return Qe(yS(e)),qg(e)||Hg(e)?[e]:e.getFilters()}function qg(n){return n instanceof At}function Hg(n){return n instanceof Ht&&Yy(n)}function yS(n){return qg(n)||Hg(n)||(function(t){if(t instanceof Ht&&Lg(t)){for(const r of t.getFilters())if(!qg(r)&&!Hg(r))return!1;return!0}return!1})(n)}function Gg(n){if(Qe(n instanceof At||n instanceof Ht),n instanceof At)return n;if(n.filters.length===1)return Gg(n.filters[0]);const e=n.filters.map((r=>Gg(r)));let t=Ht.create(e,n.op);return t=nf(t),yS(t)?t:(Qe(t instanceof Ht),Qe(zl(t)),Qe(t.filters.length>1),t.filters.reduce(((r,s)=>ov(r,s))))}function ov(n,e){let t;return Qe(n instanceof At||n instanceof Ht),Qe(e instanceof At||e instanceof Ht),t=n instanceof At?e instanceof At?(function(s,o){return Ht.create([s,o],"and")})(n,e):fT(n,e):e instanceof At?fT(e,n):(function(s,o){if(Qe(s.filters.length>0&&o.filters.length>0),zl(s)&&zl(o))return O1(s,o.getFilters());const l=Lg(s)?s:o,u=Lg(s)?o:s,d=l.filters.map((p=>ov(p,u)));return Ht.create(d,"or")})(n,e),nf(t)}function fT(n,e){if(zl(e))return O1(e,n.getFilters());{const t=e.filters.map((r=>ov(n,r)));return Ht.create(t,"or")}}function nf(n){if(Qe(n instanceof At||n instanceof Ht),n instanceof At)return n;const e=n.getFilters();if(e.length===1)return nf(e[0]);if(P1(n))return n;const t=e.map((s=>nf(s))),r=[];return t.forEach((s=>{s instanceof At?r.push(s):s instanceof Ht&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Ht.create(r,n.op)}class NV{constructor(){this.un=new av}addToCollectionParentIndex(e,t){return this.un.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(rs.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class av{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Gt(Vt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Gt(Vt.comparator)).toArray()}}const lh=new Uint8Array(0);class OV{constructor(e,t){this.databaseId=t,this.cn=new av,this.ln=new Oo((r=>Na(r)),((r,s)=>Uu(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const o={collectionId:r,parent:Tr(s)};return pT(e).put(o)}return G.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[p1(t),""],!1,!0);return pT(e).U(s).next((o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Ws(l.parent))}return r}))}addFieldIndex(e,t){const r=Hc(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=r.add(s);if(t.indexState){const l=Il(e);return o.next((u=>{l.put(aT(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const r=Hc(e),s=Il(e),o=xl(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Hc(e),r=xl(e),s=Il(e);return t.j().next((()=>r.j())).next((()=>s.j()))}createTargetIndexes(e,t){return G.forEach(this.hn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const o=new hT(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const r=xl(e);let s=!0;const o=new Map;return G.forEach(this.hn(t),(l=>this.Pn(e,l).next((u=>{s&&(s=!!u),o.set(l,u)})))).next((()=>{if(s){let l=Tt();const u=[];return G.forEach(o,((d,p)=>{ce("IndexedDbIndexManager",`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((ae=>`${ae.fieldPath}:${ae.kind}`)).join(",")}`})(d)} to execute ${Na(t)}`);const y=(function(Q,ae){const de=Ng(ae);if(de===void 0)return null;for(const me of Jh(Q,de.fieldPath))switch(me.op){case"array-contains-any":return me.value.arrayValue.values||[];case"array-contains":return[me.value]}return null})(p,d),w=(function(Q,ae){const de=new Map;for(const me of ua(ae))for(const N of Jh(Q,me.fieldPath))switch(N.op){case"==":case"in":de.set(me.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return de.set(me.fieldPath.canonicalString(),N.value),Array.from(de.values())}return null})(p,d),T=(function(Q,ae){const de=[];let me=!0;for(const N of ua(ae)){const I=N.kind===0?GE(Q,N.fieldPath,Q.startAt):KE(Q,N.fieldPath,Q.startAt);de.push(I.value),me&&(me=I.inclusive)}return new bo(de,me)})(p,d),S=(function(Q,ae){const de=[];let me=!0;for(const N of ua(ae)){const I=N.kind===0?KE(Q,N.fieldPath,Q.endAt):GE(Q,N.fieldPath,Q.endAt);de.push(I.value),me&&(me=I.inclusive)}return new bo(de,me)})(p,d),P=this.In(d,p,T),M=this.In(d,p,S),O=this.Tn(d,p,w),X=this.En(d.indexId,y,P,T.inclusive,M,S.inclusive,O);return G.forEach(X,(W=>r.G(W,t.limit).next((Q=>{Q.forEach((ae=>{const de=Ie.fromSegments(ae.documentKey);l.has(de)||(l=l.add(de),u.push(de))}))}))))})).next((()=>u))}return G.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=PV(Ht.create(e.filters,"and")).map((r=>Vg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,r,s,o,l,u){const d=(t!=null?t.length:1)*Math.max(r.length,o.length),p=d/(t!=null?t.length:1),y=[];for(let w=0;w<d;++w){const T=t?this.dn(t[w/p]):lh,S=this.An(e,T,r[w%p],s),P=this.Rn(e,T,o[w%p],l),M=u.map((O=>this.An(e,T,O,!0)));y.push(...this.createRange(S,P,M))}return y}An(e,t,r,s){const o=new pa(e,Ie.empty(),t,r);return s?o:o.Zt()}Rn(e,t,r,s){const o=new pa(e,Ie.empty(),t,r);return s?o.Zt():o}Pn(e,t){const r=new hT(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let l=null;for(const u of o)r.rn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l}))}getIndexType(e,t){let r=2;const s=this.hn(t);return G.forEach(s,(o=>this.Pn(e,o).next((l=>{l?r!==0&&l.fields.length<(function(d){let p=new Gt(un.comparator),y=!1;for(const w of d.filters)for(const T of w.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?y=!0:p=p.add(T.field));for(const w of d.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(y?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&r===2?1:r))}Vn(e,t){const r=new qc;for(const s of ua(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const l=r.Yt(s.kind);fa.vt.It(o,l)}return r.zt()}dn(e){const t=new qc;return fa.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new qc;return fa.vt.It(Pa(this.databaseId,t),r.Yt((function(o){const l=ua(o);return l.length===0?0:l[l.length-1].kind})(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let s=[];s.push(new qc);let o=0;for(const l of ua(e)){const u=r[o++];for(const d of s)if(this.fn(t,l.fieldPath)&&bu(u))s=this.gn(s,l,u);else{const p=d.Yt(l.kind);fa.vt.It(u,p)}}return this.pn(s)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const s=[...e],o=[];for(const l of r.arrayValue.values||[])for(const u of s){const d=new qc;d.seed(u.zt()),fa.vt.It(l,d.Yt(t.kind)),o.push(d)}return o}fn(e,t){return!!e.filters.find((r=>r instanceof At&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Hc(e),s=Il(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next((o=>{const l=[];return G.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{l.push((function(y,w){const T=w?new Eu(w.sequenceNumber,new rs(Da(w.readTime),new Ie(Ws(w.documentKey)),w.largestBatchId)):Eu.empty(),S=y.fields.map((([P,M])=>new Sh(un.fromServerFormat(P),M)));return new Qh(y.indexId,y.collectionGroup,S,T)})(u,d))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const o=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:ht(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Hc(e),o=Il(e);return this.yn(e).next((l=>s.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((u=>G.forEach(u,(d=>o.put(aT(d.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,((s,o)=>{const l=r.get(s.collectionGroup);return(l?G.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(r.set(s.collectionGroup,u),G.forEach(u,(d=>this.wn(e,s,d).next((p=>{const y=this.Sn(o,d);return p.isEqual(y)?G.resolve():this.bn(e,o,d,p,y)})))))))}))}Dn(e,t,r,s){return xl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,s){return xl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=xl(e);let o=new Gt(ao);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},((l,u)=>{o=o.add(new pa(r.indexId,t,u.arrayValue,u.directionalValue))})).next((()=>o))}Sn(e,t){let r=new Gt(ao);const s=this.Vn(t,e);if(s==null)return r;const o=Ng(t);if(o!=null){const l=e.data.field(o.fieldPath);if(bu(l))for(const u of l.arrayValue.values||[])r=r.add(new pa(t.indexId,e.key,this.dn(u),s))}else r=r.add(new pa(t.indexId,e.key,lh,s));return r}bn(e,t,r,s,o){ce("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return(function(d,p,y,w,T){const S=d.getIterator(),P=p.getIterator();let M=Tl(S),O=Tl(P);for(;M||O;){let X=!1,W=!1;if(M&&O){const Q=y(M,O);Q<0?W=!0:Q>0&&(X=!0)}else M!=null?W=!0:X=!0;X?(w(O),O=Tl(P)):W?(T(M),M=Tl(S)):(M=Tl(S),O=Tl(P))}})(s,o,ao,(u=>{l.push(this.Dn(e,t,r,u))}),(u=>{l.push(this.vn(e,t,r,u))})),G.waitFor(l)}yn(e){let t=1;return Il(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,u)=>ao(l,u))).filter(((l,u,d)=>!u||ao(l,d[u-1])!==0));const s=[];s.push(e);for(const l of r){const u=ao(l,e),d=ao(l,t);if(u===0)s[0]=e.Zt();else if(u>0&&d<0)s.push(l),s.push(l.Zt());else if(d>0)break}s.push(t);const o=[];for(let l=0;l<s.length;l+=2){if(this.Cn(s[l],s[l+1]))return[];const u=[s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,lh,[]],d=[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,lh,[]];o.push(IDBKeyRange.bound(u,d))}return o}Cn(e,t){return ao(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mT)}getMinOffset(e,t){return G.mapArray(this.hn(t),(r=>this.Pn(e,r).next((s=>s||Ue())))).next(mT)}}function pT(n){return Cn(n,"collectionParents")}function xl(n){return Cn(n,"indexEntries")}function Hc(n){return Cn(n,"indexConfiguration")}function Il(n){return Cn(n,"indexState")}function mT(n){Qe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Gy(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new rs(e.readTime,e.documentKey,t)}const gT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fr(e,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vS(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let u=0;const d=r.J({range:l},((y,w,T)=>(u++,T.delete())));o.push(d.next((()=>{Qe(u===1)})));const p=[];for(const y of t.mutations){const w=E1(e,y.key.path,t.batchId);o.push(s.delete(w)),p.push(y.key)}return G.waitFor(o).next((()=>p))}function rf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ue();e=n.noDocument}return JSON.stringify(e).length}Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(41943040,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);class jf{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,t,r,s){Qe(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new jf(o,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lo(e).J({index:"userMutationsIndex",range:r},((s,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const o=Pl(e),l=lo(e);return l.add({}).next((u=>{Qe(typeof u=="number");const d=new tv(u,t,r,s),p=(function(S,P,M){const O=M.baseMutations.map((W=>ef(S.ct,W))),X=M.mutations.map((W=>ef(S.ct,W)));return{userId:P,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:O,mutations:X}})(this.serializer,this.userId,d),y=[];let w=new Gt(((T,S)=>ht(T.canonicalString(),S.canonicalString())));for(const T of s){const S=E1(this.userId,T.key.path,u);w=w.add(T.key.path.popLast()),y.push(l.put(p)),y.push(o.put(S,vj))}return w.forEach((T=>{y.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Fn[u]=d.keys()})),G.waitFor(y).next((()=>d))}))}lookupMutationBatch(e,t){return lo(e).get(t).next((r=>r?(Qe(r.userId===this.userId),ha(this.serializer,r)):null))}Mn(e,t){return this.Fn[t]?G.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Fn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return lo(e).J({index:"userMutationsIndex",range:s},((l,u,d)=>{u.userId===this.userId&&(Qe(u.batchId>=r),o=ha(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lo(e).J({index:"userMutationsIndex",range:t,reverse:!0},((s,o,l)=>{r=o.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lo(e).U("userMutationsIndex",t).next((r=>r.map((s=>ha(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=kh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=[];return Pl(e).J({range:s},((l,u,d)=>{const[p,y,w]=l,T=Ws(y);if(p===this.userId&&t.path.isEqual(T))return lo(e).get(w).next((S=>{if(!S)throw Ue();Qe(S.userId===this.userId),o.push(ha(this.serializer,S))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(ht);const s=[];return t.forEach((o=>{const l=kh(this.userId,o.path),u=IDBKeyRange.lowerBound(l),d=Pl(e).J({range:u},((p,y,w)=>{const[T,S,P]=p,M=Ws(S);T===this.userId&&o.path.isEqual(M)?r=r.add(P):w.done()}));s.push(d)})),G.waitFor(s).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,o=kh(this.userId,r),l=IDBKeyRange.lowerBound(o);let u=new Gt(ht);return Pl(e).J({range:l},((d,p,y)=>{const[w,T,S]=d,P=Ws(T);w===this.userId&&r.isPrefixOf(P)?P.length===s&&(u=u.add(S)):y.done()})).next((()=>this.xn(e,u)))}xn(e,t){const r=[],s=[];return t.forEach((o=>{s.push(lo(e).get(o).next((l=>{if(l===null)throw Ue();Qe(l.userId===this.userId),r.push(ha(this.serializer,l))})))})),G.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return vS(e._e,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),G.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return Pl(e).J({range:r},((o,l,u)=>{if(o[0]===this.userId){const d=Ws(o[1]);s.push(d)}else u.done()})).next((()=>{Qe(s.length===0)}))}))}containsKey(e,t){return _S(e,this.userId,t)}Nn(e){return wS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function _S(n,e,t){const r=kh(e,t.path),s=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return Pl(n).J({range:o,H:!0},((u,d,p)=>{const[y,w,T]=u;y===e&&w===s&&(l=!0),p.done()})).next((()=>l))}function lo(n){return Cn(n,"mutations")}function Pl(n){return Cn(n,"documentMutations")}function wS(n){return Cn(n,"mutationQueues")}class Ma{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ma(0)}static kn(){return new Ma(-1)}}class DV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const r=new Ma(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((t=>Xe.fromTimestamp(new dn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.qn(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Qn(e,s))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>bl(e).delete(t.targetId))).next((()=>this.qn(e))).next((r=>(Qe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,t,r){let s=0;const o=[];return bl(e).J(((l,u)=>{const d=tu(u);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>G.waitFor(o))).next((()=>s))}forEachTarget(e,t){return bl(e).J(((r,s)=>{const o=tu(s);t(o)}))}qn(e){return yT(e).get("targetGlobalKey").next((t=>(Qe(t!==null),t)))}Qn(e,t){return yT(e).put("targetGlobalKey",t)}Kn(e,t){return bl(e).put(pS(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Na(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return bl(e).J({range:s,index:"queryTargetsIndex"},((l,u,d)=>{const p=tu(u);Uu(t,p.target)&&(o=p,d.done())})).next((()=>o))}addMatchingKeys(e,t,r){const s=[],o=fo(e);return t.forEach((l=>{const u=Tr(l.path);s.push(o.put({targetId:r,path:u})),s.push(this.referenceDelegate.addReference(e,r,l))})),G.waitFor(s)}removeMatchingKeys(e,t,r){const s=fo(e);return G.forEach(t,(o=>{const l=Tr(o.path);return G.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,t){const r=fo(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=fo(e);let o=Tt();return s.J({range:r,H:!0},((l,u,d)=>{const p=Ws(l[1]),y=new Ie(p);o=o.add(y)})).next((()=>o))}containsKey(e,t){const r=Tr(t.path),s=IDBKeyRange.bound([r],[p1(r)],!1,!0);let o=0;return fo(e).J({index:"documentTargetsIndex",H:!0,range:s},(([l,u],d,p)=>{l!==0&&(o++,p.done())})).next((()=>o>0))}ot(e,t){return bl(e).get(t).next((r=>r?tu(r):null))}}function bl(n){return Cn(n,"targets")}function yT(n){return Cn(n,"targetGlobal")}function fo(n){return Cn(n,"targetDocuments")}function vT([n,e],[t,r]){const s=ht(n,t);return s===0?ht(e,r):s}class MV{constructor(e){this.Un=e,this.buffer=new Gt(vT),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){No(t)?ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Po(t)}await this.Hn(3e5)}))}}class jV{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Ur.oe);const r=new MV(t);return this.Jn.forEachTarget(e,(s=>r.zn(s.sequenceNumber))).next((()=>this.Jn.Zn(e,(s=>r.zn(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(gT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gT):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,s,o,l,u,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s)))).next((w=>(r=w,u=Date.now(),this.removeTargets(e,r,t)))).next((w=>(o=w,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(p=Date.now(),kl()<=bt.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${w} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:w}))))}}function VV(n,e){return new jV(n,e)}class FV{constructor(e,t){this.db=e,this.garbageCollector=VV(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}er(e){let t=0;return this.Zn(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((r,s)=>t(s)))}addReference(e,t,r){return ch(e,r)}removeReference(e,t,r){return ch(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ch(e,t)}nr(e,t){return(function(s,o){let l=!1;return wS(s).Y((u=>_S(s,u,o).next((d=>(d&&(l=!0),G.resolve(!d)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.tr(e,((l,u)=>{if(u<=t){const d=this.nr(e,l).next((p=>{if(!p)return o++,r.getEntry(e,l).next((()=>(r.removeEntry(l,Xe.min()),fo(e).delete((function(w){return[0,Tr(w.path)]})(l)))))}));s.push(d)}})).next((()=>G.waitFor(s))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ch(e,t)}tr(e,t){const r=fo(e);let s,o=Ur.oe;return r.J({index:"documentTargetsIndex"},(([l,u],{path:d,sequenceNumber:p})=>{l===0?(o!==Ur.oe&&t(new Ie(Ws(s)),o),o=p,s=d):o=Ur.oe})).next((()=>{o!==Ur.oe&&t(new Ie(Ws(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ch(n,e){return fo(n).put((function(r,s){return{targetId:0,path:Tr(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class ES{constructor(){this.changes=new Oo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return aa(e).put(r)}removeEntry(e,t,r){return aa(e).delete((function(o,l){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],tf(l),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.rr(e,r))))}getEntry(e,t){let r=pn.newInvalidDocument(t);return aa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Gc(t))},((s,o)=>{r=this.ir(t,o)})).next((()=>r))}sr(e,t){let r={size:0,document:pn.newInvalidDocument(t)};return aa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Gc(t))},((s,o)=>{r={document:this.ir(t,o),size:rf(o)}})).next((()=>r))}getEntries(e,t){let r=Jr();return this._r(e,t,((s,o)=>{const l=this.ir(s,o);r=r.insert(s,l)})).next((()=>r))}ar(e,t){let r=Jr(),s=new Xt(Ie.comparator);return this._r(e,t,((o,l)=>{const u=this.ir(o,l);r=r.insert(o,u),s=s.insert(o,rf(l))})).next((()=>({documents:r,ur:s})))}_r(e,t,r){if(t.isEmpty())return G.resolve();let s=new Gt(ET);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Gc(s.first()),Gc(s.last())),l=s.getIterator();let u=l.getNext();return aa(e).J({index:"documentKeyIndex",range:o},((d,p,y)=>{const w=Ie.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;u&&ET(u,w)<0;)r(u,null),u=l.getNext();u&&u.isEqual(w)&&(r(u,p),u=l.hasNext()?l.getNext():null),u?y.$(Gc(u)):y.done()})).next((()=>{for(;u;)r(u,null),u=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,o){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),tf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return aa(e).U(IDBKeyRange.bound(u,d,!0)).next((p=>{o?.incrementDocumentReadCount(p.length);let y=Jr();for(const w of p){const T=this.ir(Ie.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);T.isFoundDocument()&&(zu(t,T)||s.has(T.key))&&(y=y.insert(T.key,T))}return y}))}getAllFromCollectionGroup(e,t,r,s){let o=Jr();const l=wT(t,r),u=wT(t,rs.max());return aa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,u,!0)},((d,p,y)=>{const w=this.ir(Ie.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(w.key,w),o.size===s&&y.done()})).next((()=>o))}newChangeBuffer(e){return new $V(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return _T(e).get("remoteDocumentGlobalKey").next((t=>(Qe(!!t),t)))}rr(e,t){return _T(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=IV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Xe.min())))return r}return pn.newInvalidDocument(e)}}function TS(n){return new UV(n)}class $V extends ES{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Oo((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new Gt(((o,l)=>ht(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const u=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,u.readTime)),l.isValidDocument()){const d=iT(this.cr.serializer,l);s=s.add(o.path.popLast());const p=rf(d);r+=p-u.size,t.push(this.cr.addEntry(e,o,d))}else if(r-=u.size,this.trackRemovals){const d=iT(this.cr.serializer,l.convertToNoDocument(Xe.min()));t.push(this.cr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.cr.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:r,ur:s})=>(s.forEach(((o,l)=>{this.lr.set(o,{size:l,readTime:r.get(o).readTime})})),r)))}}function _T(n){return Cn(n,"remoteDocumentGlobal")}function aa(n){return Cn(n,"remoteDocumentsV14")}function Gc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wT(n,e){const t=e.documentKey.path.toArray();return[n,tf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ET(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(s=ht(t[o],r[o]),s)return s;return s=ht(t.length,r.length),s||(s=ht(t[t.length-2],r[r.length-2]),s||ht(t[t.length-1],r[r.length-1]))}class zV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xS{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&cu(r.mutation,s,$r.empty(),dn.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Tt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Tt()){const s=Qs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=Zc();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Qs();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Tt())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,r,s){let o=Jr();const l=lu(),u=(function(){return lu()})();return t.forEach(((d,p)=>{const y=r.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof Fi)?o=o.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),cu(y.mutation,p,y.mutation.getFieldMask(),dn.now())):l.set(p.key,$r.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((p,y)=>l.set(p,y))),t.forEach(((p,y)=>{var w;return u.set(p,new zV(y,(w=l.get(p))!==null&&w!==void 0?w:null))})),u)))}recalculateAndSaveOverlays(e,t){const r=lu();let s=new Xt(((l,u)=>l-u)),o=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((d=>{const p=t.get(d);if(p===null)return;let y=r.get(d)||$r.empty();y=u.applyToLocalView(p,y),r.set(d,y);const w=(s.get(u.batchId)||Tt()).add(d);s=s.insert(u.batchId,w)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),p=d.key,y=d.value,w=B1();y.forEach((T=>{if(!o.has(T)){const S=Y1(t.get(T),r.get(T));S!==null&&w.set(T,S),o=o.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return G.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return Ie.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):G.resolve(Qs());let u=-1,d=o;return l.next((p=>G.forEach(p,((y,w)=>(u<w.largestBatchId&&(u=w.largestBatchId),o.get(y)?G.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{d=d.insert(y,T)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,d,p,Tt()))).next((y=>({batchId:u,changes:z1(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((r=>{let s=Zc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=Zc();return this.indexManager.getCollectionParents(e,o).next((u=>G.forEach(u,(d=>{const p=(function(w,T){return new za(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((y=>{y.forEach(((w,T)=>{l=l.insert(w,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((d,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,pn.newInvalidDocument(y)))}));let u=Zc();return l.forEach(((d,p)=>{const y=o.get(d);y!==void 0&&cu(y.mutation,p,$r.empty(),dn.now()),zu(t,p)&&(u=u.insert(d,p))})),u}))}}class BV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return G.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:xr(s.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(s){return{name:s.name,query:mS(s.bundledQuery),readTime:xr(s.readTime)}})(t)),G.resolve()}}class qV{constructor(){this.overlays=new Xt(Ie.comparator),this.Ir=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qs();return G.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.ht(e,t,o)})),G.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const s=Qs(),o=t.length+1,l=new Ie(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return G.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Xt(((p,y)=>p-y));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=Qs(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const u=Qs(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,y)=>u.set(p,y))),!(u.size()>=s)););return G.resolve(u)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new rv(t,r));let o=this.Ir.get(t);o===void 0&&(o=Tt(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}}class HV{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class lv{constructor(){this.Tr=new Gt(Fn.Er),this.dr=new Gt(Fn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Fn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new Fn(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new Ie(new Vt([])),r=new Fn(t,e),s=new Fn(t,e+1),o=[];return this.dr.forEachInRange([r,s],(l=>{this.Vr(l),o.push(l.key)})),o}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ie(new Vt([])),r=new Fn(t,e),s=new Fn(t,e+1);let o=Tt();return this.dr.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Fn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Fn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ie.comparator(e.key,t.key)||ht(e.wr,t.wr)}static Ar(e,t){return ht(e.wr,t.wr)||Ie.comparator(e.key,t.key)}}class GV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Gt(Fn.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new tv(o,t,r,s);this.mutationQueue.push(l);for(const u of s)this.br=this.br.add(new Fn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return G.resolve(l)}lookupMutationBatch(e,t){return G.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.vr(r),o=s<0?0:s;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fn(t,0),s=new Fn(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,s],(l=>{const u=this.Dr(l.wr);o.push(u)})),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(ht);return t.forEach((s=>{const o=new Fn(s,0),l=new Fn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],(u=>{r=r.add(u.wr)}))})),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Ie.isDocumentKey(o)||(o=o.child(""));const l=new Fn(new Ie(o),0);let u=new Gt(ht);return this.br.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(u=u.add(d.wr)),!0)}),l),G.resolve(this.Cr(u))}Cr(e){const t=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Qe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return G.forEach(t.mutations,(s=>{const o=new Fn(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new Fn(t,0),s=this.br.firstAfterOrEqual(r);return G.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class KV{constructor(e){this.Mr=e,this.docs=(function(){return new Xt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=Jr();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():pn.newInvalidDocument(s))})),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Jr();const l=t.path,u=new Ie(l.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||Gy(g1(y),r)<=0||(s.has(y.key)||zu(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ue()}Or(e,t){return G.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new WV(this)}getSize(e){return G.resolve(this.size)}}class WV extends ES{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),G.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class QV{constructor(e){this.persistence=e,this.Nr=new Oo((t=>Na(t)),Uu),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lv,this.targetCount=0,this.kr=Ma.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,s)=>t(s))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),G.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ma(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Kn(t),G.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Nr.forEach(((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),G.waitFor(o).next((()=>s))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),G.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.Br.containsKey(t))}}class IS{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ur(0),this.Kr=!1,this.Kr=!0,this.$r=new HV,this.referenceDelegate=e(this),this.Ur=new QV(this),this.indexManager=new NV,this.remoteDocumentCache=(function(s){return new KV(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new fS(t),this.Gr=new BV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new GV(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const s=new YV(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((o=>this.referenceDelegate.jr(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Hr(e,t){return G.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class YV extends v1{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Jr=new lv,this.Yr=null}static Zr(e){return new Vf(e)}get Xr(){if(this.Yr)return this.Yr;throw Ue()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),G.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.Xr.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,(r=>{const s=Ie.fromPath(r);return this.ei(e,s).next((o=>{o||t.removeEntry(s,Xe.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return G.or([()=>G.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class JV{constructor(e){this.serializer=e}O(e,t,r,s){const o=new Af("createOrUpgrade",t);r<1&&s>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ME,{unique:!0}),d.createObjectStore("documentMutations")})(e),TT(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let l=G.resolve();return r<3&&s>=3&&(r!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),TT(e)),l=l.next((()=>(function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xe.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)})(o)))),r<4&&s>=4&&(r!==0&&(l=l.next((()=>(function(d,p){return p.store("mutations").U().next((y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ME,{unique:!0});const w=p.store("mutations"),T=y.map((S=>w.put(S)));return G.waitFor(T)}))})(e,o)))),l=l.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&s>=5&&(l=l.next((()=>this.ni(o)))),r<6&&s>=6&&(l=l.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(o))))),r<7&&s>=7&&(l=l.next((()=>this.ii(o)))),r<8&&s>=8&&(l=l.next((()=>this.si(e,o)))),r<9&&s>=9&&(l=l.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(l=l.next((()=>this.oi(o)))),r<11&&s>=11&&(l=l.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&s>=12&&(l=l.next((()=>{(function(d){const p=d.createObjectStore("documentOverlays",{keyPath:Cj});p.createIndex("collectionPathOverlayIndex",Pj,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",Nj,{unique:!1})})(e)}))),r<13&&s>=13&&(l=l.next((()=>(function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:_j});p.createIndex("documentKeyIndex",wj),p.createIndex("collectionGroupIndex",Ej)})(e))).next((()=>this._i(e,o))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&s>=14&&(l=l.next((()=>this.ai(e,o)))),r<15&&s>=15&&(l=l.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Sj}).createIndex("sequenceNumberIndex",kj,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Rj}).createIndex("documentKeyIndex",Aj,{unique:!1})})(e)))),r<16&&s>=16&&(l=l.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),r<17&&s>=17&&(l=l.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),l}ri(e){let t=0;return e.store("remoteDocuments").J(((r,s)=>{t+=rf(s)})).next((()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next((s=>G.forEach(s,(o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",l).next((u=>G.forEach(u,(d=>{Qe(d.userId===o.userId);const p=ha(this.serializer,d);return vS(e,o.userId,p).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((s=>{const o=[];return r.J(((l,u)=>{const d=new Vt(l),p=(function(w){return[0,Tr(w)]})(d);o.push(t.get(p).next((y=>y?G.resolve():(w=>t.put({targetId:0,path:Tr(w),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>G.waitFor(o)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:bj});const r=t.store("collectionParents"),s=new av,o=l=>{if(s.add(l)){const u=l.lastSegment(),d=l.popLast();return r.put({collectionId:u,parent:Tr(d)})}};return t.store("remoteDocuments").J({H:!0},((l,u)=>{const d=new Vt(l);return o(d.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([l,u,d],p)=>{const y=Ws(u);return o(y.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((r,s)=>{const o=tu(s),l=pS(this.serializer,o);return t.put(l)}))}_i(e,t){const r=t.store("remoteDocuments"),s=[];return r.J(((o,l)=>{const u=t.store("remoteDocumentsV14"),d=(function(w){return w.document?new Ie(Vt.fromString(w.document.name).popFirst(5)):w.noDocument?Ie.fromSegments(w.noDocument.path):w.unknownDocument?Ie.fromSegments(w.unknownDocument.path):Ue()})(l).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(u.put(p))})).next((()=>G.waitFor(s)))}ai(e,t){const r=t.store("mutations"),s=TS(this.serializer),o=new IS(Vf.Zr,this.serializer.ct);return r.U().next((l=>{const u=new Map;return l.forEach((d=>{var p;let y=(p=u.get(d.userId))!==null&&p!==void 0?p:Tt();ha(this.serializer,d).keys().forEach((w=>y=y.add(w))),u.set(d.userId,y)})),G.forEach(u,((d,p)=>{const y=new Un(p),w=Lf.lt(this.serializer,y),T=o.getIndexManager(y),S=jf.lt(y,this.serializer,T,o.referenceDelegate);return new xS(s,S,w,T).recalculateAndSaveOverlaysForDocumentKeys(new Og(t,Ur.oe),d).next()}))}))}}function TT(n){n.createObjectStore("targetDocuments",{keyPath:xj}).createIndex("documentTargetsIndex",Ij,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tj,{unique:!0}),n.createObjectStore("targetGlobal")}const Bm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cv{constructor(e,t,r,s,o,l,u,d,p,y,w=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=l,this.document=u,this.ci=p,this.li=y,this.hi=w,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=T=>Promise.resolve(),!cv.D())throw new pe(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FV(this,s),this.Ai=t+"main",this.serializer=new fS(d),this.Ri=new _o(this.Ai,this.hi,new JV(this.serializer)),this.$r=new SV,this.Ur=new DV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=TS(this.serializer),this.Gr=new bV,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,y===!1&&_n("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pe(re.FAILED_PRECONDITION,Bm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Ur(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>uh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(No(e))return ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Kc(e).get("owner").next((t=>G.resolve(this.vi(t))))}Ci(e){return uh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Cn(t,"clientMetadata");return r.U().next((s=>{const o=this.xi(s,18e5),l=s.filter((u=>o.indexOf(u)===-1));return G.forEach(l,(u=>r.delete(u.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?G.resolve(!0):Kc(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new pe(re.FAILED_PRECONDITION,Bm);return!1}}return!(!this.networkEnabled||!this.inForeground)||uh(e).U().next((r=>this.xi(r,5e3).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||l&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Og(e,Ur.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>uh(e).U().next((t=>this.xi(t,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return jf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OV(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Lf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ce("IndexedDbPersistence","Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===17?Mj:d===16?Dj:d===15?Wy:d===14?I1:d===13?x1:d===12?Oj:d===11?T1:void Ue()})(this.hi);let l;return this.Ri.runTransaction(e,s,o,(u=>(l=new Og(u,this.Qr?this.Qr.next():Ur.oe),t==="readwrite-primary"?this.wi(l).next((d=>!!d||this.Si(l))).next((d=>{if(!d)throw _n(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new pe(re.FAILED_PRECONDITION,y1);return r(l)})).next((d=>this.Di(l).next((()=>d)))):this.Ki(l).next((()=>r(l)))))).then((u=>(l.raiseOnCommittedEvent(),u)))}Ki(e){return Kc(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new pe(re.FAILED_PRECONDITION,Bm)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kc(e).put("owner",t)}static D(){return _o.D()}bi(e){const t=Kc(e);return t.get("owner").next((r=>this.vi(r)?(ce("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve()))}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(_n(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;HI()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return ce("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _n("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){_n("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kc(n){return Cn(n,"owner")}function uh(n){return Cn(n,"clientMetadata")}function bS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class uv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=s}static Wi(e,t){let r=Tt(),s=Tt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new uv(e,t.fromCache,r,s)}}class XV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class SS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return HI()?8:_1(An())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.Yi(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.Zi(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new XV;return this.Xi(e,t,l).next((u=>{if(o.result=u,this.zi)return this.es(e,t,l,u.size)}))})).next((()=>o.result))}es(e,t,r,s){return r.documentReadCount<this.ji?(kl()<=bt.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(kl()<=bt.DEBUG&&ce("QueryEngine","Query:",Rl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(kl()<=bt.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ts(t))):G.resolve())}Yi(e,t){if(WE(t))return G.resolve(null);let r=ts(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Xh(t,null,"F"),r=ts(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Tt(...o);return this.Ji.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.ts(t,u);return this.ns(t,p,l,d.readTime)?this.Yi(e,Xh(t,null,"F")):this.rs(e,p,t,d)}))))})))))}Zi(e,t,r,s){return WE(t)||s.isEqual(Xe.min())?G.resolve(null):this.Ji.getDocuments(e,r).next((o=>{const l=this.ts(t,o);return this.ns(t,l,r,s)?G.resolve(null):(kl()<=bt.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Rl(t)),this.rs(e,l,t,m1(s,-1)).next((u=>u)))}))}ts(e,t){let r=new Gt(U1(e));return t.forEach(((s,o)=>{zu(e,o)&&(r=r.add(o))})),r}ns(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,t,r){return kl()<=bt.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Rl(t)),this.Ji.getDocumentsMatchingQuery(e,t,rs.min(),r)}rs(e,t,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}class ZV{constructor(e,t,r,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new Xt(ht),this._s=new Oo((o=>Na(o)),Uu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function kS(n,e,t,r){return new ZV(n,e,t,r)}async function RS(n,e){const t=He(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let d=Tt();for(const p of s){l.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){u.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(r,d).next((p=>({hs:p,removedBatchIds:l,addedBatchIds:u})))}))}))}function e4(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return(function(u,d,p,y){const w=p.batch,T=w.keys();let S=G.resolve();return T.forEach((P=>{S=S.next((()=>y.getEntry(d,P))).next((M=>{const O=p.docVersions.get(P);Qe(O!==null),M.version.compareTo(O)<0&&(w.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(d,w)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Tt();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function AS(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function t4(n,e){const t=He(n),r=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const u=[];e.targetChanges.forEach(((y,w)=>{const T=s.get(w);if(!T)return;u.push(t.Ur.removeMatchingKeys(o,y.removedDocuments,w).next((()=>t.Ur.addMatchingKeys(o,y.addedDocuments,w))));let S=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?S=S.withResumeToken(wn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),s=s.insert(w,S),(function(M,O,X){return M.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(T,S,y)&&u.push(t.Ur.updateTargetData(o,S))}));let d=Jr(),p=Tt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))})),u.push(n4(o,l,e.documentUpdates).next((y=>{d=y.Ps,p=y.Is}))),!r.isEqual(Xe.min())){const y=t.Ur.getLastRemoteSnapshotVersion(o).next((w=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(y)}return G.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,p))).next((()=>d))})).then((o=>(t.os=s,o)))}function n4(n,e,t){let r=Tt(),s=Tt();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=Jr();return t.forEach(((u,d)=>{const p=o.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Xe.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):ce("LocalStore","Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)})),{Ps:l,Is:s}}))}function r4(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function sf(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Ur.getTargetData(r,e).next((o=>o?(s=o,G.resolve(s)):t.Ur.allocateTargetId(r).next((l=>(s=new Ai(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function Wl(n,e,t){const r=He(n),s=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!No(l))throw l;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Kg(n,e,t){const r=He(n);let s=Xe.min(),o=Tt();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,p,y){const w=He(d),T=w._s.get(y);return T!==void 0?G.resolve(w.os.get(T)):w.Ur.getTargetData(p,y)})(r,l,ts(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,t?s:Xe.min(),t?o:Tt()))).next((u=>(NS(r,F1(e),u),{documents:u,Ts:o})))))}function CS(n,e){const t=He(n),r=He(t.Ur),s=t.os.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(o=>r.ot(o,e).next((l=>l?l.target:null))))}function PS(n,e){const t=He(n),r=t.us.get(e)||Xe.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.cs.getAllFromCollectionGroup(s,e,m1(r,-1),Number.MAX_SAFE_INTEGER))).then((s=>(NS(t,e,s),s)))}function NS(n,e,t){let r=n.us.get(e)||Xe.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.us.set(e,r)}function xT(n,e){return`firestore_clients_${n}_${e}`}function IT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qm(n,e){return`firestore_targets_${n}_${e}`}class of{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Rs(e,t,r){const s=JSON.parse(r);let o,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(o=new pe(s.error.code,s.error.message))),l?new of(e,t,s.state,o):(_n("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let s,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new pe(r.error.code,r.error.message))),o?new uu(e,r.state,s):(_n("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class af{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Xy();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=w1(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return s?new af(e,o):(_n("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class dv{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new dv(t.clientId,t.onlineState):(_n("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Wg{constructor(){this.activeTargetIds=Xy()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hm{constructor(e,t,r,s,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Xt(ht),this.started=!1,this.bs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=xT(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Wg),this.Cs=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(xT(this.persistenceKey,r));if(s){const o=af.Rs(r,s);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(qm(this.persistenceKey,e));if(s){const o=uu.Rs(e,s);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach((s=>{this.Qs(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce("SharedClientState","READ",e,t),t}setItem(e,t){ce("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(ce("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void _n("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=(function(o){let l=Ur.oe;if(o!=null)try{const u=JSON.parse(o);Qe(typeof u=="number"),l=u}catch(u){_n("SharedClientState","Failed to read sequence number from WebStorage",u)}return l})(t.newValue);r!==Ur.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map((s=>this.syncEngine.eo(s))))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const s=new of(this.currentUser,e,t,r),o=IT(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Vs())}Qs(e){const t=IT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const s=qm(this.persistenceKey,e),o=new uu(e,t,r);this.setItem(s,o.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return af.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),s=Number(r[1]),o=r[2]!==void 0?r[2]:null;return of.Rs(new Un(o),s,t)}Ys(e,t){const r=this.Ms.exec(e),s=Number(r[1]);return uu.Rs(s,t)}Ls(e){return dv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),s=this.ks(this.Ss),o=this.ks(r),l=[],u=[];return o.forEach((d=>{s.has(d)||l.push(d)})),s.forEach((d=>{o.has(d)||u.push(d)})),this.syncEngine.io(l,u).then((()=>{this.Ss=r}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Xy();return e.forEach(((r,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class OS{constructor(){this.so=new Wg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class s4{_o(e){}shutdown(){}}class bT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let dh=null;function Gm(){return dh===null?dh=(function(){return 268435456+Math.round(2147483648*Math.random())})():dh++,"0x"+dh.toString(16)}const i4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const ar="WebChannelConnection";class a4 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(t,r,s,o,l){const u=Gm(),d=this.xo(t,r.toUriEncodedString());ce("RestConnection",`Sending RPC '${t}' ${u}:`,d,s);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,l),this.No(t,d,p,s).then((y=>(ce("RestConnection",`Received RPC '${t}' ${u}: `,y),y)),(y=>{throw Ra("RestConnection",`RPC '${t}' ${u} failed with error: `,y,"url: ",d,"request:",s),y}))}Lo(t,r,s,o,l,u){return this.Mo(t,r,s,o,l)}Oo(t,r,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((o,l)=>t[l]=o)),s&&s.headers.forEach(((o,l)=>t[l]=o))}xo(t,r){const s=i4[t];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,s){const o=Gm();return new Promise(((l,u)=>{const d=new a1;d.setWithCredentials(!0),d.listenOnce(l1.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case bh.NO_ERROR:const y=d.getResponseJson();ce(ar,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),l(y);break;case bh.TIMEOUT:ce(ar,`RPC '${e}' ${o} timed out`),u(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const w=d.getStatus();if(ce(ar,`RPC '${e}' ${o} failed with status:`,w,"response text:",d.getResponseText()),w>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T?.error;if(S&&S.status&&S.message){const P=(function(O){const X=O.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(X)>=0?X:re.UNKNOWN})(S.status);u(new pe(P,S.message))}else u(new pe(re.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new pe(re.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{ce(ar,`RPC '${e}' ${o} completed.`)}}));const p=JSON.stringify(s);ce(ar,`RPC '${e}' ${o} sending request:`,s),d.send(t,"POST",p,r,15)}))}Bo(e,t,r){const s=Gm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=d1(),u=u1(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const y=o.join("");ce(ar,`Creating RPC '${e}' stream ${s}: ${y}`,d);const w=l.createWebChannel(y,d);let T=!1,S=!1;const P=new o4({Io:O=>{S?ce(ar,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(T||(ce(ar,`Opening RPC '${e}' stream ${s} transport.`),w.open(),T=!0),ce(ar,`RPC '${e}' stream ${s} sending:`,O),w.send(O))},To:()=>w.close()}),M=(O,X,W)=>{O.listen(X,(Q=>{try{W(Q)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return M(w,Xc.EventType.OPEN,(()=>{S||(ce(ar,`RPC '${e}' stream ${s} transport opened.`),P.yo())})),M(w,Xc.EventType.CLOSE,(()=>{S||(S=!0,ce(ar,`RPC '${e}' stream ${s} transport closed`),P.So())})),M(w,Xc.EventType.ERROR,(O=>{S||(S=!0,Ra(ar,`RPC '${e}' stream ${s} transport errored:`,O),P.So(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),M(w,Xc.EventType.MESSAGE,(O=>{var X;if(!S){const W=O.data[0];Qe(!!W);const Q=W,ae=Q.error||((X=Q[0])===null||X===void 0?void 0:X.error);if(ae){ce(ar,`RPC '${e}' stream ${s} received error:`,ae);const de=ae.status;let me=(function(A){const k=In[A];if(k!==void 0)return Z1(k)})(de),N=ae.message;me===void 0&&(me=re.INTERNAL,N="Unknown error status: "+de+" with message "+ae.message),S=!0,P.So(new pe(me,N)),w.close()}else ce(ar,`RPC '${e}' stream ${s} received:`,W),P.bo(W)}})),M(u,c1.STAT_EVENT,(O=>{O.stat===Pg.PROXY?ce(ar,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===Pg.NOPROXY&&ce(ar,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{P.wo()}),0),P}}function DS(){return typeof window<"u"?window:null}function Nh(){return typeof document<"u"?document:null}function Ff(n){return new pV(n,!0)}class MS{constructor(e,t,r=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-r);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class LS{constructor(e,t,r,s,o,l,u,d){this.ui=e,this.Ho=r,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new MS(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(_n(t.toString()),_n("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===t&&this.P_(r,s)}),(r=>{e((()=>{const s=new pe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class l4 extends LS{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=yV(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Xe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Xe.min():l.readTime?xr(l.readTime):Xe.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=zg(this.serializer),t.addTarget=(function(o,l){let u;const d=l.target;if(u=Yh(d)?{documents:aS(o,d)}:{query:lS(o,d)._t},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=nS(o,l.resumeToken);const p=Ug(o,l.expectedCount);p!==null&&(u.expectedCount=p)}else if(l.snapshotVersion.compareTo(Xe.min())>0){u.readTime=Kl(o,l.snapshotVersion.toTimestamp());const p=Ug(o,l.expectedCount);p!==null&&(u.expectedCount=p)}return u})(this.serializer,e);const r=_V(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=zg(this.serializer),t.removeTarget=e,this.a_(t)}}class c4 extends LS{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=vV(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=zg(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>ef(this.serializer,r)))};this.a_(t)}}class u4 extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Mo(e,$g(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(re.UNKNOWN,o.toString())}))}Lo(e,t,r,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Lo(e,$g(t,r),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(re.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class d4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_n(t),this.D_=!1):ce("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class h4{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o((l=>{r.enqueueAndForget((async()=>{Ba(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const p=He(d);p.L_.add(4),await Gu(p),p.q_.set("Unknown"),p.L_.delete(4),await Uf(p)})(this))}))})),this.q_=new d4(r,s)}}async function Uf(n){if(Ba(n))for(const e of n.B_)await e(!0)}async function Gu(n){for(const e of n.B_)await e(!1)}function $f(n,e){const t=He(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),pv(t)?fv(t):cc(t).r_()&&hv(t,e))}function Ql(n,e){const t=He(n),r=cc(t);t.N_.delete(e),r.r_()&&jS(t,e),t.N_.size===0&&(r.r_()?r.o_():Ba(t)&&t.q_.set("Unknown"))}function hv(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cc(n).A_(e)}function jS(n,e){n.Q_.xe(e),cc(n).R_(e)}function fv(n){n.Q_=new uV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),cc(n).start(),n.q_.v_()}function pv(n){return Ba(n)&&!cc(n).n_()&&n.N_.size>0}function Ba(n){return He(n).L_.size===0}function VS(n){n.Q_=void 0}async function f4(n){n.q_.set("Online")}async function p4(n){n.N_.forEach(((e,t)=>{hv(n,e)}))}async function m4(n,e){VS(n),pv(n)?(n.q_.M_(e),fv(n)):n.q_.set("Unknown")}async function g4(n,e,t){if(n.q_.set("Online"),e instanceof tS&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.N_.delete(u),s.Q_.removeTarget(u))})(n,e)}catch(r){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lf(n,r)}else if(e instanceof Ph?n.Q_.Ke(e):e instanceof eS?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Xe.min()))try{const r=await AS(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const u=o.Q_.rt(l);return u.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.N_.get(p);y&&o.N_.set(p,y.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,p)=>{const y=o.N_.get(d);if(!y)return;o.N_.set(d,y.withResumeToken(wn.EMPTY_BYTE_STRING,y.snapshotVersion)),jS(o,d);const w=new Ai(y.target,d,p,y.sequenceNumber);hv(o,w)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){ce("RemoteStore","Failed to raise snapshot:",r),await lf(n,r)}}async function lf(n,e,t){if(!No(e))throw e;n.L_.add(1),await Gu(n),n.q_.set("Offline"),t||(t=()=>AS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Uf(n)}))}function FS(n,e){return e().catch((t=>lf(n,t,e)))}async function lc(n){const e=He(n),t=So(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;y4(e);)try{const s=await r4(e.localStore,r);if(s===null){e.O_.length===0&&t.o_();break}r=s.batchId,v4(e,s)}catch(s){await lf(e,s)}US(e)&&$S(e)}function y4(n){return Ba(n)&&n.O_.length<10}function v4(n,e){n.O_.push(e);const t=So(n);t.r_()&&t.V_&&t.m_(e.mutations)}function US(n){return Ba(n)&&!So(n).n_()&&n.O_.length>0}function $S(n){So(n).start()}async function _4(n){So(n).p_()}async function w4(n){const e=So(n);for(const t of n.O_)e.m_(t.mutations)}async function E4(n,e,t){const r=n.O_.shift(),s=nv.from(r,e,t);await FS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await lc(n)}async function T4(n,e){e&&So(n).V_&&await(async function(r,s){if((function(l){return aV(l)&&l!==re.ABORTED})(s.code)){const o=r.O_.shift();So(r).s_(),await FS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await lc(r)}})(n,e),US(n)&&$S(n)}async function ST(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const r=Ba(t);t.L_.add(3),await Gu(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Uf(t)}async function Qg(n,e){const t=He(n);e?(t.L_.delete(2),await Uf(t)):e||(t.L_.add(2),await Gu(t),t.q_.set("Unknown"))}function cc(n){return n.K_||(n.K_=(function(t,r,s){const o=He(t);return o.w_(),new l4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Eo:f4.bind(null,n),Ro:p4.bind(null,n),mo:m4.bind(null,n),d_:g4.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),pv(n)?fv(n):n.q_.set("Unknown")):(await n.K_.stop(),VS(n))}))),n.K_}function So(n){return n.U_||(n.U_=(function(t,r,s){const o=He(t);return o.w_(),new c4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_4.bind(null,n),mo:T4.bind(null,n),f_:w4.bind(null,n),g_:E4.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await lc(n)):(await n.U_.stop(),n.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}class mv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,u=new mv(e,t,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gv(n,e){if(_n("AsyncQueue",`${e}: ${n}`),No(n))return new pe(re.UNAVAILABLE,`${e}: ${n}`);throw n}class Ll{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ie.comparator(t.key,r.key):(t,r)=>Ie.comparator(t.key,r.key),this.keyedMap=Zc(),this.sortedSet=new Xt(this.comparator)}static emptySet(e){return new Ll(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ll;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class kT{constructor(){this.W_=new Xt(Ie.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ue():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Yl{constructor(e,t,r,s,o,l,u,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Yl(e,t,Ll.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class x4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class I4{constructor(){this.queries=RT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const s=He(t),o=s.queries;s.queries=RT(),o.forEach(((l,u)=>{for(const d of u.j_)d.onError(r)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function RT(){return new Oo((n=>V1(n)),Of)}async function yv(n,e){const t=He(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.H_()&&e.J_()&&(r=2):(o=new x4,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await t.onListen(s,!0);break;case 1:o.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=gv(l,`Initialization of query '${Rl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&_v(t)}async function vv(n,e){const t=He(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function b4(n,e){const t=He(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.j_)u.X_(s)&&(r=!0);l.z_=s}}r&&_v(t)}function S4(n,e,t){const r=He(n),s=r.queries.get(e);if(s)for(const o of s.j_)o.onError(t);r.queries.delete(e)}function _v(n){n.Y_.forEach((e=>{e.next()}))}var Yg,AT;(AT=Yg||(Yg={})).ea="default",AT.Cache="cache";class wv{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Yl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yg.Cache}}class zS{constructor(e){this.key=e}}class BS{constructor(e){this.key=e}}class k4{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Tt(),this.mutatedKeys=Tt(),this.Aa=U1(e),this.Ra=new Ll(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new kT,s=t?t.Ra:this.Ra;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,w)=>{const T=s.get(y),S=zu(this.query,w)?w:null,P=!!T&&this.mutatedKeys.has(T.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let O=!1;T&&S?T.data.isEqual(S.data)?P!==M&&(r.track({type:3,doc:S}),O=!0):this.ga(T,S)||(r.track({type:2,doc:S}),O=!0,(d&&this.Aa(S,d)>0||p&&this.Aa(S,p)<0)&&(u=!0)):!T&&S?(r.track({type:0,doc:S}),O=!0):T&&!S&&(r.track({type:1,doc:T}),O=!0,(d||p)&&(u=!0)),O&&(S?(l=l.add(S),o=M?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{Ra:l,fa:r,ns:u,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((y,w)=>(function(S,P){const M=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return M(S)-M(P)})(y.type,w.type)||this.Aa(y.doc,w.doc))),this.pa(r),s=s!=null&&s;const u=t&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,p=d!==this.Ea;return this.Ea=d,l.length!==0||p?{snapshot:new Yl(this.query,e.Ra,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new kT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Tt(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new BS(r))})),this.da.forEach((r=>{e.has(r)||t.push(new zS(r))})),t}ba(e){this.Ta=e.Ts,this.da=Tt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Yl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class R4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class A4{constructor(e){this.key=e,this.va=!1}}class C4{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Oo((u=>V1(u)),Of),this.Ma=new Map,this.xa=new Set,this.Oa=new Xt(Ie.comparator),this.Na=new Map,this.La=new lv,this.Ba={},this.ka=new Map,this.qa=Ma.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function P4(n,e,t=!0){const r=zf(n);let s;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await qS(r,e,t,!0),s}async function N4(n,e){const t=zf(n);await qS(t,e,!0,!1)}async function qS(n,e,t,r){const s=await sf(n.localStore,ts(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await Ev(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&$f(n.remoteStore,s),u}async function Ev(n,e,t,r,s){n.Ka=(w,T,S)=>(async function(M,O,X,W){let Q=O.view.ma(X);Q.ns&&(Q=await Kg(M.localStore,O.query,!1).then((({documents:N})=>O.view.ma(N,Q))));const ae=W&&W.targetChanges.get(O.targetId),de=W&&W.targetMismatches.get(O.targetId)!=null,me=O.view.applyChanges(Q,M.isPrimaryClient,ae,de);return Jg(M,O.targetId,me.wa),me.snapshot})(n,w,T,S);const o=await Kg(n.localStore,e,!0),l=new k4(e,o.Ts),u=l.ma(o.documents),d=Hu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(u,n.isPrimaryClient,d);Jg(n,t,p.wa);const y=new R4(e,t,l);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),p.snapshot}async function O4(n,e,t){const r=He(n),s=r.Fa.get(e),o=r.Ma.get(s.targetId);if(o.length>1)return r.Ma.set(s.targetId,o.filter((l=>!Of(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Ql(r.remoteStore,s.targetId),Jl(r,s.targetId)})).catch(Po)):(Jl(r,s.targetId),await Wl(r.localStore,s.targetId,!0))}async function D4(n,e){const t=He(n),r=t.Fa.get(e),s=t.Ma.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ql(t.remoteStore,r.targetId))}async function M4(n,e,t){const r=bv(n);try{const s=await(function(l,u){const d=He(l),p=dn.now(),y=u.reduce(((S,P)=>S.add(P.key)),Tt());let w,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let P=Jr(),M=Tt();return d.cs.getEntries(S,y).next((O=>{P=O,P.forEach(((X,W)=>{W.isValidDocument()||(M=M.add(X))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,P))).next((O=>{w=O;const X=[];for(const W of u){const Q=iV(W,w.get(W.key).overlayedDocument);Q!=null&&X.push(new Fi(W.key,Q,A1(Q.value.mapValue),zn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,p,X,u)})).next((O=>{T=O;const X=O.applyToLocalDocumentSet(w,M);return d.documentOverlayCache.saveOverlays(S,O.batchId,X)}))})).then((()=>({batchId:T.batchId,changes:z1(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let p=l.Ba[l.currentUser.toKey()];p||(p=new Xt(ht)),p=p.insert(u,d),l.Ba[l.currentUser.toKey()]=p})(r,s.batchId,t),await Do(r,s.changes),await lc(r.remoteStore)}catch(s){const o=gv(s,"Failed to persist write");t.reject(o)}}async function HS(n,e){const t=He(n);try{const r=await t4(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Na.get(o);l&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Qe(l.va):s.removedDocuments.size>0&&(Qe(l.va),l.va=!1))})),await Do(t,r,e)}catch(r){await Po(r)}}function CT(n,e,t){const r=He(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Fa.forEach(((o,l)=>{const u=l.view.Z_(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=He(l);d.onlineState=u;let p=!1;d.queries.forEach(((y,w)=>{for(const T of w.j_)T.Z_(u)&&(p=!0)})),p&&_v(d)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function L4(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Na.get(e),o=s&&s.key;if(o){let l=new Xt(Ie.comparator);l=l.insert(o,pn.newNoDocument(o,Xe.min()));const u=Tt().add(o),d=new qu(Xe.min(),new Map,new Xt(ht),l,u);await HS(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),Iv(r)}else await Wl(r.localStore,e,!1).then((()=>Jl(r,e,t))).catch(Po)}async function j4(n,e){const t=He(n),r=e.batch.batchId;try{const s=await e4(t.localStore,e);xv(t,r,null),Tv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Do(t,s)}catch(s){await Po(s)}}async function V4(n,e,t){const r=He(n);try{const s=await(function(l,u){const d=He(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return d.mutationQueue.lookupMutationBatch(p,u).next((w=>(Qe(w!==null),y=w.keys(),d.mutationQueue.removeMutationBatch(p,w)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>d.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);xv(r,e,t),Tv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Do(r,s)}catch(s){await Po(s)}}function Tv(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function xv(n,e,t){const r=He(n);let s=r.Ba[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Jl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||GS(n,r)}))}function GS(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Ql(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Iv(n))}function Jg(n,e,t){for(const r of t)r instanceof zS?(n.La.addReference(r.key,e),F4(n,r)):r instanceof BS?(ce("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||GS(n,r.key)):Ue()}function F4(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ce("SyncEngine","New document in limbo: "+t),n.xa.add(r),Iv(n))}function Iv(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ie(Vt.fromString(e)),r=n.qa.next();n.Na.set(r,new A4(t)),n.Oa=n.Oa.insert(t,r),$f(n.remoteStore,new Ai(ts($u(t.path)),r,"TargetPurposeLimboResolution",Ur.oe))}}async function Do(n,e,t){const r=He(n),s=[],o=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((u,d)=>{l.push(r.Ka(d,e,t).then((p=>{var y;if((p||t)&&r.isPrimaryClient){const w=p?!p.fromCache:(y=t?.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(p){s.push(p);const w=uv.Wi(d.targetId,p);o.push(w)}})))})),await Promise.all(l),r.Ca.d_(s),await(async function(d,p){const y=He(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>G.forEach(p,(T=>G.forEach(T.$i,(S=>y.persistence.referenceDelegate.addReference(w,T.targetId,S))).next((()=>G.forEach(T.Ui,(S=>y.persistence.referenceDelegate.removeReference(w,T.targetId,S)))))))))}catch(w){if(!No(w))throw w;ce("LocalStore","Failed to update sequence numbers: "+w)}for(const w of p){const T=w.targetId;if(!w.fromCache){const S=y.os.get(T),P=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(P);y.os=y.os.insert(T,M)}}})(r.localStore,o))}async function U4(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const r=await RS(t.localStore,e);t.currentUser=e,(function(o,l){o.ka.forEach((u=>{u.forEach((d=>{d.reject(new pe(re.CANCELLED,l))}))})),o.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Do(t,r.hs)}}function $4(n,e){const t=He(n),r=t.Na.get(e);if(r&&r.va)return Tt().add(r.key);{let s=Tt();const o=t.Ma.get(e);if(!o)return s;for(const l of o){const u=t.Fa.get(l);s=s.unionWith(u.view.Va)}return s}}async function z4(n,e){const t=He(n),r=await Kg(t.localStore,e.query,!0),s=e.view.ba(r);return t.isPrimaryClient&&Jg(t,e.targetId,s.wa),s}async function B4(n,e){const t=He(n);return PS(t.localStore,e).then((r=>Do(t,r)))}async function q4(n,e,t,r){const s=He(n),o=await(function(u,d){const p=He(u),y=He(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(w=>y.Mn(w,d).next((T=>T?p.localDocuments.getDocuments(w,T):G.resolve(null)))))})(s.localStore,e);o!==null?(t==="pending"?await lc(s.remoteStore):t==="acknowledged"||t==="rejected"?(xv(s,e,r||null),Tv(s,e),(function(u,d){He(He(u).mutationQueue).On(d)})(s.localStore,e)):Ue(),await Do(s,o)):ce("SyncEngine","Cannot apply mutation batch with id: "+e)}async function H4(n,e){const t=He(n);if(zf(t),bv(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await PT(t,r.toArray());t.Qa=!0,await Qg(t.remoteStore,!0);for(const o of s)$f(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){const r=[];let s=Promise.resolve();t.Ma.forEach(((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then((()=>(Jl(t,l),Wl(t.localStore,l,!0)))),Ql(t.remoteStore,l)})),await s,await PT(t,r),(function(l){const u=He(l);u.Na.forEach(((d,p)=>{Ql(u.remoteStore,p)})),u.La.pr(),u.Na=new Map,u.Oa=new Xt(Ie.comparator)})(t),t.Qa=!1,await Qg(t.remoteStore,!1)}}async function PT(n,e,t){const r=He(n),s=[],o=[];for(const l of e){let u;const d=r.Ma.get(l);if(d&&d.length!==0){u=await sf(r.localStore,ts(d[0]));for(const p of d){const y=r.Fa.get(p),w=await z4(r,y);w.snapshot&&o.push(w.snapshot)}}else{const p=await CS(r.localStore,l);u=await sf(r.localStore,p),await Ev(r,KS(p),l,!1,u.resumeToken)}s.push(u)}return r.Ca.d_(o),s}function KS(n){return j1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function G4(n){return(function(t){return He(He(t).persistence).Qi()})(He(n).localStore)}async function K4(n,e,t,r){const s=He(n);if(s.Qa)return void ce("SyncEngine","Ignoring unexpected query state notification.");const o=s.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await PS(s.localStore,F1(o[0])),u=qu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",wn.EMPTY_BYTE_STRING);await Do(s,l,u);break}case"rejected":await Wl(s.localStore,e,!0),Jl(s,e,r);break;default:Ue()}}async function W4(n,e,t){const r=zf(n);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ce("SyncEngine","Adding an already active target "+s);continue}const o=await CS(r.localStore,s),l=await sf(r.localStore,o);await Ev(r,KS(o),l.targetId,!1,l.resumeToken),$f(r.remoteStore,l)}for(const s of t)r.Ma.has(s)&&await Wl(r.localStore,s,!1).then((()=>{Ql(r.remoteStore,s),Jl(r,s)})).catch(Po)}}function zf(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=L4.bind(null,e),e.Ca.d_=b4.bind(null,e.eventManager),e.Ca.$a=S4.bind(null,e.eventManager),e}function bv(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V4.bind(null,e),e}class ku{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ff(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return kS(this.persistence,new SS,e.initialUser,this.serializer)}Ga(e){return new IS(Vf.Zr,this.serializer)}Wa(e){return new OS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ku.provider={build:()=>new ku};class Q4 extends ku{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await bv(this.Ja.syncEngine),await lc(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return kS(this.persistence,new SS,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new LV(r,e.asyncQueue,t)}Ha(e,t){const r=new gj(t,this.persistence);return new mj(e.asyncQueue,r)}Ga(e){const t=bS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new cv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DS(),Nh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new OS}}class Y4 extends Q4{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Hm&&(this.sharedClientState.syncEngine={no:q4.bind(null,t),ro:K4.bind(null,t),io:W4.bind(null,t),Qi:G4.bind(null,t),eo:B4.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async r=>{await H4(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=DS();if(!Hm.D(t))throw new pe(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=bS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class cf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>CT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=U4.bind(null,this.syncEngine),await Qg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new I4})()}createDatastore(e){const t=Ff(e.databaseInfo.databaseId),r=(function(o){return new a4(o)})(e.databaseInfo);return(function(o,l,u,d){return new u4(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,u){return new h4(r,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>CT(this.syncEngine,t,0)),(function(){return bT.D()?new bT:new s4})())}createSyncEngine(e,t){return(function(s,o,l,u,d,p,y){const w=new C4(s,o,l,u,d,p);return y&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const o=He(s);ce("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Gu(o),o.k_.shutdown(),o.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}cf.provider={build:()=>new cf};class Sv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_n("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class J4{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Un.UNAUTHENTICATED,this.clientId=f1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{ce("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ce("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=gv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Km(n,e){n.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await RS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function NT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await X4(n);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>ST(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>ST(e.remoteStore,s))),n._onlineComponents=e}async function X4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await Km(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ra("Error using user provided cache. Falling back to memory cache: "+t),await Km(n,new ku)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await Km(n,new ku);return n._offlineComponents}async function WS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await NT(n,n._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await NT(n,new cf))),n._onlineComponents}function Z4(n){return WS(n).then((e=>e.syncEngine))}async function uf(n){const e=await WS(n),t=e.eventManager;return t.onListen=P4.bind(null,e.syncEngine),t.onUnlisten=O4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=D4.bind(null,e.syncEngine),t}function eF(n,e,t={}){const r=new Xs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,p){const y=new Sv({next:T=>{y.Za(),l.enqueueAndForget((()=>vv(o,w)));const S=T.docs.has(u);!S&&T.fromCache?p.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&d&&d.source==="server"?p.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),w=new wv($u(u.path),y,{includeMetadataChanges:!0,_a:!0});return yv(o,w)})(await uf(n),n.asyncQueue,e,t,r))),r.promise}function tF(n,e,t={}){const r=new Xs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,p){const y=new Sv({next:T=>{y.Za(),l.enqueueAndForget((()=>vv(o,w))),T.fromCache&&d.source==="server"?p.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),w=new wv(u,y,{includeMetadataChanges:!0,_a:!0});return yv(o,w)})(await uf(n),n.asyncQueue,e,t,r))),r.promise}function QS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const OT=new Map;function YS(n,e,t){if(!t)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nF(n,e,t,r){if(e===!0&&r===!0)throw new pe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DT(n){if(!Ie.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MT(n){if(Ie.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ue()}function Br(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bf(n);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rF(n,e){if(e<=0)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class LT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LT(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new sj;switch(r.type){case"firstParty":return new lj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=OT.get(t);r&&(ce("ComponentProvider","Removing Datastore"),OT.delete(t),r.terminate())})(this),Promise.resolve()}}function sF(n,e,t,r={}){var s;const o=(n=Br(n,qf))._getSettings(),l=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Un.MOCK_USER;else{u=BI(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Un(p)}n._authCredentials=new ij(new h1(u,d))}}class si{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new si(this.firestore,e,this._query)}}class Ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ir(this.firestore,e,this._key)}}class wo extends si{constructor(e,t,r){super(e,t,$u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ir(this.firestore,null,new Ie(e))}withConverter(e){return new wo(this.firestore,e,this._path)}}function Ku(n,e,...t){if(n=Ft(n),YS("collection","path",e),n instanceof qf){const r=Vt.fromString(e,...t);return MT(r),new wo(n,null,r)}{if(!(n instanceof Ir||n instanceof wo))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Vt.fromString(e,...t));return MT(r),new wo(n.firestore,null,r)}}function vs(n,e,...t){if(n=Ft(n),arguments.length===1&&(e=f1.newId()),YS("doc","path",e),n instanceof qf){const r=Vt.fromString(e,...t);return DT(r),new Ir(n,null,new Ie(r))}{if(!(n instanceof Ir||n instanceof wo))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Vt.fromString(e,...t));return DT(r),new Ir(n.firestore,n instanceof wo?n.converter:null,new Ie(r))}}class jT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new MS(this,"async_queue_retry"),this.Vu=()=>{const r=Nh();r&&ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Nh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Nh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Xs;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!No(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u})(r);throw _n("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=mv.createAndSchedule(this,e,t,r,(o=>this.yu(o)));return this.Tu.push(s),s}fu(){this.Eu&&Ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function VT(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class ei extends qf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new jT,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jT(e),this._firestoreClient=void 0,await e}}}function iF(n,e){const t=typeof n=="object"?n:sc(),r=typeof n=="string"?n:"(default)",s=ri(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=by("firestore");o&&sF(s,...o)}return s}function Wu(n){if(n._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||JS(n),n._firestoreClient}function JS(n){var e,t,r;const s=n._freezeSettings(),o=(function(u,d,p,y){return new jj(u,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,QS(y.experimentalLongPollingOptions),y.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new J4(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(u){const d=u?._online.build();return{_offline:u?._offline.build(d),_online:d}})(n._componentsProvider))}async function oF(n){Ra("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();aF(n,cf.provider,{build:t=>new Y4(t,e.cacheSizeBytes)})}function aF(n,e,t){if((n=Br(n,ei))._firestoreClient||n._terminated)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new pe(re.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},JS(n)}class Xl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xl(wn.fromBase64String(e))}catch(t){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xl(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qu{constructor(e){this._methodName=e}}class kv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}class Rv{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}}const lF=/^__.*__$/;class cF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ac(e,this.data,t,this.fieldTransforms)}}class XS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class Av{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Av(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return df(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ZS(this.Cu)&&lF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class uF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ff(e)}Qu(e,t,r,s=!1){return new Av({Cu:e,methodName:t,qu:r,path:un.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yu(n){const e=n._freezeSettings(),t=Ff(n._databaseId);return new uF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cv(n,e,t,r,s,o={}){const l=n.Qu(o.merge||o.mergeFields?2:0,e,t,s);Ov("Data must be an object, but it was:",l,r);const u=tk(r,l);let d,p;if(o.merge)d=new $r(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const w of o.mergeFields){const T=Xg(e,w,t);if(!l.contains(T))throw new pe(re.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);rk(y,T)||y.push(T)}d=new $r(y),p=l.fieldTransforms.filter((w=>d.covers(w.field)))}else d=null,p=l.fieldTransforms;return new cF(new ur(u),d,p)}class Gf extends Qu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}class Pv extends Qu{_toFieldTransform(e){return new ev(e.path,new Bl)}isEqual(e){return e instanceof Pv}}class Nv extends Qu{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Gl(e.serializer,H1(e.serializer,this.$u));return new ev(e.path,t)}isEqual(e){return e instanceof Nv&&this.$u===e.$u}}function dF(n,e,t,r){const s=n.Qu(1,e,t);Ov("Data must be an object, but it was:",s,r);const o=[],l=ur.empty();$a(r,((d,p)=>{const y=Dv(e,d,t);p=Ft(p);const w=s.Nu(y);if(p instanceof Gf)o.push(y);else{const T=Ju(p,w);T!=null&&(o.push(y),l.set(y,T))}}));const u=new $r(o);return new XS(l,u,s.fieldTransforms)}function hF(n,e,t,r,s,o){const l=n.Qu(1,e,t),u=[Xg(e,r,t)],d=[s];if(o.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)u.push(Xg(e,o[T])),d.push(o[T+1]);const p=[],y=ur.empty();for(let T=u.length-1;T>=0;--T)if(!rk(p,u[T])){const S=u[T];let P=d[T];P=Ft(P);const M=l.Nu(S);if(P instanceof Gf)p.push(S);else{const O=Ju(P,M);O!=null&&(p.push(S),y.set(S,O))}}const w=new $r(p);return new XS(y,w,l.fieldTransforms)}function ek(n,e,t,r=!1){return Ju(t,n.Qu(r?4:3,e))}function Ju(n,e){if(nk(n=Ft(n)))return Ov("Unsupported field value:",e,n),tk(n,e);if(n instanceof Qu)return(function(r,s){if(!ZS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const u of r){let d=Ju(u,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return H1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=dn.fromDate(r);return{timestampValue:Kl(s.serializer,o)}}if(r instanceof dn){const o=new dn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kl(s.serializer,o)}}if(r instanceof kv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xl)return{bytesValue:nS(s.serializer,r._byteString)};if(r instanceof Ir){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:iv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Rv)return(function(l,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return Zy(u.serializer,d)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${Bf(r)}`)})(n,e)}function tk(n,e){const t={};return b1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$a(n,((r,s)=>{const o=Ju(s,e.Mu(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function nk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dn||n instanceof kv||n instanceof Xl||n instanceof Ir||n instanceof Qu||n instanceof Rv)}function Ov(n,e,t){if(!nk(t)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(t)){const r=Bf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Xg(n,e,t){if((e=Ft(e))instanceof Hf)return e._internalPath;if(typeof e=="string")return Dv(n,e);throw df("Field path arguments must be of type string or ",n,!1,void 0,t)}const fF=new RegExp("[~\\*/\\[\\]]");function Dv(n,e,t){if(e.search(fF)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hf(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function df(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new pe(re.INVALID_ARGUMENT,u+n+d)}function rk(n,e){return n.some((t=>t.isEqual(e)))}class Mv{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pF extends Mv{data(){return super.data()}}function Kf(n,e){return typeof e=="string"?Dv(n,e):e instanceof Hf?e._internalPath:e._delegate._internalPath}function sk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lv{}class Wf extends Lv{}function mF(n,e,...t){let r=[];e instanceof Lv&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((d=>d instanceof jv)).length,u=o.filter((d=>d instanceof Qf)).length;if(l>1||l>0&&u>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Qf extends Wf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Qf(e,t,r)}_apply(e){const t=this._parse(e);return ik(e._query,t),new si(e.firestore,e.converter,Fg(e._query,t))}_parse(e){const t=Yu(e.firestore);return(function(o,l,u,d,p,y,w){let T;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){$T(w,y);const S=[];for(const P of w)S.push(UT(d,o,P));T={arrayValue:{values:S}}}else T=UT(d,o,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||$T(w,y),T=ek(u,l,w,y==="in"||y==="not-in");return At.create(p,y,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function gF(n,e,t){const r=e,s=Kf("where",n);return Qf._create(s,r,t)}class jv extends Lv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ht.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)ik(l,d),l=Fg(l,d)})(e._query,t),new si(e.firestore,e.converter,Fg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vv extends Wf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vv(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Su(o,l)})(e._query,this._field,this._direction);return new si(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new za(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function FT(n,e="asc"){const t=e,r=Kf("orderBy",n);return Vv._create(r,t)}class Fv extends Wf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Fv(e,t,r)}_apply(e){return new si(e.firestore,e.converter,Xh(e._query,this._limit,this._limitType))}}function yF(n){return rF("limit",n),Fv._create("limit",n,"F")}class Uv extends Wf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Uv(e,t,r)}_apply(e){const t=_F(e,this.type,this._docOrFields,this._inclusive);return new si(e.firestore,e.converter,(function(s,o){return new za(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)})(e._query,t))}}function vF(...n){return Uv._create("startAfter",n,!1)}function _F(n,e,t,r){if(t[0]=Ft(t[0]),t[0]instanceof Mv)return(function(o,l,u,d,p){if(!d)throw new pe(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const w of Ml(o))if(w.field.isKeyField())y.push(Pa(l,d.key));else{const T=d.data.field(w.field);if(Pf(T))throw new pe(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const S=w.field.canonicalString();throw new pe(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}y.push(T)}return new bo(y,p)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Yu(n.firestore);return(function(l,u,d,p,y,w){const T=l.explicitOrderBy;if(y.length>T.length)throw new pe(re.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let P=0;P<y.length;P++){const M=y[P];if(T[P].field.isKeyField()){if(typeof M!="string")throw new pe(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof M}`);if(!Jy(l)&&M.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${M}' contains a slash.`);const O=l.path.child(Vt.fromString(M));if(!Ie.isDocumentKey(O))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const X=new Ie(O);S.push(Pa(u,X))}else{const O=ek(d,p,M);S.push(O)}}return new bo(S,w)})(n._query,n.firestore._databaseId,s,e,t,r)}}function UT(n,e,t){if(typeof(t=Ft(t))=="string"){if(t==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jy(e)&&t.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Vt.fromString(t));if(!Ie.isDocumentKey(r))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pa(n,new Ie(r))}if(t instanceof Ir)return Pa(n,t._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bf(t)}.`)}function $T(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ik(n,e){const t=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class wF{convertValue(e,t="none"){switch(Ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return $a(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((l=>on(l.doubleValue)));return new Rv(o)}convertGeoPoint(e){return new kv(on(e.latitude),on(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Qy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const t=Li(e);return new dn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Vt.fromString(e);Qe(hS(r));const s=new Aa(r.get(1),r.get(3)),o=new Ie(r.popFirst(5));return s.isEqual(t)||_n(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function $v(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ok extends Mv{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Kf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Oh extends ok{data(e={}){return super.data(e)}}class ak{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new nu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Oh(this._firestore,this._userDataWriter,r.key,r,new nu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new Oh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new nu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new Oh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new nu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return u.type!==0&&(p=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:EF(u.type),doc:d,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function EF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}function hf(n){n=Br(n,Ir);const e=Br(n.firestore,ei);return eF(Wu(e),n._key).then((t=>uk(e,n,t)))}class zv extends wF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}function TF(n){n=Br(n,si);const e=Br(n.firestore,ei),t=Wu(e),r=new zv(e);return sk(n._query),tF(t,n._query).then((s=>new ak(e,r,n,s)))}function qa(n,e,t){n=Br(n,Ir);const r=Br(n.firestore,ei),s=$v(n.converter,e,t);return Jf(r,[Cv(Yu(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,zn.none())])}function lk(n){return Jf(Br(n.firestore,ei),[new Bu(n._key,zn.none())])}function Yf(n,e){const t=Br(n.firestore,ei),r=vs(n),s=$v(n.converter,e);return Jf(t,[Cv(Yu(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,zn.exists(!1))]).then((()=>r))}function ck(n,...e){var t,r,s;n=Ft(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||VT(e[l])||(o=e[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(VT(e[l])){const w=e[l];e[l]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[l+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let d,p,y;if(n instanceof Ir)p=Br(n.firestore,ei),y=$u(n._key.path),d={next:w=>{e[l]&&e[l](uk(p,n,w))},error:e[l+1],complete:e[l+2]};else{const w=Br(n,si);p=Br(w.firestore,ei),y=w._query;const T=new zv(p);d={next:S=>{e[l]&&e[l](new ak(p,T,w,S))},error:e[l+1],complete:e[l+2]},sk(n._query)}return(function(T,S,P,M){const O=new Sv(M),X=new wv(S,O,P);return T.asyncQueue.enqueueAndForget((async()=>yv(await uf(T),X))),()=>{O.Za(),T.asyncQueue.enqueueAndForget((async()=>vv(await uf(T),X)))}})(Wu(p),y,u,d)}function Jf(n,e){return(function(r,s){const o=new Xs;return r.asyncQueue.enqueueAndForget((async()=>M4(await Z4(r),s,o))),o.promise})(Wu(n),e)}function uk(n,e,t){const r=t.docs.get(e._key),s=new zv(n);return new ok(n,s,e._key,r,new nu(t.hasPendingWrites,t.fromCache),e.converter)}class xF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yu(e)}set(e,t,r){this._verifyNotCommitted();const s=Wm(e,this._firestore),o=$v(s.converter,t,r),l=Cv(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,zn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const o=Wm(e,this._firestore);let l;return l=typeof(t=Ft(t))=="string"||t instanceof Hf?hF(this._dataReader,"WriteBatch.update",o._key,t,r,s):dF(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wm(e,this._firestore);return this._mutations=this._mutations.concat(new Bu(t._key,zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wm(n,e){if((n=Ft(n)).firestore!==e)throw new pe(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function IF(){return new Pv("serverTimestamp")}function dk(n){return new Nv("increment",n)}function bF(n){return Wu(n=Br(n,ei)),new xF(n,(e=>Jf(n,e)))}(function(e,t=!0){(function(s){oc=s})(Ua),br(new hr("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new ei(new oj(r.getProvider("auth-internal")),new uj(r.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(p.options.projectId,y)})(l,s),l);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Rn(NE,"4.7.3",e),Rn(NE,"4.7.3","esm2017")})();const hk="firebasestorage.googleapis.com",fk="storageBucket",SF=120*1e3,kF=600*1e3;class gn extends is{constructor(e,t,r=0){super(Qm(e),`Firebase Storage: ${t} (${Qm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mn||(mn={}));function Qm(n){return"storage/"+n}function Bv(){const n="An unknown error occurred, please check the error payload for server response.";return new gn(mn.UNKNOWN,n)}function RF(n){return new gn(mn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function AF(n){return new gn(mn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CF(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new gn(mn.UNAUTHENTICATED,n)}function PF(){return new gn(mn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function NF(n){return new gn(mn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function OF(){return new gn(mn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DF(){return new gn(mn.CANCELED,"User canceled the upload/download.")}function MF(n){return new gn(mn.INVALID_URL,"Invalid URL '"+n+"'.")}function LF(n){return new gn(mn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function jF(){return new gn(mn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fk+"' property when initializing the app?")}function VF(){return new gn(mn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function FF(){return new gn(mn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function UF(n){return new gn(mn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zg(n){return new gn(mn.INVALID_ARGUMENT,n)}function pk(){return new gn(mn.APP_DELETED,"The Firebase app was deleted.")}function $F(n){return new gn(mn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function du(n,e){return new gn(mn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Wc(n){throw new gn(mn.INTERNAL_ERROR,"Internal error: "+n)}class Xr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Xr.makeFromUrl(e,t)}catch{return new Xr(e,"")}if(r.path==="")return r;throw LF(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function p(ae){ae.path_=decodeURIComponent(ae.path)}const y="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",S=new RegExp(`^https?://${w}/${y}/b/${s}/o${T}`,"i"),P={bucket:1,path:3},M=t===hk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",X=new RegExp(`^https?://${M}/${s}/${O}`,"i"),Q=[{regex:u,indices:d,postModify:o},{regex:S,indices:P,postModify:p},{regex:X,indices:{bucket:1,path:2},postModify:p}];for(let ae=0;ae<Q.length;ae++){const de=Q[ae],me=de.regex.exec(e);if(me){const N=me[de.indices.bucket];let I=me[de.indices.path];I||(I=""),r=new Xr(N,I),de.postModify(r);break}}if(r==null)throw MF(e);return r}}class zF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function BF(n,e,t){let r=1,s=null,o=null,l=!1,u=0;function d(){return u===2}let p=!1;function y(...O){p||(p=!0,e.apply(null,O))}function w(O){s=setTimeout(()=>{s=null,n(S,d())},O)}function T(){o&&clearTimeout(o)}function S(O,...X){if(p){T();return}if(O){T(),y.call(null,O,...X);return}if(d()||l){T(),y.call(null,O,...X);return}r<64&&(r*=2);let Q;u===1?(u=2,Q=0):Q=(r+Math.random())*1e3,w(Q)}let P=!1;function M(O){P||(P=!0,T(),!p&&(s!==null?(O||(u=2),clearTimeout(s),w(0)):O||(u=1)))}return w(0),o=setTimeout(()=>{l=!0,M(!0)},t),M}function qF(n){n(!1)}function HF(n){return n!==void 0}function GF(n){return typeof n=="object"&&!Array.isArray(n)}function qv(n){return typeof n=="string"||n instanceof String}function zT(n){return Hv()&&n instanceof Blob}function Hv(){return typeof Blob<"u"}function BT(n,e,t,r){if(r<e)throw Zg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Zg(`Invalid value for '${n}'. Expected ${t} or less.`)}function Gv(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function mk(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var wa;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(wa||(wa={}));function KF(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}class WF{constructor(e,t,r,s,o,l,u,d,p,y,w,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=w,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,P)=>{this.resolve_=S,this.reject_=P,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new hh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const d=u.loaded,p=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===wa.NO_ERROR,d=o.getStatus();if(!u||KF(d,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===wa.ABORT;r(!1,new hh(!1,null,y));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new hh(p,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());HF(d)?o(d):o()}catch(d){l(d)}else if(u!==null){const d=Bv();d.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,d)):l(d)}else if(s.canceled){const d=this.appDelete_?pk():DF();l(d)}else{const d=OF();l(d)}};this.canceled_?t(!1,new hh(!1,null,!0)):this.backoffId_=BF(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function QF(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function YF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JF(n,e){e&&(n["X-Firebase-GMPID"]=e)}function XF(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function ZF(n,e,t,r,s,o,l=!0){const u=mk(n.urlParams),d=n.url+u,p=Object.assign({},n.headers);return JF(p,e),QF(p,t),YF(p,o),XF(p,r),new WF(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}function eU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tU(...n){const e=eU();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Hv())return new Blob(n);throw new gn(mn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function rU(n){if(typeof atob>"u")throw UF("base-64");return atob(n)}const Ys={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ym{constructor(e,t){this.data=e,this.contentType=t||null}}function sU(n,e){switch(n){case Ys.RAW:return new Ym(gk(e));case Ys.BASE64:case Ys.BASE64URL:return new Ym(yk(n,e));case Ys.DATA_URL:return new Ym(oU(e),aU(e))}throw Bv()}function gk(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function iU(n){let e;try{e=decodeURIComponent(n)}catch{throw du(Ys.DATA_URL,"Malformed data URL.")}return gk(e)}function yk(n,e){switch(n){case Ys.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw du(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ys.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw du(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=rU(e)}catch(s){throw s.message.includes("polyfill")?s:du(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class vk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw du(Ys.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=lU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function oU(n){const e=new vk(n);return e.base64?yk(Ys.BASE64,e.rest):iU(e.rest)}function aU(n){return new vk(n).contentType}function lU(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class po{constructor(e,t){let r=0,s="";zT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(zT(this.data_)){const r=this.data_,s=nU(r,e,t);return s===null?null:new po(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new po(r,!0)}}static getBlob(...e){if(Hv()){const t=e.map(r=>r instanceof po?r.data_:r);return new po(tU.apply(null,t))}else{const t=e.map(l=>qv(l)?sU(Ys.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new po(s,!0)}}uploadData(){return this.data_}}function _k(n){let e;try{e=JSON.parse(n)}catch{return null}return GF(e)?e:null}function cU(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function uU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function wk(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function dU(n,e){return e}class Er{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||dU}}let fh=null;function hU(n){return!qv(n)||n.length<2?n:wk(n)}function Ek(){if(fh)return fh;const n=[];n.push(new Er("bucket")),n.push(new Er("generation")),n.push(new Er("metageneration")),n.push(new Er("name","fullPath",!0));function e(o,l){return hU(l)}const t=new Er("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new Er("size");return s.xform=r,n.push(s),n.push(new Er("timeCreated")),n.push(new Er("updated")),n.push(new Er("md5Hash",null,!0)),n.push(new Er("cacheControl",null,!0)),n.push(new Er("contentDisposition",null,!0)),n.push(new Er("contentEncoding",null,!0)),n.push(new Er("contentLanguage",null,!0)),n.push(new Er("contentType",null,!0)),n.push(new Er("metadata","customMetadata",!0)),fh=n,fh}function fU(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new Xr(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function pU(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return fU(r,n),r}function Tk(n,e,t){const r=_k(e);return r===null?null:pU(n,r,t)}function mU(n,e,t,r){const s=_k(e);if(s===null||!qv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(p=>{const y=n.bucket,w=n.fullPath,T="/b/"+l(y)+"/o/"+l(w),S=Gv(T,t,r),P=mk({alt:"media",token:p});return S+P})[0]}function gU(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class xk{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ik(n){if(!n)throw Bv()}function yU(n,e){function t(r,s){const o=Tk(n,s,e);return Ik(o!==null),o}return t}function vU(n,e){function t(r,s){const o=Tk(n,s,e);return Ik(o!==null),mU(o,s,n.host,n._protocol)}return t}function bk(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=PF():s=CF():t.getStatus()===402?s=AF(n.bucket):t.getStatus()===403?s=NF(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function _U(n){const e=bk(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=RF(n.path)),o.serverResponse=s.serverResponse,o}return t}function wU(n,e,t){const r=e.fullServerUrl(),s=Gv(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,u=new xk(s,o,vU(n,t),l);return u.errorHandler=_U(e),u}function EU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function TU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=EU(null,e)),r}function xU(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let Q="";for(let ae=0;ae<2;ae++)Q=Q+Math.random().toString().slice(2);return Q}const d=u();l["Content-Type"]="multipart/related; boundary="+d;const p=TU(e,r,s),y=gU(p,t),w="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+p.contentType+`\r
\r
`,T=`\r
--`+d+"--",S=po.getBlob(w,r,T);if(S===null)throw VF();const P={name:p.fullPath},M=Gv(o,n.host,n._protocol),O="POST",X=n.maxUploadRetryTime,W=new xk(M,O,yU(n,t),X);return W.urlParams=P,W.headers=l,W.body=S.uploadData(),W.errorHandler=bk(e),W}class IU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Wc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Wc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class bU extends IU{initXhr(){this.xhr_.responseType="text"}}function Sk(){return new bU}class La{constructor(e,t){this._service=e,t instanceof Xr?this._location=t:this._location=Xr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new La(e,t)}get root(){const e=new Xr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wk(this._location.path)}get storage(){return this._service}get parent(){const e=cU(this._location.path);if(e===null)return null;const t=new Xr(this._location.bucket,e);return new La(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw $F(e)}}function SU(n,e,t){n._throwIfRoot("uploadBytes");const r=xU(n.storage,n._location,Ek(),new po(e,!0),t);return n.storage.makeRequestWithTokens(r,Sk).then(s=>({metadata:s,ref:n}))}function kU(n){n._throwIfRoot("getDownloadURL");const e=wU(n.storage,n._location,Ek());return n.storage.makeRequestWithTokens(e,Sk).then(t=>{if(t===null)throw FF();return t})}function RU(n,e){const t=uU(n._location.path,e),r=new Xr(n._location.bucket,t);return new La(n.storage,r)}function AU(n){return/^[A-Za-z]+:\/\//.test(n)}function CU(n,e){return new La(n,e)}function kk(n,e){if(n instanceof Kv){const t=n;if(t._bucket==null)throw jF();const r=new La(t,t._bucket);return e!=null?kk(r,e):r}else return e!==void 0?RU(n,e):n}function PU(n,e){if(e&&AU(e)){if(n instanceof Kv)return CU(n,e);throw Zg("To use ref(service, url), the first argument must be a Storage instance.")}else return kk(n,e)}function qT(n,e){const t=e?.[fk];return t==null?null:Xr.makeFromBucketSpec(t,n)}function NU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:BI(s,n.app.options.projectId))}class Kv{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=hk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SF,this._maxUploadRetryTime=kF,this._requests=new Set,s!=null?this._bucket=Xr.makeFromBucketSpec(s,this._host):this._bucket=qT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xr.makeFromBucketSpec(this._url,e):this._bucket=qT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new La(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new zF(pk());{const l=ZF(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const HT="@firebase/storage",GT="0.13.2";const Rk="storage";function OU(n,e,t){return n=Ft(n),SU(n,e,t)}function DU(n){return n=Ft(n),kU(n)}function MU(n,e){return n=Ft(n),PU(n,e)}function LU(n=sc(),e){n=Ft(n);const r=ri(n,Rk).getImmediate({identifier:e}),s=by("storage");return s&&jU(r,...s),r}function jU(n,e,t,r={}){NU(n,e,t,r)}function VU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Kv(t,r,s,e,Ua)}function FU(){br(new hr(Rk,VU,"PUBLIC").setMultipleInstances(!0)),Rn(HT,GT,""),Rn(HT,GT,"esm2017")}FU();const UU="type.googleapis.com/google.protobuf.Int64Value",$U="type.googleapis.com/google.protobuf.UInt64Value";function Ak(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function ey(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>ey(e));if(typeof n=="function"||typeof n=="object")return Ak(n,e=>ey(e));throw new Error("Data cannot be encoded in JSON: "+n)}function ff(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case UU:case $U:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>ff(e)):typeof n=="function"||typeof n=="object"?Ak(n,e=>ff(e)):n}const Wv="functions";const KT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jl extends is{constructor(e,t,r){super(`${Wv}/${e}`,t||""),this.details=r}}function zU(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function BU(n,e){let t=zU(n),r=t,s;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!KT[l])return new jl("internal","internal");t=KT[l],r=l}const u=o.message;typeof u=="string"&&(r=u),s=o.details,s!==void 0&&(s=ff(s))}}catch{}return t==="ok"?null:new jl(t,r,s)}class qU{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||t.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}const ty="us-central1";function HU(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new jl("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class GU{constructor(e,t,r,s,o=ty,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new qU(t,r,s),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=ty}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function KU(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function WU(n,e,t){return(r=>YU(n,e,r,t||{}))}async function QU(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}function YU(n,e,t,r){const s=n._url(e);return JU(n,s,t,r)}async function JU(n,e,t,r){t=ey(t);const s={data:t},o={},l=await n.contextProvider.getContext(r.limitedUseAppCheckTokens);l.authToken&&(o.Authorization="Bearer "+l.authToken),l.messagingToken&&(o["Firebase-Instance-ID-Token"]=l.messagingToken),l.appCheckToken!==null&&(o["X-Firebase-AppCheck"]=l.appCheckToken);const u=r.timeout||7e4,d=HU(u),p=await Promise.race([QU(e,s,o,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!p)throw new jl("cancelled","Firebase Functions instance was deleted.");const y=BU(p.status,p.json);if(y)throw y;if(!p.json)throw new jl("internal","Response is not valid JSON object.");let w=p.json.data;if(typeof w>"u"&&(w=p.json.result),typeof w>"u")throw new jl("internal","Response is missing data field.");return{data:ff(w)}}const WT="@firebase/functions",QT="0.11.8";const XU="auth-internal",ZU="app-check-internal",e5="messaging-internal";function t5(n,e){const t=(r,{instanceIdentifier:s})=>{const o=r.getProvider("app").getImmediate(),l=r.getProvider(XU),u=r.getProvider(e5),d=r.getProvider(ZU);return new GU(o,l,u,d,s,n)};br(new hr(Wv,t,"PUBLIC").setMultipleInstances(!0)),Rn(WT,QT,e),Rn(WT,QT,"esm2017")}function Ck(n=sc(),e=ty){const r=ri(Ft(n),Wv).getImmediate({identifier:e}),s=by("functions");return s&&Pk(r,...s),r}function Pk(n,e,t){KU(Ft(n),e,t)}function Nk(n,e,t){return WU(Ft(n),e,t)}t5(fetch.bind(self));const K6=Object.freeze(Object.defineProperty({__proto__:null,connectFunctionsEmulator:Pk,getFunctions:Ck,httpsCallable:Nk},Symbol.toStringTag,{value:"Module"})),YT="@firebase/performance",ny="0.6.9";const Ok=ny,n5="FB-PERF-TRACE-START",r5="FB-PERF-TRACE-STOP",ry="FB-PERF-TRACE-MEASURE",Dk="_wt_",Mk="_fp",Lk="_fcp",jk="_fid",Vk="@firebase/performance/config",Fk="@firebase/performance/configexpire",s5="performance",Uk="Performance";const i5={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},cr=new Vi(s5,Uk,i5);const ti=new rc(Uk);ti.logLevel=bt.INFO;let Jm,$k;class Bn{constructor(e){if(this.window=e,!e)throw cr.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!GI()?(ti.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Du()?!0:(ti.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(s=>{for(const o of s.getEntries())t(o)}).observe({entryTypes:[e]})}static getInstance(){return Jm===void 0&&(Jm=new Bn($k)),Jm}}function o5(n){$k=n}let zk;function a5(n){const e=n.getId();return e.then(t=>{zk=t}),e}function Qv(){return zk}function l5(n){const e=n.getToken();return e.then(t=>{}),e}function JT(n,e){const t=n.length-e.length;if(t<0||t>1)throw cr.create("invalid String merger input");const r=[];for(let s=0;s<n.length;s++)r.push(n.charAt(s)),e.length>s&&r.push(e.charAt(s));return r.join("")}let Xm;class Zr{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=JT("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=JT("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Xm===void 0&&(Xm=new Zr),Xm}}var Vl;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"})(Vl||(Vl={}));const c5=["firebase_","google_","ga_"],u5=new RegExp("^[a-zA-Z]\\w*$"),d5=40,h5=100;function f5(){const n=Bn.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function Bk(){switch(Bn.getInstance().document.visibilityState){case"visible":return Vl.VISIBLE;case"hidden":return Vl.HIDDEN;default:return Vl.UNKNOWN}}function p5(){const e=Bn.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function m5(n){return n.length===0||n.length>d5?!1:!c5.some(t=>n.startsWith(t))&&!!n.match(u5)}function g5(n){return n.length!==0&&n.length<=h5}function qk(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.appId;if(!t)throw cr.create("no app id");return t}function y5(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.projectId;if(!t)throw cr.create("no project id");return t}function v5(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw cr.create("no api key");return t}const _5="0.0.1",Cs={loggingEnabled:!0},w5="FIREBASE_INSTALLATIONS_AUTH";function E5(n,e){const t=T5();return t?(XT(t),Promise.resolve()):b5(n,e).then(XT).then(r=>x5(r),()=>{})}function T5(){const n=Bn.getInstance().localStorage;if(!n)return;const e=n.getItem(Fk);if(!e||!S5(e))return;const t=n.getItem(Vk);if(t)try{return JSON.parse(t)}catch{return}}function x5(n){const e=Bn.getInstance().localStorage;!n||!e||(e.setItem(Vk,JSON.stringify(n)),e.setItem(Fk,String(Date.now()+Zr.getInstance().configTimeToLive*60*60*1e3)))}const I5="Could not fetch config, will use default configs";function b5(n,e){return l5(n.installations).then(t=>{const r=y5(n.app),s=v5(n.app),o=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${s}`,l=new Request(o,{method:"POST",headers:{Authorization:`${w5} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:qk(n.app),app_version:Ok,sdk_version:_5})});return fetch(l).then(u=>{if(u.ok)return u.json();throw cr.create("RC response not ok")})}).catch(()=>{ti.info(I5)})}function XT(n){if(!n)return n;const e=Zr.getInstance(),t=n.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=Cs.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):Cs.logSource&&(e.logSource=Cs.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:Cs.logEndPointUrl&&(e.logEndPointUrl=Cs.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:Cs.transportKey&&(e.transportKey=Cs.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):Cs.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=Cs.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):Cs.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=Cs.tracesSamplingRate),e.logTraceAfterSampling=ZT(e.tracesSamplingRate),e.logNetworkAfterSampling=ZT(e.networkRequestsSamplingRate),n}function S5(n){return Number(n)>Date.now()}function ZT(n){return Math.random()<=n}let Yv=1,Zm;function Hk(n){return Yv=2,Zm=Zm||R5(n),Zm}function k5(){return Yv===3}function R5(n){return A5().then(()=>a5(n.installations)).then(e=>E5(n,e)).then(()=>ex(),()=>ex())}function A5(){const n=Bn.getInstance().document;return new Promise(e=>{if(n&&n.readyState!=="complete"){const t=()=>{n.readyState==="complete"&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}function ex(){Yv=3}const Jv=10*1e3,C5=5.5*1e3,Gk=3,P5=1e3;let pf=Gk,Eo=[],tx=!1;function N5(){tx||(Xf(C5),tx=!0)}function Xf(n){setTimeout(()=>{if(pf!==0){if(!Eo.length)return Xf(Jv);O5()}},n)}function O5(){const n=Eo.splice(0,P5),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Zr.getInstance().logSource,log_event:e};D5(t,n).catch(()=>{Eo=[...n,...Eo],pf--,ti.info(`Tries left: ${pf}.`),Xf(Jv)})}function D5(n,e){return M5(n).then(t=>(t.ok||ti.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let s=Jv;isNaN(r)||(s=Math.max(r,s));const o=t.logResponseDetails;Array.isArray(o)&&o.length>0&&o[0].responseAction==="RETRY_REQUEST_LATER"&&(Eo=[...e,...Eo],ti.info("Retry transport request later.")),pf=Gk,Xf(s)})}function M5(n){const e=Zr.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}function L5(n){if(!n.eventTime||!n.message)throw cr.create("invalid cc log");Eo=[...Eo,n]}function j5(n){return(...e)=>{const t=n(...e);L5({message:t,eventTime:Date.now()})}}let eg;function Kk(n,e){eg||(eg=j5(F5)),eg(n,e)}function ph(n){const e=Zr.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||Bn.getInstance().requiredApisAvailable()&&(n.isAuto&&Bk()!==Vl.VISIBLE||(k5()?tg(n):Hk(n.performanceController).then(()=>tg(n),()=>tg(n))))}function tg(n){if(!Qv())return;const e=Zr.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>Kk(n,1),0)}function V5(n){const e=Zr.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],s=e.flTransportEndpointUrl.split("?")[0];t===r||t===s||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>Kk(n,0),0)}function F5(n,e){return e===0?U5(n):$5(n)}function U5(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:Wk(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function $5(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};Object.keys(n.counters).length!==0&&(e.counters=n.counters);const t=n.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const r={application_info:Wk(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}function Wk(n){return{google_app_id:qk(n),app_instance_id:Qv(),web_app_info:{sdk_version:Ok,page_url:Bn.getInstance().getUrl(),service_worker_status:f5(),visibility_state:Bk(),effective_connection_type:p5()},application_process_state:0}}const z5=100,B5="_",q5=[Mk,Lk,jk];function H5(n,e){return n.length===0||n.length>z5?!1:e&&e.startsWith(Dk)&&q5.indexOf(n)>-1||!n.startsWith(B5)}function G5(n){const e=Math.floor(n);return e<n&&ti.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}class Ea{constructor(e,t,r=!1,s){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=Bn.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${n5}-${this.randomId}-${this.name}`,this.traceStopMark=`${r5}-${this.randomId}-${this.name}`,this.traceMeasure=s||`${ry}-${this.randomId}-${this.name}`,s&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw cr.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw cr.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ph(this)}record(e,t,r){if(e<=0)throw cr.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw cr.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const s of Object.keys(r.metrics))isNaN(Number(r.metrics[s]))||(this.counters[s]=Math.floor(Number(r.metrics[s])));ph(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(H5(e,this.name))this.counters[e]=G5(t??0);else throw cr.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=m5(e),s=g5(t);if(r&&s){this.customAttributes[e]=t;return}if(!r)throw cr.create("invalid attribute name",{attributeName:e});if(!s)throw cr.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,r,s){const o=Bn.getInstance().getUrl();if(!o)return;const l=new Ea(e,Dk+o,!0),u=Math.floor(Bn.getInstance().getTimeOrigin()*1e3);l.setStartTime(u),t&&t[0]&&(l.setDuration(Math.floor(t[0].duration*1e3)),l.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),l.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),l.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const d="first-paint",p="first-contentful-paint";if(r){const y=r.find(T=>T.name===d);y&&y.startTime&&l.putMetric(Mk,Math.floor(y.startTime*1e3));const w=r.find(T=>T.name===p);w&&w.startTime&&l.putMetric(Lk,Math.floor(w.startTime*1e3)),s&&l.putMetric(jk,Math.floor(s*1e3))}ph(l)}static createUserTimingTrace(e,t){const r=new Ea(e,t,!1,t);ph(r)}}function nx(n,e){const t=e;if(!t||t.responseStart===void 0)return;const r=Bn.getInstance().getTimeOrigin(),s=Math.floor((t.startTime+r)*1e3),o=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,l=Math.floor((t.responseEnd-t.startTime)*1e3),u=t.name&&t.name.split("?")[0],d={performanceController:n,url:u,responsePayloadBytes:t.transferSize,startTimeUs:s,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:l};V5(d)}const K5=5e3;function rx(n){Qv()&&(setTimeout(()=>Q5(n),0),setTimeout(()=>W5(n),0),setTimeout(()=>Y5(n),0))}function W5(n){const e=Bn.getInstance(),t=e.getEntriesByType("resource");for(const r of t)nx(n,r);e.setupObserver("resource",r=>nx(n,r))}function Q5(n){const e=Bn.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let s=setTimeout(()=>{Ea.createOobTrace(n,t,r),s=void 0},K5);e.onFirstInputDelay(o=>{s&&(clearTimeout(s),Ea.createOobTrace(n,t,r,o))})}else Ea.createOobTrace(n,t,r)}function Y5(n){const e=Bn.getInstance(),t=e.getEntriesByType("measure");for(const r of t)sx(n,r);e.setupObserver("measure",r=>sx(n,r))}function sx(n,e){const t=e.name;t.substring(0,ry.length)!==ry&&Ea.createUserTimingTrace(n,t)}class J5{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),Bn.getInstance().requiredApisAvailable()?Sy().then(t=>{t&&(N5(),Hk(this).then(()=>rx(this),()=>rx(this)),this.initialized=!0)}).catch(t=>{ti.info(`Environment doesn't support IndexedDB: ${t}`)}):ti.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Zr.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Zr.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Zr.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Zr.getInstance().dataCollectionEnabled}}const X5="[DEFAULT]";function Z5(n=sc()){return n=Ft(n),ri(n,"performance").getImmediate()}const e$=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if(t.name!==X5)throw cr.create("FB not default");if(typeof window>"u")throw cr.create("no window");o5(window);const s=new J5(t,r);return s._init(e),s};function t$(){br(new hr("performance",e$,"PUBLIC")),Rn(YT,ny),Rn(YT,ny,"esm2017")}t$();const n$=new Map,r$={activated:!1,tokenObservers:[]};function Ms(n){return n$.get(n)||Object.assign({},r$)}const ix={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3};class s${constructor(e,t,r,s,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=s,s>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new _g,this.pending.promise.catch(t=>{}),await i$(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new _g,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}function i$(n){return new Promise(e=>{setTimeout(e,n)})}const o$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},mf=new Vi("appCheck","AppCheck",o$);function Qk(n){if(!Ms(n).activated)throw mf.create("use-before-activation",{appName:n.name})}const a$="firebase-app-check-database",l$=1,sy="firebase-app-check-store";let mh=null;function c$(){return mh||(mh=new Promise((n,e)=>{try{const t=indexedDB.open(a$,l$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(mf.create("storage-open",{originalErrorMessage:(s=r.target.error)===null||s===void 0?void 0:s.message}))},t.onupgradeneeded=r=>{const s=r.target.result;r.oldVersion===0&&s.createObjectStore(sy,{keyPath:"compositeKey"})}}catch(t){e(mf.create("storage-open",{originalErrorMessage:t?.message}))}}),mh)}function u$(n,e){return d$(h$(n),e)}async function d$(n,e){const r=(await c$()).transaction(sy,"readwrite"),o=r.objectStore(sy).put({compositeKey:n,value:e});return new Promise((l,u)=>{o.onsuccess=d=>{l()},r.onerror=d=>{var p;u(mf.create("storage-set",{originalErrorMessage:(p=d.target.error)===null||p===void 0?void 0:p.message}))}})}function h$(n){return`${n.options.appId}-${n.name}`}const iy=new rc("@firebase/app-check");function ox(n,e){return Du()?u$(n,e).catch(t=>{iy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}const f$={error:"UNKNOWN_ERROR"};function p$(n){return Iy.encodeString(JSON.stringify(n),!1)}async function oy(n,e=!1){const t=n.app;Qk(t);const r=Ms(t);let s=r.token,o;if(s&&!ru(s)&&(r.token=void 0,s=void 0),!s){const d=await r.cachedTokenPromise;d&&(ru(d)?s=d:await ox(t,void 0))}if(!e&&s&&ru(s))return{token:s.token};let l=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=await Ms(t).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"?iy.warn(d.message):iy.error(d),o=d}let u;return s?o?ru(s)?u={token:s.token,internalError:o}:u=lx(o):(u={token:s.token},r.token=s,await ox(t,s)):u=lx(o),l&&v$(t,u),u}async function m$(n){const e=n.app;Qk(e);const{provider:t}=Ms(e);{const{token:r}=await t.getToken();return{token:r}}}function g$(n,e,t,r){const{app:s}=n,o=Ms(s),l={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,l],o.token&&ru(o.token)){const u=o.token;Promise.resolve().then(()=>{t({token:u.token}),ax(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ax(n))}function Yk(n,e){const t=Ms(n),r=t.tokenObservers.filter(s=>s.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ax(n){const{app:e}=n,t=Ms(e);let r=t.tokenRefresher;r||(r=y$(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function y$(n){const{app:e}=n;return new s$(async()=>{const t=Ms(e);let r;if(t.token?r=await oy(n,!0):r=await oy(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const t=Ms(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5;const s=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},ix.RETRIAL_MIN_WAIT,ix.RETRIAL_MAX_WAIT)}function v$(n,e){const t=Ms(n).tokenObservers;for(const r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ru(n){return n.expireTimeMillis-Date.now()>0}function lx(n){return{token:p$(f$),error:n}}class _${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ms(this.app);for(const t of e)Yk(this.app,t.next);return Promise.resolve()}}function w$(n,e){return new _$(n,e)}function E$(n){return{getToken:e=>oy(n,e),getLimitedUseToken:()=>m$(n),addTokenListener:e=>g$(n,"INTERNAL",e),removeTokenListener:e=>Yk(n.app,e)}}const T$="@firebase/app-check",x$="0.8.8",I$="app-check",cx="app-check-internal";function b$(){br(new hr(I$,n=>{const e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return w$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(cx).initialize()})),br(new hr(cx,n=>{const e=n.getProvider("app-check").getImmediate();return E$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rn(T$,x$)}b$();const S$={apiKey:"AIzaSyCTtg8zf-mqJHX7PNjLcbJ5HmjvE90AOpo",authDomain:"richard-automotive.firebaseapp.com",projectId:"richard-automotive",storageBucket:"richard-automotive.firebasestorage.app",messagingSenderId:"197990063384",appId:"1:197990063384:web:2e797f109bda021e2e926d",measurementId:"G-BB5QFNTHHG"},uc=YI(S$),Zf=Eb(uc),Jn=iF(uc),ni=nj(uc),Jk=LU(uc),Xk=Ck(uc);typeof window<"u"&&Z5(uc);typeof window<"u"&&oF(Jn).catch(n=>{n.code==="failed-precondition"?console.warn("Persistencia fall: Mltiples pestaas abiertas."):n.code==="unimplemented"&&console.warn("El navegador no soporta persistencia.")});const ep=Ku(Jn,"cars"),Zk=Ku(Jn,"applications"),eR=async(n=9,e=null,t="all",r=null)=>{const s=[];t&&t!=="all"&&s.push(gF("type","==",t)),r?s.push(FT("price",r)):s.push(FT("name","asc")),e&&s.push(vF(e)),s.push(yF(n));const o=mF(ep,...s);try{const l=await TF(o),u=l.docs.map(p=>({id:p.id,...p.data()})),d=l.docs[l.docs.length-1]||null;return{cars:u,lastDoc:d,hasMore:l.docs.length===n}}catch(l){throw console.error("Pagination Error:",l),l.code==="failed-precondition"&&console.warn("Index missing for this query. Check console link."),l}},tR=n=>ck(ep,e=>{const t=e.docs.map(r=>({id:r.id,...r.data()}));t.sort((r,s)=>r.name.localeCompare(s.name)),n(t)},e=>{console.error("syncInventory Error:",e)}),k$=async n=>{try{const e=MU(Jk,`inventory/${Date.now()}_${n.name}`),t=await OU(e,n);return await DU(t.ref)}catch(e){throw console.error("Error al subir imagen:",e),new Error("No se pudo subir la imagen a Firebase Storage.")}},nR=async n=>{await Yf(ep,n)},rR=async n=>{const e=vs(Jn,"cars",n.id),{id:t,...r}=n;await qa(e,r)},sR=async n=>{const e=vs(Jn,"cars",n);await lk(e)},iR=async n=>{const e=bF(Jn);n.forEach(t=>{const r=vs(ep);e.set(r,t)}),await e.commit()},R$=async n=>{const e=vs(Jn,"cars",n);if(await qa(e,{views:dk(1)},{merge:!0}),typeof window<"u"){const{logEvent:t}=await zt(async()=>{const{logEvent:r}=await Promise.resolve().then(()=>Oy);return{logEvent:r}},[]);t(Zf,"view_item",{items:[{item_id:n}]})}},oR=async n=>{const e=vs(Jn,"cars",n);await qa(e,{leads_count:dk(1)},{merge:!0})},aR=n=>{let e=40;return n.type==="trade-in"&&(e+=15),n.type==="finance"&&n.ssn&&(e+=25),n.firstName&&n.lastName&&(e+=5),n.phone&&n.phone.length>=10&&(e+=15),n.email&&n.email.includes("@")&&(e+=10),n.vehicleInfo&&n.vehicleInfo.id&&(e+=10),n.monthlyIncome&&Number(n.monthlyIncome)>2e3&&(e+=10),n.message&&n.message.length>20&&(e+=5),Math.min(e,99)},A$=async n=>{const e=aR(n),t={...n,...n.ssn?{ssn:`XXX-XX-${n.ssn.slice(-4)}`}:{},timestamp:new Date,status:"new",type:n.type||"finance",aiScore:e,aiSummary:n.aiSummary||"Lead capturado automticamente."};if(await Yf(Zk,t),n.vehicleInfo&&n.vehicleInfo.id&&await oR(n.vehicleInfo.id),typeof window<"u"){const{logEvent:r}=await zt(async()=>{const{logEvent:s}=await Promise.resolve().then(()=>Oy);return{logEvent:s}},void 0);r(Zf,"generate_lead",{currency:"USD",value:e,lead_type:t.type,vehicle_id:t.vehicleId})}},C$=n=>ck(Zk,e=>{const t=e.docs.map(r=>{const s=r.data();return{id:r.id,type:s.type||"general",status:s.status||"new",firstName:s.firstName||"Cliente",lastName:s.lastName||"Desconocido",email:s.email,phone:s.phone,timestamp:s.timestamp,vehicleOfInterest:s.vehicleInfo?.name||s.vehicleOfInterest,vehicleId:s.vehicleInfo?.id,tradeInDetails:s.tradeIn?`${s.tradeIn.year} ${s.tradeIn.make} ${s.tradeIn.model}`:void 0,message:s.message,aiScore:s.aiScore||aR(s),aiSummary:s.aiSummary}});t.sort((r,s)=>{const o=l=>l?typeof l.toDate=="function"?l.toDate().getTime():l.seconds?l.seconds*1e3:l instanceof Date?l.getTime():0:0;return o(s.timestamp)-o(r.timestamp)}),n(t)},e=>{console.error("syncLeads Error:",e)}),P$=async(n,e)=>{const t=vs(Jn,"applications",n);await qa(t,{status:e},{merge:!0})},N$=async(n,e,t)=>{try{return(await Nk(Xk,"generateDescription")({carModel:n,features:e})).data}catch(r){throw console.error("Error generating description:",r),new Error("Failed to generate description via AI.")}},O$=async n=>{try{const e=Ku(Jn,"subscribers");await Yf(e,{email:n,timestamp:IF()})}catch(e){throw console.error("Error subscribing:",e),e}},W6=Object.freeze(Object.defineProperty({__proto__:null,addCar:nR,analytics:Zf,auth:ni,db:Jn,deleteCar:sR,functions:Xk,generateCarDescriptionAI:N$,getPaginatedCars:eR,incrementCarLead:oR,incrementCarView:R$,storage:Jk,submitApplication:A$,subscribeToNewsletter:O$,syncInventory:tR,syncLeads:C$,updateCar:rR,updateLeadStatus:P$,uploadImage:k$,uploadInitialInventory:iR},Symbol.toStringTag,{value:"Module"}));var D$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const M$=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pe=(n,e)=>{const t=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:u="",children:d,...p},y)=>j.createElement("svg",{ref:y,...D$,width:s,height:s,stroke:r,strokeWidth:l?Number(o)*24/Number(s):o,className:["lucide",`lucide-${M$(n)}`,u].join(" "),...p},[...e.map(([w,T])=>j.createElement(w,T)),...Array.isArray(d)?d:[d]]));return t.displayName=`${n}`,t};const Xv=Pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const lR=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const ng=Pe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const L$=Pe("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);const j$=Pe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const V$=Pe("BotMessageSquare",[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z",key:"w2lp3e"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M9 11v2",key:"1ueba0"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M20 12h2",key:"1q8mjw"}]]);const F$=Pe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const gf=Pe("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);const U$=Pe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const $$=Pe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const z$=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const ux=Pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const cR=Pe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);const B$=Pe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const q$=Pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const uR=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Zv=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const H$=Pe("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);const G$=Pe("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const K$=Pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const W$=Pe("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]);const Q$=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Y$=Pe("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);const J$=Pe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);const X$=Pe("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]);const Z$=Pe("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const e3=Pe("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);const dR=Pe("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);const hR=Pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const yf=Pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const t3=Pe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const n3=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const r3=Pe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);const s3=Pe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const hu=Pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const i3=Pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const o3=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const a3=Pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const fR=Pe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const l3=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const pR=Pe("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const mR=Pe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const c3=Pe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const u3=Pe("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);const d3=Pe("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);const gR=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const h3=Pe("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);const f3=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const p3=Pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const m3=Pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const yR=Pe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const e_=Pe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const g3=Pe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const Zl=Pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const y3=Pe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const v3=Pe("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);const dx=Pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const _3=Pe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);const w3=Pe("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);const vR=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const E3=Pe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);const T3=Pe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);const x3=Pe("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);const I3=Pe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const b3=Pe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const ji=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const S3=Pe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);const _R=Pe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var hx;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(hx||(hx={}));var fx;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(fx||(fx={}));var px;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(px||(px={}));const mx=["user","model","function","system"];var gx;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(gx||(gx={}));var yx;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(yx||(yx={}));var vx;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(vx||(vx={}));var _x;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(_x||(_x={}));var fu;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(fu||(fu={}));var wx;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(wx||(wx={}));var Ex;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Ex||(Ex={}));var Tx;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Tx||(Tx={}));class dr extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Sl extends dr{constructor(e,t){super(e),this.response=t}}class wR extends dr{constructor(e,t,r,s){super(e),this.status=t,this.statusText=r,this.errorDetails=s}}class To extends dr{}class ER extends dr{}const k3="https://generativelanguage.googleapis.com",R3="v1beta",A3="0.24.1",C3="genai-js";var ja;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ja||(ja={}));class P3{constructor(e,t,r,s,o){this.model=e,this.task=t,this.apiKey=r,this.stream=s,this.requestOptions=o}toString(){var e,t;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||R3;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||k3}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function N3(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${C3}/${A3}`),e.join(" ")}async function O3(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",N3(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new To(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,o]of r.entries()){if(s==="x-goog-api-key")throw new To(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new To(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function D3(n,e,t,r,s,o){const l=new P3(n,e,t,r,o);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},V3(o)),{method:"POST",headers:await O3(l),body:s})}}async function Xu(n,e,t,r,s,o={},l=fetch){const{url:u,fetchOptions:d}=await D3(n,e,t,r,s,o);return M3(u,d,l)}async function M3(n,e,t=fetch){let r;try{r=await t(n,e)}catch(s){L3(s,n)}return r.ok||await j3(r,n),r}function L3(n,e){let t=n;throw t.name==="AbortError"?(t=new ER(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof wR||n instanceof To||(t=new dr(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function j3(n,e){let t="",r;try{const s=await n.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new wR(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)}function V3(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function t_(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Dh(n.candidates[0]))throw new Sl(`${co(n)}`,n);return F3(n)}else if(n.promptFeedback)throw new Sl(`Text not available. ${co(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Dh(n.candidates[0]))throw new Sl(`${co(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),xx(n)[0]}else if(n.promptFeedback)throw new Sl(`Function call not available. ${co(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Dh(n.candidates[0]))throw new Sl(`${co(n)}`,n);return xx(n)}else if(n.promptFeedback)throw new Sl(`Function call not available. ${co(n)}`,n)},n}function F3(n){var e,t,r,s;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const l of(s=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)l.text&&o.push(l.text),l.executableCode&&o.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&o.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function xx(n){var e,t,r,s;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const l of(s=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)l.functionCall&&o.push(l.functionCall);if(o.length>0)return o}const U3=[fu.RECITATION,fu.SAFETY,fu.LANGUAGE];function Dh(n){return!!n.finishReason&&U3.includes(n.finishReason)}function co(n){var e,t,r;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){const o=n.candidates[0];Dh(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function Ru(n){return this instanceof Ru?(this.v=n,this):new Ru(n)}function $3(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,o=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(T){r[T]&&(s[T]=function(S){return new Promise(function(P,M){o.push([T,S,P,M])>1||u(T,S)})})}function u(T,S){try{d(r[T](S))}catch(P){w(o[0][3],P)}}function d(T){T.value instanceof Ru?Promise.resolve(T.value.v).then(p,y):w(o[0][2],T)}function p(T){u("next",T)}function y(T){u("throw",T)}function w(T,S){T(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}const Ix=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function z3(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=H3(e),[r,s]=t.tee();return{stream:q3(r),response:B3(s)}}async function B3(n){const e=[],t=n.getReader();for(;;){const{done:r,value:s}=await t.read();if(r)return t_(G3(e));e.push(s)}}function q3(n){return $3(this,arguments,function*(){const t=n.getReader();for(;;){const{value:r,done:s}=yield Ru(t.read());if(s)break;yield yield Ru(t_(r))}})}function H3(n){const e=n.getReader();return new ReadableStream({start(r){let s="";return o();function o(){return e.read().then(({value:l,done:u})=>{if(u){if(s.trim()){r.error(new dr("Failed to parse stream"));return}r.close();return}s+=l;let d=s.match(Ix),p;for(;d;){try{p=JSON.parse(d[1])}catch{r.error(new dr(`Error parsing JSON response: "${d[1]}"`));return}r.enqueue(p),s=s.substring(d[0].length),d=s.match(Ix)}return o()}).catch(l=>{let u=l;throw u.stack=l.stack,u.name==="AbortError"?u=new ER("Request aborted when reading from the stream"):u=new dr("Error reading from the stream"),u})}}})}function G3(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const r of n){if(r.candidates){let s=0;for(const o of r.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const l={};for(const u of o.content.parts)u.text&&(l.text=u.text),u.functionCall&&(l.functionCall=u.functionCall),u.executableCode&&(l.executableCode=u.executableCode),u.codeExecutionResult&&(l.codeExecutionResult=u.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),t.candidates[s].content.parts.push(l)}s++}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}async function TR(n,e,t,r){const s=await Xu(e,ja.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return z3(s)}async function xR(n,e,t,r){const o=await(await Xu(e,ja.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:t_(o)}}function IR(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Au(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return K3(e)}function K3(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let r=!1,s=!1;for(const o of n)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),r=!0);if(r&&s)throw new dr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new dr("No content is provided for sending chat message.");return r?e:t}function W3(n,e){var t;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new To("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(s)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{const o=Au(n);r.contents=[o]}return{generateContentRequest:r}}function bx(n){let e;return n.contents?e=n:e={contents:[Au(n)]},n.systemInstruction&&(e.systemInstruction=IR(n.systemInstruction)),e}function Q3(n){return typeof n=="string"||Array.isArray(n)?{content:Au(n)}:n}const Sx=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Y3={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function J3(n){let e=!1;for(const t of n){const{role:r,parts:s}=t;if(!e&&r!=="user")throw new dr(`First content should be with role 'user', got ${r}`);if(!mx.includes(r))throw new dr(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(mx)}`);if(!Array.isArray(s))throw new dr("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new dr("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const d of Sx)d in u&&(o[d]+=1);const l=Y3[r];for(const u of Sx)if(!l.includes(u)&&o[u]>0)throw new dr(`Content with role '${r}' can't contain '${u}' part`);e=!0}}function kx(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const r of t.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const Rx="SILENT_ERROR";class X3{constructor(e,t,r,s={}){this.model=t,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(J3(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,s,o,l,u,d;await this._sendPromise;const p=Au(e),y={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},w=Object.assign(Object.assign({},this._requestOptions),t);let T;return this._sendPromise=this._sendPromise.then(()=>xR(this._apiKey,this.model,y,w)).then(S=>{var P;if(kx(S.response)){this._history.push(p);const M=Object.assign({parts:[],role:"model"},(P=S.response.candidates)===null||P===void 0?void 0:P[0].content);this._history.push(M)}else{const M=co(S.response);M&&console.warn(`sendMessage() was unsuccessful. ${M}. Inspect response object for details.`)}T=S}).catch(S=>{throw this._sendPromise=Promise.resolve(),S}),await this._sendPromise,T}async sendMessageStream(e,t={}){var r,s,o,l,u,d;await this._sendPromise;const p=Au(e),y={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},w=Object.assign(Object.assign({},this._requestOptions),t),T=TR(this._apiKey,this.model,y,w);return this._sendPromise=this._sendPromise.then(()=>T).catch(S=>{throw new Error(Rx)}).then(S=>S.response).then(S=>{if(kx(S)){this._history.push(p);const P=Object.assign({},S.candidates[0].content);P.role||(P.role="model"),this._history.push(P)}else{const P=co(S);P&&console.warn(`sendMessageStream() was unsuccessful. ${P}. Inspect response object for details.`)}}).catch(S=>{S.message!==Rx&&console.error(S)}),T}}async function Z3(n,e,t,r){return(await Xu(e,ja.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()}async function e9(n,e,t,r){return(await Xu(e,ja.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()}async function t9(n,e,t,r){const s=t.requests.map(l=>Object.assign(Object.assign({},l),{model:e}));return(await Xu(e,ja.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),r)).json()}class Ax{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=IR(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;const s=bx(e),o=Object.assign(Object.assign({},this._requestOptions),t);return xR(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),o)}async generateContentStream(e,t={}){var r;const s=bx(e),o=Object.assign(Object.assign({},this._requestOptions),t);return TR(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),o)}startChat(e){var t;return new X3(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const r=W3(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return Z3(this.apiKey,this.model,r,s)}async embedContent(e,t={}){const r=Q3(e),s=Object.assign(Object.assign({},this._requestOptions),t);return e9(this.apiKey,this.model,r,s)}async batchEmbedContents(e,t={}){const r=Object.assign(Object.assign({},this._requestOptions),t);return t9(this.apiKey,this.model,e,r)}}class n9{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new dr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Ax(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new To("Cached content must contain a `name` field.");if(!e.model)throw new To("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const l of s)if(t?.[l]&&e[l]&&t?.[l]!==e[l]){if(l==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===d)continue}throw new To(`Different value for "${l}" specified in modelParams (${t[l]}) and cachedContent (${e[l]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Ax(this.apiKey,o,r)}}const ii=()=>new n9(void 0),rg={suv:"Tenemos excelentes SUVs como la Hyundai Tucson y Santa Fe. Te gustara ver detalles de alguna?",precio:"Nuestros precios son muy competitivos y transparentes. Buscas algo en un rango especfico?",oferta:"S, tenemos ofertas especiales de 0% APR en modelos seleccionados. Pregntame por la Santa Fe!",financiamiento:"Trabajamos con todos los bancos locales. Te gustara pre-cualificar ahora mismo?",horario:"Estamos abiertos de Lunes a Sbado de 9am a 6pm. Te esperamos!",telefono:"Puedes llamarnos al 787-368-2880 para atencin inmediata.","test drive":"Claro! Podemos agendar tu prueba de manejo hoy mismo. Qu modelo te interesa?",default:"Lo siento, mi conexin con el cerebro central est un poco lenta. Pero estoy aqu para ayudarte. Puedes intentar preguntar de otra forma o llamar al 787-368-2880?"},r9=n=>{const e=(n||"").toLowerCase();for(const t in rg)if(e.includes(t))return rg[t];return rg.default},s9=async(n,e,t=[])=>{const r=e.reduce((u,d)=>{const p=d.type||"Otros";return u[p]||(u[p]=[]),u[p].push(`- ${d.name}: $${(d.price||0).toLocaleString()} ${d.badge?`[${d.badge}]`:""}`),u},{}),s=Object.entries(r).map(([u,d])=>` ${u.toUpperCase()}:
${d.join(`
`)}`).join(`

`),o=t.map(u=>`${u.role==="user"?"CLIENTE":"RICHARD_IA"}: ${u.text}`).join(`
`),l=`
    Eres "Richard IA", el consultor experto de ventas de Richard Automotive en Puerto Rico.
    Tu objetivo es agendar una prueba de manejo o venta.
    
    INVENTARIO ORGANIZADO:
    ${s||"No hay inventario disponible."}
    
    HISTORIAL:
    ${o}
    
    INSTRUCCIONES:
    1. S emptico y profesional.
    2. Usa emojis con moderacin.
    3. Si el cliente pregunta por precio, ofrece opciones de financiamiento.
    4. Responde SIEMPRE en espaol.
  `;try{return(await(await ii().getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:l}).generateContent(n)).response).text()}catch(u){return console.warn("Gemini Error:",u),r9(n)}},Q6=async n=>{const t=`
    Analiza este garaje: ${n.map(r=>`${r.name} ($${r.price})`).join(", ")}.
    
    TASK:
    1. Identify the user's spending power and lifestyle based on cars.
    2. Suggest 1 actionable improvement or trade-in.
    
    OUTPUT FORMAT:
    HTML simple (sin markdown block), use <p>, <strong>, <ul>.
  `;try{return(await ii().getGenerativeModel({model:"gemini-1.5-flash"}).generateContent(t)).response.text()}catch{return"<p>Error de conexin con el asesor IA.</p>"}},i9=async(n,e)=>{if(!e||e.length===0)return{persona:"Analista de Datos",matches:[]};const t=e.map(s=>({id:s.id,name:s.name,price:s.price,type:s.type})),r=`
    User Profile: "${n}". 
    Inventory: ${JSON.stringify(t)}.
    
    TASK:
    1. Analyze user needs (Reasoning).
    2. Match top 3 cars.
    3. Assign 0-100 score.
    
    RETURN JSON ONLY:
    {
      "reasoning": "string analyzing the user",
      "persona": "Creative Persona Name (e.g. 'Fantico de la Velocidad')",
      "matches": [
         { "carId": "id", "score": 95, "reason": "Why this matches" }
      ]
    }
  `;try{const l=(await ii().getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(r)).response.text();return JSON.parse(l)}catch{return{persona:"Error de Anlisis",matches:[]}}},o9=async(n,e)=>{const t=`
    Compare ${n.name} vs ${e.name}.
    
    RETURN JSON ONLY:
    {
        "winnerId": "string (id of winner)",
        "reasoning": "Chain of thought explanation",
        "verdict": "Short final verdict",
        "categories": [
            { "name": "Potencia", "winner": "${n.name} or ${e.name}", "detail": "explanation" },
            { "name": "Economa", "winner": "...", "detail": "..." },
            { "name": "Confort", "winner": "...", "detail": "..." },
            { "name": "Tecnologa", "winner": "...", "detail": "..." }
        ]
    }
  `,s=await ii().getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(t);return JSON.parse(s.response.text())},Y6=async(n,e)=>{try{return(await ii().getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:e}).generateContent(n)).response.text()}catch(t){return console.error("Error generating text:",t),t instanceof Error?`Error: ${t.message}`:"Ocurri un error al procesar tu solicitud."}},J6=async(n,e)=>{try{return(await ii().getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:e}).generateContent(n)).response.text()}catch{return"Ocurri un error al procesar tu cdigo."}},a9=async n=>{try{const e=ii().getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}),r={inlineData:{data:n.replace(/^data:image\/\w+;base64,/,""),mimeType:"image/jpeg"}},o=await e.generateContent([`
        Analiza esta imagen de un vehculo.
        RETURN JSON ONLY:
        {
            "type": "SUV | Sedan | Truck | Coupe",
            "keywords": ["tag1", "tag2", "tag3"],
            "description": "Professional automated description of the vehicle's design and condition."
        }
    `,r]);return JSON.parse(o.response.text())}catch{throw new Error("No pudimos identificar el vehculo.")}},l9=async n=>{const e=`
    Role: Senior Sales Executive.
    Product: ${n.name}, Price: $${n.price}, Type: ${n.type}.
    Task: Write a short, punchy, persuasive 1-paragraph pitch (HTML <p>) to sell this specific car.
    Focus on value and emotion. Spanish.
    
    RETURN JSON ONLY:
    {
       "reasoning": "Internal thought process",
       "pitch": "Final sales pitch text"
    }
  `;try{const r=await ii().getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(e);return JSON.parse(r.response.text()).pitch||`Este ${n.name} es una oportunidad nica!`}catch{return`Este ${n.name} es increble! Ven a verlo hoy mismo.`}},X6=async n=>"https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?auto=format&fit=crop&q=80&w=1000",Z6=async n=>{const e=ii().getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}),t=`Write blog post about ${n}. JSON: { title, excerpt, content, tags }.`;try{const r=await e.generateContent(t),s=JSON.parse(r.response.text());return{id:Date.now().toString(),title:s.title,excerpt:s.excerpt,content:s.content,author:"Richard AI",date:new Date().toLocaleDateString(),imageUrl:"https://images.unsplash.com/photo-1492144534655-ae79c964c9d7",tags:s.tags}}catch{throw new Error("Blog Gen Error")}},ez=async(n,e,t,r)=>{throw new Error("Video generation unavailable.")},tz=n=>Promise.resolve(null),nz=async n=>{try{const e=ii().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}),t=n.map(o=>({inlineData:{data:o.replace(/^data:image\/\w+;base64,/,""),mimeType:"image/jpeg"}})),s=await e.generateContent([`
            Analyze these vehicle images for trade-in valuation.
            RETURN JSON ONLY:
            {
                "condition": "Excellent | Good | Fair | Poor",
                "defects": ["scratch on bumper", "dent on door"],
                "estimatedValueAdjustment": 0.95 (multiplier),
                "reasoning": "Chain of thought analysis of visible condition"
            }
        `,...t]);return JSON.parse(s.response.text())}catch{return{condition:"Good",defects:[],estimatedValueAdjustment:1,reasoning:"Error"}}},c9=({car:n,onClose:e})=>{const[t,r]=j.useState(0),[s,o]=j.useState(0),[l,u]=j.useState(84),[d,p]=j.useState(.059),[y,w]=j.useState(0),[T,S]=j.useState("calculator"),[P,M]=j.useState(""),[O,X]=j.useState(!1),[W,Q]=j.useState({}),ae=qn.useMemo(()=>{const k=t===""?0:t,L=s===""?0:s,C=Math.max(0,n.price-k-L);if(C<=0)return 0;const R=d/12;if(R===0)return Math.round(C/l);const ut=R*Math.pow(1+R,l),Je=Math.pow(1+R,l)-1;return Math.round(C*(ut/Je))},[t,s,l,d,n.price]),de=j.useRef(null);j.useEffect(()=>{const k=document.activeElement;de.current&&de.current.focus();const L=C=>{C.key==="Escape"&&e()};return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L),k?.focus()}},[e]);const me=k=>{S(k),k==="insight"&&!P&&!O&&(X(!0),l9(n).then(L=>M(L)).catch(()=>M("No pudimos conectar con Richard IA en este momento.")).finally(()=>X(!1)))},N=()=>{const k={};let L=!0;return t===""?(k.downPayment="Este campo es obligatorio.",L=!1):t<0&&(k.downPayment="El valor no puede ser negativo.",L=!1),Q(k),L},I=()=>{if(T!=="calculator"&&me("calculator"),!N()){const C=document.getElementById("calculator-form");C?.classList.add("animate-shake"),setTimeout(()=>C?.classList.remove("animate-shake"),500);return}const k=t===""?0:t,L=s===""?0:s;window.open(`https://wa.me/17873682880?text=Hola, vi el anlisis de IA del ${n.name}. Me interesa con un pago estimado de $${ae}/mes (Pronto: $${k}, TradeIn: $${L}, Trmino: ${l} meses).`,"_blank")},A=async()=>{const k={title:`Mira este ${n.name}`,text:`Encontr este ${n.name} en Richard Automotive! Precio: $${n.price.toLocaleString()}`,url:window.location.href};if(navigator.share)try{await navigator.share(k)}catch{}else{const L=`https://wa.me/?text=${encodeURIComponent(k.text)}`;window.open(L,"_blank")}};return g.jsxs("div",{ref:de,tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":"car-modal-title",className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0d2232]/80 backdrop-blur-xl animate-in fade-in",children:[g.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-[40px] md:rounded-[60px] shadow-2xl p-4 md:p-6 relative flex flex-col lg:flex-row gap-6 overflow-hidden",children:[g.jsxs("div",{className:"absolute top-6 right-6 lg:top-8 lg:right-8 z-20 flex gap-2",children:[g.jsx("button",{onClick:A,className:"w-10 h-10 lg:w-12 lg:h-12 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md rounded-full flex items-center justify-center text-slate-500 dark:text-slate-300 hover:bg-[#00aed9] hover:text-white transition-all shadow-lg",title:"Compartir en Redes",children:g.jsx(m3,{size:20})}),g.jsx("button",{onClick:e,"aria-label":"Cerrar modal",className:"w-10 h-10 lg:w-12 lg:h-12 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md rounded-full flex items-center justify-center text-slate-500 dark:text-slate-300 hover:bg-rose-500 hover:text-white transition-all shadow-lg",children:g.jsx(ji,{size:20})})]}),g.jsxs("div",{className:"w-full lg:w-3/5 h-1/3 lg:h-full bg-white dark:bg-slate-800 rounded-[35px] lg:rounded-[45px] flex items-center justify-center p-8 lg:p-12 relative overflow-hidden group border border-slate-200 dark:border-slate-700",children:[g.jsx("div",{className:"absolute inset-0 bg-slate-50/50 dark:bg-slate-900/20"}),g.jsx("img",{src:n.img,alt:n.name,loading:"lazy",decoding:"async",className:"relative z-10 max-w-full max-h-full object-contain transition-transform duration-700 group-hover:scale-105"}),n.badge&&g.jsx("div",{className:"absolute top-6 left-6 lg:top-8 lg:left-8 bg-[#00aed9] text-white px-4 py-2 rounded-full text-[10px] lg:text-xs font-black uppercase tracking-widest shadow-xl z-10",children:n.badge})]}),g.jsxs("div",{className:"w-full lg:w-2/5 flex flex-col h-full overflow-hidden",children:[g.jsxs("div",{className:"mb-6 px-2",children:[g.jsx("span",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-[0.3em]",children:n.type}),g.jsx("h2",{id:"car-modal-title",className:"text-3xl lg:text-4xl font-black text-slate-800 dark:text-white tracking-tighter leading-tight mt-1",children:n.name}),g.jsxs("p",{className:"text-xl font-bold text-slate-500 dark:text-slate-400 mt-2",children:["$",n.price.toLocaleString()]})]}),g.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 lg:p-8 rounded-[35px] text-center shadow-lg dark:shadow-none border border-slate-100 dark:border-slate-700 mb-6 shrink-0 transition-all",children:[g.jsxs("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center justify-center gap-2",children:[g.jsx($$,{size:14})," Pago Mensual Estimado"]}),g.jsxs("div",{className:"text-5xl lg:text-6xl font-black premium-gradient text-transparent bg-clip-text tracking-tighter my-2",children:["$",ae]})]}),g.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-800 p-1.5 rounded-2xl mb-4 shrink-0",children:[g.jsx("button",{onClick:()=>me("calculator"),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${T==="calculator"?"bg-white dark:bg-slate-600 text-[#00aed9] shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:"Calculadora"}),g.jsxs("button",{onClick:()=>me("insight"),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${T==="insight"?"bg-white dark:bg-slate-600 text-[#00aed9] shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[g.jsx(Zl,{size:14})," Richard's Insight"]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:T==="calculator"?g.jsxs("div",{id:"calculator-form",className:"space-y-6 pb-4 animate-in fade-in slide-in-from-bottom-2",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"downPaymentInput",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[g.jsx(j$,{size:12})," Pronto ($) ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{id:"downPaymentInput",type:"number",min:"0",max:n.price,required:!0,value:t,onChange:k=>{r(k.target.value===""?"":Number(k.target.value)),W.downPayment&&Q(L=>({...L,downPayment:void 0}))},className:`w-full px-5 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-2 rounded-[20px] text-lg font-bold outline-none transition-all placeholder:text-slate-300 
                                    ${W.downPayment?"border-red-500 focus:ring-4 focus:ring-red-500/20 bg-red-50 dark:bg-red-900/10":"border-transparent focus:ring-4 focus:ring-[#00aed9]/20"}`,placeholder:"0"}),g.jsx("input",{type:"range",min:"0",max:n.price,value:t||0,onChange:k=>r(Number(k.target.value)),className:"w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-[#00aed9]"}),W.downPayment&&g.jsxs("div",{className:"flex items-center gap-1 ml-2 text-xs font-bold text-red-500 animate-in fade-in slide-in-from-top-1",children:[g.jsx(Xv,{size:12})," ",W.downPayment]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"tradeInInput",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[g.jsx(K$,{size:12})," Trade-In ($)"]}),g.jsx("input",{id:"tradeInInput",type:"number",min:"0",max:n.price,value:s,onChange:k=>o(k.target.value===""?"":Number(k.target.value)),className:"w-full px-5 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-2 border-transparent rounded-[20px] focus:ring-4 focus:ring-[#00aed9]/20 text-lg font-bold outline-none transition-all placeholder:text-slate-300",placeholder:"0"}),g.jsx("input",{type:"range",min:"0",max:n.price,value:s||0,onChange:k=>o(Number(k.target.value)),className:"w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-[#00aed9]"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"creditRateSelect",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2",children:["Puntuacin de Crdito ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("select",{id:"creditRateSelect",value:d,onChange:k=>p(Number(k.target.value)),className:"w-full px-6 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-none rounded-[20px] focus:ring-4 focus:ring-[#00aed9]/20 text-sm font-bold appearance-none cursor-pointer outline-none",children:[g.jsx("option",{value:.029,children:"Excelente (720+)"}),g.jsx("option",{value:.059,children:"Bueno (660+)"}),g.jsx("option",{value:.099,children:"Justo (600+)"}),g.jsx("option",{value:.129,children:"Trabajado (580+)"})]}),g.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:""})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[g.jsx(z$,{size:12})," Trmino ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("div",{className:"grid grid-cols-3 gap-3",children:[60,72,84].map(k=>g.jsxs("button",{onClick:()=>u(k),className:`py-4 rounded-[20px] font-bold text-sm transition-all border-2 ${l===k?"bg-[#173d57] border-[#173d57] text-white shadow-lg transform scale-105":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 text-slate-500 hover:border-[#00aed9] hover:text-[#00aed9]"}`,children:[k," Meses"]},k))})]})]}):g.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 h-full flex flex-col",children:g.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-6 rounded-[30px]",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[g.jsx("div",{className:"w-10 h-10 bg-[#00aed9]/10 rounded-full flex items-center justify-center",children:g.jsx(Zl,{size:20,className:"text-[#00aed9]"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-black text-slate-800 dark:text-white uppercase tracking-widest",children:"Opinin Experta"}),g.jsx("p",{className:"text-[10px] text-slate-400",children:"Generado por Gemini AI"})]})]}),O?g.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 gap-4 py-8",children:[g.jsx(hu,{className:"animate-spin text-[#00aed9]",size:32}),g.jsx("p",{className:"text-xs font-bold uppercase tracking-widest animate-pulse",children:"Analizando especificaciones..."})]}):g.jsx("div",{className:"prose prose-sm dark:prose-invert leading-relaxed text-slate-600 dark:text-slate-300",children:g.jsx("div",{dangerouslySetInnerHTML:{__html:P.replace(/\*\*(.*?)\*\*/g,'<strong class="text-[#00aed9]">$1</strong>').replace(/\n/g,"<br/>")}})})]})})}),g.jsxs("button",{onClick:I,className:"mt-4 w-full py-5 premium-gradient text-white rounded-[25px] font-black text-xs md:text-sm uppercase tracking-[0.2em] flex items-center justify-center gap-3 shadow-2xl shadow-cyan-500/30 hover:scale-[1.02] active:scale-95 transition-all shrink-0",children:["Solicitar Aprobacin ",g.jsx(Zv,{size:18})]})]})]}),g.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.3s ease-in-out;
        }
      `})]})},u9=[" Qu SUVs tienes?"," Ofertas de financiamiento"," Hbridos disponibles"," Agendar Test Drive"],bR=({inventory:n})=>{const[e,t]=j.useState(!1),[r,s]=j.useState([]);j.useEffect(()=>{const C=localStorage.getItem("richard_chat_history");s(C?JSON.parse(C):[{role:"bot",text:"Hola! Soy Richard IA. Analizo nuestro inventario en tiempo real para ti. Qu buscas hoy?"}])},[]),j.useEffect(()=>{r.length>0&&localStorage.setItem("richard_chat_history",JSON.stringify(r))},[r]);const[o,l]=j.useState(""),[u,d]=j.useState(!1),p=j.useRef(null),[y,w]=j.useState(!1),[T,S]=j.useState(0),[P,M]=j.useState("idle"),[O,X]=j.useState([]),W=C=>X(R=>[`[${new Date().toLocaleTimeString()}] ${C}`,...R].slice(0,10)),[Q,ae]=j.useState(!1),[de,me]=j.useState(!1),N=j.useRef(null);j.useEffect(()=>()=>{N.current&&N.current.stop(),window.speechSynthesis.cancel()},[]);const I=C=>{window.speechSynthesis.cancel();const R=new SpeechSynthesisUtterance(C);R.lang="es-US",R.rate=1.1,R.pitch=1,R.onstart=()=>me(!0),R.onend=()=>me(!1),R.onerror=()=>me(!1),window.speechSynthesis.speak(R)},A=()=>{if(Q){N.current?.stop(),ae(!1);return}const C=window.SpeechRecognition||window.webkitSpeechRecognition;if(!C){alert("Tu navegador no soporta voz. Intenta con Chrome.");return}const R=new C;R.lang="es-ES",R.interimResults=!1,R.maxAlternatives=1,R.onstart=()=>{ae(!0),W("Voice: Listening...")},R.onresult=ut=>{const Je=ut.results[0][0].transcript;W(`Voice Result: "${Je}"`),l(Je),k(Je,!0)},R.onerror=ut=>{console.error("Speech error",ut.error),ae(!1),W(`Voice Error: ${ut.error}`)},R.onend=()=>{ae(!1)},N.current=R,R.start()};j.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[r,u,e]);const k=async(C,R=!1)=>{window.speechSynthesis.cancel();const ut=C||o;if(!ut.trim()||u)return;if(ut.trim()==="/debug"){w(!y),l(""),W("Diagnostic Mode Toggled");return}const Je=ut.trim();l(""),s(ft=>[...ft,{role:"user",text:Je}]),d(!0),M("loading");const hn=Date.now();try{W(`Sending: "${Je.slice(0,20)}..."`);const ft=await s9(Je,n,[...r,{role:"user",text:Je}]),ve=Date.now()-hn;S(ve),M("success"),W(`Response (${ve}ms): Success`),s($e=>[...$e,{role:"bot",text:ft}]),R&&I(ft)}catch(ft){M("error"),W(`Error: ${ft}`);const ve="Lo siento, tuve un error de conexin.";s($e=>[...$e,{role:"bot",text:ve}]),R&&I(ve)}finally{d(!1)}},L=()=>{const C=[{role:"bot",text:"Hola de nuevo! En qu ms puedo ayudarte con nuestro inventario?"}];s(C),localStorage.setItem("richard_chat_history",JSON.stringify(C))};return g.jsxs("div",{className:"fixed bottom-6 right-6 z-[1000] flex flex-col items-end gap-4 font-sans",children:[e&&g.jsxs("div",{className:"w-[380px] h-[600px] flex flex-col rounded-[35px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 fade-in duration-300 border border-white/20 backdrop-blur-xl bg-white/90 dark:bg-[#0d2232]/90",children:[g.jsxs("header",{className:"relative p-6 bg-gradient-to-r from-[#173d57] to-[#0f2a3d] text-white flex items-center justify-between shadow-lg z-10",children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 mix-blend-overlay"}),g.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#00aed9] to-blue-600 rounded-full flex items-center justify-center shadow-lg shadow-cyan-500/30",children:g.jsx(F$,{size:22,className:"text-white"})}),g.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-emerald-500 border-2 border-[#173d57] rounded-full animate-pulse"})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-black text-lg tracking-tight leading-none",children:["Richard ",g.jsx("span",{className:"text-[#00aed9]",children:"IA"})]}),g.jsxs("p",{className:"text-[10px] text-cyan-200 font-bold uppercase tracking-widest mt-1 opacity-80 flex items-center gap-1",children:[g.jsx(Zl,{size:10})," Online ",de&&g.jsxs("span",{className:"animate-pulse text-green-300 ml-2 flex items-center gap-1",children:[g.jsx(E3,{size:10})," HABLANDO..."]})]})]})]}),g.jsxs("div",{className:"flex gap-2 relative z-10",children:[g.jsx("a",{href:"https://wa.me/17873682880",target:"_blank",rel:"noreferrer",className:"p-2 bg-green-500/10 text-green-400 hover:bg-green-500 hover:text-white rounded-full transition-colors animate-pulse",title:"WhatsApp",children:g.jsx(fR,{size:18})}),g.jsx("button",{onClick:L,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-300 hover:text-white",title:"Reiniciar Chat",children:g.jsx(gR,{size:18})}),g.jsx("button",{onClick:()=>t(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-300 hover:text-white",children:g.jsx(uR,{size:22})})]})]}),y&&g.jsxs("div",{className:"absolute top-[80px] left-4 right-4 bg-black/80 backdrop-blur-md rounded-xl p-3 text-xs font-mono text-green-400 z-50 border border-green-500/30 shadow-2xl animate-in fade-in zoom-in-95",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2 border-b border-white/10 pb-2",children:[g.jsxs("span",{className:"flex items-center gap-2 font-bold uppercase tracking-wider text-white",children:[g.jsx(v3,{size:12})," System Status"]}),g.jsx("span",{className:P==="error"?"text-red-400":"text-green-400",children:P.toUpperCase()})]}),g.jsxs("div",{className:"space-y-1.5 opacity-90",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"API Key:"}),g.jsx("span",{className:"text-red-500",children:"MISSING"})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Latency:"}),g.jsxs("span",{className:T>2e3?"text-yellow-400":"text-blue-300",children:[T,"ms"]})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Env:"}),g.jsx("span",{children:"production"})]})]}),g.jsxs("div",{className:"mt-3 pt-2 border-t border-white/10",children:[g.jsx("p",{className:"text-[10px] text-zinc-500 mb-1",children:"RECENT LOGS"}),O.map((C,R)=>g.jsx("div",{className:"truncate text-[10px] text-zinc-400",children:C},R))]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5 bg-slate-50/50 dark:bg-transparent",ref:p,children:[r.map((C,R)=>g.jsx("div",{className:`flex ${C.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2`,children:g.jsx("div",{className:`max-w-[85%] p-4 text-sm leading-relaxed shadow-sm ${C.role==="user"?"bg-[#00aed9] text-white rounded-[20px] rounded-br-sm":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-[20px] rounded-bl-sm border border-slate-100 dark:border-slate-700"}`,children:C.text})},R)),u&&g.jsx("div",{className:"flex justify-start animate-in fade-in",children:g.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 rounded-[20px] rounded-bl-sm border border-slate-100 dark:border-slate-700 flex gap-1.5 items-center",children:[g.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce"}),g.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce [animation-delay:-0.15s]"}),g.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce [animation-delay:-0.3s]"})]})})]}),g.jsxs("div",{className:"p-4 bg-white dark:bg-[#0b1d2a] border-t border-slate-100 dark:border-slate-800 space-y-4 relative z-20",children:[r.length<3&&!u&&g.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar mask-gradient-x",children:u9.map((C,R)=>g.jsx("button",{onClick:()=>k(C),className:"whitespace-nowrap px-4 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-600 dark:text-slate-300 text-xs font-bold rounded-full transition-all border border-slate-200 dark:border-slate-700 shrink-0",children:C},R))}),g.jsxs("div",{className:"relative flex items-center gap-2",children:[g.jsx("input",{type:"text",className:"w-full bg-slate-100 dark:bg-slate-900 rounded-full py-3.5 pl-5 pr-12 text-sm font-medium text-slate-900 dark:text-white border border-transparent focus:border-[#00aed9] focus:bg-white dark:focus:bg-slate-900 focus:ring-0 outline-none transition-all shadow-inner",placeholder:"Escribe tu mensaje...",value:o,onChange:C=>l(C.target.value),onKeyDown:C=>C.key==="Enter"&&k()}),g.jsx("button",{onClick:()=>k(),disabled:!o.trim()||u,className:"absolute right-1.5 top-1.5 w-9 h-9 bg-[#00aed9] text-white rounded-full flex items-center justify-center hover:scale-105 active:scale-95 disabled:opacity-50 disabled:hover:scale-100 transition-all shadow-md",children:g.jsx(p3,{size:16,className:o.trim()?"translate-x-0.5":""})}),g.jsx("button",{onClick:A,className:`w-9 h-9 rounded-full flex items-center justify-center transition-all shadow-md ${Q?"bg-red-500 text-white animate-pulse":"bg-slate-200 dark:bg-slate-800 text-slate-500 hover:text-[#00aed9]"}`,title:"Hablar con Richard",children:Q?g.jsx(pR,{size:16}):g.jsx(mR,{size:16})})]}),g.jsxs("div",{className:"flex justify-center items-center gap-1.5 opacity-40",children:[g.jsx("div",{className:"w-2 h-0.5 bg-slate-400 rounded-full"}),g.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Powered by Gemini 2.5"}),g.jsx("div",{className:"w-2 h-0.5 bg-slate-400 rounded-full"})]})]})]}),g.jsxs("button",{onClick:()=>t(!e),className:`group relative w-16 h-16 rounded-full flex items-center justify-center text-white shadow-[0_10px_40px_-10px_rgba(0,174,217,0.5)] transition-all duration-500 hover:scale-110 ${e?"bg-slate-800 rotate-90":"bg-gradient-to-r from-[#00aed9] to-blue-500"}`,children:[e?g.jsx(ji,{size:28}):g.jsx(l3,{size:28,className:"fill-white"}),!e&&g.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 border-2 border-slate-50 dark:border-slate-900 rounded-full"})]})]})},d9=[{id:"family",label:"Familia & Seguridad",icon:g.jsx(L$,{size:14}),text:"Priorizo la seguridad y el espacio para mi familia."},{id:"adventure",label:"Aventura & Off-road",icon:g.jsx(u3,{size:14}),text:"Me gusta salir de la carretera y necesito capacidad todoterreno."},{id:"performance",label:"Velocidad & Sport",icon:g.jsx(e3,{size:14}),text:"Busco alto rendimiento, aceleracin y manejo deportivo."},{id:"commute",label:"Uso Diario",icon:g.jsx(cR,{size:14}),text:"Necesito algo eficiente y cmodo para el trfico diario."},{id:"budget",label:"Econmico",icon:g.jsx(T3,{size:14}),text:"Mi prioridad es el ahorro de combustible y bajo costo de mantenimiento."},{id:"luxury",label:"Lujo & Tech",icon:g.jsx(U$,{size:14}),text:"Quiero la mejor tecnologa, confort premium y estatus."},{id:"eco",label:"Eco-Friendly",icon:g.jsx(s3,{size:14}),text:"Me interesa reducir mi huella de carbono (Hbrido/Elctrico)."}],Cx=["Extrayendo variables de estilo de vida...","Analizando patrones de conduccin...","Consultando base de datos global...","Calculando probabilidades de compatibilidad...","Generando perfil psicogrfico..."],h9=({inventory:n,onClose:e,onSelectCar:t})=>{const[r,s]=j.useState(""),[o,l]=j.useState(!1),[u,d]=j.useState([]),[p,y]=j.useState(""),[w,T]=j.useState("input"),[S,P]=j.useState([]),[M,O]=j.useState(!1),[X,W]=j.useState(0),Q=j.useRef(null);j.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const k=window.SpeechRecognition||window.webkitSpeechRecognition;Q.current=new k,Q.current.continuous=!1,Q.current.lang="es-ES",Q.current.interimResults=!1,Q.current.onresult=L=>{const C=L.results[0][0].transcript;s(R=>(R?R+" ":"")+C),O(!1)},Q.current.onerror=()=>O(!1),Q.current.onend=()=>O(!1)}},[]);const ae=()=>{Q.current&&(M?Q.current.stop():(O(!0),Q.current.start()))};j.useEffect(()=>{let k;return w==="scanning"&&(W(0),k=window.setInterval(()=>{W(L=>(L+1)%Cx.length)},1200)),()=>clearInterval(k)},[w]);const de=(k,L)=>{S.includes(k)?(P(C=>C.filter(R=>R!==k)),s(C=>C.replace(L+" ","").replace(L,"").trim())):(P(C=>[...C,k]),s(C=>(C?C+" ":"")+L))},me=async()=>{if(r.trim()){T("scanning"),l(!0);try{const[k]=await Promise.all([i9(r,n),new Promise(L=>setTimeout(L,3500))]);d(k.matches),y(k.persona)}catch(k){console.error("Scan failed",k),d([])}finally{l(!1),T("results")}}},N=k=>n.find(L=>L.id===k),I=Math.min(100,r.length/100*100),A=I<30?"bg-red-500":I<70?"bg-yellow-500":"bg-[#00aed9]";return g.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0d2232]/95 backdrop-blur-xl animate-in fade-in",children:g.jsxs("div",{className:"w-full max-w-4xl bg-slate-900 border border-slate-700 rounded-[40px] shadow-2xl relative overflow-hidden flex flex-col max-h-[95vh]",children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 pointer-events-none"}),g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00aed9] to-transparent opacity-50"}),g.jsx("button",{onClick:e,className:"absolute top-6 right-6 z-20 text-slate-500 hover:text-white transition-colors",children:g.jsx(ji,{size:24})}),g.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[g.jsxs("div",{className:"p-8 border-b border-slate-800 flex items-center gap-4 shrink-0",children:[g.jsx("div",{className:"w-12 h-12 bg-[#00aed9]/20 rounded-xl flex items-center justify-center border border-[#00aed9]/50 shadow-[0_0_20px_rgba(0,174,217,0.3)]",children:g.jsx(gf,{size:24,className:"text-[#00aed9]"})}),g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:["Neural Match ",g.jsx("span",{className:"text-[#00aed9]",children:"v4.0"})]}),g.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Identidad Digital & Compatibilidad"})]})]}),g.jsxs("div",{className:"flex-1 p-8 overflow-y-auto custom-scrollbar",children:[w==="input"&&g.jsxs("div",{className:"h-full flex flex-col max-w-3xl mx-auto space-y-6 animate-in slide-in-from-bottom-5 duration-300 pb-4",children:[g.jsxs("div",{className:"text-center mb-4",children:[g.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Hblame de tu estilo de vida."}),g.jsx("p",{className:"text-slate-400 text-sm",children:"Nuestra IA analizar tu perfil psicolgico y encontrar el vehculo matemticamente perfecto."})]}),g.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:d9.map(k=>g.jsxs("button",{onClick:()=>de(k.id,k.text),className:`
                                            flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wide border transition-all duration-200
                                            ${S.includes(k.id)?"bg-[#00aed9] text-white border-[#00aed9] shadow-lg shadow-cyan-500/30":"bg-slate-800 text-slate-400 border-slate-700 hover:border-slate-500 hover:text-white"}
                                        `,children:[k.icon," ",k.label]},k.id))}),g.jsxs("div",{className:"w-full relative group",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-slate-800 rounded-t-3xl overflow-hidden",children:g.jsx("div",{className:`h-full ${A} transition-all duration-500`,style:{width:`${I}%`}})}),g.jsx("textarea",{value:r,onChange:k=>s(k.target.value),placeholder:"Escribe o usa el micrfono: 'Busco algo seguro para mi familia, que tenga espacio para las bicicletas y que no gaste mucha gasolina...'",className:"w-full bg-slate-800/80 border-2 border-slate-700 rounded-3xl p-6 text-white placeholder:text-slate-600 focus:border-[#00aed9] focus:bg-slate-800 outline-none text-lg leading-relaxed resize-none min-h-[200px] transition-all shadow-inner relative z-10"}),g.jsx("div",{className:"absolute top-4 right-4 z-20",children:g.jsx("button",{onClick:ae,className:`
                                            p-3 rounded-full transition-all duration-300 flex items-center gap-2 shadow-lg
                                            ${M?"bg-red-500 text-white animate-pulse shadow-red-500/40":"bg-slate-700 text-slate-300 hover:bg-[#00aed9] hover:text-white"}
                                        `,title:"Dictado por Voz",children:M?g.jsx(pR,{size:20}):g.jsx(mR,{size:20})})}),g.jsxs("div",{className:"flex justify-between items-center px-4 py-2",children:[g.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${I>50?"text-[#00aed9]":"text-slate-500"}`,children:M?"Escuchando...":I>80?"Excelente Detalle":I>40?"Buen Comienzo":"Agrega ms detalles"}),g.jsxs("span",{className:"text-[10px] text-slate-600 font-mono",children:[r.length," chars"]})]})]}),g.jsxs("div",{className:"w-full mt-4 flex justify-center relative z-20 group pb-8",children:[g.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r from-cyan-400 to-blue-600 rounded-2xl blur-lg opacity-40 transition-opacity duration-500 ${r.trim()?"opacity-80 animate-pulse":""}`}),g.jsxs("button",{onClick:me,disabled:!r.trim(),className:`
                                        relative w-full py-6 px-8
                                        bg-gradient-to-r from-[#00aed9] via-cyan-500 to-blue-600 
                                        hover:from-cyan-400 hover:via-cyan-300 hover:to-blue-500
                                        text-white text-xl md:text-2xl font-black uppercase tracking-[0.15em]
                                        rounded-2xl border-2 border-white/30 hover:border-white
                                        shadow-[0_10px_40px_-10px_rgba(0,174,217,0.5)]
                                        transform hover:scale-[1.02] active:scale-95 transition-all duration-300
                                        flex items-center justify-center gap-6
                                        disabled:opacity-50 disabled:cursor-not-allowed disabled:grayscale disabled:shadow-none
                                    `,children:[g.jsx("div",{className:"p-2 bg-white/20 rounded-full group-hover:bg-white/30 transition-colors shadow-inner",children:g.jsx(h3,{size:32,strokeWidth:3,className:"drop-shadow-sm"})}),g.jsx("span",{className:"drop-shadow-md",children:"Iniciar Escaneo"}),r.trim()&&g.jsx(Zl,{size:32,className:"animate-spin-slow text-yellow-300 drop-shadow-md"})]})]})]}),w==="scanning"&&g.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-12",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-48 h-48 border border-slate-700/50 rounded-full animate-[spin_10s_linear_infinite]"}),g.jsx("div",{className:"absolute inset-4 border border-[#00aed9]/30 rounded-full animate-[spin_5s_linear_infinite_reverse]"}),g.jsx("div",{className:"absolute inset-8 border-2 border-t-[#00aed9] border-r-transparent border-b-[#00aed9] border-l-transparent rounded-full animate-spin"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"w-20 h-20 bg-[#00aed9]/10 rounded-full flex items-center justify-center backdrop-blur-sm animate-pulse",children:g.jsx(gf,{size:40,className:"text-[#00aed9]"})})})]}),g.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[g.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-wider animate-pulse",children:Cx[X]}),g.jsx("div",{className:"h-1 w-full bg-slate-800 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-[#00aed9] animate-[translateX_2s_ease-in-out_infinite] w-1/3 rounded-full"})}),g.jsxs("p",{className:"text-slate-500 font-mono text-xs",children:["Procesando ",n.length," vectores de datos."]})]})]}),w==="results"&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4 bg-[#173d57]/50 p-6 rounded-3xl border border-[#00aed9]/30",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-[#00aed9] rounded-full flex items-center justify-center shadow-lg shadow-cyan-500/30",children:g.jsx(vR,{size:24,className:"text-white"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-[10px] text-cyan-300 font-bold uppercase tracking-widest",children:"Identidad Detectada"}),g.jsx("div",{className:"text-2xl font-black text-white uppercase tracking-tight",children:p||"Perfil Estndar"})]})]}),g.jsx("button",{onClick:()=>T("input"),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-xl text-xs font-bold uppercase tracking-wide transition-colors",children:"Nuevo Anlisis"})]}),u.length===0?g.jsxs("div",{className:"text-center py-20",children:[g.jsx(Xv,{size:48,className:"mx-auto text-slate-600 mb-4"}),g.jsx("p",{className:"text-slate-400",children:"No encontramos coincidencias claras para este perfil."})]}):g.jsx("div",{className:"grid gap-4 animate-in slide-in-from-bottom-10 duration-500",children:u.map((k,L)=>{const C=N(k.carId);if(!C)return null;const R=L===0;return g.jsxs("div",{onClick:()=>t(C),className:`
                                                    group relative flex flex-col md:flex-row items-center gap-6 p-6 rounded-3xl cursor-pointer transition-all duration-300
                                                    ${R?"bg-gradient-to-r from-[#00aed9]/20 to-slate-800/80 border border-[#00aed9]/50 shadow-[0_0_30px_rgba(0,174,217,0.15)] transform scale-[1.02]":"bg-slate-800/30 border border-slate-700 hover:bg-slate-800/80"}
                                                `,children:[R&&g.jsxs("div",{className:"absolute -top-3 -right-3 bg-[#00aed9] text-white px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest shadow-lg flex items-center gap-1 z-10",children:[g.jsx(B$,{size:12})," Match Perfecto"]}),g.jsxs("div",{className:"w-full md:w-48 h-32 bg-white/5 rounded-2xl p-2 flex items-center justify-center shrink-0 relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-radial-gradient from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),g.jsx("img",{src:C.img,alt:C.name,className:"max-w-full max-h-full object-contain relative z-10 group-hover:scale-110 transition-transform duration-500"})]}),g.jsxs("div",{className:"flex-1 w-full",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-xl font-black text-white group-hover:text-[#00aed9] transition-colors",children:C.name}),g.jsxs("p",{className:"text-slate-400 text-sm font-bold",children:["$",C.price.toLocaleString()]})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("div",{className:"text-3xl font-black text-white",children:[k.score,"%"]}),g.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Afinidad"})]})]}),g.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full mb-3 overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out ${k.score>85?"bg-[#00aed9]":k.score>60?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${k.score}%`}})}),g.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed border-l-2 border-slate-600 pl-3",children:['"',k.reason,'"']})]}),g.jsx("div",{className:"hidden md:flex bg-slate-700/50 w-10 h-10 rounded-full items-center justify-center group-hover:bg-[#00aed9] group-hover:text-white transition-colors",children:g.jsx(Zv,{size:20})})]},k.carId)})})]})]})]})]})})},f9=({cars:n,onClose:e})=>{const[t,r]=j.useState(null),[s,o]=j.useState(!1),l=n[0],u=n[1],d=async()=>{o(!0);try{const p=await o9(l,u);r(p)}catch(p){console.error(p)}finally{o(!1)}};return!l||!u?null:g.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#0d2232] flex items-center justify-center animate-in fade-in duration-300",children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20"}),g.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-full bg-gradient-to-r from-blue-900/20 to-transparent transform -skew-x-12 -translate-x-20"}),g.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-red-900/20 to-transparent transform -skew-x-12 translate-x-20"})]}),g.jsx("button",{onClick:e,className:"absolute top-6 right-6 z-50 text-slate-500 hover:text-white transition-colors",children:g.jsx(ji,{size:32})}),g.jsxs("div",{className:"w-full h-full max-w-[1800px] flex flex-col relative z-10 p-4 lg:p-8",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsxs("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter italic",children:["Richard ",g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-purple-500",children:"VS"})," Arena"]}),g.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-[0.3em] mt-2",children:"Simulacin Comparativa IA"})]}),g.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row items-center justify-center gap-8 lg:gap-0 relative",children:[g.jsxs("div",{className:`flex-1 w-full h-full flex flex-col items-center justify-center transition-all duration-700 ${t?.winnerId===l.id?"scale-105":t&&t.winnerId!==l.id?"scale-95 opacity-50 grayscale-[0.5]":""}`,children:[g.jsxs("div",{className:"relative w-full max-w-lg aspect-[4/3]",children:[g.jsx("img",{src:l.img,alt:l.name,className:"w-full h-full object-contain drop-shadow-[0_20px_50px_rgba(59,130,246,0.3)]"}),t?.winnerId===l.id&&g.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 animate-bounce",children:g.jsx(dx,{size:48,className:"text-yellow-400 drop-shadow-lg",fill:"currentColor"})})]}),g.jsxs("div",{className:"mt-6 text-center",children:[g.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-tight",children:l.name}),g.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:["$",l.price.toLocaleString()]}),g.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[g.jsx("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs font-bold text-slate-300 uppercase",children:l.type}),l.badge&&g.jsx("span",{className:"px-3 py-1 bg-blue-600 rounded-full text-xs font-bold text-white uppercase",children:l.badge})]})]})]}),g.jsxs("div",{className:"w-24 lg:w-96 flex flex-col items-center justify-center z-20 shrink-0",children:[!t&&!s&&g.jsxs("button",{onClick:d,className:"group relative w-24 h-24 lg:w-32 lg:h-32 bg-slate-900 border-4 border-[#00aed9] rounded-full flex items-center justify-center hover:scale-110 hover:shadow-[0_0_50px_rgba(0,174,217,0.6)] transition-all cursor-pointer",children:[g.jsx("span",{className:"text-4xl lg:text-5xl font-black text-white italic group-hover:animate-pulse",children:"VS"}),g.jsx("div",{className:"absolute inset-0 rounded-full border-t-4 border-[#00aed9] animate-spin [animation-duration:3s]"})]}),s&&g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsx("div",{className:"w-24 h-24 border-4 border-slate-700 border-t-[#00aed9] rounded-full animate-spin"}),g.jsx("p",{className:"text-[#00aed9] font-bold text-xs uppercase tracking-widest animate-pulse",children:"Simulando..."})]}),t&&g.jsxs("div",{className:"flex flex-col items-center gap-4 animate-in zoom-in duration-300",children:[g.jsx("div",{className:"px-6 py-2 bg-[#00aed9] rounded-full shadow-lg shadow-cyan-500/50",children:g.jsx("span",{className:"text-white font-black uppercase tracking-widest text-sm",children:"Anlisis Completo"})}),g.jsx("button",{onClick:()=>r(null),className:"text-slate-500 hover:text-white text-xs font-bold underline",children:"Reiniciar Batalla"})]})]}),g.jsxs("div",{className:`flex-1 w-full h-full flex flex-col items-center justify-center transition-all duration-700 ${t?.winnerId===u.id?"scale-105":t&&t.winnerId!==u.id?"scale-95 opacity-50 grayscale-[0.5]":""}`,children:[g.jsxs("div",{className:"relative w-full max-w-lg aspect-[4/3]",children:[g.jsx("img",{src:u.img,alt:u.name,className:"w-full h-full object-contain drop-shadow-[0_20px_50px_rgba(239,68,68,0.3)] transform -scale-x-100"}),t?.winnerId===u.id&&g.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 animate-bounce",children:g.jsx(dx,{size:48,className:"text-yellow-400 drop-shadow-lg",fill:"currentColor"})})]}),g.jsxs("div",{className:"mt-6 text-center",children:[g.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-tight",children:u.name}),g.jsxs("p",{className:"text-2xl font-bold text-red-400",children:["$",u.price.toLocaleString()]}),g.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[g.jsx("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs font-bold text-slate-300 uppercase",children:u.type}),u.badge&&g.jsx("span",{className:"px-3 py-1 bg-red-600 rounded-full text-xs font-bold text-white uppercase",children:u.badge})]})]})]})]}),t&&g.jsx("div",{className:"mt-12 max-w-5xl mx-auto w-full animate-in slide-in-from-bottom-10 fade-in duration-500",children:g.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-md rounded-[40px] border border-slate-700 p-8 lg:p-10",children:[g.jsxs("div",{className:"text-center mb-10",children:[g.jsxs("h4",{className:"text-[#00aed9] font-black uppercase tracking-[0.2em] mb-3 flex items-center justify-center gap-2",children:[g.jsx(_R,{size:18})," Veredicto de Richard IA"]}),g.jsxs("p",{className:"text-2xl lg:text-3xl font-medium text-white leading-tight max-w-3xl mx-auto",children:['"',t.verdict,'"']})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.categories.map((p,y)=>{const w=p.winnerId===l.id?l.name:p.winnerId===u.id?u.name:"Empate",T=p.winnerId===l.id?"text-blue-400":p.winnerId===u.id?"text-red-400":"text-yellow-400",S=p.winnerId===l.id?"border-blue-500/30 bg-blue-500/5":p.winnerId===u.id?"border-red-500/30 bg-red-500/5":"border-yellow-500/30 bg-yellow-500/5";return g.jsxs("div",{className:`p-6 rounded-3xl border ${S} flex flex-col items-center text-center transition-all hover:scale-105`,children:[g.jsx("span",{className:"text-slate-400 font-bold text-xs uppercase tracking-widest mb-2",children:p.name}),g.jsx("div",{className:`text-lg font-black ${T} mb-2`,children:w}),g.jsxs("p",{className:"text-slate-300 text-sm leading-snug",children:['"',p.reason,'"']})]},y)})})]})})]})]})},vf=(n,e,t)=>{let r="";if(t){const s=new Date;s.setTime(s.getTime()+t*24*60*60*1e3),r="; expires="+s.toUTCString()}document.cookie=n+"="+(e||"")+r+"; path=/; SameSite=Lax; Secure"},n_=n=>{const e=n+"=",t=document.cookie.split(";");for(let r=0;r<t.length;r++){let s=t[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},Px=()=>{const n=n_("richard_visits"),e=n?parseInt(n)+1:1;return vf("richard_visits",e.toString(),365),e},p9="audit_logs",m9="login_attempts",SR=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return"unknown_ip"}},r_=async(n,e="user")=>{(await hf(vs(Jn,"users",n.uid))).exists()||await qa(vs(Jn,"users",n.uid),{email:n.email,role:e,createdAt:new Date})},kR=async n=>{try{const e=await hf(vs(Jn,"users",n));return e.exists()?e.data().role:"user"}catch(e){return console.error("Error fetching role:",e),"user"}},gs=async(n,e,t,r)=>{const s=await SR(),o=navigator.userAgent;if(await Yf(Ku(Jn,p9),{email:n,ip:s,device:o,method:t,success:e,details:r,timestamp:new Date,location:window.location.pathname}),e&&typeof window<"u")try{const{logEvent:l}=await zt(async()=>{const{logEvent:d}=await Promise.resolve().then(()=>Oy);return{logEvent:d}},void 0),u=t.includes("login")?"login":t.includes("signup")?"sign_up":t;l(Zf,u,{method:t})}catch{}};async function g9(n,e){try{const t=await BM(ni,n,e),r=n.includes("admin")||n.includes("richard")?"admin":"user";return await r_(t.user,r),await gs(n,!0,"signup_email"),t.user}catch(t){throw t.code!=="auth/cancelled-popup-request"&&await gs(n,!1,"signup_email",t.message),t}}async function y9(n,e){try{const t=await Gb(ni,n,e);return await gs(n,!0,"login_email"),t.user}catch(t){throw await gs(n,!1,"login_email",t.message),t}}async function v9(){const n=new bi;try{const e=await s1(ni,n);return Promise.all([r_(e.user,"user"),gs(e.user.email||"google_user",!0,"login_google")]).catch(t=>console.error("Background Auth Ops Failed:",t)),e.user}catch(e){throw console.error("Error signing in with Google:",e.message),e}}async function _9(){const n=new Ii;try{const e=await s1(ni,n);return Promise.all([r_(e.user,"user"),gs(e.user.email||"facebook_user",!0,"login_facebook")]).catch(t=>console.error("Background Auth Ops Failed:",t)),e.user}catch(e){throw console.error("Error signing in with Facebook:",e.message),e}}async function w9(){const n=ni.currentUser;try{await Kb(ni),n?.email&&await gs(n.email,!0,"signout")}catch(e){throw console.error("Error signing out:",e.message),e}}const E9=async(n,e,t)=>{const[r,s]=await Promise.all([SR(),Gb(ni,n,e).catch(y=>({error:y}))]),o=`${n}_${r}`.replace(/[^a-zA-Z0-9]/g,"_"),l=vs(Ku(Jn,m9),o),u=async()=>{const y=await hf(l),w=y.exists()?y.data().attempts:0;await qa(l,{attempts:w+1,lastAttempt:new Date().getTime(),ip:r},{merge:!0})},d=await hf(l);if(d.exists()){const y=d.data(),w=new Date().getTime();if(y.attempts>=5&&w-y.lastAttempt<900*1e3)throw await gs(n,!1,"admin_login_blocked","IP Rate Limited"),s.error||await Kb(ni),new Error("ACCESS_DENIED: IP bloqueada temporalmente por intentos fallidos. Intente en 15 minutos.")}if(s.error){const y=s.error;throw await u(),y.message.includes("IP bloqueada")||await gs(n,!1,"admin_login_failed",y.code),y}const p=s;return d.exists()&&await lk(l),await gs(n,!0,"admin_login_success"),p},RR=n=>GM(ni,e=>{n(e)}),T9=async n=>{if(!window.PublicKeyCredential)throw new Error("Passkeys not supported in this browser.");try{const e=new Uint8Array(32);window.crypto.getRandomValues(e);const t=await navigator.credentials.create({publicKey:{challenge:e,rp:{name:"Richard Automotive",id:window.location.hostname},user:{id:Uint8Array.from(n.uid,r=>r.charCodeAt(0)),name:n.email||"user",displayName:n.displayName||n.email||"User"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform"},timeout:6e4,attestation:"none"}});if(t)return await qa(vs(Jn,"users",n.uid,"credentials",t.id),{credentialId:t.id,type:"passkey",createdAt:new Date,userAgent:navigator.userAgent}),await gs(n.email||"unknown",!0,"passkey_registered"),t}catch(e){throw console.error("Passkey Error:",e),new Error("Error registrando Passkey: "+e.message)}},AR=Object.freeze(Object.defineProperty({__proto__:null,getUserRole:kR,logAuthActivity:gs,loginAdmin:E9,registerPasskey:T9,signInWithEmail:y9,signInWithFacebook:_9,signInWithGoogle:v9,signOutUser:w9,signUpWithEmail:g9,subscribeToAuthChanges:RR},Symbol.toStringTag,{value:"Module"})),Zu=j.createContext({user:null,role:null,loading:!0}),x9=({children:n})=>{const[e,t]=j.useState(null),[r,s]=j.useState(null),[o,l]=j.useState(!0);return j.useEffect(()=>{const u=RR(async d=>{if(d){const p=await kR(d.uid);s(p),t(d)}else t(null),s(null);l(!1)});return()=>u()},[]),g.jsx(Zu.Provider,{value:{user:e,role:r,loading:o},children:n})},I9=({onNeuralMatch:n,onBrowseInventory:e,onSellCar:t})=>g.jsxs("section",{className:"relative h-[85vh] min-h-[600px] w-full flex items-center justify-center overflow-hidden rounded-b-[60px] lg:rounded-b-[100px] shadow-2xl shadow-cyan-900/40",children:[g.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[g.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-60 scale-105 animate-in fade-in zoom-in duration-[2s]",style:{backgroundImage:'url("https://www.hyundai.com/content/dam/hyundai/ww/en/images/N/n-vision-74/highlights/n-vision-74-highlights-kv.jpg")'}}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0f172a] via-[#0f172a]/60 to-transparent"}),g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 mix-blend-overlay"})]}),g.jsxs("div",{className:"relative z-10 w-full max-w-7xl mx-auto px-6 lg:px-12 flex flex-col items-center text-center space-y-10",children:[g.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-md border border-white/20 px-6 py-2 rounded-full animate-in slide-in-from-bottom-5 duration-700 fade-in",children:[g.jsx(Zl,{size:16,className:"text-[#00aed9] fill-[#00aed9]"}),g.jsx("span",{className:"text-sm font-bold uppercase tracking-[0.2em] text-white",children:"Experiencia Automotriz 2025"})]}),g.jsxs("h1",{className:"text-6xl md:text-8xl lg:text-9xl font-black text-white tracking-tighter leading-[0.9] animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-100",children:["FUTURE ",g.jsx("br",{}),g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-cyan-200",children:"READY."})]}),g.jsx("p",{className:"text-xl md:text-2xl text-slate-300 max-w-2xl font-medium leading-relaxed animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-200",children:"Compra tu prximo auto 100% online. Sin vendedores, sin sorpresas, y con la garanta de Richard Automotive."}),g.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 pt-4 animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-300",children:[g.jsxs("button",{onClick:e,className:"group relative px-8 py-4 bg-[#00aed9] text-white rounded-full font-black uppercase tracking-widest overflow-hidden transition-all hover:scale-105 hover:shadow-[0_0_40px_rgba(0,174,217,0.4)]",children:[g.jsxs("span",{className:"relative z-10 flex items-center gap-3",children:["Ver Inventario ",g.jsx(lR,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),g.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]}),g.jsxs("button",{onClick:n,className:"group px-8 py-4 bg-white/10 backdrop-blur-md border border-white/20 text-white rounded-full font-black uppercase tracking-widest hover:bg-white/20 transition-all flex items-center gap-3",children:[g.jsx(gf,{size:20,className:"text-[#00aed9]"}),"Neural Match"]}),g.jsxs("button",{onClick:t,className:"group px-8 py-4 bg-emerald-500/10 backdrop-blur-md border border-emerald-500/20 text-emerald-400 rounded-full font-black uppercase tracking-widest hover:bg-emerald-500/20 transition-all flex items-center gap-3",children:[g.jsx(Q$,{size:20}),"Vender mi Auto"]})]})]}),g.jsxs("div",{className:"absolute bottom-12 left-0 right-0 flex justify-center gap-8 md:gap-16 text-white/60 text-[10px] md:text-xs font-bold uppercase tracking-widest animate-in fade-in delay-700",children:[g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," 7-Day Money Back"]}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," 150-Point Inspection"]}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," Home Delivery"]})]})]}),b9=()=>g.jsx("section",{className:"py-12 border-t border-slate-200 dark:border-slate-800",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[g.jsx(sg,{icon:g.jsx(e_,{size:24}),title:"Certificacin 150 Puntos",desc:"Cada auto pasa una inspeccin rigurosa antes de ser listado.",color:"blue"}),g.jsx(sg,{icon:g.jsx(_R,{size:24}),title:"Love Your Car Guarantee",desc:"Prubalo por 24 horas. Si no te enamora, devulvelo.",color:"cyan"}),g.jsx(sg,{icon:g.jsx(hR,{size:24}),title:"Entrega o Recogido",desc:"T eliges: te lo llevamos a casa o vienes a nuestro centro.",color:"purple"})]})}),sg=({icon:n,title:e,desc:t,color:r})=>{const s={blue:"bg-blue-100 dark:bg-blue-900/20 text-blue-500",cyan:"bg-cyan-100 dark:bg-cyan-900/20 text-[#00aed9]",purple:"bg-purple-100 dark:bg-purple-900/20 text-purple-500"};return g.jsxs("div",{className:"flex items-start gap-4 p-6 rounded-3xl bg-slate-50 dark:bg-slate-900/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors cursor-default",children:[g.jsx("div",{className:`p-3 rounded-2xl ${s[r]}`,children:n}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:e}),g.jsx("p",{className:"text-sm text-slate-500 mt-1 leading-relaxed",children:t})]})]})},S9=()=>{const n=[{id:1,name:"Carlos Rodrguez",role:"Dueo de Santa Fe 2024",comment:"La experiencia con Richard Automotive fue increble. La IA me ayud a elegir la SUV perfecta para mi familia y el proceso fue totalmente transparente.",rating:5,img:"https://randomuser.me/api/portraits/men/32.jpg"},{id:2,name:"Sofa Mndez",role:"Duea de IONIQ 5",comment:"Nunca pens que comprar un auto elctrico fuera tan fcil. El 'Neural Match' acert totalmente con mi estilo de vida. Estoy enamorada de mi IONIQ!",rating:5,img:"https://randomuser.me/api/portraits/women/44.jpg"},{id:3,name:"Miguel ngel",role:"Dueo de Genesis GV80",comment:"Atencin de primera clase. Me trajeron el auto a la oficina para probarlo y cerramos el trato en menos de una hora. Eficiencia pura.",rating:5,img:"https://randomuser.me/api/portraits/men/85.jpg"}];return g.jsxs("section",{className:"py-20 relative",children:[g.jsx("div",{className:"absolute top-0 right-0 p-20 opacity-5 pointer-events-none md:block hidden",children:g.jsx(yf,{size:300,className:"text-[#00aed9]"})}),g.jsxs("div",{className:"text-center mb-16 space-y-4 relative z-10",children:[g.jsx("span",{className:"text-[#00aed9] font-black uppercase tracking-widest text-sm",children:"Nuestros Clientes"}),g.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-slate-800 dark:text-white uppercase tracking-tighter",children:["Historias de ",g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-cyan-400",children:"xito"})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 px-4 relative z-10",children:n.map(e=>g.jsxs("div",{className:"bg-white dark:bg-slate-800/80 p-8 rounded-[30px] border border-slate-100 dark:border-slate-700 relative hover:transform hover:-translate-y-2 transition-all duration-300 shadow-xl shadow-slate-200/50 dark:shadow-none",children:[g.jsx("div",{className:"flex gap-1 mb-6 text-amber-400",children:[...Array(e.rating)].map((t,r)=>g.jsx(yf,{size:16,fill:"currentColor",stroke:"none"},r))}),g.jsxs("p",{className:"text-slate-600 dark:text-slate-300 font-medium leading-relaxed mb-8 relative z-10",children:['"',e.comment,'"']}),g.jsxs("div",{className:"flex items-center gap-4 border-t border-slate-100 dark:border-slate-700/50 pt-6",children:[g.jsx("img",{src:e.img,alt:e.name,className:"w-12 h-12 rounded-full object-cover ring-2 ring-[#00aed9]/20"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:e.name}),g.jsx("p",{className:"text-xs text-[#00aed9] font-bold uppercase tracking-wide",children:e.role})]})]})]},e.id))})]})},CR=[{question:"Puedo comprar un auto 100% en lnea sin visitar el concesionario?",answer:"S, absolutamente. Nuestra plataforma 'Richard Automotive Direct' le permite seleccionar su vehculo, personalizar su financiamiento, valorar su trade-in y firmar documentos digitalmente. Entregamos el auto directamente en la puerta de su casa u oficina."},{question:"Cmo funciona la aprobacin de crdito en lnea?",answer:"Es instantnea y segura. Complete nuestro formulario de Pre-Cualificacin encriptado (SSL 256-bit). Nuestro sistema AI analiza su perfil con mltiples bancos simultneamente para ofrecerle los trminos reales (APR, mensualidad y pronto) en minutos, sin afectar su puntaje crediticio inicial (Soft Pull)."},{question:"Aceptan autos en 'Trade-In' aunque deba dinero?",answer:"S. Aceptamos su auto actual como parte de pago. Si todava tiene balance pendiente, nosotros nos encargamos de liquidar el prstamo anterior con su banco. Si el valor de su auto es mayor a la deuda, usamos el excedente a favor de su nueva compra."},{question:"Qu garanta tienen los vehculos usados certificados?"}],k9={"@context":"https://schema.org","@type":"FAQPage",mainEntity:CR.map(n=>({"@type":"Question",name:n.question,acceptedAnswer:{"@type":"Answer",text:n.answer}}))},R9=()=>g.jsx("section",{className:"py-20 bg-white dark:bg-slate-900 border-t border-slate-100 dark:border-slate-800",children:g.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[g.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(k9)}}),g.jsxs("div",{className:"text-center mb-16",children:[g.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#00aed9]/10 text-[#00aed9] font-bold text-xs uppercase tracking-widest mb-4",children:[g.jsx(t3,{size:14})," Soporte al Cliente"]}),g.jsx("h2",{className:"text-3xl md:text-5xl font-black text-slate-800 dark:text-white uppercase tracking-tighter",children:"Preguntas Frecuentes"}),g.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400 max-w-lg mx-auto",children:"Resolvemos sus dudas sobre el proceso de compra digital ms avanzado del mercado."})]}),g.jsx("div",{className:"space-y-4",children:CR.map((n,e)=>g.jsxs("details",{className:"group bg-slate-50 dark:bg-slate-800 rounded-2xl border border-transparent hover:border-[#00aed9] open:border-[#00aed9]/30 transition-all duration-300 overflow-hidden",children:[g.jsxs("summary",{className:"flex justify-between items-center p-6 cursor-pointer list-none text-slate-800 dark:text-white font-bold text-lg select-none group-hover:bg-white dark:group-hover:bg-slate-700/50 transition-colors",children:[g.jsx("span",{children:n.question}),g.jsx("span",{className:"transform group-open:rotate-180 transition-transform duration-300 text-[#00aed9]",children:g.jsx(uR,{})})]}),g.jsx("div",{className:"px-6 pb-6 pt-2 text-slate-500 dark:text-slate-300 leading-relaxed border-t border-slate-100 dark:border-slate-700/50",children:n.answer})]},e))})]})}),A9=()=>g.jsxs("footer",{className:"mt-12 py-12 px-8 lg:px-16 rounded-[40px] bg-[#173d57] dark:bg-[#0d2232] text-white relative overflow-hidden group shadow-2xl shadow-cyan-900/10",children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10 mix-blend-overlay"}),g.jsx("div",{className:"absolute -top-20 -right-20 p-20 opacity-5 pointer-events-none rotate-12 transition-transform duration-[2s] group-hover:rotate-45",children:g.jsx(hR,{size:400})}),g.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-10",children:[g.jsxs("div",{className:"text-center md:text-left",children:[g.jsxs("h3",{className:"text-2xl font-black uppercase tracking-tight flex items-center gap-2 justify-center md:justify-start",children:["Richard",g.jsx("span",{className:"text-[#00aed9]",children:"Automotive"})]}),g.jsx("p",{className:"text-blue-200 text-sm mt-2 max-w-md",children:"Redefiniendo la compra de autos en Puerto Rico con Inteligencia Artificial y transparencia total."})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx(gh,{icon:g.jsx(r3,{size:20}),label:"Instagram",href:"#"}),g.jsx(gh,{icon:g.jsx(J$,{size:20}),label:"Facebook",href:"#"}),g.jsx(gh,{icon:g.jsx(S3,{size:20}),label:"YouTube",href:"#"}),g.jsx(gh,{icon:g.jsx(_3,{size:20}),label:"X / Twitter",href:"#"})]})]}),g.jsxs("div",{className:"mt-12 pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center text-xs font-bold text-slate-400 gap-6",children:[g.jsx("p",{children:" 2025 Richard Automotive. Todos los derechos reservados."}),g.jsxs("div",{className:"flex gap-8",children:[g.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Poltica de Privacidad"}),g.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Trminos de Servicio"}),g.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Mapa del Sitio"})]})]})]}),gh=({icon:n,label:e,href:t})=>g.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-white/10 hover:bg-[#00aed9] hover:scale-110 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg backdrop-blur-sm group",title:e,children:g.jsx("span",{className:"text-white group-hover:animate-bounce",children:n})}),PR=j.createContext(void 0),C9=({children:n})=>{const[e,t]=j.useState(()=>{try{const d=localStorage.getItem("richard_compare_cars_full");return d?JSON.parse(d):[]}catch(d){return console.error("Error parsing comparisons from local storage",d),[]}}),r=d=>{t(d),localStorage.setItem("richard_compare_cars_full",JSON.stringify(d))},s=d=>{if(e.length>=3){alert("Puedes comparar mximo 3 vehculos.");return}e.find(p=>p.id===d.id)||r([...e,d])},o=d=>{r(e.filter(p=>p.id!==d))},l=d=>e.some(p=>p.id===d),u=()=>{r([])};return g.jsx(PR.Provider,{value:{selectedCars:e,addCarToCompare:s,removeCarFromCompare:o,isInComparison:l,clearComparison:u},children:n})},NR=()=>{const n=j.useContext(PR);if(n===void 0)throw new Error("useComparison must be used within a ComparisonProvider");return n},P9=({car:n,isSaved:e,onToggleSave:t})=>{const r=Fa(),{addCarToCompare:s,removeCarFromCompare:o,isInComparison:l}=NR(),[u,d]=j.useState(!1),p=j.useRef(null),y=l(n.id),w=P=>{P.stopPropagation(),y?o(n.id):s(n)},T=P=>{if(!p.current)return;const M=p.current.getBoundingClientRect(),O=P.clientX-M.left,X=P.clientY-M.top;p.current.style.setProperty("--mouse-x",`${O}px`),p.current.style.setProperty("--mouse-y",`${X}px`)},S=Math.round(n.price/72);return g.jsxs("button",{ref:p,onMouseMove:T,onClick:()=>r(`/vehicle/${n.id}`),className:"glass-premium group relative overflow-hidden text-left flex flex-col h-full active:scale-[0.98] transition-all duration-300",children:[g.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden p-8 flex items-center justify-center rounded-t-[24px]",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none"}),g.jsxs("div",{className:"absolute top-6 left-6 z-20 flex flex-col gap-2 items-start",children:[n.badge&&g.jsx("span",{className:"px-3 py-1.5 bg-[#00aed9]/80 backdrop-blur-md text-white text-[10px] font-black uppercase tracking-widest rounded-full shadow-lg border border-white/10",children:n.badge}),g.jsxs("span",{className:"px-3 py-1.5 bg-slate-900/60 text-slate-200 text-[10px] font-bold uppercase tracking-widest rounded-full shadow-sm flex items-center gap-1 backdrop-blur-md border border-white/10",children:[g.jsx(e_,{size:12,className:"text-[#00aed9]"})," Richard Certified"]})]}),g.jsxs("div",{className:"absolute top-6 right-6 z-20 flex flex-col gap-3",children:[g.jsx("div",{onClick:t,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-lg border backdrop-blur-md ${e?"bg-rose-500 border-rose-500 text-white":"bg-slate-900/40 border-white/10 text-white hover:text-rose-400"}`,children:g.jsx(yf,{size:18,fill:e?"currentColor":"none"})}),g.jsx("div",{onClick:w,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-lg border backdrop-blur-md ${y?"bg-[#00aed9] text-white border-[#00aed9]":"bg-slate-900/40 border-white/10 text-white hover:text-[#00aed9]"}`,children:g.jsx(dR,{size:18})})]}),!u&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-0",children:g.jsx(hu,{className:"text-[#00aed9] animate-spin relative z-10",size:32})}),g.jsx("img",{src:n.img,alt:n.name,loading:"lazy",onLoad:()=>d(!0),className:`w-full h-full object-contain transition-all duration-700 drop-shadow-2xl z-10
                        ${u?"opacity-100 scale-100 group-hover:scale-110 group-hover:-rotate-1":"opacity-0 scale-95"}
                    `})]}),g.jsxs("div",{className:"p-8 flex-1 flex flex-col relative z-20",children:[g.jsxs("div",{className:"mb-4",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("span",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-[0.2em]",children:n.type}),g.jsx("div",{className:"h-px w-8 bg-[#00aed9]/50"})]}),g.jsx("h3",{className:"text-2xl font-black text-white tracking-tighter group-hover:text-[#00aed9] transition-colors line-clamp-1 drop-shadow-md text-glow",children:n.name})]}),g.jsxs("div",{className:"flex gap-2 mb-6 flex-wrap",children:[g.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"Auto"}),g.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"Gasolina"}),g.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"4 Puertas"})]}),g.jsxs("div",{className:"mt-auto flex items-end justify-between border-t border-white/10 pt-6",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"text-3xl font-black text-white tracking-tight text-glow",children:["$",n.price.toLocaleString()]}),g.jsxs("p",{className:"text-[10px] font-bold text-[#00aed9] mt-1 flex items-center gap-1",children:["Est. $",S,"/mo"]})]}),g.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00aed9] text-white flex items-center justify-center shadow-[0_0_15px_rgba(0,174,217,0.5)] group-hover:scale-110 transition-transform",children:g.jsx(Zv,{size:20})})]})]})]})},N9=({inventory:n,initialVisualSearch:e,onClearVisualSearch:t,onMagicFix:r,onOpenGarage:s})=>{const[o,l]=j.useState(""),[u,d]=j.useState("all"),[p,y]=j.useState(null),[w,T]=j.useState([]),[S,P]=j.useState(null),[M,O]=j.useState(!1),[X,W]=j.useState(!1),[Q,ae]=j.useState(!1),[de,me]=j.useState(!1),[N,I]=j.useState(null),[A,k]=j.useState([]),[L,C]=j.useState(!1),{user:R}=j.useContext(Zu),ut=Fa(),Je=js();j.useEffect(()=>{const Se=n_("richard_saved_cars");if(Se)try{T(JSON.parse(Se))}catch(Et){console.error("Error parsing saved cars cookie",Et)}},[]),j.useEffect(()=>{e&&ft(e)},[e]);const hn=(Se,Et)=>{if(Se.stopPropagation(),!R){ut("/login",{state:{from:Je}});return}T(It=>{const Xn=It.includes(Et)?It.filter(fr=>fr!==Et):[...It,Et];return vf("richard_saved_cars",JSON.stringify(Xn),30),Xn})},ft=async Se=>{me(!0),O(!0);try{const Et=await a9(Se);l(Et.keywords[1]||Et.keywords[0]);const It=(Et.type||"").toLowerCase();["suv","sedan","pickup","luxury"].includes(It)?d(It):d("all"),I(Et.description),t&&t(),O(!1)}catch(Et){console.error("Error en bsqueda visual automtica",Et),alert("No pudimos analizar la imagen importada."),O(!1)}finally{me(!1)}},{data:ve,fetchNextPage:$e,hasNextPage:ke,isFetchingNextPage:z,status:oe}=MC({queryKey:["cars",u,p],queryFn:({pageParam:Se})=>eR(9,Se,u,p),initialPageParam:null,getNextPageParam:Se=>Se.hasMore?Se.lastDoc:void 0,enabled:!o&&!N,staleTime:300*1e3}),Ge=ve?.pages.flatMap(Se=>Se.cars)||[],rt=!!o||!!N,pt=n.filter(Se=>{let Et=!0;N?(Se.name||"").toLowerCase().includes(o.toLowerCase())||(N||"").toLowerCase().includes(Se.type||"")||Se.type.includes(N.split(" ")[0]||""):Et=(Se.name||"").toLowerCase().includes(o.toLowerCase());const It=u==="all"||Se.type===u;return Et&&It}).sort((Se,Et)=>p==="asc"?Se.price-Et.price:p==="desc"?Et.price-Se.price:0),_t=rt?pt:Ge,St=!rt&&oe==="pending",kt=async Se=>{const Et=Se.target.files?.[0];if(!Et)return;const It=new FileReader;It.readAsDataURL(Et),It.onload=async()=>{const Xn=It.result.split(",")[1];await ft(Xn)}},wt=(Se,Et)=>{Se.stopPropagation(),k(It=>It.some(fr=>fr.id===Et.id)?It.filter(fr=>fr.id!==Et.id):It.length>=2?(alert("Modo VS: Mximo 2 unidades para comparar."),It):[...It,Et])},Wt=async()=>{r&&(C(!0),await r(),C(!1))};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"p-0 lg:p-0 w-full pb-24 space-y-0 bg-slate-50 dark:bg-slate-950",children:[g.jsx(I9,{onNeuralMatch:()=>W(!0),onBrowseInventory:()=>{document.getElementById("inventory-grid")?.scrollIntoView({behavior:"smooth"})},onSellCar:()=>ut("/appraisal")}),g.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 lg:px-12 space-y-16 -mt-20 relative z-20",children:[g.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-[40px] shadow-xl shadow-slate-200/50 dark:shadow-none p-4 md:p-8",children:g.jsx(b9,{})}),g.jsxs("div",{id:"inventory-grid",className:"scroll-mt-32",children:[g.jsx("div",{className:"sticky top-4 z-30 py-4 px-6 bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl rounded-full shadow-lg border border-slate-100 dark:border-slate-800 transition-all duration-300",children:g.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[g.jsxs("div",{className:"flex-1 relative w-full group",children:[g.jsx(f3,{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 group-focus-within:text-[#00aed9] transition-colors",size:24}),g.jsx("input",{type:"text",placeholder:N?`Buscando similares a: ${o}...`:"Buscar modelo, ao o caractersticas...",className:"w-full pl-16 pr-20 py-4 bg-transparent outline-none text-lg font-semibold dark:text-white placeholder:text-slate-300 dark:placeholder:text-slate-600",value:o,onChange:Se=>{l(Se.target.value),I(null)}}),g.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:[g.jsxs("button",{onClick:()=>W(!0),className:"hidden md:flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-500 rounded-full transition-all text-xs font-bold uppercase tracking-wide border border-transparent hover:border-cyan-400",title:"Encuentra tu auto ideal por estilo de vida",children:[g.jsx(gf,{size:16})," Neural Match"]}),g.jsx("button",{onClick:()=>O(!0),className:"p-3 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-500 rounded-full transition-all",title:"Bsqueda Visual por IA",children:g.jsx(ux,{size:20})})]})]}),g.jsxs("div",{className:"flex gap-4 items-center w-full lg:w-auto overflow-x-auto pb-2 lg:pb-0 scrollbar-hide",children:[g.jsx("div",{className:"flex gap-2 p-1.5 bg-slate-100 dark:bg-slate-800 rounded-full",children:["all","suv","sedan","pickup"].map(Se=>g.jsx("button",{onClick:()=>d(Se),className:`px-5 py-3 rounded-full font-black text-xs uppercase tracking-widest transition-all whitespace-nowrap ${u===Se?"bg-[#173d57] dark:bg-[#00aed9] text-white shadow-md":"text-slate-400 hover:text-slate-600 dark:hover:text-white"}`,children:Se==="all"?"Todos":Se},Se))}),g.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-slate-100 dark:bg-slate-800 rounded-full",children:[g.jsxs("button",{onClick:()=>y(Se=>Se==="asc"?null:"asc"),className:`px-4 py-3 rounded-full flex items-center gap-2 text-xs font-bold uppercase tracking-wide transition-all ${p==="asc"?"bg-[#00aed9] text-white":"text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,title:"Menor Precio",children:[g.jsx(ng,{size:14,className:"rotate-180"})," ",g.jsx("span",{className:"hidden sm:inline",children:"$-$$$"})]}),g.jsxs("button",{onClick:()=>y(Se=>Se==="desc"?null:"desc"),className:`px-4 py-3 rounded-full flex items-center gap-2 text-xs font-bold uppercase tracking-wide transition-all ${p==="desc"?"bg-[#00aed9] text-white":"text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,title:"Mayor Precio",children:[g.jsx(ng,{size:14})," ",g.jsx("span",{className:"hidden sm:inline",children:"$$$-$"})]})]})]})]})}),g.jsxs("div",{className:"flex justify-between items-end px-2 mt-8 mb-6",children:[g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-black text-slate-800 dark:text-white",children:[_t.length," ",rt?"Resultados":"Vehculos"]}),w.length>0&&g.jsxs("button",{onClick:()=>s&&s(),className:"text-sm text-[#00aed9] font-bold mt-1 flex items-center gap-1 hover:underline cursor-pointer",children:[g.jsx(yf,{size:14,fill:"currentColor"})," Ver Mi Garaje Digital (",w.length,")"]})]}),N&&g.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-[#00aed9]/10 to-transparent border-l-4 border-[#00aed9] p-3 rounded-r-xl",children:[g.jsx(Zl,{size:16,className:"text-[#00aed9]"}),g.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-300",children:[g.jsx("span",{className:"font-bold text-[#00aed9]",children:":"})," Resultados visuales."]}),g.jsx("button",{onClick:()=>{I(null),l(""),d("all")},className:"ml-2 text-[10px] font-bold underline hover:text-[#00aed9]",children:"Limpiar"})]})]}),g.jsx("div",{className:"pb-10 space-y-8",children:St?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(Se=>g.jsx("div",{className:"h-[400px] bg-slate-100 dark:bg-slate-800 rounded-[40px] animate-pulse"},Se))}):_t.length===0?g.jsx("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-center bg-white dark:bg-slate-800/50 rounded-[40px] border-2 border-dashed border-slate-300 dark:border-slate-700 animate-in fade-in",children:rt?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-2xl font-black text-slate-300 dark:text-slate-500 uppercase tracking-tight",children:"Sin Resultados"}),g.jsx("button",{onClick:()=>{l(""),d("all"),I(null)},className:"mt-4 text-[#00aed9] font-bold underline hover:text-cyan-400",children:"Limpiar Filtros"})]}):g.jsxs(g.Fragment,{children:[g.jsx(W$,{size:48,className:"text-slate-400 mb-4"}),g.jsx("h3",{className:"text-2xl font-black text-slate-700 dark:text-white uppercase tracking-tight",children:"Base de datos vaca"}),g.jsx("p",{className:"text-slate-500 mt-2 max-w-md",children:"No hay autos visibles."}),r?g.jsx("button",{onClick:Wt,disabled:L,className:"mt-6 px-8 py-4 bg-rose-600 hover:bg-rose-500 text-white rounded-full font-black uppercase tracking-widest shadow-xl shadow-rose-600/30 active:scale-95 transition-all flex items-center gap-3 animate-bounce",children:L?g.jsxs(g.Fragment,{children:[" ",g.jsx(hu,{className:"animate-spin"})," Reparando... "]}):g.jsxs(g.Fragment,{children:[" ",g.jsx(b3,{size:20}),"  Reparacin Automtica "]})}):g.jsx("p",{className:"text-slate-500 mb-6 max-w-md",children:"Ve al Admin Panel para configurar."})]})}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:_t.map(Se=>g.jsx(P9,{car:Se,onSelect:()=>P(Se),onCompare:Et=>wt(Et,Se),isComparing:A.some(Et=>Et.id===Se.id),isSaved:w.includes(Se.id),onToggleSave:Et=>hn(Et,Se.id)},Se.id))}),!rt&&ke&&g.jsx("div",{className:"flex justify-center pt-8",children:g.jsxs("button",{onClick:()=>$e(),disabled:z,className:"px-8 py-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-full font-bold text-slate-600 dark:text-white hover:bg-[#00aed9] hover:text-white hover:border-[#00aed9] transition-all shadow-lg shadow-slate-200/50 dark:shadow-none active:scale-95 flex items-center gap-2 group",children:[z?g.jsx(hu,{className:"animate-spin"}):g.jsx(ng,{className:"group-hover:translate-y-1 transition-transform",size:18}),z?"Cargando ms...":"Cargar Ms Vehculos"]})})]})})]}),g.jsx(R9,{}),g.jsx(S9,{}),g.jsx(A9,{})]})]}),A.length>0&&g.jsxs("div",{className:"fixed bottom-24 lg:bottom-12 left-1/2 -translate-x-1/2 z-40 bg-[#173d57] dark:bg-[#0d2232] text-white pl-2 pr-6 py-2 rounded-full shadow-2xl flex items-center gap-4 animate-in slide-in-from-bottom-5 border border-[#00aed9]/30 backdrop-blur-md",children:[g.jsxs("div",{className:"flex -space-x-3",children:[A.map(Se=>g.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[#173d57] dark:border-[#0d2232] bg-white flex items-center justify-center overflow-hidden",children:g.jsx("img",{src:Se.img,alt:Se.name,className:"w-full h-full object-cover"})},Se.id)),A.length<2&&g.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[#173d57] dark:border-[#0d2232] bg-white/10 flex items-center justify-center text-xs font-bold border-dashed border-white/30",children:"?"})]}),g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"font-bold text-sm leading-tight",children:"Comparativa VS"}),g.jsxs("span",{className:"text-[10px] text-cyan-300 font-medium",children:[A.length," de 2 Seleccionados"]})]}),A.length===2&&g.jsx("button",{onClick:()=>ae(!0),className:"ml-2 bg-[#00aed9] hover:bg-cyan-400 text-white px-5 py-2 rounded-full text-xs font-black uppercase tracking-wider transition-all shadow-[0_0_15px_rgba(0,174,217,0.5)] animate-pulse",children:"Iniciar"}),g.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),g.jsx("button",{onClick:()=>k([]),className:"p-1.5 hover:bg-white/10 rounded-full text-slate-300 hover:text-white transition-colors",children:g.jsx(ji,{size:16})})]}),X&&g.jsx(h9,{inventory:n,onClose:()=>W(!1),onSelectCar:Se=>{P(Se),W(!1)}}),Q&&g.jsx(f9,{cars:A,onClose:()=>ae(!1)}),M&&g.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-[#0d2232]/90 backdrop-blur-xl animate-in fade-in",children:g.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[40px] max-w-lg w-full relative shadow-2xl border border-slate-700",children:[g.jsx("button",{onClick:()=>O(!1),className:"absolute top-6 right-6 text-slate-400 hover:text-white transition-colors",children:g.jsx(ji,{})}),g.jsxs("h3",{className:"text-3xl font-black text-slate-800 dark:text-white mb-2 flex items-center gap-3",children:[g.jsx(ux,{className:"text-[#00aed9]",size:32})," Visual AI"]}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 font-medium",children:"Sube una foto y nuestra IA encontrar el match perfecto en nuestro inventario."}),de?g.jsxs("div",{className:"flex flex-col items-center justify-center h-48 space-y-4 border-2 border-dashed border-[#00aed9]/30 rounded-3xl bg-[#00aed9]/5",children:[g.jsx(hu,{className:"w-12 h-12 text-[#00aed9] animate-spin"}),g.jsx("p",{className:"text-sm font-bold animate-pulse text-[#00aed9] uppercase tracking-widest",children:"Escaneando..."})]}):g.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-3xl cursor-pointer bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all group hover:border-[#00aed9]",children:[g.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[g.jsx(w3,{className:"w-12 h-12 mb-3 text-slate-400 group-hover:text-[#00aed9] transition-colors scale-100 group-hover:scale-110 duration-300"}),g.jsxs("p",{className:"mb-2 text-sm text-slate-500 dark:text-slate-400",children:[g.jsx("span",{className:"font-bold text-[#00aed9]",children:"Sube una foto"})," o arrastra aqu"]})]}),g.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:kt})]})]})}),S&&g.jsx(c9,{car:S,onClose:()=>P(null)}),g.jsx(bR,{inventory:n})]})},O9=()=>g.jsxs("a",{href:`https://wa.me/17875550123?text=${encodeURIComponent("Hola, me gustara ms informacin sobre su inventario.")}`,target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-24 right-5 z-50 p-4 bg-[#25D366] hover:bg-[#128C7E] text-white rounded-full shadow-lg hover:scale-110 transition-all duration-300 animate-bounce-slow flex items-center justify-center group",title:"Chat en WhatsApp",children:[g.jsx(fR,{size:28,fill:"white"}),g.jsx("span",{className:"absolute right-full mr-3 bg-white dark:bg-slate-800 text-slate-800 dark:text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Habla con Richard IA"})]}),s_=j.createContext({theme:"light",toggleTheme:()=>{}}),D9=({children:n})=>{const[e,t]=j.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),r=()=>{t(s=>{const o=s==="light"?"dark":"light";return localStorage.setItem("theme",o),o})};return g.jsx(s_.Provider,{value:{theme:e,toggleTheme:r},children:n})},M9=()=>{const{theme:n,toggleTheme:e}=j.useContext(s_);return g.jsx("button",{onClick:e,"aria-label":`Activar modo ${n==="light"?"oscuro":"claro"}`,className:"p-2 rounded-full text-slate-400 hover:text-white hover:bg-white/10 transition-colors",children:n==="light"?g.jsx(c3,{size:18}):g.jsx(y3,{size:18})})},L9=()=>{const[n,e]=j.useState(!1);j.useEffect(()=>{if(n_("richard_cookie_consent"))Px();else{const o=setTimeout(()=>e(!0),1500);return()=>clearTimeout(o)}},[]);const t=()=>{vf("richard_cookie_consent","true",365),Px(),e(!1)},r=()=>{vf("richard_cookie_consent","false",7),e(!1)};return n?g.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[1000] p-4 md:p-6 flex justify-center animate-in slide-in-from-bottom-10 fade-in duration-500",children:g.jsxs("div",{className:"bg-[#0d2232]/95 backdrop-blur-xl border border-slate-700 shadow-2xl rounded-3xl p-6 md:p-8 max-w-4xl w-full flex flex-col md:flex-row items-center gap-6 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00aed9] to-transparent opacity-50"}),g.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-[#00aed9]/10 rounded-full shrink-0",children:g.jsx(H$,{size:32,className:"text-[#00aed9]"})}),g.jsxs("div",{className:"flex-1 text-center md:text-left",children:[g.jsx("h4",{className:"text-white font-black text-lg mb-2",children:"Valoramos tu Privacidad"}),g.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed",children:["Utilizamos cookies propias y de terceros para mejorar tu experiencia de navegacin, analizar el trfico del sitio y personalizar el contenido del inventario. Al hacer clic en ",g.jsx("span",{className:"text-white font-bold",children:'"Aceptar todo"'}),", consientes el uso de todas las cookies."]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto shrink-0",children:[g.jsx("button",{onClick:r,className:"px-6 py-3 rounded-xl border border-slate-600 text-slate-300 hover:text-white hover:border-slate-500 text-xs font-bold uppercase tracking-widest transition-colors",children:"Rechazar"}),g.jsxs("button",{onClick:t,className:"px-8 py-3 bg-[#00aed9] hover:bg-cyan-500 text-white rounded-xl text-xs font-bold uppercase tracking-widest shadow-lg shadow-cyan-500/20 transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[g.jsx(e_,{size:16})," Aceptar Todo"]})]}),g.jsx("button",{onClick:()=>e(!1),className:"absolute top-4 right-4 text-slate-500 hover:text-white transition-colors md:hidden",children:g.jsx(ji,{size:20})})]})}):null};function j9(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:s,onRegisteredSW:o,onRegisterError:l}=n;let u,d;const p=async(w=!0)=>{await d};async function y(){if("serviceWorker"in navigator){if(u=await zt(async()=>{const{Workbox:w}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:w}},[]).then(({Workbox:w})=>new w("/richard-app-google-studio/sw.js",{scope:"/richard-app-google-studio/",type:"classic"})).catch(w=>{l?.(w)}),!u)return;u.addEventListener("activated",w=>{(w.isUpdate||w.isExternal)&&window.location.reload()}),u.addEventListener("installed",w=>{w.isUpdate||r?.()}),u.register({immediate:e}).then(w=>{o?o("/richard-app-google-studio/sw.js",w):s?.(w)}).catch(w=>{l?.(w)})}}return d=y(),p}function V9(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:r,onRegistered:s,onRegisteredSW:o,onRegisterError:l}=n,[u,d]=j.useState(!1),[p,y]=j.useState(!1),[w]=j.useState(()=>j9({immediate:e,onOfflineReady(){y(!0),r?.()},onNeedRefresh(){d(!0),t?.()},onRegistered:s,onRegisteredSW:o,onRegisterError:l}));return{needRefresh:[u,d],offlineReady:[p,y],updateServiceWorker:w}}const F9=()=>{const{offlineReady:[n,e],needRefresh:[t,r],updateServiceWorker:s}=V9({onRegistered(l){},onRegisterError(l){}}),o=()=>{e(!1),r(!1)};return!n&&!t?null:g.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[2000] animate-in slide-in-from-bottom-5 fade-in",children:g.jsxs("div",{className:"bg-[#0d2232] border border-[#00aed9]/30 p-4 rounded-2xl shadow-2xl flex items-center gap-4 text-white min-w-[300px]",children:[g.jsxs("div",{className:"p-3 bg-gradient-to-br from-[#00aed9] to-blue-600 rounded-xl relative",children:[g.jsx(Y$,{size:20,className:"text-white relative z-10"}),g.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse rounded-xl"})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-bold text-sm",children:n?"App lista para offline":"Nueva versin disponible"}),g.jsx("p",{className:"text-[10px] text-slate-400",children:n?"Ya puedes usar la app sin internet.":"Recarga para ver los cambios."})]}),t&&g.jsxs("button",{className:"px-4 py-2 bg-white text-[#0d2232] rounded-lg text-xs font-bold hover:bg-slate-200 transition-colors flex items-center gap-2",onClick:()=>s(!0),children:[g.jsx(gR,{size:14})," Recargar"]}),g.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-xs",onClick:o,children:"Cerrar"})]})})},U9=()=>{const[n,e]=j.useState(!navigator.onLine);return j.useEffect(()=>{const t=()=>e(!1),r=()=>e(!0);return window.addEventListener("online",t),window.addEventListener("offline",r),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}},[]),n?g.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[100] bg-red-600 text-white py-2 px-4 shadow-lg flex items-center justify-center gap-2 animate-in slide-in-from-bottom-full duration-500",children:[g.jsx(I3,{size:16}),g.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Modo Offline Activo  Viendo datos guardados"})]}):null},$9=()=>{const{selectedCars:n,removeCarFromCompare:e}=NR(),t=Fa();return n.length===0?null:g.jsx("div",{className:"fixed bottom-0 left-0 w-full z-50 p-4 flex justify-center pointer-events-none",children:g.jsxs("div",{className:"bg-[#0d2232] border border-[#00aed9]/30 rounded-2xl shadow-2xl p-4 flex items-center gap-6 pointer-events-auto max-w-2xl w-full backdrop-blur-xl animate-in slide-in-from-bottom duration-300",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00aed9]/10 flex items-center justify-center text-[#00aed9]",children:g.jsx(dR,{size:20})}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-white font-bold text-sm",children:"Comparando"}),g.jsxs("p",{className:"text-slate-400 text-xs",children:[n.length," Vehculos seleccionados"]})]})]}),g.jsxs("div",{className:"flex-1 flex items-center gap-2 overflow-x-auto",children:[n.map(r=>g.jsxs("div",{className:"relative group shrink-0",children:[g.jsx("img",{src:r.img,alt:r.name,className:"w-16 h-12 object-contain bg-white/5 rounded-lg border border-white/10"}),g.jsx("button",{onClick:()=>e(r.id),className:"absolute -top-2 -right-2 bg-slate-900 border border-slate-700 text-slate-400 hover:text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(ji,{size:12})})]},r.id)),n.length<3&&g.jsx("div",{className:"w-16 h-12 rounded-lg border border-dashed border-slate-700 flex items-center justify-center text-slate-600 text-xs text-center leading-none",children:"Agregar +"})]}),g.jsxs("button",{onClick:()=>t("/compare"),className:"bg-[#00aed9] hover:bg-[#009ac0] text-slate-900 font-black uppercase text-xs tracking-widest py-3 px-6 rounded-xl transition-all shadow-lg shadow-cyan-500/20 flex items-center gap-2",children:["Comparar ",g.jsx(lR,{size:16})]})]})})},OR=j.createContext(void 0),z9=({children:n})=>{const[e,t]=j.useState([]),r=j.useCallback(o=>{t(l=>l.filter(u=>u.id!==o))},[]),s=j.useCallback((o,l)=>{const u=Date.now().toString();t(d=>[...d,{id:u,type:o,message:l}]),setTimeout(()=>{r(u)},5e3)},[r]);return g.jsxs(OR.Provider,{value:{notifications:e,addNotification:s,removeNotification:r},children:[n,g.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(o=>g.jsxs("div",{className:`
              pointer-events-auto flex items-start gap-3 p-4 rounded-xl shadow-2xl backdrop-blur-md border border-white/10 text-white min-w-[300px] max-w-sm animate-in slide-in-from-right-10 fade-in duration-300
              ${o.type==="success"?"bg-emerald-600/90 shadow-emerald-900/20":""}
              ${o.type==="error"?"bg-rose-600/90 shadow-rose-900/20":""}
              ${o.type==="info"?"bg-slate-800/90 shadow-slate-900/20":""}
            `,children:[g.jsxs("div",{className:"mt-0.5",children:[o.type==="success"&&g.jsx(q$,{size:18}),o.type==="error"&&g.jsx(Xv,{size:18}),o.type==="info"&&g.jsx(n3,{size:18})]}),g.jsx("div",{className:"flex-1 text-sm font-medium leading-relaxed",children:o.message}),g.jsx("button",{onClick:()=>r(o.id),className:"text-white/60 hover:text-white transition-colors",children:g.jsx(ji,{size:16})})]},o.id))})]})},B9=()=>{const n=j.useContext(OR);if(!n)throw new Error("useNotification must be used within a NotificationProvider");return n};var ec;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(ec||(ec={}));class ig extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const q9=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},H9=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},s=()=>e!==null?e.name:q9(n),o=()=>s()!=="web",l=w=>{const T=p.get(w);return!!(T?.platforms.has(s())||u(w))},u=w=>{var T;return(T=t.PluginHeaders)===null||T===void 0?void 0:T.find(S=>S.name===w)},d=w=>n.console.error(w),p=new Map,y=(w,T={})=>{const S=p.get(w);if(S)return console.warn(`Capacitor plugin "${w}" already registered. Cannot register plugins twice.`),S.proxy;const P=s(),M=u(w);let O;const X=async()=>(!O&&P in T?O=typeof T[P]=="function"?O=await T[P]():O=T[P]:e!==null&&!O&&"web"in T&&(O=typeof T.web=="function"?O=await T.web():O=T.web),O),W=(I,A)=>{var k,L;if(M){const C=M?.methods.find(R=>A===R.name);if(C)return C.rtype==="promise"?R=>t.nativePromise(w,A.toString(),R):(R,ut)=>t.nativeCallback(w,A.toString(),R,ut);if(I)return(k=I[A])===null||k===void 0?void 0:k.bind(I)}else{if(I)return(L=I[A])===null||L===void 0?void 0:L.bind(I);throw new ig(`"${w}" plugin is not implemented on ${P}`,ec.Unimplemented)}},Q=I=>{let A;const k=(...L)=>{const C=X().then(R=>{const ut=W(R,I);if(ut){const Je=ut(...L);return A=Je?.remove,Je}else throw new ig(`"${w}.${I}()" is not implemented on ${P}`,ec.Unimplemented)});return I==="addListener"&&(C.remove=async()=>A()),C};return k.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:I,writable:!1,configurable:!1}),k},ae=Q("addListener"),de=Q("removeListener"),me=(I,A)=>{const k=ae({eventName:I},A),L=async()=>{const R=await k;de({eventName:I,callbackId:R},A)},C=new Promise(R=>k.then(()=>R({remove:L})));return C.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},C},N=new Proxy({},{get(I,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return M?me:ae;case"removeListener":return de;default:return Q(A)}}});return r[w]=N,p.set(w,{name:w,proxy:N,platforms:new Set([...Object.keys(T),...M?[P]:[]])}),N};return t.convertFileSrc||(t.convertFileSrc=w=>w),t.getPlatform=s,t.handleError=d,t.isNativePlatform=o,t.isPluginAvailable=l,t.registerPlugin=y,t.Exception=ig,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},G9=n=>n.Capacitor=H9(n),Cu=G9(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),dc=Cu.registerPlugin;class i_{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,t);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const s=this.listeners[e];if(!s){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(t),this.retainedEventArguments[e]=o}return}s.forEach(o=>o(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new Cu.Exception(e,ec.Unimplemented)}unavailable(e="not available"){return new Cu.Exception(e,ec.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const s=r.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const Nx=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ox=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class K9 extends i_{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Ox(s).trim(),o=Ox(o).trim(),t[s]=o}),t}async setCookie(e){try{const t=Nx(e.key),r=Nx(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${s}; path=${o}; ${l};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}dc("CapacitorCookies",{web:()=>new K9});const W9=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>t(s),r.readAsDataURL(n)}),Q9=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(s=>s.toLocaleLowerCase()).reduce((s,o,l)=>(s[o]=n[e[l]],s),{})},Y9=(n,e=!0)=>n?Object.entries(n).reduce((r,s)=>{const[o,l]=s;let u,d;return Array.isArray(l)?(d="",l.forEach(p=>{u=e?encodeURIComponent(p):p,d+=`${o}=${u}&`}),d.slice(0,-1)):(u=e?encodeURIComponent(l):l,d=`${o}=${u}`),`${r}&${d}`},"").substr(1):null,J9=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),s=Q9(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(s.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[l,u]of Object.entries(n.data||{}))o.set(l,u);t.body=o.toString()}else if(s.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((u,d)=>{o.append(d,u)});else for(const u of Object.keys(n.data))o.append(u,n.data[u]);t.body=o;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(s.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class X9 extends i_{async request(e){const t=J9(e,e.webFetchExtra),r=Y9(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,o=await fetch(s,t),l=o.headers.get("content-type")||"";let{responseType:u="text"}=o.ok?e:{};l.includes("application/json")&&(u="json");let d,p;switch(u){case"arraybuffer":case"blob":p=await o.blob(),d=await W9(p);break;case"json":d=await o.json();break;default:d=await o.text()}const y={};return o.headers.forEach((w,T)=>{y[T]=w}),{data:d,headers:y,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}dc("CapacitorHttp",{web:()=>new X9});var Dx;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(Dx||(Dx={}));var Mx;(function(n){n.StatusBar="StatusBar",n.NavigationBar="NavigationBar"})(Mx||(Mx={}));class Z9 extends i_{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}dc("SystemBars",{web:()=>new Z9});const la=dc("PushNotifications",{}),e6=async()=>{if(!Cu.isNativePlatform())return;let n=await la.checkPermissions();if(n.receive==="prompt"&&(n=await la.requestPermissions()),n.receive!=="granted"){console.error("User denied permissions!");return}await la.register(),la.addListener("registration",e=>{}),la.addListener("registrationError",e=>{console.error("Error on registration: "+JSON.stringify(e))}),la.addListener("pushNotificationReceived",e=>{alert(`Mensaje de Richard Auto: ${e.title}
${e.body}`)}),la.addListener("pushNotificationActionPerformed",e=>{})};function t6(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,t){return new Proxy({},{get(r,s){return(o,l,u)=>{const d=n.Capacitor.Plugins[t];if(d===void 0){u(new Error(`Capacitor plugin ${t} not found`));return}if(typeof d[s]!="function"){u(new Error(`Method ${s} not found in Capacitor plugin ${t}`));return}(async()=>{try{const p=await d[s](o);l(p)}catch(p){u(p)}})()}}})}})}function n6(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,t){return n.cordova.plugins[t]}})}function r6(n=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!n?t6(window):window.cordova!==void 0&&n6(window))}const Lx=dc("Geolocation",{web:()=>zt(()=>import("./web-obTb6A1D.js"),[]).then(n=>new n.GeolocationWeb)});r6();var jx;(function(n){n[n.Sunday=1]="Sunday",n[n.Monday=2]="Monday",n[n.Tuesday=3]="Tuesday",n[n.Wednesday=4]="Wednesday",n[n.Thursday=5]="Thursday",n[n.Friday=6]="Friday",n[n.Saturday=7]="Saturday"})(jx||(jx={}));const DR=dc("LocalNotifications",{web:()=>zt(()=>import("./web-Ci9aaeuA.js"),[]).then(n=>new n.LocalNotificationsWeb)}),Vx={latitude:18.3986,longitude:-66.1557},s6=500;function i6(n,e,t,r){const o=yh(t-n),l=yh(r-e),u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(yh(n))*Math.cos(yh(t))*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))*1e3}function yh(n){return n*(Math.PI/180)}const o6=async()=>{if(!Cu.isNativePlatform()){console.log("Geofencing skipped (Web Platform)");return}try{const n=await DR.requestPermissions(),e=await Lx.requestPermissions();if(n.display!=="granted"||e.location!=="granted"){console.log("Permissions denied for Geofencing");return}Lx.watchPosition({enableHighAccuracy:!0,timeout:5e3},t=>{if(t){const r=i6(t.coords.latitude,t.coords.longitude,Vx.latitude,Vx.longitude);console.log(`Distance to dealer: ${Math.floor(r)}m`),r<s6&&a6()}})}catch(n){console.error("Geofence Error:",n)}};let Fx=0;const a6=async()=>{const n=Date.now();n-Fx<36e5||(Fx=n,await DR.schedule({notifications:[{title:" Bienvenido a Richard Auto!",body:"Abre tu App para ver las ofertas exclusivas de hoy.",id:1,schedule:{at:new Date(Date.now()+100)},sound:void 0,attachments:void 0,actionTypeId:"",extra:null}]}))},l6=qn.lazy(()=>zt(()=>import("./AdminPanel-D4c0Zz1S.js"),__vite__mapDeps([0,1,2,3,4]))),c6=qn.lazy(()=>zt(()=>import("./AIConsultant-B7JmfuAq.js"),[])),u6=qn.lazy(()=>zt(()=>import("./AILabView-qdu_3yTZ.js"),__vite__mapDeps([5,3,6,7]))),d6=qn.lazy(()=>zt(()=>import("./UserLogin-H-DiqIuW.js"),[])),h6=qn.lazy(()=>zt(()=>import("./VehicleDetail-CWrhaxIG.js"),__vite__mapDeps([8,1,9]))),f6=qn.lazy(()=>zt(()=>import("./TradeInView-OdM8Y0me.js"),__vite__mapDeps([10,6]))),p6=qn.lazy(()=>zt(()=>import("./AppraisalView-CLbn5gG7.js"),__vite__mapDeps([11,9]))),m6=qn.lazy(()=>zt(()=>import("./ComparisonView-DZsPTSM0.js"),__vite__mapDeps([12,6]))),g6=qn.lazy(()=>zt(()=>import("./AdminLogin-BJsh_iXw.js"),__vite__mapDeps([13,4,14,15,2,16]))),y6=qn.lazy(()=>zt(()=>import("./BlogView-CrLhgfO6.js"),[])),v6=qn.lazy(()=>zt(()=>import("./DigitalGarage-Ddxl24_C.js"),__vite__mapDeps([17,6,16,14,18]))),_6=qn.lazy(()=>zt(()=>import("./PreQualifyView-B30D6vEF.js"),__vite__mapDeps([19,6,14,15,2]))),w6=qn.lazy(()=>zt(()=>import("./PrivacyView-zAkEn1EY.js"),__vite__mapDeps([20,6,21]))),E6=qn.lazy(()=>zt(()=>import("./TermsView-ChmAxOcJ.js"),__vite__mapDeps([22,6,18]))),T6=qn.lazy(()=>zt(()=>import("./NotFound-CZrQuLOL.js"),__vite__mapDeps([23,6]))),x6=qn.lazy(()=>zt(()=>import("./FrameworkDashboard-Hwoa4xMa.js"),__vite__mapDeps([24,21,14,7,25]))),I6=[{name:"Hyundai Tucson 2026",price:39500,type:"suv",badge:"Rediseado",img:"https://images.unsplash.com/photo-1695221971766-3d778d910dc7?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Elantra 2026",price:28900,type:"sedan",badge:"Deportivo",img:"https://images.unsplash.com/photo-1609520505218-7421da3b3d80?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Venue 2026",price:24500,type:"suv",badge:"Compacto",img:"https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?q=80&w=1200&auto=format&fit=crop",featured:!1},{name:"Hyundai Santa Fe 2026",price:44200,type:"suv",badge:"Ms Espacio",img:"https://images.unsplash.com/photo-1631522858632-1b157bd752e2?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Palisade 2026",price:58900,type:"luxury",badge:"Flagship",img:"https://images.unsplash.com/photo-1647494480572-c2834b6e56ad?q=80&w=1200&auto=format&fit=crop",featured:!0}],b6=()=>g.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0d2232] text-white relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-cyan-900/20 to-[#0d2232]"}),g.jsxs("div",{className:"z-10 flex flex-col items-center",children:[g.jsx("div",{className:"w-16 h-16 border-4 border-cyan-500/30 border-t-cyan-400 rounded-full animate-spin mb-6 shadow-[0_0_30px_rgba(0,174,217,0.3)]"}),g.jsxs("h1",{className:"text-2xl font-black tracking-tighter mb-2",children:["RICHARD ",g.jsx("span",{className:"text-[#00aed9]",children:"AUTOMOTIVE"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),g.jsx("p",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400",children:"Initializing System v2.7"})]})]})]}),Ux=({children:n})=>{const{user:e,loading:t}=j.useContext(Zu),r=js();return t?g.jsx("div",{className:"p-10 flex justify-center",children:g.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-cyan-500 rounded-full border-t-transparent"})}):e?g.jsx(g.Fragment,{children:n}):g.jsx(PI,{to:"/login",state:{from:r},replace:!0})},S6=({children:n})=>{const{user:e,role:t,loading:r}=j.useContext(Zu),s=Fa(),o=async()=>{try{const{signOutUser:l}=await zt(async()=>{const{signOutUser:u}=await Promise.resolve().then(()=>AR);return{signOutUser:u}},void 0);await l(),s("/")}catch(l){console.error(l)}};return r?g.jsx("div",{className:"p-10 flex justify-center",children:g.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-cyan-500 rounded-full border-t-transparent"})}):e?t!=="admin"?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center bg-slate-50 dark:bg-slate-900",children:[g.jsx(yR,{size:48,className:"text-red-500 mb-6"}),g.jsx("h2",{className:"text-3xl font-black text-slate-800 dark:text-white uppercase mb-2",children:"Acceso Denegado"}),g.jsx("p",{className:"text-slate-500 max-w-md mb-8",children:"Esta seccin es exclusiva para administradores."}),g.jsx("button",{onClick:o,className:"px-8 py-3 bg-slate-800 text-white rounded-xl font-bold uppercase",children:"Cerrar Sesin"})]}):g.jsx(g.Fragment,{children:n}):g.jsx(PI,{to:"/admin-login"})},k6=()=>{const[n,e]=j.useState(!1),[t,r]=j.useState([]),[s,o]=j.useState(null),{theme:l}=j.useContext(s_),{user:u,role:d,loading:p}=j.useContext(Zu),{addNotification:y}=B9(),w=Fa(),T=js();j.useEffect(()=>{const M=window.document.documentElement;M.classList.remove("light","dark"),M.classList.add(l)},[l]),j.useEffect(()=>{const M=tR(O=>{r(O)});return e6(),o6(),()=>M()},[]);const S=async()=>{try{const{signOutUser:M}=await zt(async()=>{const{signOutUser:O}=await Promise.resolve().then(()=>AR);return{signOutUser:O}},void 0);await M(),w("/"),y("info","Has cerrado sesin correctamente.")}catch(M){console.error("Logout error:",M),y("error","Error al cerrar sesin.")}},P=()=>{const M=T.pathname;return M.startsWith("/admin")?lr.ADMIN:M==="/garage"?lr.DIGITAL_GARAGE:M==="/qualify"?lr.PRE_QUALIFY:M==="/consultant"?lr.AI_CONSULTANT:M==="/blog"?lr.BLOG:M==="/trade-in"?lr.TRADE_IN:M==="/lab"?lr.AI_LAB:M==="/framework-lab"?"framework-lab":M.startsWith("/login")?"login":lr.STOREFRONT};return g.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-slate-50 dark:bg-slate-900 overflow-hidden relative",children:[g.jsxs("div",{className:"lg:hidden p-4 bg-[#173d57] text-white flex justify-between items-center shadow-md z-50",children:[g.jsxs("span",{className:"font-black text-xl tracking-tight",children:["RICHARD",g.jsx("span",{className:"text-[#00aed9]",children:"AUTO"})]}),g.jsx("button",{onClick:()=>e(!n),children:g.jsx(a3,{})})]}),g.jsxs("nav",{className:"fixed inset-y-0 left-0 w-72 bg-[#173d57]/95 dark:bg-[#0d2232]/95 backdrop-blur-2xl border-r border-white/5 text-white flex flex-col shadow-2xl z-40 transform transition-transform duration-300 lg:translate-x-0 lg:static lg:h-screen pointer-events-auto "+(n?"translate-x-0":"-translate-x-full"),children:[g.jsx("div",{className:"p-10 flex justify-between items-center cursor-pointer group",onClick:()=>w("/"),children:g.jsxs("h1",{className:"text-3xl font-black tracking-tighter leading-none group-hover:scale-105 transition-transform",children:[g.jsx("span",{className:"text-[#00aed9]",children:"RICHARD"}),g.jsx("br",{}),"AUTOMOTIVE"]})}),g.jsxs("div",{className:"flex-1 px-6 space-y-2 overflow-y-auto custom-scrollbar",children:[g.jsx(xi,{active:P()===lr.STOREFRONT,onClick:()=>{w("/"),e(!1)},icon:g.jsx(g3,{size:20}),label:"Tienda Digital"}),g.jsx(xi,{active:P()===lr.DIGITAL_GARAGE,onClick:()=>{w("/garage"),e(!1)},icon:g.jsx(x3,{size:20}),label:"Mi Garaje"}),g.jsx(xi,{active:P()===lr.PRE_QUALIFY,onClick:()=>{w("/qualify"),e(!1)},icon:g.jsx(X$,{size:20}),label:"Pre-Cualificacin"}),g.jsx(xi,{active:P()===lr.TRADE_IN,onClick:()=>{w("/trade-in"),e(!1)},icon:g.jsx(cR,{size:20}),label:"Vender mi Auto"}),g.jsx(xi,{active:P()===lr.AI_CONSULTANT,onClick:()=>{w("/consultant"),e(!1)},icon:g.jsx(V$,{size:20}),label:"Consultor IA"}),g.jsx(xi,{active:P()===lr.BLOG,onClick:()=>{w("/blog"),e(!1)},icon:g.jsx(d3,{size:20}),label:"AI Newsroom"}),g.jsx(xi,{active:T.pathname==="/framework-lab",onClick:()=>{w("/framework-lab"),e(!1)},icon:g.jsx(G$,{size:20,className:"text-cyan-400"}),label:"Framework Lab"}),g.jsx("div",{className:"pt-4 my-2 border-t border-white/5"}),!p&&u?g.jsxs("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-white/10 shadow-inner",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#00aed9] to-cyan-600 flex items-center justify-center text-white shadow-lg shadow-cyan-500/20",children:g.jsx(vR,{size:18})}),g.jsxs("div",{className:"overflow-hidden",children:[g.jsx("p",{className:"text-xs font-black truncate text-white uppercase tracking-tight",children:u.email}),g.jsx("p",{className:"text-[10px] uppercase tracking-widest text-[#00aed9] font-black",children:d==="admin"?"Administrador":"Usuario"})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[g.jsxs("button",{onClick:S,className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-red-500/10 text-red-400 hover:bg-red-500/20 text-[10px] font-black uppercase tracking-wider transition-all active:scale-95 border border-red-500/10",children:[g.jsx(o3,{size:14})," Salir"]}),d==="admin"&&g.jsxs("button",{onClick:()=>w("/admin"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 hover:bg-cyan-500/20 text-[10px] font-black uppercase tracking-wider transition-all active:scale-95 border border-cyan-500/10",children:[g.jsx(yR,{size:14})," Admin"]})]})]}):g.jsx(xi,{active:!1,onClick:()=>{w("/login"),e(!1)},icon:g.jsx(i3,{size:20}),label:"Iniciar Sesin",isAction:!0}),g.jsx("div",{className:"pt-2 my-2 border-t border-white/5"}),g.jsx(xi,{active:P()===lr.AI_LAB,onClick:()=>{w("/lab"),e(!1)},icon:g.jsx(Z$,{size:20}),label:"Laboratorio IA",highlight:!0})]}),g.jsx("div",{className:"p-6 border-t border-white/5 bg-black/10 backdrop-blur-md",children:g.jsx(M9,{})})]}),g.jsxs("main",{className:"flex-1 relative w-full h-screen overflow-y-auto bg-slate-950 text-slate-100",children:[g.jsx(F9,{}),g.jsx(U9,{}),g.jsx(bR,{inventory:t})," ",g.jsx(O9,{})," ",g.jsx(j.Suspense,{fallback:g.jsx(b6,{}),children:g.jsxs(_N,{children:[g.jsx(Vn,{path:"/",element:g.jsx(N9,{inventory:t,initialVisualSearch:s,onClearVisualSearch:()=>o(null),onMagicFix:void 0,onOpenGarage:()=>w("/garage")})}),g.jsx(Vn,{path:"/vehicle/:id",element:g.jsx(h6,{inventory:t})}),g.jsx(Vn,{path:"/trade-in",element:g.jsx(f6,{})}),g.jsx(Vn,{path:"/appraisal",element:g.jsx(p6,{})}),g.jsx(Vn,{path:"/compare",element:g.jsx(m6,{})}),g.jsx(Vn,{path:"/garage",element:g.jsx(Ux,{children:g.jsx(v6,{inventory:t,onExit:()=>w("/")})})}),g.jsx(Vn,{path:"/qualify",element:g.jsx(_6,{onExit:()=>w("/")})}),g.jsx(Vn,{path:"/privacidad",element:g.jsx(w6,{})}),g.jsx(Vn,{path:"/terminos",element:g.jsx(E6,{})}),g.jsx(Vn,{path:"/consultant",element:g.jsx(c6,{inventory:t})}),g.jsx(Vn,{path:"/blog",element:g.jsx(y6,{})}),g.jsx(Vn,{path:"/lab",element:g.jsx(Ux,{children:g.jsx(u6,{onExit:()=>w("/"),onVisualSearch:M=>{o(M),w("/")}})})}),g.jsx(Vn,{path:"/login",element:g.jsx(d6,{})}),g.jsx(Vn,{path:"/admin-login",element:g.jsx(g6,{})}),g.jsx(Vn,{path:"/admin",element:g.jsx(S6,{children:g.jsx(l6,{inventory:t,onUpdate:rR,onAdd:nR,onDelete:sR,onInitializeDb:()=>iR(I6)})})}),g.jsx(Vn,{path:"/framework-lab",element:g.jsx(x6,{})}),g.jsx(Vn,{path:"*",element:g.jsx(T6,{})})]})}),g.jsx(L9,{})]})]})},xi=({active:n,onClick:e,icon:t,label:r,isAction:s=!1,highlight:o=!1})=>{let l="w-full flex items-center gap-4 px-5 py-4 rounded-2xl font-bold transition-all duration-300 group relative overflow-hidden ";return n?l+="bg-[#00aed9] text-white shadow-xl shadow-[#00aed9]/20":o?l+="bg-gradient-to-r from-amber-500/20 to-orange-600/20 text-amber-500 border border-amber-500/30 hover:shadow-lg hover:shadow-orange-500/20":s?l+="bg-gradient-to-r from-[#00aed9]/10 to-[#00aed9]/5 text-[#00aed9] hover:bg-[#00aed9]/20":l+="text-slate-400 hover:bg-white/5 hover:text-white",g.jsxs("button",{onClick:e,className:l,children:[g.jsx("div",{className:`absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${n?"hidden":""}`}),g.jsx("span",{className:"relative z-10",children:t}),g.jsx("span",{className:"relative z-10",children:r}),n&&g.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white rounded-l-full"})]})},R6=({children:n})=>{const e=!!(window.Capacitor&&window.Capacitor.isNative),t=e?qN:BN;return j.useEffect(()=>{console.log(`[SmartRouter] Active mode: ${e?"HashRouter (Native/Capacitor)":"BrowserRouter (Web)"}`)},[e]),g.jsx(t,{children:n})},A6=()=>g.jsx(D9,{children:g.jsx(x9,{children:g.jsx(z9,{children:g.jsx(C9,{children:g.jsxs(R6,{children:[g.jsx(k6,{}),g.jsx($9,{})]})})})})});xP();const C6=new EC({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}}),MR=document.getElementById("root");if(!MR)throw new Error("Could not find root element to mount to");const P6=QA.createRoot(MR);P6.render(g.jsx(qn.StrictMode,{children:g.jsx(xC,{client:C6,children:g.jsx(A6,{})})}));export{dR as $,lR as A,F$ as B,cR as C,NR as D,v9 as E,_9 as F,g9 as G,GC as H,y9 as I,Q$ as J,Xv as K,hu as L,q$ as M,d3 as N,V6 as O,R$ as P,l9 as Q,qn as R,Zl as S,dc as T,vR as U,Cu as V,i_ as W,ji as X,yf as Y,_R as Z,zt as _,p3 as a,n_ as a0,Q6 as a1,gR as a2,vf as a3,k$ as a4,gf as a5,ux as a6,n3 as a7,nz as a8,l3 as a9,J6 as aA,h3 as aB,X6 as aC,w3 as aD,ez as aE,pR as aF,tz as aG,b3 as aH,N6 as aI,K6 as aJ,W6 as aK,AR as aL,P$ as aa,ig as ab,mF as ac,yF as ad,FT as ae,Ku as af,Jn as ag,ck as ah,hR as ai,C$ as aj,W$ as ak,f3 as al,ni as am,U6 as an,z6 as ao,$6 as ap,F6 as aq,o3 as ar,N$ as as,v3 as at,G$ as au,lr as av,mR as aw,Z$ as ax,Y6 as ay,$x as az,Zv as b,Pe as c,e_ as d,yR as e,B9 as f,s9 as g,z$ as h,m3 as i,g as j,Z6 as k,E9 as l,js as m,B$ as n,U$ as o,j$ as p,LI as q,j as r,O$ as s,A$ as t,Fa as u,HC as v,QC as w,j6 as x,M6 as y,L6 as z};
