import{d as v,F as z,j as e,Z as R,T as A,A as E,K as x,V as I,G as m,O as h,E as L,Y as S,$ as T,a0 as F,a1 as O}from"./index-Y1hSRJUR.js";import{r as i,u as G,a as q,L as P}from"./vendor-react-BjLkUuqo.js";import{g as _}from"./vendor-firebase-D6pLxh_h.js";const D=v("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);const W=v("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]),$=()=>{const[s,k]=i.useState(!1),[f,j]=i.useState(""),[b,N]=i.useState(""),[w,n]=i.useState(null),[d,l]=i.useState(!1),r=z(),u=G(),p=q().state?.from?.pathname||"/";i.useEffect(()=>{if(d||s)return;const a=setTimeout(()=>{window.google&&(window.google.accounts.id.initialize({client_id:"197990063384-pr9qvk3apkretgqsj8t5v7h83vn44koc.apps.googleusercontent.com",callback:async o=>{l(!0),r(x());try{const g=await I(o.credential);r(m(g)),u(p,{replace:!0})}catch(g){n(c(g)),r(h(c(g)))}finally{l(!1)}},cancel_on_tap_outside:!1}),window.google.accounts.id.prompt())},1500);return()=>clearTimeout(a)},[s,d]),i.useEffect(()=>{(async()=>{try{const a=await _(L);a?.user&&(r(m(a.user)),u(p,{replace:!0}))}catch(a){n(c(a))}})()},[]);const C=async t=>{t.preventDefault(),n(null),l(!0),r(x());try{let a;s?a=await F(f,b):a=await O(f,b),r(m(a)),u(p,{replace:!0})}catch(a){console.error(a);const o=c(a);n(o),r(h(o))}finally{l(!1)}},y=async t=>{l(!0),n(null),r(x());try{let a;t==="google"&&(a=await S()),t==="facebook"&&(a=await T()),a&&(r(m(a)),u(p,{replace:!0}))}catch(a){console.error(a);const o=c(a);n(o),r(h(o))}finally{l(!1)}},c=t=>(console.error("Auth Debug Details:",t),t.message?.includes("ADMIN_PORTAL_ONLY")?"Acceso no autorizado en este portal. Use el portal administrativo.":t.code==="auth/email-already-in-use"?"Este correo ya está registrado.":t.code==="auth/invalid-credential"||t.code==="auth/user-not-found"||t.code==="auth/wrong-password"?"Credenciales incorrectas.":t.code==="auth/popup-closed-by-user"?"La ventana de inicio de sesión se cerró antes de completar.":t.code==="auth/cancelled-popup-request"?"Solicitud de inicio de sesión cancelada.":t.message?.includes("projectconfigservice.getprojectconfig-are-blocked")?'ERROR CRÍTICO: La API de Autenticación está bloqueada en Google Cloud Console. Por favor, habilite el "Identity Toolkit API" para su API Key.':`Error (${t.code||"unknown"}): ${t.message||"Intente nuevamente"}`);return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-50 dark:bg-slate-900",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[#00aed9]/10 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-purple-500/5 rounded-full blur-[100px]"})]}),e.jsxs("div",{className:"relative w-full max-w-[480px] bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl border border-white/20 dark:border-slate-700 rounded-[40px] shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"pt-12 pb-8 px-10 text-center relative",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl mb-6 shadow-lg bg-[#00aed9]/10 text-[#00aed9]",children:e.jsx(R,{size:32})}),e.jsx("h2",{className:"text-3xl font-black tracking-tighter uppercase mb-2 text-slate-800 dark:text-white",children:s?"Crear Cuenta":"Bienvenido"}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Gestiona tu garaje digital y recibe ofertas personalizadas."})]}),!s&&e.jsxs("div",{className:"px-10 pb-6 space-y-3",children:[e.jsxs("button",{onClick:()=>y("google"),className:"w-full social-button bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 hover:shadow-lg hover:shadow-cyan-500/10 transition-all active:scale-95",children:[e.jsx(W,{size:20,className:"text-[#4285F4]"}),e.jsx("span",{className:"font-bold",children:"Continuar con Google"})]}),e.jsxs("button",{onClick:()=>y("facebook"),className:"w-full social-button bg-[#1877F2] text-white hover:bg-[#166fe5] shadow-lg shadow-[#1877F2]/20 transition-all active:scale-95",children:[e.jsx(A,{size:20}),e.jsx("span",{className:"font-bold",children:"Continuar con Facebook"})]}),e.jsxs("button",{className:"w-full social-button bg-black text-white hover:bg-slate-900 transition-all active:scale-95",children:[e.jsx(D,{size:20}),e.jsx("span",{className:"font-bold",children:"Continuar con Apple"})]}),e.jsx("div",{className:"divider",children:"O usa tu email"})]}),e.jsxs("form",{onSubmit:C,className:"px-10 pb-10 space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"email",value:f,onChange:t=>j(t.target.value),required:!0,placeholder:"correo@ejemplo.com",className:"form-input"}),e.jsx("input",{type:"password",value:b,onChange:t=>N(t.target.value),required:!0,placeholder:"Contraseña",className:"form-input"})]}),w&&e.jsx("div",{className:"error-box",children:w}),e.jsx("button",{type:"submit",disabled:d,className:"w-full primary-button",children:d?e.jsx("div",{className:"loader"}):e.jsxs(e.Fragment,{children:[s?"Registrar":"Ingresar"," ",e.jsx(E,{size:18})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{type:"button",onClick:()=>k(!s),className:"toggle-button",children:s?"¿Ya tienes cuenta? Entrar":"¿No tienes cuenta? Regístrate"})})]}),e.jsx("div",{className:"py-4 text-center border-t bg-slate-50 dark:bg-slate-800/50 border-slate-100 dark:border-slate-700",children:e.jsx(P,{to:"/",className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:"Volver a la Tienda"})})]}),e.jsx("style",{children:`
        .social-button { padding: 1rem; border-radius: 1rem; font-weight: bold; font-size: 0.875rem; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 0.75rem; }
        .divider { position: relative; display: flex; padding: 1rem 0; align-items: center; font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; color: #94a3b8; font-weight: bold; }
        .divider::before, .divider::after { content: ''; flex-grow: 1; border-top: 1px solid #e2e8f0; } .dark .divider::before, .dark .divider::after { border-color: #334155; }
        .divider::before { margin-right: 1rem; } .divider::after { margin-left: 1rem; }
        .form-input { width: 100%; padding: 1rem; border-radius: 1rem; font-weight: bold; outline: none; transition: all 0.2s; border: 2px solid transparent; background-color: #f1f5f9; }
        .dark .form-input { background-color: rgba(30, 41, 59, 0.5); color: white; }
        .form-input:focus { background-color: white; border-color: rgba(0, 174, 217, 0.3); } .dark .form-input:focus { background-color: #1e293b; }
        .error-box { padding: 1rem; border-radius: 0.75rem; font-size: 0.75rem; font-weight: bold; display: flex; align-items: center; gap: 0.75rem; background-color: #fff1f2; color: #f43f5e; border: 1px solid #fecdd3; }
        .primary-button { width: 100%; padding: 1.25rem; border-radius: 1rem; font-weight: 900; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.2em; box-shadow: 0 10px 15px -3px rgba(0, 174, 217, 0.3), 0 4px 6px -4px rgba(0, 174, 217, 0.3); transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 0.75rem; background: linear-gradient(135deg, #00aed9 0%, #007fa1 100%); color: white; }
        .primary-button:active { transform: scale(0.95); } .primary-button:disabled { opacity: 0.7; cursor: wait; }
        .loader { width: 20px; height: 20px; border: 2px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 1s linear infinite; }
        .toggle-button { color: #94a3b8; font-size: 0.75rem; font-weight: bold; text-transform: uppercase; letter-spacing: 0.1em; transition: color 0.2s; } .toggle-button:hover { color: #00aed9; }
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})};export{$ as default};
