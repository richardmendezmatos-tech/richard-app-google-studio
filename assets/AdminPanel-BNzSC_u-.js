const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Y1hSRJUR.js","assets/vendor-react-BjLkUuqo.js","assets/vendor-firebase-D6pLxh_h.js","assets/index-BN8qD5xX.css","assets/pdfGenerator-BkU8StVC.js"])))=>i.map(i=>d[i]);
import{d as g,j as e,S as U,f as ie,aj as ye,W as Ne,ak as Y,a3 as ke,Q as Se,X as Ce,y as Pe,L as ne,_ as R,q as oe,ab as De,J as se,T as Ee,a9 as Le,ae as ze,al as Ie,am as re,an as Ae,ao as de,v as fe,Z as Me,U as ce,ad as Te,ap as xe,E as pe,aq as _e,ar as Ue}from"./index-Y1hSRJUR.js";import{r as x,u as Re}from"./vendor-react-BjLkUuqo.js";import{T as Fe}from"./trending-up-I-AzIbKF.js";import{L as qe}from"./lock-kdm5frkL.js";import{E as Ve}from"./eye-BYMeLNLO.js";import{A as Oe,B as $e}from"./B2BBillingDashboard-DiKukQ4b.js";import{W as Ge,u as Be,a as me,D as We,c as Ze,S as He,r as Ke,b as Je,s as Qe,d as Xe,P as Ye,e as et,C as tt,G as at,K as st}from"./KanbanBoard-CAyJdK0D.js";import{q as rt,l as lt,o as it,c as nt,b as ot}from"./vendor-firebase-D6pLxh_h.js";import{S as dt}from"./server-XDRQoG5G.js";import"./activity-DGJ0tE_T.js";import"./mail-Ry3Kmwd4.js";const ee=g("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const ct=g("CarFront",[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);const xt=g("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const pt=g("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);const ue=g("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const je=g("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const he=g("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const mt=g("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const ut=g("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const ht=g("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const gt=g("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);const ge=g("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const bt=g("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const ft=g("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const jt=g("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),vt=(a,s=0)=>{let n=45,l=50;const t=a.price||0;t<2e4&&(n-=10),t>75e3&&(n+=15),(a.features||[]).length>8&&(n-=5,l+=15),s>5&&(n-=12),s>10&&(n-=20),a.img||(n+=30);const o=Math.min(100,Math.max(0,l+s*2-t/5e3));let d="Mantener precio actual.";return o>85&&(d="ðŸ”¥ Alta Demanda: Considerar aumento ligero."),o<30&&(d="âš ï¸ Baja tracciÃ³n: Revisar fotos o bajar precio."),{daysToSale:Math.max(3,n),confidence:s>10?95:70,advantageScore:o,recommendation:d}},wt=({inventory:a})=>{const s=[...a].sort((t,r)=>(r.views||0)-(t.views||0)).slice(0,5),n=a.filter(t=>(t.views||0)>5&&(!t.leads_count||t.leads_count===0)),l=a.filter(t=>!t.views||t.views===0).slice(0,5);return e.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-purple-500/10 rounded-2xl text-purple-400",children:e.jsx(Fe,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white uppercase tracking-tight",children:"Inteligencia de Inventario"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"AnÃ¡lisis en tiempo real del comportamiento de clientes"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/10 dark:to-red-900/10 p-6 rounded-[35px] border border-orange-100 dark:border-orange-500/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-orange-600 dark:text-orange-400",children:[e.jsx(xt,{size:20,fill:"currentColor"}),e.jsx("h3",{className:"font-black uppercase tracking-widest text-xs",children:"Hot List (MÃ¡s Vistos)"})]}),e.jsx("div",{className:"space-y-4",children:s.map((t,r)=>e.jsx(te,{car:t,rank:r+1,type:"hot"},t.id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 dark:from-slate-800/50 dark:to-gray-900/50 p-6 rounded-[35px] border border-slate-200 dark:border-slate-700 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-600 dark:text-slate-400",children:[e.jsx(gt,{size:20}),e.jsx("h3",{className:"font-black uppercase tracking-widest text-xs",children:"Zombies (Vistos sin AcciÃ³n)"})]}),e.jsx("div",{className:"space-y-4",children:n.length===0?e.jsx("div",{className:"text-center py-10 opacity-50 text-xs uppercase font-bold",children:"Â¡Inventario Saludable!"}):n.slice(0,5).map(t=>e.jsx(te,{car:t,type:"zombie"},t.id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/10 dark:to-cyan-900/10 p-6 rounded-[35px] border border-blue-100 dark:border-blue-500/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-blue-500 dark:text-blue-400",children:[e.jsx(pt,{size:20}),e.jsx("h3",{className:"font-black uppercase tracking-widest text-xs",children:"Fantasmas (Invisibles)"})]}),e.jsxs("div",{className:"space-y-4",children:[l.map(t=>e.jsx(te,{car:t,type:"ghost"},t.id)),l.length===0&&e.jsx("div",{className:"text-center py-10 opacity-50 text-xs uppercase font-bold",children:"Todo se ha visto al menos una vez."})]})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-md rounded-[2.5rem] z-20 flex flex-col items-center justify-center border border-white/10 group-hover:bg-slate-900/30 transition-all duration-500",children:[e.jsx("div",{className:"w-16 h-16 bg-[#00aed9]/20 rounded-full flex items-center justify-center mb-6 shadow-[0_0_30px_rgba(0,174,217,0.3)] group-hover:scale-110 transition-transform",children:e.jsx(qe,{className:"text-[#00aed9]",size:32})}),e.jsxs("div",{className:"text-center px-8 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white font-black text-xl uppercase tracking-tighter",children:[e.jsx(U,{className:"text-amber-500",size:24})," Market Gap Analytics Pro"]}),e.jsx("p",{className:"text-slate-400 text-sm max-w-md mx-auto leading-relaxed",children:"Accede a datos granulares sobre la competencia en tiempo real, predicciones de subasta y sugerencias de compra automÃ¡ticas."}),e.jsx("button",{className:"mt-8 px-10 py-4 bg-gradient-to-r from-[#00aed9] to-cyan-500 text-white rounded-[2rem] font-black uppercase tracking-widest text-xs shadow-xl shadow-[#00aed9]/30 hover:scale-[1.05] active:scale-95 transition-all",children:"Mejorar a Plan Corporativo"})]})]}),e.jsx("div",{className:"opacity-20 blur-sm pointer-events-none select-none",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8 p-10",children:[e.jsx("div",{className:"h-40 bg-slate-800 rounded-3xl animate-pulse"}),e.jsx("div",{className:"h-40 bg-slate-800 rounded-3xl animate-pulse"}),e.jsx("div",{className:"h-40 bg-slate-800 rounded-3xl animate-pulse"}),e.jsx("div",{className:"h-40 bg-slate-800 rounded-3xl animate-pulse"})]})}),e.jsxs("div",{className:"absolute top-6 right-8 z-30 flex items-center gap-2 px-4 py-2 bg-emerald-500/10 border border-emerald-500/20 rounded-full shadow-lg",children:[e.jsx(ie,{className:"text-emerald-500",size:14}),e.jsx("span",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest",children:"Zero Trust Audit Compliant"})]})]})]})},te=({car:a,rank:s,type:n})=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-2xl flex items-center gap-4 shadow-sm border border-slate-100 dark:border-slate-800 relative group hover:scale-[1.02] transition-transform duration-300",children:[s&&e.jsxs("div",{className:"absolute -left-2 -top-2 w-6 h-6 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-full flex items-center justify-center text-[10px] font-black shadow-lg",children:["#",s]}),e.jsx("img",{src:a.img,className:"w-12 h-12 object-contain",alt:a.name}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-bold text-slate-800 dark:text-white truncate",children:a.name}),e.jsxs("div",{className:"text-[10px] text-slate-400 font-mono",children:["$",(a.price||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:[e.jsx(Ve,{size:10})," ",a.views||0]}),n!=="ghost"&&e.jsxs("div",{className:`flex items-center gap-1 text-[10px] font-bold px-2 py-1 rounded-full ${(a.leads_count||0)>0?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":"bg-rose-100 text-rose-600 dark:bg-rose-900/30"}`,children:[e.jsx(ye,{size:10})," ",a.leads_count||0]}),n==="zombie"&&e.jsxs("button",{className:"mt-2 text-[9px] font-black uppercase tracking-widest text-amber-500 border border-amber-200 dark:border-amber-900 bg-amber-50 dark:bg-amber-900/10 px-2 py-1 rounded-lg hover:bg-amber-100 transition-colors flex items-center gap-1",children:[e.jsx(Oe,{size:10})," Optimizar"]})]})]});var D;(function(a){a.Prompt="PROMPT",a.Camera="CAMERA",a.Photos="PHOTOS"})(D||(D={}));var F;(function(a){a.Rear="REAR",a.Front="FRONT"})(F||(F={}));var le;(function(a){a.Uri="uri",a.Base64="base64",a.DataUrl="dataUrl"})(le||(le={}));class yt extends Ne{async getPhoto(s){return new Promise(async(n,l)=>{if(s.webUseInput||s.source===D.Photos)this.fileInputExperience(s,n,l);else if(s.source===D.Prompt){let t=document.querySelector("pwa-action-sheet");t||(t=document.createElement("pwa-action-sheet"),document.body.appendChild(t)),t.header=s.promptLabelHeader||"Photo",t.cancelable=!1,t.options=[{title:s.promptLabelPhoto||"From Photos"},{title:s.promptLabelPicture||"Take Picture"}],t.addEventListener("onSelection",async r=>{r.detail===0?this.fileInputExperience(s,n,l):this.cameraExperience(s,n,l)})}else this.cameraExperience(s,n,l)})}async pickImages(s){return new Promise(async(n,l)=>{this.multipleFileInputExperience(n,l)})}async cameraExperience(s,n,l){if(customElements.get("pwa-camera-modal")){const t=document.createElement("pwa-camera-modal");t.facingMode=s.direction===F.Front?"user":"environment",document.body.appendChild(t);try{await t.componentOnReady(),t.addEventListener("onPhoto",async r=>{const o=r.detail;o===null?l(new Y("User cancelled photos app")):o instanceof Error?l(o):n(await this._getCameraPhoto(o,s)),t.dismiss(),document.body.removeChild(t)}),t.present()}catch{this.fileInputExperience(s,n,l)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(s,n,l)}fileInputExperience(s,n,l){let t=document.querySelector("#_capacitor-camera-input");const r=()=>{var o;(o=t.parentNode)===null||o===void 0||o.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input",t.type="file",t.hidden=!0,document.body.appendChild(t),t.addEventListener("change",o=>{const d=t.files[0];let m="jpeg";if(d.type==="image/png"?m="png":d.type==="image/gif"&&(m="gif"),s.resultType==="dataUrl"||s.resultType==="base64"){const h=new FileReader;h.addEventListener("load",()=>{if(s.resultType==="dataUrl")n({dataUrl:h.result,format:m});else if(s.resultType==="base64"){const v=h.result.split(",")[1];n({base64String:v,format:m})}r()}),h.readAsDataURL(d)}else n({webPath:URL.createObjectURL(d),format:m}),r()}),t.addEventListener("cancel",o=>{l(new Y("User cancelled photos app")),r()})),t.accept="image/*",t.capture=!0,s.source===D.Photos||s.source===D.Prompt?t.removeAttribute("capture"):s.direction===F.Front?t.capture="user":s.direction===F.Rear&&(t.capture="environment"),t.click()}multipleFileInputExperience(s,n){let l=document.querySelector("#_capacitor-camera-input-multiple");const t=()=>{var r;(r=l.parentNode)===null||r===void 0||r.removeChild(l)};l||(l=document.createElement("input"),l.id="_capacitor-camera-input-multiple",l.type="file",l.hidden=!0,l.multiple=!0,document.body.appendChild(l),l.addEventListener("change",r=>{const o=[];for(let d=0;d<l.files.length;d++){const m=l.files[d];let h="jpeg";m.type==="image/png"?h="png":m.type==="image/gif"&&(h="gif"),o.push({webPath:URL.createObjectURL(m),format:h})}s({photos:o}),t()}),l.addEventListener("cancel",r=>{n(new Y("User cancelled photos app")),t()})),l.accept="image/*",l.click()}_getCameraPhoto(s,n){return new Promise((l,t)=>{const r=new FileReader,o=s.type.split("/")[1];n.resultType==="uri"?l({webPath:URL.createObjectURL(s),format:o,saved:!1}):(r.readAsDataURL(s),r.onloadend=()=>{const d=r.result;n.resultType==="dataUrl"?l({dataUrl:d,format:o,saved:!1}):l({base64String:d.split(",")[1],format:o,saved:!1})},r.onerror=d=>{t(d)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const Nt=ke("Camera",{web:()=>new yt}),be={async takePhoto(){try{const a=await Nt.getPhoto({quality:90,allowEditing:!0,resultType:le.Uri,source:D.Prompt,width:1200});return a.webPath?{blob:await(await fetch(a.webPath)).blob(),preview:a.webPath}:null}catch(a){if(a?.message?.includes("User cancelled"))return null;throw console.error("Camera Capture Error:",a),a}},blobToFile(a,s){return new File([a],s,{type:a.type})}},kt=({car:a,onClose:s,onSave:n,onPhotoUploaded:l})=>{const{currentDealer:t}=Se(),[r,o]=x.useState(null),[d,m]=x.useState(a?.img||""),[h,v]=x.useState(!1),[w,y]=x.useState(a?.description||""),[N,q]=x.useState(!1),[S,C]=x.useState(null),[z,P]=x.useState(!1),[I,V]=x.useState(null),[E,Z]=x.useState(!1),[O,H]=x.useState([]),$=x.useRef(null),A=x.useRef(null),b=c=>{const p=new Date().toLocaleTimeString();H(u=>[...u,`[${p}] ${c}`]),console.log(`Strategic Deep Debug Console: ${c}`)},M=async()=>{const c=document.querySelector("form");if(!c)return;const p=new FormData(c),u=p.get("name"),k=p.get("features").split(",").filter(T=>T.trim()!==""),j=Number(p.get("price"));if(!u){alert("Por favor ingresa primero el nombre del vehÃ­culo.");return}q(!0);const L=j>5e4?"Premium":"Standard";V(L);try{if(L==="Standard"){const _=`IncreÃ­ble ${u}. Equipado con ${k.join(", ")}. Una oportunidad Ãºnica para quienes buscan calidad y rendimiento.`;y(_),q(!1);return}const{httpsCallable:T}=await R(async()=>{const{httpsCallable:_}=await import("./index-Y1hSRJUR.js").then(X=>X.aw);return{httpsCallable:_}},__vite__mapDeps([0,1,2,3])),{functions:ve}=await R(async()=>{const{functions:_}=await import("./index-Y1hSRJUR.js").then(X=>X.ax);return{functions:_}},__vite__mapDeps([0,1,2,3])),we=(await T(ve,"generateDescription")({carModel:u,features:k})).data;y(we)}catch(T){console.error("AI Generation Error:",T),alert("Error generando descripciÃ³n. Intenta nuevamente.")}finally{q(!1)}},G=async()=>{if(!d){alert("Sube una imagen primero para analizar.");return}Z(!0),await new Promise(u=>setTimeout(u,1500));const c=["Sunroof",'Rines 19"',"Asientos de Cuero","Faros LED","Sensores de Proximidad"],p=document.querySelector("form");if(p){const u=p.querySelector('input[name="features"]').value,k=Array.from(new Set([...u.split(",").map(j=>j.trim()).filter(j=>j!==""),...c])).join(", ");p.querySelector('input[name="features"]').value=k}Z(!1)},B=c=>{let p;if("files"in c.target&&c.target.files?.[0]?p=c.target.files[0]:"dataTransfer"in c&&c.dataTransfer.files?.[0]&&(p=c.dataTransfer.files[0]),p){o(p),C(null);const u=new FileReader;u.onloadend=()=>{m(u.result)},u.readAsDataURL(p)}},K=c=>{c.preventDefault(),P(!0)},J=c=>{c.preventDefault(),P(!1)},Q=c=>{c.preventDefault(),P(!1),B(c)},i=async()=>{try{const c=await be.takePhoto();c&&(m(c.preview),C(c.blob),o(null))}catch(c){console.error("Camera Error:",c),alert("No se pudo acceder a la cÃ¡mara nativa.")}},f=async c=>{c.preventDefault(),v(!0);try{if(b("Submit gate triggered..."),!A.current)throw b("!!! CRITICAL: formRef.current is null!"),new Error("Referencia al formulario perdida.");const{auth:p}=await R(async()=>{const{auth:j}=await import("./index-Y1hSRJUR.js").then(L=>L.ax);return{auth:j}},__vite__mapDeps([0,1,2,3]));b(`Auth Context: ${p.currentUser?.email||"OFFLINE/LOGGED_OUT"}`),b(`UID: ${p.currentUser?.uid||"N/A"}`);const u=new FormData(A.current);b("FormData constructed successfully.");let k=d;if(r)b(`Starting upload for: ${r.name} (${r.size} bytes)`),k=await oe(r),b("Upload component returned successfully."),l?.();else if(S){b(`Starting upload for camera blob (${S.size} bytes)`);const j=be.blobToFile(S,`camera_${Date.now()}.jpg`),L=new File([j],j.name,{type:"image/jpeg"});k=await oe(L),b("Camera upload component returned successfully."),l?.()}b("Persisting document to Firestore..."),await n({name:u.get("name"),price:Number(u.get("price")),type:u.get("type"),badge:u.get("badge"),img:k,description:w,features:u.get("features").split(",").map(j=>j.trim()),dealerId:t.id||"richard-automotive"}),b("âœ… SUCCESS: Document saved successfully."),s()}catch(p){b(`!!! ERROR: ${p.message}`),console.error("Upload/Save Strategic Error:",p);const u=p.message||"Error desconocido";u.includes("Storage")?alert(`Error de Storage (Consola): ${u}`):alert(`Error al guardar: ${u}`)}finally{v(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center sm:p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full sm:max-w-2xl sm:rounded-[40px] rounded-t-[40px] shadow-2xl overflow-hidden animate-in slide-in-from-bottom border border-slate-200 dark:border-slate-800 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-8 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-white dark:bg-slate-900 z-10 sticky top-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-widest",children:"Editor de Inventario"}),e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white uppercase tracking-tight",children:a?"Editar Unidad":"Nueva Unidad"})]}),e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 hover:bg-rose-500 hover:text-white transition-colors",children:e.jsx(Ce,{size:20})})]}),e.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar flex-1",children:e.jsxs("form",{ref:A,onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest block",children:"Media"}),e.jsxs("div",{className:`group relative flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-[2rem] transition-all duration-300 ${z?"border-[#00aed9] bg-[#00aed9]/5 scale-[0.98]":"border-slate-200 dark:border-slate-800 hover:border-[#00aed9]/50"}`,onDragOver:K,onDragLeave:J,onDrop:Q,children:[e.jsxs("div",{className:"flex gap-6 w-full items-center",children:[e.jsx("div",{className:`w-24 h-24 shrink-0 rounded-2xl bg-white dark:bg-slate-800 border-2 shadow-sm overflow-hidden relative transition-transform duration-500 ${z?"scale-110 rotate-3":""} ${d?"border-transparent":"border-slate-100 dark:border-slate-700"}`,children:d?e.jsx("img",{src:d,className:"w-full h-full object-cover"}):e.jsx(ue,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-slate-300"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Soltar imagen aquÃ­"}),e.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"O utiliza una de estas opciones"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:i,className:"h-[36px] px-4 bg-[#00aed9]/10 border border-[#00aed9]/25 text-[#00aed9] rounded-xl flex items-center justify-center gap-2 font-bold text-[9px] uppercase tracking-widest hover:bg-[#00aed9] hover:text-white transition-all shadow-sm",children:[e.jsx(Pe,{size:14})," CÃ¡mara"]}),e.jsxs("button",{type:"button",onClick:()=>$.current?.click(),className:"h-[36px] px-4 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 rounded-xl flex items-center justify-center gap-2 font-bold text-[9px] uppercase tracking-widest hover:bg-slate-200 dark:hover:bg-slate-700 transition-all shadow-sm",children:[e.jsx(ue,{size:14})," GalerÃ­a"]}),d&&e.jsxs("button",{type:"button",onClick:G,disabled:E,className:"h-[36px] px-4 bg-purple-500/10 border border-purple-500/25 text-purple-500 rounded-xl flex items-center justify-center gap-2 font-bold text-[9px] uppercase tracking-widest hover:bg-purple-500 hover:text-white transition-all shadow-sm group/vision",children:[E?e.jsx(ne,{size:14,className:"animate-spin"}):e.jsx(U,{size:14,className:"group-hover/vision:rotate-12 transition-transform"}),E?"Escaneando...":"IA Vision"]})]})]})]}),e.jsx("input",{name:"imgurl",placeholder:"O pegar URL aquÃ­...",value:!r&&!S?d:"",onChange:c=>{m(c.target.value),o(null),C(null)},className:"mt-4 w-full h-[40px] px-4 bg-white dark:bg-slate-900 rounded-xl text-xs outline-none focus:ring-2 focus:ring-[#00aed9] border border-slate-100 dark:border-slate-800"}),e.jsx("input",{ref:$,type:"file",accept:"image/*",onChange:B,className:"hidden"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Nombre"}),e.jsx("input",{name:"name",defaultValue:a?.name,required:!0,className:"w-full h-[50px] px-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-[#00aed9]",placeholder:"Ej. Toyota Corolla"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Precio"}),e.jsx("input",{name:"price",type:"number",defaultValue:a?.price,required:!0,className:"w-full h-[50px] px-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-[#00aed9]",placeholder:"25000"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Tipo"}),e.jsxs("select",{name:"type",defaultValue:a?.type||"suv",className:"w-full h-[50px] px-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-[#00aed9] appearance-none",children:[e.jsx("option",{value:"suv",children:"SUV"}),e.jsx("option",{value:"sedan",children:"Sedan"}),e.jsx("option",{value:"pickup",children:"Pickup"}),e.jsx("option",{value:"luxury",children:"Luxury"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Badge"}),e.jsx("input",{name:"badge",defaultValue:a?.badge,className:"w-full h-[50px] px-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-[#00aed9]",placeholder:"Opcional"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"CaracterÃ­sticas"}),e.jsx("input",{name:"features",defaultValue:a?.features?.join(", "),className:"w-full h-[50px] px-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-[#00aed9]",placeholder:"GPS, Cuero, Turbo..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"DescripciÃ³n"}),e.jsxs("button",{type:"button",onClick:M,disabled:N,className:"text-[10px] font-black uppercase tracking-widest text-[#00aed9] flex items-center gap-1 hover:underline disabled:opacity-50",children:[N?e.jsx(ne,{size:12,className:"animate-spin"}):e.jsx(Ge,{size:12}),N?"Generando...":"Generar con IA"]}),I&&e.jsxs("span",{className:`text-[8px] px-2 py-0.5 rounded-full font-black uppercase tracking-tighter ${I==="Premium"?"bg-purple-500/10 text-purple-500":"bg-emerald-500/10 text-emerald-500"}`,children:["Tier: ",I]})]}),e.jsx("textarea",{name:"description",value:w,onChange:c=>y(c.target.value),rows:3,className:"w-full p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-medium outline-none focus:ring-2 focus:ring-[#00aed9] resize-none"})]}),O.length>0&&e.jsxs("div",{className:"p-4 bg-slate-950 rounded-2xl border border-rose-500/20 space-y-1",children:[e.jsx("div",{className:"text-[10px] font-black text-rose-500 uppercase tracking-widest border-b border-rose-500/10 pb-2 mb-2",children:"Diagnostic Console (Copy for IT)"}),e.jsx("div",{className:"max-h-32 overflow-y-auto custom-scrollbar",children:O.map((c,p)=>e.jsx("div",{className:"text-[9px] font-mono text-slate-300 break-all leading-relaxed",children:c},p))})]}),e.jsx("button",{type:"submit",disabled:h,className:"w-full h-[56px] bg-[#0d2232] text-white rounded-2xl font-black uppercase tracking-widest hover:scale-[1.02] active:scale-95 transition-all shadow-xl",children:h?"Guardando...":"Guardar Unidad"})]})})]})})},St=()=>{const[a,s]=x.useState([]),[n,l]=x.useState(!0);x.useEffect(()=>{const r=rt(nt(De,"audit_logs"),it("timestamp","desc"),lt(50)),o=ot(r,d=>{const m=d.docs.map(h=>({id:h.id,...h.data()}));s(m),l(!1)},d=>{console.error("AuditLog onSnapshot error:",d),l(!1)});return()=>o()},[]);const t=r=>{if(!r)return"N/A";const o=r.toDate?r.toDate():new Date(r);return new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(o)};return n?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"w-6 h-6 border-2 border-slate-300 border-t-slate-800 rounded-full animate-spin"})}):e.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/50 backdrop-blur-xl border border-white/20 rounded-3xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-white/5 bg-slate-50/50 dark:bg-slate-800/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(se,{className:"text-amber-500",size:20}),"Registro de AuditorÃ­a"]}),e.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider mt-1",children:"Ãšltimos 50 intentos de acceso"})]}),e.jsx("div",{className:"text-[10px] font-bold px-3 py-1 bg-emerald-500/10 text-emerald-500 rounded-full uppercase tracking-widest border border-emerald-500/20",children:"En Tiempo Real"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-xs",children:[e.jsx("thead",{className:"bg-slate-100/50 dark:bg-slate-900/50 text-slate-500 uppercase tracking-widest font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Estado"}),e.jsx("th",{className:"px-6 py-4",children:"Usuario"}),e.jsx("th",{className:"px-6 py-4",children:"IP / Dispositivo"}),e.jsx("th",{className:"px-6 py-4",children:"MÃ©todo"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Tiempo"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-white/5",children:[a.map(r=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:r.success?e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400 font-bold",children:[e.jsx(ie,{size:14})," Permitido"]}):e.jsxs("div",{className:"flex items-center gap-2 text-rose-500 font-bold",children:[e.jsx(se,{size:14})," Bloqueado"]})}),e.jsx("td",{className:"px-6 py-4 font-medium text-slate-800 dark:text-slate-200",children:r.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-slate-600 dark:text-slate-400 font-mono text-[10px]",children:[e.jsx(Ee,{size:10})," ",r.ip]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-slate-400 text-[10px] truncate max-w-[200px]",title:r.device,children:[e.jsx(je,{size:10})," ",r.device]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider ${r.method==="passkey"?"bg-purple-500/10 text-purple-500":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:r.method})}),e.jsx("td",{className:"px-6 py-4 text-right font-mono text-slate-500",children:t(r.timestamp)})]},r.id)),a.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400 font-medium bg-slate-50/20",children:"No hay registros de seguridad recientes."})})]})]})})]})},Ct=()=>{const[a,s]=x.useState([]),[n,l]=x.useState(!0),t=async()=>{l(!0);const{data:r,error:o}=await Ie.from("search_gaps").select("*").order("created_at",{ascending:!1}).limit(10);r&&s(r),l(!1)};return x.useEffect(()=>{t()},[]),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 border border-slate-100 dark:border-slate-700 shadow-sm h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-lg font-black flex items-center gap-2 text-slate-800 dark:text-white uppercase tracking-tight",children:[e.jsx(jt,{className:"text-rose-500",size:20})," Oportunidades Perdidas"]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(Le,{size:16,className:n?"animate-spin":""})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 custom-scrollbar",children:a.length===0?e.jsxs("div",{className:"text-center py-10 text-slate-400",children:[e.jsx(ze,{className:"mx-auto mb-2 opacity-20",size:32}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Sin Data de Gaps"})]}):a.map(r=>e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("span",{className:"text-sm font-black text-slate-700 dark:text-slate-200",children:['"',r.query,'"']}),e.jsx("span",{className:"text-[10px] font-black text-rose-500 bg-rose-500/10 px-2 py-1 rounded-full uppercase",children:"Perdida"})]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:[e.jsxs("span",{children:["Intento: ",r.detected_intent]}),e.jsx("span",{children:new Date(r.created_at).toLocaleDateString()})]})]},r.id))}),e.jsx("p",{className:"mt-4 text-[10px] text-slate-400 font-medium italic",children:"* Estas consultas semÃ¡nticas no encontraron coincidencias en tu inventario actual."})]})},Pt=({car:a})=>{const{attributes:s,listeners:n,setNodeRef:l,transform:t,transition:r,isDragging:o}=et({id:a.id}),d={transform:tt.Transform.toString(t),transition:r,zIndex:o?50:0,opacity:o?.5:1};return e.jsxs("div",{ref:l,style:d,className:"bg-slate-900 border border-white/10 rounded-2xl p-4 flex gap-4 items-center group",children:[e.jsx("div",{...s,...n,className:"cursor-grab active:cursor-grabbing text-slate-600 hover:text-[#00aed9]",children:e.jsx(at,{size:20})}),e.jsx("div",{className:"w-16 h-12 rounded-lg overflow-hidden bg-slate-800",children:e.jsx("img",{src:re(a.img,100),className:"w-full h-full object-cover",alt:a.name})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-white truncate text-sm",children:a.name}),e.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-black tracking-widest",children:a.type})]}),e.jsxs("div",{className:"text-sm font-black text-[#00aed9]",children:["$",a.price.toLocaleString()]})]})},Dt=({inventory:a,onReorder:s})=>{const[n,l]=x.useState(a),t=Be(me(Ye),me(Xe,{coordinateGetter:Qe})),r=o=>{const{active:d,over:m}=o;if(m&&d.id!==m.id){const h=n.findIndex(y=>y.id===d.id),v=n.findIndex(y=>y.id===m.id),w=Je(n,h,v);l(w),s(w)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(bt,{className:"text-amber-500 fill-amber-500",size:16}),e.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Orden de Unidades Destacadas"})]}),e.jsx(We,{sensors:t,collisionDetection:Ze,onDragEnd:r,children:e.jsx(He,{items:n.map(o=>o.id),strategy:Ke,children:e.jsx("div",{className:"grid grid-cols-1 gap-3",children:n.map(o=>e.jsx(Pt,{car:o},o.id))})})}),n.length===0&&e.jsx("div",{className:"p-8 text-center border-2 border-dashed border-white/5 rounded-3xl text-slate-500 text-sm",children:"No hay unidades destacadas seleccionadas."})]})},ae=({end:a,prefix:s="",suffix:n="",duration:l=1500})=>{const[t,r]=x.useState(0);return x.useEffect(()=>{let o,d;const m=h=>{o||(o=h);const v=h-o,w=Math.min(v/l,1);r(Math.floor(a*(N=>1-Math.pow(1-N,3))(w))),v<l&&(d=requestAnimationFrame(m))};return d=requestAnimationFrame(m),()=>cancelAnimationFrame(d)},[a,l]),e.jsxs("span",{children:[s,(t||0).toLocaleString(),n]})},W=({icon:a,label:s,value:n,color:l,subValue:t})=>e.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,translateY:-5},className:"glass-premium p-6 rounded-[2rem] flex items-center gap-5 group cursor-default",children:[e.jsx("div",{className:`p-4 rounded-2xl ${l} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center transition-transform group-hover:rotate-12 duration-500`,children:e.jsx(a,{className:l.replace("bg-","text-").replace("text-opacity-100",""),size:32,strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-black text-slate-400 dark:text-slate-400 uppercase tracking-[0.2em] mb-1",children:s}),e.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white leading-none tracking-tighter text-glow",children:n}),t&&e.jsxs("div",{className:"flex items-center gap-1.5 mt-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),e.jsx("div",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:t})]})]})]}),Ot=({inventory:a,onUpdate:s,onAdd:n,onDelete:l,onInitializeDb:t})=>{const{user:r}=Ae(i=>i.auth),[o,d]=x.useState("dashboard"),[m,h]=x.useState([]),[v,w]=x.useState(!1),[y,N]=x.useState(!1),[q,S]=x.useState(null),[C,z]=x.useState(null),[P,I]=x.useState(""),[V,E]=x.useState(!1),[Z,O]=x.useState(0),[H,$]=x.useState("Mac"),[A,b]=x.useState(98),M=Re(),G=async()=>{try{const i=await Ue();h(i)}catch(i){console.error("Leads Fetch Error:",i)}};x.useEffect(()=>{G(),(navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("Android"))&&$("iPhone")},[]);const B=async i=>{try{const{generateLeadPDF:f}=await R(async()=>{const{generateLeadPDF:c}=await import("./pdfGenerator-BkU8StVC.js").then(p=>p.p);return{generateLeadPDF:c}},__vite__mapDeps([4,0,1,2,3]));f(i)}catch(f){console.error("PDF Error:",f),alert("Error generando PDF. Ver consola.")}},K=(a||[]).filter(i=>(i.name||"").toLowerCase().includes((P||"").toLowerCase())),J=async()=>{if(t){E(!0);try{await t()}catch(i){console.error(i)}finally{E(!1)}}},Q=()=>{O(i=>i+1)};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-200 font-sans transition-colors duration-300 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-gradient-to-b from-cyan-900/20 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute -top-[200px] -right-[200px] w-[600px] h-[600px] bg-purple-900/20 rounded-full blur-[100px] pointer-events-none"}),e.jsxs("div",{className:"max-w-[1600px] mx-auto p-4 lg:p-10 space-y-8 relative z-10",children:[e.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 border-b border-white/5 pb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#00aed9] font-black text-[10px] uppercase tracking-[0.25em] mb-2 animate-in fade-in slide-in-from-left-5",children:[e.jsx(de,{size:14})," Sistema de Control v3.0"]}),e.jsxs("h1",{className:"text-3xl lg:text-5xl font-black text-white tracking-tighter uppercase leading-none text-glow",children:["Command ",e.jsx("span",{className:"text-[#00aed9]",children:"Center"})]})]}),e.jsxs(fe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"hidden xl:flex items-center gap-4 px-6 py-3 bg-white/5 border border-white/10 rounded-2xl backdrop-blur-3xl group cursor-default",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"text-emerald-500 group-hover:scale-110 transition-transform",size:24}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-emerald-500 rounded-full animate-ping"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:"Security Copilot"}),e.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-500/20 text-emerald-500 text-[8px] font-black rounded-md uppercase",children:"Active"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mt-0.5 whitespace-nowrap",children:["Zero Trust Integrity: ",A,"%"]}),e.jsx("div",{className:"w-1 h-1 bg-slate-700 rounded-full"}),e.jsxs("div",{className:"text-[9px] text-amber-500 font-bold uppercase tracking-widest mt-0.5 flex items-center gap-1",children:[e.jsx(ht,{size:8})," AI Fairness: 99%"]})]})]}),e.jsx("div",{className:"w-[1px] h-8 bg-white/10 mx-2"}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("div",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-widest flex items-center gap-1",children:[e.jsx(Me,{size:10,fill:"currentColor"})," Platform Health"]}),e.jsx("div",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Latency: 24ms"})]})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[e.jsxs("button",{onClick:()=>M("/digital-twin"),className:"h-[44px] px-6 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white rounded-xl font-bold text-xs uppercase tracking-widest shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center gap-2",children:[e.jsx(ce,{size:18})," Gemelo Digital"]}),e.jsxs("button",{onClick:()=>{z(null),w(!0)},className:"h-[44px] px-6 bg-[#00aed9] hover:bg-cyan-500 text-white rounded-xl font-bold text-xs uppercase tracking-widest shadow-lg shadow-cyan-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx(ut,{size:18,strokeWidth:3})," ",e.jsx("span",{className:"hidden sm:inline",children:"Nueva Unidad"}),e.jsx("span",{className:"sm:hidden",children:"Nuevo"})]}),e.jsx("button",{onClick:G,className:"w-[44px] h-[44px] bg-slate-800 text-slate-400 hover:text-white rounded-xl flex items-center justify-center transition-all active:rotate-180 duration-500",title:"Recargar Datos",children:e.jsx(de,{size:18})})]})]}),e.jsx("div",{className:"flex p-2 bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 shadow-inner w-full md:w-fit overflow-x-auto gap-1",children:[{id:"dashboard",label:"Dashboard",icon:je},{id:"inventory",label:"Inventario",icon:he},{id:"pipeline",label:"CRM Leads",icon:ee},{id:"marketing",label:"Marketing",icon:U},{id:"security",label:"Seguridad",icon:se},{id:"billing",label:"FacturaciÃ³n",icon:Te}].map(i=>e.jsxs("button",{onClick:()=>d(i.id),className:`flex-1 md:flex-none px-6 h-[44px] rounded-xl font-black text-[10px] uppercase tracking-[0.15em] flex items-center justify-center gap-3 transition-all whitespace-nowrap ${o===i.id?"bg-[#00aed9] text-white shadow-lg shadow-[#00aed9]/30":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[e.jsx(i.icon,{size:16,strokeWidth:2.5})," ",i.label]},i.id))}),e.jsxs("main",{className:"animate-in fade-in zoom-in-95 duration-300 min-h-[600px]",children:[o==="dashboard"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(W,{icon:ct,label:"Total Inventario",value:e.jsx(ae,{end:a.length,prefix:""}),color:"bg-blue-500 text-blue-500",subValue:a.length>0?"Actualizado":"Sin stock"}),e.jsx(W,{icon:ee,label:"Leads Activos",value:e.jsx(ae,{end:m.filter(i=>i.status==="new").length}),color:"bg-emerald-500 text-emerald-500",subValue:"Potenciales hoy"}),e.jsx(W,{icon:he,label:"Valor Total",value:e.jsx(ae,{end:a.reduce((i,f)=>i+(Number(f.price)||0),0),prefix:"$"}),color:"bg-purple-500 text-purple-500",subValue:"Estimado"}),e.jsx(W,{icon:xe,label:"Sistema",value:"100%",color:"bg-amber-500 text-amber-500",subValue:`v3.0 â€¢ ${H}`})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"group relative overflow-hidden rounded-[2rem] bg-gradient-to-br from-[#0d2232] to-[#081520] border border-white/10 p-8 hover:border-[#00aed9]/50 transition-all cursor-pointer",onClick:()=>M("/digital-twin"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#00aed9]/10 rounded-full blur-3xl group-hover:bg-[#00aed9]/20 transition-all"}),e.jsx(ce,{className:"text-[#00aed9] mb-4",size:40}),e.jsx("h3",{className:"text-2xl font-black text-white uppercase mb-2",children:"Gemelo Digital"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"Crea contenido de marketing viral con tu avatar IA."}),e.jsxs("span",{className:"text-xs font-bold text-[#00aed9] uppercase tracking-widest flex items-center gap-2 group-hover:gap-4 transition-all",children:["Ingresar ",e.jsx("div",{className:"w-4 h-[1px] bg-[#00aed9]"})]})]}),e.jsxs("div",{className:"group relative overflow-hidden rounded-[2rem] bg-gradient-to-br from-[#1a1225] to-[#0f0a15] border border-white/10 p-8 hover:border-purple-500/50 transition-all cursor-pointer",onClick:()=>M("/framework-lab"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-500/10 rounded-full blur-3xl group-hover:bg-purple-500/20 transition-all"}),e.jsx(dt,{className:"text-purple-500 mb-4",size:40}),e.jsx("h3",{className:"text-2xl font-black text-white uppercase mb-2",children:"Framework Lab"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"Gestiona integraciones experimentales (Svelte, Astro)."}),e.jsxs("span",{className:"text-xs font-bold text-purple-500 uppercase tracking-widest flex items-center gap-2 group-hover:gap-4 transition-all",children:["Configurar ",e.jsx("div",{className:"w-4 h-[1px] bg-purple-500"})]})]}),e.jsxs("div",{className:"group relative overflow-hidden rounded-[2rem] bg-gradient-to-br from-[#0f1f18] to-[#050f0a] border border-white/10 p-8 hover:border-emerald-500/50 transition-all cursor-pointer",onClick:()=>d("analytics"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-all"}),e.jsx(ee,{className:"text-emerald-500 mb-4",size:40}),e.jsx("h3",{className:"text-2xl font-black text-white uppercase mb-2",children:"Analytics Pro"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"Mapa de calor de inventario y tendencias."}),e.jsxs("span",{className:"text-xs font-bold text-emerald-500 uppercase tracking-widest flex items-center gap-2 group-hover:gap-4 transition-all",children:["Ver Datos ",e.jsx("div",{className:"w-4 h-[1px] bg-emerald-500"})]})]})]})]}),o==="analytics"&&e.jsx("div",{className:"bg-white/5 backdrop-blur-md rounded-[2rem] p-6 shadow-xl border border-white/10",children:e.jsx(wt,{inventory:a})}),o==="marketing"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 min-h-[600px]",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white/5 backdrop-blur-md rounded-[2rem] p-8 border border-white/10 shadow-xl space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[#00aed9] font-black text-xs uppercase tracking-[0.2em]",children:[e.jsx(U,{size:20})," Content Engine"]}),e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Estrategia SemÃ¡ntica"}),e.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:'Richard IA utiliza bÃºsqueda semÃ¡ntica para identificar quÃ© modelos de tu inventario tienen mÃ¡s "momentum" basado en las consultas de los usuarios. Selecciona una unidad abajo para generar contenido viral.'}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.slice(0,4).map(i=>e.jsxs("button",{onClick:()=>{S(i),N(!0)},className:"flex items-center gap-4 p-4 bg-slate-800/50 rounded-2xl border border-white/5 hover:border-[#00aed9] hover:bg-slate-800 transition-all text-left group",children:[e.jsx("img",{src:re(i.img,100),alt:i.name,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-black text-white uppercase tracking-tight",children:i.name}),e.jsx("div",{className:"text-[10px] text-[#00aed9] font-bold uppercase tracking-widest",children:"Generar Post âœ¨"})]})]},i.id))})]}),e.jsx("div",{className:"lg:col-span-1 h-full",children:e.jsx(Ct,{})})]}),o==="pipeline"&&e.jsx("div",{className:"h-[calc(100vh-350px)] min-h-[500px]",children:e.jsx(st,{leads:m,onPrint:B,searchTerm:P,userRole:r?.role||"admin"})}),o==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/5 backdrop-blur-md p-6 rounded-[2rem] shadow-xl border border-white/10 flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2 text-white",children:[e.jsx(ge,{className:"text-[#00aed9]",size:20}),"Acceso BiomÃ©trico (Passkeys)"]}),e.jsx("p",{className:"text-slate-400 text-xs md:text-sm mt-1",children:"Vincula este dispositivo para iniciar sesiÃ³n sin contraseÃ±a usando FaceID o TouchID."})]}),e.jsxs("button",{onClick:async()=>{if(!pe.currentUser)return alert("Debes estar logueado.");try{const{registerPasskey:i}=await R(async()=>{const{registerPasskey:f}=await import("./index-Y1hSRJUR.js").then(c=>c.ay);return{registerPasskey:f}},__vite__mapDeps([0,1,2,3]));await i(pe.currentUser),alert("âœ… Dispositivo vinculado exitosamente.")}catch(i){alert("Error: "+i.message)}},className:"px-6 py-3 bg-[#00aed9]/10 text-[#00aed9] hover:bg-[#00aed9] hover:text-white border border-[#00aed9]/20 rounded-xl font-bold text-sm transition-all flex items-center gap-2",children:[e.jsx(ge,{size:16})," Vincular Dispositivo"]})]}),e.jsx("div",{className:"min-h-[600px]",children:e.jsx(St,{})})]}),o==="billing"&&e.jsx("div",{className:"min-h-[600px]",children:e.jsx($e,{})}),o==="inventory"&&e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 min-h-[600px]",children:[e.jsxs("div",{className:"flex-1 bg-white/5 backdrop-blur-md rounded-[2rem] shadow-xl border border-white/10 overflow-hidden flex flex-col h-[calc(100vh-350px)]",children:[e.jsxs("div",{className:"p-6 border-b border-white/5 flex flex-col md:flex-row justify-between items-center gap-4 bg-slate-900/50",children:[e.jsxs("div",{className:"relative w-full md:w-96 group",children:[e.jsx(xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-[#00aed9] transition-colors",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar vehÃ­culo...",className:"w-full pl-12 pr-4 h-[50px] bg-slate-950 border border-white/10 rounded-xl focus:ring-2 focus:ring-[#00aed9] focus:border-transparent outline-none transition-all text-sm font-medium text-white placeholder:text-slate-600",value:P,onChange:i=>I(i.target.value)})]}),t&&e.jsx("button",{onClick:J,disabled:V,className:"px-4 py-2 bg-red-500/10 text-red-500 border border-red-500/20 hover:bg-red-500/20 rounded-lg text-xs font-bold uppercase tracking-widest transition-all",children:V?"Resetting...":"Reset DB"})]}),e.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-900/80 sticky top-0 z-10 backdrop-blur-md",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"VehÃ­culo"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-500 uppercase tracking-widest hidden md:table-cell",children:"CategorÃ­a"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-500 uppercase tracking-widest hidden sm:table-cell",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-500 uppercase tracking-widest hidden md:table-cell",children:"Market Advantage"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Precio"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-500 uppercase tracking-widest text-right",children:"AcciÃ³n"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:K.map(i=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-lg border border-white/10 flex items-center justify-center p-1 overflow-hidden",children:e.jsx("img",{src:re(i.img,200),className:"max-w-full max-h-full object-cover rounded-md",alt:i.name})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:i.name}),e.jsx("div",{className:"text-xs text-slate-500 hidden sm:block truncate max-w-[150px]",children:i.description||"Sin descripciÃ³n"})]})]})}),e.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:e.jsx("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs font-bold text-slate-400 uppercase",children:i.type})}),e.jsx("td",{className:"px-6 py-4 hidden sm:table-cell",children:i.badge?e.jsx("span",{className:"px-3 py-1 bg-[#00aed9]/10 text-[#00aed9] rounded-full text-xs font-bold uppercase",children:i.badge}):e.jsx("span",{className:"px-3 py-1 bg-emerald-500/10 text-emerald-500 rounded-full text-xs font-bold uppercase",children:"Stock"})}),e.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:(()=>{const f=vt(i,m.filter(p=>p.vehicleId===i.id).length),c=i.name.toLowerCase().includes("electric")||i.name.toLowerCase().includes("tesla")||i.type==="luxury";return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${f.advantageScore>75?"bg-emerald-500":"bg-amber-500"}`}),e.jsxs("span",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:[f.daysToSale," DTS"]}),c&&e.jsxs("span",{className:"flex items-center gap-0.5 px-1.5 py-0.25 bg-emerald-500/10 text-emerald-500 rounded text-[7px] font-black uppercase",children:[e.jsx(_e,{size:8,fill:"currentColor"})," Eco"]})]}),e.jsxs("div",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-tight",children:["AI Confidence: ",f.confidence,"%"]})]})})()}),e.jsxs("td",{className:"px-6 py-4 text-right font-bold text-slate-200",children:["$",(i.price||0).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{S(i),N(!0)},className:"w-[40px] h-[40px] rounded-lg bg-[#00aed9]/10 flex items-center justify-center text-[#00aed9] hover:bg-[#00aed9] hover:text-white transition-colors",title:"Generar Marketing Content",children:e.jsx(U,{size:16})}),e.jsx("button",{onClick:()=>{z(i),w(!0)},className:"w-[40px] h-[40px] rounded-lg bg-slate-800 flex items-center justify-center text-slate-500 hover:bg-[#00aed9] hover:text-white transition-colors",children:e.jsx(mt,{size:16})}),e.jsx("button",{onClick:()=>l(i.id),className:"w-[40px] h-[40px] rounded-lg bg-rose-900/20 flex items-center justify-center text-rose-500 hover:bg-rose-500 hover:text-white transition-colors",children:e.jsx(ft,{size:16})})]})})]},i.id))})]})})]}),e.jsx("div",{className:"w-full lg:w-96 bg-white/5 backdrop-blur-md rounded-[2rem] p-6 border border-white/10 shadow-xl overflow-y-auto max-h-[calc(100vh-350px)]",children:e.jsx(Dt,{inventory:a.slice(0,10),onReorder:i=>{console.log("New Inventory Order:",i)}})})]})]})]}),v&&e.jsx(kt,{car:C,onClose:()=>w(!1),onPhotoUploaded:Q,onSave:async i=>{C?await s({...i,id:C.id}):await n(i)}})]})};export{Ot as default};
