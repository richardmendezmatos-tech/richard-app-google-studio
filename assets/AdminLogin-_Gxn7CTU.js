const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Y1hSRJUR.js","assets/vendor-react-BjLkUuqo.js","assets/vendor-firebase-D6pLxh_h.js","assets/index-BN8qD5xX.css"])))=>i.map(i=>d[i]);
import{j as e,E as P,_ as w,F as A,G as v,f as z,J as T,A as O,K as y,M as D,O as j,P as R}from"./index-Y1hSRJUR.js";import{u as N,r as n}from"./vendor-react-BjLkUuqo.js";import{G,s as F}from"./vendor-firebase-D6pLxh_h.js";import{M}from"./mail-Ry3Kmwd4.js";import{L as I}from"./lock-kdm5frkL.js";import{E as V}from"./eye-off-5BvcDgze.js";import{E as q}from"./eye-BYMeLNLO.js";import{S as K}from"./scan-face-C9u8fs2p.js";const U=({clientId:l="197990063384-pr9qvk3apkretgqsj8t5v7h83vn44koc.apps.googleusercontent.com",onSuccess:h})=>{const x=N(),[f,p]=n.useState(!1);n.useEffect(()=>{const a=document.createElement("script");return a.src="https://accounts.google.com/gsi/client",a.async=!0,a.defer=!0,a.onload=()=>p(!0),document.body.appendChild(a),()=>{document.body.removeChild(a)}},[]),n.useEffect(()=>{if(!f||!l)return;window.google&&(window.google.accounts.id.initialize({client_id:l,callback:g,auto_select:!1,cancel_on_tap_outside:!0,use_fedcm_for_prompt:!0}),window.google.accounts.id.prompt(c=>{(c.isNotDisplayed()||c.isSkippedMoment())&&console.log("One Tap skipped/not displayed:",c.getNotDisplayedReason())}))},[f,l]);const g=async a=>{try{console.log("Google Security Token Recibido:",a.credential);const c=G.credential(a.credential),d=await F(P,c);if(console.log("Usuario autenticado vÃ­a One Tap:",d.user.email),h)h();else{const{loginSuccess:o}=await w(async()=>{const{loginSuccess:m}=await import("./index-Y1hSRJUR.js").then(r=>r.az);return{loginSuccess:m}},__vite__mapDeps([0,1,2,3]));x("/admin")}}catch(c){console.error("Error en One Tap Login:",c)}};return e.jsx("div",{id:"one-tap-container",className:"fixed top-4 right-4 z-50 pointer-events-none"})},ee=()=>{const[l,h]=n.useState(""),[x,f]=n.useState(""),[p,g]=n.useState(!1),[a,c]=n.useState(""),[d,o]=n.useState(null),[m,r]=n.useState(!1),b=N(),u=A();n.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("richard_key");t&&k(t)},[]);const k=async s=>{r(!0),o("Activando Protocolo Ghost de CTO...");try{const{validateGhostKey:t}=await w(async()=>{const{validateGhostKey:C}=await import("./index-Y1hSRJUR.js").then(L=>L.ay);return{validateGhostKey:C}},__vite__mapDeps([0,1,2,3])),i=await t(s);u(v(i)),b("/admin")}catch{o("Llave Maestra Rechazada.")}finally{r(!1)}},E=async()=>{if(!l)return o("Ingresa tu email primero");r(!0);try{const{sendMagicLink:s}=await w(async()=>{const{sendMagicLink:t}=await import("./index-Y1hSRJUR.js").then(i=>i.ay);return{sendMagicLink:t}},__vite__mapDeps([0,1,2,3]));await s(l),o("âœ¨ Enlace enviado a tu correo. Revisa tu bandeja.")}catch(s){o("Error: "+s.message)}finally{r(!1)}},_=async s=>{s.preventDefault(),o(null),r(!0),u(y());try{const t=await D(l,x,a||"123456");u(v(t)),b("/admin")}catch(t){console.error("Login Error Details:",t);let i="";t.code==="auth/invalid-credential"||t.code==="auth/wrong-password"?i="Credenciales incorrectas":t.message.includes("ACCESS_DENIED")?i="Cuenta no autorizada (Verifica tu Rol)":t.message.includes("INVALID_2FA")?i="Token 2FA incorrecto (Usa 123456)":i=`Error: ${t.code||t.message||"Desconocido"}`,o(i),u(j(i))}finally{r(!1)}},S=async()=>{o(null),r(!0),u(y());try{if(await R())throw new Error("Passkey backend verification not implemented for production.")}catch(s){console.error("Passkey Failed:",s);const t=s.message||"No se pudo verificar la identidad biomÃ©trica.";o(t),u(j(t))}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 sm:p-6 bg-[#050b14] relative overflow-hidden font-sans",children:[e.jsx(U,{onSuccess:()=>b("/admin")}),e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[600px] h-[600px] bg-[#00aed9]/20 rounded-full blur-[120px] pointer-events-none opacity-40 animate-pulse"}),e.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[500px] h-[500px] bg-purple-600/20 rounded-full blur-[100px] pointer-events-none opacity-30"}),e.jsxs("div",{className:"w-full max-w-[420px] bg-white/5 backdrop-blur-2xl border border-white/10 rounded-[30px] shadow-2xl relative z-10 overflow-hidden",children:[e.jsx("div",{className:"h-1 w-full bg-gradient-to-r from-transparent via-[#00aed9] to-transparent opacity-50"}),!1,e.jsxs("div",{className:"p-8 sm:p-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-gradient-to-br from-[#00aed9]/20 to-purple-500/10 border border-white/5 mb-5 shadow-lg shadow-[#00aed9]/10",children:e.jsx(z,{className:"text-[#00aed9]",size:28})}),e.jsx("h1",{className:"text-2xl font-black text-white tracking-tight mb-2",children:"Command Center"}),e.jsx("p",{className:"text-xs font-medium text-slate-400 uppercase tracking-widest",children:"Acceso Seguro Administrativo"})]}),e.jsxs("form",{onSubmit:_,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider ml-1",children:"Email Corporativo"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-[#00aed9] transition-colors",children:e.jsx(M,{size:18})}),e.jsx("input",{type:"email",value:l,onChange:s=>h(s.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-black/20 border border-white/10 rounded-xl text-sm font-medium text-white placeholder:text-slate-600 focus:outline-none focus:border-[#00aed9]/50 focus:bg-black/40 transition-all hover:bg-black/30",placeholder:"admin@empresa.com",required:!0})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider ml-1",children:"ContraseÃ±a"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-[#00aed9] transition-colors",children:e.jsx(I,{size:18})}),e.jsx("input",{type:p?"text":"password",value:x,onChange:s=>f(s.target.value),className:"w-full pl-12 pr-12 py-3.5 bg-black/20 border border-white/10 rounded-xl text-sm font-medium text-white placeholder:text-slate-600 focus:outline-none focus:border-[#00aed9]/50 focus:bg-black/40 transition-all hover:bg-black/30",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white transition-colors",children:p?e.jsx(V,{size:18}):e.jsx(q,{size:18})})]})]}),e.jsx("div",{className:"h-10 flex flex-col items-center justify-center",children:d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-rose-400 animate-in fade-in slide-in-from-top-1",children:[e.jsx(T,{size:12}),e.jsx("span",{className:"text-xs font-bold",children:d})]}),d&&!d.includes("enviado")&&e.jsx("button",{type:"button",onClick:E,className:"mt-1 text-[9px] font-black text-[#00aed9] uppercase tracking-widest hover:underline",children:"Â¿Problemas de acceso? Enviar Enlace MÃ¡gico ðŸ“§"})]})}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:m,className:"w-full py-4 bg-[#00aed9] hover:bg-[#009ac0] text-white rounded-xl font-bold uppercase tracking-widest text-xs transition-all shadow-lg shadow-[#00aed9]/25 hover:shadow-cyan-400/40 active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed group",children:m?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:["Acceder al Panel ",e.jsx(O,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})}),e.jsxs("div",{className:"relative flex items-center py-2",children:[e.jsx("div",{className:"flex-grow border-t border-white/5"}),e.jsx("span",{className:"flex-shrink-0 mx-4 text-[10px] font-bold text-slate-600 uppercase",children:"O usa biomÃ©tricos"}),e.jsx("div",{className:"flex-grow border-t border-white/5"})]}),e.jsxs("button",{type:"button",onClick:S,className:"w-full py-3.5 bg-white/5 hover:bg-white/10 text-white border border-white/10 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all hover:border-white/20 active:bg-white/15",children:[e.jsx(K,{size:16,className:"text-purple-400"})," Acceso con Passkey"]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("a",{href:"#",className:"text-[10px] font-medium text-slate-500 hover:text-[#00aed9] transition-colors",children:["Â¿Problemas de acceso? ",e.jsx("span",{className:"underline decoration-slate-700 underline-offset-4",children:"Contactar Soporte IT"})]})})]})]})]})};export{ee as default};
