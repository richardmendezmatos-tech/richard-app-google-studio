const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pwa-action-sheet.entry-CEjJq-OP.js","assets/vendor-react-BjLkUuqo.js","assets/vendor-firebase-D6pLxh_h.js","assets/pwa-camera-modal.entry-D6ufuXCp.js","assets/pwa-toast.entry-B3yjyxAW.js","assets/pwa-camera-modal-instance.entry-C1iZHxcr.js","assets/pwa-camera.entry-BJp8meFL.js","assets/web--0y7BETA.js","assets/web-BFxWANXr.js","assets/AdminPanel-BNzSC_u-.js","assets/trending-up-I-AzIbKF.js","assets/lock-kdm5frkL.js","assets/eye-BYMeLNLO.js","assets/B2BBillingDashboard-DiKukQ4b.js","assets/activity-DGJ0tE_T.js","assets/KanbanBoard-CAyJdK0D.js","assets/mail-Ry3Kmwd4.js","assets/server-XDRQoG5G.js","assets/DigitalTwinDashboard-D6xV3g9f.js","assets/AIConsultant-DNiysy1_.js","assets/AILabView-Dh15qjB7.js","assets/UserLogin-3h_r9O5u.js","assets/VehicleDetail-CNtj__pv.js","assets/TradeInView-EkdjCxkx.js","assets/arrow-left-CdvJ-XWf.js","assets/AppraisalView-OO8mZQr4.js","assets/ComparisonView-Df6vekoJ.js","assets/AdminLogin-_Gxn7CTU.js","assets/eye-off-5BvcDgze.js","assets/scan-face-C9u8fs2p.js","assets/BlogView-Dk1XBtbv.js","assets/DigitalGarage-BuXYB_-D.js","assets/file-text-DxPBHJKD.js","assets/PreQualifyView-CaOOZD_J.js","assets/PrivacyView-v7pVGtPT.js","assets/shield-DFx77hb5.js","assets/TermsView-oQq0Xir6.js","assets/NotFound-3vF-UmrX.js","assets/FrameworkDashboard-CX5trv9Q.js","assets/rocket-BXRoMuoa.js","assets/KanbanDemo-JjmkXRrF.js","assets/BetaOnboard-BVZ5aObl.js","assets/EarlyAdopterOnboard-cX_rQTLN.js"])))=>i.map(i=>d[i]);
import{d as vf,f as F0,g as ui,r as b,R as K,u as zr,a as sl,H as V0,B as B0,h as z0,i as te,N as bf}from"./vendor-react-BjLkUuqo.js";import{r as gt,m as Ot,C as Nt,n as Lt,E as di,p as q0,F as nl,L as il,t as dr,v as H0,w as hi,x as wf,y as Va,z as fi,A as G0,B as xf,D as K0,H as W0,I as J0,J as jn,K as Y0,M as Q0,N as X0,O as Z0,P as ev,Q as tv,R as rv,S as sv,c as qr,f as st,T as hr,i as _f,q as Sf,l as kf,o as Ba,U as za,V as Ef,d as Hr,e as Gr,W as nv,X as iv,Y as av,Z as ov,$ as Tf,a0 as lv,a1 as cv,a2 as uv,a3 as pi,G as Cf,s as dv,a4 as In,a5 as Af,a6 as hv,a7 as fv,a as Rf,a8 as On,a9 as Pf,aa as pv,ab as jf}from"./vendor-firebase-D6pLxh_h.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Fi={exports:{}},rs={};var Ic;function mv(){if(Ic)return rs;Ic=1;var e=vf(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var d,h={},f=null,p=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(p=l.ref);for(d in l)s.call(l,d)&&!i.hasOwnProperty(d)&&(h[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)h[d]===void 0&&(h[d]=l[d]);return{$$typeof:t,type:o,key:f,ref:p,props:h,_owner:n.current}}return rs.Fragment=r,rs.jsx=a,rs.jsxs=a,rs}var Oc;function gv(){return Oc||(Oc=1,Fi.exports=mv()),Fi.exports}var u=gv(),Qs={},Nc;function yv(){if(Nc)return Qs;Nc=1;var e=F0();return Qs.createRoot=e.createRoot,Qs.hydrateRoot=e.hydrateRoot,Qs}var vv=yv();const bv=ui(vv);var Kr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wv={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},xv=class{#e=wv;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Qt=new xv;function _v(e){setTimeout(e,0)}var nr=typeof window>"u"||"Deno"in globalThis;function Ae(){}function Sv(e,t){return typeof e=="function"?e(t):e}function qa(e){return typeof e=="number"&&e>=0&&e!==1/0}function If(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Pt(e,t){return typeof e=="function"?e(t):e}function ze(e,t){return typeof e=="function"?e(t):e}function Mc(e,t){const{type:r="all",exact:s,fetchStatus:n,predicate:i,queryKey:a,stale:o}=e;if(a){if(s){if(t.queryHash!==al(a,t.options))return!1}else if(!ws(t.queryKey,a))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||n&&n!==t.state.fetchStatus||i&&!i(t))}function $c(e,t){const{exact:r,status:s,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(ir(t.options.mutationKey)!==ir(i))return!1}else if(!ws(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function al(e,t){return(t?.queryKeyHashFn||ir)(e)}function ir(e){return JSON.stringify(e,(t,r)=>Ha(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function ws(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>ws(e[r],t[r])):!1}var kv=Object.prototype.hasOwnProperty;function Of(e,t,r=0){if(e===t)return e;if(r>500)return t;const s=Dc(e)&&Dc(t);if(!s&&!(Ha(e)&&Ha(t)))return t;const i=(s?e:Object.keys(e)).length,a=s?t:Object.keys(t),o=a.length,l=s?new Array(o):{};let c=0;for(let d=0;d<o;d++){const h=s?d:a[d],f=e[h],p=t[h];if(f===p){l[h]=f,(s?d<i:kv.call(e,h))&&c++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){l[h]=p;continue}const m=Of(f,p,r+1);l[h]=m,m===f&&c++}return i===o&&c===i?e:l}function Nn(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Dc(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ha(e){if(!Lc(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Lc(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Lc(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ev(e){return new Promise(t=>{Qt.setTimeout(t,e)})}function Ga(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Of(e,t):t}function Tv(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function Cv(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var ol=Symbol();function Nf(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===ol?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ll(e,t){return typeof e=="function"?e(...t):!!e}function Av(e,t,r){let s=!1,n;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(n??=t(),s||(s=!0,n.aborted?r():n.addEventListener("abort",r,{once:!0})),n)}),e}var Rv=class extends Kr{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!nr&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},cl=new Rv;function Ka(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},r.reject=n=>{s({status:"rejected",reason:n}),t(n)},r}var Pv=_v;function jv(){let e=[],t=0,r=o=>{o()},s=o=>{o()},n=Pv;const i=o=>{t?e.push(o):n(()=>{r(o)})},a=()=>{const o=e;e=[],o.length&&n(()=>{s(()=>{o.forEach(l=>{r(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{n=o}}}var de=jv(),Iv=class extends Kr{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!nr&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Mn=new Iv;function Ov(e){return Math.min(1e3*2**e,3e4)}function Mf(e){return(e??"online")==="online"?Mn.isOnline():!0}var Wa=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function $f(e){let t=!1,r=0,s;const n=Ka(),i=()=>n.status!=="pending",a=g=>{if(!i()){const y=new Wa(g);f(y),e.onCancel?.(y)}},o=()=>{t=!0},l=()=>{t=!1},c=()=>cl.isFocused()&&(e.networkMode==="always"||Mn.isOnline())&&e.canRun(),d=()=>Mf(e.networkMode)&&e.canRun(),h=g=>{i()||(s?.(),n.resolve(g))},f=g=>{i()||(s?.(),n.reject(g))},p=()=>new Promise(g=>{s=y=>{(i()||c())&&g(y)},e.onPause?.()}).then(()=>{s=void 0,i()||e.onContinue?.()}),m=()=>{if(i())return;let g;const y=r===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{if(i())return;const x=e.retry??(nr?0:3),v=e.retryDelay??Ov,S=typeof v=="function"?v(r,w):v,k=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,w);if(t||!k){f(w);return}r++,e.onFail?.(r,w),Ev(S).then(()=>c()?void 0:p()).then(()=>{t?f(w):m()})})};return{promise:n,status:()=>n.status,cancel:a,continue:()=>(s?.(),n),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),n)}}var Df=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qa(this.gcTime)&&(this.#e=Qt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(nr?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Qt.clearTimeout(this.#e),this.#e=void 0)}},Nv=class extends Df{#e;#t;#r;#n;#s;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Fc(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Fc(this.options);t.data!==void 0&&(this.setState(Uc(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=Ga(this.state.data,e,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#s?.promise;return this.#s?.cancel(e),t?t.then(Ae).catch(Ae):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>ze(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ol||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Pt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!If(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const o=this.observers.find(l=>l.options.queryFn);o&&this.setOptions(o.options)}const r=new AbortController,s=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},n=()=>{const o=Nf(this.options,t),c=(()=>{const d={client:this.#n,queryKey:this.queryKey,meta:this.meta};return s(d),d})();return this.#o=!1,this.options.persister?this.options.persister(o,c,this):o(c)},a=(()=>{const o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:n};return s(o),o})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#i({type:"fetch",meta:a.fetchOptions?.meta}),this.#s=$f({initialPromise:t?.initialPromise,fn:a.fetchFn,onCancel:o=>{o instanceof Wa&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(o,l)=>{this.#i({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const o=await this.#s.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#r.config.onSuccess?.(o,this),this.#r.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof Wa){if(o.silent)return this.#s.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#i({type:"error",error:o}),this.#r.config.onError?.(o,this),this.#r.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Lf(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,...Uc(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?s:void 0,s;case"error":const n=e.error;return{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),de.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Lf(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Mf(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Uc(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Fc(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Mv=class extends Kr{constructor(e,t){super(),this.options=t,this.#e=e,this.#i=null,this.#o=Ka(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#n=void 0;#s;#a;#o;#i;#m;#h;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Vc(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ja(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ja(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#x(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ze(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),t._defaulted&&!Nn(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&Bc(this.#t,r,this.options,t)&&this.#d(),this.updateResult(),s&&(this.#t!==r||ze(this.options.enabled,this.#t)!==ze(t.enabled,this.#t)||Pt(this.options.staleTime,this.#t)!==Pt(t.staleTime,this.#t))&&this.#g();const n=this.#y();s&&(this.#t!==r||ze(this.options.enabled,this.#t)!==ze(t.enabled,this.#t)||n!==this.#l)&&this.#v(n)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return Dv(this,r)&&(this.#n=r,this.#a=this.options,this.#s=this.#t.state),r}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t?.(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(e){this.#_();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Ae)),t}#g(){this.#w();const e=Pt(this.options.staleTime,this.#t);if(nr||this.#n.isStale||!qa(e))return;const r=If(this.#n.dataUpdatedAt,e)+1;this.#c=Qt.setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#x(),this.#l=e,!(nr||ze(this.options.enabled,this.#t)===!1||!qa(this.#l)||this.#l===0)&&(this.#u=Qt.setInterval(()=>{(this.options.refetchIntervalInBackground||cl.isFocused())&&this.#d()},this.#l))}#b(){this.#g(),this.#v(this.#y())}#w(){this.#c&&(Qt.clearTimeout(this.#c),this.#c=void 0)}#x(){this.#u&&(Qt.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,s=this.options,n=this.#n,i=this.#s,a=this.#a,l=e!==r?e.state:this.#r,{state:c}=e;let d={...c},h=!1,f;if(t._optimisticResults){const _=this.hasListeners(),A=!_&&Vc(e,t),E=_&&Bc(e,r,t,s);(A||E)&&(d={...d,...Lf(c.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:g}=d;f=d.data;let y=!1;if(t.placeholderData!==void 0&&f===void 0&&g==="pending"){let _;n?.isPlaceholderData&&t.placeholderData===a?.placeholderData?(_=n.data,y=!0):_=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,_!==void 0&&(g="success",f=Ga(n?.data,_,t),h=!0)}if(t.select&&f!==void 0&&!y)if(n&&f===i?.data&&t.select===this.#m)f=this.#h;else try{this.#m=t.select,f=t.select(f),f=Ga(n?.data,f,t),this.#h=f,this.#i=null}catch(_){this.#i=_}this.#i&&(p=this.#i,f=this.#h,m=Date.now(),g="error");const w=d.fetchStatus==="fetching",x=g==="pending",v=g==="error",S=x&&w,k=f!==void 0,C={status:g,fetchStatus:d.fetchStatus,isPending:x,isSuccess:g==="success",isError:v,isInitialLoading:S,isLoading:S,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!x,isLoadingError:v&&!k,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:v&&k,isStale:ul(e,t),refetch:this.refetch,promise:this.#o,isEnabled:ze(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const _=C.data!==void 0,A=C.status==="error"&&!_,E=V=>{A?V.reject(C.error):_&&V.resolve(C.data)},P=()=>{const V=this.#o=C.promise=Ka();E(V)},M=this.#o;switch(M.status){case"pending":e.queryHash===r.queryHash&&E(M);break;case"fulfilled":(A||C.data!==M.value)&&P();break;case"rejected":(!A||C.error!==M.reason)&&P();break}}return C}updateResult(){const e=this.#n,t=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#a=this.options,this.#s.data!==void 0&&(this.#f=this.#t),Nn(t,e))return;this.#n=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,n=typeof s=="function"?s():s;if(n==="all"||!n&&!this.#p.size)return!0;const i=new Set(n??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some(a=>{const o=a;return this.#n[o]!==e[o]&&i.has(o)})};this.#S({listeners:r()})}#_(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){de.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function $v(e,t){return ze(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Vc(e,t){return $v(e,t)||e.state.data!==void 0&&Ja(e,t,t.refetchOnMount)}function Ja(e,t,r){if(ze(t.enabled,e)!==!1&&Pt(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&ul(e,t)}return!1}function Bc(e,t,r,s){return(e!==t||ze(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ul(e,r)}function ul(e,t){return ze(t.enabled,e)!==!1&&e.isStaleByTime(Pt(t.staleTime,e))}function Dv(e,t){return!Nn(e.getCurrentResult(),t)}function $n(e){return{onFetch:(t,r)=>{const s=t.options,n=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let d=!1;const h=m=>{Av(m,()=>t.signal,()=>d=!0)},f=Nf(t.options,t.fetchOptions),p=async(m,g,y)=>{if(d)return Promise.reject();if(g==null&&m.pages.length)return Promise.resolve(m);const x=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:g,direction:y?"backward":"forward",meta:t.options.meta};return h(T),T})(),v=await f(x),{maxPages:S}=t.options,k=y?Cv:Tv;return{pages:k(m.pages,v,S),pageParams:k(m.pageParams,g,S)}};if(n&&i.length){const m=n==="backward",g=m?Uf:Ya,y={pages:i,pageParams:a},w=g(s,y);o=await p(y,w,m)}else{const m=e??i.length;do{const g=l===0?a[0]??s.initialPageParam:Ya(s,o);if(l>0&&g==null)break;o=await p(o,g),l++}while(l<m)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=c}}}function Ya(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function Uf(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function Lv(e,t){return t?Ya(e,t)!=null:!1}function Uv(e,t){return!t||!e.getPreviousPageParam?!1:Uf(e,t)!=null}var Fv=class extends Mv{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:$n()})}getOptimisticResult(e){return e.behavior=$n(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:r}=e,s=super.createResult(e,t),{isFetching:n,isRefetching:i,isError:a,isRefetchError:o}=s,l=r.fetchMeta?.fetchMore?.direction,c=a&&l==="forward",d=n&&l==="forward",h=a&&l==="backward",f=n&&l==="backward";return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Lv(t,r.data),hasPreviousPage:Uv(t,r.data),isFetchNextPageError:c,isFetchingNextPage:d,isFetchPreviousPageError:h,isFetchingPreviousPage:f,isRefetchError:o&&!c&&!h,isRefetching:i&&!d&&!f}}},Vv=class extends Df{#e;#t;#r;#n;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||Ff(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#s({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=$f({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,a)=>{this.#s({type:"failed",failureCount:i,error:a})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const s=this.state.status==="pending",n=!this.#n.canStart();try{if(s)t();else{this.#s({type:"pending",variables:e,isPaused:n}),await this.#r.config.onMutate?.(e,this,r);const a=await this.options.onMutate?.(e,r);a!==this.state.context&&this.#s({type:"pending",context:a,variables:e,isPaused:n})}const i=await this.#n.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#s({type:"success",data:i}),i}catch(i){try{await this.#r.config.onError?.(i,e,this.state.context,this,r)}catch(a){Promise.reject(a)}try{await this.options.onError?.(i,e,this.state.context,r)}catch(a){Promise.reject(a)}try{await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r)}catch(a){Promise.reject(a)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,r)}catch(a){Promise.reject(a)}throw this.#s({type:"error",error:i}),i}finally{this.#r.runNext(this)}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),de.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function Ff(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bv=class extends Kr{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const s=new Vv({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){this.#e.add(e);const t=Xs(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Xs(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Xs(e);if(typeof t=="string"){const s=this.#t.get(t)?.find(n=>n.state.status==="pending");return!s||s===e}else return!0}runNext(e){const t=Xs(e);return typeof t=="string"?this.#t.get(t)?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){de.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>$c(t,r))}findAll(e={}){return this.getAll().filter(t=>$c(e,t))}notify(e){de.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return de.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ae))))}};function Xs(e){return e.options.scope?.id}var zv=class extends Kr{#e;#t=void 0;#r;#n;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Nn(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&ir(r.mutationKey)!==ir(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#a()}mutate(t,r){return this.#n=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#s(){const t=this.#r?.state??Ff();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){de.batch(()=>{if(this.#n&&this.hasListeners()){const r=this.#t.variables,s=this.#t.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#n.onSuccess?.(t.data,r,s,n)}catch(i){Promise.reject(i)}try{this.#n.onSettled?.(t.data,null,r,s,n)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#n.onError?.(t.error,r,s,n)}catch(i){Promise.reject(i)}try{this.#n.onSettled?.(void 0,t.error,r,s,n)}catch(i){Promise.reject(i)}}}this.listeners.forEach(r=>{r(this.#t)})})}},qv=class extends Kr{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const s=t.queryKey,n=t.queryHash??al(s,t);let i=this.get(n);return i||(i=new Nv({client:e,queryKey:s,queryHash:n,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){de.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Mc(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Mc(e,r)):t}notify(e){de.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){de.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){de.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Hv=class{#e;#t;#r;#n;#s;#a;#o;#i;constructor(e={}){this.#e=e.queryCache||new qv,this.#t=e.mutationCache||new Bv,this.#r=e.defaultOptions||{},this.#n=new Map,this.#s=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=cl.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=Mn.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Pt(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(s.queryHash)?.state.data,a=Sv(t,i);if(a!==void 0)return this.#e.build(this,s).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return de.batch(()=>this.#e.findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;de.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return de.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=de.batch(()=>this.#e.findAll(e).map(n=>n.cancel(r)));return Promise.all(s).then(Ae).catch(Ae)}invalidateQueries(e,t={}){return de.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=de.batch(()=>this.#e.findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ae)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Ae)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(Pt(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ae).catch(Ae)}fetchInfiniteQuery(e){return e.behavior=$n(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ae).catch(Ae)}ensureInfiniteQueryData(e){return e.behavior=$n(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Mn.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(ir(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(s=>{ws(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){this.#s.set(ir(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(s=>{ws(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=al(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ol&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Vf=b.createContext(void 0),dl=e=>{const t=b.useContext(Vf);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Gv=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(Vf.Provider,{value:e,children:t})),Bf=b.createContext(!1),Kv=()=>b.useContext(Bf);Bf.Provider;function Wv(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Jv=b.createContext(Wv()),Yv=()=>b.useContext(Jv),Qv=(e,t,r)=>{const s=r?.state.error&&typeof e.throwOnError=="function"?ll(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||s)&&(t.isReset()||(e.retryOnMount=!1))},Xv=e=>{b.useEffect(()=>{e.clearReset()},[e])},Zv=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(n&&e.data===void 0||ll(r,[e.error,s])),eb=e=>{if(e.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...n)=>r(s(...n)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},tb=(e,t)=>e.isLoading&&e.isFetching&&!t,rb=(e,t)=>e?.suspense&&t.isPending,zc=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function sb(e,t,r){const s=Kv(),n=Yv(),i=dl(),a=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(a);const o=i.getQueryCache().get(a.queryHash);a._optimisticResults=s?"isRestoring":"optimistic",eb(a),Qv(a,n,o),Xv(n);const l=!i.getQueryCache().get(a.queryHash),[c]=b.useState(()=>new t(i,a)),d=c.getOptimisticResult(a),h=!s&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(f=>{const p=h?c.subscribe(de.batchCalls(f)):Ae;return c.updateResult(),p},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(a)},[a,c]),rb(a,d))throw zc(a,c,n);if(Zv({result:d,errorResetBoundary:n,throwOnError:a.throwOnError,query:o,suspense:a.suspense}))throw d.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(a,d),a.experimental_prefetchInRender&&!nr&&tb(d,s)&&(l?zc(a,c,n):o?.promise)?.catch(Ae).finally(()=>{c.updateResult()}),a.notifyOnChangeProps?d:c.trackResult(d)}function Vi(e,t){const r=dl(),[s]=b.useState(()=>new zv(r,e));b.useEffect(()=>{s.setOptions(e)},[s,e]);const n=b.useSyncExternalStore(b.useCallback(a=>s.subscribe(de.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=b.useCallback((a,o)=>{s.mutate(a,o).catch(Ae)},[s]);if(n.error&&ll(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}function zf(e,t){return sb(e,Fv)}const nb="modulepreload",ib=function(e){return"/"+e},qc={},q=function(t,r,s){let n=Promise.resolve();if(r&&r.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");n=l(r.map(c=>{if(c=ib(c),c in qc)return;qc[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":nb,d||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),d)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};var ab=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}})(),qf=function(e,t,r,s){function n(i){return i instanceof r?i:new r((function(a){a(i)}))}return new(r||(r=Promise))((function(i,a){function o(d){try{c(s.next(d))}catch(h){a(h)}}function l(d){try{c(s.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(e,t||[])).next())}))},Hf=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,n,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(d){return l([c,d])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(r=0)),r;)try{if(s=1,n&&(i=c[0]&2?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],n=0}finally{s=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Hc=function(e,t,r){if(r||arguments.length===2)for(var s=0,n=t.length,i;s<n;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))},ob="ionicpwaelements",xn,Gf,Me=!1,Qa=!1,yt=function(e,t){return function(){}},lb=function(e,t){return function(){}},cb="{visibility:hidden}.hydrated{visibility:inherit}",Gc={},ub="http://www.w3.org/2000/svg",db="http://www.w3.org/1999/xhtml",hb=function(e){return e!=null},hl=function(e){return e=typeof e,e==="object"||e==="function"};function Kf(e){var t,r,s;return(s=(r=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||r===void 0?void 0:r.getAttribute("content"))!==null&&s!==void 0?s:void 0}var fb=function(e,t){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];var n=null,i=!1,a=!1,o=[],l=function(h){for(var f=0;f<h.length;f++)n=h[f],Array.isArray(n)?l(n):n!=null&&typeof n!="boolean"&&((i=typeof e!="function"&&!hl(n))&&(n=String(n)),i&&a?o[o.length-1].$text$+=n:o.push(i?Xa(null,n):n),a=i)};if(l(r),t){var c=t.className||t.class;c&&(t.class=typeof c!="object"?c:Object.keys(c).filter((function(h){return c[h]})).join(" "))}var d=Xa(e,null);return d.$attrs$=t,o.length>0&&(d.$children$=o),d},Xa=function(e,t){var r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return r.$attrs$=null,r},pb={},mb=function(e){return e&&e.$tag$===pb},gb=function(e,t){return e!=null&&!hl(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e},yb=function(e){return Ut(e).$hostElement$},j2=function(e,t,r){var s=yb(e);return{emit:function(n){return Wf(s,t,{bubbles:!0,composed:!0,cancelable:!0,detail:n})}}},Wf=function(e,t,r){var s=ge.ce(t,r);return e.dispatchEvent(s),s},Kc=new WeakMap,vb=function(e,t,r){var s=Dn.get(e);Vb&&r?(s=s||new CSSStyleSheet,typeof s=="string"?s=t:s.replaceSync(t)):s=t,Dn.set(e,s)},bb=function(e,t,r,s){var n,i=Jf(t),a=Dn.get(i);if(e=e.nodeType===11?e:tt,a)if(typeof a=="string"){e=e.head||e;var o=Kc.get(e),l=void 0;if(o||Kc.set(e,o=new Set),!o.has(i)){{l=tt.createElement("style"),l.innerHTML=a;var c=(n=ge.$nonce$)!==null&&n!==void 0?n:Kf(tt);c!=null&&l.setAttribute("nonce",c),e.insertBefore(l,e.querySelector("link"))}o&&o.add(i)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=Hc(Hc([],e.adoptedStyleSheets,!0),[a],!1));return i},wb=function(e){var t=e.$cmpMeta$,r=e.$hostElement$,s=t.$flags$,n=yt("attachStyles",t.$tagName$),i=bb(r.shadowRoot?r.shadowRoot:r.getRootNode(),t);s&10&&(r["s-sc"]=i,r.classList.add(i+"-h")),n()},Jf=function(e,t){return"sc-"+e.$tagName$},Wc=function(e,t,r,s,n,i){if(r!==s){var a=Yc(e,t),o=t.toLowerCase();if(t==="class"){var l=e.classList,c=Jc(r),d=Jc(s);l.remove.apply(l,c.filter((function(m){return m&&!d.includes(m)}))),l.add.apply(l,d.filter((function(m){return m&&!c.includes(m)})))}else if(t==="style"){for(var h in r)(!s||s[h]==null)&&(h.includes("-")?e.style.removeProperty(h):e.style[h]="");for(var h in s)(!r||s[h]!==r[h])&&(h.includes("-")?e.style.setProperty(h,s[h]):e.style[h]=s[h])}else if(t==="ref")s&&s(e);else if(!a&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):Yc(gi,o)?t=o.slice(2):t=o[2]+t.slice(3),r&&ge.rel(e,t,r,!1),s&&ge.ael(e,t,s,!1);else{var f=hl(s);if((a||f&&s!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=s;else{var p=s??"";t==="list"?a=!1:(r==null||e[t]!=p)&&(e[t]=p)}}catch{}s==null||s===!1?(s!==!1||e.getAttribute(t)==="")&&e.removeAttribute(t):(!a||i&4||n)&&!f&&(s=s===!0?"":s,e.setAttribute(t,s))}}},xb=/\s/,Jc=function(e){return e?e.split(xb):[]},Yf=function(e,t,r,s){var n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||Gc,a=t.$attrs$||Gc;for(s in i)s in a||Wc(n,s,i[s],void 0,r,t.$flags$);for(s in a)Wc(n,s,i[s],a[s],r,t.$flags$)},fl=function(e,t,r,s){var n=t.$children$[r],i=0,a,o;if(n.$text$!==null)a=n.$elm$=tt.createTextNode(n.$text$);else{if(Me||(Me=n.$tag$==="svg"),a=n.$elm$=tt.createElementNS(Me?ub:db,n.$tag$),Me&&n.$tag$==="foreignObject"&&(Me=!1),Yf(null,n,Me),hb(xn)&&a["s-si"]!==xn&&a.classList.add(a["s-si"]=xn),n.$children$)for(i=0;i<n.$children$.length;++i)o=fl(e,n,i),o&&a.appendChild(o);n.$tag$==="svg"?Me=!1:a.tagName==="foreignObject"&&(Me=!0)}return a},Qf=function(e,t,r,s,n,i){var a=e,o;for(a.shadowRoot&&a.tagName===Gf&&(a=a.shadowRoot);n<=i;++n)s[n]&&(o=fl(null,r,n),o&&(s[n].$elm$=o,a.insertBefore(o,t)))},Xf=function(e,t,r){for(var s=t;s<=r;++s){var n=e[s];if(n){var i=n.$elm$;Zf(n),i&&i.remove()}}},_b=function(e,t,r,s){for(var n=0,i=0,a=t.length-1,o=t[0],l=t[a],c=s.length-1,d=s[0],h=s[c],f;n<=a&&i<=c;)o==null?o=t[++n]:l==null?l=t[--a]:d==null?d=s[++i]:h==null?h=s[--c]:Zs(o,d)?(os(o,d),o=t[++n],d=s[++i]):Zs(l,h)?(os(l,h),l=t[--a],h=s[--c]):Zs(o,h)?(os(o,h),e.insertBefore(o.$elm$,l.$elm$.nextSibling),o=t[++n],h=s[--c]):Zs(l,d)?(os(l,d),e.insertBefore(l.$elm$,o.$elm$),l=t[--a],d=s[++i]):(f=fl(t&&t[i],r,i),d=s[++i],f&&o.$elm$.parentNode.insertBefore(f,o.$elm$));n>a?Qf(e,s[c+1]==null?null:s[c+1].$elm$,r,s,i,c):i>c&&Xf(t,n,a)},Zs=function(e,t){return e.$tag$===t.$tag$},os=function(e,t){var r=t.$elm$=e.$elm$,s=e.$children$,n=t.$children$,i=t.$tag$,a=t.$text$;a===null?(Me=i==="svg"?!0:i==="foreignObject"?!1:Me,Yf(e,t,Me),s!==null&&n!==null?_b(r,s,t,n):n!==null?(e.$text$!==null&&(r.textContent=""),Qf(r,null,t,n,0,n.length-1)):s!==null&&Xf(s,0,s.length-1),Me&&i==="svg"&&(Me=!1)):e.$text$!==a&&(r.data=a)},Zf=function(e){e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Zf)},Sb=function(e,t){var r=e.$hostElement$,s=e.$vnode$||Xa(null,null),n=mb(t)?t:fb(null,null,t);Gf=r.tagName,n.$tag$=null,n.$flags$|=4,e.$vnode$=n,n.$elm$=s.$elm$=r.shadowRoot||r,xn=r["s-sc"],os(s,n)},ep=function(e,t){t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((function(r){return e.$onRenderResolve$=r})))},mi=function(e,t){if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}ep(e,e.$ancestorComponent$);var r=function(){return kb(e,t)};return zb(r)},kb=function(e,t){var r=yt("scheduleUpdate",e.$cmpMeta$.$tagName$),s=e.$lazyInstance$,n;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((function(i){var a=i[0],o=i[1];return pl(s,a,o)})),e.$queuedListeners$=void 0)),r(),Eb(n,(function(){return Cb(e,s,t)}))},Eb=function(e,t){return Tb(e)?e.then(t):t()},Tb=function(e){return e instanceof Promise||e&&e.then&&typeof e.then=="function"},Cb=function(e,t,r){return qf(void 0,void 0,void 0,(function(){var s,n,i,a,o,l,c;return Hf(this,(function(d){return n=e.$hostElement$,i=yt("update",e.$cmpMeta$.$tagName$),a=n["s-rc"],r&&wb(e),o=yt("render",e.$cmpMeta$.$tagName$),Ab(e,t),a&&(a.map((function(h){return h()})),n["s-rc"]=void 0),o(),i(),l=(s=n["s-p"])!==null&&s!==void 0?s:[],c=function(){return Rb(e)},l.length===0?c():(Promise.all(l).then(c),e.$flags$|=4,l.length=0),[2]}))}))},Ab=function(e,t,r){try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,Sb(e,t)}catch(s){Ze(s,e.$hostElement$)}return null},Rb=function(e){e.$cmpMeta$.$tagName$;var t=e.$hostElement$,r=yt(),s=e.$lazyInstance$,n=e.$ancestorComponent$;e.$flags$&64?r():(e.$flags$|=64,rp(t),pl(s,"componentDidLoad"),r(),e.$onReadyResolve$(t),n||tp()),e.$onInstanceResolve$(t),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&gl((function(){return mi(e,!1)})),e.$flags$&=-517},I2=function(e){{var t=Ut(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&mi(t,!1),r}},tp=function(e){rp(tt.documentElement),gl((function(){return Wf(gi,"appload",{detail:{namespace:ob}})}))},pl=function(e,t,r){if(e&&e[t])try{return e[t](r)}catch(s){Ze(s)}},rp=function(e){return e.classList.add("hydrated")},Pb=function(e,t){return Ut(e).$instanceValues$.get(t)},jb=function(e,t,r,s){var n=Ut(e),i=n.$instanceValues$.get(t),a=n.$flags$,o=n.$lazyInstance$;r=gb(r,s.$members$[t][0]);var l=Number.isNaN(i)&&Number.isNaN(r),c=r!==i&&!l;(!(a&8)||i===void 0)&&c&&(n.$instanceValues$.set(t,r),o&&(a&18)===2&&mi(n,!1))},sp=function(e,t,r){if(t.$members$){var s=Object.entries(t.$members$),n=e.prototype;if(s.map((function(a){var o=a[0],l=a[1][0];l&31||r&2&&l&32?Object.defineProperty(n,o,{get:function(){return Pb(this,o)},set:function(c){jb(this,o,c,t)},configurable:!0,enumerable:!0}):r&1&&l&64&&Object.defineProperty(n,o,{value:function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var h=Ut(this);return h.$onInstancePromise$.then((function(){var f;return(f=h.$lazyInstance$)[o].apply(f,c)}))}})})),r&1){var i=new Map;n.attributeChangedCallback=function(a,o,l){var c=this;ge.jmp((function(){var d=i.get(a);if(c.hasOwnProperty(d))l=c[d],delete c[d];else if(n.hasOwnProperty(d)&&typeof c[d]=="number"&&c[d]==l)return;c[d]=l===null&&typeof c[d]=="boolean"?!1:l}))},e.observedAttributes=s.filter((function(a){a[0];var o=a[1];return o[0]&15})).map((function(a){var o=a[0],l=a[1],c=l[1]||o;return i.set(c,o),c}))}}return e},Ib=function(e,t,r,s,n){return qf(void 0,void 0,void 0,(function(){var i,a,o,l,c,d,h;return Hf(this,(function(f){switch(f.label){case 0:return(t.$flags$&32)!==0?[3,3]:(t.$flags$|=32,n=Fb(r),n.then?(i=lb(),[4,n]):[3,2]);case 1:n=f.sent(),i(),f.label=2;case 2:n.isProxied||(sp(n,r,2),n.isProxied=!0),a=yt("createInstance",r.$tagName$),t.$flags$|=8;try{new n(t)}catch(p){Ze(p)}t.$flags$&=-9,a(),n.style&&(o=n.style,l=Jf(r),Dn.has(l)||(c=yt("registerStyles",r.$tagName$),vb(l,o,!!(r.$flags$&1)),c())),f.label=3;case 3:return d=t.$ancestorComponent$,h=function(){return mi(t,!0)},d&&d["s-rc"]?d["s-rc"].push(h):h(),[2]}}))}))},Ob=function(e){if((ge.$flags$&1)===0){var t=Ut(e),r=t.$cmpMeta$,s=yt("connectedCallback",r.$tagName$);if(t.$flags$&1)np(e,t,r.$listeners$);else{t.$flags$|=1;for(var n=e;n=n.parentNode||n.host;)if(n["s-p"]){ep(t,t.$ancestorComponent$=n);break}r.$members$&&Object.entries(r.$members$).map((function(i){var a=i[0],o=i[1][0];if(o&31&&e.hasOwnProperty(a)){var l=e[a];delete e[a],e[a]=l}})),Ib(e,t,r)}s()}},Nb=function(e){if((ge.$flags$&1)===0){var t=Ut(e),r=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$.map((function(s){return s()})),t.$rmListeners$=void 0),pl(r,"disconnectedCallback")}},Mb=function(e,t){t===void 0&&(t={});var r,s=yt(),n=[],i=t.exclude||[],a=gi.customElements,o=tt.head,l=o.querySelector("meta[charset]"),c=tt.createElement("style"),d=[],h,f=!0;Object.assign(ge,t),ge.$resourcesUrl$=new URL(t.resourcesUrl||"./",tt.baseURI).href,e.map((function(m){m[1].map((function(g){var y={$flags$:g[0],$tagName$:g[1],$members$:g[2],$listeners$:g[3]};y.$members$=g[2],y.$listeners$=g[3];var w=y.$tagName$,x=(function(v){ab(S,v);function S(k){var T=v.call(this,k)||this;return k=T,Ub(k,y),y.$flags$&1&&k.attachShadow({mode:"open"}),T}return S.prototype.connectedCallback=function(){var k=this;h&&(clearTimeout(h),h=null),f?d.push(this):ge.jmp((function(){return Ob(k)}))},S.prototype.disconnectedCallback=function(){var k=this;ge.jmp((function(){return Nb(k)}))},S.prototype.componentOnReady=function(){return Ut(this).$onReadyPromise$},S})(HTMLElement);y.$lazyBundleId$=m[0],!i.includes(w)&&!a.get(w)&&(n.push(w),a.define(w,sp(x,y,1)))}))}));{c.innerHTML=n+cb,c.setAttribute("data-styles","");var p=(r=ge.$nonce$)!==null&&r!==void 0?r:Kf(tt);p!=null&&c.setAttribute("nonce",p),o.insertBefore(c,l?l.nextSibling:o.firstChild)}f=!1,d.length?d.map((function(m){return m.connectedCallback()})):ge.jmp((function(){return h=setTimeout(tp,30)})),s()},np=function(e,t,r,s){r&&r.map((function(n){var i=n[0],a=n[1],o=n[2],l=Db(e,i),c=$b(t,o),d=Lb(i);ge.ael(l,a,c,d),(t.$rmListeners$=t.$rmListeners$||[]).push((function(){return ge.rel(l,a,c,d)}))}))},$b=function(e,t){return function(r){try{e.$flags$&256?e.$lazyInstance$[t](r):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,r])}catch(s){Ze(s)}}},Db=function(e,t){return t&16?tt.body:e},Lb=function(e){return(e&2)!==0},ml=new WeakMap,Ut=function(e){return ml.get(e)},O2=function(e,t){return ml.set(t.$lazyInstance$=e,t)},Ub=function(e,t){var r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return r.$onInstancePromise$=new Promise((function(s){return r.$onInstanceResolve$=s})),r.$onReadyPromise$=new Promise((function(s){return r.$onReadyResolve$=s})),e["s-p"]=[],e["s-rc"]=[],np(e,r,t.$listeners$),ml.set(e,r)},Yc=function(e,t){return t in e},Ze=function(e,t){return(0,console.error)(e,t)},Bi=new Map,Fb=function(e,t,r){var s=e.$tagName$.replace(/-/g,"_"),n=e.$lazyBundleId$,i=Bi.get(n);if(i)return i[s];{var a=function(o){return Bi.set(n,o),o[s]};switch(n){case"pwa-action-sheet":return q(()=>import("./pwa-action-sheet.entry-CEjJq-OP.js"),__vite__mapDeps([0,1,2])).then(a,Ze);case"pwa-camera-modal":return q(()=>import("./pwa-camera-modal.entry-D6ufuXCp.js"),__vite__mapDeps([3,1,2])).then(a,Ze);case"pwa-toast":return q(()=>import("./pwa-toast.entry-B3yjyxAW.js"),__vite__mapDeps([4,1,2])).then(a,Ze);case"pwa-camera-modal-instance":return q(()=>import("./pwa-camera-modal-instance.entry-C1iZHxcr.js"),__vite__mapDeps([5,1,2])).then(a,Ze);case"pwa-camera":return q(()=>import("./pwa-camera.entry-BJp8meFL.js"),__vite__mapDeps([6,1,2])).then(a,Ze)}}return q(()=>import("./".concat(n,".entry.js").concat("")),[]).then((function(o){return Bi.set(n,o),o[s]}),Ze)},Dn=new Map,gi=typeof window<"u"?window:{},tt=gi.document||{head:{}},ge={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,r,s){return e.addEventListener(t,r,s)},rel:function(e,t,r,s){return e.removeEventListener(t,r,s)},ce:function(e,t){return new CustomEvent(e,t)}},ip=function(e){return Promise.resolve(e)},Vb=(function(){try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Qc=[],ap=[],Bb=function(e,t){return function(r){e.push(r),Qa||(Qa=!0,ge.$flags$&4?gl(Za):ge.raf(Za))}},Xc=function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){Ze(r)}e.length=0},Za=function(){Xc(Qc),Xc(ap),(Qa=Qc.length>0)&&ge.raf(Za)},gl=function(e){return ip().then(e)},zb=Bb(ap),qb=function(){return ip()},Hb=function(e,t){return typeof window>"u"?Promise.resolve():qb().then((function(){return Mb([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],t)}))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();var zi,Zc;function Gb(){if(Zc)return zi;Zc=1;var e=typeof Element<"u",t=typeof Map=="function",r=typeof Set=="function",s=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function n(i,a){if(i===a)return!0;if(i&&a&&typeof i=="object"&&typeof a=="object"){if(i.constructor!==a.constructor)return!1;var o,l,c;if(Array.isArray(i)){if(o=i.length,o!=a.length)return!1;for(l=o;l--!==0;)if(!n(i[l],a[l]))return!1;return!0}var d;if(t&&i instanceof Map&&a instanceof Map){if(i.size!==a.size)return!1;for(d=i.entries();!(l=d.next()).done;)if(!a.has(l.value[0]))return!1;for(d=i.entries();!(l=d.next()).done;)if(!n(l.value[1],a.get(l.value[0])))return!1;return!0}if(r&&i instanceof Set&&a instanceof Set){if(i.size!==a.size)return!1;for(d=i.entries();!(l=d.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(a)){if(o=i.length,o!=a.length)return!1;for(l=o;l--!==0;)if(i[l]!==a[l])return!1;return!0}if(i.constructor===RegExp)return i.source===a.source&&i.flags===a.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof a.valueOf=="function")return i.valueOf()===a.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof a.toString=="function")return i.toString()===a.toString();if(c=Object.keys(i),o=c.length,o!==Object.keys(a).length)return!1;for(l=o;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(e&&i instanceof Element)return!1;for(l=o;l--!==0;)if(!((c[l]==="_owner"||c[l]==="__v"||c[l]==="__o")&&i.$$typeof)&&!n(i[c[l]],a[c[l]]))return!1;return!0}return i!==i&&a!==a}return zi=function(a,o){try{return n(a,o)}catch(l){if((l.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw l}},zi}var Kb=Gb();const Wb=ui(Kb);var qi,eu;function Jb(){if(eu)return qi;eu=1;var e=function(t,r,s,n,i,a,o,l){if(!t){var c;if(r===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[s,n,i,a,o,l],h=0;c=new Error(r.replace(/%s/g,function(){return d[h++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};return qi=e,qi}var Yb=Jb();const tu=ui(Yb);var Hi,ru;function Qb(){return ru||(ru=1,Hi=function(t,r,s,n){var i=s?s.call(n,t,r):void 0;if(i!==void 0)return!!i;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(r),c=0;c<a.length;c++){var d=a[c];if(!l(d))return!1;var h=t[d],f=r[d];if(i=s?s.call(n,h,f,d):void 0,i===!1||i===void 0&&h!==f)return!1}return!0}),Hi}var Xb=Qb();const Zb=ui(Xb);var op=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(op||{}),Gi={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},su=Object.values(op),yl={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ew=Object.entries(yl).reduce((e,[t,r])=>(e[r]=t,e),{}),rt="data-rh",Nr={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Mr=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const s=e[r];if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}return null},tw=e=>{let t=Mr(e,"title");const r=Mr(e,Nr.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const s=Mr(e,Nr.DEFAULT_TITLE);return t||s||void 0},rw=e=>Mr(e,Nr.ON_CHANGE_CLIENT_STATE)||(()=>{}),Ki=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,s)=>({...r,...s}),{}),sw=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,s)=>{if(!r.length){const n=Object.keys(s);for(let i=0;i<n.length;i+=1){const o=n[i].toLowerCase();if(e.indexOf(o)!==-1&&s[o])return r.concat(s)}}return r},[]),nw=e=>console&&typeof console.warn=="function"&&console.warn(e),ss=(e,t,r)=>{const s={};return r.filter(n=>Array.isArray(n[e])?!0:(typeof n[e]<"u"&&nw(`Helmet: ${e} should be of type "Array". Instead found type "${typeof n[e]}"`),!1)).map(n=>n[e]).reverse().reduce((n,i)=>{const a={};i.filter(l=>{let c;const d=Object.keys(l);for(let f=0;f<d.length;f+=1){const p=d[f],m=p.toLowerCase();t.indexOf(m)!==-1&&!(c==="rel"&&l[c].toLowerCase()==="canonical")&&!(m==="rel"&&l[m].toLowerCase()==="stylesheet")&&(c=m),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(c=p)}if(!c||!l[c])return!1;const h=l[c].toLowerCase();return s[c]||(s[c]={}),a[c]||(a[c]={}),s[c][h]?!1:(a[c][h]=!0,!0)}).reverse().forEach(l=>n.push(l));const o=Object.keys(a);for(let l=0;l<o.length;l+=1){const c=o[l],d={...s[c],...a[c]};s[c]=d}return n},[]).reverse()},iw=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},aw=e=>({baseTag:sw(["href"],e),bodyAttributes:Ki("bodyAttributes",e),defer:Mr(e,Nr.DEFER),encode:Mr(e,Nr.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Ki("htmlAttributes",e),linkTags:ss("link",["rel","href"],e),metaTags:ss("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:ss("noscript",["innerHTML"],e),onChangeClientState:rw(e),scriptTags:ss("script",["src","innerHTML"],e),styleTags:ss("style",["cssText"],e),title:tw(e),titleAttributes:Ki("titleAttributes",e),prioritizeSeoTags:iw(e,Nr.PRIORITIZE_SEO_TAGS)}),lp=e=>Array.isArray(e)?e.join(""):e,ow=(e,t)=>{const r=Object.keys(e);for(let s=0;s<r.length;s+=1)if(t[r[s]]&&t[r[s]].includes(e[r[s]]))return!0;return!1},Wi=(e,t)=>Array.isArray(e)?e.reduce((r,s)=>(ow(s,t)?r.priority.push(s):r.default.push(s),r),{priority:[],default:[]}):{default:e,priority:[]},nu=(e,t)=>({...e,[t]:void 0}),lw=["noscript","script","style"],eo=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),cp=e=>Object.keys(e).reduce((t,r)=>{const s=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${s}`:s},""),cw=(e,t,r,s)=>{const n=cp(r),i=lp(t);return n?`<${e} ${rt}="true" ${n}>${eo(i,s)}</${e}>`:`<${e} ${rt}="true">${eo(i,s)}</${e}>`},uw=(e,t,r=!0)=>t.reduce((s,n)=>{const i=n,a=Object.keys(i).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,d)=>{const h=typeof i[d]>"u"?d:`${d}="${eo(i[d],r)}"`;return c?`${c} ${h}`:h},""),o=i.innerHTML||i.cssText||"",l=lw.indexOf(e)===-1;return`${s}<${e} ${rt}="true" ${a}${l?"/>":`>${o}</${e}>`}`},""),up=(e,t={})=>Object.keys(e).reduce((r,s)=>{const n=yl[s];return r[n||s]=e[s],r},t),dw=(e,t,r)=>{const s={key:t,[rt]:!0},n=up(r,s);return[K.createElement("title",n,t)]},_n=(e,t)=>t.map((r,s)=>{const n={key:s,[rt]:!0};return Object.keys(r).forEach(i=>{const o=yl[i]||i;if(o==="innerHTML"||o==="cssText"){const l=r.innerHTML||r.cssText;n.dangerouslySetInnerHTML={__html:l}}else n[o]=r[i]}),K.createElement(e,n)}),Be=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>dw(e,t.title,t.titleAttributes),toString:()=>cw(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>up(t),toString:()=>cp(t)};default:return{toComponent:()=>_n(e,t),toString:()=>uw(e,t,r)}}},hw=({metaTags:e,linkTags:t,scriptTags:r,encode:s})=>{const n=Wi(e,Gi.meta),i=Wi(t,Gi.link),a=Wi(r,Gi.script);return{priorityMethods:{toComponent:()=>[..._n("meta",n.priority),..._n("link",i.priority),..._n("script",a.priority)],toString:()=>`${Be("meta",n.priority,s)} ${Be("link",i.priority,s)} ${Be("script",a.priority,s)}`},metaTags:n.default,linkTags:i.default,scriptTags:a.default}},fw=e=>{const{baseTag:t,bodyAttributes:r,encode:s=!0,htmlAttributes:n,noscriptTags:i,styleTags:a,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:h,scriptTags:f}=e,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:d,metaTags:h,scriptTags:f}=hw(e)),{priority:p,base:Be("base",t,s),bodyAttributes:Be("bodyAttributes",r,s),htmlAttributes:Be("htmlAttributes",n,s),link:Be("link",d,s),meta:Be("meta",h,s),noscript:Be("noscript",i,s),script:Be("script",f,s),style:Be("style",a,s),title:Be("title",{title:o,titleAttributes:l},s)}},to=fw,en=[],dp=!!(typeof window<"u"&&window.document&&window.document.createElement),ro=class{instances=[];canUseDOM=dp;context;value={setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?en:this.instances,add:e=>{(this.canUseDOM?en:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?en:this.instances).indexOf(e);(this.canUseDOM?en:this.instances).splice(t,1)}}};constructor(e,t){this.context=e,this.canUseDOM=t||!1,t||(e.helmet=to({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},pw={},hp=K.createContext(pw),fp=class pp extends b.Component{static canUseDOM=dp;helmetData;constructor(t){super(t),this.helmetData=new ro(this.props.context||{},pp.canUseDOM)}render(){return K.createElement(hp.Provider,{value:this.helmetData.value},this.props.children)}},mr=(e,t)=>{const r=document.head||document.querySelector("head"),s=r.querySelectorAll(`${e}[${rt}]`),n=[].slice.call(s),i=[];let a;return t&&t.length&&t.forEach(o=>{const l=document.createElement(e);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c))if(c==="innerHTML")l.innerHTML=o.innerHTML;else if(c==="cssText")l.styleSheet?l.styleSheet.cssText=o.cssText:l.appendChild(document.createTextNode(o.cssText));else{const d=c,h=typeof o[d]>"u"?"":o[d];l.setAttribute(c,h)}l.setAttribute(rt,"true"),n.some((c,d)=>(a=d,l.isEqualNode(c)))?n.splice(a,1):i.push(l)}),n.forEach(o=>o.parentNode?.removeChild(o)),i.forEach(o=>r.appendChild(o)),{oldTags:n,newTags:i}},so=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const s=r.getAttribute(rt),n=s?s.split(","):[],i=[...n],a=Object.keys(t);for(const o of a){const l=t[o]||"";r.getAttribute(o)!==l&&r.setAttribute(o,l),n.indexOf(o)===-1&&n.push(o);const c=i.indexOf(o);c!==-1&&i.splice(c,1)}for(let o=i.length-1;o>=0;o-=1)r.removeAttribute(i[o]);n.length===i.length?r.removeAttribute(rt):r.getAttribute(rt)!==a.join(",")&&r.setAttribute(rt,a.join(","))},mw=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=lp(e)),so("title",t)},iu=(e,t)=>{const{baseTag:r,bodyAttributes:s,htmlAttributes:n,linkTags:i,metaTags:a,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:d,title:h,titleAttributes:f}=e;so("body",s),so("html",n),mw(h,f);const p={baseTag:mr("base",r),linkTags:mr("link",i),metaTags:mr("meta",a),noscriptTags:mr("noscript",o),scriptTags:mr("script",c),styleTags:mr("style",d)},m={},g={};Object.keys(p).forEach(y=>{const{newTags:w,oldTags:x}=p[y];w.length&&(m[y]=w),x.length&&(g[y]=p[y].oldTags)}),t&&t(),l(e,m,g)},ns=null,gw=e=>{ns&&cancelAnimationFrame(ns),e.defer?ns=requestAnimationFrame(()=>{iu(e,()=>{ns=null})}):(iu(e),ns=null)},yw=gw,au=class extends b.Component{rendered=!1;shouldComponentUpdate(e){return!Zb(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let r=null;const s=aw(e.get().map(n=>{const i={...n.props};return delete i.context,i}));fp.canUseDOM?yw(s):to&&(r=to(s)),t(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},N2=class extends b.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(e){return!Wb(nu(this.props,"helmetData"),nu(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,s){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,s)}]}}mapObjectTypeChildren(e,t,r,s){switch(e.type){case"title":return{...t,[e.type]:s,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(s=>{r={...r,[s]:e[s]}}),r}warnOnInvalidChildren(e,t){return tu(su.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${su.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),tu(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return K.Children.forEach(e,s=>{if(!s||!s.props)return;const{children:n,...i}=s.props,a=Object.keys(i).reduce((l,c)=>(l[ew[c]||c]=i[c],l),{});let{type:o}=s;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(s,n),o){case"Symbol(react.fragment)":t=this.mapChildrenToProps(n,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(s,r,a,n);break;default:t=this.mapObjectTypeChildren(s,t,a,n);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:s}=t;if(e&&(r=this.mapChildrenToProps(e,r)),s&&!(s instanceof ro)){const n=s;s=new ro(n.context,!0),delete r.helmetData}return s?K.createElement(au,{...r,context:s.value}):K.createElement(hp.Consumer,null,n=>K.createElement(au,{...r,context:n}))}};const mp="@firebase/installations",vl="0.6.9";const gp=1e4,yp=`w:${vl}`,vp="FIS_v2",vw="https://firebaseinstallations.googleapis.com/v1",bw=3600*1e3,ww="installations",xw="Installations";const _w={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ar=new di(ww,xw,_w);function bp(e){return e instanceof nl&&e.code.includes("request-failed")}function wp({projectId:e}){return`${vw}/projects/${e}/installations`}function xp(e){return{token:e.token,requestStatus:2,expiresIn:kw(e.expiresIn),creationTime:Date.now()}}async function _p(e,t){const s=(await t.json()).error;return ar.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Sp({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Sw(e,{refreshToken:t}){const r=Sp(e);return r.append("Authorization",Ew(t)),r}async function kp(e){const t=await e();return t.status>=500&&t.status<600?e():t}function kw(e){return Number(e.replace("s","000"))}function Ew(e){return`${vp} ${e}`}async function Tw({appConfig:e,heartbeatServiceProvider:t},{fid:r}){const s=wp(e),n=Sp(e),i=t.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const a={fid:r,authVersion:vp,appId:e.appId,sdkVersion:yp},o={method:"POST",headers:n,body:JSON.stringify(a)},l=await kp(()=>fetch(s,o));if(l.ok){const c=await l.json();return{fid:c.fid||r,registrationStatus:2,refreshToken:c.refreshToken,authToken:xp(c.authToken)}}else throw await _p("Create Installation",l)}function Ep(e){return new Promise(t=>{setTimeout(t,e)})}function Cw(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}const Aw=/^[cdef][\w-]{21}$/,no="";function Rw(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const r=Pw(e);return Aw.test(r)?r:no}catch{return no}}function Pw(e){return Cw(e).substr(0,22)}function yi(e){return`${e.appName}!${e.appId}`}const Tp=new Map;function Cp(e,t){const r=yi(e);Ap(r,t),jw(r,t)}function Ap(e,t){const r=Tp.get(e);if(r)for(const s of r)s(t)}function jw(e,t){const r=Iw();r&&r.postMessage({key:e,fid:t}),Ow()}let Xt=null;function Iw(){return!Xt&&"BroadcastChannel"in self&&(Xt=new BroadcastChannel("[Firebase] FID Change"),Xt.onmessage=e=>{Ap(e.data.key,e.data.fid)}),Xt}function Ow(){Tp.size===0&&Xt&&(Xt.close(),Xt=null)}const Nw="firebase-installations-database",Mw=1,or="firebase-installations-store";let Ji=null;function bl(){return Ji||(Ji=q0(Nw,Mw,{upgrade:(e,t)=>{t===0&&e.createObjectStore(or)}})),Ji}async function Ln(e,t){const r=yi(e),n=(await bl()).transaction(or,"readwrite"),i=n.objectStore(or),a=await i.get(r);return await i.put(t,r),await n.done,(!a||a.fid!==t.fid)&&Cp(e,t.fid),t}async function Rp(e){const t=yi(e),s=(await bl()).transaction(or,"readwrite");await s.objectStore(or).delete(t),await s.done}async function vi(e,t){const r=yi(e),n=(await bl()).transaction(or,"readwrite"),i=n.objectStore(or),a=await i.get(r),o=t(a);return o===void 0?await i.delete(r):await i.put(o,r),await n.done,o&&(!a||a.fid!==o.fid)&&Cp(e,o.fid),o}async function wl(e){let t;const r=await vi(e.appConfig,s=>{const n=$w(s),i=Dw(e,n);return t=i.registrationPromise,i.installationEntry});return r.fid===no?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}function $w(e){const t=e||{fid:Rw(),registrationStatus:0};return Pp(t)}function Dw(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(ar.create("app-offline"));return{installationEntry:t,registrationPromise:n}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=Lw(e,r);return{installationEntry:r,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Uw(e)}:{installationEntry:t}}async function Lw(e,t){try{const r=await Tw(e,t);return Ln(e.appConfig,r)}catch(r){throw bp(r)&&r.customData.serverCode===409?await Rp(e.appConfig):await Ln(e.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function Uw(e){let t=await ou(e.appConfig);for(;t.registrationStatus===1;)await Ep(100),t=await ou(e.appConfig);if(t.registrationStatus===0){const{installationEntry:r,registrationPromise:s}=await wl(e);return s||r}return t}function ou(e){return vi(e,t=>{if(!t)throw ar.create("installation-not-found");return Pp(t)})}function Pp(e){return Fw(e)?{fid:e.fid,registrationStatus:0}:e}function Fw(e){return e.registrationStatus===1&&e.registrationTime+gp<Date.now()}async function Vw({appConfig:e,heartbeatServiceProvider:t},r){const s=Bw(e,r),n=Sw(e,r),i=t.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const a={installation:{sdkVersion:yp,appId:e.appId}},o={method:"POST",headers:n,body:JSON.stringify(a)},l=await kp(()=>fetch(s,o));if(l.ok){const c=await l.json();return xp(c)}else throw await _p("Generate Auth Token",l)}function Bw(e,{fid:t}){return`${wp(e)}/${t}/authTokens:generate`}async function xl(e,t=!1){let r;const s=await vi(e.appConfig,i=>{if(!jp(i))throw ar.create("not-registered");const a=i.authToken;if(!t&&Hw(a))return i;if(a.requestStatus===1)return r=zw(e,t),i;{if(!navigator.onLine)throw ar.create("app-offline");const o=Kw(i);return r=qw(e,o),o}});return r?await r:s.authToken}async function zw(e,t){let r=await lu(e.appConfig);for(;r.authToken.requestStatus===1;)await Ep(100),r=await lu(e.appConfig);const s=r.authToken;return s.requestStatus===0?xl(e,t):s}function lu(e){return vi(e,t=>{if(!jp(t))throw ar.create("not-registered");const r=t.authToken;return Ww(r)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function qw(e,t){try{const r=await Vw(e,t),s=Object.assign(Object.assign({},t),{authToken:r});return await Ln(e.appConfig,s),r}catch(r){if(bp(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await Rp(e.appConfig);else{const s=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ln(e.appConfig,s)}throw r}}function jp(e){return e!==void 0&&e.registrationStatus===2}function Hw(e){return e.requestStatus===2&&!Gw(e)}function Gw(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+bw}function Kw(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Ww(e){return e.requestStatus===1&&e.requestTime+gp<Date.now()}async function Jw(e){const t=e,{installationEntry:r,registrationPromise:s}=await wl(t);return s?s.catch(console.error):xl(t).catch(console.error),r.fid}async function Yw(e,t=!1){const r=e;return await Qw(r),(await xl(r,t)).token}async function Qw(e){const{registrationPromise:t}=await wl(e);t&&await t}function Xw(e){if(!e||!e.options)throw Yi("App Configuration");if(!e.name)throw Yi("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!e.options[r])throw Yi(r);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Yi(e){return ar.create("missing-app-config-values",{valueName:e})}const Ip="installations",Zw="installations-internal",ex=e=>{const t=e.getProvider("app").getImmediate(),r=Xw(t),s=Lt(t,"heartbeat");return{app:t,appConfig:r,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},tx=e=>{const t=e.getProvider("app").getImmediate(),r=Lt(t,Ip).getImmediate();return{getId:()=>Jw(r),getToken:n=>Yw(r,n)}};function rx(){Ot(new Nt(Ip,ex,"PUBLIC")),Ot(new Nt(Zw,tx,"PRIVATE"))}rx();gt(mp,vl);gt(mp,vl,"esm2017");const Un="analytics",sx="firebase_id",nx="origin",ix=60*1e3,ax="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_l="https://www.googletagmanager.com/gtag/js";const Oe=new il("@firebase/analytics");const ox={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Fe=new di("analytics","Analytics",ox);function lx(e){if(!e.startsWith(_l)){const t=Fe.create("invalid-gtag-resource",{gtagURL:e});return Oe.warn(t.message),""}return e}function Op(e){return Promise.all(e.map(t=>t.catch(r=>r)))}function cx(e,t){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(e,t)),r}function ux(e,t){const r=cx("firebase-js-sdk-policy",{createScriptURL:lx}),s=document.createElement("script"),n=`${_l}?l=${e}&id=${t}`;s.src=r?r?.createScriptURL(n):n,s.async=!0,document.head.appendChild(s)}function dx(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function hx(e,t,r,s,n,i){const a=s[n];try{if(a)await t[a];else{const l=(await Op(r)).find(c=>c.measurementId===n);l&&await t[l.appId]}}catch(o){Oe.error(o)}e("config",n,i)}async function fx(e,t,r,s,n){try{let i=[];if(n&&n.send_to){let a=n.send_to;Array.isArray(a)||(a=[a]);const o=await Op(r);for(const l of a){const c=o.find(h=>h.measurementId===l),d=c&&t[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(t)),await Promise.all(i),e("event",s,n||{})}catch(i){Oe.error(i)}}function px(e,t,r,s){async function n(i,...a){try{if(i==="event"){const[o,l]=a;await fx(e,t,r,o,l)}else if(i==="config"){const[o,l]=a;await hx(e,t,r,s,o,l)}else if(i==="consent"){const[o,l]=a;e("consent",o,l)}else if(i==="get"){const[o,l,c]=a;e("get",o,l,c)}else if(i==="set"){const[o]=a;e("set",o)}else e(i,...a)}catch(o){Oe.error(o)}}return n}function mx(e,t,r,s,n){let i=function(...a){window[s].push(arguments)};return window[n]&&typeof window[n]=="function"&&(i=window[n]),window[n]=px(i,e,t,r),{gtagCore:i,wrappedGtag:window[n]}}function gx(e){const t=window.document.getElementsByTagName("script");for(const r of Object.values(t))if(r.src&&r.src.includes(_l)&&r.src.includes(e))return r;return null}const yx=30,vx=1e3;class bx{constructor(t={},r=vx){this.throttleMetadata=t,this.intervalMillis=r}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,r){this.throttleMetadata[t]=r}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Np=new bx;function wx(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function xx(e){var t;const{appId:r,apiKey:s}=e,n={method:"GET",headers:wx(s)},i=ax.replace("{app-id}",r),a=await fetch(i,n);if(a.status!==200&&a.status!==304){let o="";try{const l=await a.json();!((t=l.error)===null||t===void 0)&&t.message&&(o=l.error.message)}catch{}throw Fe.create("config-fetch-failed",{httpStatus:a.status,responseMessage:o})}return a.json()}async function _x(e,t=Np,r){const{appId:s,apiKey:n,measurementId:i}=e.options;if(!s)throw Fe.create("no-app-id");if(!n){if(i)return{measurementId:i,appId:s};throw Fe.create("no-api-key")}const a=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Ex;return setTimeout(async()=>{o.abort()},ix),Mp({appId:s,apiKey:n,measurementId:i},a,o,t)}async function Mp(e,{throttleEndTimeMillis:t,backoffCount:r},s,n=Np){var i;const{appId:a,measurementId:o}=e;try{await Sx(s,t)}catch(l){if(o)return Oe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:a,measurementId:o};throw l}try{const l=await xx(e);return n.deleteThrottleMetadata(a),l}catch(l){const c=l;if(!kx(c)){if(n.deleteThrottleMetadata(a),o)return Oe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:a,measurementId:o};throw l}const d=Number((i=c?.customData)===null||i===void 0?void 0:i.httpStatus)===503?Va(r,n.intervalMillis,yx):Va(r,n.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:r+1};return n.setThrottleMetadata(a,h),Oe.debug(`Calling attemptFetch again in ${d} millis`),Mp(e,h,s,n)}}function Sx(e,t){return new Promise((r,s)=>{const n=Math.max(t-Date.now(),0),i=setTimeout(r,n);e.addEventListener(()=>{clearTimeout(i),s(Fe.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function kx(e){if(!(e instanceof nl)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class Ex{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function Tx(e,t,r,s,n){if(n&&n.global){e("event",r,s);return}else{const i=await t,a=Object.assign(Object.assign({},s),{send_to:i});e("event",r,a)}}async function Cx(){if(hi())try{await wf()}catch(e){return Oe.warn(Fe.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return Oe.warn(Fe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Ax(e,t,r,s,n,i,a){var o;const l=_x(e);l.then(p=>{r[p.measurementId]=p.appId,e.options.measurementId&&p.measurementId!==e.options.measurementId&&Oe.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Oe.error(p)),t.push(l);const c=Cx().then(p=>{if(p)return s.getId()}),[d,h]=await Promise.all([l,c]);gx(i)||ux(i,d.measurementId),n("js",new Date);const f=(o=a?.config)!==null&&o!==void 0?o:{};return f[nx]="firebase",f.update=!0,h!=null&&(f[sx]=h),n("config",d.measurementId,f),d.measurementId}class Rx{constructor(t){this.app=t}_delete(){return delete hs[this.app.options.appId],Promise.resolve()}}let hs={},cu=[];const uu={};let Qi="dataLayer",Px="gtag",du,$p,hu=!1;function jx(){const e=[];if(H0()&&e.push("This is a browser extension environment."),xf()||e.push("Cookies are not available."),e.length>0){const t=e.map((s,n)=>`(${n+1}) ${s}`).join(" "),r=Fe.create("invalid-analytics-context",{errorInfo:t});Oe.warn(r.message)}}function Ix(e,t,r){jx();const s=e.options.appId;if(!s)throw Fe.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Oe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Fe.create("no-api-key");if(hs[s]!=null)throw Fe.create("already-exists",{id:s});if(!hu){dx(Qi);const{wrappedGtag:i,gtagCore:a}=mx(hs,cu,uu,Qi,Px);$p=i,du=a,hu=!0}return hs[s]=Ax(e,cu,uu,t,du,Qi,r),new Rx(e)}function Dp(e=fi()){e=dr(e);const t=Lt(e,Un);return t.isInitialized()?t.getImmediate():Lp(e)}function Lp(e,t={}){const r=Lt(e,Un);if(r.isInitialized()){const n=r.getImmediate();if(G0(t,r.getOptions()))return n;throw Fe.create("already-initialized")}return r.initialize({options:t})}function Up(e,t,r,s){e=dr(e),Tx($p,hs[e.app.options.appId],t,r,s).catch(n=>Oe.error(n))}const fu="@firebase/analytics",pu="0.10.8";function Ox(){Ot(new Nt(Un,(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),n=t.getProvider("installations-internal").getImmediate();return Ix(s,n,r)},"PUBLIC")),Ot(new Nt("analytics-internal",e,"PRIVATE")),gt(fu,pu),gt(fu,pu,"esm2017");function e(t){try{const r=t.getProvider(Un).getImmediate();return{logEvent:(s,n,i)=>Up(r,s,n,i)}}catch(r){throw Fe.create("interop-component-reg-failed",{reason:r})}}}Ox();const Sl=Object.freeze(Object.defineProperty({__proto__:null,getAnalytics:Dp,initializeAnalytics:Lp,logEvent:Up},Symbol.toStringTag,{value:"Module"}));const Nx="type.googleapis.com/google.protobuf.Int64Value",Mx="type.googleapis.com/google.protobuf.UInt64Value";function Fp(e,t){const r={};for(const s in e)e.hasOwnProperty(s)&&(r[s]=t(e[s]));return r}function io(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>io(t));if(typeof e=="function"||typeof e=="object")return Fp(e,t=>io(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Fn(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case Nx:case Mx:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Fn(t)):typeof e=="function"||typeof e=="object"?Fp(e,t=>Fn(t)):e}const kl="functions";const mu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let $r=class extends nl{constructor(t,r,s){super(`${kl}/${t}`,r||""),this.details=s}};function $x(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Dx(e,t){let r=$x(e),s=r,n;try{const i=t&&t.error;if(i){const a=i.status;if(typeof a=="string"){if(!mu[a])return new $r("internal","internal");r=mu[a],s=a}const o=i.message;typeof o=="string"&&(s=o),n=i.details,n!==void 0&&(n=Fn(n))}}catch{}return r==="ok"?null:new $r(r,s,n)}class Lx{constructor(t,r,s){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(n=>this.auth=n,()=>{}),this.messaging||r.get().then(n=>this.messaging=n,()=>{}),this.appCheck||s.get().then(n=>this.appCheck=n,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),s=await this.getMessagingToken(),n=await this.getAppCheckToken(t);return{authToken:r,messagingToken:s,appCheckToken:n}}}const ao="us-central1";function Ux(e){let t=null;return{promise:new Promise((r,s)=>{t=setTimeout(()=>{s(new $r("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class Fx{constructor(t,r,s,n,i=ao,a){this.app=t,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new Lx(r,s,n),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=ao}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function Vx(e,t,r){e.emulatorOrigin=`http://${t}:${r}`}function Bx(e,t,r){return(s=>qx(e,t,s,r||{}))}async function zx(e,t,r,s){r["Content-Type"]="application/json";let n;try{n=await s(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await n.json()}catch{}return{status:n.status,json:i}}function qx(e,t,r,s){const n=e._url(t);return Hx(e,n,r,s)}async function Hx(e,t,r,s){r=io(r);const n={data:r},i={},a=await e.contextProvider.getContext(s.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=s.timeout||7e4,l=Ux(o),c=await Promise.race([zx(t,n,i,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new $r("cancelled","Firebase Functions instance was deleted.");const d=Dx(c.status,c.json);if(d)throw d;if(!c.json)throw new $r("internal","Response is not valid JSON object.");let h=c.json.data;if(typeof h>"u"&&(h=c.json.result),typeof h>"u")throw new $r("internal","Response is missing data field.");return{data:Fn(h)}}const gu="@firebase/functions",yu="0.11.8";const Gx="auth-internal",Kx="app-check-internal",Wx="messaging-internal";function Jx(e,t){const r=(s,{instanceIdentifier:n})=>{const i=s.getProvider("app").getImmediate(),a=s.getProvider(Gx),o=s.getProvider(Wx),l=s.getProvider(Kx);return new Fx(i,a,o,l,n,e)};Ot(new Nt(kl,r,"PUBLIC").setMultipleInstances(!0)),gt(gu,yu,t),gt(gu,yu,"esm2017")}function Vp(e=fi(),t=ao){const s=Lt(dr(e),kl).getImmediate({identifier:t}),n=K0("functions");return n&&Bp(s,...n),s}function Bp(e,t,r){Vx(dr(e),t,r)}function zp(e,t,r){return Bx(dr(e),t,r)}Jx(fetch.bind(self));const $2=Object.freeze(Object.defineProperty({__proto__:null,connectFunctionsEmulator:Bp,getFunctions:Vp,httpsCallable:zp},Symbol.toStringTag,{value:"Module"})),vu="@firebase/performance",oo="0.6.9";const qp=oo,Yx="FB-PERF-TRACE-START",Qx="FB-PERF-TRACE-STOP",lo="FB-PERF-TRACE-MEASURE",Hp="_wt_",Gp="_fp",Kp="_fcp",Wp="_fid",Jp="@firebase/performance/config",Yp="@firebase/performance/configexpire",Xx="performance",Qp="Performance";const Zx={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},ke=new di(Xx,Qp,Zx);const ot=new il(Qp);ot.logLevel=W0.INFO;let Xi,Xp;class ye{constructor(t){if(this.window=t,!t)throw ke.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(t){!this.performance||!this.performance.mark||this.performance.mark(t)}measure(t,r,s){!this.performance||!this.performance.measure||this.performance.measure(t,r,s)}getEntriesByType(t){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(t)}getEntriesByName(t){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(t)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!xf()?(ot.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):hi()?!0:(ot.info("IndexedDB is not supported by current browser"),!1)}setupObserver(t,r){if(!this.PerformanceObserver)return;new this.PerformanceObserver(n=>{for(const i of n.getEntries())r(i)}).observe({entryTypes:[t]})}static getInstance(){return Xi===void 0&&(Xi=new ye(Xp)),Xi}}function e_(e){Xp=e}let Zp;function t_(e){const t=e.getId();return t.then(r=>{Zp=r}),t}function El(){return Zp}function r_(e){const t=e.getToken();return t.then(r=>{}),t}function bu(e,t){const r=e.length-t.length;if(r<0||r>1)throw ke.create("invalid String merger input");const s=[];for(let n=0;n<e.length;n++)s.push(e.charAt(n)),t.length>n&&s.push(t.charAt(n));return s.join("")}let Zi;class Le{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=bu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=bu("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Zi===void 0&&(Zi=new Le),Zi}}var Dr;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"})(Dr||(Dr={}));const s_=["firebase_","google_","ga_"],n_=new RegExp("^[a-zA-Z]\\w*$"),i_=40,a_=100;function o_(){const e=ye.getInstance().navigator;return e?.serviceWorker?e.serviceWorker.controller?2:3:1}function em(){switch(ye.getInstance().document.visibilityState){case"visible":return Dr.VISIBLE;case"hidden":return Dr.HIDDEN;default:return Dr.UNKNOWN}}function l_(){const t=ye.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function c_(e){return e.length===0||e.length>i_?!1:!s_.some(r=>e.startsWith(r))&&!!e.match(n_)}function u_(e){return e.length!==0&&e.length<=a_}function tm(e){var t;const r=(t=e.options)===null||t===void 0?void 0:t.appId;if(!r)throw ke.create("no app id");return r}function d_(e){var t;const r=(t=e.options)===null||t===void 0?void 0:t.projectId;if(!r)throw ke.create("no project id");return r}function h_(e){var t;const r=(t=e.options)===null||t===void 0?void 0:t.apiKey;if(!r)throw ke.create("no api key");return r}const f_="0.0.1",Ke={loggingEnabled:!0},p_="FIREBASE_INSTALLATIONS_AUTH";function m_(e,t){const r=g_();return r?(wu(r),Promise.resolve()):b_(e,t).then(wu).then(s=>y_(s),()=>{})}function g_(){const e=ye.getInstance().localStorage;if(!e)return;const t=e.getItem(Yp);if(!t||!w_(t))return;const r=e.getItem(Jp);if(r)try{return JSON.parse(r)}catch{return}}function y_(e){const t=ye.getInstance().localStorage;!e||!t||(t.setItem(Jp,JSON.stringify(e)),t.setItem(Yp,String(Date.now()+Le.getInstance().configTimeToLive*60*60*1e3)))}const v_="Could not fetch config, will use default configs";function b_(e,t){return r_(e.installations).then(r=>{const s=d_(e.app),n=h_(e.app),i=`https://firebaseremoteconfig.googleapis.com/v1/projects/${s}/namespaces/fireperf:fetch?key=${n}`,a=new Request(i,{method:"POST",headers:{Authorization:`${p_} ${r}`},body:JSON.stringify({app_instance_id:t,app_instance_id_token:r,app_id:tm(e.app),app_version:qp,sdk_version:f_})});return fetch(a).then(o=>{if(o.ok)return o.json();throw ke.create("RC response not ok")})}).catch(()=>{ot.info(v_)})}function wu(e){if(!e)return e;const t=Le.getInstance(),r=e.entries||{};return r.fpr_enabled!==void 0?t.loggingEnabled=String(r.fpr_enabled)==="true":t.loggingEnabled=Ke.loggingEnabled,r.fpr_log_source?t.logSource=Number(r.fpr_log_source):Ke.logSource&&(t.logSource=Ke.logSource),r.fpr_log_endpoint_url?t.logEndPointUrl=r.fpr_log_endpoint_url:Ke.logEndPointUrl&&(t.logEndPointUrl=Ke.logEndPointUrl),r.fpr_log_transport_key?t.transportKey=r.fpr_log_transport_key:Ke.transportKey&&(t.transportKey=Ke.transportKey),r.fpr_vc_network_request_sampling_rate!==void 0?t.networkRequestsSamplingRate=Number(r.fpr_vc_network_request_sampling_rate):Ke.networkRequestsSamplingRate!==void 0&&(t.networkRequestsSamplingRate=Ke.networkRequestsSamplingRate),r.fpr_vc_trace_sampling_rate!==void 0?t.tracesSamplingRate=Number(r.fpr_vc_trace_sampling_rate):Ke.tracesSamplingRate!==void 0&&(t.tracesSamplingRate=Ke.tracesSamplingRate),t.logTraceAfterSampling=xu(t.tracesSamplingRate),t.logNetworkAfterSampling=xu(t.networkRequestsSamplingRate),e}function w_(e){return Number(e)>Date.now()}function xu(e){return Math.random()<=e}let Tl=1,ea;function rm(e){return Tl=2,ea=ea||__(e),ea}function x_(){return Tl===3}function __(e){return S_().then(()=>t_(e.installations)).then(t=>m_(e,t)).then(()=>_u(),()=>_u())}function S_(){const e=ye.getInstance().document;return new Promise(t=>{if(e&&e.readyState!=="complete"){const r=()=>{e.readyState==="complete"&&(e.removeEventListener("readystatechange",r),t())};e.addEventListener("readystatechange",r)}else t()})}function _u(){Tl=3}const Cl=10*1e3,k_=5.5*1e3,sm=3,E_=1e3;let Vn=sm,jt=[],Su=!1;function T_(){Su||(bi(k_),Su=!0)}function bi(e){setTimeout(()=>{if(Vn!==0){if(!jt.length)return bi(Cl);C_()}},e)}function C_(){const e=jt.splice(0,E_),t=e.map(s=>({source_extension_json_proto3:s.message,event_time_ms:String(s.eventTime)})),r={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Le.getInstance().logSource,log_event:t};A_(r,e).catch(()=>{jt=[...e,...jt],Vn--,ot.info(`Tries left: ${Vn}.`),bi(Cl)})}function A_(e,t){return R_(e).then(r=>(r.ok||ot.info("Call to Firebase backend failed."),r.json())).then(r=>{const s=Number(r.nextRequestWaitMillis);let n=Cl;isNaN(s)||(n=Math.max(s,n));const i=r.logResponseDetails;Array.isArray(i)&&i.length>0&&i[0].responseAction==="RETRY_REQUEST_LATER"&&(jt=[...t,...jt],ot.info("Retry transport request later.")),Vn=sm,bi(n)})}function R_(e){const t=Le.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function P_(e){if(!e.eventTime||!e.message)throw ke.create("invalid cc log");jt=[...jt,e]}function j_(e){return(...t)=>{const r=e(...t);P_({message:r,eventTime:Date.now()})}}let ta;function nm(e,t){ta||(ta=j_(O_)),ta(e,t)}function tn(e){const t=Le.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||ye.getInstance().requiredApisAvailable()&&(e.isAuto&&em()!==Dr.VISIBLE||(x_()?ra(e):rm(e.performanceController).then(()=>ra(e),()=>ra(e))))}function ra(e){if(!El())return;const t=Le.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(()=>nm(e,1),0)}function I_(e){const t=Le.getInstance();if(!t.instrumentationEnabled)return;const r=e.url,s=t.logEndPointUrl.split("?")[0],n=t.flTransportEndpointUrl.split("?")[0];r===s||r===n||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(()=>nm(e,0),0)}function O_(e,t){return t===0?N_(e):M_(e)}function N_(e){const t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},r={application_info:im(e.performanceController.app),network_request_metric:t};return JSON.stringify(r)}function M_(e){const t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};Object.keys(e.counters).length!==0&&(t.counters=e.counters);const r=e.getAttributes();Object.keys(r).length!==0&&(t.custom_attributes=r);const s={application_info:im(e.performanceController.app),trace_metric:t};return JSON.stringify(s)}function im(e){return{google_app_id:tm(e),app_instance_id:El(),web_app_info:{sdk_version:qp,page_url:ye.getInstance().getUrl(),service_worker_status:o_(),visibility_state:em(),effective_connection_type:l_()},application_process_state:0}}const $_=100,D_="_",L_=[Gp,Kp,Wp];function U_(e,t){return e.length===0||e.length>$_?!1:t&&t.startsWith(Hp)&&L_.indexOf(e)>-1||!e.startsWith(D_)}function F_(e){const t=Math.floor(e);return t<e&&ot.info(`Metric value should be an Integer, setting the value as : ${t}.`),t}class rr{constructor(t,r,s=!1,n){this.performanceController=t,this.name=r,this.isAuto=s,this.state=1,this.customAttributes={},this.counters={},this.api=ye.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${Yx}-${this.randomId}-${this.name}`,this.traceStopMark=`${Qx}-${this.randomId}-${this.name}`,this.traceMeasure=n||`${lo}-${this.randomId}-${this.name}`,n&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw ke.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw ke.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),tn(this)}record(t,r,s){if(t<=0)throw ke.create("nonpositive trace startTime",{traceName:this.name});if(r<=0)throw ke.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(r*1e3),this.startTimeUs=Math.floor(t*1e3),s&&s.attributes&&(this.customAttributes=Object.assign({},s.attributes)),s&&s.metrics)for(const n of Object.keys(s.metrics))isNaN(Number(s.metrics[n]))||(this.counters[n]=Math.floor(Number(s.metrics[n])));tn(this)}incrementMetric(t,r=1){this.counters[t]===void 0?this.putMetric(t,r):this.putMetric(t,this.counters[t]+r)}putMetric(t,r){if(U_(t,this.name))this.counters[t]=F_(r??0);else throw ke.create("invalid custom metric name",{customMetricName:t})}getMetric(t){return this.counters[t]||0}putAttribute(t,r){const s=c_(t),n=u_(r);if(s&&n){this.customAttributes[t]=r;return}if(!s)throw ke.create("invalid attribute name",{attributeName:t});if(!n)throw ke.create("invalid attribute value",{attributeValue:r})}getAttribute(t){return this.customAttributes[t]}removeAttribute(t){this.customAttributes[t]!==void 0&&delete this.customAttributes[t]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(t){this.startTimeUs=t}setDuration(t){this.durationUs=t}calculateTraceMetrics(){const t=this.api.getEntriesByName(this.traceMeasure),r=t&&t[0];r&&(this.durationUs=Math.floor(r.duration*1e3),this.startTimeUs=Math.floor((r.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(t,r,s,n){const i=ye.getInstance().getUrl();if(!i)return;const a=new rr(t,Hp+i,!0),o=Math.floor(ye.getInstance().getTimeOrigin()*1e3);a.setStartTime(o),r&&r[0]&&(a.setDuration(Math.floor(r[0].duration*1e3)),a.putMetric("domInteractive",Math.floor(r[0].domInteractive*1e3)),a.putMetric("domContentLoadedEventEnd",Math.floor(r[0].domContentLoadedEventEnd*1e3)),a.putMetric("loadEventEnd",Math.floor(r[0].loadEventEnd*1e3)));const l="first-paint",c="first-contentful-paint";if(s){const d=s.find(f=>f.name===l);d&&d.startTime&&a.putMetric(Gp,Math.floor(d.startTime*1e3));const h=s.find(f=>f.name===c);h&&h.startTime&&a.putMetric(Kp,Math.floor(h.startTime*1e3)),n&&a.putMetric(Wp,Math.floor(n*1e3))}tn(a)}static createUserTimingTrace(t,r){const s=new rr(t,r,!1,r);tn(s)}}function ku(e,t){const r=t;if(!r||r.responseStart===void 0)return;const s=ye.getInstance().getTimeOrigin(),n=Math.floor((r.startTime+s)*1e3),i=r.responseStart?Math.floor((r.responseStart-r.startTime)*1e3):void 0,a=Math.floor((r.responseEnd-r.startTime)*1e3),o=r.name&&r.name.split("?")[0],l={performanceController:e,url:o,responsePayloadBytes:r.transferSize,startTimeUs:n,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:a};I_(l)}const V_=5e3;function Eu(e){El()&&(setTimeout(()=>z_(e),0),setTimeout(()=>B_(e),0),setTimeout(()=>q_(e),0))}function B_(e){const t=ye.getInstance(),r=t.getEntriesByType("resource");for(const s of r)ku(e,s);t.setupObserver("resource",s=>ku(e,s))}function z_(e){const t=ye.getInstance(),r=t.getEntriesByType("navigation"),s=t.getEntriesByType("paint");if(t.onFirstInputDelay){let n=setTimeout(()=>{rr.createOobTrace(e,r,s),n=void 0},V_);t.onFirstInputDelay(i=>{n&&(clearTimeout(n),rr.createOobTrace(e,r,s,i))})}else rr.createOobTrace(e,r,s)}function q_(e){const t=ye.getInstance(),r=t.getEntriesByType("measure");for(const s of r)Tu(e,s);t.setupObserver("measure",s=>Tu(e,s))}function Tu(e,t){const r=t.name;r.substring(0,lo.length)!==lo&&rr.createUserTimingTrace(e,r)}class H_{constructor(t,r){this.app=t,this.installations=r,this.initialized=!1}_init(t){this.initialized||(t?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=t.dataCollectionEnabled),t?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=t.instrumentationEnabled),ye.getInstance().requiredApisAvailable()?wf().then(r=>{r&&(T_(),rm(this).then(()=>Eu(this),()=>Eu(this)),this.initialized=!0)}).catch(r=>{ot.info(`Environment doesn't support IndexedDB: ${r}`)}):ot.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(t){Le.getInstance().instrumentationEnabled=t}get instrumentationEnabled(){return Le.getInstance().instrumentationEnabled}set dataCollectionEnabled(t){Le.getInstance().dataCollectionEnabled=t}get dataCollectionEnabled(){return Le.getInstance().dataCollectionEnabled}}const G_="[DEFAULT]";function K_(e=fi()){return e=dr(e),Lt(e,"performance").getImmediate()}const W_=(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();if(r.name!==G_)throw ke.create("FB not default");if(typeof window>"u")throw ke.create("no window");e_(window);const n=new H_(r,s);return n._init(t),n};function J_(){Ot(new Nt("performance",W_,"PUBLIC")),gt(vu,oo),gt(vu,oo,"esm2017")}J_();const co=new Map,am={activated:!1,tokenObservers:[]},Y_={initialized:!1,enabled:!1};function he(e){return co.get(e)||Object.assign({},am)}function Q_(e,t){return co.set(e,t),co.get(e)}function wi(){return Y_}const om="https://content-firebaseappcheck.googleapis.com/v1",X_="exchangeRecaptchaV3Token",Z_="exchangeDebugToken",Cu={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},eS=1440*60*1e3;class tS{constructor(t,r,s,n,i){if(this.operation=t,this.retryPolicy=r,this.getWaitDuration=s,this.lowerBound=n,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=n,n>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new jn,this.pending.promise.catch(r=>{}),await rS(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new jn,this.pending.promise.catch(r=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(r){this.retryPolicy(r)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}}function rS(e){return new Promise(t=>{setTimeout(t,e)})}const sS={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ie=new di("appCheck","AppCheck",sS);function Au(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Al(e){if(!he(e).activated)throw Ie.create("use-before-activation",{appName:e.name})}function lm(e){const t=Math.round(e/1e3),r=Math.floor(t/(3600*24)),s=Math.floor((t-r*3600*24)/3600),n=Math.floor((t-r*3600*24-s*3600)/60),i=t-r*3600*24-s*3600-n*60;let a="";return r&&(a+=rn(r)+"d:"),s&&(a+=rn(s)+"h:"),a+=rn(n)+"m:"+rn(i)+"s",a}function rn(e){return e===0?"00":e>=10?e.toString():"0"+e}async function Rl({url:e,body:t},r){const s={"Content-Type":"application/json"},n=r.getImmediate({optional:!0});if(n){const h=await n.getHeartbeatsHeader();h&&(s["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(t),headers:s};let a;try{a=await fetch(e,i)}catch(h){throw Ie.create("fetch-network-error",{originalErrorMessage:h?.message})}if(a.status!==200)throw Ie.create("fetch-status-error",{httpStatus:a.status});let o;try{o=await a.json()}catch(h){throw Ie.create("fetch-parse-error",{originalErrorMessage:h?.message})}const l=o.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Ie.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${o.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:o.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function nS(e,t){const{projectId:r,appId:s,apiKey:n}=e.options;return{url:`${om}/projects/${r}/apps/${s}:${X_}?key=${n}`,body:{recaptcha_v3_token:t}}}function cm(e,t){const{projectId:r,appId:s,apiKey:n}=e.options;return{url:`${om}/projects/${r}/apps/${s}:${Z_}?key=${n}`,body:{debug_token:t}}}const iS="firebase-app-check-database",aS=1,xs="firebase-app-check-store",um="debug-token";let sn=null;function dm(){return sn||(sn=new Promise((e,t)=>{try{const r=indexedDB.open(iS,aS);r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{var n;t(Ie.create("storage-open",{originalErrorMessage:(n=s.target.error)===null||n===void 0?void 0:n.message}))},r.onupgradeneeded=s=>{const n=s.target.result;s.oldVersion===0&&n.createObjectStore(xs,{keyPath:"compositeKey"})}}catch(r){t(Ie.create("storage-open",{originalErrorMessage:r?.message}))}}),sn)}function oS(e){return fm(pm(e))}function lS(e,t){return hm(pm(e),t)}function cS(e){return hm(um,e)}function uS(){return fm(um)}async function hm(e,t){const s=(await dm()).transaction(xs,"readwrite"),i=s.objectStore(xs).put({compositeKey:e,value:t});return new Promise((a,o)=>{i.onsuccess=l=>{a()},s.onerror=l=>{var c;o(Ie.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}async function fm(e){const r=(await dm()).transaction(xs,"readonly"),n=r.objectStore(xs).get(e);return new Promise((i,a)=>{n.onsuccess=o=>{const l=o.target.result;i(l?l.value:void 0)},r.onerror=o=>{var l;a(Ie.create("storage-get",{originalErrorMessage:(l=o.target.error)===null||l===void 0?void 0:l.message}))}})}function pm(e){return`${e.options.appId}-${e.name}`}const _s=new il("@firebase/app-check");async function dS(e){if(hi()){let t;try{t=await oS(e)}catch(r){_s.warn(`Failed to read token from IndexedDB. Error: ${r}`)}return t}}function sa(e,t){return hi()?lS(e,t).catch(r=>{_s.warn(`Failed to write token to IndexedDB. Error: ${r}`)}):Promise.resolve()}async function hS(){let e;try{e=await uS()}catch{}if(e)return e;{const t=Q0();return cS(t).catch(r=>_s.warn(`Failed to persist debug token to IndexedDB. Error: ${r}`)),t}}function Pl(){return wi().enabled}async function jl(){const e=wi();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function fS(){const e=Y0(),t=wi();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const r=new jn;t.token=r,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?r.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):r.resolve(hS())}const pS={error:"UNKNOWN_ERROR"};function mS(e){return J0.encodeString(JSON.stringify(e),!1)}async function uo(e,t=!1){const r=e.app;Al(r);const s=he(r);let n=s.token,i;if(n&&!Ar(n)&&(s.token=void 0,n=void 0),!n){const l=await s.cachedTokenPromise;l&&(Ar(l)?n=l:await sa(r,void 0))}if(!t&&n&&Ar(n))return{token:n.token};let a=!1;if(Pl()){s.exchangeTokenPromise||(s.exchangeTokenPromise=Rl(cm(r,await jl()),e.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const l=await s.exchangeTokenPromise;return await sa(r,l),s.token=l,{token:l.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),n=await he(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?_s.warn(l.message):_s.error(l),i=l}let o;return n?i?Ar(n)?o={token:n.token,internalError:i}:o=Pu(i):(o={token:n.token},s.token=n,await sa(r,n)):o=Pu(i),a&&ym(r,o),o}async function gS(e){const t=e.app;Al(t);const{provider:r}=he(t);if(Pl()){const s=await jl(),{token:n}=await Rl(cm(t,s),e.heartbeatServiceProvider);return{token:n}}else{const{token:s}=await r.getToken();return{token:s}}}function mm(e,t,r,s){const{app:n}=e,i=he(n),a={next:r,error:s,type:t};if(i.tokenObservers=[...i.tokenObservers,a],i.token&&Ar(i.token)){const o=i.token;Promise.resolve().then(()=>{r({token:o.token}),Ru(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>Ru(e))}function gm(e,t){const r=he(e),s=r.tokenObservers.filter(n=>n.next!==t);s.length===0&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=s}function Ru(e){const{app:t}=e,r=he(t);let s=r.tokenRefresher;s||(s=yS(e),r.tokenRefresher=s),!s.isRunning()&&r.isTokenAutoRefreshEnabled&&s.start()}function yS(e){const{app:t}=e;return new tS(async()=>{const r=he(t);let s;if(r.token?s=await uo(e,!0):s=await uo(e),s.error)throw s.error;if(s.internalError)throw s.internalError},()=>!0,()=>{const r=he(t);if(r.token){let s=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5;const n=r.token.expireTimeMillis-300*1e3;return s=Math.min(s,n),Math.max(0,s-Date.now())}else return 0},Cu.RETRIAL_MIN_WAIT,Cu.RETRIAL_MAX_WAIT)}function ym(e,t){const r=he(e).tokenObservers;for(const s of r)try{s.type==="EXTERNAL"&&t.error!=null?s.error(t.error):s.next(t)}catch{}}function Ar(e){return e.expireTimeMillis-Date.now()>0}function Pu(e){return{token:mS(pS),error:e}}class vS{constructor(t,r){this.app=t,this.heartbeatServiceProvider=r}_delete(){const{tokenObservers:t}=he(this.app);for(const r of t)gm(this.app,r.next);return Promise.resolve()}}function bS(e,t){return new vS(e,t)}function wS(e){return{getToken:t=>uo(e,t),getLimitedUseToken:()=>gS(e),addTokenListener:t=>mm(e,"INTERNAL",t),removeTokenListener:t=>gm(e.app,t)}}const xS="@firebase/app-check",_S="0.8.8";const SS="https://www.google.com/recaptcha/api.js";function kS(e,t){const r=new jn,s=he(e);s.reCAPTCHAState={initialized:r};const n=ES(e),i=Au(!1);return i?ju(e,t,i,n,r):AS(()=>{const a=Au(!1);if(!a)throw new Error("no recaptcha");ju(e,t,a,n,r)}),r.promise}function ju(e,t,r,s,n){r.ready(()=>{CS(e,t,r,s),n.resolve(r)})}function ES(e){const t=`fire_app_check_${e.name}`,r=document.createElement("div");return r.id=t,r.style.display="none",document.body.appendChild(r),t}async function TS(e){Al(e);const r=await he(e).reCAPTCHAState.initialized.promise;return new Promise((s,n)=>{const i=he(e).reCAPTCHAState;r.ready(()=>{s(r.execute(i.widgetId,{action:"fire_app_check"}))})})}function CS(e,t,r,s){const n=r.render(s,{sitekey:t,size:"invisible",callback:()=>{he(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{he(e).reCAPTCHAState.succeeded=!1}}),i=he(e);i.reCAPTCHAState=Object.assign(Object.assign({},i.reCAPTCHAState),{widgetId:n})}function AS(e){const t=document.createElement("script");t.src=SS,t.onload=e,document.head.appendChild(t)}class Il{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,r,s;PS(this._throttleData);const n=await TS(this._app).catch(a=>{throw Ie.create("recaptcha-error")});if(!(!((t=he(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Ie.create("recaptcha-error");let i;try{i=await Rl(nS(this._app,n),this._heartbeatServiceProvider)}catch(a){throw!((r=a.code)===null||r===void 0)&&r.includes("fetch-status-error")?(this._throttleData=RS(Number((s=a.customData)===null||s===void 0?void 0:s.httpStatus),this._throttleData),Ie.create("throttled",{time:lm(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):a}return this._throttleData=null,i}initialize(t){this._app=t,this._heartbeatServiceProvider=Lt(t,"heartbeat"),kS(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Il?this._siteKey===t._siteKey:!1}}function RS(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+eS,httpStatus:e};{const r=t?t.backoffCount:0,s=Va(r,1e3,2);return{backoffCount:r+1,allowRequestsAfter:Date.now()+s,httpStatus:e}}}function PS(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Ie.create("throttled",{time:lm(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}function jS(e=fi(),t){e=dr(e);const r=Lt(e,"app-check");if(wi().initialized||fS(),Pl()&&jl().then(n=>console.log(`App Check debug token: ${n}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),r.isInitialized()){const n=r.getImmediate(),i=r.getOptions();if(i.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&i.provider.isEqual(t.provider))return n;throw Ie.create("already-initialized",{appName:e.name})}const s=r.initialize({options:t});return IS(e,t.provider,t.isTokenAutoRefreshEnabled),he(e).isTokenAutoRefreshEnabled&&mm(s,"INTERNAL",()=>{}),s}function IS(e,t,r){const s=Q_(e,Object.assign({},am));s.activated=!0,s.provider=t,s.cachedTokenPromise=dS(e).then(n=>(n&&Ar(n)&&(s.token=n,ym(e,{token:n.token})),n)),s.isTokenAutoRefreshEnabled=r===void 0?e.automaticDataCollectionEnabled:r,s.provider.initialize(e)}const OS="app-check",Iu="app-check-internal";function NS(){Ot(new Nt(OS,e=>{const t=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat");return bS(t,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider(Iu).initialize()})),Ot(new Nt(Iu,e=>{const t=e.getProvider("app-check").getImmediate();return wS(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),gt(xS,_S)}NS();const MS={apiKey:"AIzaSyDlj3o08kSJrEhKJjU2Xb1LMNeXD2hxWhY",authDomain:"richard-automotive.firebaseapp.com",projectId:"richard-automotive",storageBucket:"richard-automotive.firebasestorage.app",messagingSenderId:"197990063384",appId:"1:197990063384:web:2e797f109bda021e2e926d",measurementId:"G-BB5QFNTHHG"},lr=X0(MS),xi=Dp(lr),oe=Z0(lr),fe=ev(lr,{});typeof window<"u"&&tv(oe,lv).catch(e=>console.error("Persistence Config Failed:",e));const ho=rv(lr),vm=Vp(lr);if(typeof window<"u"){K_(lr);const e="6LeVOlQsAAAAAIZeClDUukCdlutIxgLYakag_zVc";jS(lr,{provider:new Il(e),isTokenAutoRefreshEnabled:!0})}typeof window<"u"&&sv(fe).catch(e=>{e.code==="failed-precondition"?console.warn("Persistencia fall: Mltiples pestaas abiertas."):e.code==="unimplemented"&&console.warn("El navegador no soporta persistencia.")});const Ol=qr(fe,"cars"),bm=qr(fe,"applications"),Nl=async(e=9,t=null,r="all",s=null)=>{const n=[];r&&r!=="all"&&n.push(za("type","==",r)),s?n.push(Ba("price",s)):n.push(Ba("name","asc")),t&&n.push(cv(t)),n.push(kf(e));const i=localStorage.getItem("current_dealer_id")||"richard-automotive";n.push(za("dealerId","==",i));const a=Sf(Ol,...n);try{const o=await Ef(a),l=o.docs.map(d=>({id:d.id,...d.data()})),c=o.docs[o.docs.length-1]||null;return{cars:l,lastDoc:c,hasMore:o.docs.length===e}}catch(o){throw console.error("Pagination Error:",o),o.code==="failed-precondition"&&console.warn("Index missing for this query. Check console link."),o}},$S=async()=>{const e=localStorage.getItem("current_dealer_id")||"richard-automotive",t=Sf(bm,za("dealerId","==",e),Ba("timestamp","desc"),kf(50));return(await Ef(t)).docs.map(s=>({id:s.id,...s.data()}))},wm=(e,t=800)=>e?e.includes("firebasestorage.googleapis.com")?e:e.includes("images.unsplash.com")?`${e.split("?")[0]}?q=80&w=${t}&auto=format&fit=crop`:e:"",DS=async(e,t)=>(console.log("Strategic Deep Debug: Starting uploadImage...",{fileName:e.name,fileSize:e.size,fileType:e.type,storageBucket:ho.app.options.storageBucket,authUid:oe.currentUser?.uid||"NOT_LOGGED_IN"}),new Promise((r,s)=>{try{const n=nv(ho,`inventory/${Date.now()}_${e.name.replace(/[^a-zA-Z0-9.]/g,"_")}`);console.log("Strategic Deep Debug: Storage reference created, starting uploadBytesResumable...");const i=iv(n,e);i.on("state_changed",a=>{const o=a.bytesTransferred/a.totalBytes*100;switch(console.log("Upload is "+o+"% done"),a.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},a=>{console.error("Strategic Deep Debug: Upload FAILED:",a),a.code==="storage/unauthorized"?s(new Error("Permiso denegado: No tienes acceso para subir archivos. (Verifica Login/Reglas)")):a.code==="storage/canceled"?s(new Error("Subida cancelada por el usuario.")):a.code==="storage/unknown"?s(new Error("Error desconocido de Storage. Verifica tu conexin.")):s(new Error(`Fallo en Storage: ${a.message}`))},()=>{av(i.snapshot.ref).then(a=>{console.log("File available at",a),r(a)})})}catch(n){console.error("Strategic Deep Debug: SYNC FAIL in uploadImage:",n),s(new Error(`Fallo crtico al iniciar subida: ${n.message}`))}})),xm=async e=>{const t=localStorage.getItem("current_dealer_id")||"richard-automotive";console.log(`[CRUD] Starting addCar... Dealer: ${t}`),await Hr(Ol,{dealerId:t,...e,createdAt:Gr()}),console.log("[CRUD] addCar completed successfully.")},_m=async e=>{const t=localStorage.getItem("current_dealer_id")||"richard-automotive";console.log(`[CRUD] Starting updateCar for ${e.id}...`);const r=st(fe,"cars",e.id),{id:s,...n}=e;await hr(r,{...n,dealerId:t,updatedAt:Gr()},{merge:!0}),console.log(`[CRUD] updateCar completed for ${e.id}.`)},Sm=async e=>{const t=st(fe,"cars",e);await Tf(t)},km=async e=>{const t=localStorage.getItem("current_dealer_id")||"richard-automotive",r=ov(fe);e.forEach(s=>{const n=st(Ol);r.set(n,{...s,dealerId:t,createdAt:Gr()})}),await r.commit()},LS=async e=>{const t=st(fe,"cars",e);if(await hr(t,{views:_f(1)},{merge:!0}),typeof window<"u"){const{logEvent:r}=await q(async()=>{const{logEvent:s}=await Promise.resolve().then(()=>Sl);return{logEvent:s}},void 0);r(xi,"view_item",{items:[{item_id:e}]})}},Em=async e=>{const t=st(fe,"cars",e);await hr(t,{leads_count:_f(1)},{merge:!0})},US=e=>{let t=30;return e.type==="trade-in"&&(t+=20),e.type==="finance"&&e.ssn&&(t+=35),e.monthlyIncome&&Number(e.monthlyIncome)>3e3&&(t+=10),e.visitCount&&e.visitCount>3&&(t+=15),e.aiInteractions&&e.aiInteractions>5&&(t+=10),e.phone&&e.phone.length>=10&&(t+=10),e.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&(t+=5),e.urgency==="immediate"&&(t+=15),Math.min(t,100)},FS=async e=>{const t=US(e),r=localStorage.getItem("current_dealer_id")||"richard-automotive",s={...e,dealerId:r,...e.ssn?{ssn:`XXX-XX-${e.ssn.slice(-4)}`}:{},timestamp:new Date,status:"new",type:e.type||"finance",aiScore:t,aiSummary:e.aiSummary||"Lead capturado automticamente.",aiMetaData:{promptVersion:"2.0-flash-optimized",contentType:e.description?"generative":"legacy",hasModifiedByDealer:e.hasModifiedByDealer||!1}};if(await Hr(bm,s),e.vehicleInfo&&e.vehicleInfo.id&&await Em(e.vehicleInfo.id),typeof window<"u"){const{logEvent:n}=await q(async()=>{const{logEvent:i}=await Promise.resolve().then(()=>Sl);return{logEvent:i}},void 0);n(xi,"generate_lead",{currency:"USD",value:t,lead_type:s.type,vehicle_id:s.vehicleId})}},VS=async(e,t)=>{const r=st(fe,"applications",e);await hr(r,{status:t},{merge:!0})},BS=async(e,t,r)=>{try{return(await zp(vm,"generateDescription")({carModel:e,features:t})).data}catch(s){throw console.error("Error generating description:",s),new Error("Failed to generate description via AI.")}},Tm="Aviso: Los precios, pagos y disponibilidad generados por IA son estimaciones para fines informativos y no constituyen una oferta formal. Sujeto a cambios sin previo aviso.",zS=async e=>{try{const t=qr(fe,"subscribers");await Hr(t,{email:e,timestamp:Gr()})}catch(t){throw console.error("Error subscribing:",t),t}},qS=Object.freeze(Object.defineProperty({__proto__:null,AI_LEGAL_DISCLAIMER:Tm,addCar:xm,analytics:xi,auth:oe,db:fe,deleteCar:Sm,functions:vm,generateCarDescriptionAI:BS,getLeadsOnce:$S,getPaginatedCars:Nl,incrementCarLead:Em,incrementCarView:LS,optimizeImage:wm,storage:ho,submitApplication:FS,subscribeToNewsletter:zS,updateCar:_m,updateLeadStatus:VS,uploadImage:DS,uploadInitialInventory:km},Symbol.toStringTag,{value:"Module"}));var HS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const GS=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),j=(e,t)=>{const r=b.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...c},d)=>b.createElement("svg",{ref:d,...HS,width:n,height:n,stroke:s,strokeWidth:a?Number(i)*24/Number(n):i,className:["lucide",`lucide-${GS(e)}`,o].join(" "),...c},[...t.map(([h,f])=>b.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${e}`,r};const Ml=j("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Cm=j("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const na=j("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const KS=j("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);const WS=j("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const JS=j("BotMessageSquare",[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z",key:"w2lp3e"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M9 11v2",key:"1ueba0"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M20 12h2",key:"1q8mjw"}]]);const Bn=j("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);const YS=j("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const QS=j("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const XS=j("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Ou=j("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const Am=j("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);const ZS=j("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const ek=j("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Rm=j("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const $l=j("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const tk=j("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);const rk=j("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const sk=j("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const nk=j("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]);const ik=j("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const ak=j("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);const ok=j("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);const lk=j("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]);const ck=j("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const uk=j("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);const Pm=j("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);const jm=j("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const zn=j("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const dk=j("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const hk=j("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const fk=j("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);const pk=j("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const Sn=j("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const mk=j("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const gk=j("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const yk=j("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const vk=j("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const bk=j("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const Im=j("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const Om=j("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const wk=j("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const xk=j("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);const _k=j("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);const Nm=j("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Sk=j("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);const kk=j("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Ek=j("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const Tk=j("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const Mm=j("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const _i=j("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Ck=j("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const Ss=j("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const Ak=j("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Nu=j("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const Rk=j("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);const Pk=j("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);const fo=j("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const jk=j("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);const Ik=j("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);const Ok=j("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Nk=j("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const vt=j("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Mk=j("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);const $m=j("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var Mu;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Mu||(Mu={}));var $u;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})($u||($u={}));var Du;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Du||(Du={}));const Lu=["user","model","function","system"];var Uu;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Uu||(Uu={}));var Fu;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Fu||(Fu={}));var Vu;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Vu||(Vu={}));var Bu;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(Bu||(Bu={}));var fs;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(fs||(fs={}));var zu;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(zu||(zu={}));var qu;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(qu||(qu={}));var Hu;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Hu||(Hu={}));class Ee extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class gr extends Ee{constructor(t,r){super(t),this.response=r}}class Dm extends Ee{constructor(t,r,s,n){super(t),this.status=r,this.statusText=s,this.errorDetails=n}}class It extends Ee{}class Lm extends Ee{}const $k="https://generativelanguage.googleapis.com",Dk="v1beta",Lk="0.24.1",Uk="genai-js";var cr;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(cr||(cr={}));class Fk{constructor(t,r,s,n,i){this.model=t,this.task=r,this.apiKey=s,this.stream=n,this.requestOptions=i}toString(){var t,r;const s=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Dk;let i=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||$k}/${s}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function Vk(e){const t=[];return e?.apiClient&&t.push(e.apiClient),t.push(`${Uk}/${Lk}`),t.join(" ")}async function Bk(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",Vk(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let s=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(n){throw new It(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${n.message}`)}for(const[n,i]of s.entries()){if(n==="x-goog-api-key")throw new It(`Cannot set reserved header name ${n}`);if(n==="x-goog-api-client")throw new It(`Header name ${n} can only be set using the apiClient field`);r.append(n,i)}}return r}async function zk(e,t,r,s,n,i){const a=new Fk(e,t,r,s,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},Kk(i)),{method:"POST",headers:await Bk(a),body:n})}}async function Vs(e,t,r,s,n,i={},a=fetch){const{url:o,fetchOptions:l}=await zk(e,t,r,s,n,i);return qk(o,l,a)}async function qk(e,t,r=fetch){let s;try{s=await r(e,t)}catch(n){Hk(n,e)}return s.ok||await Gk(s,e),s}function Hk(e,t){let r=e;throw r.name==="AbortError"?(r=new Lm(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof Dm||e instanceof It||(r=new Ee(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function Gk(e,t){let r="",s;try{const n=await e.json();r=n.error.message,n.error.details&&(r+=` ${JSON.stringify(n.error.details)}`,s=n.error.details)}catch{}throw new Dm(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,s)}function Kk(e){const t={};if(e?.signal!==void 0||e?.timeout>=0){const r=new AbortController;e?.timeout>=0&&setTimeout(()=>r.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}function Dl(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),kn(e.candidates[0]))throw new gr(`${Tt(e)}`,e);return Wk(e)}else if(e.promptFeedback)throw new gr(`Text not available. ${Tt(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),kn(e.candidates[0]))throw new gr(`${Tt(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Gu(e)[0]}else if(e.promptFeedback)throw new gr(`Function call not available. ${Tt(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),kn(e.candidates[0]))throw new gr(`${Tt(e)}`,e);return Gu(e)}else if(e.promptFeedback)throw new gr(`Function call not available. ${Tt(e)}`,e)},e}function Wk(e){var t,r,s,n;const i=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const a of(n=(s=e.candidates)===null||s===void 0?void 0:s[0].content)===null||n===void 0?void 0:n.parts)a.text&&i.push(a.text),a.executableCode&&i.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&i.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function Gu(e){var t,r,s,n;const i=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const a of(n=(s=e.candidates)===null||s===void 0?void 0:s[0].content)===null||n===void 0?void 0:n.parts)a.functionCall&&i.push(a.functionCall);if(i.length>0)return i}const Jk=[fs.RECITATION,fs.SAFETY,fs.LANGUAGE];function kn(e){return!!e.finishReason&&Jk.includes(e.finishReason)}function Tt(e){var t,r,s;let n="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)n+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(n+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(n+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((s=e.candidates)===null||s===void 0)&&s[0]){const i=e.candidates[0];kn(i)&&(n+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(n+=`: ${i.finishMessage}`))}return n}function ks(e){return this instanceof ks?(this.v=e,this):new ks(e)}function Yk(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(e,t||[]),n,i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(f){s[f]&&(n[f]=function(p){return new Promise(function(m,g){i.push([f,p,m,g])>1||o(f,p)})})}function o(f,p){try{l(s[f](p))}catch(m){h(i[0][3],m)}}function l(f){f.value instanceof ks?Promise.resolve(f.value.v).then(c,d):h(i[0][2],f)}function c(f){o("next",f)}function d(f){o("throw",f)}function h(f,p){f(p),i.shift(),i.length&&o(i[0][0],i[0][1])}}const Ku=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Qk(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=eE(t),[s,n]=r.tee();return{stream:Zk(s),response:Xk(n)}}async function Xk(e){const t=[],r=e.getReader();for(;;){const{done:s,value:n}=await r.read();if(s)return Dl(tE(t));t.push(n)}}function Zk(e){return Yk(this,arguments,function*(){const r=e.getReader();for(;;){const{value:s,done:n}=yield ks(r.read());if(n)break;yield yield ks(Dl(s))}})}function eE(e){const t=e.getReader();return new ReadableStream({start(s){let n="";return i();function i(){return t.read().then(({value:a,done:o})=>{if(o){if(n.trim()){s.error(new Ee("Failed to parse stream"));return}s.close();return}n+=a;let l=n.match(Ku),c;for(;l;){try{c=JSON.parse(l[1])}catch{s.error(new Ee(`Error parsing JSON response: "${l[1]}"`));return}s.enqueue(c),n=n.substring(l[0].length),l=n.match(Ku)}return i()}).catch(a=>{let o=a;throw o.stack=a.stack,o.name==="AbortError"?o=new Lm("Request aborted when reading from the stream"):o=new Ee("Error reading from the stream"),o})}}})}function tE(e){const t=e[e.length-1],r={promptFeedback:t?.promptFeedback};for(const s of e){if(s.candidates){let n=0;for(const i of s.candidates)if(r.candidates||(r.candidates=[]),r.candidates[n]||(r.candidates[n]={index:n}),r.candidates[n].citationMetadata=i.citationMetadata,r.candidates[n].groundingMetadata=i.groundingMetadata,r.candidates[n].finishReason=i.finishReason,r.candidates[n].finishMessage=i.finishMessage,r.candidates[n].safetyRatings=i.safetyRatings,i.content&&i.content.parts){r.candidates[n].content||(r.candidates[n].content={role:i.content.role||"user",parts:[]});const a={};for(const o of i.content.parts)o.text&&(a.text=o.text),o.functionCall&&(a.functionCall=o.functionCall),o.executableCode&&(a.executableCode=o.executableCode),o.codeExecutionResult&&(a.codeExecutionResult=o.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),r.candidates[n].content.parts.push(a)}n++}s.usageMetadata&&(r.usageMetadata=s.usageMetadata)}return r}async function Um(e,t,r,s){const n=await Vs(t,cr.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),s);return Qk(n)}async function Fm(e,t,r,s){const i=await(await Vs(t,cr.GENERATE_CONTENT,e,!1,JSON.stringify(r),s)).json();return{response:Dl(i)}}function Vm(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Es(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return rE(t)}function rE(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let s=!1,n=!1;for(const i of e)"functionResponse"in i?(r.parts.push(i),n=!0):(t.parts.push(i),s=!0);if(s&&n)throw new Ee("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!n)throw new Ee("No content is provided for sending chat message.");return s?t:r}function sE(e,t){var r;let s={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(r=t?.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const n=e.generateContentRequest!=null;if(e.contents){if(n)throw new It("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=e.contents}else if(n)s=Object.assign(Object.assign({},s),e.generateContentRequest);else{const i=Es(e);s.contents=[i]}return{generateContentRequest:s}}function Wu(e){let t;return e.contents?t=e:t={contents:[Es(e)]},e.systemInstruction&&(t.systemInstruction=Vm(e.systemInstruction)),t}function nE(e){return typeof e=="string"||Array.isArray(e)?{content:Es(e)}:e}const Ju=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],iE={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function aE(e){let t=!1;for(const r of e){const{role:s,parts:n}=r;if(!t&&s!=="user")throw new Ee(`First content should be with role 'user', got ${s}`);if(!Lu.includes(s))throw new Ee(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(Lu)}`);if(!Array.isArray(n))throw new Ee("Content should have 'parts' property with an array of Parts");if(n.length===0)throw new Ee("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of n)for(const l of Ju)l in o&&(i[l]+=1);const a=iE[s];for(const o of Ju)if(!a.includes(o)&&i[o]>0)throw new Ee(`Content with role '${s}' can't contain '${o}' part`);t=!0}}function Yu(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const s of r.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const Qu="SILENT_ERROR";class oE{constructor(t,r,s,n={}){this.model=r,this.params=s,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,s?.history&&(aE(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var s,n,i,a,o,l;await this._sendPromise;const c=Es(t),d={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r);let f;return this._sendPromise=this._sendPromise.then(()=>Fm(this._apiKey,this.model,d,h)).then(p=>{var m;if(Yu(p.response)){this._history.push(c);const g=Object.assign({parts:[],role:"model"},(m=p.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(g)}else{const g=Tt(p.response);g&&console.warn(`sendMessage() was unsuccessful. ${g}. Inspect response object for details.`)}f=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,f}async sendMessageStream(t,r={}){var s,n,i,a,o,l;await this._sendPromise;const c=Es(t),d={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r),f=Um(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(Qu)}).then(p=>p.response).then(p=>{if(Yu(p)){this._history.push(c);const m=Object.assign({},p.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=Tt(p);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(p=>{p.message!==Qu&&console.error(p)}),f}}async function lE(e,t,r,s){return(await Vs(t,cr.COUNT_TOKENS,e,!1,JSON.stringify(r),s)).json()}async function cE(e,t,r,s){return(await Vs(t,cr.EMBED_CONTENT,e,!1,JSON.stringify(r),s)).json()}async function uE(e,t,r,s){const n=r.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(await Vs(t,cr.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:n}),s)).json()}class Xu{constructor(t,r,s={}){this.apiKey=t,this._requestOptions=s,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Vm(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var s;const n=Wu(t),i=Object.assign(Object.assign({},this._requestOptions),r);return Fm(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},n),i)}async generateContentStream(t,r={}){var s;const n=Wu(t),i=Object.assign(Object.assign({},this._requestOptions),r);return Um(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},n),i)}startChat(t){var r;return new oE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const s=sE(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),r);return lE(this.apiKey,this.model,s,n)}async embedContent(t,r={}){const s=nE(t),n=Object.assign(Object.assign({},this._requestOptions),r);return cE(this.apiKey,this.model,s,n)}async batchEmbedContents(t,r={}){const s=Object.assign(Object.assign({},this._requestOptions),r);return uE(this.apiKey,this.model,t,s)}}class dE{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Ee("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Xu(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,s){if(!t.name)throw new It("Cached content must contain a `name` field.");if(!t.model)throw new It("Cached content must contain a `model` field.");const n=["model","systemInstruction"];for(const a of n)if(r?.[a]&&t[a]&&r?.[a]!==t[a]){if(a==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===l)continue}throw new It(`Different value for "${a}" specified in modelParams (${r[a]}) and cachedContent (${t[a]})`)}const i=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new Xu(this.apiKey,i,s)}}const hE=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Ll extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class fE extends Ll{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Zu extends Ll{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ed extends Ll{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var po;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(po||(po={}));class pE{constructor(t,{headers:r={},customFetch:s,region:n=po.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=hE(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return uv(this,arguments,void 0,function*(r,s={}){var n;let i,a;try{const{headers:o,method:l,body:c,signal:d,timeout:h}=s;let f={},{region:p}=s;p||(p=this.region);const m=new URL(`${this.url}/${r}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let g;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=c):typeof c=="string"?(f["Content-Type"]="text/plain",g=c):typeof FormData<"u"&&c instanceof FormData?g=c:(f["Content-Type"]="application/json",g=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?g=JSON.stringify(c):g=c;let y=d;h&&(a=new AbortController,i=setTimeout(()=>a.abort(),h),d?(y=a.signal,d.addEventListener("abort",()=>a.abort())):y=a.signal);const w=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:g,signal:y}).catch(k=>{throw new fE(k)}),x=w.headers.get("x-relay-error");if(x&&x==="true")throw new Zu(w);if(!w.ok)throw new ed(w);let v=((n=w.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),S;return v==="application/json"?S=yield w.json():v==="application/octet-stream"||v==="application/pdf"?S=yield w.blob():v==="text/event-stream"?S=w:v==="multipart/form-data"?S=yield w.formData():S=yield w.text(),{data:S,error:null,response:w}}catch(o){return{data:null,error:o,response:o instanceof ed||o instanceof Zu?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var mE=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},gE=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,o=null,l=null,c=i.status,d=i.statusText;if(i.ok){var h,f;if(r.method!=="HEAD"){var p;const w=await i.text();w===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?o=w:o=JSON.parse(w))}const g=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),y=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&y&&y.length>1&&(l=parseInt(y[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var m;const g=await i.text();try{a=JSON.parse(g),Array.isArray(a)&&i.status===404&&(o=[],a=null,c=200,d="OK")}catch{i.status===404&&g===""?(c=204,d="No Content"):a={message:g}}if(a&&r.isMaybeSingle&&(!(a==null||(m=a.details)===null||m===void 0)&&m.includes("0 rows"))&&(a=null,c=200,d="OK"),a&&r.shouldThrowOnError)throw new mE(a)}return{error:a,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(n=n.catch(i=>{var a;let o="";const l=i?.cause;if(l){var c,d,h,f;const m=(c=l?.message)!==null&&c!==void 0?c:"",g=(d=l?.code)!==null&&d!==void 0?d:"";o=`${(h=i?.name)!==null&&h!==void 0?h:"FetchError"}: ${i?.message}`,o+=`

Caused by: ${(f=l?.name)!==null&&f!==void 0?f:"Error"}: ${m}`,g&&(o+=` (${g})`),l?.stack&&(o+=`
${l.stack}`)}else{var p;o=(p=i?.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(a=i?.name)!==null&&a!==void 0?a:"FetchError"}: ${i?.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}},yE=class extends gE{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:i="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const td=new RegExp("[,()]");var kr=class extends yE{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&td.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&td.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let n="";s==="plain"?n="pl":s==="phrase"?n="ph":s==="websearch"&&(n="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},vE=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:s}=t??{},n=r?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",a),s&&l.append("Prefer",`count=${s}`),new kr({method:n,url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const n="POST",{url:i,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),r||a.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);i.searchParams.set("columns",l.join(","))}}return new kr({method:n,url:i,headers:a,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var i;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&o.searchParams.set("on_conflict",t),s&&l.append("Prefer",`count=${s}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);o.searchParams.set("columns",d.join(","))}}return new kr({method:a,url:o,headers:l,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const s="PATCH",{url:n,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new kr({method:s,url:n,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:s,headers:n}=this.cloneRequestState();return e&&n.append("Prefer",`count=${e}`),new kr({method:r,url:s,headers:n,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},bE=class Bm{constructor(t,{headers:r={},schema:s,fetch:n}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=n}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new vE(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Bm(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:n=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${t}`);let c;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),h=s&&Object.values(r).some(d);h?(o="POST",c=r):s||n?(o=s?"HEAD":"GET",Object.entries(r).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(o="POST",c=r);const f=new Headers(this.headers);return h?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new kr({method:o,url:l,headers:f,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class wE{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const s=r.versions;if(s&&s.node){const n=s.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const xE="2.91.0",_E=`realtime-js/${xE}`,SE="1.0.0",zm="2.0.0",rd=zm,mo=1e4,kE=1e3,EE=100;var Ct;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ct||(Ct={}));var ce;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ce||(ce={}));var Xe;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Xe||(Xe={}));var go;(function(e){e.websocket="websocket"})(go||(go={}));var Jt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Jt||(Jt={}));class TE{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const n=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(t){var r,s;const n=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},a=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,r,s){var n,i;const a=t.topic,o=(n=t.ref)!==null&&n!==void 0?n:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",c=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+c.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,l.length),m.setUint8(g++,o.length),m.setUint8(g++,a.length),m.setUint8(g++,c.length),m.setUint8(g++,h.length),m.setUint8(g++,r),Array.from(l,w=>m.setUint8(g++,w.charCodeAt(0))),Array.from(o,w=>m.setUint8(g++,w.charCodeAt(0))),Array.from(a,w=>m.setUint8(g++,w.charCodeAt(0))),Array.from(c,w=>m.setUint8(g++,w.charCodeAt(0))),Array.from(h,w=>m.setUint8(g++,w.charCodeAt(0)));var y=new Uint8Array(p.byteLength+s.byteLength);return y.set(new Uint8Array(p),0),y.set(new Uint8Array(s),p.byteLength),y.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[n,i,a,o,l]=s;return r({join_ref:n,ref:i,topic:a,event:o,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),n=new TextDecoder;if(s===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,r,n)}_decodeUserBroadcast(t,r,s){const n=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),o=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=s.decode(t.slice(l,l+n));l=l+n;const d=s.decode(t.slice(l,l+i));l=l+i;const h=s.decode(t.slice(l,l+a));l=l+a;const f=t.slice(l,t.byteLength),p=o===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,m={type:this.BROADCAST_EVENT,event:d,payload:p};return a>0&&(m.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class qm{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var W;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(W||(W={}));const sd=(e,t,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=CE(a,e,t,n),i),{}):{}},CE=(e,t,r,s)=>{const n=t.find(o=>o.name===e),i=n?.type,a=r[e];return i&&!s.includes(i)?Hm(i,a):yo(a)},Hm=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return jE(t,r)}switch(e){case W.bool:return AE(t);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return RE(t);case W.json:case W.jsonb:return PE(t);case W.timestamp:return IE(t);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return yo(t);default:return yo(t)}},yo=e=>e,AE=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},RE=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},PE=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},jE=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Hm(t,o))}return e},IE=e=>typeof e=="string"?e.replace(" ","T"):e,Gm=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ia{constructor(t,r,s={},n=mo){this.channel=t,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var nd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(nd||(nd={}));class ps{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ps.syncState(this.state,n,i,a),this.pendingDiffs.forEach(l=>{this.state=ps.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ps.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,n){const i=this.cloneDeep(t),a=this.transformState(r),o={},l={};return this.map(i,(c,d)=>{a[c]||(l[c]=d)}),this.map(a,(c,d)=>{const h=i[c];if(h){const f=d.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),m=d.filter(y=>p.indexOf(y.presence_ref)<0),g=h.filter(y=>f.indexOf(y.presence_ref)<0);m.length>0&&(o[c]=m),g.length>0&&(l[c]=g)}else o[c]=d}),this.syncDiff(i,{joins:o,leaves:l},s,n)}static syncDiff(t,r,s,n){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(o,l)=>{var c;const d=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(l),d.length>0){const h=t[o].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[o].unshift(...f)}s(o,d,l)}),this.map(a,(o,l)=>{let c=t[o];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),t[o]=c,n(o,c,l),c.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const n=t[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var id;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(id||(id={}));var ms;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ms||(ms={}));var ht;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ht||(ht={}));class Rr{constructor(t,r={config:{}},s){var n,i;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ia(this,Xe.join,this.params,this.timeout),this.rejoinTimer=new qm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ce.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xe.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new ps(this),this.broadcastEndpointURL=Gm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ce.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&n!==void 0?n:[],d=!!this.bindings[ms.PRESENCE]&&this.bindings[ms.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t?.(ht.CHANNEL_ERROR,p)),this._onClose(()=>t?.(ht.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t?.(ht.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(m=g?.length)!==null&&m!==void 0?m:0,w=[];for(let x=0;x<y;x++){const v=g[x],{filter:{event:S,schema:k,table:T,filter:C}}=v,_=p&&p[x];if(_&&_.event===S&&Rr.isFilterValueEqual(_.schema,k)&&Rr.isFilterValueEqual(_.table,T)&&Rr.isFilterValueEqual(_.filter,C))w.push(Object.assign(Object.assign({},v),{id:_.id}));else{this.unsubscribe(),this.state=ce.errored,t?.(ht.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(ht.SUBSCRIBED);return}}).receive("error",p=>{this.state=ce.errored,t?.(ht.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t?.(ht.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===ce.joined&&t===ms.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var n;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ce.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xe.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new ia(this,Xe.leave,{},t),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ce.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),a}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new ia(this,t,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>EE){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var n,i;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:c,join:d}=Xe;if(s&&[o,l,c,d].indexOf(a)>=0&&s!==this._joinRef())return;let f=this._onMessage(a,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var m,g,y;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(g=p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(p=>p.callback(f,s)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var m,g,y,w,x,v,S,k;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const T=p.id,C=(m=p.filter)===null||m===void 0?void 0:m.event;return T&&((g=r.ids)===null||g===void 0?void 0:g.includes(T))&&(C==="*"||C?.toLocaleLowerCase()===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))&&(!(!((w=p.filter)===null||w===void 0)&&w.table)||p.filter.table===((x=r.data)===null||x===void 0?void 0:x.table))}else{const T=(S=(v=p?.filter)===null||v===void 0?void 0:v.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return T==="*"||T===((k=r?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:y,commit_timestamp:w,type:x,errors:v}=m;f=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:x,new:{},old:{},errors:v}),this._getPayloadRecords(m))}p.callback(f,s)})}_isClosed(){return this.state===ce.closed}_isJoined(){return this.state===ce.joined}_isJoining(){return this.state===ce.joining}_isLeaving(){return this.state===ce.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const n=t.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Rr.isEqual(n.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Xe.close,{},t)}_onError(t){this._on(Xe.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ce.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=sd(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=sd(t.columns,t.old_record)),r}}const aa=()=>{},nn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},OE=[1e3,2e3,5e3,1e4],NE=1e4,ME=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $E{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mo,this.transport=null,this.heartbeatIntervalMs=nn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=aa,this.ref=0,this.reconnectTimer=null,this.vsn=rd,this.logger=aa,this.conn=null,this.sendBuffer=[],this.serializer=new TE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${go.websocket}`,this.httpEndpoint=Gm(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=wE.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ct.connecting:return Jt.Connecting;case Ct.open:return Jt.Open;case Ct.closing:return Jt.Closing;default:return Jt.Closed}}isConnected(){return this.connectionState()===Jt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new Rr(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:n,ref:i}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(kE,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},nn.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",c)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:n,payload:i,ref:a}=r,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${s} ${n} ${o}`.trim(),i),this.channels.filter(c=>c._isMember(s)).forEach(c=>c._trigger(n,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ct.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ct.open||this.conn.readyState===Ct.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Xe.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${s}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([ME],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:_E};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Xe.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new qm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},nn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,n,i,a,o,l,c,d,h,f,p;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t?.timeout)!==null&&s!==void 0?s:mo,this.heartbeatIntervalMs=(n=t?.heartbeatIntervalMs)!==null&&n!==void 0?n:nn.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t?.heartbeatCallback)!==null&&o!==void 0?o:aa,this.vsn=(l=t?.vsn)!==null&&l!==void 0?l:rd,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t?.reconnectAfterMs)!==null&&c!==void 0?c:(m=>OE[m-1]||NE),this.vsn){case SE:this.encode=(d=t?.encode)!==null&&d!==void 0?d:((m,g)=>g(JSON.stringify(m))),this.decode=(h=t?.decode)!==null&&h!==void 0?h:((m,g)=>g(JSON.parse(m)));break;case zm:this.encode=(f=t?.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Ts=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function DE(e,t,r){const s=new URL(t,e);if(r)for(const[n,i]of Object.entries(r))i!==void 0&&s.searchParams.set(n,i);return s.toString()}async function LE(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function UE(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:n,body:i,headers:a}){const o=DE(e.baseUrl,s,n),l=await LE(e.auth),c=await t(o,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...a},body:i?JSON.stringify(i):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!c.ok){const p=h?f:void 0,m=p?.error;throw new Ts(m?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:m?.type,icebergCode:m?.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function an(e){return e.join("")}var FE=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:an(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${an(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${an(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${an(e.namespace)}`}),!0}catch(t){if(t instanceof Ts&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Ts&&r.status===409)return;throw r}}};function yr(e){return e.join("")}var VE=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${yr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${yr(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${yr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${yr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${yr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${yr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Ts&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Ts&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},BE=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=UE({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new FE(this.client,t),this.tableOps=new VE(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Si=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Z(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var zE=class extends Si{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},vo=class extends Si{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Ul=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qE=()=>Response,bo=e=>{if(Array.isArray(e))return e.map(r=>bo(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=bo(s)}),t},HE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},GE=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function KE(e,t){if(Cs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Cs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WE(e){var t=KE(e,"string");return Cs(t)=="symbol"?t:t+""}function JE(e,t,r){return(t=WE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ad(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ad(Object(r),!0).forEach(function(s){JE(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ad(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const oa=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},YE=async(e,t,r)=>{e instanceof await qE()&&!r?.noResolveJson?e.json().then(s=>{const n=e.status||500,i=s?.statusCode||n+"";t(new zE(oa(s),n,i))}).catch(s=>{t(new vo(oa(s),s))}):t(new vo(oa(e),e))},QE=(e,t,r,s)=>{const n={method:e,headers:t?.headers||{}};return e==="GET"||!s?n:(HE(s)?(n.headers=U({"Content-Type":"application/json"},t?.headers),n.body=JSON.stringify(s)):n.body=s,t?.duplex&&(n.duplex=t.duplex),U(U({},n),r))};async function Bs(e,t,r,s,n,i){return new Promise((a,o)=>{e(r,QE(t,s,n,i)).then(l=>{if(!l.ok)throw l;return s?.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>YE(l,o,s))})}async function As(e,t,r,s){return Bs(e,"GET",t,r,s)}async function Qe(e,t,r,s,n){return Bs(e,"POST",t,s,n,r)}async function wo(e,t,r,s,n){return Bs(e,"PUT",t,s,n,r)}async function XE(e,t,r,s){return Bs(e,"HEAD",t,U(U({},r),{},{noResolveJson:!0}),s)}async function Fl(e,t,r,s,n){return Bs(e,"DELETE",t,s,n,r)}var ZE=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}}};let Km;Km=Symbol.toStringTag;var eT=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Km]="BlobDownloadBuilder",this.promise=null}asStream(){return new ZE(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}}};const tT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},od={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var rT=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ul(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,s){var n=this;try{let i;const a=U(U({},od),s);let o=U(U({},n.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",n.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),l&&!i.has("metadata")&&i.append("metadata",n.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=n.toBase64(n.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),s?.headers&&(o=U(U({},o),s.headers));const c=n._removeEmptyFolders(t),d=n._getFinalPath(c),h=await(e=="PUT"?wo:Qe)(n.fetch,`${n.url}/object/${d}`,i,U({headers:o},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Z(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){var n=this;const i=n._removeEmptyFolders(e),a=n._getFinalPath(i),o=new URL(n.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const c=U({upsert:od.upsert},s),d=U(U({},n.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:i,fullPath:(await wo(n.fetch,o.toString(),l,{headers:d})).Key},error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Z(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var r=this;try{let s=r._getFinalPath(e);const n=U({},r.headers);t?.upsert&&(n["x-upsert"]="true");const i=await Qe(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(r.url+i.url),o=a.searchParams.get("token");if(!o)throw new Si("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var s=this;try{return{data:await Qe(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async copy(e,t,r){var s=this;try{return{data:{path:(await Qe(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:s.headers})).Key},error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async createSignedUrl(e,t,r){var s=this;try{let n=s._getFinalPath(e),i=await Qe(s.fetch,`${s.url}/object/sign/${n}`,U({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:s.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async createSignedUrls(e,t,r){var s=this;try{const n=await Qe(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(a=>U(U({},a),{},{signedUrl:a.signedURL?encodeURI(`${s.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}download(e,t){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),n=s?`?${s}`:"",i=this._getFinalPath(e),a=()=>As(this.fetch,`${this.url}/${r}/${i}${n}`,{headers:this.headers,noResolveJson:!0});return new eT(a,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:bo(await As(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await XE(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Z(s)&&s instanceof vo){const n=s.originalError;if([400,404].includes(n?.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],n=t?.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&s.push(n);const i=typeof t?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(t?.transform||{});a!==""&&s.push(a);let o=s.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${o}`)}}}async remove(e){var t=this;try{return{data:await Fl(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async list(e,t,r){var s=this;try{const n=U(U(U({},tT),t),{},{prefix:e||""});return{data:await Qe(s.fetch,`${s.url}/object/list/${s.bucketId}`,n,{headers:s.headers},r),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async listV2(e,t){var r=this;try{const s=U({},e);return{data:await Qe(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},t),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Wm="2.91.0",Jm={"X-Client-Info":`storage-js/${Wm}`};var sT=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const n=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href.replace(/\/$/,""),this.headers=U(U({},Jm),t),this.fetch=Ul(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await As(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await As(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Qe(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async updateBucket(e,t){var r=this;try{return{data:await wo(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async emptyBucket(e){var t=this;try{return{data:await Qe(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Fl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},nT=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Jm),t),this.fetch=Ul(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Qe(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const s=r.toString(),n=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await As(t.fetch,n,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Fl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!GE(e))throw new Si("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new BE({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(n,i){const a=n[i];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(n,o),error:null}}catch(l){if(s)throw l;return{data:null,error:l}}}}})}};const Vl={"X-Client-Info":`storage-js/${Wm}`,"Content-Type":"application/json"};var Ym=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function $e(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var la=class extends Ym{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},iT=class extends Ym{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Bl=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),aT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ld=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oT=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const s=e.status||500,n=e;if(typeof n.json=="function")n.json().then(i=>{const a=i?.statusCode||i?.code||s+"";t(new la(ld(i),s,a))}).catch(()=>{const i=s+"";t(new la(n.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";t(new la(n.statusText||`HTTP ${s} error`,s,i))}}else t(new iT(ld(e),e))},lT=(e,t,r,s)=>{const n={method:e,headers:t?.headers||{}};return s?(aT(s)?(n.headers=U({"Content-Type":"application/json"},t?.headers),n.body=JSON.stringify(s)):n.body=s,U(U({},n),r)):n};async function cT(e,t,r,s,n,i){return new Promise((a,o)=>{e(r,lT(t,s,n,i)).then(l=>{if(!l.ok)throw l;if(s?.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>oT(l,o,s))})}async function De(e,t,r,s,n){return cT(e,"POST",t,s,n,r)}var uT=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Vl),t),this.fetch=Bl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await De(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async listIndexes(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await De(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}},dT=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Vl),t),this.fetch=Bl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await De(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await De(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await De(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}},hT=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Vl),t),this.fetch=Bl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await De(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}},fT=class extends hT{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new pT(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},pT=class extends uT{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new mT(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},mT=class extends dT{constructor(e,t,r,s,n){super(e,t,n),this.vectorBucketName=r,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},gT=class extends sT{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new rT(this.url,this.headers,e,this.fetch)}get vectors(){return new fT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new nT(this.url+"/iceberg",this.headers,this.fetch)}};const Qm="2.91.0",Er=30*1e3,xo=3,ca=xo*Er,yT="http://localhost:9999",vT="supabase.auth.token",bT={"X-Client-Info":`gotrue-js/${Qm}`},_o="X-Supabase-Api-Version",Xm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xT=600*1e3;class Rs extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function $(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _T extends Rs{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function ST(e){return $(e)&&e.name==="AuthApiError"}class Yt extends Rs{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class xt extends Rs{constructor(t,r,s,n){super(t,s,n),this.name=r,this.status=s}}class Ne extends xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kT(e){return $(e)&&e.name==="AuthSessionMissingError"}class vr extends xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class on extends xt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ln extends xt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ET(e){return $(e)&&e.name==="AuthImplicitGrantRedirectError"}class cd extends xt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class TT extends xt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class So extends xt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ua(e){return $(e)&&e.name==="AuthRetryableFetchError"}class ud extends xt{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class ko extends xt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dd=` 	
\r=`.split(""),CT=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dd.length;t+=1)e[dd[t].charCodeAt(0)]=-2;for(let t=0;t<qn.length;t+=1)e[qn[t].charCodeAt(0)]=t;return e})();function hd(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(qn[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(qn[s]),t.queuedBits-=6}}function Zm(e,t,r){const s=CT[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fd(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{PT(a,s,r)};for(let a=0;a<e.length;a+=1)Zm(e.charCodeAt(a),n,i);return t.join("")}function AT(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function RT(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}AT(s,t)}}function PT(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Lr(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Zm(e.charCodeAt(n),r,s);return new Uint8Array(t)}function jT(e){const t=[];return RT(e,r=>t.push(r)),new Uint8Array(t)}function Zt(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>hd(n,r,s)),hd(null,r,s),t.join("")}function IT(e){return Math.round(Date.now()/1e3)+e}function OT(){return Symbol("auth-callback")}const we=()=>typeof window<"u"&&typeof document<"u",Bt={tested:!1,writable:!1},eg=()=>{if(!we())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bt.tested)return Bt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Bt.tested=!0,Bt.writable=!0}catch{Bt.tested=!0,Bt.writable=!1}return Bt.writable};function NT(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{t[n]=s}),t}const tg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),MT=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Tr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},zt=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},be=async(e,t)=>{await e.removeItem(t)};class ki{constructor(){this.promise=new ki.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ki.promiseConstructor=Promise;function da(e){const t=e.split(".");if(t.length!==3)throw new ko("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!wT.test(t[s]))throw new ko("JWT not in base64url format");return{header:JSON.parse(fd(t[0])),payload:JSON.parse(fd(t[1])),signature:Lr(t[2]),raw:{header:t[0],payload:t[1]}}}async function $T(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function DT(e,t){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){s(a);return}}catch(a){if(!t(i,a)){n(a);return}}})()})}function LT(e){return("0"+e.toString(16)).substr(-2)}function UT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,LT).join("")}async function FT(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function VT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await FT(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function br(e,t,r=!1){const s=UT();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Tr(e,`${t}-code-verifier`,n);const i=await VT(s);return[i,s===i?"plain":"s256"]}const BT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zT(e){const t=e.headers.get(_o);if(!t||!t.match(BT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function qT(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function HT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const GT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wr(e){if(!GT.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ha(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function KT(e,t){return new Proxy(e,{get:(r,s,n)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,n)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,n)}})}function pd(e){return JSON.parse(JSON.stringify(e))}const Kt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),WT=[502,503,504];async function md(e){var t;if(!MT(e))throw new So(Kt(e),0);if(WT.includes(e.status))throw new So(Kt(e),e.status);let r;try{r=await e.json()}catch(i){throw new Yt(Kt(i),i)}let s;const n=zT(e);if(n&&n.getTime()>=Xm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new ud(Kt(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Ne}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new ud(Kt(r),e.status,r.weak_password.reasons);throw new _T(Kt(r),e.status||500,s)}const JT=(e,t,r,s)=>{const n={method:e,headers:t?.headers||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function L(e,t,r,s){var n;const i=Object.assign({},s?.headers);i[_o]||(i[_o]=Xm["2024-01-01"].name),s?.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s?.query)!==null&&n!==void 0?n:{};s?.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await YT(e,t,r+o,{headers:i,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(l):{data:Object.assign({},l),error:null}}async function YT(e,t,r,s,n,i){const a=JT(t,s,n,i);let o;try{o=await e(r,Object.assign({},a))}catch(l){throw console.error(l),new So(Kt(l),0)}if(o.ok||await md(o),s?.noResolveJson)return o;try{return await o.json()}catch(l){await md(l)}}function Je(e){var t;let r=null;ZT(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=IT(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function gd(e){const t=Je(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function At(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function QT(e){return{data:e,error:null}}function XT(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=e,a=pi(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function yd(e){return e}function ZT(e){return e.access_token&&e.refresh_token&&e.expires_in}const fa=["global","local","others"];class e1{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=tg(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=fa[0]){if(fa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fa.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if($(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:At})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=pi(t,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s?.newEmail,delete n.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:XT,redirectTo:r?.redirectTo})}catch(r){if($(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:At})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,n,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:yd});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if($(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){wr(t);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:At})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){wr(t);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:At})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){wr(t);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:At})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){wr(t.userId);try{const{data:r,error:s}=await L(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if($(r))return{data:null,error:r};throw r}}async _deleteFactor(t){wr(t.userId),wr(t.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,n,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await L(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:yd});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if($(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await L(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await L(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if($(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await L(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}}function vd(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const xr={debug:!!(globalThis&&eg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class t1 extends rg{}async function r1(e,t,r){xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),xr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new t1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function s1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function n1(e){return parseInt(e,16)}function i1(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function a1(e){var t;const{chainId:r,domain:s,expirationTime:n,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=sg(e.address),m=d?`${d}://${s}`:s,g=e.statement?`${e.statement}
`:"",y=`${m} wants you to sign in with your Ethereum account:
${p}

${g}`;let w=`URI: ${h}
Version: ${f}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(n&&(w+=`
Expiration Time: ${n.toISOString()}`),o&&(w+=`
Not Before: ${o.toISOString()}`),l&&(w+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);x+=`
- ${v}`}w+=x}return`${y}
${w}`}class ie extends Error{constructor({message:t,code:r,cause:s,name:n}){var i;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=n??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Hn extends ie{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function o1({error:e,options:t}){var r,s,n;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ie({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ie({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ie({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ie({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ie({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ie({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new ie({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ie({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(ng(a)){if(i.rp.id!==a)return new ie({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ie({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ie({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function l1({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ie({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ie({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(ng(s)){if(r.rpId!==s)return new ie({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ie({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class c1{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const u1=new c1;function d1(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,n=pi(e,["challenge","user","excludeCredentials"]),i=Lr(t).buffer,a=Object.assign(Object.assign({},r),{id:Lr(r.id).buffer}),o=Object.assign(Object.assign({},n),{challenge:i,user:a});if(s&&s.length>0){o.excludeCredentials=new Array(s.length);for(let l=0;l<s.length;l++){const c=s[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Lr(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function h1(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=pi(e,["challenge","allowCredentials"]),n=Lr(t).buffer,i=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const o=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Lr(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function f1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Zt(new Uint8Array(e.response.attestationObject)),clientDataJSON:Zt(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function p1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),n=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Zt(new Uint8Array(n.authenticatorData)),clientDataJSON:Zt(new Uint8Array(n.clientDataJSON)),signature:Zt(new Uint8Array(n.signature)),userHandle:n.userHandle?Zt(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ng(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function bd(){var e,t;return!!(we()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function m1(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Hn("Browser returned unexpected credential type",t)}:{data:null,error:new Hn("Empty credential response",t)}}catch(t){return{data:null,error:o1({error:t,options:e})}}}async function g1(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Hn("Browser returned unexpected credential type",t)}:{data:null,error:new Hn("Empty credential response",t)}}catch(t){return{data:null,error:l1({error:t,options:e})}}}const y1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},v1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Gn(...e){const t=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),r=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),s={};for(const n of e)if(n)for(const i in n){const a=n[i];if(a!==void 0)if(Array.isArray(a))s[i]=a;else if(r(a))s[i]=a;else if(t(a)){const o=s[i];t(o)?s[i]=Gn(o,a):s[i]=Gn(a)}else s[i]=a}return s}function b1(e,t){return Gn(y1,e,t||{})}function w1(e,t){return Gn(v1,e,t||{})}class x1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:n},i){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!a)return{data:null,error:o};const l=n??u1.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${s}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=b1(a.webauthn.credential_options.publicKey,i?.create),{data:d,error:h}=await m1({publicKey:c,signal:l});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=w1(a.webauthn.credential_options.publicKey,i?.request),{data:d,error:h}=await g1(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return $(a)?{data:null,error:a}:{data:null,error:new Yt("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!r)return{data:null,error:new Rs("rpId is required for WebAuthn authentication")};try{if(!bd())return{data:null,error:new Yt("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:n},{request:i});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:s,credential_response:l.credential_response}})}catch(a){return $(a)?{data:null,error:a}:{data:null,error:new Yt("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!r)return{data:null,error:new Rs("rpId is required for WebAuthn registration")};try{if(!bd())return{data:null,error:new Yt("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d?.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:n},{create:i});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:s,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return $(a)?{data:null,error:a}:{data:null,error:new Yt("Unexpected error in register",a)}}}}s1();const _1={url:yT,storageKey:vT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function wd(e,t,r){return await r()}const _r={};class Ps{get jwks(){var t,r;return(r=(t=_r[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){_r[this.storageKey]=Object.assign(Object.assign({},_r[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=_r[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){_r[this.storageKey]=Object.assign(Object.assign({},_r[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},_1),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Ps.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ps.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&we()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new e1({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=tg(i.fetch),this.lock=i.lock||wd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&we()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=r1:this.lock=wd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new x1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:eg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vd(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=vd(this.memoryStorage)),we()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Qm}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(we()&&(r=NT(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),we()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ET(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return $(r)?this._returnResult({error:r}):this._returnResult({error:new Yt("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,n;try{const i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t?.options)===null||n===void 0?void 0:n.captchaToken}},xform:Je}),{data:a,error:o}=i;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if($(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,s,n;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await br(this.storage,this.storageKey)),i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:m},xform:Je})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(n=f?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Je})}else throw new on("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return await be(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await be(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:o}=t;r=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:gd})}else if("phone"in t){const{phone:i,password:a,options:o}=t;r=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:gd})}else throw new on("You must provide either an email or phone number and a password");const{data:s,error:n}=r;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!s||!s.session||!s.user){const i=new vr;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,n,i,a,o,l,c,d,h,f;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:g,wallet:y,statement:w,options:x}=t;let v;if(we())if(typeof y=="object")v=y;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")v=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const S=new URL((r=x?.url)!==null&&r!==void 0?r:window.location.href),k=await v.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=sg(k[0]);let C=(s=x?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!C){const A=await v.request({method:"eth_chainId"});C=n1(A)}const _={domain:S.host,address:T,statement:w,uri:S.href,version:"1",chainId:C,nonce:(n=x?.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(a=(i=x?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=x?.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=x?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=x?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=a1(_),m=await v.request({method:"personal_sign",params:[i1(p),T]})}try{const{data:g,error:y}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Je});if(y)throw y;if(!g||!g.session||!g.user){const w=new vr;return this._returnResult({data:{user:null,session:null},error:w})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if($(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,s,n,i,a,o,l,c,d,h,f,p;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:y,wallet:w,statement:x,options:v}=t;let S;if(we())if(typeof w=="object")S=w;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))S=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=w}const k=new URL((r=v?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const T=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),x?{statement:x}:null));let C;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")C=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)C=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)m=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${k.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(n=(s=v?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=v?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((o=v?.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const T=await S.signMessage(new TextEncoder().encode(m),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=T}}try{const{data:y,error:w}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Zt(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Je});if(w)throw w;if(!y||!y.session||!y.user){const x=new vr;return this._returnResult({data:{user:null,session:null},error:x})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if($(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){const r=await zt(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new TT;const{data:i,error:a}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Je});if(await be(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const o=new vr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",i.session)},0)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(await be(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:n,access_token:i,nonce:a}=t,o=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Je}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new vr;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,n,i,a;try{if("email"in t){const{email:o,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await br(this.storage,this.storageKey));const{error:h}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:o,options:l}=t,{data:c,error:d}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:d})}throw new on("You must provide either an email or phone number.")}catch(o){if(await be(this.storage,`${this.storageKey}-code-verifier`),$(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,s;try{let n,i;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Je});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(n){if($(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(t){var r,s,n,i,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await br(this.storage,this.storageKey));const c=await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:QT});return!((i=c.data)===null||i===void 0)&&i.url&&we()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await be(this.storage,`${this.storageKey}-code-verifier`),$(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Ne;const{error:n}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(t){if($(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:i}=t,{error:a}=await L(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:s,type:n,options:i}=t,{data:a,error:o}=await L(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:o})}throw new on("You must provide either an email or phone number and a type")}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await zt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<ca:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const a=await zt(this.userStorage,this.storageKey+"-user");a?.user?t.user=a.user:t.user=ha()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=KT(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:At}):await this._useSession(async r=>{var s,n,i;const{data:a,error:o}=r;if(o)throw o;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ne}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:At})})}catch(r){if($(r))return kT(r)&&(await this._removeSession(),await be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Ne;const a=n.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await br(this.storage,this.storageKey));const{data:c,error:d}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:At});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(s){if(await be(this.storage,`${this.storageKey}-code-verifier`),$(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ne;const r=Date.now()/1e3;let s=r,n=!0,i=null;const{payload:a}=da(t.access_token);if(a.exp&&(s=a.exp,n=s<=r),n){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if($(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:a,error:o}=r;if(o)throw o;t=(s=a.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new Ne;const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!we())throw new ln("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ln(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new cd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ln("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new cd("No code detected.");const{data:x,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=t;if(!i||!o||!a||!c)throw new ln("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Er&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:t.type},error:null})}catch(s){if($(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await zt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({error:i});const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(ST(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=OT(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:a}=r;if(a)throw a;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await br(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await be(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var a,o,l,c,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return we()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:t.provider,url:s?.url},error:null})}catch(s){if($(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:n,data:{session:i}}=r;if(n)throw n;const{options:a,provider:o,token:l,access_token:c,nonce:d}=t,h=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:o,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Je}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new vr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(n){if(await be(this.storage,`${this.storageKey}-code-verifier`),$(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,n;const{data:i,error:a}=r;if(a)throw a;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await DT(async n=>(n>0&&await $T(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Je})),(n,i)=>{const a=200*Math.pow(2,n);return i&&ua(i)&&Date.now()+a-s<Er})}catch(s){if(this._debug(r,"error",s),$(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),we()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await zt(this.storage,this.storageKey);if(n&&this.userStorage){let a=await zt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:n.user},await Tr(this.userStorage,this.storageKey+"-user",a)),n.user=(t=a?.user)!==null&&t!==void 0?t:ha()}else if(n&&!n.user&&!n.user){const a=await zt(this.storage,this.storageKey+"-user");a&&a?.user?(n.user=a.user,await be(this.storage,this.storageKey+"-user"),await Tr(this.storage,this.storageKey,n)):n.user=ha()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ca;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${ca}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),ua(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(n.access_token);!o&&a?.user?(n.user=a.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(s,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Ne;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ki;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Ne;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),$(i)){const a={data:null,error:i};return ua(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await be(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Tr(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const i=pd(n);await Tr(this.storage,this.storageKey,i)}else{const n=pd(r);await Tr(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await be(this.storage,this.storageKey),await be(this.storage,this.storageKey+"-code-verifier"),await be(this.storage,this.storageKey+"-user"),this.userStorage&&await be(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&we()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Er);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/Er);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Er}ms, refresh threshold is ${xo} ticks`),n<=xo&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!we()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await br(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(s?.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s?.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?this._returnResult({data:null,error:i}):await L(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await L(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((n=l?.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?f1(t.webauthn.credential_response):p1(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await L(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await L(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d1(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:h1(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=da(s.access_token);let a=null;i.aal&&(a=i.aal);let o=a;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?await L(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ne})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ne});const a=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&we()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ne});const a=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&we()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await L(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new Ne})})}catch(t){if($(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?(await L(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ne})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(o=>o.kid===t);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(o=>o.kid===t),s&&this.jwks_cached_at+xT>n)return s;const{data:i,error:a}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,s=i.keys.find(o=>o.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});s=p.session.access_token}const{header:n,payload:i,signature:a,raw:{header:o,payload:l}}=da(s);r?.allowExpired||qT(i.exp);const c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!c){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:n,signature:a},error:null}}const d=HT(n.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,jT(`${o}.${l}`)))throw new ko("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}}Ps.nextInstanceID={};const S1=Ps,k1="2.91.0";let ls="";typeof Deno<"u"?ls="deno":typeof document<"u"?ls="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ls="react-native":ls="node";const E1={"X-Client-Info":`supabase-js-${ls}/${k1}`},T1={headers:E1},C1={schema:"public"},A1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},R1={};function js(e){"@babel/helpers - typeof";return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},js(e)}function P1(e,t){if(js(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(js(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j1(e){var t=P1(e,"string");return js(t)=="symbol"?t:t+""}function I1(e,t,r){return(t=j1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xd(Object(r),!0).forEach(function(s){I1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xd(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const O1=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),N1=()=>Headers,M1=(e,t,r)=>{const s=O1(r),n=N1();return async(i,a)=>{var o;const l=(o=await t())!==null&&o!==void 0?o:e;let c=new n(a?.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(i,re(re({},a),{},{headers:c}))}};function $1(e){return e.endsWith("/")?e:e+"/"}function D1(e,t){var r,s;const{db:n,auth:i,realtime:a,global:o}=e,{db:l,auth:c,realtime:d,global:h}=t,f={db:re(re({},l),n),auth:re(re({},c),i),realtime:re(re({},d),a),storage:{},global:re(re(re({},h),o),{},{headers:re(re({},(r=h?.headers)!==null&&r!==void 0?r:{}),(s=o?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function L1(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($1(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var U1=class extends S1{constructor(e){super(e)}},F1=class{constructor(e,t,r){var s,n;this.supabaseUrl=e,this.supabaseKey=t;const i=L1(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,o={db:C1,realtime:R1,auth:re(re({},A1),{},{storageKey:a}),global:T1},l=D1(r??{},o);if(this.storageKey=(s=l.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(n=l.global.headers)!==null&&n!==void 0?n:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=M1(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(re({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new bE(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new gT(this.storageUrl.href,this.headers,this.fetch,r?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new pE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,storageKey:i,flowType:a,lock:o,debug:l,throwOnError:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new U1({url:this.authUrl.href,headers:re(re({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,flowType:a,lock:o,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new $E(this.realtimeUrl.href,re(re({},e),{},{params:re(re({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const V1=(e,t,r)=>new F1(e,t,r);function B1(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}B1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const z1="https://dizzjfijsmxdlnfqydfk.supabase.co",q1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpenpqZmlqc214ZGxuZnF5ZGZrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5Njg4MTIsImV4cCI6MjA4MjU0NDgxMn0.Hh--yKp8SBLbY7EgQVGJ63vwc5XQlO86LghZCGAKVl4",H1=V1(z1,q1),ig=async(e,t=.5,r=3)=>{const{data:s,error:n}=await H1.rpc("match_inventory",{query_embedding:e,match_threshold:t,match_count:r});return n?(console.error("Error in semantic search:",n),[]):s},G1=async e=>{try{const t=qr(fe,"usage_logs");await Hr(t,{...e,timestamp:Gr()})}catch(t){console.error("Billing Log Error:",t)}},K1=e=>e/1e3*.002,lt=()=>{const e="AIzaSyDm1uXN61V7OI-iRh_Dxbyo-dfDR4u5hYU";return new dE(e)},pa={suv:"Tenemos excelentes SUVs como la Hyundai Tucson y Santa Fe. Te gustara ver detalles de alguna?",precio:"Nuestros precios son muy competitivos y transparentes. Buscas algo en un rango especfico?",oferta:"S, tenemos ofertas especiales de 0% APR en modelos seleccionados. Pregntame por la Santa Fe!",financiamiento:"Trabajamos con todos los bancos locales. Te gustara pre-cualificar ahora mismo?",horario:"Estamos abiertos de Lunes a Sbado de 9am a 6pm. Te esperamos!",telefono:"Puedes llamarnos al 787-368-2880 para atencin inmediata.","test drive":"Claro! Podemos agendar tu prueba de manejo hoy mismo. Qu modelo te interesa?",default:"Lo siento, mi conexin con el cerebro central est un poco lenta. Pero estoy aqu para ayudarte. Puedes intentar preguntar de otra forma o llamar al 787-368-2880?"},W1=e=>{const t=(e||"").toLowerCase();for(const r in pa)if(t.includes(r))return pa[r];return pa.default},ag=async(e,t,r=[],s)=>{const n=t.reduce((c,d)=>{const h=d.type||"Otros";return c[h]||(c[h]=[]),c[h].push(`- ${d.name}: $${(d.price||0).toLocaleString()} ${d.badge?`[${d.badge}]`:""}`),c},{});let i="";try{const h=await lt().getGenerativeModel({model:"text-embedding-004"}).embedContent(e),f=await ig(h.embedding.values);f.length>0&&(i=`
 COINCIDENCIAS RELEVANTES ENCONTRADAS:
`+f.map(p=>`- ${p.car_name}: ${p.content}`).join(`
`))}catch(c){console.warn("Semantic Search failed, falling back to basic inventory:",c)}const a=Object.entries(n).map(([c,d])=>` ${c.toUpperCase()}:
${d.join(`
`)}`).join(`

`)+i,o=r.map(c=>`${c.role==="user"?"CLIENTE":"AGENTE"}: ${c.text}`).join(`
`),l=s||`
    Eres "Richard IA", el consultor experto de ventas de Richard Automotive en Puerto Rico.
    Tu objetivo es agendar una prueba de manejo o venta.
    
    INVENTARIO ORGANIZADO:
    ${a||"No hay inventario disponible."}
    
    HISTORIAL:
    ${o}
    
    INSTRUCCIONES DE MARKETING PROACTIVO:
    1. S emptico y profesional. Usa emojis con moderacin.
    2. Responde SIEMPRE en espaol.
    3. CTA DINMICO: Si detectas inters serio, termina con: https://wa.me/17873682880?text=Hola
    4. Si no tenemos lo que busca, ofrece la opcin ms cercana.
  `;try{const f=(await(await lt().getGenerativeModel({model:"gemini-2.0-flash",systemInstruction:l}).generateContent(e)).response).text(),p=localStorage.getItem("current_dealer_id")||"richard-automotive",m=(e.length+f.length+l.length)/4;return G1({dealerId:p,eventType:"ai_call",count:m,costEstimate:K1(m),metadata:{model:"gemini-2.0-flash",promptLength:e.length}}),f}catch(c){return console.warn("Gemini Error:",c),W1(e)}},J1=async e=>{const r=`
    Analiza este garaje: ${e.map(s=>`${s.name} ($${s.price})`).join(", ")}.
    
    TASK:
    1. Identify the user's spending power and lifestyle based on cars.
    2. Suggest 1 actionable improvement or trade-in.
    
    OUTPUT FORMAT:
    HTML simple (sin markdown block), use <p>, <strong>, <ul>.
  `;try{return(await lt().getGenerativeModel({model:"gemini-2.0-flash"}).generateContent(r)).response.text()}catch{return"<p>Error de conexin con el asesor IA.</p>"}},og=async(e,t)=>{if(!t||t.length===0)return{persona:"Analista de Datos",matches:[]};const r=t.map(n=>({id:n.id,name:n.name,price:n.price,type:n.type})),s=`
    User Profile: "${e}". 
    Inventory: ${JSON.stringify(r)}.
    
    TASK:
    1. Analyze user needs (Reasoning).
    2. Match top 3 cars.
    3. Assign 0-100 score.
    
    RETURN JSON ONLY:
    {
      "reasoning": "string analyzing the user",
      "persona": "Creative Persona Name (e.g. 'Fantico de la Velocidad')",
      "matches": [
         { "carId": "id", "score": 95, "reason": "Why this matches" }
      ]
    }
  `;try{const a=(await lt().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(s)).response.text();return JSON.parse(a)}catch{return{persona:"Error de Anlisis",matches:[]}}},lg=async(e,t)=>{const r=`
    Compare ${e.name} vs ${t.name}.
    
    RETURN JSON ONLY:
    {
        "winnerId": "string (id of winner)",
        "reasoning": "Chain of thought explanation",
        "verdict": "Short final verdict",
        "categories": [
            { "name": "Potencia", "winner": "${e.name} or ${t.name}", "detail": "explanation" },
            { "name": "Economa", "winner": "...", "detail": "..." },
            { "name": "Confort", "winner": "...", "detail": "..." },
            { "name": "Tecnologa", "winner": "...", "detail": "..." }
        ]
    }
  `,n=await lt().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(r);return JSON.parse(n.response.text())},cg=async e=>{try{const t=lt().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}),s={inlineData:{data:e.replace(/^data:image\/\w+;base64,/,""),mimeType:"image/jpeg"}},i=await t.generateContent([`
        Analiza esta imagen de un vehculo.
        RETURN JSON ONLY:
        {
            "type": "SUV | Sedan | Truck | Coupe",
            "keywords": ["tag1", "tag2", "tag3"],
            "description": "Professional automated description.",
            "search_query": "Marca y modelo probable o descripcin fsica para bsqueda en inventario"
        }
    `,s]);return JSON.parse(i.response.text())}catch{throw new Error("No pudimos identificar el vehculo.")}},ug=async e=>{const t=`
    Role: Senior Sales Executive.
    Product: ${e.name}, Price: $${e.price}, Type: ${e.type}.
    Task: Write a short, punchy, persuasive 1-paragraph pitch (HTML <p>) to sell this specific car.
    Focus on value and emotion. Spanish.
    
    RETURN JSON ONLY:
    {
       "reasoning": "Internal thought process",
       "pitch": "Final sales pitch text"
    }
  `;try{const s=await lt().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}).generateContent(t);return JSON.parse(s.response.text()).pitch||`Este ${e.name} es una oportunidad nica!`}catch{return`Este ${e.name} es increble! Ven a verlo hoy mismo.`}},Y1=async e=>{const t=lt().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}),r=`Write blog post about ${e}. JSON: { title, excerpt, content, tags }.`;try{const s=await t.generateContent(r),n=JSON.parse(s.response.text());return{id:Date.now().toString(),title:n.title,excerpt:n.excerpt,content:n.content,author:"Richard AI",date:new Date().toLocaleDateString(),imageUrl:"https://images.unsplash.com/photo-1492144534655-ae79c964c9d7",tags:n.tags}}catch{throw new Error("Blog Gen Error")}},Q1=async e=>{try{const t=lt().getGenerativeModel({model:"gemini-2.0-flash",generationConfig:{responseMimeType:"application/json"}}),r=e.map(i=>({inlineData:{data:i.replace(/^data:image\/\w+;base64,/,""),mimeType:"image/jpeg"}})),n=await t.generateContent([`
            Analyze these vehicle images for trade-in valuation.
            RETURN JSON ONLY:
            {
                "condition": "Excellent | Good | Fair | Poor",
                "defects": ["scratch on bumper", "dent on door"],
                "estimatedValueAdjustment": 0.95 (multiplier),
                "reasoning": "Chain of thought analysis of visible condition"
            }
        `,...r]);return JSON.parse(n.response.text())}catch{return{condition:"Good",defects:[],estimatedValueAdjustment:1,reasoning:"Error"}}},X1=async e=>{try{const r=await lt().getGenerativeModel({model:"text-embedding-004"}).embedContent(e);return await ig(r.embedding.values)}catch(t){return console.error("Unified semantic search failed:",t),[]}},Z1=Object.freeze(Object.defineProperty({__proto__:null,analyzeCarImage:cg,analyzeGarageSelection:J1,analyzeTradeInImages:Q1,calculateNeuralMatch:og,compareCars:lg,generateBlogPost:Y1,generateCarPitch:ug,getAIResponse:ag,searchSemanticInventoryByText:X1},Symbol.toStringTag,{value:"Module"})),eC=({car:e,onClose:t})=>{const[r,s]=b.useState(0),[n,i]=b.useState(0),[a,o]=b.useState(84),[l,c]=b.useState(.059),[d,h]=b.useState(0),[f,p]=b.useState("calculator"),[m,g]=b.useState(""),[y,w]=b.useState(!1),[x,v]=b.useState({}),S=K.useMemo(()=>{const E=r===""?0:r,P=n===""?0:n,M=Math.max(0,e.price-E-P);if(M<=0)return 0;const V=l/12;if(V===0)return Math.round(M/a);const Q=V*Math.pow(1+V,a),F=Math.pow(1+V,a)-1;return Math.round(M*(Q/F))},[r,n,a,l,e.price]),k=b.useRef(null);b.useEffect(()=>{const E=document.activeElement;k.current&&k.current.focus();const P=M=>{M.key==="Escape"&&t()};return document.addEventListener("keydown",P),()=>{document.removeEventListener("keydown",P),E?.focus()}},[t]);const T=E=>{p(E),E==="insight"&&!m&&!y&&(w(!0),ug(e).then(P=>g(P)).catch(()=>g("No pudimos conectar con Richard IA en este momento.")).finally(()=>w(!1)))},C=()=>{const E={};let P=!0;return r===""?(E.downPayment="Este campo es obligatorio.",P=!1):r<0&&(E.downPayment="El valor no puede ser negativo.",P=!1),v(E),P},_=()=>{if(f!=="calculator"&&T("calculator"),!C()){const M=document.getElementById("calculator-form");M?.classList.add("animate-shake"),setTimeout(()=>M?.classList.remove("animate-shake"),500);return}const E=r===""?0:r,P=n===""?0:n;window.open(`https://wa.me/17873682880?text=Hola, vi el anlisis de IA del ${e.name}. Me interesa con un pago estimado de $${S}/mes (Pronto: $${E}, TradeIn: $${P}, Trmino: ${a} meses).`,"_blank")},A=async()=>{const E={title:`Mira este ${e.name}`,text:`Encontr este ${e.name} en Richard Automotive! Precio: $${e.price.toLocaleString()}`,url:window.location.href};if(navigator.share)try{await navigator.share(E)}catch{}else{const P=`https://wa.me/?text=${encodeURIComponent(E.text)}`;window.open(P,"_blank")}};return u.jsxs("div",{ref:k,tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":"car-modal-title",className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0d2232]/80 backdrop-blur-xl animate-in fade-in",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-[40px] md:rounded-[60px] shadow-2xl p-4 md:p-6 relative flex flex-col lg:flex-row gap-6 overflow-hidden",children:[u.jsxs("div",{className:"absolute top-6 right-6 lg:top-8 lg:right-8 z-20 flex gap-2",children:[u.jsx("button",{onClick:A,className:"w-10 h-10 lg:w-12 lg:h-12 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md rounded-full flex items-center justify-center text-slate-500 dark:text-slate-300 hover:bg-[#00aed9] hover:text-white transition-all shadow-lg",title:"Compartir en Redes",children:u.jsx(Tk,{size:20})}),u.jsx("button",{onClick:t,"aria-label":"Cerrar modal",className:"w-10 h-10 lg:w-12 lg:h-12 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md rounded-full flex items-center justify-center text-slate-500 dark:text-slate-300 hover:bg-rose-500 hover:text-white transition-all shadow-lg",children:u.jsx(vt,{size:20})})]}),u.jsxs("div",{className:"w-full lg:w-3/5 h-1/3 lg:h-full bg-white dark:bg-slate-800 rounded-[35px] lg:rounded-[45px] flex items-center justify-center p-8 lg:p-12 relative overflow-hidden group border border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"absolute inset-0 bg-slate-50/50 dark:bg-slate-900/20"}),u.jsx("img",{src:e.img,alt:e.name,loading:"lazy",decoding:"async",className:"relative z-10 max-w-full max-h-full object-contain transition-transform duration-700 group-hover:scale-105"}),e.badge&&u.jsx("div",{className:"absolute top-6 left-6 lg:top-8 lg:left-8 bg-[#00aed9] text-white px-4 py-2 rounded-full text-[10px] lg:text-xs font-black uppercase tracking-widest shadow-xl z-10",children:e.badge})]}),u.jsxs("div",{className:"w-full lg:w-2/5 flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"mb-6 px-2",children:[u.jsx("span",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-[0.3em]",children:e.type}),u.jsx("h2",{id:"car-modal-title",className:"text-3xl lg:text-4xl font-black text-slate-800 dark:text-white tracking-tighter leading-tight mt-1",children:e.name}),u.jsxs("p",{className:"text-xl font-bold text-slate-500 dark:text-slate-400 mt-2",children:["$",e.price.toLocaleString()]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 lg:p-8 rounded-[35px] text-center shadow-lg dark:shadow-none border border-slate-100 dark:border-slate-700 mb-6 shrink-0 transition-all",children:[u.jsxs("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center justify-center gap-2",children:[u.jsx(QS,{size:14})," Pago Mensual Estimado"]}),u.jsxs("div",{className:"text-5xl lg:text-6xl font-black premium-gradient text-transparent bg-clip-text tracking-tighter my-2",children:["$",S]})]}),u.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-800 p-1.5 rounded-2xl mb-4 shrink-0",children:[u.jsx("button",{onClick:()=>T("calculator"),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${f==="calculator"?"bg-white dark:bg-slate-600 text-[#00aed9] shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:"Calculadora"}),u.jsxs("button",{onClick:()=>T("insight"),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${f==="insight"?"bg-white dark:bg-slate-600 text-[#00aed9] shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[u.jsx(Ss,{size:14})," Richard's Insight"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:f==="calculator"?u.jsxs("div",{id:"calculator-form",className:"space-y-6 pb-4 animate-in fade-in slide-in-from-bottom-2",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{htmlFor:"downPaymentInput",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[u.jsx(WS,{size:12})," Pronto ($) ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{id:"downPaymentInput",type:"number",min:"0",max:e.price,required:!0,value:r,onChange:E=>{s(E.target.value===""?"":Number(E.target.value)),x.downPayment&&v(P=>({...P,downPayment:void 0}))},className:`w-full px-5 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-2 rounded-[20px] text-lg font-bold outline-none transition-all placeholder:text-slate-300 
                                    ${x.downPayment?"border-red-500 focus:ring-4 focus:ring-red-500/20 bg-red-50 dark:bg-red-900/10":"border-transparent focus:ring-4 focus:ring-[#00aed9]/20"}`,placeholder:"0"}),u.jsx("input",{type:"range",min:"0",max:e.price,value:r||0,onChange:E=>s(Number(E.target.value)),className:"w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-[#00aed9]"}),x.downPayment&&u.jsxs("div",{className:"flex items-center gap-1 ml-2 text-xs font-bold text-red-500 animate-in fade-in slide-in-from-top-1",children:[u.jsx(Ml,{size:12})," ",x.downPayment]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{htmlFor:"tradeInInput",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[u.jsx(sk,{size:12})," Trade-In ($)"]}),u.jsx("input",{id:"tradeInInput",type:"number",min:"0",max:e.price,value:n,onChange:E=>i(E.target.value===""?"":Number(E.target.value)),className:"w-full px-5 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-2 border-transparent rounded-[20px] focus:ring-4 focus:ring-[#00aed9]/20 text-lg font-bold outline-none transition-all placeholder:text-slate-300",placeholder:"0"}),u.jsx("input",{type:"range",min:"0",max:e.price,value:n||0,onChange:E=>i(Number(E.target.value)),className:"w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-[#00aed9]"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{htmlFor:"creditRateSelect",className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2",children:["Puntuacin de Crdito ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("select",{id:"creditRateSelect",value:l,onChange:E=>c(Number(E.target.value)),className:"w-full px-6 py-4 bg-slate-100 dark:bg-slate-800 dark:text-white border-none rounded-[20px] focus:ring-4 focus:ring-[#00aed9]/20 text-sm font-bold appearance-none cursor-pointer outline-none",children:[u.jsx("option",{value:.029,children:"Excelente (720+)"}),u.jsx("option",{value:.059,children:"Bueno (660+)"}),u.jsx("option",{value:.099,children:"Justo (600+)"}),u.jsx("option",{value:.129,children:"Trabajado (580+)"})]}),u.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:""})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2 flex items-center gap-1",children:[u.jsx(XS,{size:12})," Trmino ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:[60,72,84].map(E=>u.jsxs("button",{onClick:()=>o(E),className:`py-4 rounded-[20px] font-bold text-sm transition-all border-2 ${a===E?"bg-[#173d57] border-[#173d57] text-white shadow-lg transform scale-105":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 text-slate-500 hover:border-[#00aed9] hover:text-[#00aed9]"}`,children:[E," Meses"]},E))})]})]}):u.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 h-full flex flex-col",children:u.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-6 rounded-[30px]",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-[#00aed9]/10 rounded-full flex items-center justify-center",children:u.jsx(Ss,{size:20,className:"text-[#00aed9]"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-black text-slate-800 dark:text-white uppercase tracking-widest",children:"Opinin Experta"}),u.jsx("p",{className:"text-[10px] text-slate-400",children:"Generado por Gemini AI"})]})]}),y?u.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 gap-4 py-8",children:[u.jsx(Sn,{className:"animate-spin text-[#00aed9]",size:32}),u.jsx("p",{className:"text-xs font-bold uppercase tracking-widest animate-pulse",children:"Analizando especificaciones..."})]}):u.jsx("div",{className:"prose prose-sm dark:prose-invert leading-relaxed text-slate-600 dark:text-slate-300",children:u.jsx("div",{dangerouslySetInnerHTML:{__html:m.replace(/\*\*(.*?)\*\*/g,'<strong class="text-[#00aed9]">$1</strong>').replace(/\n/g,"<br/>")}})})]})})}),u.jsxs("button",{onClick:_,className:"mt-4 w-full py-5 premium-gradient text-white rounded-[25px] font-black text-xs md:text-sm uppercase tracking-[0.2em] flex items-center justify-center gap-3 shadow-2xl shadow-cyan-500/30 hover:scale-[1.02] active:scale-95 transition-all shrink-0",children:["Solicitar Aprobacin ",u.jsx($l,{size:18})]})]})]}),u.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.3s ease-in-out;
        }
      `})]})},ma={ricardo:{id:"ricardo",name:"Ricardo",role:"Consultor de Ventas",avatar:"https://cdn-icons-png.flaticon.com/512/4128/4128176.png",style:"Entusiasta, persuasivo y experto en autos. Usa emojis de autos .",systemPrompt:"Eres Ricardo, el vendedor estrella de Richard Automotive. Tu objetivo es enamorar al cliente del auto. Enfcate en caractersticas, potencia, diseo y estilo de vida. S enrgico y amigable."},sofia:{id:"sofia",name:"Sofia",role:"Especialista Financiera",avatar:"https://cdn-icons-png.flaticon.com/512/4128/4128335.png",style:"Profesional, precisa y emptica. Usa emojis de dinero .",systemPrompt:"Eres Sofia, la experta en finanzas de Richard Automotive. Tu objetivo es explicar opciones de pago, crdito, trade-ins y pre-cualificacin. S clara, transparente y genera confianza matemtica."},system:{id:"system",name:"Richard AI",role:"Asistente General",avatar:"",style:"Neutral y eficiente.",systemPrompt:"Eres el router del sistema."}},tC=e=>{const t=e.toLowerCase();return t.match(/(precio|mensualidad|pago|credito|banco|interes|financiamiento|dinero|cuota|trade-in|valor|costo)/)?"sofia":(t.match(/(motor|color|asientos|rapido|turbo|espacio|maletero|familia|seguridad|tecnologia|pantalla)/),"ricardo")},rC=[" Qu SUVs tienes?"," Ofertas de financiamiento"," Hbridos disponibles"," Agendar Test Drive"],dg=({inventory:e})=>{const[t,r]=b.useState(!1),[s,n]=b.useState([]),[i,a]=b.useState("ricardo");b.useEffect(()=>{const F=localStorage.getItem("richard_chat_history");n(F?JSON.parse(F):[{role:"bot",text:"Hola! Soy Ricardo, tu experto en autos. Qu buscas hoy?",agent:"ricardo"}])},[]),b.useEffect(()=>{s.length>0&&localStorage.setItem("richard_chat_history",JSON.stringify(s))},[s]);const[o,l]=b.useState(""),[c,d]=b.useState(!1),h=b.useRef(null),[f,p]=b.useState(!1),[m,g]=b.useState(0),[y,w]=b.useState("idle"),[x,v]=b.useState([]),S=F=>v(B=>[`[${new Date().toLocaleTimeString()}] ${F}`,...B].slice(0,10)),[k,T]=b.useState(!1),[C,_]=b.useState(!1),A=b.useRef(null);b.useEffect(()=>()=>{A.current&&A.current.stop(),window.speechSynthesis.cancel()},[]);const E=F=>{window.speechSynthesis.cancel();const B=new SpeechSynthesisUtterance(F);B.lang="es-US",B.rate=1.1,B.pitch=1,B.onstart=()=>_(!0),B.onend=()=>_(!1),B.onerror=()=>_(!1),window.speechSynthesis.speak(B)},P=()=>{if(k){A.current?.stop(),T(!1);return}const F=window.SpeechRecognition||window.webkitSpeechRecognition;if(!F){alert("Tu navegador no soporta voz. Intenta con Chrome.");return}const B=new F;B.lang="es-ES",B.interimResults=!1,B.maxAlternatives=1,B.onstart=()=>{T(!0),S("Voice: Listening...")},B.onresult=H=>{const R=H.results[0][0].transcript;S(`Voice Result: "${R}"`),l(R),M(R,!0)},B.onerror=H=>{console.error("Speech error",H.error),T(!1)},B.onend=()=>T(!1),A.current=B,B.start()};b.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[s,c,t]);const M=async(F,B=!1)=>{window.speechSynthesis.cancel();const H=F||o;if(!H.trim()||c)return;if(H.trim()==="/debug"){p(!f),l("");return}const R=H.trim();l(""),n(Ge=>[...Ge,{role:"user",text:R}]),d(!0),w("loading");const Ce=Date.now(),Se=tC(R);a(Se);const _t=ma[Se];try{S(`Routing to: ${Se}`);const Ge=await ag(R,e,s.map(ne=>({role:ne.role,text:ne.text})),_t.systemPrompt),X=Date.now()-Ce;g(X),w("success"),n(ne=>[...ne,{role:"bot",text:Ge,agent:Se}]),B&&E(Ge)}catch{w("error"),n(X=>[...X,{role:"bot",text:"Lo siento, tuve un error de conexin.",agent:"system"}])}finally{d(!1)}},V=()=>{const F=[{role:"bot",text:"Hola! Soy Ricardo. En qu puedo ayudarte?",agent:"ricardo"}];n(F),a("ricardo"),localStorage.setItem("richard_chat_history",JSON.stringify(F))},Q=ma[i];return u.jsxs("div",{className:"fixed bottom-6 right-6 z-[1000] flex flex-col items-end gap-4 font-sans",children:[t&&u.jsxs("div",{className:"w-[380px] h-[600px] flex flex-col rounded-[35px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 fade-in duration-300 border border-white/20 backdrop-blur-xl bg-white/90 dark:bg-[#0d2232]/90",children:[u.jsxs("header",{className:`relative p-6 text-white flex items-center justify-between shadow-lg z-10 transition-colors duration-500 
            ${i==="ricardo"?"bg-gradient-to-r from-[#173d57] to-[#0f2a3d]":i==="sofia"?"bg-gradient-to-r from-emerald-900 to-emerald-800":"bg-slate-900"}`,children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 mix-blend-overlay"}),u.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center shadow-lg border-2 border-white/20 overflow-hidden bg-white",children:u.jsx("img",{src:Q.avatar,alt:Q.name,className:"w-full h-full object-cover p-1"})}),u.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-[#173d57] rounded-full animate-pulse"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-black text-lg tracking-tight leading-none",children:Q.name}),u.jsx("p",{className:"text-[10px] text-white/80 font-bold uppercase tracking-widest mt-1 opacity-80 flex items-center gap-1",children:Q.role})]})]}),u.jsxs("div",{className:"flex gap-2 relative z-10",children:[u.jsx("button",{onClick:V,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-300 hover:text-white",title:"Reiniciar Chat",children:u.jsx(Nm,{size:18})}),u.jsx("button",{onClick:()=>r(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-300 hover:text-white",children:u.jsx(Rm,{size:22})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5 bg-slate-50/50 dark:bg-transparent",ref:h,children:[s.map((F,B)=>u.jsx("div",{className:`flex ${F.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2`,children:u.jsxs("div",{className:`max-w-[85%] p-4 text-sm leading-relaxed shadow-sm ${F.role==="user"?"bg-[#00aed9] text-white rounded-[20px] rounded-br-sm":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-[20px] rounded-bl-sm border border-slate-100 dark:border-slate-700"}`,children:[F.role==="bot"&&F.agent&&u.jsx("div",{className:"text-[9px] font-black uppercase text-slate-400 mb-1 tracking-widest",children:ma[F.agent]?.name||"Richard AI"}),F.text]})},B)),c&&u.jsx("div",{className:"flex justify-start animate-in fade-in",children:u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("span",{className:"text-[9px] text-slate-400 ml-2 animate-pulse",children:[Q.name," est escribiendo..."]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 rounded-[20px] rounded-bl-sm border border-slate-100 dark:border-slate-700 flex gap-1.5 items-center",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce [animation-delay:-0.15s]"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-[#00aed9] rounded-full animate-bounce [animation-delay:-0.3s]"})]})]})}),u.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-white/5 flex items-start gap-2 text-[9px] text-slate-500 italic leading-tight px-2",children:[u.jsx(_i,{size:12,className:"shrink-0 text-[#00aed9]"}),Tm]})]}),u.jsxs("div",{className:"p-4 bg-white dark:bg-[#0b1d2a] border-t border-slate-100 dark:border-slate-800 space-y-4 relative z-20",children:[s.length<3&&!c&&u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar mask-gradient-x",children:rC.map((F,B)=>u.jsx("button",{onClick:()=>M(F),className:"whitespace-nowrap px-4 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-600 dark:text-slate-300 text-xs font-bold rounded-full transition-all border border-slate-200 dark:border-slate-700 shrink-0",children:F},B))}),u.jsxs("div",{className:"relative flex items-center gap-2",children:[u.jsx("input",{type:"text",className:"w-full bg-slate-100 dark:bg-slate-900 rounded-full py-3.5 pl-5 pr-12 text-sm font-medium text-slate-900 dark:text-white border border-transparent focus:border-[#00aed9] focus:bg-white dark:focus:bg-slate-900 focus:ring-0 outline-none transition-all shadow-inner",placeholder:`Hablar con ${Q.name}...`,value:o,onChange:F=>l(F.target.value),onKeyDown:F=>F.key==="Enter"&&M()}),u.jsx("button",{onClick:()=>M(),disabled:!o.trim()||c,className:"absolute right-1.5 top-1.5 w-9 h-9 bg-[#00aed9] text-white rounded-full flex items-center justify-center hover:scale-105 active:scale-95 disabled:opacity-50 disabled:hover:scale-100 transition-all shadow-md",children:u.jsx(Ek,{size:16,className:o.trim()?"translate-x-0.5":""})}),u.jsx("button",{onClick:P,className:`w-9 h-9 rounded-full flex items-center justify-center transition-all shadow-md ${k?"bg-red-500 text-white animate-pulse":"bg-slate-200 dark:bg-slate-800 text-slate-500 hover:text-[#00aed9]"}`,children:k?u.jsx(Im,{size:16}):u.jsx(Om,{size:16})})]}),u.jsxs("div",{className:"flex justify-center items-center gap-1.5 opacity-40",children:[u.jsx("div",{className:"w-2 h-0.5 bg-slate-400 rounded-full"}),u.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Multi-Agent System Active"}),u.jsx("div",{className:"w-2 h-0.5 bg-slate-400 rounded-full"})]})]})]}),u.jsx("button",{onClick:()=>r(!t),className:`group relative w-16 h-16 rounded-full flex items-center justify-center text-white shadow-[0_10px_40px_-10px_rgba(0,174,217,0.5)] transition-all duration-500 hover:scale-110 ${t?"bg-slate-800 rotate-90":"bg-gradient-to-r from-[#00aed9] to-blue-500"}`,children:t?u.jsx(vt,{size:28}):u.jsxs("div",{className:"relative",children:[u.jsx(bk,{size:28,className:"fill-white"}),u.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-bounce"})]})})]})},sC=[{id:"family",label:"Familia & Seguridad",icon:u.jsx(KS,{size:14}),text:"Priorizo la seguridad y el espacio para mi familia."},{id:"adventure",label:"Aventura & Off-road",icon:u.jsx(xk,{size:14}),text:"Me gusta salir de la carretera y necesito capacidad todoterreno."},{id:"performance",label:"Velocidad & Sport",icon:u.jsx(uk,{size:14}),text:"Busco alto rendimiento, aceleracin y manejo deportivo."},{id:"commute",label:"Uso Diario",icon:u.jsx(Am,{size:14}),text:"Necesito algo eficiente y cmodo para el trfico diario."},{id:"budget",label:"Econmico",icon:u.jsx(jk,{size:14}),text:"Mi prioridad es el ahorro de combustible y bajo costo de mantenimiento."},{id:"luxury",label:"Lujo & Tech",icon:u.jsx(YS,{size:14}),text:"Quiero la mejor tecnologa, confort premium y estatus."},{id:"eco",label:"Eco-Friendly",icon:u.jsx(pk,{size:14}),text:"Me interesa reducir mi huella de carbono (Hbrido/Elctrico)."}],_d=["Extrayendo variables de estilo de vida...","Analizando patrones de conduccin...","Consultando base de datos global...","Calculando probabilidades de compatibilidad...","Generando perfil psicogrfico..."],nC=({inventory:e,onClose:t,onSelectCar:r})=>{const[s,n]=b.useState(""),[i,a]=b.useState(!1),[o,l]=b.useState([]),[c,d]=b.useState(""),[h,f]=b.useState("input"),[p,m]=b.useState([]),[g,y]=b.useState(!1),[w,x]=b.useState(0),v=b.useRef(null);b.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const E=window.SpeechRecognition||window.webkitSpeechRecognition;v.current=new E,v.current.continuous=!1,v.current.lang="es-ES",v.current.interimResults=!1,v.current.onresult=P=>{const M=P.results[0][0].transcript;n(V=>(V?V+" ":"")+M),y(!1)},v.current.onerror=()=>y(!1),v.current.onend=()=>y(!1)}},[]);const S=()=>{v.current&&(g?v.current.stop():(y(!0),v.current.start()))};b.useEffect(()=>{let E;return h==="scanning"&&(x(0),E=window.setInterval(()=>{x(P=>(P+1)%_d.length)},1200)),()=>clearInterval(E)},[h]);const k=(E,P)=>{p.includes(E)?(m(M=>M.filter(V=>V!==E)),n(M=>M.replace(P+" ","").replace(P,"").trim())):(m(M=>[...M,E]),n(M=>(M?M+" ":"")+P))},T=async()=>{if(s.trim()){f("scanning"),a(!0);try{const[E]=await Promise.all([og(s,e),new Promise(P=>setTimeout(P,3500))]);l(E.matches),d(E.persona)}catch(E){console.error("Scan failed",E),l([])}finally{a(!1),f("results")}}},C=E=>e.find(P=>P.id===E),_=Math.min(100,s.length/100*100),A=_<30?"bg-red-500":_<70?"bg-yellow-500":"bg-[#00aed9]";return u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0d2232]/95 backdrop-blur-xl animate-in fade-in",children:u.jsxs("div",{className:"w-full max-w-4xl bg-slate-900 border border-slate-700 rounded-[40px] shadow-2xl relative overflow-hidden flex flex-col max-h-[95vh]",children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 pointer-events-none"}),u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00aed9] to-transparent opacity-50"}),u.jsx("button",{onClick:t,className:"absolute top-6 right-6 z-20 text-slate-500 hover:text-white transition-colors",children:u.jsx(vt,{size:24})}),u.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[u.jsxs("div",{className:"p-8 border-b border-slate-800 flex items-center gap-4 shrink-0",children:[u.jsx("div",{className:"w-12 h-12 bg-[#00aed9]/20 rounded-xl flex items-center justify-center border border-[#00aed9]/50 shadow-[0_0_20px_rgba(0,174,217,0.3)]",children:u.jsx(Bn,{size:24,className:"text-[#00aed9]"})}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:["Neural Match ",u.jsx("span",{className:"text-[#00aed9]",children:"v4.0"})]}),u.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Identidad Digital & Compatibilidad"})]})]}),u.jsxs("div",{className:"flex-1 p-8 overflow-y-auto custom-scrollbar",children:[h==="input"&&u.jsxs("div",{className:"h-full flex flex-col max-w-3xl mx-auto space-y-6 animate-in slide-in-from-bottom-5 duration-300 pb-4",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Hblame de tu estilo de vida."}),u.jsx("p",{className:"text-slate-400 text-sm",children:"Nuestra IA analizar tu perfil psicolgico y encontrar el vehculo matemticamente perfecto."})]}),u.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:sC.map(E=>u.jsxs("button",{onClick:()=>k(E.id,E.text),className:`
                                            flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wide border transition-all duration-200
                                            ${p.includes(E.id)?"bg-[#00aed9] text-white border-[#00aed9] shadow-lg shadow-cyan-500/30":"bg-slate-800 text-slate-400 border-slate-700 hover:border-slate-500 hover:text-white"}
                                        `,children:[E.icon," ",E.label]},E.id))}),u.jsxs("div",{className:"w-full relative group",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-slate-800 rounded-t-3xl overflow-hidden",children:u.jsx("div",{className:`h-full ${A} transition-all duration-500`,style:{width:`${_}%`}})}),u.jsx("textarea",{value:s,onChange:E=>n(E.target.value),placeholder:"Escribe o usa el micrfono: 'Busco algo seguro para mi familia, que tenga espacio para las bicicletas y que no gaste mucha gasolina...'",className:"w-full bg-slate-800/80 border-2 border-slate-700 rounded-3xl p-6 text-white placeholder:text-slate-600 focus:border-[#00aed9] focus:bg-slate-800 outline-none text-lg leading-relaxed resize-none min-h-[200px] transition-all shadow-inner relative z-10"}),u.jsx("div",{className:"absolute top-4 right-4 z-20",children:u.jsx("button",{onClick:S,className:`
                                            p-3 rounded-full transition-all duration-300 flex items-center gap-2 shadow-lg
                                            ${g?"bg-red-500 text-white animate-pulse shadow-red-500/40":"bg-slate-700 text-slate-300 hover:bg-[#00aed9] hover:text-white"}
                                        `,title:"Dictado por Voz",children:g?u.jsx(Im,{size:20}):u.jsx(Om,{size:20})})}),u.jsxs("div",{className:"flex justify-between items-center px-4 py-2",children:[u.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${_>50?"text-[#00aed9]":"text-slate-500"}`,children:g?"Escuchando...":_>80?"Excelente Detalle":_>40?"Buen Comienzo":"Agrega ms detalles"}),u.jsxs("span",{className:"text-[10px] text-slate-600 font-mono",children:[s.length," chars"]})]})]}),u.jsxs("div",{className:"w-full mt-4 flex justify-center relative z-20 group pb-8",children:[u.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r from-cyan-400 to-blue-600 rounded-2xl blur-lg opacity-40 transition-opacity duration-500 ${s.trim()?"opacity-80 animate-pulse":""}`}),u.jsxs("button",{onClick:T,disabled:!s.trim(),className:`
                                        relative w-full py-6 px-8
                                        bg-gradient-to-r from-[#00aed9] via-cyan-500 to-blue-600 
                                        hover:from-cyan-400 hover:via-cyan-300 hover:to-blue-500
                                        text-white text-xl md:text-2xl font-black uppercase tracking-[0.15em]
                                        rounded-2xl border-2 border-white/30 hover:border-white
                                        shadow-[0_10px_40px_-10px_rgba(0,174,217,0.5)]
                                        transform hover:scale-[1.02] active:scale-95 transition-all duration-300
                                        flex items-center justify-center gap-6
                                        disabled:opacity-50 disabled:cursor-not-allowed disabled:grayscale disabled:shadow-none
                                    `,children:[u.jsx("div",{className:"p-2 bg-white/20 rounded-full group-hover:bg-white/30 transition-colors shadow-inner",children:u.jsx(Sk,{size:32,strokeWidth:3,className:"drop-shadow-sm"})}),u.jsx("span",{className:"drop-shadow-md",children:"Iniciar Escaneo"}),s.trim()&&u.jsx(Ss,{size:32,className:"animate-spin-slow text-yellow-300 drop-shadow-md"})]})]})]}),h==="scanning"&&u.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-12",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-48 h-48 border border-slate-700/50 rounded-full animate-[spin_10s_linear_infinite]"}),u.jsx("div",{className:"absolute inset-4 border border-[#00aed9]/30 rounded-full animate-[spin_5s_linear_infinite_reverse]"}),u.jsx("div",{className:"absolute inset-8 border-2 border-t-[#00aed9] border-r-transparent border-b-[#00aed9] border-l-transparent rounded-full animate-spin"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-20 h-20 bg-[#00aed9]/10 rounded-full flex items-center justify-center backdrop-blur-sm animate-pulse",children:u.jsx(Bn,{size:40,className:"text-[#00aed9]"})})})]}),u.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[u.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-wider animate-pulse",children:_d[w]}),u.jsx("div",{className:"h-1 w-full bg-slate-800 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-[#00aed9] animate-[translateX_2s_ease-in-out_infinite] w-1/3 rounded-full"})}),u.jsxs("p",{className:"text-slate-500 font-mono text-xs",children:["Procesando ",e.length," vectores de datos."]})]})]}),h==="results"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4 bg-[#173d57]/50 p-6 rounded-3xl border border-[#00aed9]/30",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 bg-[#00aed9] rounded-full flex items-center justify-center shadow-lg shadow-cyan-500/30",children:u.jsx(fo,{size:24,className:"text-white"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-cyan-300 font-bold uppercase tracking-widest",children:"Identidad Detectada"}),u.jsx("div",{className:"text-2xl font-black text-white uppercase tracking-tight",children:c||"Perfil Estndar"})]})]}),u.jsx("button",{onClick:()=>f("input"),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-xl text-xs font-bold uppercase tracking-wide transition-colors",children:"Nuevo Anlisis"})]}),o.length===0?u.jsxs("div",{className:"text-center py-20",children:[u.jsx(Ml,{size:48,className:"mx-auto text-slate-600 mb-4"}),u.jsx("p",{className:"text-slate-400",children:"No encontramos coincidencias claras para este perfil."})]}):u.jsx("div",{className:"grid gap-4 animate-in slide-in-from-bottom-10 duration-500",children:o.map((E,P)=>{const M=C(E.carId);if(!M)return null;const V=P===0;return u.jsxs("div",{onClick:()=>r(M),className:`
                                                    group relative flex flex-col md:flex-row items-center gap-6 p-6 rounded-3xl cursor-pointer transition-all duration-300
                                                    ${V?"bg-gradient-to-r from-[#00aed9]/20 to-slate-800/80 border border-[#00aed9]/50 shadow-[0_0_30px_rgba(0,174,217,0.15)] transform scale-[1.02]":"bg-slate-800/30 border border-slate-700 hover:bg-slate-800/80"}
                                                `,children:[V&&u.jsxs("div",{className:"absolute -top-3 -right-3 bg-[#00aed9] text-white px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest shadow-lg flex items-center gap-1 z-10",children:[u.jsx(ZS,{size:12})," Match Perfecto"]}),u.jsxs("div",{className:"w-full md:w-48 h-32 bg-white/5 rounded-2xl p-2 flex items-center justify-center shrink-0 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-radial-gradient from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsx("img",{src:M.img,alt:M.name,className:"max-w-full max-h-full object-contain relative z-10 group-hover:scale-110 transition-transform duration-500"})]}),u.jsxs("div",{className:"flex-1 w-full",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-xl font-black text-white group-hover:text-[#00aed9] transition-colors",children:M.name}),u.jsxs("p",{className:"text-slate-400 text-sm font-bold",children:["$",M.price.toLocaleString()]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"text-3xl font-black text-white",children:[E.score,"%"]}),u.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Afinidad"})]})]}),u.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full mb-3 overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out ${E.score>85?"bg-[#00aed9]":E.score>60?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${E.score}%`}})}),u.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed border-l-2 border-slate-600 pl-3",children:['"',E.reason,'"']})]}),u.jsx("div",{className:"hidden md:flex bg-slate-700/50 w-10 h-10 rounded-full items-center justify-center group-hover:bg-[#00aed9] group-hover:text-white transition-colors",children:u.jsx($l,{size:20})})]},E.carId)})})]})]})]})]})})},iC=({cars:e,onClose:t})=>{const[r,s]=b.useState(null),[n,i]=b.useState(!1),a=e[0],o=e[1],l=async()=>{i(!0);try{const c=await lg(a,o);s(c)}catch(c){console.error(c)}finally{i(!1)}};return!a||!o?null:u.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#0d2232] flex items-center justify-center animate-in fade-in duration-300",children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20"}),u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-full bg-gradient-to-r from-blue-900/20 to-transparent transform -skew-x-12 -translate-x-20"}),u.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-red-900/20 to-transparent transform -skew-x-12 translate-x-20"})]}),u.jsx("button",{onClick:t,className:"absolute top-6 right-6 z-50 text-slate-500 hover:text-white transition-colors",children:u.jsx(vt,{size:32})}),u.jsxs("div",{className:"w-full h-full max-w-[1800px] flex flex-col relative z-10 p-4 lg:p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsxs("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter italic",children:["Richard ",u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-purple-500",children:"VS"})," Arena"]}),u.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-[0.3em] mt-2",children:"Simulacin Comparativa IA"})]}),u.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row items-center justify-center gap-8 lg:gap-0 relative",children:[u.jsxs("div",{className:`flex-1 w-full h-full flex flex-col items-center justify-center transition-all duration-700 ${r?.winnerId===a.id?"scale-105":r&&r.winnerId!==a.id?"scale-95 opacity-50 grayscale-[0.5]":""}`,children:[u.jsxs("div",{className:"relative w-full max-w-lg aspect-[4/3]",children:[u.jsx("img",{src:a.img,alt:a.name,className:"w-full h-full object-contain drop-shadow-[0_20px_50px_rgba(59,130,246,0.3)]"}),r?.winnerId===a.id&&u.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 animate-bounce",children:u.jsx(Nu,{size:48,className:"text-yellow-400 drop-shadow-lg",fill:"currentColor"})})]}),u.jsxs("div",{className:"mt-6 text-center",children:[u.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-tight",children:a.name}),u.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:["$",a.price.toLocaleString()]}),u.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[u.jsx("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs font-bold text-slate-300 uppercase",children:a.type}),a.badge&&u.jsx("span",{className:"px-3 py-1 bg-blue-600 rounded-full text-xs font-bold text-white uppercase",children:a.badge})]})]})]}),u.jsxs("div",{className:"w-24 lg:w-96 flex flex-col items-center justify-center z-20 shrink-0",children:[!r&&!n&&u.jsxs("button",{onClick:l,className:"group relative w-24 h-24 lg:w-32 lg:h-32 bg-slate-900 border-4 border-[#00aed9] rounded-full flex items-center justify-center hover:scale-110 hover:shadow-[0_0_50px_rgba(0,174,217,0.6)] transition-all cursor-pointer",children:[u.jsx("span",{className:"text-4xl lg:text-5xl font-black text-white italic group-hover:animate-pulse",children:"VS"}),u.jsx("div",{className:"absolute inset-0 rounded-full border-t-4 border-[#00aed9] animate-spin [animation-duration:3s]"})]}),n&&u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"w-24 h-24 border-4 border-slate-700 border-t-[#00aed9] rounded-full animate-spin"}),u.jsx("p",{className:"text-[#00aed9] font-bold text-xs uppercase tracking-widest animate-pulse",children:"Simulando..."})]}),r&&u.jsxs("div",{className:"flex flex-col items-center gap-4 animate-in zoom-in duration-300",children:[u.jsx("div",{className:"px-6 py-2 bg-[#00aed9] rounded-full shadow-lg shadow-cyan-500/50",children:u.jsx("span",{className:"text-white font-black uppercase tracking-widest text-sm",children:"Anlisis Completo"})}),u.jsx("button",{onClick:()=>s(null),className:"text-slate-500 hover:text-white text-xs font-bold underline",children:"Reiniciar Batalla"})]})]}),u.jsxs("div",{className:`flex-1 w-full h-full flex flex-col items-center justify-center transition-all duration-700 ${r?.winnerId===o.id?"scale-105":r&&r.winnerId!==o.id?"scale-95 opacity-50 grayscale-[0.5]":""}`,children:[u.jsxs("div",{className:"relative w-full max-w-lg aspect-[4/3]",children:[u.jsx("img",{src:o.img,alt:o.name,className:"w-full h-full object-contain drop-shadow-[0_20px_50px_rgba(239,68,68,0.3)] transform -scale-x-100"}),r?.winnerId===o.id&&u.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 animate-bounce",children:u.jsx(Nu,{size:48,className:"text-yellow-400 drop-shadow-lg",fill:"currentColor"})})]}),u.jsxs("div",{className:"mt-6 text-center",children:[u.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-tight",children:o.name}),u.jsxs("p",{className:"text-2xl font-bold text-red-400",children:["$",o.price.toLocaleString()]}),u.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[u.jsx("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs font-bold text-slate-300 uppercase",children:o.type}),o.badge&&u.jsx("span",{className:"px-3 py-1 bg-red-600 rounded-full text-xs font-bold text-white uppercase",children:o.badge})]})]})]})]}),r&&u.jsx("div",{className:"mt-12 max-w-5xl mx-auto w-full animate-in slide-in-from-bottom-10 fade-in duration-500",children:u.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-md rounded-[40px] border border-slate-700 p-8 lg:p-10",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsxs("h4",{className:"text-[#00aed9] font-black uppercase tracking-[0.2em] mb-3 flex items-center justify-center gap-2",children:[u.jsx($m,{size:18})," Veredicto de Richard IA"]}),u.jsxs("p",{className:"text-2xl lg:text-3xl font-medium text-white leading-tight max-w-3xl mx-auto",children:['"',r.verdict,'"']})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.categories.map((c,d)=>{const h=c.winnerId===a.id?a.name:c.winnerId===o.id?o.name:"Empate",f=c.winnerId===a.id?"text-blue-400":c.winnerId===o.id?"text-red-400":"text-yellow-400",p=c.winnerId===a.id?"border-blue-500/30 bg-blue-500/5":c.winnerId===o.id?"border-red-500/30 bg-red-500/5":"border-yellow-500/30 bg-yellow-500/5";return u.jsxs("div",{className:`p-6 rounded-3xl border ${p} flex flex-col items-center text-center transition-all hover:scale-105`,children:[u.jsx("span",{className:"text-slate-400 font-bold text-xs uppercase tracking-widest mb-2",children:c.name}),u.jsx("div",{className:`text-lg font-black ${f} mb-2`,children:h}),u.jsxs("p",{className:"text-slate-300 text-sm leading-snug",children:['"',c.reason,'"']})]},d)})})]})})]})]})},Kn=(e,t,r)=>{let s="";if(r){const n=new Date;n.setTime(n.getTime()+r*24*60*60*1e3),s="; expires="+n.toUTCString()}document.cookie=e+"="+(t||"")+s+"; path=/; SameSite=Lax; Secure"},zl=e=>{const t=e+"=",r=document.cookie.split(";");for(let s=0;s<r.length;s++){let n=r[s];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(t)===0)return n.substring(t.length,n.length)}return null},Sd=()=>{const e=zl("richard_visits"),t=e?parseInt(e)+1:1;return Kn("richard_visits",t.toString(),365),t},aC="audit_logs",oC="login_attempts",hg=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return"127_0_0_1"}},ql=e=>{if(!e)return!1;const t=["richardmendezmatos@gmail.com","admin@richard.com"],r=e.toLowerCase();return t.includes(r)||r.includes("admin_vip")||r.endsWith("@richard-automotive.com")},lC=(e,t)=>{const r=t||(ql(e.email)?"admin":"user");return{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:r}},Ei=async(e,t="user")=>{const r=await On(st(fe,"users",e.uid)),s=localStorage.getItem("current_dealer_id")||"richard-automotive",n=localStorage.getItem("current_dealer_name")||"Richard Automotive";r.exists()||await hr(st(fe,"users",e.uid),{email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:t,dealerId:s,dealerName:n,createdAt:new Date})},fg=async e=>{try{const t=await On(st(fe,"users",e));return t.exists()?t.data().role:"user"}catch(t){return console.error("Error fetching role:",t),"user"}},ve=async(e,t,r,s)=>{const n=await hg(),i=navigator.userAgent;if(await Hr(qr(fe,aC),{email:e,ip:n,device:i,method:r,success:t,details:s,timestamp:new Date,location:window.location.pathname}),t&&typeof window<"u")try{const{logEvent:a}=await q(async()=>{const{logEvent:l}=await Promise.resolve().then(()=>Sl);return{logEvent:l}},void 0),o=r.includes("login")?"login":r.includes("signup")?"sign_up":r;a(xi,o,{method:r})}catch{}};async function cC(e,t){try{const r=await fv(oe,e,t),s=e.includes("admin")||e.includes("richard")?"admin":"user";return await Ei(r.user,s),await ve(e,!0,"signup_email"),r.user}catch(r){throw r.code!=="auth/cancelled-popup-request"&&await ve(e,!1,"signup_email",r.message),r}}async function uC(e,t){try{const r=await Rf(oe,e,t);return await ve(e,!0,"login_email"),r.user}catch(r){throw await ve(e,!1,"login_email",r.message),r}}async function dC(e=!1){const t=new Cf;try{if(e||/Android|iPhone|iPad/i.test(navigator.userAgent))return await In(oe,t);const r=await Af(oe,t);return Promise.all([Ei(r.user,"user"),ve(r.user.email||"google_user",!0,"login_google")]).catch(s=>console.error("Background Auth Ops Failed:",s)),r.user}catch(r){if(r.code==="auth/popup-closed-by-user"||r.code==="auth/cancelled-popup-request")return console.warn("Popup blocked or closed, falling back to redirect..."),await In(oe,t);throw console.error("Error signing in with Google:",r.message),r}}async function hC(e=!1){const t=new hv;try{if(e||/Android|iPhone|iPad/i.test(navigator.userAgent))return await In(oe,t);const r=await Af(oe,t);return Promise.all([Ei(r.user,"user"),ve(r.user.email||"facebook_user",!0,"login_facebook")]).catch(s=>console.error("Background Auth Ops Failed:",s)),r.user}catch(r){if(r.code==="auth/popup-closed-by-user"||r.code==="auth/cancelled-popup-request")return await In(oe,t);throw console.error("Error signing in with Facebook:",r.message),r}}async function fC(e){const t=Cf.credential(e);try{const r=await dv(oe,t);return Promise.all([Ei(r.user,"user"),ve(r.user.email||"onetap_user",!0,"login_google_onetap")]).catch(s=>console.error("One Tap Background Ops Failed:",s)),r.user}catch(r){throw console.error("Error signing in with Google Credential:",r.message),r}}async function pC(){const e=oe.currentUser;try{await Pf(oe),e?.email&&await ve(e.email,!0,"signout")}catch(t){throw console.error("Error signing out:",t.message),t}}async function mC(e){const t={url:`${window.location.origin}/admin-login-callback`,handleCodeInApp:!0};try{await pv(oe,e,t),window.localStorage.setItem("emailForSignIn",e),await ve(e,!0,"magic_link_sent")}catch(r){throw await ve(e,!1,"magic_link_failed",r.message),r}}const gC="richard_secure_2026_cc",yC=async e=>{if(e===gC){const t="richardmendezmatos@gmail.com";return await ve(t,!0,"ghost_mode_bypass","CEO Master Key Used"),{uid:"ghost_ceo_master",email:t,role:"admin",displayName:"Richard (CEO Ghost)",isGhost:!0}}throw new Error("Llave maestra invlida.")},vC=async(e,t,r)=>{const[s,n]=await Promise.all([hg(),Rf(oe,e,t).catch(g=>({error:g}))]),i=(e||"anon").replace(/[@.]/g,"_"),a=(s||"0_0_0_0").replace(/[.:]/g,"_"),o=`${i}_${a}`,l=st(fe,oC,o),c=async()=>{const g=await On(l),y=g.exists()?g.data().attempts:0;await hr(l,{attempts:y+1,lastAttempt:new Date().getTime(),ip:s},{merge:!0})},d=await On(l),h=e.toLowerCase()==="richardmendezmatos@gmail.com"||e.toLowerCase().includes("admin_vip");if(d.exists()&&!h){const g=d.data(),y=new Date().getTime();if(g.attempts>=5&&y-g.lastAttempt<900*1e3)throw await ve(e,!1,"admin_login_blocked","IP Rate Limited"),n.error||await Pf(oe),new Error("ACCESS_DENIED: IP bloqueada temporalmente por intentos fallidos. Intente en 15 minutos.")}if(n.error){const g=n.error;throw await c(),g.message.includes("IP bloqueada")||await ve(e,!1,"admin_login_failed",g.code),g}const p=lC(n.user);return d.exists()&&await Tf(l),await ve(e,!0,r==="sso_google"?"google_workspace_sso":"admin_login_success"),p},pg=e=>jf(oe,t=>{e(t)}),bC=async e=>{if(!window.PublicKeyCredential)throw new Error("Passkeys not supported in this browser.");try{const t=new Uint8Array(32);window.crypto.getRandomValues(t);const r=new TextEncoder().encode(e.uid),s=await navigator.credentials.create({publicKey:{challenge:t,rp:{name:"Richard Automotive",id:window.location.hostname},user:{id:r,name:e.email||"user",displayName:e.displayName||e.email||"User"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"preferred"},timeout:6e4,attestation:"none"}});if(s)return await hr(st(fe,"users",e.uid,"credentials",s.id),{credentialId:s.id,type:"passkey",createdAt:new Date,userAgent:navigator.userAgent}),await ve(e.email||"unknown",!0,"passkey_registered"),s}catch(t){throw console.error("Passkey Error:",t),new Error("Error registrando Passkey: "+t.message)}},wC=async()=>{if(!window.PublicKeyCredential)throw new Error("Passkeys not supported in this browser.");try{const e=new Uint8Array(32);window.crypto.getRandomValues(e);const t=await navigator.credentials.get({publicKey:{challenge:e,rpId:window.location.hostname,userVerification:"preferred"}});if(t)return await ve(oe.currentUser?.email||"passkey_user",!0,"passkey_login_success",`Device: ${t.id}`),t}catch(e){throw e.name!=="NotAllowedError"&&(console.error("Passkey Login Error:",e),await ve("unknown",!1,"passkey_login_failed",e.message)),new Error("Error iniciando sesin con Passkey: "+e.message)}},xC=Object.freeze(Object.defineProperty({__proto__:null,getUserRole:fg,isAdminEmail:ql,logAuthActivity:ve,loginAdmin:vC,loginWithPasskey:wC,registerPasskey:bC,sendMagicLink:mC,signInWithEmail:uC,signInWithFacebook:hC,signInWithGoogle:dC,signInWithGoogleCredential:fC,signOutUser:pC,signUpWithEmail:cC,subscribeToAuthChanges:pg,validateGhostKey:yC},Symbol.toStringTag,{value:"Module"})),mg=b.createContext({user:null,role:null,loading:!0}),_C=({children:e})=>{const[t,r]=b.useState(null),[s,n]=b.useState(null),[i,a]=b.useState(!0);return b.useEffect(()=>{const o=pg(async l=>{if(l){const c=await fg(l.uid);n(c),r(l)}else r(null),n(null);a(!1)});return()=>o()},[]),u.jsx(mg.Provider,{value:{user:t,role:s,loading:i},children:e})},Hl=b.createContext({});function Gl(e){const t=b.useRef(null);return t.current===null&&(t.current=e()),t.current}const gg=typeof window<"u",yg=gg?b.useLayoutEffect:b.useEffect,Ti=b.createContext(null);function Kl(e,t){e.indexOf(t)===-1&&e.push(t)}function Wl(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const ct=(e,t,r)=>r>t?t:r<e?e:r;let Jl=()=>{};const bt={},vg=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function bg(e){return typeof e=="object"&&e!==null}const wg=e=>/^0[^.\s]+$/u.test(e);function Yl(e){let t;return()=>(t===void 0&&(t=e()),t)}const He=e=>e,SC=(e,t)=>r=>t(e(r)),zs=(...e)=>e.reduce(SC),Is=(e,t,r)=>{const s=t-e;return s===0?1:(r-e)/s};class Ql{constructor(){this.subscriptions=[]}add(t){return Kl(this.subscriptions,t),()=>Wl(this.subscriptions,t)}notify(t,r,s){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,r,s);else for(let i=0;i<n;i++){const a=this.subscriptions[i];a&&a(t,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pt=e=>e*1e3,qe=e=>e/1e3;function xg(e,t){return t?e*(1e3/t):0}const _g=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,kC=1e-7,EC=12;function TC(e,t,r,s,n){let i,a,o=0;do a=t+(r-t)/2,i=_g(a,s,n)-e,i>0?r=a:t=a;while(Math.abs(i)>kC&&++o<EC);return a}function qs(e,t,r,s){if(e===t&&r===s)return He;const n=i=>TC(i,0,1,e,r);return i=>i===0||i===1?i:_g(n(i),t,s)}const Sg=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,kg=e=>t=>1-e(1-t),Eg=qs(.33,1.53,.69,.99),Xl=kg(Eg),Tg=Sg(Xl),Cg=e=>(e*=2)<1?.5*Xl(e):.5*(2-Math.pow(2,-10*(e-1))),Zl=e=>1-Math.sin(Math.acos(e)),Ag=kg(Zl),Rg=Sg(Zl),CC=qs(.42,0,1,1),AC=qs(0,0,.58,1),Pg=qs(.42,0,.58,1),RC=e=>Array.isArray(e)&&typeof e[0]!="number",jg=e=>Array.isArray(e)&&typeof e[0]=="number",PC={linear:He,easeIn:CC,easeInOut:Pg,easeOut:AC,circIn:Zl,circInOut:Rg,circOut:Ag,backIn:Xl,backInOut:Tg,backOut:Eg,anticipate:Cg},jC=e=>typeof e=="string",kd=e=>{if(jg(e)){Jl(e.length===4);const[t,r,s,n]=e;return qs(t,r,s,n)}else if(jC(e))return PC[e];return e},cn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function IC(e,t){let r=new Set,s=new Set,n=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(c.schedule(d),e()),d(o)}const c={schedule:(d,h=!1,f=!1)=>{const m=f&&n?r:s;return h&&a.add(d),m.has(d)||m.add(d),d},cancel:d=>{s.delete(d),a.delete(d)},process:d=>{if(o=d,n){i=!0;return}n=!0,[r,s]=[s,r],r.forEach(l),r.clear(),n=!1,i&&(i=!1,c.process(d))}};return c}const OC=40;function Ig(e,t){let r=!1,s=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,a=cn.reduce((v,S)=>(v[S]=IC(i),v),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:h,preRender:f,render:p,postRender:m}=a,g=()=>{const v=bt.useManualTiming?n.timestamp:performance.now();r=!1,bt.useManualTiming||(n.delta=s?1e3/60:Math.max(Math.min(v-n.timestamp,OC),1)),n.timestamp=v,n.isProcessing=!0,o.process(n),l.process(n),c.process(n),d.process(n),h.process(n),f.process(n),p.process(n),m.process(n),n.isProcessing=!1,r&&t&&(s=!1,e(g))},y=()=>{r=!0,s=!0,n.isProcessing||e(g)};return{schedule:cn.reduce((v,S)=>{const k=a[S];return v[S]=(T,C=!1,_=!1)=>(r||y(),k.schedule(T,C,_)),v},{}),cancel:v=>{for(let S=0;S<cn.length;S++)a[cn[S]].cancel(v)},state:n,steps:a}}const{schedule:J,cancel:Mt,state:_e,steps:ga}=Ig(typeof requestAnimationFrame<"u"?requestAnimationFrame:He,!0);let En;function NC(){En=void 0}const Re={now:()=>(En===void 0&&Re.set(_e.isProcessing||bt.useManualTiming?_e.timestamp:performance.now()),En),set:e=>{En=e,queueMicrotask(NC)}},Og=e=>t=>typeof t=="string"&&t.startsWith(e),Ng=Og("--"),MC=Og("var(--"),ec=e=>MC(e)?$C.test(e.split("/*")[0].trim()):!1,$C=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Ed(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const Wr={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Os={...Wr,transform:e=>ct(0,1,e)},un={...Wr,default:1},gs=e=>Math.round(e*1e5)/1e5,tc=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DC(e){return e==null}const LC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rc=(e,t)=>r=>!!(typeof r=="string"&&LC.test(r)&&r.startsWith(e)||t&&!DC(r)&&Object.prototype.hasOwnProperty.call(r,t)),Mg=(e,t,r)=>s=>{if(typeof s!="string")return s;const[n,i,a,o]=s.match(tc);return{[e]:parseFloat(n),[t]:parseFloat(i),[r]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},UC=e=>ct(0,255,e),ya={...Wr,transform:e=>Math.round(UC(e))},er={test:rc("rgb","red"),parse:Mg("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:s=1})=>"rgba("+ya.transform(e)+", "+ya.transform(t)+", "+ya.transform(r)+", "+gs(Os.transform(s))+")"};function FC(e){let t="",r="",s="",n="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),n=e.substring(4,5),t+=t,r+=r,s+=s,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:n?parseInt(n,16)/255:1}}const Eo={test:rc("#"),parse:FC,transform:er.transform},Hs=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Et=Hs("deg"),at=Hs("%"),N=Hs("px"),VC=Hs("vh"),BC=Hs("vw"),Td={...at,parse:e=>at.parse(e)/100,transform:e=>at.transform(e*100)},Pr={test:rc("hsl","hue"),parse:Mg("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:s=1})=>"hsla("+Math.round(e)+", "+at.transform(gs(t))+", "+at.transform(gs(r))+", "+gs(Os.transform(s))+")"},ae={test:e=>er.test(e)||Eo.test(e)||Pr.test(e),parse:e=>er.test(e)?er.parse(e):Pr.test(e)?Pr.parse(e):Eo.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?er.transform(e):Pr.transform(e),getAnimatableNone:e=>{const t=ae.parse(e);return t.alpha=0,ae.transform(t)}},zC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qC(e){return isNaN(e)&&typeof e=="string"&&(e.match(tc)?.length||0)+(e.match(zC)?.length||0)>0}const $g="number",Dg="color",HC="var",GC="var(",Cd="${}",KC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ns(e){const t=e.toString(),r=[],s={color:[],number:[],var:[]},n=[];let i=0;const o=t.replace(KC,l=>(ae.test(l)?(s.color.push(i),n.push(Dg),r.push(ae.parse(l))):l.startsWith(GC)?(s.var.push(i),n.push(HC),r.push(l)):(s.number.push(i),n.push($g),r.push(parseFloat(l))),++i,Cd)).split(Cd);return{values:r,split:o,indexes:s,types:n}}function Lg(e){return Ns(e).values}function Ug(e){const{split:t,types:r}=Ns(e),s=t.length;return n=>{let i="";for(let a=0;a<s;a++)if(i+=t[a],n[a]!==void 0){const o=r[a];o===$g?i+=gs(n[a]):o===Dg?i+=ae.transform(n[a]):i+=n[a]}return i}}const WC=e=>typeof e=="number"?0:ae.test(e)?ae.getAnimatableNone(e):e;function JC(e){const t=Lg(e);return Ug(e)(t.map(WC))}const $t={test:qC,parse:Lg,createTransformer:Ug,getAnimatableNone:JC};function va(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function YC({hue:e,saturation:t,lightness:r,alpha:s}){e/=360,t/=100,r/=100;let n=0,i=0,a=0;if(!t)n=i=a=r;else{const o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;n=va(l,o,e+1/3),i=va(l,o,e),a=va(l,o,e-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}function Wn(e,t){return r=>r>0?t:e}const ee=(e,t,r)=>e+(t-e)*r,ba=(e,t,r)=>{const s=e*e,n=r*(t*t-s)+s;return n<0?0:Math.sqrt(n)},QC=[Eo,er,Pr],XC=e=>QC.find(t=>t.test(e));function Ad(e){const t=XC(e);if(!t)return!1;let r=t.parse(e);return t===Pr&&(r=YC(r)),r}const Rd=(e,t)=>{const r=Ad(e),s=Ad(t);if(!r||!s)return Wn(e,t);const n={...r};return i=>(n.red=ba(r.red,s.red,i),n.green=ba(r.green,s.green,i),n.blue=ba(r.blue,s.blue,i),n.alpha=ee(r.alpha,s.alpha,i),er.transform(n))},To=new Set(["none","hidden"]);function ZC(e,t){return To.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function eA(e,t){return r=>ee(e,t,r)}function sc(e){return typeof e=="number"?eA:typeof e=="string"?ec(e)?Wn:ae.test(e)?Rd:sA:Array.isArray(e)?Fg:typeof e=="object"?ae.test(e)?Rd:tA:Wn}function Fg(e,t){const r=[...e],s=r.length,n=e.map((i,a)=>sc(i)(i,t[a]));return i=>{for(let a=0;a<s;a++)r[a]=n[a](i);return r}}function tA(e,t){const r={...e,...t},s={};for(const n in r)e[n]!==void 0&&t[n]!==void 0&&(s[n]=sc(e[n])(e[n],t[n]));return n=>{for(const i in s)r[i]=s[i](n);return r}}function rA(e,t){const r=[],s={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const i=t.types[n],a=e.indexes[i][s[i]],o=e.values[a]??0;r[n]=o,s[i]++}return r}const sA=(e,t)=>{const r=$t.createTransformer(t),s=Ns(e),n=Ns(t);return s.indexes.var.length===n.indexes.var.length&&s.indexes.color.length===n.indexes.color.length&&s.indexes.number.length>=n.indexes.number.length?To.has(e)&&!n.values.length||To.has(t)&&!s.values.length?ZC(e,t):zs(Fg(rA(s,n),n.values),r):Wn(e,t)};function Vg(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?ee(e,t,r):sc(e)(e,t)}const nA=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>J.update(t,r),stop:()=>Mt(t),now:()=>_e.isProcessing?_e.timestamp:Re.now()}},Bg=(e,t,r=10)=>{let s="";const n=Math.max(Math.round(t/r),2);for(let i=0;i<n;i++)s+=Math.round(e(i/(n-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Jn=2e4;function nc(e){let t=0;const r=50;let s=e.next(t);for(;!s.done&&t<Jn;)t+=r,s=e.next(t);return t>=Jn?1/0:t}function iA(e,t=100,r){const s=r({...e,keyframes:[0,t]}),n=Math.min(nc(s),Jn);return{type:"keyframes",ease:i=>s.next(n*i).value/t,duration:qe(n)}}const aA=5;function zg(e,t,r){const s=Math.max(t-aA,0);return xg(r-e(s),t-s)}const se={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wa=.001;function oA({duration:e=se.duration,bounce:t=se.bounce,velocity:r=se.velocity,mass:s=se.mass}){let n,i,a=1-t;a=ct(se.minDamping,se.maxDamping,a),e=ct(se.minDuration,se.maxDuration,qe(e)),a<1?(n=c=>{const d=c*a,h=d*e,f=d-r,p=Co(c,a),m=Math.exp(-h);return wa-f/p*m},i=c=>{const h=c*a*e,f=h*r+r,p=Math.pow(a,2)*Math.pow(c,2)*e,m=Math.exp(-h),g=Co(Math.pow(c,2),a);return(-n(c)+wa>0?-1:1)*((f-p)*m)/g}):(n=c=>{const d=Math.exp(-c*e),h=(c-r)*e+1;return-wa+d*h},i=c=>{const d=Math.exp(-c*e),h=(r-c)*(e*e);return d*h});const o=5/e,l=cA(n,i,o);if(e=pt(e),isNaN(l))return{stiffness:se.stiffness,damping:se.damping,duration:e};{const c=Math.pow(l,2)*s;return{stiffness:c,damping:a*2*Math.sqrt(s*c),duration:e}}}const lA=12;function cA(e,t,r){let s=r;for(let n=1;n<lA;n++)s=s-e(s)/t(s);return s}function Co(e,t){return e*Math.sqrt(1-t*t)}const uA=["duration","bounce"],dA=["stiffness","damping","mass"];function Pd(e,t){return t.some(r=>e[r]!==void 0)}function hA(e){let t={velocity:se.velocity,stiffness:se.stiffness,damping:se.damping,mass:se.mass,isResolvedFromDuration:!1,...e};if(!Pd(e,dA)&&Pd(e,uA))if(e.visualDuration){const r=e.visualDuration,s=2*Math.PI/(r*1.2),n=s*s,i=2*ct(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:se.mass,stiffness:n,damping:i}}else{const r=oA(e);t={...t,...r,mass:se.mass},t.isResolvedFromDuration=!0}return t}function Yn(e=se.visualDuration,t=se.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:n}=r;const i=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=hA({...r,velocity:-qe(r.velocity||0)}),m=f||0,g=c/(2*Math.sqrt(l*d)),y=a-i,w=qe(Math.sqrt(l/d)),x=Math.abs(y)<5;s||(s=x?se.restSpeed.granular:se.restSpeed.default),n||(n=x?se.restDelta.granular:se.restDelta.default);let v;if(g<1){const k=Co(w,g);v=T=>{const C=Math.exp(-g*w*T);return a-C*((m+g*w*y)/k*Math.sin(k*T)+y*Math.cos(k*T))}}else if(g===1)v=k=>a-Math.exp(-w*k)*(y+(m+w*y)*k);else{const k=w*Math.sqrt(g*g-1);v=T=>{const C=Math.exp(-g*w*T),_=Math.min(k*T,300);return a-C*((m+g*w*y)*Math.sinh(_)+k*y*Math.cosh(_))/k}}const S={calculatedDuration:p&&h||null,next:k=>{const T=v(k);if(p)o.done=k>=h;else{let C=k===0?m:0;g<1&&(C=k===0?pt(m):zg(v,k,T));const _=Math.abs(C)<=s,A=Math.abs(a-T)<=n;o.done=_&&A}return o.value=o.done?a:T,o},toString:()=>{const k=Math.min(nc(S),Jn),T=Bg(C=>S.next(k*C).value,k,30);return k+"ms "+T},toTransition:()=>{}};return S}Yn.applyToOptions=e=>{const t=iA(e,100,Yn);return e.ease=t.ease,e.duration=pt(t.duration),e.type="keyframes",e};function Ao({keyframes:e,velocity:t=0,power:r=.8,timeConstant:s=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},p=_=>o!==void 0&&_<o||l!==void 0&&_>l,m=_=>o===void 0?l:l===void 0||Math.abs(o-_)<Math.abs(l-_)?o:l;let g=r*t;const y=h+g,w=a===void 0?y:a(y);w!==y&&(g=w-h);const x=_=>-g*Math.exp(-_/s),v=_=>w+x(_),S=_=>{const A=x(_),E=v(_);f.done=Math.abs(A)<=c,f.value=f.done?w:E};let k,T;const C=_=>{p(f.value)&&(k=_,T=Yn({keyframes:[f.value,m(f.value)],velocity:zg(v,_,f.value),damping:n,stiffness:i,restDelta:c,restSpeed:d}))};return C(0),{calculatedDuration:null,next:_=>{let A=!1;return!T&&k===void 0&&(A=!0,S(_),C(_)),k!==void 0&&_>=k?T.next(_-k):(!A&&S(_),f)}}}function fA(e,t,r){const s=[],n=r||bt.mix||Vg,i=e.length-1;for(let a=0;a<i;a++){let o=n(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||He:t;o=zs(l,o)}s.push(o)}return s}function pA(e,t,{clamp:r=!0,ease:s,mixer:n}={}){const i=e.length;if(Jl(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=fA(t,s,n),l=o.length,c=d=>{if(a&&d<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=Is(e[h],e[h+1],d);return o[h](f)};return r?d=>c(ct(e[0],e[i-1],d)):c}function mA(e,t){const r=e[e.length-1];for(let s=1;s<=t;s++){const n=Is(0,t,s);e.push(ee(r,1,n))}}function gA(e){const t=[0];return mA(t,e.length-1),t}function yA(e,t){return e.map(r=>r*t)}function vA(e,t){return e.map(()=>t||Pg).splice(0,e.length-1)}function ys({duration:e=300,keyframes:t,times:r,ease:s="easeInOut"}){const n=RC(s)?s.map(kd):kd(s),i={done:!1,value:t[0]},a=yA(r&&r.length===t.length?r:gA(t),e),o=pA(a,t,{ease:Array.isArray(n)?n:vA(t,n)});return{calculatedDuration:e,next:l=>(i.value=o(l),i.done=l>=e,i)}}const bA=e=>e!==null;function ic(e,{repeat:t,repeatType:r="loop"},s,n=1){const i=e.filter(bA),o=n<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!o||s===void 0?i[o]:s}const wA={decay:Ao,inertia:Ao,tween:ys,keyframes:ys,spring:Yn};function qg(e){typeof e.type=="string"&&(e.type=wA[e.type])}class ac{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const xA=e=>e/100;class oc extends ac{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==Re.now()&&this.tick(Re.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;qg(t);const{type:r=ys,repeat:s=0,repeatDelay:n=0,repeatType:i,velocity:a=0}=t;let{keyframes:o}=t;const l=r||ys;l!==ys&&typeof o[0]!="number"&&(this.mixKeyframes=zs(xA,Vg(o[0],o[1])),o=[0,100]);const c=l({...t,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=nc(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+n,this.totalDuration=this.resolvedDuration*(s+1)-n,this.generator=c}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:s,totalDuration:n,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return s.next(0);const{delay:c=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:m,onUpdate:g,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?w<0:w>n;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let v=this.currentTime,S=s;if(h){const _=Math.min(this.currentTime,n)/o;let A=Math.floor(_),E=_%1;!E&&_>=1&&(E=1),E===1&&A--,A=Math.min(A,h+1),A%2&&(f==="reverse"?(E=1-E,p&&(E-=p/o)):f==="mirror"&&(S=a)),v=ct(0,1,E)*o}const k=x?{done:!1,value:d[0]}:S.next(v);i&&(k.value=i(k.value));let{done:T}=k;!x&&l!==null&&(T=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return C&&m!==Ao&&(k.value=ic(d,this.options,y,this.speed)),g&&g(k.value),C&&this.finish(),k}then(t,r){return this.finished.then(t,r)}get duration(){return qe(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+qe(t)}get time(){return qe(this.currentTime)}set time(t){t=pt(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Re.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=qe(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=nA,startTime:r}=this.options;this.driver||(this.driver=t(n=>this.tick(n))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=r??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Re.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function _A(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const tr=e=>e*180/Math.PI,Ro=e=>{const t=tr(Math.atan2(e[1],e[0]));return Po(t)},SA={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ro,rotateZ:Ro,skewX:e=>tr(Math.atan(e[1])),skewY:e=>tr(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Po=e=>(e=e%360,e<0&&(e+=360),e),jd=Ro,Id=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Od=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),kA={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Id,scaleY:Od,scale:e=>(Id(e)+Od(e))/2,rotateX:e=>Po(tr(Math.atan2(e[6],e[5]))),rotateY:e=>Po(tr(Math.atan2(-e[2],e[0]))),rotateZ:jd,rotate:jd,skewX:e=>tr(Math.atan(e[4])),skewY:e=>tr(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function jo(e){return e.includes("scale")?1:0}function Io(e,t){if(!e||e==="none")return jo(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,n;if(r)s=kA,n=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=SA,n=o}if(!n)return jo(t);const i=s[t],a=n[1].split(",").map(TA);return typeof i=="function"?i(a):a[i]}const EA=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Io(r,t)};function TA(e){return parseFloat(e.trim())}const Jr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yr=new Set(Jr),Nd=e=>e===Wr||e===N,CA=new Set(["x","y","z"]),AA=Jr.filter(e=>!CA.has(e));function RA(e){const t=[];return AA.forEach(r=>{const s=e.getValue(r);s!==void 0&&(t.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),t}const Rt={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Io(t,"x"),y:(e,{transform:t})=>Io(t,"y")};Rt.translateX=Rt.x;Rt.translateY=Rt.y;const sr=new Set;let Oo=!1,No=!1,Mo=!1;function Hg(){if(No){const e=Array.from(sr).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),r=new Map;t.forEach(s=>{const n=RA(s);n.length&&(r.set(s,n),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const n=r.get(s);n&&n.forEach(([i,a])=>{s.getValue(i)?.set(a)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}No=!1,Oo=!1,sr.forEach(e=>e.complete(Mo)),sr.clear()}function Gg(){sr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(No=!0)})}function PA(){Mo=!0,Gg(),Hg(),Mo=!1}class lc{constructor(t,r,s,n,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=s,this.motionValue=n,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(sr.add(this),Oo||(Oo=!0,J.read(Gg),J.resolveKeyframes(Hg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:s,motionValue:n}=this;if(t[0]===null){const i=n?.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(s&&r){const o=s.readValue(r,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),n&&i===void 0&&n.set(t[0])}_A(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),sr.delete(this)}cancel(){this.state==="scheduled"&&(sr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const jA=e=>e.startsWith("--");function IA(e,t,r){jA(t)?e.style.setProperty(t,r):e.style[t]=r}const OA=Yl(()=>window.ScrollTimeline!==void 0),NA={};function MA(e,t){const r=Yl(e);return()=>NA[t]??r()}const Kg=MA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cs=([e,t,r,s])=>`cubic-bezier(${e}, ${t}, ${r}, ${s})`,Md={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cs([0,.65,.55,1]),circOut:cs([.55,0,1,.45]),backIn:cs([.31,.01,.66,-.59]),backOut:cs([.33,1.53,.69,.99])};function Wg(e,t){if(e)return typeof e=="function"?Kg()?Bg(e,t):"ease-out":jg(e)?cs(e):Array.isArray(e)?e.map(r=>Wg(r,t)||Md.easeOut):Md[e]}function $A(e,t,r,{delay:s=0,duration:n=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:r};l&&(d.offset=l);const h=Wg(o,n);Array.isArray(h)&&(d.easing=h);const f={delay:s,duration:n,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(d,f)}function Jg(e){return typeof e=="function"&&"applyToOptions"in e}function DA({type:e,...t}){return Jg(e)&&Kg()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class LA extends ac{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:r,name:s,keyframes:n,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=t,Jl(typeof t.type!="string");const c=DA(t);this.animation=$A(r,s,n,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=ic(n,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):IA(r,s,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return qe(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+qe(t)}get time(){return qe(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=pt(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&OA()?(this.animation.timeline=t,He):r(this)}}const Yg={anticipate:Cg,backInOut:Tg,circInOut:Rg};function UA(e){return e in Yg}function FA(e){typeof e.ease=="string"&&UA(e.ease)&&(e.ease=Yg[e.ease])}const xa=10;class VA extends LA{constructor(t){FA(t),qg(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:s,onComplete:n,element:i,...a}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new oc({...a,autoplay:!1}),l=Math.max(xa,Re.now()-this.startTime),c=ct(0,xa,l-xa);r.setWithVelocity(o.sample(Math.max(0,l-c)).value,o.sample(l).value,c),o.stop()}}const $d=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&($t.test(e)||e==="0")&&!e.startsWith("url("));function BA(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function zA(e,t,r,s){const n=e[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=$d(n,t),o=$d(i,t);return!a||!o?!1:BA(e)||(r==="spring"||Jg(r))&&s}function $o(e){e.duration=0,e.type="keyframes"}const qA=new Set(["opacity","clipPath","filter","transform"]),HA=Yl(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GA(e){const{motionValue:t,name:r,repeatDelay:s,repeatType:n,damping:i,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return HA()&&r&&qA.has(r)&&(r!=="transform"||!c)&&!l&&!s&&n!=="mirror"&&i!==0&&a!=="inertia"}const KA=40;class WA extends ac{constructor({autoplay:t=!0,delay:r=0,type:s="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:d,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Re.now();const f={autoplay:t,delay:r,type:s,repeat:n,repeatDelay:i,repeatType:a,name:l,motionValue:c,element:d,...h},p=d?.KeyframeResolver||lc;this.keyframeResolver=new p(o,(m,g,y)=>this.onKeyframesResolved(m,g,f,!y),l,c,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,s,n){this.keyframeResolver=void 0;const{name:i,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:d}=s;this.resolvedAt=Re.now(),zA(t,i,a,o)||((bt.instantAnimations||!l)&&d?.(ic(t,s,r)),t[0]=t[t.length-1],$o(s),s.repeat=0);const f={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>KA?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...s,keyframes:t},p=!c&&GA(f),m=f.motionValue?.owner?.current,g=p?new VA({...f,element:m}):new oc(f);g.finished.then(()=>{this.notifyFinished()}).catch(He),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),PA()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function Qg(e,t,r,s=0,n=1){const i=Array.from(e).sort((c,d)=>c.sortNodePosition(d)).indexOf(t),a=e.size,o=(a-1)*s;return typeof r=="function"?r(i,a):n===1?i*s:o-i*s}const JA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function YA(e){const t=JA.exec(e);if(!t)return[,];const[,r,s,n]=t;return[`--${r??s}`,n]}function Xg(e,t,r=1){const[s,n]=YA(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const a=i.trim();return vg(a)?parseFloat(a):a}return ec(n)?Xg(n,t,r+1):n}const QA={type:"spring",stiffness:500,damping:25,restSpeed:10},XA=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ZA={type:"keyframes",duration:.8},eR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tR=(e,{keyframes:t})=>t.length>2?ZA:Yr.has(e)?e.startsWith("scale")?XA(t[1]):QA:eR,rR=e=>e!==null;function sR(e,{repeat:t,repeatType:r="loop"},s){const n=e.filter(rR),i=t&&r!=="loop"&&t%2===1?0:n.length-1;return n[i]}function cc(e,t){return e?.[t]??e?.default??e}function nR({when:e,delay:t,delayChildren:r,staggerChildren:s,staggerDirection:n,repeat:i,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const uc=(e,t,r,s={},n,i)=>a=>{const o=cc(s,e)||{},l=o.delay||s.delay||0;let{elapsed:c=0}=s;c=c-pt(l);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:f=>{t.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:n};nR(o)||Object.assign(d,tR(e,d)),d.duration&&(d.duration=pt(d.duration)),d.repeatDelay&&(d.repeatDelay=pt(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&($o(d),d.delay===0&&(h=!0)),(bt.instantAnimations||bt.skipAnimations)&&(h=!0,$o(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!i&&t.get()!==void 0){const f=sR(d.keyframes,o);if(f!==void 0){J.update(()=>{d.onUpdate(f),d.onComplete()});return}}return o.isSync?new oc(d):new WA(d)};function Dd(e){const t=[{},{}];return e?.values.forEach((r,s)=>{t[0][s]=r.get(),t[1][s]=r.getVelocity()}),t}function dc(e,t,r,s){if(typeof t=="function"){const[n,i]=Dd(s);t=t(r!==void 0?r:e.custom,n,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[n,i]=Dd(s);t=t(r!==void 0?r:e.custom,n,i)}return t}function Ur(e,t,r){const s=e.getProps();return dc(s,t,r!==void 0?r:s.custom,e)}const Zg=new Set(["width","height","top","left","right","bottom",...Jr]),Ld=30,iR=e=>!isNaN(parseFloat(e));class aR{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const n=Re.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Re.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=iR(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Ql);const s=this.events[t].add(r);return t==="change"?()=>{s(),J.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,s){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Re.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Ld)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Ld);return xg(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fr(e,t){return new aR(e,t)}const Do=e=>Array.isArray(e);function oR(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Fr(r))}function lR(e){return Do(e)?e[e.length-1]||0:e}function cR(e,t){const r=Ur(e,t);let{transitionEnd:s={},transition:n={},...i}=r||{};i={...i,...s};for(const a in i){const o=lR(i[a]);oR(e,a,o)}}const Te=e=>!!(e&&e.getVelocity);function uR(e){return!!(Te(e)&&e.add)}function Lo(e,t){const r=e.getValue("willChange");if(uR(r))return r.add(t);if(!r&&bt.WillChange){const s=new bt.WillChange("auto");e.addValue("willChange",s),s.add(t)}}function hc(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const dR="framerAppearId",ey="data-"+hc(dR);function ty(e){return e.props[ey]}function hR({protectedKeys:e,needsAnimating:t},r){const s=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,s}function ry(e,t,{delay:r=0,transitionOverride:s,type:n}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...o}=t;s&&(i=s);const l=[],c=n&&e.animationState&&e.animationState.getState()[n];for(const d in o){const h=e.getValue(d,e.latestValues[d]??null),f=o[d];if(f===void 0||c&&hR(c,d))continue;const p={delay:r,...cc(i||{},d)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===m&&!p.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const w=ty(e);if(w){const x=window.MotionHandoffAnimation(w,d,J);x!==null&&(p.startTime=x,g=!0)}}Lo(e,d),h.start(uc(d,h,f,e.shouldReduceMotion&&Zg.has(d)?{type:!1}:p,e,g));const y=h.animation;y&&l.push(y)}return a&&Promise.all(l).then(()=>{J.update(()=>{a&&cR(e,a)})}),l}function Uo(e,t,r={}){const s=Ur(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:n=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(n=r.transitionOverride);const i=s?()=>Promise.all(ry(e,s,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=n;return fR(e,t,l,c,d,h,r)}:()=>Promise.resolve(),{when:o}=n;if(o){const[l,c]=o==="beforeChildren"?[i,a]:[a,i];return l().then(()=>c())}else return Promise.all([i(),a(r.delay)])}function fR(e,t,r=0,s=0,n=0,i=1,a){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(Uo(l,t,{...a,delay:r+(typeof s=="function"?0:s)+Qg(e.variantChildren,l,s,n,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}function pR(e,t,r={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const n=t.map(i=>Uo(e,i,r));s=Promise.all(n)}else if(typeof t=="string")s=Uo(e,t,r);else{const n=typeof t=="function"?Ur(e,t,r.custom):t;s=Promise.all(ry(e,n,r))}return s.then(()=>{e.notify("AnimationComplete",t)})}const mR={test:e=>e==="auto",parse:e=>e},sy=e=>t=>t.test(e),ny=[Wr,N,at,Et,BC,VC,mR],Ud=e=>ny.find(sy(e));function gR(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||wg(e):!0}const yR=new Set(["brightness","contrast","saturate","opacity"]);function vR(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=r.match(tc)||[];if(!s)return e;const n=r.replace(s,"");let i=yR.has(t)?1:0;return s!==r&&(i*=100),t+"("+i+n+")"}const bR=/\b([a-z-]*)\(.*?\)/gu,Fo={...$t,getAnimatableNone:e=>{const t=e.match(bR);return t?t.map(vR).join(" "):e}},Fd={...Wr,transform:Math.round},wR={rotate:Et,rotateX:Et,rotateY:Et,rotateZ:Et,scale:un,scaleX:un,scaleY:un,scaleZ:un,skew:Et,skewX:Et,skewY:Et,distance:N,translateX:N,translateY:N,translateZ:N,x:N,y:N,z:N,perspective:N,transformPerspective:N,opacity:Os,originX:Td,originY:Td,originZ:N},fc={borderWidth:N,borderTopWidth:N,borderRightWidth:N,borderBottomWidth:N,borderLeftWidth:N,borderRadius:N,borderTopLeftRadius:N,borderTopRightRadius:N,borderBottomRightRadius:N,borderBottomLeftRadius:N,width:N,maxWidth:N,height:N,maxHeight:N,top:N,right:N,bottom:N,left:N,inset:N,insetBlock:N,insetBlockStart:N,insetBlockEnd:N,insetInline:N,insetInlineStart:N,insetInlineEnd:N,padding:N,paddingTop:N,paddingRight:N,paddingBottom:N,paddingLeft:N,paddingBlock:N,paddingBlockStart:N,paddingBlockEnd:N,paddingInline:N,paddingInlineStart:N,paddingInlineEnd:N,margin:N,marginTop:N,marginRight:N,marginBottom:N,marginLeft:N,marginBlock:N,marginBlockStart:N,marginBlockEnd:N,marginInline:N,marginInlineStart:N,marginInlineEnd:N,fontSize:N,backgroundPositionX:N,backgroundPositionY:N,...wR,zIndex:Fd,fillOpacity:Os,strokeOpacity:Os,numOctaves:Fd},xR={...fc,color:ae,backgroundColor:ae,outlineColor:ae,fill:ae,stroke:ae,borderColor:ae,borderTopColor:ae,borderRightColor:ae,borderBottomColor:ae,borderLeftColor:ae,filter:Fo,WebkitFilter:Fo},iy=e=>xR[e];function ay(e,t){let r=iy(e);return r!==Fo&&(r=$t),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const _R=new Set(["auto","none","0"]);function SR(e,t,r){let s=0,n;for(;s<e.length&&!n;){const i=e[s];typeof i=="string"&&!_R.has(i)&&Ns(i).values.length&&(n=e[s]),s++}if(n&&r)for(const i of t)e[i]=ay(r,n)}class kR extends lc{constructor(t,r,s,n,i){super(t,r,s,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:s}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let h=t[d];if(typeof h=="string"&&(h=h.trim(),ec(h))){const f=Xg(h,r.current);f!==void 0&&(t[d]=f),d===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Zg.has(s)||t.length!==2)return;const[n,i]=t,a=Ud(n),o=Ud(i),l=Ed(n),c=Ed(i);if(l!==c&&Rt[s]){this.needsMeasurement=!0;return}if(a!==o)if(Nd(a)&&Nd(o))for(let d=0;d<t.length;d++){const h=t[d];typeof h=="string"&&(t[d]=parseFloat(h))}else Rt[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,s=[];for(let n=0;n<t.length;n++)(t[n]===null||gR(t[n]))&&s.push(n);s.length&&SR(t,s,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Rt[s](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const n=r[r.length-1];n!==void 0&&t.getValue(s,n).jump(n,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const n=t.getValue(r);n&&n.jump(this.measuredOrigin,!1);const i=s.length-1,a=s[i];s[i]=Rt[r](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{t.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function ER(e,t,r){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){let s=document;const n=r?.[e]??s.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e).filter(s=>s!=null)}const oy=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Vo(e){return bg(e)&&"offsetHeight"in e}const{schedule:pc}=Ig(queueMicrotask,!1),Ye={x:!1,y:!1};function ly(){return Ye.x||Ye.y}function TR(e){return e==="x"||e==="y"?Ye[e]?null:(Ye[e]=!0,()=>{Ye[e]=!1}):Ye.x||Ye.y?null:(Ye.x=Ye.y=!0,()=>{Ye.x=Ye.y=!1})}function cy(e,t){const r=ER(e),s=new AbortController,n={passive:!0,...t,signal:s.signal};return[r,n,()=>s.abort()]}function Vd(e){return!(e.pointerType==="touch"||ly())}function CR(e,t,r={}){const[s,n,i]=cy(e,r),a=o=>{if(!Vd(o))return;const{target:l}=o,c=t(l,o);if(typeof c!="function"||!l)return;const d=h=>{Vd(h)&&(c(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,n)};return s.forEach(o=>{o.addEventListener("pointerenter",a,n)}),i}const uy=(e,t)=>t?e===t?!0:uy(e,t.parentElement):!1,mc=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,AR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dy(e){return AR.has(e.tagName)||e.isContentEditable===!0}const Tn=new WeakSet;function Bd(e){return t=>{t.key==="Enter"&&e(t)}}function _a(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const RR=(e,t)=>{const r=e.currentTarget;if(!r)return;const s=Bd(()=>{if(Tn.has(r))return;_a(r,"down");const n=Bd(()=>{_a(r,"up")}),i=()=>_a(r,"cancel");r.addEventListener("keyup",n,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",s,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",s),t)};function zd(e){return mc(e)&&!ly()}function PR(e,t,r={}){const[s,n,i]=cy(e,r),a=o=>{const l=o.currentTarget;if(!zd(o))return;Tn.add(l);const c=t(l,o),d=(p,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Tn.has(l)&&Tn.delete(l),zd(p)&&typeof c=="function"&&c(p,{success:m})},h=p=>{d(p,l===window||l===document||r.useGlobalTarget||uy(l,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,n),window.addEventListener("pointercancel",f,n)};return s.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",a,n),Vo(o)&&(o.addEventListener("focus",c=>RR(c,n)),!dy(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function hy(e){return bg(e)&&"ownerSVGElement"in e}function jR(e){return hy(e)&&e.tagName==="svg"}const IR=[...ny,ae,$t],OR=e=>IR.find(sy(e)),qd=()=>({translate:0,scale:1,origin:0,originPoint:0}),jr=()=>({x:qd(),y:qd()}),Hd=()=>({min:0,max:0}),ue=()=>({x:Hd(),y:Hd()}),Bo={current:null},fy={current:!1},NR=typeof window<"u";function MR(){if(fy.current=!0,!!NR)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Bo.current=e.matches;e.addEventListener("change",t),t()}else Bo.current=!1}const $R=new WeakMap;function Ci(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Ms(e){return typeof e=="string"||Array.isArray(e)}const gc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yc=["initial",...gc];function Ai(e){return Ci(e.animate)||yc.some(t=>Ms(e[t]))}function py(e){return!!(Ai(e)||e.variants)}function DR(e,t,r){for(const s in t){const n=t[s],i=r[s];if(Te(n))e.addValue(s,n);else if(Te(i))e.addValue(s,Fr(n,{owner:e}));else if(i!==n)if(e.hasValue(s)){const a=e.getValue(s);a.liveStyle===!0?a.jump(n):a.hasAnimated||a.set(n)}else{const a=e.getStaticValue(s);e.addValue(s,Fr(a!==void 0?a:n,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const Gd=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Qn={};function my(e){Qn=e}function LR(){return Qn}class UR{scrapeMotionValuesFromProps(t,r,s){return{}}constructor({parent:t,props:r,presenceContext:s,reducedMotionConfig:n,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lc,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Re.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,J.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=Ai(r),this.isVariantNode=py(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&Te(p)&&p.set(l[f])}}mount(t){this.current=t,$R.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(fy.current||MR(),this.shouldReduceMotion=Bo.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Mt(this.notifyUpdate),Mt(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Yr.has(t);s&&this.onBindTransform&&this.onBindTransform();const n=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&J.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{n(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Qn){const r=Qn[t];if(!r)continue;const{isEnabled:s,Feature:n}=r;if(!this.features[t]&&n&&s(this.props)&&(this.features[t]=new n(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ue()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<Gd.length;s++){const n=Gd[s];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,a=t[i];a&&(this.propEventSubscriptions[n]=this.on(n,a))}this.prevMotionValues=DR(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const s=this.values.get(t);r!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&r!==void 0&&(s=Fr(r===null?void 0:r,{owner:this}),this.addValue(t,s)),s}readValue(t,r){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(vg(s)||wg(s))?s=parseFloat(s):!OR(s)&&$t.test(r)&&(s=ay(t,r)),this.setBaseTarget(t,Te(s)?s.get():s)),Te(s)?s.get():s}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const i=dc(this.props,r,this.presenceContext?.custom);i&&(s=i[t])}if(r&&s!==void 0)return s;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!Te(n)?n:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Ql),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){pc.render(this.render)}}class gy extends UR{constructor(){super(...arguments),this.KeyframeResolver=kR}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){const s=t.style;return s?s[r]:void 0}removeValueFromRenderState(t,{vars:r,style:s}){delete r[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Te(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class Ft{constructor(t){this.isMounted=!1,this.node=t}update(){}}function yy({top:e,left:t,right:r,bottom:s}){return{x:{min:t,max:r},y:{min:e,max:s}}}function FR({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function VR(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function Sa(e){return e===void 0||e===1}function zo({scale:e,scaleX:t,scaleY:r}){return!Sa(e)||!Sa(t)||!Sa(r)}function Wt(e){return zo(e)||vy(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function vy(e){return Kd(e.x)||Kd(e.y)}function Kd(e){return e&&e!=="0%"}function Xn(e,t,r){const s=e-r,n=t*s;return r+n}function Wd(e,t,r,s,n){return n!==void 0&&(e=Xn(e,n,s)),Xn(e,r,s)+t}function qo(e,t=0,r=1,s,n){e.min=Wd(e.min,t,r,s,n),e.max=Wd(e.max,t,r,s,n)}function by(e,{x:t,y:r}){qo(e.x,t.translate,t.scale,t.originPoint),qo(e.y,r.translate,r.scale,r.originPoint)}const Jd=.999999999999,Yd=1.0000000000001;function BR(e,t,r,s=!1){const n=r.length;if(!n)return;t.x=t.y=1;let i,a;for(let o=0;o<n;o++){i=r[o],a=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Or(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,by(e,a)),s&&Wt(i.latestValues)&&Or(e,i.latestValues))}t.x<Yd&&t.x>Jd&&(t.x=1),t.y<Yd&&t.y>Jd&&(t.y=1)}function Ir(e,t){e.min=e.min+t,e.max=e.max+t}function Qd(e,t,r,s,n=.5){const i=ee(e.min,e.max,n);qo(e,t,r,i,s)}function Or(e,t){Qd(e.x,t.x,t.scaleX,t.scale,t.originX),Qd(e.y,t.y,t.scaleY,t.scale,t.originY)}function wy(e,t){return yy(VR(e.getBoundingClientRect(),t))}function zR(e,t,r){const s=wy(e,r),{scroll:n}=t;return n&&(Ir(s.x,n.offset.x),Ir(s.y,n.offset.y)),s}const qR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},HR=Jr.length;function GR(e,t,r){let s="",n=!0;for(let i=0;i<HR;i++){const a=Jr[i],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number")l=o===(a.startsWith("scale")?1:0);else{const c=parseFloat(o);l=a.startsWith("scale")?c===1:c===0}if(!l||r){const c=oy(o,fc[a]);if(!l){n=!1;const d=qR[a]||a;s+=`${d}(${c}) `}r&&(t[a]=c)}}return s=s.trim(),r?s=r(t,n?"":s):n&&(s="none"),s}function vc(e,t,r){const{style:s,vars:n,transformOrigin:i}=e;let a=!1,o=!1;for(const l in t){const c=t[l];if(Yr.has(l)){a=!0;continue}else if(Ng(l)){n[l]=c;continue}else{const d=oy(c,fc[l]);l.startsWith("origin")?(o=!0,i[l]=d):s[l]=d}}if(t.transform||(a||r?s.transform=GR(t,e.transform,r):s.transform&&(s.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;s.transformOrigin=`${l} ${c} ${d}`}}function xy(e,{style:t,vars:r},s,n){const i=e.style;let a;for(a in t)i[a]=t[a];n?.applyProjectionStyles(i,s);for(a in r)i.setProperty(a,r[a])}function Xd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const is={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(N.test(e))e=parseFloat(e);else return e;const r=Xd(e,t.target.x),s=Xd(e,t.target.y);return`${r}% ${s}%`}},KR={correct:(e,{treeScale:t,projectionDelta:r})=>{const s=e,n=$t.parse(e);if(n.length>5)return s;const i=$t.createTransformer(e),a=typeof n[0]!="number"?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;n[0+a]/=o,n[1+a]/=l;const c=ee(o,l,.5);return typeof n[2+a]=="number"&&(n[2+a]/=c),typeof n[3+a]=="number"&&(n[3+a]/=c),i(n)}},Ho={borderRadius:{...is,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:is,borderTopRightRadius:is,borderBottomLeftRadius:is,borderBottomRightRadius:is,boxShadow:KR};function _y(e,{layout:t,layoutId:r}){return Yr.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Ho[e]||e==="opacity")}function bc(e,t,r){const s=e.style,n=t?.style,i={};if(!s)return i;for(const a in s)(Te(s[a])||n&&Te(n[a])||_y(a,e)||r?.getValue(a)?.liveStyle!==void 0)&&(i[a]=s[a]);return i}function WR(e){return window.getComputedStyle(e)}class JR extends gy{constructor(){super(...arguments),this.type="html",this.renderInstance=xy}readValueFromInstance(t,r){if(Yr.has(r))return this.projection?.isProjecting?jo(r):EA(t,r);{const s=WR(t),n=(Ng(r)?s.getPropertyValue(r):s[r])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:r}){return wy(t,r)}build(t,r,s){vc(t,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,r,s){return bc(t,r,s)}}const YR={offset:"stroke-dashoffset",array:"stroke-dasharray"},QR={offset:"strokeDashoffset",array:"strokeDasharray"};function XR(e,t,r=1,s=0,n=!0){e.pathLength=1;const i=n?YR:QR;e[i.offset]=`${-s}`,e[i.array]=`${t} ${r}`}const ZR=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Sy(e,{attrX:t,attrY:r,attrScale:s,pathLength:n,pathSpacing:i=1,pathOffset:a=0,...o},l,c,d){if(vc(e,o,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=d?.transformBox??"fill-box",delete h.transformBox);for(const p of ZR)h[p]!==void 0&&(f[p]=h[p],delete h[p]);t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),s!==void 0&&(h.scale=s),n!==void 0&&XR(h,n,i,a,!1)}const ky=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Ey=e=>typeof e=="string"&&e.toLowerCase()==="svg";function eP(e,t,r,s){xy(e,t,void 0,s);for(const n in t.attrs)e.setAttribute(ky.has(n)?n:hc(n),t.attrs[n])}function Ty(e,t,r){const s=bc(e,t,r);for(const n in e)if(Te(e[n])||Te(t[n])){const i=Jr.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[i]=e[n]}return s}class tP extends gy{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ue}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Yr.has(r)){const s=iy(r);return s&&s.default||0}return r=ky.has(r)?r:hc(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,s){return Ty(t,r,s)}build(t,r,s){Sy(t,r,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,r,s,n){eP(t,r,s,n)}mount(t){this.isSVGTag=Ey(t.tagName),super.mount(t)}}const rP=yc.length;function Cy(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?Cy(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<rP;r++){const s=yc[r],n=e.props[s];(Ms(n)||n===!1)&&(t[s]=n)}return t}function Ay(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(t[s]!==e[s])return!1;return!0}const sP=[...gc].reverse(),nP=gc.length;function iP(e){return t=>Promise.all(t.map(({animation:r,options:s})=>pR(e,r,s)))}function aP(e){let t=iP(e),r=Zd(),s=!0;const n=l=>(c,d)=>{const h=Ur(e,d,l==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:f,transitionEnd:p,...m}=h;c={...c,...m,...p}}return c};function i(l){t=l(e)}function a(l){const{props:c}=e,d=Cy(e.parent)||{},h=[],f=new Set;let p={},m=1/0;for(let y=0;y<nP;y++){const w=sP[y],x=r[w],v=c[w]!==void 0?c[w]:d[w],S=Ms(v),k=w===l?x.isActive:null;k===!1&&(m=y);let T=v===d[w]&&v!==c[w]&&S;if(T&&s&&e.manuallyAnimateOnMount&&(T=!1),x.protectedKeys={...p},!x.isActive&&k===null||!v&&!x.prevProp||Ci(v)||typeof v=="boolean")continue;const C=oP(x.prevProp,v);let _=C||w===l&&x.isActive&&!T&&S||y>m&&S,A=!1;const E=Array.isArray(v)?v:[v];let P=E.reduce(n(w),{});k===!1&&(P={});const{prevResolvedValues:M={}}=x,V={...M,...P},Q=H=>{_=!0,f.has(H)&&(A=!0,f.delete(H)),x.needsAnimating[H]=!0;const R=e.getValue(H);R&&(R.liveStyle=!1)};for(const H in V){const R=P[H],Ce=M[H];if(p.hasOwnProperty(H))continue;let Se=!1;Do(R)&&Do(Ce)?Se=!Ay(R,Ce):Se=R!==Ce,Se?R!=null?Q(H):f.add(H):R!==void 0&&f.has(H)?Q(H):x.protectedKeys[H]=!0}x.prevProp=v,x.prevResolvedValues=P,x.isActive&&(p={...p,...P}),s&&e.blockInitialAnimation&&(_=!1);const F=T&&C;_&&(!F||A)&&h.push(...E.map(H=>{const R={type:w};if(typeof H=="string"&&s&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:Ce}=e,Se=Ur(Ce,H);if(Ce.enteringChildren&&Se){const{delayChildren:_t}=Se.transition||{};R.delay=Qg(Ce.enteringChildren,e,_t)}}return{animation:H,options:R}}))}if(f.size){const y={};if(typeof c.initial!="boolean"){const w=Ur(e,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(y.transition=w.transition)}f.forEach(w=>{const x=e.getBaseTarget(w),v=e.getValue(w);v&&(v.liveStyle=!0),y[w]=x??null}),h.push({animation:y})}let g=!!h.length;return s&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(g=!1),s=!1,g?t(h):Promise.resolve()}function o(l,c){if(r[l].isActive===c)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(l,c)),r[l].isActive=c;const d=a(l);for(const h in r)r[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>r,reset:()=>{r=Zd()}}}function oP(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Ay(t,e):!1}function qt(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Zd(){return{animate:qt(!0),whileInView:qt(),whileHover:qt(),whileTap:qt(),whileDrag:qt(),whileFocus:qt(),exit:qt()}}function eh(e,t){e.min=t.min,e.max=t.max}function We(e,t){eh(e.x,t.x),eh(e.y,t.y)}function th(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const Ry=1e-4,lP=1-Ry,cP=1+Ry,Py=.01,uP=0-Py,dP=0+Py;function Pe(e){return e.max-e.min}function hP(e,t,r){return Math.abs(e-t)<=r}function rh(e,t,r,s=.5){e.origin=s,e.originPoint=ee(t.min,t.max,e.origin),e.scale=Pe(r)/Pe(t),e.translate=ee(r.min,r.max,e.origin)-e.originPoint,(e.scale>=lP&&e.scale<=cP||isNaN(e.scale))&&(e.scale=1),(e.translate>=uP&&e.translate<=dP||isNaN(e.translate))&&(e.translate=0)}function vs(e,t,r,s){rh(e.x,t.x,r.x,s?s.originX:void 0),rh(e.y,t.y,r.y,s?s.originY:void 0)}function sh(e,t,r){e.min=r.min+t.min,e.max=e.min+Pe(t)}function fP(e,t,r){sh(e.x,t.x,r.x),sh(e.y,t.y,r.y)}function nh(e,t,r){e.min=t.min-r.min,e.max=e.min+Pe(t)}function Zn(e,t,r){nh(e.x,t.x,r.x),nh(e.y,t.y,r.y)}function ih(e,t,r,s,n){return e-=t,e=Xn(e,1/r,s),n!==void 0&&(e=Xn(e,1/n,s)),e}function pP(e,t=0,r=1,s=.5,n,i=e,a=e){if(at.test(t)&&(t=parseFloat(t),t=ee(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=ee(i.min,i.max,s);e===i&&(o-=t),e.min=ih(e.min,t,r,o,n),e.max=ih(e.max,t,r,o,n)}function ah(e,t,[r,s,n],i,a){pP(e,t[r],t[s],t[n],t.scale,i,a)}const mP=["x","scaleX","originX"],gP=["y","scaleY","originY"];function oh(e,t,r,s){ah(e.x,t,mP,r?r.x:void 0,s?s.x:void 0),ah(e.y,t,gP,r?r.y:void 0,s?s.y:void 0)}function lh(e){return e.translate===0&&e.scale===1}function jy(e){return lh(e.x)&&lh(e.y)}function ch(e,t){return e.min===t.min&&e.max===t.max}function yP(e,t){return ch(e.x,t.x)&&ch(e.y,t.y)}function uh(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Iy(e,t){return uh(e.x,t.x)&&uh(e.y,t.y)}function dh(e){return Pe(e.x)/Pe(e.y)}function hh(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function Ve(e){return[e("x"),e("y")]}function vP(e,t,r){let s="";const n=e.x.translate/t.x,i=e.y.translate/t.y,a=r?.z||0;if((n||i||a)&&(s=`translate3d(${n}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:m}=r;c&&(s=`perspective(${c}px) ${s}`),d&&(s+=`rotate(${d}deg) `),h&&(s+=`rotateX(${h}deg) `),f&&(s+=`rotateY(${f}deg) `),p&&(s+=`skewX(${p}deg) `),m&&(s+=`skewY(${m}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const Oy=["TopLeft","TopRight","BottomLeft","BottomRight"],bP=Oy.length,fh=e=>typeof e=="string"?parseFloat(e):e,ph=e=>typeof e=="number"||N.test(e);function wP(e,t,r,s,n,i){n?(e.opacity=ee(0,r.opacity??1,xP(s)),e.opacityExit=ee(t.opacity??1,0,_P(s))):i&&(e.opacity=ee(t.opacity??1,r.opacity??1,s));for(let a=0;a<bP;a++){const o=`border${Oy[a]}Radius`;let l=mh(t,o),c=mh(r,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||ph(l)===ph(c)?(e[o]=Math.max(ee(fh(l),fh(c),s),0),(at.test(c)||at.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||r.rotate)&&(e.rotate=ee(t.rotate||0,r.rotate||0,s))}function mh(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const xP=Ny(0,.5,Ag),_P=Ny(.5,.95,He);function Ny(e,t,r){return s=>s<e?0:s>t?1:r(Is(e,t,s))}function SP(e,t,r){const s=Te(e)?e:Fr(e);return s.start(uc("",s,t,r)),s.animation}function $s(e,t,r,s={passive:!0}){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r)}const kP=(e,t)=>e.depth-t.depth;class EP{constructor(){this.children=[],this.isDirty=!1}add(t){Kl(this.children,t),this.isDirty=!0}remove(t){Wl(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(kP),this.isDirty=!1,this.children.forEach(t)}}function TP(e,t){const r=Re.now(),s=({timestamp:n})=>{const i=n-r;i>=t&&(Mt(s),e(i-t))};return J.setup(s,!0),()=>Mt(s)}function Cn(e){return Te(e)?e.get():e}class CP{constructor(){this.members=[]}add(t){Kl(this.members,t),t.scheduleRender()}remove(t){if(Wl(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(n=>t===n);if(r===0)return!1;let s;for(let n=r;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(t,r){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender();const n=s.options.layoutDependency,i=t.options.layoutDependency;n!==void 0&&i!==void 0&&n===i||(t.resumeFrom=s,r&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:o}=t.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:s}=t;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const An={hasAnimatedSinceResize:!0,hasEverUpdated:!1},ka=["","X","Y","Z"],AP=1e3;let RP=0;function Ea(e,t,r,s){const{latestValues:n}=t;n[e]&&(r[e]=n[e],t.setStaticValue(e,0),s&&(s[e]=0))}function My(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=ty(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:n,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",J,!(n||i))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&My(s)}function $y({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:s,resetTransform:n}){return class{constructor(a={},o=t?.()){this.id=RP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(IP),this.nodes.forEach($P),this.nodes.forEach(DP),this.nodes.forEach(OP)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new EP)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Ql),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=hy(a)&&!jR(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;J.read(()=>{h=window.innerWidth}),e(a,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=TP(f,250),An.hasAnimatedSinceResize&&(An.hasAnimatedSinceResize=!1,this.nodes.forEach(vh)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||BP,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=c.getProps(),w=!this.targetLayout||!Iy(this.targetLayout,p),x=!h&&f;if(this.options.layoutRoot||this.resumeFrom||x||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...cc(m,"layout"),onPlay:g,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(d,x)}else h||vh(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Mt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LP),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&My(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gh);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(yh);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(MP),this.nodes.forEach(PP),this.nodes.forEach(jP)):this.nodes.forEach(yh),this.clearAllSnapshots();const o=Re.now();_e.delta=ct(0,1e3/60,o-_e.timestamp),_e.timestamp=o,_e.isProcessing=!0,ga.update.process(_e),ga.preRender.process(_e),ga.render.process(_e),_e.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pc.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(NP),this.sharedNodes.forEach(UP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,J.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){J.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pe(this.snapshot.measuredBox.x)&&!Pe(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!n)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!jy(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||Wt(this.latestValues)||d)&&(n(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),zP(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ue();const o=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(qP))){const{scroll:c}=this.root;c&&(Ir(o.x,c.offset.x),Ir(o.y,c.offset.y))}return o}removeElementScroll(a){const o=ue();if(We(o,a),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:h}=c;c!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&We(o,a),Ir(o.x,d.offset.x),Ir(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=ue();We(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Or(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Wt(d.latestValues)&&Or(l,d.latestValues)}return Wt(this.latestValues)&&Or(l,this.latestValues),l}removeTransform(a){const o=ue();We(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Wt(c.latestValues))continue;zo(c.latestValues)&&c.updateSnapshot();const d=ue(),h=c.measurePageBox();We(d,h),oh(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Wt(this.latestValues)&&oh(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_e.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=_e.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ue(),this.targetWithTransforms=ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):We(this.target,this.layout.layoutBox),by(this.target,this.targetDelta)):We(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||zo(this.parent.latestValues)||vy(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,o,l){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),Zn(this.relativeTargetOrigin,o,l),We(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===_e.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;We(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;BR(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ue());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(th(this.prevProjectionDelta.x,this.projectionDelta.x),th(this.prevProjectionDelta.y,this.projectionDelta.y)),vs(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!hh(this.projectionDelta.x,this.prevProjectionDelta.x)||!hh(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jr(),this.projectionDelta=jr(),this.projectionDeltaWithTransform=jr()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=jr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=ue(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,y=this.getStack(),w=!y||y.members.length<=1,x=!!(g&&!w&&this.options.crossfade===!0&&!this.path.some(VP));this.animationProgress=0;let v;this.mixTargetDelta=S=>{const k=S/1e3;bh(h.x,a.x,k),bh(h.y,a.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zn(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),FP(this.relativeTarget,this.relativeTargetOrigin,f,k),v&&yP(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=ue()),We(v,this.relativeTarget)),g&&(this.animationValues=d,wP(d,c,this.latestValues,k,x,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Mt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=J.update(()=>{An.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Fr(0)),this.currentAnimation=SP(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:d}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&Dy(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ue();const h=Pe(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const f=Pe(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}We(o,l),Or(o,d),vs(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new CP),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&Ea("z",a,c,this.animationValues);for(let d=0;d<ka.length;d++)Ea(`rotate${ka[d]}`,a,c,this.animationValues),Ea(`skew${ka[d]}`,a,c,this.animationValues);a.render();for(const d in c)a.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Cn(o?.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Cn(o?.pointerEvents)||""),this.hasProjected&&!Wt(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=vP(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),a.transform=h;const{x:f,y:p}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Ho){if(d[m]===void 0)continue;const{correct:g,applyTo:y,isCSSVariable:w}=Ho[m],x=h==="none"?d[m]:g(d[m],c);if(y){const v=y.length;for(let S=0;S<v;S++)a[y[S]]=x}else w?this.options.visualElement.renderState.vars[m]=x:a[m]=x}this.options.layoutId&&(a.pointerEvents=c===this?Cn(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(gh),this.root.sharedNodes.clear()}}}function PP(e){e.updateLayout()}function jP(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:n}=e.options,i=t.source!==e.layout.source;n==="size"?Ve(d=>{const h=i?t.measuredBox[d]:t.layoutBox[d],f=Pe(h);h.min=r[d].min,h.max=h.min+f}):Dy(n,t.layoutBox,r)&&Ve(d=>{const h=i?t.measuredBox[d]:t.layoutBox[d],f=Pe(r[d]);h.max=h.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+f)});const a=jr();vs(a,r,t.layoutBox);const o=jr();i?vs(o,e.applyTransform(s,!0),t.measuredBox):vs(o,r,t.layoutBox);const l=!jy(a);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const p=ue();Zn(p,t.layoutBox,h.layoutBox);const m=ue();Zn(m,r,f.layoutBox),Iy(p,m)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=p,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function IP(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function OP(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function NP(e){e.clearSnapshot()}function gh(e){e.clearMeasurements()}function yh(e){e.isLayoutDirty=!1}function MP(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function vh(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $P(e){e.resolveTargetDelta()}function DP(e){e.calcProjection()}function LP(e){e.resetSkewAndRotation()}function UP(e){e.removeLeadSnapshot()}function bh(e,t,r){e.translate=ee(t.translate,0,r),e.scale=ee(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function wh(e,t,r,s){e.min=ee(t.min,r.min,s),e.max=ee(t.max,r.max,s)}function FP(e,t,r,s){wh(e.x,t.x,r.x,s),wh(e.y,t.y,r.y,s)}function VP(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const BP={duration:.45,ease:[.4,0,.1,1]},xh=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),_h=xh("applewebkit/")&&!xh("chrome/")?Math.round:He;function Sh(e){e.min=_h(e.min),e.max=_h(e.max)}function zP(e){Sh(e.x),Sh(e.y)}function Dy(e,t,r){return e==="position"||e==="preserve-aspect"&&!hP(dh(t),dh(r),.2)}function qP(e){return e!==e.root&&e.scroll?.wasRoot}const HP=$y({attachResizeListener:(e,t)=>$s(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),Ta={current:void 0},Ly=$y({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ta.current){const e=new HP({});e.mount(window),e.setOptions({layoutScroll:!0}),Ta.current=e}return Ta.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),wc=b.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function kh(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function GP(...e){return t=>{let r=!1;const s=e.map(n=>{const i=kh(n,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let n=0;n<s.length;n++){const i=s[n];typeof i=="function"?i():kh(e[n],null)}}}}function KP(...e){return b.useCallback(GP(...e),e)}class WP extends b.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const s=r.offsetParent,n=Vo(s)&&s.offsetWidth||0,i=Vo(s)&&s.offsetHeight||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=n-a.width-a.left,a.bottom=i-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function JP({children:e,isPresent:t,anchorX:r,anchorY:s,root:n}){const i=b.useId(),a=b.useRef(null),o=b.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:l}=b.useContext(wc),c=e.props?.ref??e?.ref,d=KP(a,c);return b.useInsertionEffect(()=>{const{width:h,height:f,top:p,left:m,right:g,bottom:y}=o.current;if(t||!a.current||!h||!f)return;const w=r==="left"?`left: ${m}`:`right: ${g}`,x=s==="bottom"?`bottom: ${y}`:`top: ${p}`;a.current.dataset.motionPopId=i;const v=document.createElement("style");l&&(v.nonce=l);const S=n??document.head;return S.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${w}px !important;
            ${x}px !important;
          }
        `),()=>{S.contains(v)&&S.removeChild(v)}},[t]),u.jsx(WP,{isPresent:t,childRef:a,sizeRef:o,children:b.cloneElement(e,{ref:d})})}const YP=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:n,presenceAffectsLayout:i,mode:a,anchorX:o,anchorY:l,root:c})=>{const d=Gl(QP),h=b.useId();let f=!0,p=b.useMemo(()=>(f=!1,{id:h,initial:t,isPresent:r,custom:n,onExitComplete:m=>{d.set(m,!0);for(const g of d.values())if(!g)return;s&&s()},register:m=>(d.set(m,!1),()=>d.delete(m))}),[r,d,s]);return i&&f&&(p={...p}),b.useMemo(()=>{d.forEach((m,g)=>d.set(g,!1))},[r]),b.useEffect(()=>{!r&&!d.size&&s&&s()},[r]),a==="popLayout"&&(e=u.jsx(JP,{isPresent:r,anchorX:o,anchorY:l,root:c,children:e})),u.jsx(Ti.Provider,{value:p,children:e})};function QP(){return new Map}function Uy(e=!0){const t=b.useContext(Ti);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:s,register:n}=t,i=b.useId();b.useEffect(()=>{if(e)return n(i)},[e]);const a=b.useCallback(()=>e&&s&&s(i),[i,s,e]);return!r&&s?[!1,a]:[!0]}const dn=e=>e.key||"";function Eh(e){const t=[];return b.Children.forEach(e,r=>{b.isValidElement(r)&&t.push(r)}),t}const XP=({children:e,custom:t,initial:r=!0,onExitComplete:s,presenceAffectsLayout:n=!0,mode:i="sync",propagate:a=!1,anchorX:o="left",anchorY:l="top",root:c})=>{const[d,h]=Uy(a),f=b.useMemo(()=>Eh(e),[e]),p=a&&!d?[]:f.map(dn),m=b.useRef(!0),g=b.useRef(f),y=Gl(()=>new Map),w=b.useRef(new Set),[x,v]=b.useState(f),[S,k]=b.useState(f);yg(()=>{m.current=!1,g.current=f;for(let _=0;_<S.length;_++){const A=dn(S[_]);p.includes(A)?(y.delete(A),w.current.delete(A)):y.get(A)!==!0&&y.set(A,!1)}},[S,p.length,p.join("-")]);const T=[];if(f!==x){let _=[...f];for(let A=0;A<S.length;A++){const E=S[A],P=dn(E);p.includes(P)||(_.splice(A,0,E),T.push(E))}return i==="wait"&&T.length&&(_=T),k(Eh(_)),v(f),null}const{forceRender:C}=b.useContext(Hl);return u.jsx(u.Fragment,{children:S.map(_=>{const A=dn(_),E=a&&!d?!1:f===S||p.includes(A),P=()=>{if(w.current.has(A))return;if(w.current.add(A),y.has(A))y.set(A,!0);else return;let M=!0;y.forEach(V=>{V||(M=!1)}),M&&(C?.(),k(g.current),a&&h?.(),s&&s())};return u.jsx(YP,{isPresent:E,initial:!m.current||r?void 0:!1,custom:t,presenceAffectsLayout:n,mode:i,root:c,onExitComplete:E?void 0:P,anchorX:o,anchorY:l,children:_},A)})})},Fy=b.createContext({strict:!1}),Th={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Ch=!1;function ZP(){if(Ch)return;const e={};for(const t in Th)e[t]={isEnabled:r=>Th[t].some(s=>!!r[s])};my(e),Ch=!0}function Vy(){return ZP(),LR()}function ej(e){const t=Vy();for(const r in e)t[r]={...t[r],...e[r]};my(t)}const tj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ei(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||tj.has(e)}let By=e=>!ei(e);function rj(e){typeof e=="function"&&(By=t=>t.startsWith("on")?!ei(t):e(t))}try{rj(require("@emotion/is-prop-valid").default)}catch{}function sj(e,t,r){const s={};for(const n in e)n==="values"&&typeof e.values=="object"||(By(n)||r===!0&&ei(n)||!t&&!ei(n)||e.draggable&&n.startsWith("onDrag"))&&(s[n]=e[n]);return s}const Ri=b.createContext({});function nj(e,t){if(Ai(e)){const{initial:r,animate:s}=e;return{initial:r===!1||Ms(r)?r:void 0,animate:Ms(s)?s:void 0}}return e.inherit!==!1?t:{}}function ij(e){const{initial:t,animate:r}=nj(e,b.useContext(Ri));return b.useMemo(()=>({initial:t,animate:r}),[Ah(t),Ah(r)])}function Ah(e){return Array.isArray(e)?e.join(" "):e}const xc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zy(e,t,r){for(const s in t)!Te(t[s])&&!_y(s,r)&&(e[s]=t[s])}function aj({transformTemplate:e},t){return b.useMemo(()=>{const r=xc();return vc(r,t,e),Object.assign({},r.vars,r.style)},[t])}function oj(e,t){const r=e.style||{},s={};return zy(s,r,e),Object.assign(s,aj(e,t)),s}function lj(e,t){const r={},s=oj(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const qy=()=>({...xc(),attrs:{}});function cj(e,t,r,s){const n=b.useMemo(()=>{const i=qy();return Sy(i,t,Ey(s),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};zy(i,e.style,e),n.style={...i,...n.style}}return n}const uj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _c(e){return typeof e!="string"||e.includes("-")?!1:!!(uj.indexOf(e)>-1||/[A-Z]/u.test(e))}function dj(e,t,r,{latestValues:s},n,i=!1,a){const l=(a??_c(e)?cj:lj)(t,s,n,e),c=sj(t,typeof e=="string",i),d=e!==b.Fragment?{...c,...l,ref:r}:{},{children:h}=t,f=b.useMemo(()=>Te(h)?h.get():h,[h]);return b.createElement(e,{...d,children:f})}function hj({scrapeMotionValuesFromProps:e,createRenderState:t},r,s,n){return{latestValues:fj(r,s,n,e),renderState:t()}}function fj(e,t,r,s){const n={},i=s(e,{});for(const f in i)n[f]=Cn(i[f]);let{initial:a,animate:o}=e;const l=Ai(e),c=py(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const h=d?o:a;if(h&&typeof h!="boolean"&&!Ci(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const m=dc(e,f[p]);if(m){const{transitionEnd:g,transition:y,...w}=m;for(const x in w){let v=w[x];if(Array.isArray(v)){const S=d?v.length-1:0;v=v[S]}v!==null&&(n[x]=v)}for(const x in g)n[x]=g[x]}}}return n}const Hy=e=>(t,r)=>{const s=b.useContext(Ri),n=b.useContext(Ti),i=()=>hj(e,t,s,n);return r?i():Gl(i)},pj=Hy({scrapeMotionValuesFromProps:bc,createRenderState:xc}),mj=Hy({scrapeMotionValuesFromProps:Ty,createRenderState:qy}),gj=Symbol.for("motionComponentSymbol");function yj(e,t,r){const s=b.useRef(r);b.useInsertionEffect(()=>{s.current=r});const n=b.useRef(null);return b.useCallback(i=>{i&&e.onMount?.(i),t&&(i?t.mount(i):t.unmount());const a=s.current;if(typeof a=="function")if(i){const o=a(i);typeof o=="function"&&(n.current=o)}else n.current?(n.current(),n.current=null):a(i);else a&&(a.current=i)},[t])}const Gy=b.createContext({});function us(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function vj(e,t,r,s,n,i){const{visualElement:a}=b.useContext(Ri),o=b.useContext(Fy),l=b.useContext(Ti),c=b.useContext(wc).reducedMotion,d=b.useRef(null),h=b.useRef(!1);s=s||o.renderer,!d.current&&s&&(d.current=s(e,{visualState:t,parent:a,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c,isSVG:i}),h.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const f=d.current,p=b.useContext(Gy);f&&!f.projection&&n&&(f.type==="html"||f.type==="svg")&&bj(d.current,r,n,p);const m=b.useRef(!1);b.useInsertionEffect(()=>{f&&m.current&&f.update(r,l)});const g=r[ey],y=b.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return yg(()=>{h.current=!0,f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),y.current&&f.animationState&&f.animationState.animateChanges())}),b.useEffect(()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),y.current=!1),f.enteringChildren=void 0)}),f}function bj(e,t,r,s){const{layoutId:n,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Ky(e.parent)),e.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!a||o&&us(o),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:l,layoutRoot:c})}function Ky(e){if(e)return e.options.allowProjection!==!1?e.projection:Ky(e.parent)}function Ca(e,{forwardMotionProps:t=!1,type:r}={},s,n){s&&ej(s);const i=r?r==="svg":_c(e),a=i?mj:pj;function o(c,d){let h;const f={...b.useContext(wc),...c,layoutId:wj(c)},{isStatic:p}=f,m=ij(c),g=a(c,p);if(!p&&gg){xj();const y=_j(f);h=y.MeasureLayout,m.visualElement=vj(e,g,f,n,y.ProjectionNode,i)}return u.jsxs(Ri.Provider,{value:m,children:[h&&m.visualElement?u.jsx(h,{visualElement:m.visualElement,...f}):null,dj(e,c,yj(g,m.visualElement,d),g,p,t,i)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const l=b.forwardRef(o);return l[gj]=e,l}function wj({layoutId:e}){const t=b.useContext(Hl).id;return t&&e!==void 0?t+"-"+e:e}function xj(e,t){b.useContext(Fy).strict}function _j(e){const t=Vy(),{drag:r,layout:s}=t;if(!r&&!s)return{};const n={...r,...s};return{MeasureLayout:r?.isEnabled(e)||s?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function Sj(e,t){if(typeof Proxy>"u")return Ca;const r=new Map,s=(i,a)=>Ca(i,a,e,t),n=(i,a)=>s(i,a);return new Proxy(n,{get:(i,a)=>a==="create"?s:(r.has(a)||r.set(a,Ca(a,void 0,e,t)),r.get(a))})}const kj=(e,t)=>t.isSVG??_c(e)?new tP(t):new JR(t,{allowProjection:e!==b.Fragment});class Ej extends Ft{constructor(t){super(t),t.animationState||(t.animationState=aP(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ci(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Tj=0;class Cj extends Ft{constructor(){super(...arguments),this.id=Tj++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const n=this.node.animationState.setActive("exit",!t);r&&!t&&n.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Aj={animation:{Feature:Ej},exit:{Feature:Cj}};function Gs(e){return{point:{x:e.pageX,y:e.pageY}}}const Rj=e=>t=>mc(t)&&e(t,Gs(t));function bs(e,t,r,s){return $s(e,t,Rj(r),s)}const Wy=({current:e})=>e?e.ownerDocument.defaultView:null,Rh=(e,t)=>Math.abs(e-t);function Pj(e,t){const r=Rh(e.x,t.x),s=Rh(e.y,t.y);return Math.sqrt(r**2+s**2)}const Ph=new Set(["auto","scroll"]);class Jy{constructor(t,r,{transformPagePoint:s,contextWindow:n=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=p=>{this.handleScroll(p.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Ra(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=Pj(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!g)return;const{point:y}=p,{timestamp:w}=_e;this.history.push({...y,timestamp:w});const{onStart:x,onMove:v}=this.handlers;m||(x&&x(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Aa(m,this.transformPagePoint),J.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:w}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ra(p.type==="pointercancel"?this.lastMoveEventInfo:Aa(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,x),y&&y(p,x)},!mc(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=s,this.distanceThreshold=a,this.contextWindow=n||window;const l=Gs(t),c=Aa(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=_e;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=r;f&&f(t,Ra(c,this.history)),this.removeListeners=zs(bs(this.contextWindow,"pointermove",this.handlePointerMove),bs(this.contextWindow,"pointerup",this.handlePointerUp),bs(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(t){let r=t.parentElement;for(;r;){const s=getComputedStyle(r);(Ph.has(s.overflowX)||Ph.has(s.overflowY))&&this.scrollPositions.set(r,{x:r.scrollLeft,y:r.scrollTop}),r=r.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const r=this.scrollPositions.get(t);if(!r)return;const s=t===window,n=s?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},i={x:n.x-r.x,y:n.y-r.y};i.x===0&&i.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(t,n),J.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Mt(this.updatePoint)}}function Aa(e,t){return t?{point:t(e.point)}:e}function jh(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ra({point:e},t){return{point:e,delta:jh(e,Yy(t)),offset:jh(e,jj(t)),velocity:Ij(t,.1)}}function jj(e){return e[0]}function Yy(e){return e[e.length-1]}function Ij(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null;const n=Yy(e);for(;r>=0&&(s=e[r],!(n.timestamp-s.timestamp>pt(t)));)r--;if(!s)return{x:0,y:0};const i=qe(n.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(n.x-s.x)/i,y:(n.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Oj(e,{min:t,max:r},s){return t!==void 0&&e<t?e=s?ee(t,e,s.min):Math.max(e,t):r!==void 0&&e>r&&(e=s?ee(r,e,s.max):Math.min(e,r)),e}function Ih(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Nj(e,{top:t,left:r,bottom:s,right:n}){return{x:Ih(e.x,r,n),y:Ih(e.y,t,s)}}function Oh(e,t){let r=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}function Mj(e,t){return{x:Oh(e.x,t.x),y:Oh(e.y,t.y)}}function $j(e,t){let r=.5;const s=Pe(e),n=Pe(t);return n>s?r=Is(t.min,t.max-s,e.min):s>n&&(r=Is(e.min,e.max-n,t.min)),ct(0,1,r)}function Dj(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Go=.35;function Lj(e=Go){return e===!1?e=0:e===!0&&(e=Go),{x:Nh(e,"left","right"),y:Nh(e,"top","bottom")}}function Nh(e,t,r){return{min:Mh(e,t),max:Mh(e,r)}}function Mh(e,t){return typeof e=="number"?e:e[t]||0}const Uj=new WeakMap;class Fj{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ue(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:s}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=h=>{r?(this.stopAnimation(),this.snapToCursor(Gs(h).point)):this.pauseAnimation()},a=(h,f)=>{this.stopAnimation();const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TR(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ve(w=>{let x=this.getAxisMotionValue(w).get()||0;if(at.test(x)){const{projection:v}=this.visualElement;if(v&&v.layout){const S=v.layout.layoutBox[w];S&&(x=Pe(S)*(parseFloat(x)/100))}}this.originPoint[w]=x}),g&&J.postRender(()=>g(h,f)),Lo(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:w}=f;if(m&&this.currentDirection===null){this.currentDirection=Vj(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),y&&y(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Ve(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Jy(t,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:s,contextWindow:Wy(this.visualElement),element:this.visualElement.current})}stop(t,r){const s=t||this.latestPointerEvent,n=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!n||!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&J.postRender(()=>o(s,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,r,s){const{drag:n}=this.getProps();if(!s||!hn(t,n,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(a=Oj(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,n=this.constraints;t&&us(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=Nj(s.layoutBox,t):this.constraints=!1,this.elastic=Lj(r),n!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ve(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=Dj(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!us(t))return!1;const s=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=zR(s,n.root,this.visualElement.getTransformPagePoint());let a=Mj(n.layout.layoutBox,i);if(r){const o=r(FR(a));this.hasMutatedConstraints=!!o,o&&(a=yy(o))}return a}startAnimation(t){const{drag:r,dragMomentum:s,dragElastic:n,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Ve(d=>{if(!hn(d,r,this.currentDirection))return;let h=l&&l[d]||{};a&&(h={min:0,max:0});const f=n?200:1e6,p=n?40:1e7,m={type:"inertia",velocity:s?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(c).then(o)}startAxisValueAnimation(t,r){const s=this.getAxisMotionValue(t);return Lo(this.visualElement,t),s.start(uc(t,s,0,r,this.visualElement,!1))}stopAnimation(){Ve(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ve(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),n=s[r];return n||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Ve(r=>{const{drag:s}=this.getProps();if(!hn(r,s,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(r);if(n&&n.layout){const{min:a,max:o}=n.layout.layoutBox[r],l=i.get()||0;i.set(t[r]-ee(a,o,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!us(r)||!s||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Ve(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();n[a]=$j({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ve(a=>{if(!hn(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(ee(l,c,n[a]))})}addListeners(){if(!this.visualElement.current)return;Uj.set(this.visualElement,this);const t=this.visualElement.current,r=bs(t,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps(),h=l.target,f=h!==t&&dy(h);c&&d&&!f&&this.start(l)}),s=()=>{const{dragConstraints:l}=this.getProps();us(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",s);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),J.read(s);const a=$s(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ve(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())}));return()=>{a(),r(),i(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:a=Go,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:s,dragPropagation:n,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function hn(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Vj(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Bj extends Ft{constructor(t){super(t),this.removeGroupControls=He,this.removeListeners=He,this.controls=new Fj(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||He}update(){const{dragControls:t}=this.node.getProps(),{dragControls:r}=this.node.prevProps||{};t!==r&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const $h=e=>(t,r)=>{e&&J.postRender(()=>e(t,r))};class zj extends Ft{constructor(){super(...arguments),this.removePointerDownListener=He}onPointerDown(t){this.session=new Jy(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Wy(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:s,onPanEnd:n}=this.node.getProps();return{onSessionStart:$h(t),onStart:$h(r),onMove:s,onEnd:(i,a)=>{delete this.session,n&&J.postRender(()=>n(i,a))}}}mount(){this.removePointerDownListener=bs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Pa=!1;class qj extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s,layoutId:n}=this.props,{projection:i}=t;i&&(r.group&&r.group.add(i),s&&s.register&&n&&s.register(i),Pa&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),An.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:s,drag:n,isPresent:i}=this.props,{projection:a}=s;return a&&(a.isPresent=i,t.layoutDependency!==r&&a.setOptions({...a.options,layoutDependency:r}),Pa=!0,n||t.layoutDependency!==r||r===void 0||t.isPresent!==i?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||J.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),pc.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:n}=t;Pa=!0,n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),s&&s.deregister&&s.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Qy(e){const[t,r]=Uy(),s=b.useContext(Hl);return u.jsx(qj,{...e,layoutGroup:s,switchLayoutGroup:b.useContext(Gy),isPresent:t,safeToRemove:r})}const Hj={pan:{Feature:zj},drag:{Feature:Bj,ProjectionNode:Ly,MeasureLayout:Qy}};function Dh(e,t,r){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",r==="Start");const n="onHover"+r,i=s[n];i&&J.postRender(()=>i(t,Gs(t)))}class Gj extends Ft{mount(){const{current:t}=this.node;t&&(this.unmount=CR(t,(r,s)=>(Dh(this.node,s,"Start"),n=>Dh(this.node,n,"End"))))}unmount(){}}class Kj extends Ft{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zs($s(this.node.current,"focus",()=>this.onFocus()),$s(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Lh(e,t,r){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",r==="Start");const n="onTap"+(r==="End"?"":r),i=s[n];i&&J.postRender(()=>i(t,Gs(t)))}class Wj extends Ft{mount(){const{current:t}=this.node;t&&(this.unmount=PR(t,(r,s)=>(Lh(this.node,s,"Start"),(n,{success:i})=>Lh(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ko=new WeakMap,ja=new WeakMap,Jj=e=>{const t=Ko.get(e.target);t&&t(e)},Yj=e=>{e.forEach(Jj)};function Qj({root:e,...t}){const r=e||document;ja.has(r)||ja.set(r,{});const s=ja.get(r),n=JSON.stringify(t);return s[n]||(s[n]=new IntersectionObserver(Yj,{root:e,...t})),s[n]}function Xj(e,t,r){const s=Qj(t);return Ko.set(e,r),s.observe(e),()=>{Ko.delete(e),s.unobserve(e)}}const Zj={some:0,all:1};class eI extends Ft{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:s,amount:n="some",once:i}=t,a={root:r?r.current:void 0,rootMargin:s,threshold:typeof n=="number"?n:Zj[n]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=c?d:h;f&&f(l)};return Xj(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(tI(t,r))&&this.startObserver()}unmount(){}}function tI({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const rI={inView:{Feature:eI},tap:{Feature:Wj},focus:{Feature:Kj},hover:{Feature:Gj}},sI={layout:{ProjectionNode:Ly,MeasureLayout:Qy}},nI={...Aj,...rI,...Hj,...sI},Xy=Sj(nI,kj),iI=({src:e,alt:t,className:r="",width:s=800,priority:n=!1,aspectRatio:i="aspect-video",onLoad:a})=>{const[o,l]=b.useState(!1),[c,d]=b.useState(!1),h=wm(e,s);return u.jsxs("div",{className:`relative overflow-hidden bg-slate-800/20 ${i} ${r}`,children:[u.jsx(XP,{children:!o&&!c&&u.jsx(Xy.div,{initial:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-slate-800 animate-pulse z-0"})}),u.jsx("img",{src:h,alt:t,loading:n?"eager":"lazy",className:`w-full h-full object-cover transition-opacity duration-700 ease-in-out ${o?"opacity-100":"opacity-0"}`,onLoad:()=>{l(!0),a&&a()},onError:()=>d(!0)}),c&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/40 text-slate-500",children:u.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Image Error"})})]})},aI=({onNeuralMatch:e,onBrowseInventory:t,onSellCar:r})=>u.jsxs("section",{className:"relative h-[85vh] min-h-[600px] w-full flex items-center justify-center overflow-hidden rounded-b-[60px] lg:rounded-b-[100px] shadow-2xl shadow-cyan-900/40",children:[u.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[u.jsx(iI,{src:"https://www.hyundai.com/content/dam/hyundai/ww/en/images/N/n-vision-74/highlights/n-vision-74-highlights-kv.jpg",alt:"Richard Automotive Future Ready",className:"absolute inset-0 w-full h-full opacity-60 scale-105",priority:!0,aspectRatio:"aspect-none"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0f172a] via-[#0f172a]/60 to-transparent"}),u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 mix-blend-overlay"})]}),u.jsxs("div",{className:"relative z-10 w-full max-w-7xl mx-auto px-6 lg:px-12 flex flex-col items-center text-center space-y-10",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-md border border-white/20 px-6 py-2 rounded-full animate-in slide-in-from-bottom-5 duration-700 fade-in",children:[u.jsx(Ss,{size:16,className:"text-[#00aed9] fill-[#00aed9]"}),u.jsx("span",{className:"text-sm font-bold uppercase tracking-[0.2em] text-white",children:"Experiencia Automotriz 2025"})]}),u.jsxs("h1",{className:"text-6xl md:text-8xl lg:text-9xl font-black text-white tracking-tighter leading-[0.9] animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-100",children:["FUTURE ",u.jsx("br",{}),u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-cyan-200",children:"READY."})]}),u.jsx("p",{className:"text-xl md:text-2xl text-slate-300 max-w-2xl font-medium leading-relaxed animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-200",children:"Compra tu prximo auto 100% online. Sin vendedores, sin sorpresas, y con la garanta de Richard Automotive."}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 pt-4 animate-in slide-in-from-bottom-5 duration-1000 fade-in delay-300",children:[u.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-[#00aed9] text-white rounded-full font-black uppercase tracking-widest overflow-hidden transition-all hover:scale-105 hover:shadow-[0_0_40px_rgba(0,174,217,0.4)]",children:[u.jsxs("span",{className:"relative z-10 flex items-center gap-3",children:["Ver Inventario ",u.jsx(Cm,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),u.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]}),u.jsxs("button",{onClick:e,className:"group px-8 py-4 bg-white/10 backdrop-blur-md border border-white/20 text-white rounded-full font-black uppercase tracking-widest hover:bg-white/20 transition-all flex items-center gap-3",children:[u.jsx(Bn,{size:20,className:"text-[#00aed9]"}),"Neural Match"]}),u.jsxs("button",{onClick:r,className:"group px-8 py-4 bg-emerald-500/10 backdrop-blur-md border border-emerald-500/20 text-emerald-400 rounded-full font-black uppercase tracking-widest hover:bg-emerald-500/20 transition-all flex items-center gap-3",children:[u.jsx(ik,{size:20}),"Vender mi Auto"]})]})]}),u.jsxs("div",{className:"absolute bottom-12 left-0 right-0 flex justify-center gap-8 md:gap-16 text-white/60 text-[10px] md:text-xs font-bold uppercase tracking-widest animate-in fade-in delay-700",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," 7-Day Money Back"]}),u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," 150-Point Inspection"]}),u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-[#00aed9] rounded-full"})," Home Delivery"]})]})]}),oI=()=>u.jsx("section",{className:"py-12 border-t border-slate-200 dark:border-slate-800",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsx(Ia,{icon:u.jsx(_i,{size:24}),title:"Certificacin 150 Puntos",desc:"Cada auto pasa una inspeccin rigurosa antes de ser listado.",color:"blue"}),u.jsx(Ia,{icon:u.jsx($m,{size:24}),title:"Love Your Car Guarantee",desc:"Prubalo por 24 horas. Si no te enamora, devulvelo.",color:"cyan"}),u.jsx(Ia,{icon:u.jsx(jm,{size:24}),title:"Entrega o Recogido",desc:"T eliges: te lo llevamos a casa o vienes a nuestro centro.",color:"purple"})]})}),Ia=({icon:e,title:t,desc:r,color:s})=>{const n={blue:"bg-blue-100 dark:bg-blue-900/20 text-blue-500",cyan:"bg-cyan-100 dark:bg-cyan-900/20 text-[#00aed9]",purple:"bg-purple-100 dark:bg-purple-900/20 text-purple-500"};return u.jsxs("div",{className:"flex items-start gap-4 p-6 rounded-3xl bg-slate-50 dark:bg-slate-900/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors cursor-default",children:[u.jsx("div",{className:`p-3 rounded-2xl ${n[s]}`,children:e}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:t}),u.jsx("p",{className:"text-sm text-slate-500 mt-1 leading-relaxed",children:r})]})]})},lI=()=>{const e=[{id:1,name:"Carlos Rodrguez",role:"Dueo de Santa Fe 2024",comment:"La experiencia con Richard Automotive fue increble. La IA me ayud a elegir la SUV perfecta para mi familia y el proceso fue totalmente transparente.",rating:5,img:"https://randomuser.me/api/portraits/men/32.jpg"},{id:2,name:"Sofa Mndez",role:"Duea de IONIQ 5",comment:"Nunca pens que comprar un auto elctrico fuera tan fcil. El 'Neural Match' acert totalmente con mi estilo de vida. Estoy enamorada de mi IONIQ!",rating:5,img:"https://randomuser.me/api/portraits/women/44.jpg"},{id:3,name:"Miguel ngel",role:"Dueo de Genesis GV80",comment:"Atencin de primera clase. Me trajeron el auto a la oficina para probarlo y cerramos el trato en menos de una hora. Eficiencia pura.",rating:5,img:"https://randomuser.me/api/portraits/men/85.jpg"}];return u.jsxs("section",{className:"py-20 relative",children:[u.jsx("div",{className:"absolute top-0 right-0 p-20 opacity-5 pointer-events-none md:block hidden",children:u.jsx(zn,{size:300,className:"text-[#00aed9]"})}),u.jsxs("div",{className:"text-center mb-16 space-y-4 relative z-10",children:[u.jsx("span",{className:"text-[#00aed9] font-black uppercase tracking-widest text-sm",children:"Nuestros Clientes"}),u.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-slate-800 dark:text-white uppercase tracking-tighter",children:["Historias de ",u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#00aed9] to-cyan-400",children:"xito"})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 px-4 relative z-10",children:e.map(t=>u.jsxs("div",{className:"bg-white dark:bg-slate-800/80 p-8 rounded-[30px] border border-slate-100 dark:border-slate-700 relative hover:transform hover:-translate-y-2 transition-all duration-300 shadow-xl shadow-slate-200/50 dark:shadow-none",children:[u.jsx("div",{className:"flex gap-1 mb-6 text-amber-400",children:[...Array(t.rating)].map((r,s)=>u.jsx(zn,{size:16,fill:"currentColor",stroke:"none"},s))}),u.jsxs("p",{className:"text-slate-600 dark:text-slate-300 font-medium leading-relaxed mb-8 relative z-10",children:['"',t.comment,'"']}),u.jsxs("div",{className:"flex items-center gap-4 border-t border-slate-100 dark:border-slate-700/50 pt-6",children:[u.jsx("img",{src:t.img,alt:t.name,className:"w-12 h-12 rounded-full object-cover ring-2 ring-[#00aed9]/20"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:t.name}),u.jsx("p",{className:"text-xs text-[#00aed9] font-bold uppercase tracking-wide",children:t.role})]})]})]},t.id))})]})},Zy=[{question:"Puedo comprar un auto 100% en lnea sin visitar el concesionario?",answer:"S, absolutamente. Nuestra plataforma 'Richard Automotive Direct' le permite seleccionar su vehculo, personalizar su financiamiento, valorar su trade-in y firmar documentos digitalmente. Entregamos el auto directamente en la puerta de su casa u oficina."},{question:"Cmo funciona la aprobacin de crdito en lnea?",answer:"Es instantnea y segura. Complete nuestro formulario de Pre-Cualificacin encriptado (SSL 256-bit). Nuestro sistema AI analiza su perfil con mltiples bancos simultneamente para ofrecerle los trminos reales (APR, mensualidad y pronto) en minutos, sin afectar su puntaje crediticio inicial (Soft Pull)."},{question:"Aceptan autos en 'Trade-In' aunque deba dinero?",answer:"S. Aceptamos su auto actual como parte de pago. Si todava tiene balance pendiente, nosotros nos encargamos de liquidar el prstamo anterior con su banco. Si el valor de su auto es mayor a la deuda, usamos el excedente a favor de su nueva compra."},{question:"Qu garanta tienen los vehculos usados certificados?"}],cI={"@context":"https://schema.org","@type":"FAQPage",mainEntity:Zy.map(e=>({"@type":"Question",name:e.question,acceptedAnswer:{"@type":"Answer",text:e.answer}}))},uI=()=>u.jsx("section",{className:"py-20 bg-white dark:bg-slate-900 border-t border-slate-100 dark:border-slate-800",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[u.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(cI)}}),u.jsxs("div",{className:"text-center mb-16",children:[u.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#00aed9]/10 text-[#00aed9] font-bold text-xs uppercase tracking-widest mb-4",children:[u.jsx(dk,{size:14})," Soporte al Cliente"]}),u.jsx("h2",{className:"text-3xl md:text-5xl font-black text-slate-800 dark:text-white uppercase tracking-tighter",children:"Preguntas Frecuentes"}),u.jsx("p",{className:"mt-4 text-slate-500 dark:text-slate-400 max-w-lg mx-auto",children:"Resolvemos sus dudas sobre el proceso de compra digital ms avanzado del mercado."})]}),u.jsx("div",{className:"space-y-4",children:Zy.map((e,t)=>u.jsxs("details",{className:"group bg-slate-50 dark:bg-slate-800 rounded-2xl border border-transparent hover:border-[#00aed9] open:border-[#00aed9]/30 transition-all duration-300 overflow-hidden",children:[u.jsxs("summary",{className:"flex justify-between items-center p-6 cursor-pointer list-none text-slate-800 dark:text-white font-bold text-lg select-none group-hover:bg-white dark:group-hover:bg-slate-700/50 transition-colors",children:[u.jsx("span",{children:e.question}),u.jsx("span",{className:"transform group-open:rotate-180 transition-transform duration-300 text-[#00aed9]",children:u.jsx(Rm,{})})]}),u.jsx("div",{className:"px-6 pb-6 pt-2 text-slate-500 dark:text-slate-300 leading-relaxed border-t border-slate-100 dark:border-slate-700/50",children:e.answer})]},t))})]})}),dI=()=>u.jsxs("footer",{className:"mt-12 py-12 px-8 lg:px-16 rounded-[40px] bg-[#173d57] dark:bg-[#0d2232] text-white relative overflow-hidden group shadow-2xl shadow-cyan-900/10",children:[u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10 mix-blend-overlay"}),u.jsx("div",{className:"absolute -top-20 -right-20 p-20 opacity-5 pointer-events-none rotate-12 transition-transform duration-[2s] group-hover:rotate-45",children:u.jsx(jm,{size:400})}),u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-10",children:[u.jsxs("div",{className:"text-center md:text-left",children:[u.jsxs("h3",{className:"text-2xl font-black uppercase tracking-tight flex items-center gap-2 justify-center md:justify-start",children:["Richard",u.jsx("span",{className:"text-[#00aed9]",children:"Automotive"})]}),u.jsx("p",{className:"text-blue-200 text-sm mt-2 max-w-md",children:"Redefiniendo la compra de autos en Puerto Rico con Inteligencia Artificial y transparencia total."})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx(fn,{icon:u.jsx(fk,{size:20}),label:"Instagram",href:"#"}),u.jsx(fn,{icon:u.jsx(ok,{size:20}),label:"Facebook",href:"#"}),u.jsx(fn,{icon:u.jsx(Mk,{size:20}),label:"YouTube",href:"#"}),u.jsx(fn,{icon:u.jsx(Rk,{size:20}),label:"X / Twitter",href:"#"})]})]}),u.jsxs("div",{className:"mt-12 pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center text-xs font-bold text-slate-400 gap-6",children:[u.jsx("p",{children:" 2025 Richard Automotive. Todos los derechos reservados."}),u.jsxs("div",{className:"flex gap-8",children:[u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Poltica de Privacidad"}),u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Trminos de Servicio"}),u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Mapa del Sitio"})]})]})]}),fn=({icon:e,label:t,href:r})=>u.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-white/10 hover:bg-[#00aed9] hover:scale-110 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg backdrop-blur-sm group",title:t,children:u.jsx("span",{className:"text-white group-hover:animate-bounce",children:e})}),e0=b.createContext(void 0),hI=({children:e})=>{const[t,r]=b.useState(()=>{try{const l=localStorage.getItem("richard_compare_cars_full");return l?JSON.parse(l):[]}catch(l){return console.error("Error parsing comparisons from local storage",l),[]}}),s=l=>{r(l),localStorage.setItem("richard_compare_cars_full",JSON.stringify(l))},n=l=>{if(t.length>=3){alert("Puedes comparar mximo 3 vehculos.");return}t.find(c=>c.id===l.id)||s([...t,l])},i=l=>{s(t.filter(c=>c.id!==l))},a=l=>t.some(c=>c.id===l),o=()=>{s([])};return u.jsx(e0.Provider,{value:{selectedCars:t,addCarToCompare:n,removeCarFromCompare:i,isInComparison:a,clearComparison:o},children:e})},t0=()=>{const e=b.useContext(e0);if(e===void 0)throw new Error("useComparison must be used within a ComparisonProvider");return e},fI=(e,t)=>{const r=new Array(e.length+t.length);for(let s=0;s<e.length;s++)r[s]=e[s];for(let s=0;s<t.length;s++)r[e.length+s]=t[s];return r},pI=(e,t)=>({classGroupId:e,validator:t}),r0=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),ti="-",Uh=[],mI="arbitrary..",gI=e=>{const t=vI(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return yI(a);const o=a.split(ti),l=o[0]===""&&o.length>1?1:0;return s0(o,l,t)},getConflictingClassGroupIds:(a,o)=>{if(o){const l=s[a],c=r[a];return l?c?fI(c,l):l:c||Uh}return r[a]||Uh}}},s0=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const n=e[t],i=r.nextPart.get(n);if(i){const c=s0(e,t+1,i);if(c)return c}const a=r.validators;if(a===null)return;const o=t===0?e.join(ti):e.slice(t).join(ti),l=a.length;for(let c=0;c<l;c++){const d=a[c];if(d.validator(o))return d.classGroupId}},yI=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),s=t.slice(0,r);return s?mI+s:void 0})(),vI=e=>{const{theme:t,classGroups:r}=e;return bI(r,t)},bI=(e,t)=>{const r=r0();for(const s in e){const n=e[s];Sc(n,r,s,t)}return r},Sc=(e,t,r,s)=>{const n=e.length;for(let i=0;i<n;i++){const a=e[i];wI(a,t,r,s)}},wI=(e,t,r,s)=>{if(typeof e=="string"){xI(e,t,r);return}if(typeof e=="function"){_I(e,t,r,s);return}SI(e,t,r,s)},xI=(e,t,r)=>{const s=e===""?t:n0(t,e);s.classGroupId=r},_I=(e,t,r,s)=>{if(kI(e)){Sc(e(s),t,r,s);return}t.validators===null&&(t.validators=[]),t.validators.push(pI(r,e))},SI=(e,t,r,s)=>{const n=Object.entries(e),i=n.length;for(let a=0;a<i;a++){const[o,l]=n[a];Sc(l,n0(t,o),r,s)}},n0=(e,t)=>{let r=e;const s=t.split(ti),n=s.length;for(let i=0;i<n;i++){const a=s[i];let o=r.nextPart.get(a);o||(o=r0(),r.nextPart.set(a,o)),r=o}return r},kI=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,EI=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),s=Object.create(null);const n=(i,a)=>{r[i]=a,t++,t>e&&(t=0,s=r,r=Object.create(null))};return{get(i){let a=r[i];if(a!==void 0)return a;if((a=s[i])!==void 0)return n(i,a),a},set(i,a){i in r?r[i]=a:n(i,a)}}},Wo="!",Fh=":",TI=[],Vh=(e,t,r,s,n)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:s,isExternal:n}),CI=e=>{const{prefix:t,experimentalParseClassName:r}=e;let s=n=>{const i=[];let a=0,o=0,l=0,c;const d=n.length;for(let g=0;g<d;g++){const y=n[g];if(a===0&&o===0){if(y===Fh){i.push(n.slice(l,g)),l=g+1;continue}if(y==="/"){c=g;continue}}y==="["?a++:y==="]"?a--:y==="("?o++:y===")"&&o--}const h=i.length===0?n:n.slice(l);let f=h,p=!1;h.endsWith(Wo)?(f=h.slice(0,-1),p=!0):h.startsWith(Wo)&&(f=h.slice(1),p=!0);const m=c&&c>l?c-l:void 0;return Vh(i,p,f,m)};if(t){const n=t+Fh,i=s;s=a=>a.startsWith(n)?i(a.slice(n.length)):Vh(TI,!1,a,void 0,!0)}if(r){const n=s;s=i=>r({className:i,parseClassName:n})}return s},AI=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,s)=>{t.set(r,1e6+s)}),r=>{const s=[];let n=[];for(let i=0;i<r.length;i++){const a=r[i],o=a[0]==="[",l=t.has(a);o||l?(n.length>0&&(n.sort(),s.push(...n),n=[]),s.push(a)):n.push(a)}return n.length>0&&(n.sort(),s.push(...n)),s}},RI=e=>({cache:EI(e.cacheSize),parseClassName:CI(e),sortModifiers:AI(e),...gI(e)}),PI=/\s+/,jI=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:n,sortModifiers:i}=t,a=[],o=e.trim().split(PI);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{isExternal:h,modifiers:f,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}=r(d);if(h){l=d+(l.length>0?" "+l:l);continue}let y=!!g,w=s(y?m.substring(0,g):m);if(!w){if(!y){l=d+(l.length>0?" "+l:l);continue}if(w=s(m),!w){l=d+(l.length>0?" "+l:l);continue}y=!1}const x=f.length===0?"":f.length===1?f[0]:i(f).join(":"),v=p?x+Wo:x,S=v+w;if(a.indexOf(S)>-1)continue;a.push(S);const k=n(w,y);for(let T=0;T<k.length;++T){const C=k[T];a.push(v+C)}l=d+(l.length>0?" "+l:l)}return l},II=(...e)=>{let t=0,r,s,n="";for(;t<e.length;)(r=e[t++])&&(s=i0(r))&&(n&&(n+=" "),n+=s);return n},i0=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=i0(e[s]))&&(r&&(r+=" "),r+=t);return r},OI=(e,...t)=>{let r,s,n,i;const a=l=>{const c=t.reduce((d,h)=>h(d),e());return r=RI(c),s=r.cache.get,n=r.cache.set,i=o,o(l)},o=l=>{const c=s(l);if(c)return c;const d=jI(l,r);return n(l,d),d};return i=a,(...l)=>i(II(...l))},NI=[],le=e=>{const t=r=>r[e]||NI;return t.isThemeGetter=!0,t},a0=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,o0=/^\((?:(\w[\w-]*):)?(.+)\)$/i,MI=/^\d+\/\d+$/,$I=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,LI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,UI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,FI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sr=e=>MI.test(e),z=e=>!!e&&!Number.isNaN(Number(e)),kt=e=>!!e&&Number.isInteger(Number(e)),Oa=e=>e.endsWith("%")&&z(e.slice(0,-1)),dt=e=>$I.test(e),VI=()=>!0,BI=e=>DI.test(e)&&!LI.test(e),l0=()=>!1,zI=e=>UI.test(e),qI=e=>FI.test(e),HI=e=>!I(e)&&!O(e),GI=e=>Qr(e,d0,l0),I=e=>a0.test(e),Ht=e=>Qr(e,h0,BI),Na=e=>Qr(e,QI,z),Bh=e=>Qr(e,c0,l0),KI=e=>Qr(e,u0,qI),pn=e=>Qr(e,f0,zI),O=e=>o0.test(e),as=e=>Xr(e,h0),WI=e=>Xr(e,XI),zh=e=>Xr(e,c0),JI=e=>Xr(e,d0),YI=e=>Xr(e,u0),mn=e=>Xr(e,f0,!0),Qr=(e,t,r)=>{const s=a0.exec(e);return s?s[1]?t(s[1]):r(s[2]):!1},Xr=(e,t,r=!1)=>{const s=o0.exec(e);return s?s[1]?t(s[1]):r:!1},c0=e=>e==="position"||e==="percentage",u0=e=>e==="image"||e==="url",d0=e=>e==="length"||e==="size"||e==="bg-size",h0=e=>e==="length",QI=e=>e==="number",XI=e=>e==="family-name",f0=e=>e==="shadow",ZI=()=>{const e=le("color"),t=le("font"),r=le("text"),s=le("font-weight"),n=le("tracking"),i=le("leading"),a=le("breakpoint"),o=le("container"),l=le("spacing"),c=le("radius"),d=le("shadow"),h=le("inset-shadow"),f=le("text-shadow"),p=le("drop-shadow"),m=le("blur"),g=le("perspective"),y=le("aspect"),w=le("ease"),x=le("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...S(),O,I],T=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],_=()=>[O,I,l],A=()=>[Sr,"full","auto",..._()],E=()=>[kt,"none","subgrid",O,I],P=()=>["auto",{span:["full",kt,O,I]},kt,O,I],M=()=>[kt,"auto",O,I],V=()=>["auto","min","max","fr",O,I],Q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],B=()=>["auto",..._()],H=()=>[Sr,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],R=()=>[e,O,I],Ce=()=>[...S(),zh,Bh,{position:[O,I]}],Se=()=>["no-repeat",{repeat:["","x","y","space","round"]}],_t=()=>["auto","cover","contain",JI,GI,{size:[O,I]}],Ge=()=>[Oa,as,Ht],X=()=>["","none","full",c,O,I],ne=()=>["",z,as,Ht],es=()=>["solid","dashed","dotted","double"],Ws=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>[z,Oa,zh,Bh],Js=()=>["","none",m,O,I],St=()=>["none",z,O,I],fr=()=>["none",z,O,I],ts=()=>[z,O,I],pr=()=>[Sr,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[dt],breakpoint:[dt],color:[VI],container:[dt],"drop-shadow":[dt],ease:["in","out","in-out"],font:[HI],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[dt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[dt],shadow:[dt],spacing:["px",z],text:[dt],"text-shadow":[dt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Sr,I,O,y]}],container:["container"],columns:[{columns:[z,I,O,o]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[kt,"auto",O,I]}],basis:[{basis:[Sr,"full","auto",o,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[z,Sr,"auto","initial","none",I]}],grow:[{grow:["",z,O,I]}],shrink:[{shrink:["",z,O,I]}],order:[{order:[kt,"first","last","none",O,I]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...Q(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...Q()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:B()}],mx:[{mx:B()}],my:[{my:B()}],ms:[{ms:B()}],me:[{me:B()}],mt:[{mt:B()}],mr:[{mr:B()}],mb:[{mb:B()}],ml:[{ml:B()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[o,"screen",...H()]}],"min-w":[{"min-w":[o,"screen","none",...H()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",r,as,Ht]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,O,Na]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Oa,I]}],"font-family":[{font:[WI,I,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,O,I]}],"line-clamp":[{"line-clamp":[z,"none",O,Na]}],leading:[{leading:[i,..._()]}],"list-image":[{"list-image":["none",O,I]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",O,I]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...es(),"wavy"]}],"text-decoration-thickness":[{decoration:[z,"from-font","auto",O,Ht]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[z,"auto",O,I]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",O,I]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",O,I]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ce()}],"bg-repeat":[{bg:Se()}],"bg-size":[{bg:_t()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},kt,O,I],radial:["",O,I],conic:[kt,O,I]},YI,KI]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:Ge()}],"gradient-via-pos":[{via:Ge()}],"gradient-to-pos":[{to:Ge()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:X()}],"rounded-s":[{"rounded-s":X()}],"rounded-e":[{"rounded-e":X()}],"rounded-t":[{"rounded-t":X()}],"rounded-r":[{"rounded-r":X()}],"rounded-b":[{"rounded-b":X()}],"rounded-l":[{"rounded-l":X()}],"rounded-ss":[{"rounded-ss":X()}],"rounded-se":[{"rounded-se":X()}],"rounded-ee":[{"rounded-ee":X()}],"rounded-es":[{"rounded-es":X()}],"rounded-tl":[{"rounded-tl":X()}],"rounded-tr":[{"rounded-tr":X()}],"rounded-br":[{"rounded-br":X()}],"rounded-bl":[{"rounded-bl":X()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...es(),"hidden","none"]}],"divide-style":[{divide:[...es(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...es(),"none","hidden"]}],"outline-offset":[{"outline-offset":[z,O,I]}],"outline-w":[{outline:["",z,as,Ht]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",d,mn,pn]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",h,mn,pn]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[z,Ht]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",f,mn,pn]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[z,O,I]}],"mix-blend":[{"mix-blend":[...Ws(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ws()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[z]}],"mask-image-linear-from-pos":[{"mask-linear-from":Y()}],"mask-image-linear-to-pos":[{"mask-linear-to":Y()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":Y()}],"mask-image-t-to-pos":[{"mask-t-to":Y()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":Y()}],"mask-image-r-to-pos":[{"mask-r-to":Y()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":Y()}],"mask-image-b-to-pos":[{"mask-b-to":Y()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":Y()}],"mask-image-l-to-pos":[{"mask-l-to":Y()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":Y()}],"mask-image-x-to-pos":[{"mask-x-to":Y()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":Y()}],"mask-image-y-to-pos":[{"mask-y-to":Y()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[O,I]}],"mask-image-radial-from-pos":[{"mask-radial-from":Y()}],"mask-image-radial-to-pos":[{"mask-radial-to":Y()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[z]}],"mask-image-conic-from-pos":[{"mask-conic-from":Y()}],"mask-image-conic-to-pos":[{"mask-conic-to":Y()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ce()}],"mask-repeat":[{mask:Se()}],"mask-size":[{mask:_t()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",O,I]}],filter:[{filter:["","none",O,I]}],blur:[{blur:Js()}],brightness:[{brightness:[z,O,I]}],contrast:[{contrast:[z,O,I]}],"drop-shadow":[{"drop-shadow":["","none",p,mn,pn]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",z,O,I]}],"hue-rotate":[{"hue-rotate":[z,O,I]}],invert:[{invert:["",z,O,I]}],saturate:[{saturate:[z,O,I]}],sepia:[{sepia:["",z,O,I]}],"backdrop-filter":[{"backdrop-filter":["","none",O,I]}],"backdrop-blur":[{"backdrop-blur":Js()}],"backdrop-brightness":[{"backdrop-brightness":[z,O,I]}],"backdrop-contrast":[{"backdrop-contrast":[z,O,I]}],"backdrop-grayscale":[{"backdrop-grayscale":["",z,O,I]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[z,O,I]}],"backdrop-invert":[{"backdrop-invert":["",z,O,I]}],"backdrop-opacity":[{"backdrop-opacity":[z,O,I]}],"backdrop-saturate":[{"backdrop-saturate":[z,O,I]}],"backdrop-sepia":[{"backdrop-sepia":["",z,O,I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",O,I]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[z,"initial",O,I]}],ease:[{ease:["linear","initial",w,O,I]}],delay:[{delay:[z,O,I]}],animate:[{animate:["none",x,O,I]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,O,I]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:St()}],"rotate-x":[{"rotate-x":St()}],"rotate-y":[{"rotate-y":St()}],"rotate-z":[{"rotate-z":St()}],scale:[{scale:fr()}],"scale-x":[{"scale-x":fr()}],"scale-y":[{"scale-y":fr()}],"scale-z":[{"scale-z":fr()}],"scale-3d":["scale-3d"],skew:[{skew:ts()}],"skew-x":[{"skew-x":ts()}],"skew-y":[{"skew-y":ts()}],transform:[{transform:[O,I,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pr()}],"translate-x":[{"translate-x":pr()}],"translate-y":[{"translate-y":pr()}],"translate-z":[{"translate-z":pr()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",O,I]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",O,I]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[z,as,Ht,Na]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},eO=OI(ZI);function p0(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=p0(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function tO(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=p0(e))&&(s&&(s+=" "),s+=t);return s}function qh(...e){return eO(tO(e))}const rO=({src:e,alt:t,className:r,placeholder:s,...n})=>{const[i,a]=b.useState(!1);return u.jsxs("div",{className:qh("relative overflow-hidden",r),children:[!i&&u.jsx("div",{className:"absolute inset-0 bg-slate-200 dark:bg-slate-800 animate-pulse",style:{filter:"blur(10px)",backgroundImage:s?`url(${s})`:void 0,backgroundSize:"cover"}}),u.jsx(Xy.img,{initial:{opacity:0},animate:{opacity:i?1:0},transition:{duration:.5,ease:"easeOut"},src:e,alt:t,loading:"lazy",decoding:"async",onLoad:()=>a(!0),className:qh("w-full h-full object-cover relative z-10",r),...n})]})},sO=({car:e,isSaved:t,onToggleSave:r})=>{const s=zr(),{addCarToCompare:n,removeCarFromCompare:i,isInComparison:a}=t0(),o=b.useRef(null),l=a(e.id),c=f=>{f.stopPropagation(),l?i(e.id):n(e)},d=f=>{if(!o.current)return;const p=o.current.getBoundingClientRect(),m=f.clientX-p.left,g=f.clientY-p.top;o.current.style.setProperty("--mouse-x",`${m}px`),o.current.style.setProperty("--mouse-y",`${g}px`)},h=Math.round(e.price/72);return u.jsxs("button",{ref:o,onMouseMove:d,onClick:()=>s(`/vehicle/${e.id}`),className:"glass-premium group relative overflow-hidden text-left flex flex-col h-full active:scale-[0.98] transition-all duration-300",children:[u.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden p-8 flex items-center justify-center rounded-t-[24px]",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none"}),u.jsxs("div",{className:"absolute top-6 left-6 z-20 flex flex-col gap-2 items-start",children:[e.badge&&u.jsx("span",{className:"px-3 py-1.5 bg-[#00aed9]/80 backdrop-blur-md text-white text-[10px] font-black uppercase tracking-widest rounded-full shadow-lg border border-white/10",children:e.badge}),u.jsxs("span",{className:"px-3 py-1.5 bg-slate-900/60 text-slate-200 text-[10px] font-bold uppercase tracking-widest rounded-full shadow-sm flex items-center gap-1 backdrop-blur-md border border-white/10",children:[u.jsx(_i,{size:12,className:"text-[#00aed9]"})," Richard Certified"]})]}),u.jsxs("div",{className:"absolute top-6 right-6 z-20 flex flex-col gap-3",children:[u.jsx("div",{onClick:r,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-lg border backdrop-blur-md ${t?"bg-rose-500 border-rose-500 text-white":"bg-slate-900/40 border-white/10 text-white hover:text-rose-400"}`,children:u.jsx(zn,{size:18,fill:t?"currentColor":"none"})}),u.jsx("div",{onClick:c,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-lg border backdrop-blur-md ${l?"bg-[#00aed9] text-white border-[#00aed9]":"bg-slate-900/40 border-white/10 text-white hover:text-[#00aed9]"}`,children:u.jsx(Pm,{size:18})})]}),u.jsx(rO,{src:e.img,alt:e.name,className:"w-full h-full object-contain transition-all duration-700 drop-shadow-2xl z-10 group-hover:scale-110 group-hover:-rotate-1"})]}),u.jsxs("div",{className:"p-8 flex-1 flex flex-col relative z-20",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:"text-[10px] font-black text-[#00aed9] uppercase tracking-[0.2em]",children:e.type}),u.jsx("div",{className:"h-px w-8 bg-[#00aed9]/50"})]}),u.jsx("h3",{className:"text-2xl font-black text-white tracking-tighter group-hover:text-[#00aed9] transition-colors line-clamp-1 drop-shadow-md text-glow",children:e.name})]}),u.jsxs("div",{className:"flex gap-2 mb-6 flex-wrap",children:[u.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"Auto"}),u.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"Gasolina"}),u.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-3 py-1 rounded-full text-slate-300 font-bold backdrop-blur-sm",children:"4 Puertas"})]}),u.jsxs("div",{className:"mt-auto flex items-end justify-between border-t border-white/10 pt-6",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"text-3xl font-black text-white tracking-tight text-glow",children:["$",e.price.toLocaleString()]}),u.jsxs("p",{className:"text-[10px] font-bold text-[#00aed9] mt-1 flex items-center gap-1",children:["Est. $",h,"/mo"]})]}),u.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00aed9] text-white flex items-center justify-center shadow-[0_0_15px_rgba(0,174,217,0.5)] group-hover:scale-110 transition-transform",children:u.jsx($l,{size:20})})]})]})]})},Hh=async e=>{try{const t=qr(fe,"behavioral_events");await Hr(t,{...e,timestamp:Gr(),sessionId:sessionStorage.getItem("richard_session_id")||"anonymous"}),nO(e)}catch(t){console.error("Retargeting Log Error:",t)}},nO=e=>{const t=parseInt(localStorage.getItem(`views_${e.carId}`)||"0")+1;if(localStorage.setItem(`views_${e.carId}`,t.toString()),t>=2&&e.action==="view"){const r=localStorage.getItem("current_dealer_name")||"Richard Automotive";"Notification"in window&&Notification.permission==="granted"&&new Notification(`Inters Detectado en ${r}!`,{body:"Has visto este auto varias veces. Quieres una oferta exclusiva por WhatsApp?",icon:"/pwa-192x192.png"})}},iO={id:"richard-automotive",name:"Richard Automotive",themeColor:"#00aed9",welcomeMessage:"Bienvenido a Richard Automotive. En qu vehculo ests interesado hoy?"},m0=b.createContext(void 0),aO=({children:e})=>{const[t,r]=b.useState(()=>{const n=localStorage.getItem("current_dealer_id"),i=localStorage.getItem("current_dealer_name"),a=localStorage.getItem("current_dealer_logo"),o=localStorage.getItem("current_dealer_welcome");return n&&i?{id:n,name:i,logo:a||void 0,welcomeMessage:o||void 0}:iO}),s=n=>{localStorage.setItem("current_dealer_id",n.id),localStorage.setItem("current_dealer_name",n.name),n.logo&&localStorage.setItem("current_dealer_logo",n.logo),n.welcomeMessage&&localStorage.setItem("current_dealer_welcome",n.welcomeMessage),r(n)};return u.jsx(m0.Provider,{value:{currentDealer:t,setDealer:s},children:e})},oO=()=>{const e=b.useContext(m0);if(!e)throw new Error("useDealer must be used within a DealerProvider");return e},lO=({inventory:e,initialVisualSearch:t,onClearVisualSearch:r,onMagicFix:s,onOpenGarage:n})=>{const[i,a]=b.useState(""),[o,l]=b.useState("all"),[c,d]=b.useState(null),[h,f]=b.useState([]),[p,m]=b.useState(null),[g,y]=b.useState(!1),[w,x]=b.useState(!1),[v,S]=b.useState(!1),[k,T]=b.useState(!1),[C,_]=b.useState(null),[A,E]=b.useState([]),[P,M]=b.useState([]),[V,Q]=b.useState(!1),{user:F}=b.useContext(mg),B=zr(),H=sl();b.useEffect(()=>{const D=zl("richard_saved_cars");if(D)try{f(JSON.parse(D))}catch(G){console.error("Error parsing saved cars cookie",G)}},[]),b.useEffect(()=>{t&&Ce(t)},[t]);const R=(D,G)=>{if(D.stopPropagation(),!F){B("/login",{state:{from:H}});return}f(pe=>{const Vt=!pe.includes(G),ut=Vt?[...pe,G]:pe.filter(Ys=>Ys!==G);return Vt&&Hh({carId:G,action:"garage_add"}),Kn("richard_saved_cars",JSON.stringify(ut),30),ut})},Ce=async D=>{T(!0),y(!0);try{const G=await cg(D),pe=G.search_query||G.keywords[0];a(pe);const{searchSemanticInventoryByText:Vt}=await q(async()=>{const{searchSemanticInventoryByText:Ui}=await Promise.resolve().then(()=>Z1);return{searchSemanticInventoryByText:Ui}},void 0),ut=await Vt(pe);ut.length>0?(_(`Identificado: ${G.description}. Encontramos coincidencias similares en el inventario.`),E(ut.map(Ui=>Ui.car_id))):(_(G.description),E([]));const Ys=(G.type||"").toLowerCase();["suv","sedan","pickup","luxury"].includes(Ys)?l(Ys):l("all"),r&&r(),y(!1)}catch(G){console.error("Error en bsqueda visual automtica",G),alert("No pudimos analizar la imagen importada."),y(!1)}finally{T(!1)}},{data:Se,fetchNextPage:_t,hasNextPage:Ge,isFetchingNextPage:X,status:ne}=zf({queryKey:["cars",o,c],queryFn:({pageParam:D})=>Nl(9,D,o,c),initialPageParam:null,getNextPageParam:D=>D.hasMore?D.lastDoc:void 0,enabled:!i&&!C,staleTime:300*1e3}),{currentDealer:es}=oO(),Ws=Se?.pages.flatMap(D=>D.cars)||[],Y=!!i||!!C,Js=e.filter(D=>{if(A.length>0)return A.includes(D.id);let G=!0;C?G=(D.name||"").toLowerCase().includes(i.toLowerCase())||(C||"").toLowerCase().includes(D.type||"")||D.type.includes(C.split(" ")[0]||""):G=(D.name||"").toLowerCase().includes(i.toLowerCase());const pe=o==="all"||D.type===o;return G&&pe}).sort((D,G)=>c==="asc"?D.price-G.price:c==="desc"?G.price-D.price:0),St=Y?Js:Ws,fr=!Y&&ne==="pending",ts=async D=>{const G=D.target.files?.[0];if(!G)return;const pe=new FileReader;pe.readAsDataURL(G),pe.onload=async()=>{const Vt=pe.result.split(",")[1];await Ce(Vt)}},pr=(D,G)=>{D.stopPropagation(),M(pe=>pe.some(ut=>ut.id===G.id)?pe.filter(ut=>ut.id!==G.id):pe.length>=2?(alert("Modo VS: Mximo 2 unidades para comparar."),pe):[...pe,G])},U0=async()=>{s&&(Q(!0),await s(),Q(!1))};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-0 lg:p-0 w-full pb-24 space-y-0 bg-slate-50 dark:bg-slate-950",children:[u.jsx(aI,{onNeuralMatch:()=>x(!0),onBrowseInventory:()=>{document.getElementById("inventory-grid")?.scrollIntoView({behavior:"smooth"})},onSellCar:()=>B("/appraisal")}),u.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 lg:px-12 space-y-16 -mt-20 relative z-20",children:[u.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-[40px] shadow-xl shadow-slate-200/50 dark:shadow-none p-4 md:p-8",children:u.jsx(oI,{})}),u.jsxs("div",{id:"inventory-grid",className:"scroll-mt-32",children:[u.jsx("div",{className:"sticky top-4 z-30 py-4 px-6 bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl rounded-full shadow-lg border border-slate-100 dark:border-slate-800 transition-all duration-300",children:u.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[u.jsxs("div",{className:"flex-1 relative w-full group",children:[u.jsx(kk,{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 group-focus-within:text-[#00aed9] transition-colors",size:24}),u.jsx("input",{type:"text",placeholder:C?`Buscando similares a: ${i}...`:"Buscar modelo, ao o caractersticas...",className:"w-full pl-16 pr-20 py-4 bg-transparent outline-none text-lg font-semibold dark:text-white placeholder:text-slate-300 dark:placeholder:text-slate-600",value:i,onChange:D=>{a(D.target.value),_(null),E([])}}),u.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:[u.jsxs("button",{onClick:()=>x(!0),className:"hidden md:flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-500 rounded-full transition-all text-xs font-bold uppercase tracking-wide border border-transparent hover:border-cyan-400",title:"Encuentra tu auto ideal por estilo de vida",children:[u.jsx(Bn,{size:16})," Neural Match"]}),u.jsx("button",{onClick:()=>y(!0),className:"p-3 bg-slate-100 dark:bg-slate-800 hover:bg-[#00aed9] hover:text-white text-slate-500 rounded-full transition-all",title:"Bsqueda Visual por IA",children:u.jsx(Ou,{size:20})})]})]}),u.jsxs("div",{className:"flex gap-4 items-center w-full lg:w-auto overflow-x-auto pb-2 lg:pb-0 scrollbar-hide",children:[u.jsx("div",{className:"flex gap-2 p-1.5 bg-slate-100 dark:bg-slate-800 rounded-full",children:["all","suv","sedan","pickup"].map(D=>u.jsx("button",{onClick:()=>l(D),className:`px-5 py-3 rounded-full font-black text-xs uppercase tracking-widest transition-all whitespace-nowrap ${o===D?"bg-[#173d57] dark:bg-[#00aed9] text-white shadow-md":"text-slate-400 hover:text-slate-600 dark:hover:text-white"}`,children:D==="all"?"Todos":D},D))}),u.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-slate-100 dark:bg-slate-800 rounded-full",children:[u.jsxs("button",{onClick:()=>d(D=>D==="asc"?null:"asc"),className:`px-4 py-3 rounded-full flex items-center gap-2 text-xs font-bold uppercase tracking-wide transition-all ${c==="asc"?"bg-[#00aed9] text-white":"text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,title:"Menor Precio",children:[u.jsx(na,{size:14,className:"rotate-180"})," ",u.jsx("span",{className:"hidden sm:inline",children:"$-$$$"})]}),u.jsxs("button",{onClick:()=>d(D=>D==="desc"?null:"desc"),className:`px-4 py-3 rounded-full flex items-center gap-2 text-xs font-bold uppercase tracking-wide transition-all ${c==="desc"?"bg-[#00aed9] text-white":"text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,title:"Mayor Precio",children:[u.jsx(na,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"$$$-$"})]})]})]})]})}),u.jsxs("div",{className:"flex justify-between items-end px-2 mt-8 mb-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-black text-slate-800 dark:text-white",children:[St.length," ",Y?"Resultados":"Vehculos"]}),h.length>0&&u.jsxs("button",{onClick:()=>n&&n(),className:"text-sm text-[#00aed9] font-bold mt-1 flex items-center gap-1 hover:underline cursor-pointer",children:[u.jsx(zn,{size:14,fill:"currentColor"})," Ver Mi Garaje Digital (",h.length,")"]})]}),C&&u.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-[#00aed9]/10 to-transparent border-l-4 border-[#00aed9] p-3 rounded-r-xl",children:[u.jsx(Ss,{size:16,className:"text-[#00aed9]"}),u.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-300",children:[u.jsx("span",{className:"font-bold text-[#00aed9]",children:":"})," Resultados visuales."]}),u.jsx("button",{onClick:()=>{_(null),a(""),l("all"),E([])},className:"ml-2 text-[10px] font-bold underline hover:text-[#00aed9]",children:"Limpiar"})]})]}),u.jsx("div",{className:"pb-10 space-y-8",children:fr?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(D=>u.jsx("div",{className:"h-[400px] bg-slate-100 dark:bg-slate-800 rounded-[40px] animate-pulse"},D))}):St.length===0?u.jsx("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-center bg-white dark:bg-slate-800/50 rounded-[40px] border-2 border-dashed border-slate-300 dark:border-slate-700 animate-in fade-in",children:Y?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-2xl font-black text-slate-300 dark:text-slate-500 uppercase tracking-tight",children:"Sin Resultados"}),u.jsx("button",{onClick:()=>{a(""),l("all"),_(null)},className:"mt-4 text-[#00aed9] font-bold underline hover:text-cyan-400",children:"Limpiar Filtros"})]}):u.jsxs(u.Fragment,{children:[u.jsx(nk,{size:48,className:"text-slate-400 mb-4"}),u.jsx("h3",{className:"text-2xl font-black text-slate-700 dark:text-white uppercase tracking-tight",children:"Base de datos vaca"}),u.jsx("p",{className:"text-slate-500 mt-2 max-w-md",children:"No hay autos visibles."}),s?u.jsx("button",{onClick:U0,disabled:V,className:"mt-6 px-8 py-4 bg-rose-600 hover:bg-rose-500 text-white rounded-full font-black uppercase tracking-widest shadow-xl shadow-rose-600/30 active:scale-95 transition-all flex items-center gap-3 animate-bounce",children:V?u.jsxs(u.Fragment,{children:[" ",u.jsx(Sn,{className:"animate-spin"})," Reparando... "]}):u.jsxs(u.Fragment,{children:[" ",u.jsx(Nk,{size:20}),"  Reparacin Automtica "]})}):u.jsx("p",{className:"text-slate-500 mb-6 max-w-md",children:"Ve al Admin Panel para configurar."})]})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:St.map(D=>u.jsx(sO,{car:D,onSelect:()=>{m(D),Hh({carId:D.id,action:"view"})},onCompare:G=>pr(G,D),isComparing:P.some(G=>G.id===D.id),isSaved:h.includes(D.id),onToggleSave:G=>R(G,D.id)},D.id))}),!Y&&Ge&&u.jsx("div",{className:"flex justify-center pt-8",children:u.jsxs("button",{onClick:()=>_t(),disabled:X,className:"px-8 py-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-full font-bold text-slate-600 dark:text-white hover:bg-[#00aed9] hover:text-white hover:border-[#00aed9] transition-all shadow-lg shadow-slate-200/50 dark:shadow-none active:scale-95 flex items-center gap-2 group",children:[X?u.jsx(Sn,{className:"animate-spin"}):u.jsx(na,{className:"group-hover:translate-y-1 transition-transform",size:18}),X?"Cargando ms...":"Cargar Ms Vehculos"]})})]})})]}),u.jsx(uI,{}),u.jsx(lI,{}),u.jsx(dI,{})]})]}),P.length>0&&u.jsxs("div",{className:"fixed bottom-24 lg:bottom-12 left-1/2 -translate-x-1/2 z-40 bg-[#173d57] dark:bg-[#0d2232] text-white pl-2 pr-6 py-2 rounded-full shadow-2xl flex items-center gap-4 animate-in slide-in-from-bottom-5 border border-[#00aed9]/30 backdrop-blur-md",children:[u.jsxs("div",{className:"flex -space-x-3",children:[P.map(D=>u.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[#173d57] dark:border-[#0d2232] bg-white flex items-center justify-center overflow-hidden",children:u.jsx("img",{src:D.img,alt:D.name,className:"w-full h-full object-cover"})},D.id)),P.length<2&&u.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[#173d57] dark:border-[#0d2232] bg-white/10 flex items-center justify-center text-xs font-bold border-dashed border-white/30",children:"?"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-bold text-sm leading-tight",children:"Comparativa VS"}),u.jsxs("span",{className:"text-[10px] text-cyan-300 font-medium",children:[P.length," de 2 Seleccionados"]})]}),P.length===2&&u.jsx("button",{onClick:()=>S(!0),className:"ml-2 bg-[#00aed9] hover:bg-cyan-400 text-white px-5 py-2 rounded-full text-xs font-black uppercase tracking-wider transition-all shadow-[0_0_15px_rgba(0,174,217,0.5)] animate-pulse",children:"Iniciar"}),u.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),u.jsx("button",{onClick:()=>M([]),className:"p-1.5 hover:bg-white/10 rounded-full text-slate-300 hover:text-white transition-colors",children:u.jsx(vt,{size:16})})]}),w&&u.jsx(nC,{inventory:e,onClose:()=>x(!1),onSelectCar:D=>{m(D),x(!1)}}),v&&u.jsx(iC,{cars:P,onClose:()=>S(!1)}),g&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-[#0d2232]/90 backdrop-blur-xl animate-in fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[40px] max-w-lg w-full relative shadow-2xl border border-slate-700",children:[u.jsx("button",{onClick:()=>y(!1),className:"absolute top-6 right-6 text-slate-400 hover:text-white transition-colors",children:u.jsx(vt,{})}),u.jsxs("h3",{className:"text-3xl font-black text-slate-800 dark:text-white mb-2 flex items-center gap-3",children:[u.jsx(Ou,{className:"text-[#00aed9]",size:32})," Visual AI"]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 font-medium",children:"Sube una foto y nuestra IA encontrar el match perfecto en nuestro inventario."}),k?u.jsxs("div",{className:"flex flex-col items-center justify-center h-48 space-y-4 border-2 border-dashed border-[#00aed9]/30 rounded-3xl bg-[#00aed9]/5",children:[u.jsx(Sn,{className:"w-12 h-12 text-[#00aed9] animate-spin"}),u.jsx("p",{className:"text-sm font-bold animate-pulse text-[#00aed9] uppercase tracking-widest",children:"Escaneando..."})]}):u.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-3xl cursor-pointer bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all group hover:border-[#00aed9]",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[u.jsx(Pk,{className:"w-12 h-12 mb-3 text-slate-400 group-hover:text-[#00aed9] transition-colors scale-100 group-hover:scale-110 duration-300"}),u.jsxs("p",{className:"mb-2 text-sm text-slate-500 dark:text-slate-400",children:[u.jsx("span",{className:"font-bold text-[#00aed9]",children:"Sube una foto"})," o arrastra aqu"]})]}),u.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:ts})]})]})}),p&&u.jsx(eC,{car:p,onClose:()=>m(null)}),u.jsx(dg,{inventory:e})]})},cO=()=>u.jsxs("a",{href:`https://wa.me/17875550123?text=${encodeURIComponent("Hola, me gustara ms informacin sobre su inventario.")}`,target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-24 right-5 z-50 p-4 bg-[#25D366] hover:bg-[#128C7E] text-white rounded-full shadow-lg hover:scale-110 transition-all duration-300 animate-bounce-slow flex items-center justify-center group",title:"Chat en WhatsApp",children:[u.jsx(vk,{size:28,fill:"white"}),u.jsx("span",{className:"absolute right-full mr-3 bg-white dark:bg-slate-800 text-slate-800 dark:text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Habla con Richard IA"})]}),uO=()=>{const[e,t]=b.useState(!1);b.useEffect(()=>{if(zl("richard_cookie_consent"))Sd();else{const i=setTimeout(()=>t(!0),1500);return()=>clearTimeout(i)}},[]);const r=()=>{Kn("richard_cookie_consent","true",365),Sd(),t(!1)},s=()=>{Kn("richard_cookie_consent","false",7),t(!1)};return e?u.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[1000] p-4 md:p-6 flex justify-center animate-in slide-in-from-bottom-10 fade-in duration-500",children:u.jsxs("div",{className:"bg-[#0d2232]/95 backdrop-blur-xl border border-slate-700 shadow-2xl rounded-3xl p-6 md:p-8 max-w-4xl w-full flex flex-col md:flex-row items-center gap-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00aed9] to-transparent opacity-50"}),u.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-[#00aed9]/10 rounded-full shrink-0",children:u.jsx(tk,{size:32,className:"text-[#00aed9]"})}),u.jsxs("div",{className:"flex-1 text-center md:text-left",children:[u.jsx("h4",{className:"text-white font-black text-lg mb-2",children:"Valoramos tu Privacidad"}),u.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed",children:["Utilizamos cookies propias y de terceros para mejorar tu experiencia de navegacin, analizar el trfico del sitio y personalizar el contenido del inventario. Al hacer clic en ",u.jsx("span",{className:"text-white font-bold",children:'"Aceptar todo"'}),", consientes el uso de todas las cookies."]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto shrink-0",children:[u.jsx("button",{onClick:s,className:"px-6 py-3 rounded-xl border border-slate-600 text-slate-300 hover:text-white hover:border-slate-500 text-xs font-bold uppercase tracking-widest transition-colors",children:"Rechazar"}),u.jsxs("button",{onClick:r,className:"px-8 py-3 bg-[#00aed9] hover:bg-cyan-500 text-white rounded-xl text-xs font-bold uppercase tracking-widest shadow-lg shadow-cyan-500/20 transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[u.jsx(_i,{size:16})," Aceptar Todo"]})]}),u.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-slate-500 hover:text-white transition-colors md:hidden",children:u.jsx(vt,{size:20})})]})}):null},kc=b.createContext({theme:"light",toggleTheme:()=>{}}),dO=({children:e})=>{const[t,r]=b.useState(()=>{const n=localStorage.getItem("theme");return n||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),s=()=>{r(n=>{const i=n==="light"?"dark":"light";return localStorage.setItem("theme",i),i})};return u.jsx(kc.Provider,{value:{theme:t,toggleTheme:s},children:e})};function hO(e={}){const{immediate:t=!1,onNeedRefresh:r,onOfflineReady:s,onRegistered:n,onRegisteredSW:i,onRegisterError:a}=e;let o,l;const c=async(h=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(o=await q(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{a?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||s?.()}),o.register({immediate:t}).then(h=>{i?i("/sw.js",h):n?.(h)}).catch(h=>{a?.(h)})}}return l=d(),c}function fO(e={}){const{immediate:t=!0,onNeedRefresh:r,onOfflineReady:s,onRegistered:n,onRegisteredSW:i,onRegisterError:a}=e,[o,l]=b.useState(!1),[c,d]=b.useState(!1),[h]=b.useState(()=>hO({immediate:t,onOfflineReady(){d(!0),s?.()},onNeedRefresh(){l(!0),r?.()},onRegistered:n,onRegisteredSW:i,onRegisterError:a}));return{needRefresh:[o,l],offlineReady:[c,d],updateServiceWorker:h}}const pO=()=>{const{offlineReady:[e,t],needRefresh:[r,s],updateServiceWorker:n}=fO({onRegistered(a){},onRegisterError(a){}}),i=()=>{t(!1),s(!1)};return!e&&!r?null:u.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[2000] animate-in slide-in-from-bottom-5 fade-in",children:u.jsxs("div",{className:"bg-[#0d2232] border border-[#00aed9]/30 p-4 rounded-2xl shadow-2xl flex items-center gap-4 text-white min-w-[300px]",children:[u.jsxs("div",{className:"p-3 bg-gradient-to-br from-[#00aed9] to-blue-600 rounded-xl relative",children:[u.jsx(ak,{size:20,className:"text-white relative z-10"}),u.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse rounded-xl"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-bold text-sm",children:e?"App lista para offline":"Nueva versin disponible"}),u.jsx("p",{className:"text-[10px] text-slate-400",children:e?"Ya puedes usar la app sin internet.":"Recarga para ver los cambios."})]}),r&&u.jsxs("button",{className:"px-4 py-2 bg-white text-[#0d2232] rounded-lg text-xs font-bold hover:bg-slate-200 transition-colors flex items-center gap-2",onClick:()=>n(!0),children:[u.jsx(Nm,{size:14})," Recargar"]}),u.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-xs",onClick:i,children:"Cerrar"})]})})},mO=()=>{const[e,t]=b.useState(!navigator.onLine);return b.useEffect(()=>{const r=()=>t(!1),s=()=>t(!0);return window.addEventListener("online",r),window.addEventListener("offline",s),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}},[]),e?u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[100] bg-red-600 text-white py-2 px-4 shadow-lg flex items-center justify-center gap-2 animate-in slide-in-from-bottom-full duration-500",children:[u.jsx(Ok,{size:16}),u.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Modo Offline Activo  Viendo datos guardados"})]}):null},gO=()=>{const{selectedCars:e,removeCarFromCompare:t}=t0(),r=zr();return e.length===0?null:u.jsx("div",{className:"fixed bottom-0 left-0 w-full z-50 p-4 flex justify-center pointer-events-none",children:u.jsxs("div",{className:"bg-[#0d2232] border border-[#00aed9]/30 rounded-2xl shadow-2xl p-4 flex items-center gap-6 pointer-events-auto max-w-2xl w-full backdrop-blur-xl animate-in slide-in-from-bottom duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00aed9]/10 flex items-center justify-center text-[#00aed9]",children:u.jsx(Pm,{size:20})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-white font-bold text-sm",children:"Comparando"}),u.jsxs("p",{className:"text-slate-400 text-xs",children:[e.length," Vehculos seleccionados"]})]})]}),u.jsxs("div",{className:"flex-1 flex items-center gap-2 overflow-x-auto",children:[e.map(s=>u.jsxs("div",{className:"relative group shrink-0",children:[u.jsx("img",{src:s.img,alt:s.name,className:"w-16 h-12 object-contain bg-white/5 rounded-lg border border-white/10"}),u.jsx("button",{onClick:()=>t(s.id),className:"absolute -top-2 -right-2 bg-slate-900 border border-slate-700 text-slate-400 hover:text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(vt,{size:12})})]},s.id)),e.length<3&&u.jsx("div",{className:"w-16 h-12 rounded-lg border border-dashed border-slate-700 flex items-center justify-center text-slate-600 text-xs text-center leading-none",children:"Agregar +"})]}),u.jsxs("button",{onClick:()=>r("/compare"),className:"bg-[#00aed9] hover:bg-[#009ac0] text-slate-900 font-black uppercase text-xs tracking-widest py-3 px-6 rounded-xl transition-all shadow-lg shadow-cyan-500/20 flex items-center gap-2",children:["Comparar ",u.jsx(Cm,{size:16})]})]})})},g0=b.createContext(void 0),yO=({children:e})=>{const[t,r]=b.useState([]),s=b.useCallback(i=>{r(a=>a.filter(o=>o.id!==i))},[]),n=b.useCallback((i,a)=>{const o=Date.now().toString();r(l=>[...l,{id:o,type:i,message:a}]),setTimeout(()=>{s(o)},5e3)},[s]);return u.jsxs(g0.Provider,{value:{notifications:t,addNotification:n,removeNotification:s},children:[e,u.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(i=>u.jsxs("div",{className:`
              pointer-events-auto flex items-start gap-3 p-4 rounded-xl shadow-2xl backdrop-blur-md border border-white/10 text-white min-w-[300px] max-w-sm animate-in slide-in-from-right-10 fade-in duration-300
              ${i.type==="success"?"bg-emerald-600/90 shadow-emerald-900/20":""}
              ${i.type==="error"?"bg-rose-600/90 shadow-rose-900/20":""}
              ${i.type==="info"?"bg-slate-800/90 shadow-slate-900/20":""}
            `,children:[u.jsxs("div",{className:"mt-0.5",children:[i.type==="success"&&u.jsx(ek,{size:18}),i.type==="error"&&u.jsx(Ml,{size:18}),i.type==="info"&&u.jsx(hk,{size:18})]}),u.jsx("div",{className:"flex-1 text-sm font-medium leading-relaxed",children:i.message}),u.jsx("button",{onClick:()=>s(i.id),className:"text-white/60 hover:text-white transition-colors",children:u.jsx(vt,{size:16})})]},i.id))})]})},vO=()=>{const e=b.useContext(g0);if(!e)throw new Error("useNotification must be used within a NotificationProvider");return e};var Ma={exports:{}},$a={};var Gh;function bO(){if(Gh)return $a;Gh=1;var e=vf();function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,n=e.useRef,i=e.useEffect,a=e.useMemo,o=e.useDebugValue;return $a.useSyncExternalStoreWithSelector=function(l,c,d,h,f){var p=n(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function y(k){if(!w){if(w=!0,x=k,k=h(k),f!==void 0&&m.hasValue){var T=m.value;if(f(T,k))return v=T}return v=k}if(T=v,r(x,k))return T;var C=h(k);return f!==void 0&&f(T,C)?(x=k,T):(x=k,v=C)}var w=!1,x,v,S=d===void 0?null:d;return[function(){return y(c())},S===null?void 0:function(){return y(S())}]},[c,d,h,f]);var g=s(l,p[0],p[1]);return i(function(){m.hasValue=!0,m.value=g},[g]),o(g),g},$a}var Kh;function wO(){return Kh||(Kh=1,Ma.exports=bO()),Ma.exports}var xO=wO();function _O(e){e()}function SO(){let e=null,t=null;return{clear(){e=null,t=null},notify(){_O(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const n=t={callback:r,next:null,prev:t};return n.prev?n.prev.next=n:e=n,function(){!s||e===null||(s=!1,n.next?n.next.prev=n.prev:t=n.prev,n.prev?n.prev.next=n.next:e=n.next)}}}}var Wh={notify(){},get:()=>[]};function kO(e,t){let r,s=Wh,n=0,i=!1;function a(g){d();const y=s.subscribe(g);let w=!1;return()=>{w||(w=!0,y(),h())}}function o(){s.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return i}function d(){n++,r||(r=e.subscribe(l),s=SO())}function h(){n--,r&&n===0&&(r(),r=void 0,s.clear(),s=Wh)}function f(){i||(i=!0,d())}function p(){i&&(i=!1,h())}const m={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>s};return m}var EO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TO=EO(),CO=()=>typeof navigator<"u"&&navigator.product==="ReactNative",AO=CO(),RO=()=>TO||AO?b.useLayoutEffect:b.useEffect,PO=RO(),jO=Symbol.for("react-redux-context"),IO=typeof globalThis<"u"?globalThis:{};function OO(){if(!b.createContext)return{};const e=IO[jO]??=new Map;let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var Dt=OO();function NO(e){const{children:t,context:r,serverState:s,store:n}=e,i=b.useMemo(()=>{const l=kO(n);return{store:n,subscription:l,getServerState:s?()=>s:void 0}},[n,s]),a=b.useMemo(()=>n.getState(),[n]);PO(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==n.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,a]);const o=r||Dt;return b.createElement(o.Provider,{value:i},t)}var MO=NO;function Ec(e=Dt){return function(){return b.useContext(e)}}var y0=Ec();function v0(e=Dt){const t=e===Dt?y0:Ec(e),r=()=>{const{store:s}=t();return s};return Object.assign(r,{withTypes:()=>r}),r}var $O=v0();function DO(e=Dt){const t=e===Dt?$O:v0(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var Tc=DO(),LO=(e,t)=>e===t;function UO(e=Dt){const t=e===Dt?y0:Ec(e),r=(s,n={})=>{const{equalityFn:i=LO}=typeof n=="function"?{equalityFn:n}:n,a=t(),{store:o,subscription:l,getServerState:c}=a;b.useRef(!0);const d=b.useCallback({[s.name](f){return s(f)}}[s.name],[s]),h=xO.useSyncExternalStoreWithSelector(l.addNestedSub,o.getState,c||o.getState,d,i);return b.useDebugValue(h),h};return Object.assign(r,{withTypes:()=>r}),r}var Pi=UO();function xe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var FO=typeof Symbol=="function"&&Symbol.observable||"@@observable",Jh=FO,Da=()=>Math.random().toString(36).substring(7).split("").join("."),VO={INIT:`@@redux/INIT${Da()}`,REPLACE:`@@redux/REPLACE${Da()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Da()}`},ri=VO;function Cc(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function b0(e,t,r){if(typeof e!="function")throw new Error(xe(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(xe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(xe(1));return r(b0)(e,t)}let s=e,n=t,i=new Map,a=i,o=0,l=!1;function c(){a===i&&(a=new Map,i.forEach((y,w)=>{a.set(w,y)}))}function d(){if(l)throw new Error(xe(3));return n}function h(y){if(typeof y!="function")throw new Error(xe(4));if(l)throw new Error(xe(5));let w=!0;c();const x=o++;return a.set(x,y),function(){if(w){if(l)throw new Error(xe(6));w=!1,c(),a.delete(x),i=null}}}function f(y){if(!Cc(y))throw new Error(xe(7));if(typeof y.type>"u")throw new Error(xe(8));if(typeof y.type!="string")throw new Error(xe(17));if(l)throw new Error(xe(9));try{l=!0,n=s(n,y)}finally{l=!1}return(i=a).forEach(x=>{x()}),y}function p(y){if(typeof y!="function")throw new Error(xe(10));s=y,f({type:ri.REPLACE})}function m(){const y=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(xe(11));function x(){const S=w;S.next&&S.next(d())}return x(),{unsubscribe:y(x)}},[Jh](){return this}}}return f({type:ri.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:p,[Jh]:m}}function BO(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:ri.INIT})>"u")throw new Error(xe(12));if(typeof r(void 0,{type:ri.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(xe(13))})}function zO(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const a=t[i];typeof e[a]=="function"&&(r[a]=e[a])}const s=Object.keys(r);let n;try{BO(r)}catch(i){n=i}return function(a={},o){if(n)throw n;let l=!1;const c={};for(let d=0;d<s.length;d++){const h=s[d],f=r[h],p=a[h],m=f(p,o);if(typeof m>"u")throw o&&o.type,new Error(xe(14));c[h]=m,l=l||m!==p}return l=l||s.length!==Object.keys(a).length,l?c:a}}function si(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...s)=>t(r(...s)))}function qO(...e){return t=>(r,s)=>{const n=t(r,s);let i=()=>{throw new Error(xe(15))};const a={getState:n.getState,dispatch:(l,...c)=>i(l,...c)},o=e.map(l=>l(a));return i=si(...o)(n.dispatch),{...n,dispatch:i}}}function HO(e){return Cc(e)&&"type"in e&&typeof e.type=="string"}var w0=Symbol.for("immer-nothing"),Yh=Symbol.for("immer-draftable"),je=Symbol.for("immer-state");function et(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ue=Object,Vr=Ue.getPrototypeOf,ni="constructor",ji="prototype",Jo="configurable",ii="enumerable",Rn="writable",Ds="value",wt=e=>!!e&&!!e[je];function nt(e){return e?x0(e)||Oi(e)||!!e[Yh]||!!e[ni]?.[Yh]||Ni(e)||Mi(e):!1}var GO=Ue[ji][ni].toString(),Qh=new WeakMap;function x0(e){if(!e||!Ac(e))return!1;const t=Vr(e);if(t===null||t===Ue[ji])return!0;const r=Ue.hasOwnProperty.call(t,ni)&&t[ni];if(r===Object)return!0;if(!Cr(r))return!1;let s=Qh.get(r);return s===void 0&&(s=Function.toString.call(r),Qh.set(r,s)),s===GO}function Ii(e,t,r=!0){Ks(e)===0?(r?Reflect.ownKeys(e):Ue.keys(e)).forEach(n=>{t(n,e[n],e)}):e.forEach((s,n)=>t(n,s,e))}function Ks(e){const t=e[je];return t?t.type_:Oi(e)?1:Ni(e)?2:Mi(e)?3:0}var Xh=(e,t,r=Ks(e))=>r===2?e.has(t):Ue[ji].hasOwnProperty.call(e,t),Yo=(e,t,r=Ks(e))=>r===2?e.get(t):e[t],ai=(e,t,r,s=Ks(e))=>{s===2?e.set(t,r):s===3?e.add(r):e[t]=r};function KO(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Oi=Array.isArray,Ni=e=>e instanceof Map,Mi=e=>e instanceof Set,Ac=e=>typeof e=="object",Cr=e=>typeof e=="function",La=e=>typeof e=="boolean";function WO(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var ft=e=>e.copy_||e.base_,Rc=e=>e.modified_?e.copy_:e.base_;function Qo(e,t){if(Ni(e))return new Map(e);if(Mi(e))return new Set(e);if(Oi(e))return Array[ji].slice.call(e);const r=x0(e);if(t===!0||t==="class_only"&&!r){const s=Ue.getOwnPropertyDescriptors(e);delete s[je];let n=Reflect.ownKeys(s);for(let i=0;i<n.length;i++){const a=n[i],o=s[a];o[Rn]===!1&&(o[Rn]=!0,o[Jo]=!0),(o.get||o.set)&&(s[a]={[Jo]:!0,[Rn]:!0,[ii]:o[ii],[Ds]:e[a]})}return Ue.create(Vr(e),s)}else{const s=Vr(e);if(s!==null&&r)return{...e};const n=Ue.create(s);return Ue.assign(n,e)}}function Pc(e,t=!1){return $i(e)||wt(e)||!nt(e)||(Ks(e)>1&&Ue.defineProperties(e,{set:gn,add:gn,clear:gn,delete:gn}),Ue.freeze(e),t&&Ii(e,(r,s)=>{Pc(s,!0)},!1)),e}function JO(){et(2)}var gn={[Ds]:JO};function $i(e){return e===null||!Ac(e)?!0:Ue.isFrozen(e)}var oi="MapSet",Xo="Patches",Zh="ArrayMethods",_0={};function ur(e){const t=_0[e];return t||et(0,e),t}var ef=e=>!!_0[e],Ls,S0=()=>Ls,YO=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:ef(oi)?ur(oi):void 0,arrayMethodsPlugin_:ef(Zh)?ur(Zh):void 0});function tf(e,t){t&&(e.patchPlugin_=ur(Xo),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Zo(e){el(e),e.drafts_.forEach(QO),e.drafts_=null}function el(e){e===Ls&&(Ls=e.parent_)}var rf=e=>Ls=YO(Ls,e);function QO(e){const t=e[je];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function sf(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[je].modified_&&(Zo(t),et(4)),nt(e)&&(e=nf(t,e));const{patchPlugin_:n}=t;n&&n.generateReplacementPatches_(r[je].base_,e,t)}else e=nf(t,r);return XO(t,e,!0),Zo(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==w0?e:void 0}function nf(e,t){if($i(t))return t;const r=t[je];if(!r)return li(t,e.handledSet_,e);if(!Di(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:s}=r;if(s)for(;s.length>0;)s.pop()(e);T0(r,e)}return r.copy_}function XO(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Pc(t,r)}function k0(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Di=(e,t)=>e.scope_===t,ZO=[];function E0(e,t,r,s){const n=ft(e),i=e.type_;if(s!==void 0&&Yo(n,s,i)===t){ai(n,s,r,i);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;Ii(n,(l,c)=>{if(wt(c)){const d=o.get(c)||[];d.push(l),o.set(c,d)}})}const a=e.draftLocations_.get(t)??ZO;for(const o of a)ai(n,o,r,i)}function eN(e,t,r){e.callbacks_.push(function(n){const i=t;if(!i||!Di(i,n))return;n.mapSetPlugin_?.fixSetContents(i);const a=Rc(i);E0(e,i.draft_??i,a,r),T0(i,n)})}function T0(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const n=s.getPath(e);n&&s.generatePatches_(e,n,t)}k0(e)}}function tN(e,t,r){const{scope_:s}=e;if(wt(r)){const n=r[je];Di(n,s)&&n.callbacks_.push(function(){Pn(e);const a=Rc(n);E0(e,r,a,t)})}else nt(r)&&e.callbacks_.push(function(){const i=ft(e);e.type_===3?i.has(r)&&li(r,s.handledSet_,s):Yo(i,t,e.type_)===r&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&li(Yo(e.copy_,t,e.type_),s.handledSet_,s)})}function li(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||wt(e)||t.has(e)||!nt(e)||$i(e)||(t.add(e),Ii(e,(s,n)=>{if(wt(n)){const i=n[je];if(Di(i,r)){const a=Rc(i);ai(e,s,a,e.type_),k0(i)}}else nt(n)&&li(n,t,r)})),e}function rN(e,t){const r=Oi(e),s={type_:r?1:0,scope_:t?t.scope_:S0(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let n=s,i=ci;r&&(n=[s],i=Us);const{revoke:a,proxy:o}=Proxy.revocable(n,i);return s.draft_=o,s.revoke_=a,[o,s]}var ci={get(e,t){if(t===je)return e;let r=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const n=ft(e);if(!Xh(n,t,e.type_))return sN(e,n,t);const i=n[t];if(e.finalized_||!nt(i)||s&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&WO(t))return i;if(i===Ua(e.base_,t)){Pn(e);const a=e.type_===1?+t:t,o=rl(e.scope_,i,e,a);return e.copy_[a]=o}return i},has(e,t){return t in ft(e)},ownKeys(e){return Reflect.ownKeys(ft(e))},set(e,t,r){const s=C0(ft(e),t);if(s?.set)return s.set.call(e.draft_,r),!0;if(!e.modified_){const n=Ua(ft(e),t),i=n?.[je];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(KO(r,n)&&(r!==void 0||Xh(e.base_,t,e.type_)))return!0;Pn(e),tl(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),tN(e,t,r)),!0},deleteProperty(e,t){return Pn(e),Ua(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),tl(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ft(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s&&{[Rn]:!0,[Jo]:e.type_!==1||t!=="length",[ii]:s[ii],[Ds]:r[t]}},defineProperty(){et(11)},getPrototypeOf(e){return Vr(e.base_)},setPrototypeOf(){et(12)}},Us={};for(let e in ci){let t=ci[e];Us[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Us.deleteProperty=function(e,t){return Us.set.call(this,e,t,void 0)};Us.set=function(e,t,r){return ci.set.call(this,e[0],t,r,e[0])};function Ua(e,t){const r=e[je];return(r?ft(r):e)[t]}function sN(e,t,r){const s=C0(t,r);return s?Ds in s?s[Ds]:s.get?.call(e.draft_):void 0}function C0(e,t){if(!(t in e))return;let r=Vr(e);for(;r;){const s=Object.getOwnPropertyDescriptor(r,t);if(s)return s;r=Vr(r)}}function tl(e){e.modified_||(e.modified_=!0,e.parent_&&tl(e.parent_))}function Pn(e){e.copy_||(e.assigned_=new Map,e.copy_=Qo(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var nN=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,r,s)=>{if(Cr(t)&&!Cr(r)){const i=r;r=t;const a=this;return function(l=i,...c){return a.produce(l,d=>r.call(this,d,...c))}}Cr(r)||et(6),s!==void 0&&!Cr(s)&&et(7);let n;if(nt(t)){const i=rf(this),a=rl(i,t,void 0);let o=!0;try{n=r(a),o=!1}finally{o?Zo(i):el(i)}return tf(i,s),sf(n,i)}else if(!t||!Ac(t)){if(n=r(t),n===void 0&&(n=t),n===w0&&(n=void 0),this.autoFreeze_&&Pc(n,!0),s){const i=[],a=[];ur(Xo).generateReplacementPatches_(t,n,{patches_:i,inversePatches_:a}),s(i,a)}return n}else et(1,t)},this.produceWithPatches=(t,r)=>{if(Cr(t))return(a,...o)=>this.produceWithPatches(a,l=>t(l,...o));let s,n;return[this.produce(t,r,(a,o)=>{s=a,n=o}),s,n]},La(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),La(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),La(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){nt(e)||et(8),wt(e)&&(e=iN(e));const t=rf(this),r=rl(t,e,void 0);return r[je].isManual_=!0,el(t),r}finishDraft(e,t){const r=e&&e[je];(!r||!r.isManual_)&&et(9);const{scope_:s}=r;return tf(s,t),sf(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));const s=ur(Xo).applyPatches_;return wt(e)?s(e,t):this.produce(e,n=>s(n,t))}};function rl(e,t,r,s){const[n,i]=Ni(t)?ur(oi).proxyMap_(t,r):Mi(t)?ur(oi).proxySet_(t,r):rN(t,r);return(r?.scope_??S0()).drafts_.push(n),i.callbacks_=r?.callbacks_??[],i.key_=s,r&&s!==void 0?eN(r,i,s):i.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:c}=l;i.modified_&&c&&c.generatePatches_(i,[],l)}),n}function iN(e){return wt(e)||et(10,e),A0(e)}function A0(e){if(!nt(e)||$i(e))return e;const t=e[je];let r,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Qo(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else r=Qo(e,!0);return Ii(r,(n,i)=>{ai(r,n,A0(i))},s),t&&(t.finalized_=!1),r}var aN=new nN,R0=aN.produce;function P0(e){return({dispatch:r,getState:s})=>n=>i=>typeof i=="function"?i(r,s,e):n(i)}var oN=P0(),lN=P0,cN=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?si:si.apply(null,arguments)};function af(e,t){function r(...s){if(t){let n=t(...s);if(!n)throw new Error(mt(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:s[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=s=>HO(s)&&s.type===e,r}var j0=class ds extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ds.prototype)}static get[Symbol.species](){return ds}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ds(...t[0].concat(this)):new ds(...t.concat(this))}};function of(e){return nt(e)?R0(e,()=>{}):e}function yn(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function uN(e){return typeof e=="boolean"}var dN=()=>function(t){const{thunk:r=!0,immutableCheck:s=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=t??{};let a=new j0;return r&&(uN(r)?a.push(oN):a.push(lN(r.extraArgument))),a},hN="RTK_autoBatch",lf=e=>t=>{setTimeout(t,e)},fN=(e={type:"raf"})=>t=>(...r)=>{const s=t(...r);let n=!0,i=!1,a=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:lf(10):e.type==="callback"?e.queueNotification:lf(e.timeout),c=()=>{a=!1,i&&(i=!1,o.forEach(d=>d()))};return Object.assign({},s,{subscribe(d){const h=()=>n&&d(),f=s.subscribe(h);return o.add(d),()=>{f(),o.delete(d)}},dispatch(d){try{return n=!d?.meta?.[hN],i=!n,i&&(a||(a=!0,l(c))),s.dispatch(d)}finally{n=!0}}})},pN=e=>function(r){const{autoBatch:s=!0}=r??{};let n=new j0(e);return s&&n.push(fN(typeof s=="object"?s:void 0)),n};function mN(e){const t=dN(),{reducer:r=void 0,middleware:s,devTools:n=!0,preloadedState:i=void 0,enhancers:a=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(Cc(r))o=zO(r);else throw new Error(mt(1));let l;typeof s=="function"?l=s(t):l=t();let c=si;n&&(c=cN({trace:!1,...typeof n=="object"&&n}));const d=qO(...l),h=pN(d);let f=typeof a=="function"?a(h):h();const p=c(...f);return b0(o,i,p)}function I0(e){const t={},r=[];let s;const n={addCase(i,a){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(mt(28));if(o in t)throw new Error(mt(29));return t[o]=a,n},addAsyncThunk(i,a){return a.pending&&(t[i.pending.type]=a.pending),a.rejected&&(t[i.rejected.type]=a.rejected),a.fulfilled&&(t[i.fulfilled.type]=a.fulfilled),a.settled&&r.push({matcher:i.settled,reducer:a.settled}),n},addMatcher(i,a){return r.push({matcher:i,reducer:a}),n},addDefaultCase(i){return s=i,n}};return e(n),[t,r,s]}function gN(e){return typeof e=="function"}function yN(e,t){let[r,s,n]=I0(t),i;if(gN(e))i=()=>of(e());else{const o=of(e);i=()=>o}function a(o=i(),l){let c=[r[l.type],...s.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[n]),c.reduce((d,h)=>{if(h)if(wt(d)){const p=h(d,l);return p===void 0?d:p}else{if(nt(d))return R0(d,f=>h(f,l));{const f=h(d,l);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},o)}return a.getInitialState=i,a}var vN=Symbol.for("rtk-slice-createasyncthunk");function bN(e,t){return`${e}/${t}`}function wN({creators:e}={}){const t=e?.asyncThunk?.[vN];return function(s){const{name:n,reducerPath:i=n}=s;if(!n)throw new Error(mt(11));const a=(typeof s.reducers=="function"?s.reducers(SN()):s.reducers)||{},o=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(v,S){const k=typeof v=="string"?v:v.type;if(!k)throw new Error(mt(12));if(k in l.sliceCaseReducersByType)throw new Error(mt(13));return l.sliceCaseReducersByType[k]=S,c},addMatcher(v,S){return l.sliceMatchers.push({matcher:v,reducer:S}),c},exposeAction(v,S){return l.actionCreators[v]=S,c},exposeCaseReducer(v,S){return l.sliceCaseReducersByName[v]=S,c}};o.forEach(v=>{const S=a[v],k={reducerName:v,type:bN(n,v),createNotation:typeof s.reducers=="function"};EN(S)?CN(k,S,c,t):kN(k,S,c)});function d(){const[v={},S=[],k=void 0]=typeof s.extraReducers=="function"?I0(s.extraReducers):[s.extraReducers],T={...v,...l.sliceCaseReducersByType};return yN(s.initialState,C=>{for(let _ in T)C.addCase(_,T[_]);for(let _ of l.sliceMatchers)C.addMatcher(_.matcher,_.reducer);for(let _ of S)C.addMatcher(_.matcher,_.reducer);k&&C.addDefaultCase(k)})}const h=v=>v,f=new Map,p=new WeakMap;let m;function g(v,S){return m||(m=d()),m(v,S)}function y(){return m||(m=d()),m.getInitialState()}function w(v,S=!1){function k(C){let _=C[v];return typeof _>"u"&&S&&(_=yn(p,k,y)),_}function T(C=h){const _=yn(f,S,()=>new WeakMap);return yn(_,C,()=>{const A={};for(const[E,P]of Object.entries(s.selectors??{}))A[E]=xN(P,C,()=>yn(p,C,y),S);return A})}return{reducerPath:v,getSelectors:T,get selectors(){return T(k)},selectSlice:k}}const x={name:n,reducer:g,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:y,...w(i),injectInto(v,{reducerPath:S,...k}={}){const T=S??i;return v.inject({reducerPath:T,reducer:g},k),{...x,...w(T,!0)}}};return x}}function xN(e,t,r,s){function n(i,...a){let o=t(i);return typeof o>"u"&&s&&(o=r()),e(o,...a)}return n.unwrapped=e,n}var _N=wN();function SN(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function kN({type:e,reducerName:t,createNotation:r},s,n){let i,a;if("reducer"in s){if(r&&!TN(s))throw new Error(mt(17));i=s.reducer,a=s.prepare}else i=s;n.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,a?af(e,a):af(e))}function EN(e){return e._reducerDefinitionType==="asyncThunk"}function TN(e){return e._reducerDefinitionType==="reducerWithPrepare"}function CN({type:e,reducerName:t},r,s,n){if(!n)throw new Error(mt(18));const{payloadCreator:i,fulfilled:a,pending:o,rejected:l,settled:c,options:d}=r,h=n(e,i,d);s.exposeAction(t,h),a&&s.addCase(h.fulfilled,a),o&&s.addCase(h.pending,o),l&&s.addCase(h.rejected,l),c&&s.addMatcher(h.settled,c),s.exposeCaseReducer(t,{fulfilled:a||vn,pending:o||vn,rejected:l||vn,settled:c||vn})}function vn(){}function mt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const AN={user:null,isAuthenticated:!1,loading:!1,error:null},O0=_N({name:"auth",initialState:AN,reducers:{loginStart:e=>{e.loading=!0,e.error=null},loginSuccess:(e,t)=>{e.loading=!1,e.isAuthenticated=!0,e.user=t.payload},loginFailure:(e,t)=>{e.loading=!1,e.error=t.payload},logout:e=>{e.user=null,e.isAuthenticated=!1,e.loading=!1,e.error=null}}}),{loginStart:RN,loginSuccess:N0,loginFailure:PN,logout:Li}=O0.actions,M0=O0.reducer,L2=Object.freeze(Object.defineProperty({__proto__:null,default:M0,loginFailure:PN,loginStart:RN,loginSuccess:N0,logout:Li},Symbol.toStringTag,{value:"Module"}));var Br;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Br||(Br={}));class Fa extends Error{constructor(t,r,s){super(t),this.message=t,this.code=r,this.data=s}}const jN=e=>{var t,r;return e?.androidBridge?"android":!((r=(t=e?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},IN=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},s=r.Plugins=r.Plugins||{},n=()=>t!==null?t.name:jN(e),i=()=>n()!=="web",a=h=>{const f=c.get(h);return!!(f?.platforms.has(n())||o(h))},o=h=>{var f;return(f=r.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},l=h=>e.console.error(h),c=new Map,d=(h,f={})=>{const p=c.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const m=n(),g=o(h);let y;const w=async()=>(!y&&m in f?y=typeof f[m]=="function"?y=await f[m]():y=f[m]:t!==null&&!y&&"web"in f&&(y=typeof f.web=="function"?y=await f.web():y=f.web),y),x=(_,A)=>{var E,P;if(g){const M=g?.methods.find(V=>A===V.name);if(M)return M.rtype==="promise"?V=>r.nativePromise(h,A.toString(),V):(V,Q)=>r.nativeCallback(h,A.toString(),V,Q);if(_)return(E=_[A])===null||E===void 0?void 0:E.bind(_)}else{if(_)return(P=_[A])===null||P===void 0?void 0:P.bind(_);throw new Fa(`"${h}" plugin is not implemented on ${m}`,Br.Unimplemented)}},v=_=>{let A;const E=(...P)=>{const M=w().then(V=>{const Q=x(V,_);if(Q){const F=Q(...P);return A=F?.remove,F}else throw new Fa(`"${h}.${_}()" is not implemented on ${m}`,Br.Unimplemented)});return _==="addListener"&&(M.remove=async()=>A()),M};return E.toString=()=>`${_.toString()}() { [capacitor code] }`,Object.defineProperty(E,"name",{value:_,writable:!1,configurable:!1}),E},S=v("addListener"),k=v("removeListener"),T=(_,A)=>{const E=S({eventName:_},A),P=async()=>{const V=await E;k({eventName:_,callbackId:V},A)},M=new Promise(V=>E.then(()=>V({remove:P})));return M.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},M},C=new Proxy({},{get(_,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?T:S;case"removeListener":return k;default:return v(A)}}});return s[h]=C,c.set(h,{name:h,proxy:C,platforms:new Set([...Object.keys(f),...g?[m]:[]])}),C};return r.convertFileSrc||(r.convertFileSrc=h=>h),r.getPlatform=n,r.handleError=l,r.isNativePlatform=i,r.isPluginAvailable=a,r.registerPlugin=d,r.Exception=Fa,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},ON=e=>e.Capacitor=IN(e),Fs=ON(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Zr=Fs.registerPlugin;class jc{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let s=!1;this.listeners[t]||(this.listeners[t]=[],s=!0),this.listeners[t].push(r);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),s&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,r);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,s){const n=this.listeners[t];if(!n){if(s){let i=this.retainedEventArguments[t];i||(i=[]),i.push(r),this.retainedEventArguments[t]=i}return}n.forEach(i=>i(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:s=>{this.notifyListeners(r,s)}}}unimplemented(t="not implemented"){return new Fs.Exception(t,Br.Unimplemented)}unavailable(t="not available"){return new Fs.Exception(t,Br.Unavailable)}async removeListener(t,r){const s=this.listeners[t];if(!s)return;const n=s.indexOf(r);this.listeners[t].splice(n,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(s=>{this.notifyListeners(t,s)}))}}const cf=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),uf=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class NN extends jc{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(s=>{if(s.length<=0)return;let[n,i]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=uf(n).trim(),i=uf(i).trim(),r[n]=i}),r}async setCookie(t){try{const r=cf(t.key),s=cf(t.value),n=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${s||""}${n}; path=${i}; ${a};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Zr("CapacitorCookies",{web:()=>new NN});const MN=async e=>new Promise((t,r)=>{const s=new FileReader;s.onload=()=>{const n=s.result;t(n.indexOf(",")>=0?n.split(",")[1]:n)},s.onerror=n=>r(n),s.readAsDataURL(e)}),$N=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(n=>n.toLocaleLowerCase()).reduce((n,i,a)=>(n[i]=e[t[a]],n),{})},DN=(e,t=!0)=>e?Object.entries(e).reduce((s,n)=>{const[i,a]=n;let o,l;return Array.isArray(a)?(l="",a.forEach(c=>{o=t?encodeURIComponent(c):c,l+=`${i}=${o}&`}),l.slice(0,-1)):(o=t?encodeURIComponent(a):a,l=`${i}=${o}`),`${s}&${l}`},"").substr(1):null,LN=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),n=$N(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(n.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,o]of Object.entries(e.data||{}))i.set(a,o);r.body=i.toString()}else if(n.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((o,l)=>{i.append(l,o)});else for(const o of Object.keys(e.data))i.append(o,e.data[o]);r.body=i;const a=new Headers(r.headers);a.delete("content-type"),r.headers=a}else(n.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class UN extends jc{async request(t){const r=LN(t,t.webFetchExtra),s=DN(t.params,t.shouldEncodeUrlParams),n=s?`${t.url}?${s}`:t.url,i=await fetch(n,r),a=i.headers.get("content-type")||"";let{responseType:o="text"}=i.ok?t:{};a.includes("application/json")&&(o="json");let l,c;switch(o){case"arraybuffer":case"blob":c=await i.blob(),l=await MN(c);break;case"json":l=await i.json();break;default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Zr("CapacitorHttp",{web:()=>new UN});var df;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(df||(df={}));var hf;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(hf||(hf={}));class FN extends jc{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Zr("SystemBars",{web:()=>new FN});const Gt=Zr("PushNotifications",{}),VN=async()=>{if(!Fs.isNativePlatform())return;let e=await Gt.checkPermissions();if(e.receive==="prompt"&&(e=await Gt.requestPermissions()),e.receive!=="granted"){console.error("User denied permissions!");return}await Gt.register(),Gt.addListener("registration",t=>{}),Gt.addListener("registrationError",t=>{console.error("Error on registration: "+JSON.stringify(t))}),Gt.addListener("pushNotificationReceived",t=>{alert(`Mensaje de Richard Auto: ${t.title}
${t.body}`)}),Gt.addListener("pushNotificationActionPerformed",t=>{})};function BN(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,r){return new Proxy({},{get(s,n){return(i,a,o)=>{const l=e.Capacitor.Plugins[r];if(l===void 0){o(new Error(`Capacitor plugin ${r} not found`));return}if(typeof l[n]!="function"){o(new Error(`Method ${n} not found in Capacitor plugin ${r}`));return}(async()=>{try{const c=await l[n](i);a(c)}catch(c){o(c)}})()}}})}})}function zN(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,r){return e.cordova.plugins[r]}})}function qN(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?BN(window):window.cordova!==void 0&&zN(window))}const ff=Zr("Geolocation",{web:()=>q(()=>import("./web--0y7BETA.js"),__vite__mapDeps([7,1,2])).then(e=>new e.GeolocationWeb)});qN();var pf;(function(e){e[e.Sunday=1]="Sunday",e[e.Monday=2]="Monday",e[e.Tuesday=3]="Tuesday",e[e.Wednesday=4]="Wednesday",e[e.Thursday=5]="Thursday",e[e.Friday=6]="Friday",e[e.Saturday=7]="Saturday"})(pf||(pf={}));const $0=Zr("LocalNotifications",{web:()=>q(()=>import("./web-BFxWANXr.js"),__vite__mapDeps([8,1,2])).then(e=>new e.LocalNotificationsWeb)}),mf={latitude:18.3986,longitude:-66.1557},HN=500;function GN(e,t,r,s){const i=bn(r-e),a=bn(s-t),o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(bn(e))*Math.cos(bn(r))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))*1e3}function bn(e){return e*(Math.PI/180)}const KN=async()=>{if(!Fs.isNativePlatform()){console.log("Geofencing skipped (Web Platform)");return}try{const e=await $0.requestPermissions(),t=await ff.requestPermissions();if(e.display!=="granted"||t.location!=="granted"){console.log("Permissions denied for Geofencing");return}ff.watchPosition({enableHighAccuracy:!0,timeout:5e3},r=>{if(r){const s=GN(r.coords.latitude,r.coords.longitude,mf.latitude,mf.longitude);console.log(`Distance to dealer: ${Math.floor(s)}m`),s<HN&&WN()}})}catch(e){console.error("Geofence Error:",e)}};let gf=0;const WN=async()=>{const e=Date.now();e-gf<36e5||(gf=e,await $0.schedule({notifications:[{title:" Bienvenido a Richard Auto!",body:"Abre tu App para ver las ofertas exclusivas de hoy.",id:1,schedule:{at:new Date(Date.now()+100)},sound:void 0,attachments:void 0,actionTypeId:"",extra:null}]}))},JN=[{name:"Hyundai Tucson 2026",price:39500,type:"suv",badge:"Rediseado",img:"https://images.unsplash.com/photo-1695221971766-3d778d910dc7?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Elantra 2026",price:28900,type:"sedan",badge:"Deportivo",img:"https://images.unsplash.com/photo-1609520505218-7421da3b3d80?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Venue 2026",price:24500,type:"suv",badge:"Compacto",img:"https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?q=80&w=1200&auto=format&fit=crop",featured:!1},{name:"Hyundai Santa Fe 2026",price:44200,type:"suv",badge:"Ms Espacio",img:"https://images.unsplash.com/photo-1631522858632-1b157bd752e2?q=80&w=1200&auto=format&fit=crop",featured:!0},{name:"Hyundai Palisade 2026",price:58900,type:"luxury",badge:"Flagship",img:"https://images.unsplash.com/photo-1647494480572-c2834b6e56ad?q=80&w=1200&auto=format&fit=crop",featured:!0}],YN=()=>{const{theme:e,toggleTheme:t}=b.useContext(kc);return u.jsx("button",{onClick:t,"aria-label":`Activar modo ${e==="light"?"oscuro":"claro"}`,className:"p-2 rounded-full text-slate-400 hover:text-white hover:bg-white/10 transition-colors",children:e==="light"?u.jsx(wk,{size:18}):u.jsx(Ak,{size:18})})};var me=(e=>(e.STOREFRONT="storefront",e.ADMIN="admin",e.AI_CONSULTANT="ai_consultant",e.AI_LAB="ai_lab",e.BLOG="blog",e.DIGITAL_GARAGE="digital_garage",e.PRE_QUALIFY="pre_qualify",e.TRADE_IN="trade_in",e.CHAT="chat",e.CODE_ANALYZER="code_analyzer",e.IMAGES="images",e.VIDEO_STUDIO="video_studio",e.VOICE_ASSISTANT="voice_assistant",e.DEVOPS="devops",e.SETTINGS="settings",e.DIGITAL_TWIN="digital_twin",e))(me||{});const QN=({isMobileOpen:e,setIsMobileOpen:t})=>{const r=zr(),s=sl(),n=Tc(),{user:i}=Pi(d=>d.auth),a=i?.role||"user",o=async()=>{try{const{signOutUser:d}=await q(async()=>{const{signOutUser:h}=await Promise.resolve().then(()=>xC);return{signOutUser:h}},void 0);await d(),n(Li()),r("/")}catch(d){console.error("Logout error",d)}},c=(()=>{const d=s.pathname;return d.startsWith("/admin")?me.ADMIN:d==="/garage"?me.DIGITAL_GARAGE:d==="/qualify"?me.PRE_QUALIFY:d==="/consultant"?me.AI_CONSULTANT:d==="/blog"?me.BLOG:d==="/trade-in"?me.TRADE_IN:d==="/lab"?me.AI_LAB:d==="/digital-twin"?me.DIGITAL_TWIN:d==="/framework-lab"?"framework-lab":d.startsWith("/login")?"login":me.STOREFRONT})();return u.jsxs("nav",{className:"fixed inset-y-0 left-0 w-72 bg-[#173d57]/95 dark:bg-[#0d2232]/95 backdrop-blur-2xl border-r border-white/5 text-white flex flex-col shadow-2xl z-40 transform transition-transform duration-300 lg:translate-x-0 lg:static lg:h-screen pointer-events-auto "+(e?"translate-x-0":"-translate-x-full"),children:[u.jsx("div",{className:"p-10 flex justify-between items-center cursor-pointer group",onClick:()=>r("/"),children:u.jsxs("h1",{className:"text-3xl font-black tracking-tighter leading-none group-hover:scale-105 transition-transform",children:[u.jsx("span",{className:"text-[#00aed9]",children:"RICHARD"}),u.jsx("br",{}),"AUTOMOTIVE"]})}),u.jsxs("div",{className:"flex-1 px-6 space-y-2 overflow-y-auto custom-scrollbar",children:[u.jsx(it,{active:c===me.STOREFRONT,onClick:()=>{r("/"),t(!1)},icon:u.jsx(Ck,{size:20}),label:"Tienda Digital"}),u.jsx(it,{active:c===me.DIGITAL_GARAGE,onClick:()=>{r("/garage"),t(!1)},icon:u.jsx(Ik,{size:20}),label:"Mi Garaje"}),u.jsx(it,{active:c===me.PRE_QUALIFY,onClick:()=>{r("/qualify"),t(!1)},icon:u.jsx(lk,{size:20}),label:"Pre-Cualificacin"}),u.jsx(it,{active:c===me.TRADE_IN,onClick:()=>{r("/trade-in"),t(!1)},icon:u.jsx(Am,{size:20}),label:"Vender mi Auto"}),u.jsx(it,{active:c===me.AI_CONSULTANT,onClick:()=>{r("/consultant"),t(!1)},icon:u.jsx(JS,{size:20}),label:"Consultor IA"}),u.jsx(it,{active:c===me.BLOG,onClick:()=>{r("/blog"),t(!1)},icon:u.jsx(_k,{size:20}),label:"AI Newsroom"}),a==="admin"&&u.jsx(it,{active:s.pathname==="/framework-lab",onClick:()=>{r("/framework-lab"),t(!1)},icon:u.jsx(rk,{size:20,className:"text-cyan-400"}),label:"Framework Lab"}),a==="admin"&&u.jsx(it,{active:c===me.DIGITAL_TWIN,onClick:()=>{r("/digital-twin"),t(!1)},icon:u.jsx(fo,{size:20}),label:"Gemelo Digital"}),u.jsx("div",{className:"pt-4 my-2 border-t border-white/5"}),i?u.jsxs("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-white/10 shadow-inner",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#00aed9] to-cyan-600 flex items-center justify-center text-white shadow-lg shadow-cyan-500/20",children:u.jsx(fo,{size:18})}),u.jsxs("div",{className:"overflow-hidden",children:[u.jsx("p",{className:"text-xs font-black truncate text-white uppercase tracking-tight",children:i.email}),u.jsx("p",{className:"text-[10px] uppercase tracking-widest text-[#00aed9] font-black",children:a==="admin"?"Administrador":"Usuario"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[u.jsxs("button",{onClick:o,className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-red-500/10 text-red-400 hover:bg-red-500/20 text-[10px] font-black uppercase tracking-wider transition-all active:scale-95 border border-red-500/10",children:[u.jsx(gk,{size:14})," Salir"]}),a==="admin"&&u.jsxs("button",{onClick:()=>r("/admin"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 hover:bg-cyan-500/20 text-[10px] font-black uppercase tracking-wider transition-all active:scale-95 border border-cyan-500/10",children:[u.jsx(Mm,{size:14})," Admin"]})]})]}):u.jsx(it,{active:!1,onClick:()=>{r("/login"),t(!1)},icon:u.jsx(mk,{size:20}),label:"Iniciar Sesin",isAction:!0}),u.jsx("div",{className:"pt-2 my-2 border-t border-white/5"}),u.jsx(it,{active:c===me.AI_LAB,onClick:()=>{r("/lab"),t(!1)},icon:u.jsx(ck,{size:20}),label:"Laboratorio IA",highlight:!0})]}),u.jsx("div",{className:"p-6 border-t border-white/5 bg-black/10 backdrop-blur-md",children:u.jsx(YN,{})})]})},it=({active:e,onClick:t,icon:r,label:s,isAction:n=!1,highlight:i=!1})=>{let a="w-full flex items-center gap-4 px-5 py-4 rounded-2xl font-bold transition-all duration-300 group relative overflow-hidden ";return e?a+="bg-[#00aed9] text-white shadow-xl shadow-[#00aed9]/20":i?a+="bg-gradient-to-r from-amber-500/20 to-orange-600/20 text-amber-500 border border-amber-500/30 hover:shadow-lg hover:shadow-orange-500/20":n?a+="bg-gradient-to-r from-[#00aed9]/10 to-[#00aed9]/5 text-[#00aed9] hover:bg-[#00aed9]/20":a+="text-slate-400 hover:bg-white/5 hover:text-white",u.jsxs("button",{onClick:t,className:a,children:[u.jsx("div",{className:`absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${e?"hidden":""}`}),u.jsx("span",{className:"relative z-10",children:r}),u.jsx("span",{className:"relative z-10",children:s}),e&&u.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white rounded-l-full"})]})},XN=()=>{const e=Tc();b.useEffect(()=>{const t=jf(oe,async r=>{e(r?N0({uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,role:ql(r.email)?"admin":"user"}):Li())});return()=>t()},[e])},ZN=(e=9,t="all")=>zf({queryKey:["cars",t],queryFn:async({pageParam:r})=>await Nl(e,r,t),initialPageParam:null,getNextPageParam:r=>r.hasMore?r.lastDoc:void 0}),e2=()=>{const e=dl(),t=Vi({mutationFn:xm,onSuccess:()=>{e.invalidateQueries({queryKey:["cars"]})}}),r=Vi({mutationFn:_m,onSuccess:()=>{e.invalidateQueries({queryKey:["cars"]})}}),s=Vi({mutationFn:Sm,onSuccess:()=>{e.invalidateQueries({queryKey:["cars"]})}});return{addCar:t.mutateAsync,updateCar:r.mutateAsync,deleteCar:s.mutateAsync,isPending:t.isPending||r.isPending||s.isPending,error:t.error||r.error||s.error}},t2=K.lazy(()=>q(()=>import("./AdminPanel-BNzSC_u-.js"),__vite__mapDeps([9,1,10,11,12,13,2,14,15,16,17]))),r2=K.lazy(()=>q(()=>import("./DigitalTwinDashboard-D6xV3g9f.js"),__vite__mapDeps([18,1,14,2]))),s2=K.lazy(()=>q(()=>import("./AIConsultant-DNiysy1_.js"),__vite__mapDeps([19,1,2]))),n2=K.lazy(()=>q(()=>import("./AILabView-Dh15qjB7.js"),__vite__mapDeps([20,1,14,2]))),i2=K.lazy(()=>q(()=>import("./UserLogin-3h_r9O5u.js"),__vite__mapDeps([21,1,2]))),a2=K.lazy(()=>q(()=>import("./VehicleDetail-CNtj__pv.js"),__vite__mapDeps([22,1,2,10]))),o2=K.lazy(()=>q(()=>import("./TradeInView-EkdjCxkx.js"),__vite__mapDeps([23,1,24,2]))),l2=K.lazy(()=>q(()=>import("./AppraisalView-OO8mZQr4.js"),__vite__mapDeps([25,1,2]))),c2=K.lazy(()=>q(()=>import("./ComparisonView-Df6vekoJ.js"),__vite__mapDeps([26,1,24,2]))),u2=K.lazy(()=>q(()=>import("./AdminLogin-_Gxn7CTU.js"),__vite__mapDeps([27,1,2,16,11,28,12,29]))),d2=K.lazy(()=>q(()=>import("./BlogView-Dk1XBtbv.js"),__vite__mapDeps([30,1,2]))),h2=K.lazy(()=>q(()=>import("./DigitalGarage-BuXYB_-D.js"),__vite__mapDeps([31,1,24,29,11,32,2]))),f2=K.lazy(()=>q(()=>import("./PreQualifyView-CaOOZD_J.js"),__vite__mapDeps([33,1,24,11,28,12,2]))),p2=K.lazy(()=>q(()=>import("./PrivacyView-v7pVGtPT.js"),__vite__mapDeps([34,24,35,1,2]))),m2=K.lazy(()=>q(()=>import("./TermsView-oQq0Xir6.js"),__vite__mapDeps([36,24,32,1,2]))),g2=K.lazy(()=>q(()=>import("./NotFound-3vF-UmrX.js"),__vite__mapDeps([37,1,24,2]))),y2=K.lazy(()=>q(()=>import("./FrameworkDashboard-CX5trv9Q.js"),__vite__mapDeps([38,1,2,35,11,17,39,14]))),v2=K.lazy(()=>q(()=>import("./KanbanDemo-JjmkXRrF.js"),__vite__mapDeps([40,15,1,16,2]))),b2=K.lazy(()=>q(()=>import("./BetaOnboard-BVZ5aObl.js"),__vite__mapDeps([41,1,39,2]))),w2=K.lazy(()=>q(()=>import("./EarlyAdopterOnboard-cX_rQTLN.js"),__vite__mapDeps([42,1,10,2]))),x2=K.lazy(()=>q(()=>import("./B2BBillingDashboard-DiKukQ4b.js").then(e=>e.a),__vite__mapDeps([13,1,2,10,14]))),D0=()=>u.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0d2232] text-white relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-cyan-900/20 to-[#0d2232]"}),u.jsxs("div",{className:"z-10 flex flex-col items-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-cyan-500/30 border-t-cyan-400 rounded-full animate-spin mb-6 shadow-[0_0_30px_rgba(0,174,217,0.3)]"}),u.jsxs("h1",{className:"text-2xl font-black tracking-tighter mb-2",children:["RICHARD ",u.jsx("span",{className:"text-[#00aed9]",children:"AUTOMOTIVE"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),u.jsx("p",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400",children:"Initializing System v2.7"})]})]})]}),yf=({children:e})=>{const{user:t,loading:r}=Pi(n=>n.auth),s=sl();return r?u.jsx("div",{className:"p-10 flex justify-center",children:u.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-cyan-500 rounded-full border-t-transparent"})}):t?u.jsx(u.Fragment,{children:e}):u.jsx(bf,{to:"/login",state:{from:s},replace:!0})},wn=({children:e})=>{const{user:t,loading:r}=Pi(c=>c.auth),[s,n]=b.useState(!0),i=zr(),a=Tc();b.useEffect(()=>{let c;return q(async()=>{const{auth:d}=await Promise.resolve().then(()=>qS);return{auth:d}},void 0).then(({auth:d})=>{c=d.onAuthStateChanged(h=>{n(!1)})}),()=>c?.()},[]);const o=()=>{a(Li()),i("/")};return r||s?u.jsx(D0,{}):t?(t.role||"user")!=="admin"?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center bg-slate-50 dark:bg-slate-900",children:[u.jsx(Mm,{size:48,className:"text-red-500 mb-6"}),u.jsx("h2",{className:"text-3xl font-black text-slate-800 dark:text-white uppercase mb-2",children:"Acceso Denegado"}),u.jsx("p",{className:"text-slate-500 max-w-md mb-8",children:"Nivel de seguridad insuficiente para esta seccin."}),u.jsx("button",{onClick:o,className:"px-8 py-3 bg-slate-800 text-white rounded-xl font-bold uppercase",children:"Cerrar Sesin"})]}):u.jsx(u.Fragment,{children:e}):(console.warn("[AdminGuard] No active session, redirecting to login."),u.jsx(bf,{to:"/admin-login",replace:!0}))},_2=()=>{const[e,t]=b.useState(!1),[r,s]=b.useState(null),{theme:n}=b.useContext(kc),{user:i}=Pi(w=>w.auth);XN();const{data:a,fetchNextPage:o,hasNextPage:l,isLoading:c,isFetchingNextPage:d}=ZN(12),h=a?.pages.flatMap(w=>w.cars)||[],{addCar:f,updateCar:p,deleteCar:m}=e2(),{addNotification:g}=vO(),y=zr();return b.useEffect(()=>{const w=window.document.documentElement;w.classList.remove("light","dark"),w.classList.add(n)},[n]),b.useEffect(()=>{VN(),KN(),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(w){for(let x of w)console.log(" Force Unregistering SW:",x),x.unregister()})},[]),u.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-slate-50 dark:bg-slate-900 overflow-hidden relative",children:[u.jsxs("div",{className:"lg:hidden p-4 bg-[#173d57] text-white flex justify-between items-center shadow-md z-50",children:[u.jsxs("span",{className:"font-black text-xl tracking-tight",children:["RICHARD",u.jsx("span",{className:"text-[#00aed9]",children:"AUTO"})]}),u.jsx("button",{onClick:()=>t(!e),children:u.jsx(yk,{})})]}),u.jsx(QN,{isMobileOpen:e,setIsMobileOpen:t}),u.jsxs("main",{className:"flex-1 relative w-full h-screen overflow-y-auto bg-slate-950 text-slate-100",children:[u.jsx(pO,{}),u.jsx(mO,{}),u.jsx(dg,{inventory:h})," ",u.jsx(cO,{})," ",u.jsx(b.Suspense,{fallback:u.jsx(D0,{}),children:u.jsxs(z0,{children:[u.jsx(te,{path:"/",element:u.jsx(lO,{inventory:h,initialVisualSearch:r,onClearVisualSearch:()=>s(null),onMagicFix:void 0,onOpenGarage:()=>y("/garage")})}),u.jsx(te,{path:"/vehicle/:id",element:u.jsx(a2,{inventory:h})}),u.jsx(te,{path:"/trade-in",element:u.jsx(o2,{})}),u.jsx(te,{path:"/appraisal",element:u.jsx(l2,{})}),u.jsx(te,{path:"/compare",element:u.jsx(c2,{})}),u.jsx(te,{path:"/garage",element:u.jsx(yf,{children:u.jsx(h2,{inventory:h,onExit:()=>y("/")})})}),u.jsx(te,{path:"/qualify",element:u.jsx(f2,{onExit:()=>y("/")})}),u.jsx(te,{path:"/privacidad",element:u.jsx(p2,{})}),u.jsx(te,{path:"/terminos",element:u.jsx(m2,{})}),u.jsx(te,{path:"/consultant",element:u.jsx(s2,{inventory:h})}),u.jsx(te,{path:"/blog",element:u.jsx(d2,{})}),u.jsx(te,{path:"/lab",element:u.jsx(yf,{children:u.jsx(n2,{onExit:()=>y("/")})})}),u.jsx(te,{path:"/login",element:u.jsx(i2,{})}),u.jsx(te,{path:"/admin-login",element:u.jsx(u2,{})}),u.jsx(te,{path:"/admin",element:u.jsx(wn,{children:u.jsx(t2,{inventory:h,onUpdate:p,onAdd:f,onDelete:m,onInitializeDb:()=>km(JN)})})}),u.jsx(te,{path:"/framework-lab",element:u.jsx(wn,{children:u.jsx(y2,{})})}),u.jsx(te,{path:"/digital-twin",element:u.jsx(wn,{children:u.jsx(r2,{})})}),u.jsx(te,{path:"/kanban-demo",element:u.jsx(v2,{})}),u.jsx(te,{path:"/debug-onboard",element:u.jsx(b2,{})}),u.jsx(te,{path:"/coo-provision",element:u.jsx(w2,{})}),u.jsx(te,{path:"/admin/billing",element:u.jsx(wn,{children:u.jsx(x2,{})})}),u.jsx(te,{path:"*",element:u.jsx(g2,{})})]})}),u.jsx(uO,{})]})]})},S2=({children:e})=>{const t=!!(window.Capacitor&&window.Capacitor.isNative),r=t?V0:B0;return b.useEffect(()=>{console.log(`[SmartRouter] Active mode: ${t?"HashRouter (Native/Capacitor)":"BrowserRouter (Web)"}`)},[t]),u.jsx(r,{children:e})},k2=()=>u.jsx(fp,{children:u.jsx(dO,{children:u.jsx(_C,{children:u.jsx(yO,{children:u.jsx(hI,{children:u.jsxs(S2,{children:[u.jsx(_2,{}),u.jsx(gO,{})]})})})})})}),E2=mN({reducer:{auth:M0}});Hb();const T2=new Hv({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}}),L0=document.getElementById("root");if(!L0)throw new Error("Could not find root element to mount to");const C2=bv.createRoot(L0);C2.render(u.jsx(K.StrictMode,{children:u.jsx(MO,{store:E2,children:u.jsx(aO,{children:u.jsx(Gv,{client:T2,children:u.jsx(k2,{})})})})}));export{hC as $,Cm as A,YS as B,Am as C,t0 as D,oe as E,Tc as F,N0 as G,pb as H,hk as I,Mm as J,RN as K,Sn as L,vC as M,_k as N,PN as O,wC as P,oO as Q,xm as R,Ss as S,jm as T,fo as U,fC as V,jc as W,vt as X,dC as Y,$m as Z,q as _,$l as a,cC as a0,uC as a1,rk as a2,Zr as a3,Fs as a4,zn as a5,Pm as a6,zl as a7,J1 as a8,Nm as a9,Kn as aa,fe as ab,ik as ac,sk as ad,Ml as ae,N2 as af,LS as ag,ug as ah,VS as ai,bk as aj,Fa as ak,H1 as al,wm as am,Pi as an,nk as ao,kk as ap,pk as aq,$S as ar,gk as as,BS as at,Om as au,Tm as av,$2 as aw,qS as ax,xC as ay,L2 as az,XS as b,Tk as c,j as d,ZS as e,_i as f,Y1 as g,WS as h,FS as i,u as j,fb as k,yb as l,j2 as m,I2 as n,Ek as o,ag as p,DS as q,O2 as r,zS as s,XP as t,vO as u,Xy as v,ek as w,Bn as x,Ou as y,Q1 as z};
